<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>GDB (API): /home/stan/gdb/src/gdb/objc-lang.c Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">GDB (API)
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">/home/stan/gdb/src/gdb/objc-lang.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="objc-lang_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* Objective-C language support routines for GDB, the GNU debugger.</span>
<a name="l00002"></a>00002 <span class="comment"></span>
<a name="l00003"></a>00003 <span class="comment">   Copyright (C) 2002-2013 Free Software Foundation, Inc.</span>
<a name="l00004"></a>00004 <span class="comment"></span>
<a name="l00005"></a>00005 <span class="comment">   Contributed by Apple Computer, Inc.</span>
<a name="l00006"></a>00006 <span class="comment">   Written by Michael Snyder.</span>
<a name="l00007"></a>00007 <span class="comment"></span>
<a name="l00008"></a>00008 <span class="comment">   This file is part of GDB.</span>
<a name="l00009"></a>00009 <span class="comment"></span>
<a name="l00010"></a>00010 <span class="comment">   This program is free software; you can redistribute it and/or modify</span>
<a name="l00011"></a>00011 <span class="comment">   it under the terms of the GNU General Public License as published by</span>
<a name="l00012"></a>00012 <span class="comment">   the Free Software Foundation; either version 3 of the License, or</span>
<a name="l00013"></a>00013 <span class="comment">   (at your option) any later version.</span>
<a name="l00014"></a>00014 <span class="comment"></span>
<a name="l00015"></a>00015 <span class="comment">   This program is distributed in the hope that it will be useful,</span>
<a name="l00016"></a>00016 <span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00017"></a>00017 <span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00018"></a>00018 <span class="comment">   GNU General Public License for more details.</span>
<a name="l00019"></a>00019 <span class="comment"></span>
<a name="l00020"></a>00020 <span class="comment">   You should have received a copy of the GNU General Public License</span>
<a name="l00021"></a>00021 <span class="comment">   along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.  */</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;<a class="code" href="defs_8h.html">defs.h</a>&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="symtab_8h.html">symtab.h</a>&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="gdbtypes_8h.html">gdbtypes.h</a>&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="expression_8h.html">expression.h</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="parser-defs_8h.html">parser-defs.h</a>&quot;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="language_8h.html">language.h</a>&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="c-lang_8h.html">c-lang.h</a>&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="objc-lang_8h.html">objc-lang.h</a>&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="exceptions_8h.html">exceptions.h</a>&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="complaints_8h.html">complaints.h</a>&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;<a class="code" href="value_8h.html">value.h</a>&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="symfile_8h.html">symfile.h</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="objfiles_8h.html">objfiles.h</a>&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="gdb__string_8h.html">gdb_string.h</a>&quot;</span>         <span class="comment">/* for strchr */</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="target_8h.html">target.h</a>&quot;</span>             <span class="comment">/* for target_has_execution */</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="gdbcore_8h.html">gdbcore.h</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="gdbcmd_8h.html">gdbcmd.h</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="frame_8h.html">frame.h</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="gdb__regex_8h.html">gdb_regex.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="regcache_8h.html">regcache.h</a>&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="block_8h.html">block.h</a>&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="infcall_8h.html">infcall.h</a>&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;<a class="code" href="valprint_8h.html">valprint.h</a>&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="gdb__assert_8h.html">gdb_assert.h</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="cli-utils_8h.html">cli/cli-utils.h</a>&quot;</span>
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 <span class="preprocessor">#include &lt;ctype.h&gt;</span>
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="keyword">struct </span>objc_object {
<a name="l00052"></a>00052   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> isa;
<a name="l00053"></a>00053 };
<a name="l00054"></a>00054 
<a name="l00055"></a>00055 <span class="keyword">struct </span>objc_class {
<a name="l00056"></a>00056   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> isa; 
<a name="l00057"></a>00057   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> super_class; 
<a name="l00058"></a>00058   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="aarch64-tdep_8c.html#acc128f98d9ceca227038c771308eff39">name</a>;               
<a name="l00059"></a>00059   <span class="keywordtype">long</span> <a class="code" href="version_8h.html#ac91cf940e10a61b95cabc3258a06186b">version</a>;
<a name="l00060"></a>00060   <span class="keywordtype">long</span> info;
<a name="l00061"></a>00061   <span class="keywordtype">long</span> instance_size;
<a name="l00062"></a>00062   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> ivars;
<a name="l00063"></a>00063   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> methods;
<a name="l00064"></a>00064   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> cache;
<a name="l00065"></a>00065   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> protocols;
<a name="l00066"></a>00066 };
<a name="l00067"></a>00067 
<a name="l00068"></a>00068 <span class="keyword">struct </span>objc_super {
<a name="l00069"></a>00069   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> receiver;
<a name="l00070"></a>00070   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <span class="keyword">class</span>;
<a name="l00071"></a>00071 };
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 <span class="keyword">struct </span>objc_method {
<a name="l00074"></a>00074   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="aarch64-tdep_8c.html#acc128f98d9ceca227038c771308eff39">name</a>;
<a name="l00075"></a>00075   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> types;
<a name="l00076"></a>00076   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> imp;
<a name="l00077"></a>00077 };
<a name="l00078"></a>00078 
<a name="l00079"></a>00079 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span>objfile_data *objc_objfile_data;
<a name="l00080"></a>00080 
<a name="l00081"></a>00081 <span class="comment">/* Lookup a structure type named &quot;struct NAME&quot;, visible in lexical</span>
<a name="l00082"></a>00082 <span class="comment">   block BLOCK.  If NOERR is nonzero, return zero if NAME is not</span>
<a name="l00083"></a>00083 <span class="comment">   suitably defined.  */</span>
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 <span class="keyword">struct </span><a class="code" href="structsymbol.html">symbol</a> *
<a name="l00086"></a><a class="code" href="objc-lang_8h.html#a1a06666747961e4025fc3166fa757c8b">00086</a> <a class="code" href="objc-lang_8c.html#a1a06666747961e4025fc3166fa757c8b">lookup_struct_typedef</a> (<span class="keywordtype">char</span> *<a class="code" href="aarch64-tdep_8c.html#acc128f98d9ceca227038c771308eff39">name</a>, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structblock.html">block</a> *<a class="code" href="structblock.html">block</a>, <span class="keywordtype">int</span> noerr)
<a name="l00087"></a>00087 {
<a name="l00088"></a>00088   <span class="keyword">struct </span><a class="code" href="structsymbol.html">symbol</a> *sym;
<a name="l00089"></a>00089 
<a name="l00090"></a>00090   sym = <a class="code" href="symtab_8c.html#a8a5c3f803198aed047a55c0e4f61b315">lookup_symbol</a> (name, block, <a class="code" href="symtab_8h.html#a5c384cef81c5f50f32caadbfd6974a1aa1f05a16e681efd2e892974878c353f11">STRUCT_DOMAIN</a>, 0);
<a name="l00091"></a>00091 
<a name="l00092"></a>00092   <span class="keywordflow">if</span> (sym == NULL)
<a name="l00093"></a>00093     {
<a name="l00094"></a>00094       <span class="keywordflow">if</span> (noerr)
<a name="l00095"></a>00095         <span class="keywordflow">return</span> 0;
<a name="l00096"></a>00096       <span class="keywordflow">else</span> 
<a name="l00097"></a>00097         <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;No struct type named %s.&quot;</span>), name);
<a name="l00098"></a>00098     }
<a name="l00099"></a>00099   <span class="keywordflow">if</span> (<a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (<a class="code" href="symtab_8h.html#aadfeb02c4b5fc2b6764ad32eaccf0e58">SYMBOL_TYPE</a> (sym)) != <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462af3b3fc76f66c95e12946c0ef84409365">TYPE_CODE_STRUCT</a>)
<a name="l00100"></a>00100     {
<a name="l00101"></a>00101       <span class="keywordflow">if</span> (noerr)
<a name="l00102"></a>00102         <span class="keywordflow">return</span> 0;
<a name="l00103"></a>00103       <span class="keywordflow">else</span>
<a name="l00104"></a>00104         <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;This context has class, union or enum %s, not a struct.&quot;</span>), 
<a name="l00105"></a>00105                name);
<a name="l00106"></a>00106     }
<a name="l00107"></a>00107   <span class="keywordflow">return</span> sym;
<a name="l00108"></a>00108 }
<a name="l00109"></a>00109 
<a name="l00110"></a>00110 <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> 
<a name="l00111"></a><a class="code" href="objc-lang_8h.html#a00a3ec441186f1919762ea359222bb7a">00111</a> <a class="code" href="objc-lang_8c.html#a00a3ec441186f1919762ea359222bb7a">lookup_objc_class</a> (<span class="keyword">struct</span> gdbarch *gdbarch, <span class="keywordtype">char</span> *classname)
<a name="l00112"></a>00112 {
<a name="l00113"></a>00113   <span class="keyword">struct </span><a class="code" href="structtype.html">type</a> *char_type = <a class="code" href="gdbtypes_8c.html#addd01ebc9ccdf2cacb33ab01e281ddb8">builtin_type</a> (gdbarch)-&gt;<a class="code" href="structbuiltin__type.html#aaf6738aff8469bfe0b9d5d3793a3b59b">builtin_char</a>;
<a name="l00114"></a>00114   <span class="keyword">struct </span>value * <span class="keyword">function</span>, *classval;
<a name="l00115"></a>00115 
<a name="l00116"></a>00116   <span class="keywordflow">if</span> (! <a class="code" href="target_8h.html#a85885df22f7c1304269eaba1e1d618b7">target_has_execution</a>)
<a name="l00117"></a>00117     {
<a name="l00118"></a>00118       <span class="comment">/* Can&#39;t call into inferior to lookup class.  */</span>
<a name="l00119"></a>00119       <span class="keywordflow">return</span> 0;
<a name="l00120"></a>00120     }
<a name="l00121"></a>00121 
<a name="l00122"></a>00122   <span class="keywordflow">if</span> (<a class="code" href="minsyms_8c.html#af87f7a894386515074ddd71365bc09b8">lookup_minimal_symbol</a>(<span class="stringliteral">&quot;objc_lookUpClass&quot;</span>, 0, 0))
<a name="l00123"></a>00123     <span class="keyword">function</span> = <a class="code" href="valops_8c.html#a122c0454d98b26597f4bfa54ba4e587d">find_function_in_inferior</a>(<span class="stringliteral">&quot;objc_lookUpClass&quot;</span>, NULL);
<a name="l00124"></a>00124   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="minsyms_8c.html#af87f7a894386515074ddd71365bc09b8">lookup_minimal_symbol</a> (<span class="stringliteral">&quot;objc_lookup_class&quot;</span>, 0, 0))
<a name="l00125"></a>00125     <span class="keyword">function</span> = <a class="code" href="valops_8c.html#a122c0454d98b26597f4bfa54ba4e587d">find_function_in_inferior</a>(<span class="stringliteral">&quot;objc_lookup_class&quot;</span>, NULL);
<a name="l00126"></a>00126   <span class="keywordflow">else</span>
<a name="l00127"></a>00127     {
<a name="l00128"></a>00128       <a class="code" href="complaints_8c.html#a4528e524e1d7da5becb9b882d044a733">complaint</a> (&amp;<a class="code" href="complaints_8c.html#abfd145c3005621d8aa52476a65f8ce4f">symfile_complaints</a>,
<a name="l00129"></a>00129                  <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;no way to lookup Objective-C classes&quot;</span>));
<a name="l00130"></a>00130       <span class="keywordflow">return</span> 0;
<a name="l00131"></a>00131     }
<a name="l00132"></a>00132 
<a name="l00133"></a>00133   classval = <a class="code" href="valops_8c.html#abbbf41471a8d43ae4bd659e37c8ed578">value_string</a> (classname, strlen (classname) + 1, char_type);
<a name="l00134"></a>00134   classval = <a class="code" href="valops_8c.html#aaa184aecfd7121e9660f6385d03b8324">value_coerce_array</a> (classval);
<a name="l00135"></a>00135   <span class="keywordflow">return</span> (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>) <a class="code" href="value_8c.html#aa95e2692a6e5338edb5db75909064bc1">value_as_long</a> (<a class="code" href="infcall_8c.html#a8344d63cd8405f1e9fae104da173283d">call_function_by_hand</a> (<span class="keyword">function</span>, 
<a name="l00136"></a>00136                                                            1, &amp;classval));
<a name="l00137"></a>00137 }
<a name="l00138"></a>00138 
<a name="l00139"></a>00139 <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l00140"></a><a class="code" href="objc-lang_8h.html#a3433cd746f528992fd7e0376c9963fe6">00140</a> <a class="code" href="objc-lang_8c.html#a279b20357591b4a9387ac13864b6a667">lookup_child_selector</a> (<span class="keyword">struct</span> gdbarch *gdbarch, <span class="keywordtype">char</span> *selname)
<a name="l00141"></a>00141 {
<a name="l00142"></a>00142   <span class="keyword">struct </span><a class="code" href="structtype.html">type</a> *char_type = <a class="code" href="gdbtypes_8c.html#addd01ebc9ccdf2cacb33ab01e281ddb8">builtin_type</a> (gdbarch)-&gt;<a class="code" href="structbuiltin__type.html#aaf6738aff8469bfe0b9d5d3793a3b59b">builtin_char</a>;
<a name="l00143"></a>00143   <span class="keyword">struct </span>value * <span class="keyword">function</span>, *selstring;
<a name="l00144"></a>00144 
<a name="l00145"></a>00145   <span class="keywordflow">if</span> (! <a class="code" href="target_8h.html#a85885df22f7c1304269eaba1e1d618b7">target_has_execution</a>)
<a name="l00146"></a>00146     {
<a name="l00147"></a>00147       <span class="comment">/* Can&#39;t call into inferior to lookup selector.  */</span>
<a name="l00148"></a>00148       <span class="keywordflow">return</span> 0;
<a name="l00149"></a>00149     }
<a name="l00150"></a>00150 
<a name="l00151"></a>00151   <span class="keywordflow">if</span> (<a class="code" href="minsyms_8c.html#af87f7a894386515074ddd71365bc09b8">lookup_minimal_symbol</a>(<span class="stringliteral">&quot;sel_getUid&quot;</span>, 0, 0))
<a name="l00152"></a>00152     <span class="keyword">function</span> = <a class="code" href="valops_8c.html#a122c0454d98b26597f4bfa54ba4e587d">find_function_in_inferior</a>(<span class="stringliteral">&quot;sel_getUid&quot;</span>, NULL);
<a name="l00153"></a>00153   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="minsyms_8c.html#af87f7a894386515074ddd71365bc09b8">lookup_minimal_symbol</a> (<span class="stringliteral">&quot;sel_get_any_uid&quot;</span>, 0, 0))
<a name="l00154"></a>00154     <span class="keyword">function</span> = <a class="code" href="valops_8c.html#a122c0454d98b26597f4bfa54ba4e587d">find_function_in_inferior</a>(<span class="stringliteral">&quot;sel_get_any_uid&quot;</span>, NULL);
<a name="l00155"></a>00155   <span class="keywordflow">else</span>
<a name="l00156"></a>00156     {
<a name="l00157"></a>00157       <a class="code" href="complaints_8c.html#a4528e524e1d7da5becb9b882d044a733">complaint</a> (&amp;<a class="code" href="complaints_8c.html#abfd145c3005621d8aa52476a65f8ce4f">symfile_complaints</a>,
<a name="l00158"></a>00158                  <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;no way to lookup Objective-C selectors&quot;</span>));
<a name="l00159"></a>00159       <span class="keywordflow">return</span> 0;
<a name="l00160"></a>00160     }
<a name="l00161"></a>00161 
<a name="l00162"></a>00162   selstring = <a class="code" href="valops_8c.html#aaa184aecfd7121e9660f6385d03b8324">value_coerce_array</a> (<a class="code" href="valops_8c.html#abbbf41471a8d43ae4bd659e37c8ed578">value_string</a> (selname, 
<a name="l00163"></a>00163                                                 strlen (selname) + 1,
<a name="l00164"></a>00164                                                 char_type));
<a name="l00165"></a>00165   <span class="keywordflow">return</span> <a class="code" href="value_8c.html#aa95e2692a6e5338edb5db75909064bc1">value_as_long</a> (<a class="code" href="infcall_8c.html#a8344d63cd8405f1e9fae104da173283d">call_function_by_hand</a> (<span class="keyword">function</span>, 1, &amp;selstring));
<a name="l00166"></a>00166 }
<a name="l00167"></a>00167 
<a name="l00168"></a>00168 <span class="keyword">struct </span>value * 
<a name="l00169"></a><a class="code" href="objc-lang_8h.html#a2918cd26c41e4f167741b07b75f700a9">00169</a> <a class="code" href="objc-lang_8c.html#a2918cd26c41e4f167741b07b75f700a9">value_nsstring</a> (<span class="keyword">struct</span> gdbarch *gdbarch, <span class="keywordtype">char</span> *ptr, <span class="keywordtype">int</span> <a class="code" href="exec_8h.html#a00f945351279d3c8935f13d2b9f9b808">len</a>)
<a name="l00170"></a>00170 {
<a name="l00171"></a>00171   <span class="keyword">struct </span><a class="code" href="structtype.html">type</a> *char_type = <a class="code" href="gdbtypes_8c.html#addd01ebc9ccdf2cacb33ab01e281ddb8">builtin_type</a> (gdbarch)-&gt;<a class="code" href="structbuiltin__type.html#aaf6738aff8469bfe0b9d5d3793a3b59b">builtin_char</a>;
<a name="l00172"></a>00172   <span class="keyword">struct </span>value *stringValue[3];
<a name="l00173"></a>00173   <span class="keyword">struct </span>value *<span class="keyword">function</span>, *nsstringValue;
<a name="l00174"></a>00174   <span class="keyword">struct </span><a class="code" href="structsymbol.html">symbol</a> *sym;
<a name="l00175"></a>00175   <span class="keyword">struct </span><a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a>;
<a name="l00176"></a>00176 
<a name="l00177"></a>00177   <span class="keywordflow">if</span> (!<a class="code" href="target_8h.html#a85885df22f7c1304269eaba1e1d618b7">target_has_execution</a>)
<a name="l00178"></a>00178     <span class="keywordflow">return</span> 0;           <span class="comment">/* Can&#39;t call into inferior to create NSString.  */</span>
<a name="l00179"></a>00179 
<a name="l00180"></a>00180   stringValue[2] = <a class="code" href="valops_8c.html#abbbf41471a8d43ae4bd659e37c8ed578">value_string</a>(ptr, len, char_type);
<a name="l00181"></a>00181   stringValue[2] = <a class="code" href="valops_8c.html#aaa184aecfd7121e9660f6385d03b8324">value_coerce_array</a>(stringValue[2]);
<a name="l00182"></a>00182   <span class="comment">/* _NSNewStringFromCString replaces &quot;istr&quot; after Lantern2A.  */</span>
<a name="l00183"></a>00183   <span class="keywordflow">if</span> (<a class="code" href="minsyms_8c.html#af87f7a894386515074ddd71365bc09b8">lookup_minimal_symbol</a>(<span class="stringliteral">&quot;_NSNewStringFromCString&quot;</span>, 0, 0))
<a name="l00184"></a>00184     {
<a name="l00185"></a>00185       <span class="keyword">function</span> = <a class="code" href="valops_8c.html#a122c0454d98b26597f4bfa54ba4e587d">find_function_in_inferior</a>(<span class="stringliteral">&quot;_NSNewStringFromCString&quot;</span>, NULL);
<a name="l00186"></a>00186       nsstringValue = <a class="code" href="infcall_8c.html#a8344d63cd8405f1e9fae104da173283d">call_function_by_hand</a>(<span class="keyword">function</span>, 1, &amp;stringValue[2]);
<a name="l00187"></a>00187     }
<a name="l00188"></a>00188   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="minsyms_8c.html#af87f7a894386515074ddd71365bc09b8">lookup_minimal_symbol</a>(<span class="stringliteral">&quot;istr&quot;</span>, 0, 0))
<a name="l00189"></a>00189     {
<a name="l00190"></a>00190       <span class="keyword">function</span> = <a class="code" href="valops_8c.html#a122c0454d98b26597f4bfa54ba4e587d">find_function_in_inferior</a>(<span class="stringliteral">&quot;istr&quot;</span>, NULL);
<a name="l00191"></a>00191       nsstringValue = <a class="code" href="infcall_8c.html#a8344d63cd8405f1e9fae104da173283d">call_function_by_hand</a>(<span class="keyword">function</span>, 1, &amp;stringValue[2]);
<a name="l00192"></a>00192     }
<a name="l00193"></a>00193   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="minsyms_8c.html#af87f7a894386515074ddd71365bc09b8">lookup_minimal_symbol</a>(<span class="stringliteral">&quot;+[NSString stringWithCString:]&quot;</span>, 0, 0))
<a name="l00194"></a>00194     {
<a name="l00195"></a>00195       <span class="keyword">function</span>
<a name="l00196"></a>00196         = <a class="code" href="valops_8c.html#a122c0454d98b26597f4bfa54ba4e587d">find_function_in_inferior</a>(<span class="stringliteral">&quot;+[NSString stringWithCString:]&quot;</span>, NULL);
<a name="l00197"></a>00197       type = <a class="code" href="gdbtypes_8c.html#addd01ebc9ccdf2cacb33ab01e281ddb8">builtin_type</a> (gdbarch)-&gt;<a class="code" href="structbuiltin__type.html#a52238d85813719573b7876379b145307">builtin_long</a>;
<a name="l00198"></a>00198 
<a name="l00199"></a>00199       stringValue[0] = <a class="code" href="value_8c.html#a194b41f9d10ade20e32daff64b4ae03c">value_from_longest</a> 
<a name="l00200"></a>00200         (type, <a class="code" href="objc-lang_8c.html#a00a3ec441186f1919762ea359222bb7a">lookup_objc_class</a> (gdbarch, <span class="stringliteral">&quot;NSString&quot;</span>));
<a name="l00201"></a>00201       stringValue[1] = <a class="code" href="value_8c.html#a194b41f9d10ade20e32daff64b4ae03c">value_from_longest</a> 
<a name="l00202"></a>00202         (type, <a class="code" href="objc-lang_8c.html#a279b20357591b4a9387ac13864b6a667">lookup_child_selector</a> (gdbarch, <span class="stringliteral">&quot;stringWithCString:&quot;</span>));
<a name="l00203"></a>00203       nsstringValue = <a class="code" href="infcall_8c.html#a8344d63cd8405f1e9fae104da173283d">call_function_by_hand</a>(<span class="keyword">function</span>, 3, &amp;stringValue[0]);
<a name="l00204"></a>00204     }
<a name="l00205"></a>00205   <span class="keywordflow">else</span>
<a name="l00206"></a>00206     <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;NSString: internal error -- no way to create new NSString&quot;</span>));
<a name="l00207"></a>00207 
<a name="l00208"></a>00208   sym = <a class="code" href="objc-lang_8c.html#a1a06666747961e4025fc3166fa757c8b">lookup_struct_typedef</a>(<span class="stringliteral">&quot;NSString&quot;</span>, 0, 1);
<a name="l00209"></a>00209   <span class="keywordflow">if</span> (sym == NULL)
<a name="l00210"></a>00210     sym = <a class="code" href="objc-lang_8c.html#a1a06666747961e4025fc3166fa757c8b">lookup_struct_typedef</a>(<span class="stringliteral">&quot;NXString&quot;</span>, 0, 1);
<a name="l00211"></a>00211   <span class="keywordflow">if</span> (sym == NULL)
<a name="l00212"></a>00212     type = <a class="code" href="gdbtypes_8c.html#addd01ebc9ccdf2cacb33ab01e281ddb8">builtin_type</a> (gdbarch)-&gt;<a class="code" href="structbuiltin__type.html#a55f6f9ff7436431777683d8ba62f662a">builtin_data_ptr</a>;
<a name="l00213"></a>00213   <span class="keywordflow">else</span>
<a name="l00214"></a>00214     type = <a class="code" href="gdbtypes_8c.html#a8edb8d75a169b1455414b420088d1887">lookup_pointer_type</a>(<a class="code" href="symtab_8h.html#aadfeb02c4b5fc2b6764ad32eaccf0e58">SYMBOL_TYPE</a> (sym));
<a name="l00215"></a>00215 
<a name="l00216"></a>00216   <a class="code" href="value_8c.html#adac1b2d5054e2d7b44ea25ac1f8002f1">deprecated_set_value_type</a> (nsstringValue, type);
<a name="l00217"></a>00217   <span class="keywordflow">return</span> nsstringValue;
<a name="l00218"></a>00218 }
<a name="l00219"></a>00219 
<a name="l00220"></a>00220 <span class="comment">/* Objective-C name demangling.  */</span>
<a name="l00221"></a>00221 
<a name="l00222"></a>00222 <span class="keywordtype">char</span> *
<a name="l00223"></a><a class="code" href="objc-lang_8h.html#ad08d66b1b50727ac5b9890b28505a3ce">00223</a> <a class="code" href="objc-lang_8c.html#ad08d66b1b50727ac5b9890b28505a3ce">objc_demangle</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *mangled, <span class="keywordtype">int</span> options)
<a name="l00224"></a>00224 {
<a name="l00225"></a>00225   <span class="keywordtype">char</span> *demangled, *cp;
<a name="l00226"></a>00226 
<a name="l00227"></a>00227   <span class="keywordflow">if</span> (mangled[0] == <span class="charliteral">&#39;_&#39;</span> &amp;&amp;
<a name="l00228"></a>00228      (mangled[1] == <span class="charliteral">&#39;i&#39;</span> || mangled[1] == <span class="charliteral">&#39;c&#39;</span>) &amp;&amp;
<a name="l00229"></a>00229       mangled[2] == <span class="charliteral">&#39;_&#39;</span>)
<a name="l00230"></a>00230     {
<a name="l00231"></a>00231       cp = demangled = <a class="code" href="common-utils_8c.html#a634d6cd850bb831afebc499579303b3b">xmalloc</a>(strlen(mangled) + 2);
<a name="l00232"></a>00232 
<a name="l00233"></a>00233       <span class="keywordflow">if</span> (mangled[1] == <span class="charliteral">&#39;i&#39;</span>)
<a name="l00234"></a>00234         *cp++ = <span class="charliteral">&#39;-&#39;</span>;            <span class="comment">/* for instance method */</span>
<a name="l00235"></a>00235       <span class="keywordflow">else</span>
<a name="l00236"></a>00236         *cp++ = <span class="charliteral">&#39;+&#39;</span>;            <span class="comment">/* for class    method */</span>
<a name="l00237"></a>00237 
<a name="l00238"></a>00238       *cp++ = <span class="charliteral">&#39;[&#39;</span>;              <span class="comment">/* opening left brace  */</span>
<a name="l00239"></a>00239       strcpy(cp, mangled+3);    <span class="comment">/* Tack on the rest of the mangled name.  */</span>
<a name="l00240"></a>00240 
<a name="l00241"></a>00241       <span class="keywordflow">while</span> (*cp &amp;&amp; *cp == <span class="charliteral">&#39;_&#39;</span>)
<a name="l00242"></a>00242         cp++;                   <span class="comment">/* Skip any initial underbars in class</span>
<a name="l00243"></a>00243 <span class="comment">                                   name.  */</span>
<a name="l00244"></a>00244 
<a name="l00245"></a>00245       cp = <a class="code" href="gdb__string_8h.html#adf46aa8f2e08cfb505868bbfc88b5fd4">strchr</a>(cp, <span class="charliteral">&#39;_&#39;</span>);
<a name="l00246"></a>00246       <span class="keywordflow">if</span> (!cp)                  <span class="comment">/* Find first non-initial underbar.  */</span>
<a name="l00247"></a>00247         {
<a name="l00248"></a>00248           <a class="code" href="common-utils_8c.html#a976e14808b9247ec952c262553f09f8f">xfree</a>(demangled);     <span class="comment">/* not mangled name */</span>
<a name="l00249"></a>00249           <span class="keywordflow">return</span> NULL;
<a name="l00250"></a>00250         }
<a name="l00251"></a>00251       <span class="keywordflow">if</span> (cp[1] == <span class="charliteral">&#39;_&#39;</span>)         <span class="comment">/* Easy case: no category name.    */</span>
<a name="l00252"></a>00252         {
<a name="l00253"></a>00253           *cp++ = <span class="charliteral">&#39; &#39;</span>;          <span class="comment">/* Replace two &#39;_&#39; with one &#39; &#39;.   */</span>
<a name="l00254"></a>00254           strcpy(cp, mangled + (cp - demangled) + 2);
<a name="l00255"></a>00255         }
<a name="l00256"></a>00256       <span class="keywordflow">else</span>
<a name="l00257"></a>00257         {
<a name="l00258"></a>00258           *cp++ = <span class="charliteral">&#39;(&#39;</span>;          <span class="comment">/* Less easy case: category name.  */</span>
<a name="l00259"></a>00259           cp = <a class="code" href="gdb__string_8h.html#adf46aa8f2e08cfb505868bbfc88b5fd4">strchr</a>(cp, <span class="charliteral">&#39;_&#39;</span>);
<a name="l00260"></a>00260           <span class="keywordflow">if</span> (!cp)
<a name="l00261"></a>00261             {
<a name="l00262"></a>00262               <a class="code" href="common-utils_8c.html#a976e14808b9247ec952c262553f09f8f">xfree</a>(demangled); <span class="comment">/* not mangled name */</span>
<a name="l00263"></a>00263               <span class="keywordflow">return</span> NULL;
<a name="l00264"></a>00264             }
<a name="l00265"></a>00265           *cp++ = <span class="charliteral">&#39;)&#39;</span>;
<a name="l00266"></a>00266           *cp++ = <span class="charliteral">&#39; &#39;</span>;          <span class="comment">/* Overwriting 1st char of method name...  */</span>
<a name="l00267"></a>00267           strcpy(cp, mangled + (cp - demangled));       <span class="comment">/* Get it back.  */</span>
<a name="l00268"></a>00268         }
<a name="l00269"></a>00269 
<a name="l00270"></a>00270       <span class="keywordflow">while</span> (*cp &amp;&amp; *cp == <span class="charliteral">&#39;_&#39;</span>)
<a name="l00271"></a>00271         cp++;                   <span class="comment">/* Skip any initial underbars in</span>
<a name="l00272"></a>00272 <span class="comment">                                   method name.  */</span>
<a name="l00273"></a>00273 
<a name="l00274"></a>00274       <span class="keywordflow">for</span> (; *cp; cp++)
<a name="l00275"></a>00275         <span class="keywordflow">if</span> (*cp == <span class="charliteral">&#39;_&#39;</span>)
<a name="l00276"></a>00276           *cp = <span class="charliteral">&#39;:&#39;</span>;            <span class="comment">/* Replace remaining &#39;_&#39; with &#39;:&#39;.  */</span>
<a name="l00277"></a>00277 
<a name="l00278"></a>00278       *cp++ = <span class="charliteral">&#39;]&#39;</span>;              <span class="comment">/* closing right brace */</span>
<a name="l00279"></a>00279       *cp++ = 0;                <span class="comment">/* string terminator */</span>
<a name="l00280"></a>00280       <span class="keywordflow">return</span> demangled;
<a name="l00281"></a>00281     }
<a name="l00282"></a>00282   <span class="keywordflow">else</span>
<a name="l00283"></a>00283     <span class="keywordflow">return</span> NULL;        <span class="comment">/* Not an objc mangled name.  */</span>
<a name="l00284"></a>00284 }
<a name="l00285"></a>00285 
<a name="l00286"></a>00286 <span class="comment">/* Determine if we are currently in the Objective-C dispatch function.</span>
<a name="l00287"></a>00287 <span class="comment">   If so, get the address of the method function that the dispatcher</span>
<a name="l00288"></a>00288 <span class="comment">   would call and use that as the function to step into instead.  Also</span>
<a name="l00289"></a>00289 <span class="comment">   skip over the trampoline for the function (if any).  This is better</span>
<a name="l00290"></a>00290 <span class="comment">   for the user since they are only interested in stepping into the</span>
<a name="l00291"></a>00291 <span class="comment">   method function anyway.  */</span>
<a name="l00292"></a>00292 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> 
<a name="l00293"></a>00293 objc_skip_trampoline (<span class="keyword">struct</span> frame_info *frame, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="infcmd_8c.html#a2ccc36c43036951d612e70e909955a4c">stop_pc</a>)
<a name="l00294"></a>00294 {
<a name="l00295"></a>00295   <span class="keyword">struct </span>gdbarch *gdbarch = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (frame);
<a name="l00296"></a>00296   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> real_stop_pc;
<a name="l00297"></a>00297   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> method_stop_pc;
<a name="l00298"></a>00298   
<a name="l00299"></a>00299   real_stop_pc = <a class="code" href="gdbarch_8c.html#a61a951e56c80888bdf2c9e6926350117">gdbarch_skip_trampoline_code</a> (gdbarch, frame, stop_pc);
<a name="l00300"></a>00300 
<a name="l00301"></a>00301   <span class="keywordflow">if</span> (real_stop_pc != 0)
<a name="l00302"></a>00302     <a class="code" href="objc-lang_8c.html#a8beac5af04447e5649b8b0862418120e">find_objc_msgcall</a> (real_stop_pc, &amp;method_stop_pc);
<a name="l00303"></a>00303   <span class="keywordflow">else</span>
<a name="l00304"></a>00304     <a class="code" href="objc-lang_8c.html#a8beac5af04447e5649b8b0862418120e">find_objc_msgcall</a> (stop_pc, &amp;method_stop_pc);
<a name="l00305"></a>00305 
<a name="l00306"></a>00306   <span class="keywordflow">if</span> (method_stop_pc)
<a name="l00307"></a>00307     {
<a name="l00308"></a>00308       real_stop_pc = <a class="code" href="gdbarch_8c.html#a61a951e56c80888bdf2c9e6926350117">gdbarch_skip_trampoline_code</a>
<a name="l00309"></a>00309                        (gdbarch, frame, method_stop_pc);
<a name="l00310"></a>00310       <span class="keywordflow">if</span> (real_stop_pc == 0)
<a name="l00311"></a>00311         real_stop_pc = method_stop_pc;
<a name="l00312"></a>00312     }
<a name="l00313"></a>00313 
<a name="l00314"></a>00314   <span class="keywordflow">return</span> real_stop_pc;
<a name="l00315"></a>00315 }
<a name="l00316"></a>00316 
<a name="l00317"></a>00317 
<a name="l00318"></a>00318 <span class="comment">/* Table mapping opcodes into strings for printing operators</span>
<a name="l00319"></a>00319 <span class="comment">   and precedences of the operators.  */</span>
<a name="l00320"></a>00320 
<a name="l00321"></a>00321 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structop__print.html">op_print</a> objc_op_print_tab[] =
<a name="l00322"></a>00322   {
<a name="l00323"></a>00323     {<span class="stringliteral">&quot;,&quot;</span>,  BINOP_COMMA, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aab1129d044f7e5ad7620fc5287546977c">PREC_COMMA</a>, 0},
<a name="l00324"></a>00324     {<span class="stringliteral">&quot;=&quot;</span>,  BINOP_ASSIGN, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aa5e92f27b45854d3fb0eec6a7a124de27">PREC_ASSIGN</a>, 1},
<a name="l00325"></a>00325     {<span class="stringliteral">&quot;||&quot;</span>, BINOP_LOGICAL_OR, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aa64fa270482d302628e98c685632f4268">PREC_LOGICAL_OR</a>, 0},
<a name="l00326"></a>00326     {<span class="stringliteral">&quot;&amp;&amp;&quot;</span>, BINOP_LOGICAL_AND, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aaf6f26d1f69e85719e3acdb44ac4ee4ee">PREC_LOGICAL_AND</a>, 0},
<a name="l00327"></a>00327     {<span class="stringliteral">&quot;|&quot;</span>,  BINOP_BITWISE_IOR, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aaf353c85696ff7bc39d5017c1a9203372">PREC_BITWISE_IOR</a>, 0},
<a name="l00328"></a>00328     {<span class="stringliteral">&quot;^&quot;</span>,  BINOP_BITWISE_XOR, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aa875ea1a069608469e9aa3bb74191d912">PREC_BITWISE_XOR</a>, 0},
<a name="l00329"></a>00329     {<span class="stringliteral">&quot;&amp;&quot;</span>,  BINOP_BITWISE_AND, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aaadadbfbd7d5f8fb39a22da4c406567ef">PREC_BITWISE_AND</a>, 0},
<a name="l00330"></a>00330     {<span class="stringliteral">&quot;==&quot;</span>, BINOP_EQUAL, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aab4f80761770aecaaa11be998cb32be94">PREC_EQUAL</a>, 0},
<a name="l00331"></a>00331     {<span class="stringliteral">&quot;!=&quot;</span>, BINOP_NOTEQUAL, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aab4f80761770aecaaa11be998cb32be94">PREC_EQUAL</a>, 0},
<a name="l00332"></a>00332     {<span class="stringliteral">&quot;&lt;=&quot;</span>, BINOP_LEQ, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aabe35ff2127b6931e77edf2b2c9ebb808">PREC_ORDER</a>, 0},
<a name="l00333"></a>00333     {<span class="stringliteral">&quot;&gt;=&quot;</span>, BINOP_GEQ, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aabe35ff2127b6931e77edf2b2c9ebb808">PREC_ORDER</a>, 0},
<a name="l00334"></a>00334     {<span class="stringliteral">&quot;&gt;&quot;</span>,  BINOP_GTR, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aabe35ff2127b6931e77edf2b2c9ebb808">PREC_ORDER</a>, 0},
<a name="l00335"></a>00335     {<span class="stringliteral">&quot;&lt;&quot;</span>,  BINOP_LESS, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aabe35ff2127b6931e77edf2b2c9ebb808">PREC_ORDER</a>, 0},
<a name="l00336"></a>00336     {<span class="stringliteral">&quot;&gt;&gt;&quot;</span>, BINOP_RSH, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aa2a8605af70bc30b107eb374ba1fa24f1">PREC_SHIFT</a>, 0},
<a name="l00337"></a>00337     {<span class="stringliteral">&quot;&lt;&lt;&quot;</span>, BINOP_LSH, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aa2a8605af70bc30b107eb374ba1fa24f1">PREC_SHIFT</a>, 0},
<a name="l00338"></a>00338     {<span class="stringliteral">&quot;+&quot;</span>,  BINOP_ADD, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aa75d26b179930f86774fd523647ab0016">PREC_ADD</a>, 0},
<a name="l00339"></a>00339     {<span class="stringliteral">&quot;-&quot;</span>,  BINOP_SUB, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aa75d26b179930f86774fd523647ab0016">PREC_ADD</a>, 0},
<a name="l00340"></a>00340     {<span class="stringliteral">&quot;*&quot;</span>,  BINOP_MUL, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aac911cdbd79edb8f68cd50c2dbdf4109a">PREC_MUL</a>, 0},
<a name="l00341"></a>00341     {<span class="stringliteral">&quot;/&quot;</span>,  BINOP_DIV, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aac911cdbd79edb8f68cd50c2dbdf4109a">PREC_MUL</a>, 0},
<a name="l00342"></a>00342     {<span class="stringliteral">&quot;%&quot;</span>,  BINOP_REM, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aac911cdbd79edb8f68cd50c2dbdf4109a">PREC_MUL</a>, 0},
<a name="l00343"></a>00343     {<span class="stringliteral">&quot;@&quot;</span>,  BINOP_REPEAT, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aae279f8bb77ff7e4e18e893a118c5687e">PREC_REPEAT</a>, 0},
<a name="l00344"></a>00344     {<span class="stringliteral">&quot;-&quot;</span>,  UNOP_NEG, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aa5ee2ba062f4296b69ca2878e3133ff6e">PREC_PREFIX</a>, 0},
<a name="l00345"></a>00345     {<span class="stringliteral">&quot;!&quot;</span>,  UNOP_LOGICAL_NOT, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aa5ee2ba062f4296b69ca2878e3133ff6e">PREC_PREFIX</a>, 0},
<a name="l00346"></a>00346     {<span class="stringliteral">&quot;~&quot;</span>,  UNOP_COMPLEMENT, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aa5ee2ba062f4296b69ca2878e3133ff6e">PREC_PREFIX</a>, 0},
<a name="l00347"></a>00347     {<span class="stringliteral">&quot;*&quot;</span>,  UNOP_IND, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aa5ee2ba062f4296b69ca2878e3133ff6e">PREC_PREFIX</a>, 0},
<a name="l00348"></a>00348     {<span class="stringliteral">&quot;&amp;&quot;</span>,  UNOP_ADDR, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aa5ee2ba062f4296b69ca2878e3133ff6e">PREC_PREFIX</a>, 0},
<a name="l00349"></a>00349     {<span class="stringliteral">&quot;sizeof &quot;</span>, UNOP_SIZEOF, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aa5ee2ba062f4296b69ca2878e3133ff6e">PREC_PREFIX</a>, 0},
<a name="l00350"></a>00350     {<span class="stringliteral">&quot;++&quot;</span>, UNOP_PREINCREMENT, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aa5ee2ba062f4296b69ca2878e3133ff6e">PREC_PREFIX</a>, 0},
<a name="l00351"></a>00351     {<span class="stringliteral">&quot;--&quot;</span>, UNOP_PREDECREMENT, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aa5ee2ba062f4296b69ca2878e3133ff6e">PREC_PREFIX</a>, 0},
<a name="l00352"></a>00352     {NULL, OP_NULL, <a class="code" href="parser-defs_8h.html#a7ba15b09f5921966959e0abb2e1d3e4aa21dc5b96e446ef3b5be33e12130ffb1d">PREC_NULL</a>, 0}
<a name="l00353"></a>00353 };
<a name="l00354"></a>00354 
<a name="l00355"></a><a class="code" href="objc-lang_8c.html#a5329c1ebc982d3f399c62776696dcc84">00355</a> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structlanguage__defn.html">language_defn</a> <a class="code" href="objc-lang_8c.html#a5329c1ebc982d3f399c62776696dcc84">objc_language_defn</a> = {
<a name="l00356"></a>00356   <span class="stringliteral">&quot;objective-c&quot;</span>,                <span class="comment">/* Language name */</span>
<a name="l00357"></a>00357   <a class="code" href="defs_8h.html#aa37aa8979934d47ac32fd96ecff32202af970f874c431c7404837e92fe971e813">language_objc</a>,
<a name="l00358"></a>00358   <a class="code" href="language_8h.html#a8202735d4285cea82932facdabf35566aec4bbab89cf0e990b8ffa2dbb5496f86">range_check_off</a>,
<a name="l00359"></a>00359   <a class="code" href="language_8h.html#ad102f9e1a41cf77a0045e37883dd2940a236ce0a37504b1c7b4f94f8236707e36">case_sensitive_on</a>,
<a name="l00360"></a>00360   <a class="code" href="language_8h.html#a01793f9b076697670fa7f9c07d925315a8a2dbbdfa4f6850059d3d27c26258d4a">array_row_major</a>,
<a name="l00361"></a>00361   <a class="code" href="language_8h.html#a511881683e72b52d0e2a3f2d561a6d2facf6cfee4f9c0151094dc847bb04d2bc1">macro_expansion_c</a>,
<a name="l00362"></a>00362   &amp;<a class="code" href="parse_8c.html#a8877cf075f1571de350c15a6adbfded1">exp_descriptor_standard</a>,
<a name="l00363"></a>00363   <a class="code" href="c-lang_8h.html#a7608d1a6f94f3d96a319b44b8cae2388">c_parse</a>,
<a name="l00364"></a>00364   <a class="code" href="c-lang_8h.html#a83acded5a24c3620f7e2886fff8f39dd">c_error</a>,
<a name="l00365"></a>00365   <a class="code" href="parse_8c.html#aa04ce44b24dbe3d4424adac28d7f8495">null_post_parser</a>,
<a name="l00366"></a>00366   <a class="code" href="c-lang_8c.html#aea550415b0049213c5f97bc017f2ee34">c_printchar</a>,                 <span class="comment">/* Print a character constant */</span>
<a name="l00367"></a>00367   <a class="code" href="c-lang_8c.html#a3864ea752d884eeb0c4b35b05f33d6a7">c_printstr</a>,                  <span class="comment">/* Function to print string constant */</span>
<a name="l00368"></a>00368   <a class="code" href="c-lang_8c.html#a16654655bc55474662ead4767521bfa7">c_emit_char</a>,
<a name="l00369"></a>00369   <a class="code" href="c-lang_8h.html#aaf84d638c9714765572c1f68880410f4">c_print_type</a>,                 <span class="comment">/* Print a type using appropriate syntax */</span>
<a name="l00370"></a>00370   <a class="code" href="c-lang_8h.html#a073adf20f0da276c766f5f2189b21b19">c_print_typedef</a>,              <span class="comment">/* Print a typedef using appropriate syntax */</span>
<a name="l00371"></a>00371   <a class="code" href="c-lang_8h.html#a79fe2474941727a4dc5a33385626c56c">c_val_print</a>,                  <span class="comment">/* Print a value using appropriate syntax */</span>
<a name="l00372"></a>00372   <a class="code" href="c-lang_8h.html#ad9797c5c67c2fd98a81b155208ca7a76">c_value_print</a>,                <span class="comment">/* Print a top-level value */</span>
<a name="l00373"></a>00373   <a class="code" href="findvar_8c.html#a4397d3c19060201bb4fe2d679245f6dd">default_read_var_value</a>,       <span class="comment">/* la_read_var_value */</span>
<a name="l00374"></a>00374   objc_skip_trampoline,         <span class="comment">/* Language specific skip_trampoline */</span>
<a name="l00375"></a>00375   <span class="stringliteral">&quot;self&quot;</span>,                       <span class="comment">/* name_of_this */</span>
<a name="l00376"></a>00376   <a class="code" href="symtab_8c.html#a1ab2d3f0f282e2cad20fd6215d45db7c">basic_lookup_symbol_nonlocal</a>, <span class="comment">/* lookup_symbol_nonlocal */</span>
<a name="l00377"></a>00377   <a class="code" href="symtab_8c.html#a952bee3396047112c61476d5952dfb1e">basic_lookup_transparent_type</a>,<span class="comment">/* lookup_transparent_type */</span>
<a name="l00378"></a>00378   <a class="code" href="objc-lang_8c.html#ad08d66b1b50727ac5b9890b28505a3ce">objc_demangle</a>,                <span class="comment">/* Language specific symbol demangler */</span>
<a name="l00379"></a>00379   NULL,                         <span class="comment">/* Language specific</span>
<a name="l00380"></a>00380 <span class="comment">                                   class_name_from_physname */</span>
<a name="l00381"></a>00381   objc_op_print_tab,            <span class="comment">/* Expression operators for printing */</span>
<a name="l00382"></a>00382   1,                            <span class="comment">/* C-style arrays */</span>
<a name="l00383"></a>00383   0,                            <span class="comment">/* String lower bound */</span>
<a name="l00384"></a>00384   <a class="code" href="language_8c.html#a4faef03d5ddb629c5ca5e8d075665a9a">default_word_break_characters</a>,
<a name="l00385"></a>00385   default_make_symbol_completion_list,
<a name="l00386"></a>00386   <a class="code" href="c-lang_8c.html#a15beb5bfe6378437c7646810e380f152">c_language_arch_info</a>,
<a name="l00387"></a>00387   <a class="code" href="language_8c.html#a84d8c36b65fd18b4f2aaaa1e61637fcb">default_print_array_index</a>,
<a name="l00388"></a>00388   <a class="code" href="language_8c.html#a037e46fb8e24b253e3ac84a02bfab53e">default_pass_by_reference</a>,
<a name="l00389"></a>00389   <a class="code" href="language_8c.html#af9113c8269bcf08864c93fb8a1d3b8e4">default_get_string</a>,
<a name="l00390"></a>00390   NULL,                         <span class="comment">/* la_get_symbol_name_cmp */</span>
<a name="l00391"></a>00391   <a class="code" href="symtab_8c.html#a56851fd6810894c27bdfcd4571b6ed2a">iterate_over_symbols</a>,
<a name="l00392"></a>00392   <a class="code" href="language_8h.html#adaa27b8c7c639f32b42b1b37c83d863a">LANG_MAGIC</a>
<a name="l00393"></a>00393 };
<a name="l00394"></a>00394 
<a name="l00395"></a>00395 <span class="comment">/*</span>
<a name="l00396"></a>00396 <span class="comment"> * ObjC:</span>
<a name="l00397"></a>00397 <span class="comment"> * Following functions help construct Objective-C message calls.</span>
<a name="l00398"></a>00398 <span class="comment"> */</span>
<a name="l00399"></a>00399 
<a name="l00400"></a>00400 <span class="keyword">struct </span>selname          <span class="comment">/* For parsing Objective-C.  */</span>
<a name="l00401"></a>00401   {
<a name="l00402"></a>00402     <span class="keyword">struct </span>selname *next;
<a name="l00403"></a>00403     <span class="keywordtype">char</span> *msglist_sel;
<a name="l00404"></a>00404     <span class="keywordtype">int</span> msglist_len;
<a name="l00405"></a>00405   };
<a name="l00406"></a>00406 
<a name="l00407"></a>00407 <span class="keyword">static</span> <span class="keywordtype">int</span> msglist_len;
<a name="l00408"></a>00408 <span class="keyword">static</span> <span class="keyword">struct </span>selname *selname_chain;
<a name="l00409"></a>00409 <span class="keyword">static</span> <span class="keywordtype">char</span> *msglist_sel;
<a name="l00410"></a>00410 
<a name="l00411"></a>00411 <span class="keywordtype">void</span>
<a name="l00412"></a><a class="code" href="objc-lang_8h.html#aa5f8a5b1d3db1d4b9e490a07c0fec3fc">00412</a> <a class="code" href="objc-lang_8c.html#aa5f8a5b1d3db1d4b9e490a07c0fec3fc">start_msglist</a>(<span class="keywordtype">void</span>)
<a name="l00413"></a>00413 {
<a name="l00414"></a>00414   <span class="keyword">struct </span>selname *<span class="keyword">new</span> = 
<a name="l00415"></a>00415     (<span class="keyword">struct </span>selname *) <a class="code" href="common-utils_8c.html#a634d6cd850bb831afebc499579303b3b">xmalloc</a> (<span class="keyword">sizeof</span> (<span class="keyword">struct</span> selname));
<a name="l00416"></a>00416 
<a name="l00417"></a>00417   <span class="keyword">new</span>-&gt;next = selname_chain;
<a name="l00418"></a>00418   <span class="keyword">new</span>-&gt;msglist_len = msglist_len;
<a name="l00419"></a>00419   <span class="keyword">new</span>-&gt;msglist_sel = msglist_sel;
<a name="l00420"></a>00420   msglist_len = 0;
<a name="l00421"></a>00421   msglist_sel = (<span class="keywordtype">char</span> *)<a class="code" href="common-utils_8c.html#a634d6cd850bb831afebc499579303b3b">xmalloc</a>(1);
<a name="l00422"></a>00422   *msglist_sel = 0;
<a name="l00423"></a>00423   selname_chain = <span class="keyword">new</span>;
<a name="l00424"></a>00424 }
<a name="l00425"></a>00425 
<a name="l00426"></a>00426 <span class="keywordtype">void</span>
<a name="l00427"></a><a class="code" href="objc-lang_8h.html#af918a64d57e5fc476f7e3f104a772c8b">00427</a> <a class="code" href="objc-lang_8c.html#af918a64d57e5fc476f7e3f104a772c8b">add_msglist</a>(<span class="keyword">struct</span> <a class="code" href="structstoken.html">stoken</a> *str, <span class="keywordtype">int</span> addcolon)
<a name="l00428"></a>00428 {
<a name="l00429"></a>00429   <span class="keywordtype">char</span> *s;
<a name="l00430"></a>00430   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="windows-nat_8c.html#ade66e4ccafbc33b117610bbc0d85feb0">p</a>;
<a name="l00431"></a>00431   <span class="keywordtype">int</span> <a class="code" href="exec_8h.html#a00f945351279d3c8935f13d2b9f9b808">len</a>, plen;
<a name="l00432"></a>00432 
<a name="l00433"></a>00433   <span class="keywordflow">if</span> (str == 0)                 <span class="comment">/* Unnamed arg, or...  */</span>
<a name="l00434"></a>00434     {
<a name="l00435"></a>00435       <span class="keywordflow">if</span> (addcolon == 0)        <span class="comment">/* variable number of args.  */</span>
<a name="l00436"></a>00436         {
<a name="l00437"></a>00437           msglist_len++;
<a name="l00438"></a>00438           <span class="keywordflow">return</span>;
<a name="l00439"></a>00439         }
<a name="l00440"></a>00440       p = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00441"></a>00441       plen = 0;
<a name="l00442"></a>00442     }
<a name="l00443"></a>00443   <span class="keywordflow">else</span>
<a name="l00444"></a>00444     {
<a name="l00445"></a>00445       p = str-&gt;<a class="code" href="structstoken.html#ae1c7b64f20fe8b3277827877ac961e90">ptr</a>;
<a name="l00446"></a>00446       plen = str-&gt;<a class="code" href="structstoken.html#a3b824e51aedbb867bf3e560fd9e05913">length</a>;
<a name="l00447"></a>00447     }
<a name="l00448"></a>00448   len = plen + strlen(msglist_sel) + 2;
<a name="l00449"></a>00449   s = (<span class="keywordtype">char</span> *)<a class="code" href="common-utils_8c.html#a634d6cd850bb831afebc499579303b3b">xmalloc</a>(len);
<a name="l00450"></a>00450   strcpy(s, msglist_sel);
<a name="l00451"></a>00451   strncat(s, p, plen);
<a name="l00452"></a>00452   <a class="code" href="common-utils_8c.html#a976e14808b9247ec952c262553f09f8f">xfree</a>(msglist_sel);
<a name="l00453"></a>00453   msglist_sel = s;
<a name="l00454"></a>00454   <span class="keywordflow">if</span> (addcolon)
<a name="l00455"></a>00455     {
<a name="l00456"></a>00456       s[len-2] = <span class="charliteral">&#39;:&#39;</span>;
<a name="l00457"></a>00457       s[len-1] = 0;
<a name="l00458"></a>00458       msglist_len++;
<a name="l00459"></a>00459     }
<a name="l00460"></a>00460   <span class="keywordflow">else</span>
<a name="l00461"></a>00461     s[len-2] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00462"></a>00462 }
<a name="l00463"></a>00463 
<a name="l00464"></a>00464 <span class="keywordtype">int</span>
<a name="l00465"></a><a class="code" href="objc-lang_8h.html#aa0924a8321d79d76578802b49de2dc24">00465</a> <a class="code" href="objc-lang_8c.html#aa0924a8321d79d76578802b49de2dc24">end_msglist</a>(<span class="keywordtype">void</span>)
<a name="l00466"></a>00466 {
<a name="l00467"></a>00467   <span class="keywordtype">int</span> val = msglist_len;
<a name="l00468"></a>00468   <span class="keyword">struct </span>selname *sel = selname_chain;
<a name="l00469"></a>00469   <span class="keywordtype">char</span> *<a class="code" href="windows-nat_8c.html#ade66e4ccafbc33b117610bbc0d85feb0">p</a> = msglist_sel;
<a name="l00470"></a>00470   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> selid;
<a name="l00471"></a>00471 
<a name="l00472"></a>00472   selname_chain = sel-&gt;next;
<a name="l00473"></a>00473   msglist_len = sel-&gt;msglist_len;
<a name="l00474"></a>00474   msglist_sel = sel-&gt;msglist_sel;
<a name="l00475"></a>00475   selid = <a class="code" href="objc-lang_8c.html#a279b20357591b4a9387ac13864b6a667">lookup_child_selector</a> (<a class="code" href="parser-defs_8h.html#ab29b33d73e1262c7c1c7aaab63c57ba9">parse_gdbarch</a>, p);
<a name="l00476"></a>00476   <span class="keywordflow">if</span> (!selid)
<a name="l00477"></a>00477     <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Can&#39;t find selector \&quot;%s\&quot;&quot;</span>), p);
<a name="l00478"></a>00478   <a class="code" href="parse_8c.html#a64ae80b2d7d8330fcdf8c76e982b04cc">write_exp_elt_longcst</a> (selid);
<a name="l00479"></a>00479   <a class="code" href="common-utils_8c.html#a976e14808b9247ec952c262553f09f8f">xfree</a>(p);
<a name="l00480"></a>00480   <a class="code" href="parse_8c.html#a64ae80b2d7d8330fcdf8c76e982b04cc">write_exp_elt_longcst</a> (val);  <span class="comment">/* Number of args */</span>
<a name="l00481"></a>00481   <a class="code" href="common-utils_8c.html#a976e14808b9247ec952c262553f09f8f">xfree</a>(sel);
<a name="l00482"></a>00482 
<a name="l00483"></a>00483   <span class="keywordflow">return</span> val;
<a name="l00484"></a>00484 }
<a name="l00485"></a>00485 
<a name="l00486"></a>00486 <span class="comment">/*</span>
<a name="l00487"></a>00487 <span class="comment"> * Function: specialcmp (const char *a, const char *b)</span>
<a name="l00488"></a>00488 <span class="comment"> *</span>
<a name="l00489"></a>00489 <span class="comment"> * Special strcmp: treats &#39;]&#39; and &#39; &#39; as end-of-string.</span>
<a name="l00490"></a>00490 <span class="comment"> * Used for qsorting lists of objc methods (either by class or selector).</span>
<a name="l00491"></a>00491 <span class="comment"> */</span>
<a name="l00492"></a>00492 
<a name="l00493"></a>00493 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00494"></a>00494 specialcmp (<span class="keyword">const</span> <span class="keywordtype">char</span> *a, <span class="keyword">const</span> <span class="keywordtype">char</span> *b)
<a name="l00495"></a>00495 {
<a name="l00496"></a>00496   <span class="keywordflow">while</span> (*a &amp;&amp; *a != <span class="charliteral">&#39; &#39;</span> &amp;&amp; *a != <span class="charliteral">&#39;]&#39;</span> &amp;&amp; *b &amp;&amp; *b != <span class="charliteral">&#39; &#39;</span> &amp;&amp; *b != <span class="charliteral">&#39;]&#39;</span>)
<a name="l00497"></a>00497     {
<a name="l00498"></a>00498       <span class="keywordflow">if</span> (*a != *b)
<a name="l00499"></a>00499         <span class="keywordflow">return</span> *a - *b;
<a name="l00500"></a>00500       a++, b++;
<a name="l00501"></a>00501     }
<a name="l00502"></a>00502   <span class="keywordflow">if</span> (*a &amp;&amp; *a != <span class="charliteral">&#39; &#39;</span> &amp;&amp; *a != <span class="charliteral">&#39;]&#39;</span>)
<a name="l00503"></a>00503     <span class="keywordflow">return</span>  1;          <span class="comment">/* a is longer therefore greater.  */</span>
<a name="l00504"></a>00504   <span class="keywordflow">if</span> (*b &amp;&amp; *b != <span class="charliteral">&#39; &#39;</span> &amp;&amp; *b != <span class="charliteral">&#39;]&#39;</span>)
<a name="l00505"></a>00505     <span class="keywordflow">return</span> -1;          <span class="comment">/* a is shorter therefore lesser.  */</span>
<a name="l00506"></a>00506   <span class="keywordflow">return</span>    0;          <span class="comment">/* a and b are identical.  */</span>
<a name="l00507"></a>00507 }
<a name="l00508"></a>00508 
<a name="l00509"></a>00509 <span class="comment">/*</span>
<a name="l00510"></a>00510 <span class="comment"> * Function: compare_selectors (const void *, const void *)</span>
<a name="l00511"></a>00511 <span class="comment"> *</span>
<a name="l00512"></a>00512 <span class="comment"> * Comparison function for use with qsort.  Arguments are symbols or</span>
<a name="l00513"></a>00513 <span class="comment"> * msymbols Compares selector part of objc method name alphabetically.</span>
<a name="l00514"></a>00514 <span class="comment"> */</span>
<a name="l00515"></a>00515 
<a name="l00516"></a>00516 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00517"></a>00517 compare_selectors (<span class="keyword">const</span> <span class="keywordtype">void</span> *a, <span class="keyword">const</span> <span class="keywordtype">void</span> *b)
<a name="l00518"></a>00518 {
<a name="l00519"></a>00519   <span class="keyword">const</span> <span class="keywordtype">char</span> *aname, *bname;
<a name="l00520"></a>00520 
<a name="l00521"></a>00521   aname = <a class="code" href="symtab_8h.html#ac7f4cb1648125545fbd0e4f13b0c572c">SYMBOL_PRINT_NAME</a> (*(<span class="keyword">struct</span> <a class="code" href="structsymbol.html">symbol</a> **) a);
<a name="l00522"></a>00522   bname = <a class="code" href="symtab_8h.html#ac7f4cb1648125545fbd0e4f13b0c572c">SYMBOL_PRINT_NAME</a> (*(<span class="keyword">struct</span> <a class="code" href="structsymbol.html">symbol</a> **) b);
<a name="l00523"></a>00523   <span class="keywordflow">if</span> (aname == NULL || bname == NULL)
<a name="l00524"></a>00524     <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;internal: compare_selectors(1)&quot;</span>));
<a name="l00525"></a>00525 
<a name="l00526"></a>00526   aname = <a class="code" href="gdb__string_8h.html#adf46aa8f2e08cfb505868bbfc88b5fd4">strchr</a>(aname, <span class="charliteral">&#39; &#39;</span>);
<a name="l00527"></a>00527   bname = <a class="code" href="gdb__string_8h.html#adf46aa8f2e08cfb505868bbfc88b5fd4">strchr</a>(bname, <span class="charliteral">&#39; &#39;</span>);
<a name="l00528"></a>00528   <span class="keywordflow">if</span> (aname == NULL || bname == NULL)
<a name="l00529"></a>00529     <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;internal: compare_selectors(2)&quot;</span>));
<a name="l00530"></a>00530 
<a name="l00531"></a>00531   <span class="keywordflow">return</span> specialcmp (aname+1, bname+1);
<a name="l00532"></a>00532 }
<a name="l00533"></a>00533 
<a name="l00534"></a>00534 <span class="comment">/*</span>
<a name="l00535"></a>00535 <span class="comment"> * Function: selectors_info (regexp, from_tty)</span>
<a name="l00536"></a>00536 <span class="comment"> *</span>
<a name="l00537"></a>00537 <span class="comment"> * Implements the &quot;Info selectors&quot; command.  Takes an optional regexp</span>
<a name="l00538"></a>00538 <span class="comment"> * arg.  Lists all objective c selectors that match the regexp.  Works</span>
<a name="l00539"></a>00539 <span class="comment"> * by grepping thru all symbols for objective c methods.  Output list</span>
<a name="l00540"></a>00540 <span class="comment"> * is sorted and uniqued. </span>
<a name="l00541"></a>00541 <span class="comment"> */</span>
<a name="l00542"></a>00542 
<a name="l00543"></a>00543 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00544"></a>00544 selectors_info (<span class="keywordtype">char</span> *regexp, <span class="keywordtype">int</span> from_tty)
<a name="l00545"></a>00545 {
<a name="l00546"></a>00546   <span class="keyword">struct </span><a class="code" href="structobjfile.html">objfile</a>        *<a class="code" href="structobjfile.html">objfile</a>;
<a name="l00547"></a>00547   <span class="keyword">struct </span><a class="code" href="structminimal__symbol.html">minimal_symbol</a> *msymbol;
<a name="l00548"></a>00548   <span class="keyword">const</span> <span class="keywordtype">char</span>            *<a class="code" href="aarch64-tdep_8c.html#acc128f98d9ceca227038c771308eff39">name</a>;
<a name="l00549"></a>00549   <span class="keywordtype">char</span>                  *val;
<a name="l00550"></a>00550   <span class="keywordtype">int</span>                    matches = 0;
<a name="l00551"></a>00551   <span class="keywordtype">int</span>                    maxlen  = 0;
<a name="l00552"></a>00552   <span class="keywordtype">int</span>                    ix;
<a name="l00553"></a>00553   <span class="keywordtype">char</span>                   myregexp[2048];
<a name="l00554"></a>00554   <span class="keywordtype">char</span>                   asel[256];
<a name="l00555"></a>00555   <span class="keyword">struct </span><a class="code" href="structsymbol.html">symbol</a>        **sym_arr;
<a name="l00556"></a>00556   <span class="keywordtype">int</span>                    plusminus = 0;
<a name="l00557"></a>00557 
<a name="l00558"></a>00558   <span class="keywordflow">if</span> (regexp == NULL)
<a name="l00559"></a>00559     strcpy(myregexp, <span class="stringliteral">&quot;.*]&quot;</span>);    <span class="comment">/* Null input, match all objc methods.  */</span>
<a name="l00560"></a>00560   <span class="keywordflow">else</span>
<a name="l00561"></a>00561     {
<a name="l00562"></a>00562       <span class="keywordflow">if</span> (*regexp == <span class="charliteral">&#39;+&#39;</span> || *regexp == <span class="charliteral">&#39;-&#39;</span>)
<a name="l00563"></a>00563         { <span class="comment">/* User wants only class methods or only instance methods.  */</span>
<a name="l00564"></a>00564           plusminus = *regexp++;
<a name="l00565"></a>00565           <span class="keywordflow">while</span> (*regexp == <span class="charliteral">&#39; &#39;</span> || *regexp == <span class="charliteral">&#39;\t&#39;</span>)
<a name="l00566"></a>00566             regexp++;
<a name="l00567"></a>00567         }
<a name="l00568"></a>00568       <span class="keywordflow">if</span> (*regexp == <span class="charliteral">&#39;\0&#39;</span>)
<a name="l00569"></a>00569         strcpy(myregexp, <span class="stringliteral">&quot;.*]&quot;</span>);
<a name="l00570"></a>00570       <span class="keywordflow">else</span>
<a name="l00571"></a>00571         {
<a name="l00572"></a>00572           <span class="comment">/* Allow a few extra bytes because of the strcat below.  */</span>
<a name="l00573"></a>00573           <span class="keywordflow">if</span> (<span class="keyword">sizeof</span> (myregexp) &lt; strlen (regexp) + 4)
<a name="l00574"></a>00574             <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Regexp is too long: %s&quot;</span>), regexp);
<a name="l00575"></a>00575           strcpy(myregexp, regexp);
<a name="l00576"></a>00576           <span class="keywordflow">if</span> (myregexp[strlen(myregexp) - 1] == <span class="charliteral">&#39;$&#39;</span>) <span class="comment">/* end of selector */</span>
<a name="l00577"></a>00577             myregexp[strlen(myregexp) - 1] = <span class="charliteral">&#39;]&#39;</span>;    <span class="comment">/* end of method name */</span>
<a name="l00578"></a>00578           <span class="keywordflow">else</span>
<a name="l00579"></a>00579             strcat(myregexp, <span class="stringliteral">&quot;.*]&quot;</span>);
<a name="l00580"></a>00580         }
<a name="l00581"></a>00581     }
<a name="l00582"></a>00582 
<a name="l00583"></a>00583   <span class="keywordflow">if</span> (regexp != NULL)
<a name="l00584"></a>00584     {
<a name="l00585"></a>00585       val = <a class="code" href="defs_8h.html#ad321e1eefeb38442e0c40b1279f41ca0">re_comp</a> (myregexp);
<a name="l00586"></a>00586       <span class="keywordflow">if</span> (val != 0)
<a name="l00587"></a>00587         <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Invalid regexp (%s): %s&quot;</span>), val, regexp);
<a name="l00588"></a>00588     }
<a name="l00589"></a>00589 
<a name="l00590"></a>00590   <span class="comment">/* First time thru is JUST to get max length and count.  */</span>
<a name="l00591"></a>00591   <a class="code" href="objfiles_8h.html#a3d08aae2073557e019d75ab37f8182d8">ALL_MSYMBOLS</a> (objfile, msymbol)
<a name="l00592"></a>00592     {
<a name="l00593"></a>00593       <a class="code" href="defs_8h.html#ad24e2b54375e12474e65ebf7175988fb">QUIT</a>;
<a name="l00594"></a>00594       name = <a class="code" href="symtab_8h.html#a243e66afa96ff58a851b38f428bb3394">SYMBOL_NATURAL_NAME</a> (msymbol);
<a name="l00595"></a>00595       <span class="keywordflow">if</span> (name
<a name="l00596"></a>00596           &amp;&amp; (name[0] == <span class="charliteral">&#39;-&#39;</span> || name[0] == <span class="charliteral">&#39;+&#39;</span>)
<a name="l00597"></a>00597           &amp;&amp; name[1] == <span class="charliteral">&#39;[&#39;</span>)            <span class="comment">/* Got a method name.  */</span>
<a name="l00598"></a>00598         {
<a name="l00599"></a>00599           <span class="comment">/* Filter for class/instance methods.  */</span>
<a name="l00600"></a>00600           <span class="keywordflow">if</span> (plusminus &amp;&amp; name[0] != plusminus)
<a name="l00601"></a>00601             <span class="keywordflow">continue</span>;
<a name="l00602"></a>00602           <span class="comment">/* Find selector part.  */</span>
<a name="l00603"></a>00603           name = (<span class="keywordtype">char</span> *) <a class="code" href="gdb__string_8h.html#adf46aa8f2e08cfb505868bbfc88b5fd4">strchr</a> (name+2, <span class="charliteral">&#39; &#39;</span>);
<a name="l00604"></a>00604           <span class="keywordflow">if</span> (name == NULL)
<a name="l00605"></a>00605             {
<a name="l00606"></a>00606               <a class="code" href="complaints_8c.html#a4528e524e1d7da5becb9b882d044a733">complaint</a> (&amp;<a class="code" href="complaints_8c.html#abfd145c3005621d8aa52476a65f8ce4f">symfile_complaints</a>, 
<a name="l00607"></a>00607                          <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Bad method name &#39;%s&#39;&quot;</span>), 
<a name="l00608"></a>00608                          <a class="code" href="symtab_8h.html#a243e66afa96ff58a851b38f428bb3394">SYMBOL_NATURAL_NAME</a> (msymbol));
<a name="l00609"></a>00609               <span class="keywordflow">continue</span>;
<a name="l00610"></a>00610             }
<a name="l00611"></a>00611           <span class="keywordflow">if</span> (regexp == NULL || re_exec(++name) != 0)
<a name="l00612"></a>00612             { 
<a name="l00613"></a>00613               <span class="keyword">const</span> <span class="keywordtype">char</span> *mystart = <a class="code" href="aarch64-tdep_8c.html#acc128f98d9ceca227038c771308eff39">name</a>;
<a name="l00614"></a>00614               <span class="keyword">const</span> <span class="keywordtype">char</span> *myend   = <a class="code" href="gdb__string_8h.html#adf46aa8f2e08cfb505868bbfc88b5fd4">strchr</a> (mystart, <span class="charliteral">&#39;]&#39;</span>);
<a name="l00615"></a>00615               
<a name="l00616"></a>00616               <span class="keywordflow">if</span> (myend &amp;&amp; (myend - mystart &gt; maxlen))
<a name="l00617"></a>00617                 maxlen = myend - mystart;       <span class="comment">/* Get longest selector.  */</span>
<a name="l00618"></a>00618               matches++;
<a name="l00619"></a>00619             }
<a name="l00620"></a>00620         }
<a name="l00621"></a>00621     }
<a name="l00622"></a>00622   <span class="keywordflow">if</span> (matches)
<a name="l00623"></a>00623     {
<a name="l00624"></a>00624       <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Selectors matching \&quot;%s\&quot;:\n\n&quot;</span>), 
<a name="l00625"></a>00625                        regexp ? regexp : <span class="stringliteral">&quot;*&quot;</span>);
<a name="l00626"></a>00626 
<a name="l00627"></a>00627       sym_arr = alloca (matches * <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structsymbol.html">symbol</a> *));
<a name="l00628"></a>00628       matches = 0;
<a name="l00629"></a>00629       <a class="code" href="objfiles_8h.html#a3d08aae2073557e019d75ab37f8182d8">ALL_MSYMBOLS</a> (objfile, msymbol)
<a name="l00630"></a>00630         {
<a name="l00631"></a>00631           <a class="code" href="defs_8h.html#ad24e2b54375e12474e65ebf7175988fb">QUIT</a>;
<a name="l00632"></a>00632           name = <a class="code" href="symtab_8h.html#a243e66afa96ff58a851b38f428bb3394">SYMBOL_NATURAL_NAME</a> (msymbol);
<a name="l00633"></a>00633           <span class="keywordflow">if</span> (name &amp;&amp;
<a name="l00634"></a>00634              (name[0] == <span class="charliteral">&#39;-&#39;</span> || name[0] == <span class="charliteral">&#39;+&#39;</span>) &amp;&amp;
<a name="l00635"></a>00635               name[1] == <span class="charliteral">&#39;[&#39;</span>)           <span class="comment">/* Got a method name.  */</span>
<a name="l00636"></a>00636             {
<a name="l00637"></a>00637               <span class="comment">/* Filter for class/instance methods.  */</span>
<a name="l00638"></a>00638               <span class="keywordflow">if</span> (plusminus &amp;&amp; name[0] != plusminus)
<a name="l00639"></a>00639                 <span class="keywordflow">continue</span>;
<a name="l00640"></a>00640               <span class="comment">/* Find selector part.  */</span>
<a name="l00641"></a>00641               name = (<span class="keywordtype">char</span> *) <a class="code" href="gdb__string_8h.html#adf46aa8f2e08cfb505868bbfc88b5fd4">strchr</a>(name+2, <span class="charliteral">&#39; &#39;</span>);
<a name="l00642"></a>00642               <span class="keywordflow">if</span> (regexp == NULL || re_exec(++name) != 0)
<a name="l00643"></a>00643                 sym_arr[matches++] = (<span class="keyword">struct</span> <a class="code" href="structsymbol.html">symbol</a> *) msymbol;
<a name="l00644"></a>00644             }
<a name="l00645"></a>00645         }
<a name="l00646"></a>00646 
<a name="l00647"></a>00647       <a class="code" href="ada-exp_8c.html#a849e2297facde4d3c80dc4f45f8abbdb">qsort</a> (sym_arr, matches, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structminimal__symbol.html">minimal_symbol</a> *), 
<a name="l00648"></a>00648              compare_selectors);
<a name="l00649"></a>00649       <span class="comment">/* Prevent compare on first iteration.  */</span>
<a name="l00650"></a>00650       asel[0] = 0;
<a name="l00651"></a>00651       <span class="keywordflow">for</span> (ix = 0; ix &lt; matches; ix++)  <span class="comment">/* Now do the output.  */</span>
<a name="l00652"></a>00652         {
<a name="l00653"></a>00653           <span class="keywordtype">char</span> *<a class="code" href="windows-nat_8c.html#ade66e4ccafbc33b117610bbc0d85feb0">p</a> = asel;
<a name="l00654"></a>00654 
<a name="l00655"></a>00655           <a class="code" href="defs_8h.html#ad24e2b54375e12474e65ebf7175988fb">QUIT</a>;
<a name="l00656"></a>00656           name = <a class="code" href="symtab_8h.html#a243e66afa96ff58a851b38f428bb3394">SYMBOL_NATURAL_NAME</a> (sym_arr[ix]);
<a name="l00657"></a>00657           name = <a class="code" href="gdb__string_8h.html#adf46aa8f2e08cfb505868bbfc88b5fd4">strchr</a> (name, <span class="charliteral">&#39; &#39;</span>) + 1;
<a name="l00658"></a>00658           <span class="keywordflow">if</span> (p[0] &amp;&amp; specialcmp(name, p) == 0)
<a name="l00659"></a>00659             <span class="keywordflow">continue</span>;           <span class="comment">/* Seen this one already (not unique).  */</span>
<a name="l00660"></a>00660 
<a name="l00661"></a>00661           <span class="comment">/* Copy selector part.  */</span>
<a name="l00662"></a>00662           <span class="keywordflow">while</span> (*name &amp;&amp; *name != <span class="charliteral">&#39;]&#39;</span>)
<a name="l00663"></a>00663             *p++ = *name++;
<a name="l00664"></a>00664           *p++ = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00665"></a>00665           <span class="comment">/* Print in columns.  */</span>
<a name="l00666"></a>00666           <a class="code" href="utils_8c.html#abc52d3fe5ac7dad360e39931cb4f99cd">puts_filtered_tabular</a>(asel, maxlen + 1, 0);
<a name="l00667"></a>00667         }
<a name="l00668"></a>00668       <a class="code" href="utils_8c.html#a31056750818891968a3d994b29a90d53">begin_line</a>();
<a name="l00669"></a>00669     }
<a name="l00670"></a>00670   <span class="keywordflow">else</span>
<a name="l00671"></a>00671     <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;No selectors matching \&quot;%s\&quot;\n&quot;</span>),
<a name="l00672"></a>00672                      regexp ? regexp : <span class="stringliteral">&quot;*&quot;</span>);
<a name="l00673"></a>00673 }
<a name="l00674"></a>00674 
<a name="l00675"></a>00675 <span class="comment">/*</span>
<a name="l00676"></a>00676 <span class="comment"> * Function: compare_classes (const void *, const void *)</span>
<a name="l00677"></a>00677 <span class="comment"> *</span>
<a name="l00678"></a>00678 <span class="comment"> * Comparison function for use with qsort.  Arguments are symbols or</span>
<a name="l00679"></a>00679 <span class="comment"> * msymbols Compares class part of objc method name alphabetically. </span>
<a name="l00680"></a>00680 <span class="comment"> */</span>
<a name="l00681"></a>00681 
<a name="l00682"></a>00682 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00683"></a>00683 compare_classes (<span class="keyword">const</span> <span class="keywordtype">void</span> *a, <span class="keyword">const</span> <span class="keywordtype">void</span> *b)
<a name="l00684"></a>00684 {
<a name="l00685"></a>00685   <span class="keyword">const</span> <span class="keywordtype">char</span> *aname, *bname;
<a name="l00686"></a>00686 
<a name="l00687"></a>00687   aname = <a class="code" href="symtab_8h.html#ac7f4cb1648125545fbd0e4f13b0c572c">SYMBOL_PRINT_NAME</a> (*(<span class="keyword">struct</span> <a class="code" href="structsymbol.html">symbol</a> **) a);
<a name="l00688"></a>00688   bname = <a class="code" href="symtab_8h.html#ac7f4cb1648125545fbd0e4f13b0c572c">SYMBOL_PRINT_NAME</a> (*(<span class="keyword">struct</span> <a class="code" href="structsymbol.html">symbol</a> **) b);
<a name="l00689"></a>00689   <span class="keywordflow">if</span> (aname == NULL || bname == NULL)
<a name="l00690"></a>00690     <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;internal: compare_classes(1)&quot;</span>));
<a name="l00691"></a>00691 
<a name="l00692"></a>00692   <span class="keywordflow">return</span> specialcmp (aname+1, bname+1);
<a name="l00693"></a>00693 }
<a name="l00694"></a>00694 
<a name="l00695"></a>00695 <span class="comment">/*</span>
<a name="l00696"></a>00696 <span class="comment"> * Function: classes_info(regexp, from_tty)</span>
<a name="l00697"></a>00697 <span class="comment"> *</span>
<a name="l00698"></a>00698 <span class="comment"> * Implements the &quot;info classes&quot; command for objective c classes.</span>
<a name="l00699"></a>00699 <span class="comment"> * Lists all objective c classes that match the optional regexp.</span>
<a name="l00700"></a>00700 <span class="comment"> * Works by grepping thru the list of objective c methods.  List will</span>
<a name="l00701"></a>00701 <span class="comment"> * be sorted and uniqued (since one class may have many methods).</span>
<a name="l00702"></a>00702 <span class="comment"> * BUGS: will not list a class that has no methods. </span>
<a name="l00703"></a>00703 <span class="comment"> */</span>
<a name="l00704"></a>00704 
<a name="l00705"></a>00705 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00706"></a>00706 classes_info (<span class="keywordtype">char</span> *regexp, <span class="keywordtype">int</span> from_tty)
<a name="l00707"></a>00707 {
<a name="l00708"></a>00708   <span class="keyword">struct </span>objfile        *objfile;
<a name="l00709"></a>00709   <span class="keyword">struct </span><a class="code" href="structminimal__symbol.html">minimal_symbol</a> *msymbol;
<a name="l00710"></a>00710   <span class="keyword">const</span> <span class="keywordtype">char</span>            *<a class="code" href="aarch64-tdep_8c.html#acc128f98d9ceca227038c771308eff39">name</a>;
<a name="l00711"></a>00711   <span class="keywordtype">char</span>                  *val;
<a name="l00712"></a>00712   <span class="keywordtype">int</span>                    matches = 0;
<a name="l00713"></a>00713   <span class="keywordtype">int</span>                    maxlen  = 0;
<a name="l00714"></a>00714   <span class="keywordtype">int</span>                    ix;
<a name="l00715"></a>00715   <span class="keywordtype">char</span>                   myregexp[2048];
<a name="l00716"></a>00716   <span class="keywordtype">char</span>                   aclass[256];
<a name="l00717"></a>00717   <span class="keyword">struct </span><a class="code" href="structsymbol.html">symbol</a>        **sym_arr;
<a name="l00718"></a>00718 
<a name="l00719"></a>00719   <span class="keywordflow">if</span> (regexp == NULL)
<a name="l00720"></a>00720     strcpy(myregexp, <span class="stringliteral">&quot;.* &quot;</span>);    <span class="comment">/* Null input: match all objc classes.  */</span>
<a name="l00721"></a>00721   <span class="keywordflow">else</span>
<a name="l00722"></a>00722     {
<a name="l00723"></a>00723       <span class="comment">/* Allow a few extra bytes because of the strcat below.  */</span>
<a name="l00724"></a>00724       <span class="keywordflow">if</span> (<span class="keyword">sizeof</span> (myregexp) &lt; strlen (regexp) + 4)
<a name="l00725"></a>00725         <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Regexp is too long: %s&quot;</span>), regexp);
<a name="l00726"></a>00726       strcpy(myregexp, regexp);
<a name="l00727"></a>00727       <span class="keywordflow">if</span> (myregexp[strlen(myregexp) - 1] == <span class="charliteral">&#39;$&#39;</span>)
<a name="l00728"></a>00728         <span class="comment">/* In the method name, the end of the class name is marked by &#39; &#39;.  */</span>
<a name="l00729"></a>00729         myregexp[strlen(myregexp) - 1] = <span class="charliteral">&#39; &#39;</span>;
<a name="l00730"></a>00730       <span class="keywordflow">else</span>
<a name="l00731"></a>00731         strcat(myregexp, <span class="stringliteral">&quot;.* &quot;</span>);
<a name="l00732"></a>00732     }
<a name="l00733"></a>00733 
<a name="l00734"></a>00734   <span class="keywordflow">if</span> (regexp != NULL)
<a name="l00735"></a>00735     {
<a name="l00736"></a>00736       val = <a class="code" href="defs_8h.html#ad321e1eefeb38442e0c40b1279f41ca0">re_comp</a> (myregexp);
<a name="l00737"></a>00737       <span class="keywordflow">if</span> (val != 0)
<a name="l00738"></a>00738         <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Invalid regexp (%s): %s&quot;</span>), val, regexp);
<a name="l00739"></a>00739     }
<a name="l00740"></a>00740 
<a name="l00741"></a>00741   <span class="comment">/* First time thru is JUST to get max length and count.  */</span>
<a name="l00742"></a>00742   <a class="code" href="objfiles_8h.html#a3d08aae2073557e019d75ab37f8182d8">ALL_MSYMBOLS</a> (objfile, msymbol)
<a name="l00743"></a>00743     {
<a name="l00744"></a>00744       <a class="code" href="defs_8h.html#ad24e2b54375e12474e65ebf7175988fb">QUIT</a>;
<a name="l00745"></a>00745       name = <a class="code" href="symtab_8h.html#a243e66afa96ff58a851b38f428bb3394">SYMBOL_NATURAL_NAME</a> (msymbol);
<a name="l00746"></a>00746       <span class="keywordflow">if</span> (name &amp;&amp;
<a name="l00747"></a>00747          (name[0] == <span class="charliteral">&#39;-&#39;</span> || name[0] == <span class="charliteral">&#39;+&#39;</span>) &amp;&amp;
<a name="l00748"></a>00748           name[1] == <span class="charliteral">&#39;[&#39;</span>)                       <span class="comment">/* Got a method name.  */</span>
<a name="l00749"></a>00749         <span class="keywordflow">if</span> (regexp == NULL || re_exec(name+2) != 0)
<a name="l00750"></a>00750           { 
<a name="l00751"></a>00751             <span class="comment">/* Compute length of classname part.  */</span>
<a name="l00752"></a>00752             <span class="keyword">const</span> <span class="keywordtype">char</span> *mystart = name + 2;
<a name="l00753"></a>00753             <span class="keyword">const</span> <span class="keywordtype">char</span> *myend   = <a class="code" href="gdb__string_8h.html#adf46aa8f2e08cfb505868bbfc88b5fd4">strchr</a> (mystart, <span class="charliteral">&#39; &#39;</span>);
<a name="l00754"></a>00754             
<a name="l00755"></a>00755             <span class="keywordflow">if</span> (myend &amp;&amp; (myend - mystart &gt; maxlen))
<a name="l00756"></a>00756               maxlen = myend - mystart;
<a name="l00757"></a>00757             matches++;
<a name="l00758"></a>00758           }
<a name="l00759"></a>00759     }
<a name="l00760"></a>00760   <span class="keywordflow">if</span> (matches)
<a name="l00761"></a>00761     {
<a name="l00762"></a>00762       <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Classes matching \&quot;%s\&quot;:\n\n&quot;</span>), 
<a name="l00763"></a>00763                        regexp ? regexp : <span class="stringliteral">&quot;*&quot;</span>);
<a name="l00764"></a>00764       sym_arr = alloca (matches * <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structsymbol.html">symbol</a> *));
<a name="l00765"></a>00765       matches = 0;
<a name="l00766"></a>00766       <a class="code" href="objfiles_8h.html#a3d08aae2073557e019d75ab37f8182d8">ALL_MSYMBOLS</a> (objfile, msymbol)
<a name="l00767"></a>00767         {
<a name="l00768"></a>00768           <a class="code" href="defs_8h.html#ad24e2b54375e12474e65ebf7175988fb">QUIT</a>;
<a name="l00769"></a>00769           name = <a class="code" href="symtab_8h.html#a243e66afa96ff58a851b38f428bb3394">SYMBOL_NATURAL_NAME</a> (msymbol);
<a name="l00770"></a>00770           <span class="keywordflow">if</span> (name &amp;&amp;
<a name="l00771"></a>00771              (name[0] == <span class="charliteral">&#39;-&#39;</span> || name[0] == <span class="charliteral">&#39;+&#39;</span>) &amp;&amp;
<a name="l00772"></a>00772               name[1] == <span class="charliteral">&#39;[&#39;</span>)                   <span class="comment">/* Got a method name.  */</span>
<a name="l00773"></a>00773             <span class="keywordflow">if</span> (regexp == NULL || re_exec(name+2) != 0)
<a name="l00774"></a>00774                 sym_arr[matches++] = (<span class="keyword">struct </span><a class="code" href="structsymbol.html">symbol</a> *) msymbol;
<a name="l00775"></a>00775         }
<a name="l00776"></a>00776 
<a name="l00777"></a>00777       <a class="code" href="ada-exp_8c.html#a849e2297facde4d3c80dc4f45f8abbdb">qsort</a> (sym_arr, matches, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structminimal__symbol.html">minimal_symbol</a> *), 
<a name="l00778"></a>00778              compare_classes);
<a name="l00779"></a>00779       <span class="comment">/* Prevent compare on first iteration.  */</span>
<a name="l00780"></a>00780       aclass[0] = 0;
<a name="l00781"></a>00781       <span class="keywordflow">for</span> (ix = 0; ix &lt; matches; ix++)  <span class="comment">/* Now do the output.  */</span>
<a name="l00782"></a>00782         {
<a name="l00783"></a>00783           <span class="keywordtype">char</span> *p = aclass;
<a name="l00784"></a>00784 
<a name="l00785"></a>00785           <a class="code" href="defs_8h.html#ad24e2b54375e12474e65ebf7175988fb">QUIT</a>;
<a name="l00786"></a>00786           name = <a class="code" href="symtab_8h.html#a243e66afa96ff58a851b38f428bb3394">SYMBOL_NATURAL_NAME</a> (sym_arr[ix]);
<a name="l00787"></a>00787           name += 2;
<a name="l00788"></a>00788           <span class="keywordflow">if</span> (p[0] &amp;&amp; specialcmp(name, p) == 0)
<a name="l00789"></a>00789             <span class="keywordflow">continue</span>;   <span class="comment">/* Seen this one already (not unique).  */</span>
<a name="l00790"></a>00790 
<a name="l00791"></a>00791           <span class="comment">/* Copy class part of method name.  */</span>
<a name="l00792"></a>00792           <span class="keywordflow">while</span> (*name &amp;&amp; *name != <span class="charliteral">&#39; &#39;</span>)
<a name="l00793"></a>00793             *p++ = *name++;
<a name="l00794"></a>00794           *p++ = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00795"></a>00795           <span class="comment">/* Print in columns.  */</span>
<a name="l00796"></a>00796           <a class="code" href="utils_8c.html#abc52d3fe5ac7dad360e39931cb4f99cd">puts_filtered_tabular</a>(aclass, maxlen + 1, 0);
<a name="l00797"></a>00797         }
<a name="l00798"></a>00798       <a class="code" href="utils_8c.html#a31056750818891968a3d994b29a90d53">begin_line</a>();
<a name="l00799"></a>00799     }
<a name="l00800"></a>00800   <span class="keywordflow">else</span>
<a name="l00801"></a>00801     <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;No classes matching \&quot;%s\&quot;\n&quot;</span>), regexp ? regexp : <span class="stringliteral">&quot;*&quot;</span>);
<a name="l00802"></a>00802 }
<a name="l00803"></a>00803 
<a name="l00804"></a>00804 <span class="keyword">static</span> <span class="keywordtype">char</span> * 
<a name="l00805"></a>00805 parse_selector (<span class="keywordtype">char</span> *method, <span class="keywordtype">char</span> **<a class="code" href="go32-nat_8c.html#a6dfbfc549c0fa420ccc893f30419419d">selector</a>)
<a name="l00806"></a>00806 {
<a name="l00807"></a>00807   <span class="keywordtype">char</span> *s1 = NULL;
<a name="l00808"></a>00808   <span class="keywordtype">char</span> *s2 = NULL;
<a name="l00809"></a>00809   <span class="keywordtype">int</span> found_quote = 0;
<a name="l00810"></a>00810 
<a name="l00811"></a>00811   <span class="keywordtype">char</span> *nselector = NULL;
<a name="l00812"></a>00812 
<a name="l00813"></a>00813   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (selector != NULL);
<a name="l00814"></a>00814 
<a name="l00815"></a>00815   s1 = method;
<a name="l00816"></a>00816 
<a name="l00817"></a>00817   s1 = <a class="code" href="cli-utils_8c.html#afa70bcaee54d487b4412d2a7a5a0c8fa">skip_spaces</a> (s1);
<a name="l00818"></a>00818   <span class="keywordflow">if</span> (*s1 == <span class="charliteral">&#39;\&#39;&#39;</span>) 
<a name="l00819"></a>00819     {
<a name="l00820"></a>00820       found_quote = 1;
<a name="l00821"></a>00821       s1++;
<a name="l00822"></a>00822     }
<a name="l00823"></a>00823   s1 = <a class="code" href="cli-utils_8c.html#afa70bcaee54d487b4412d2a7a5a0c8fa">skip_spaces</a> (s1);
<a name="l00824"></a>00824    
<a name="l00825"></a>00825   nselector = s1;
<a name="l00826"></a>00826   s2 = s1;
<a name="l00827"></a>00827 
<a name="l00828"></a>00828   <span class="keywordflow">for</span> (;;)
<a name="l00829"></a>00829     {
<a name="l00830"></a>00830       <span class="keywordflow">if</span> (isalnum (*s2) || (*s2 == <span class="charliteral">&#39;_&#39;</span>) || (*s2 == <span class="charliteral">&#39;:&#39;</span>))
<a name="l00831"></a>00831         *s1++ = *s2;
<a name="l00832"></a>00832       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isspace (*s2))
<a name="l00833"></a>00833         ;
<a name="l00834"></a>00834       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*s2 == <span class="charliteral">&#39;\0&#39;</span>) || (*s2 == <span class="charliteral">&#39;\&#39;&#39;</span>))
<a name="l00835"></a>00835         <span class="keywordflow">break</span>;
<a name="l00836"></a>00836       <span class="keywordflow">else</span>
<a name="l00837"></a>00837         <span class="keywordflow">return</span> NULL;
<a name="l00838"></a>00838       s2++;
<a name="l00839"></a>00839     }
<a name="l00840"></a>00840   *s1++ = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00841"></a>00841 
<a name="l00842"></a>00842   s2 = <a class="code" href="cli-utils_8c.html#afa70bcaee54d487b4412d2a7a5a0c8fa">skip_spaces</a> (s2);
<a name="l00843"></a>00843   <span class="keywordflow">if</span> (found_quote)
<a name="l00844"></a>00844     {
<a name="l00845"></a>00845       <span class="keywordflow">if</span> (*s2 == <span class="charliteral">&#39;\&#39;&#39;</span>) 
<a name="l00846"></a>00846         s2++;
<a name="l00847"></a>00847       s2 = <a class="code" href="cli-utils_8c.html#afa70bcaee54d487b4412d2a7a5a0c8fa">skip_spaces</a> (s2);
<a name="l00848"></a>00848     }
<a name="l00849"></a>00849 
<a name="l00850"></a>00850   <span class="keywordflow">if</span> (selector != NULL)
<a name="l00851"></a>00851     *selector = nselector;
<a name="l00852"></a>00852 
<a name="l00853"></a>00853   <span class="keywordflow">return</span> s2;
<a name="l00854"></a>00854 }
<a name="l00855"></a>00855 
<a name="l00856"></a>00856 <span class="keyword">static</span> <span class="keywordtype">char</span> * 
<a name="l00857"></a>00857 parse_method (<span class="keywordtype">char</span> *method, <span class="keywordtype">char</span> *<a class="code" href="structtype.html">type</a>, <span class="keywordtype">char</span> **<span class="keyword">class</span>, 
<a name="l00858"></a>00858               <span class="keywordtype">char</span> **category, <span class="keywordtype">char</span> **selector)
<a name="l00859"></a>00859 {
<a name="l00860"></a>00860   <span class="keywordtype">char</span> *s1 = NULL;
<a name="l00861"></a>00861   <span class="keywordtype">char</span> *s2 = NULL;
<a name="l00862"></a>00862   <span class="keywordtype">int</span> found_quote = 0;
<a name="l00863"></a>00863 
<a name="l00864"></a>00864   <span class="keywordtype">char</span> ntype = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00865"></a>00865   <span class="keywordtype">char</span> *nclass = NULL;
<a name="l00866"></a>00866   <span class="keywordtype">char</span> *ncategory = NULL;
<a name="l00867"></a>00867   <span class="keywordtype">char</span> *nselector = NULL;
<a name="l00868"></a>00868 
<a name="l00869"></a>00869   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (type != NULL);
<a name="l00870"></a>00870   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (<span class="keyword">class</span> != NULL);
<a name="l00871"></a>00871   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (category != NULL);
<a name="l00872"></a>00872   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (selector != NULL);
<a name="l00873"></a>00873   
<a name="l00874"></a>00874   s1 = method;
<a name="l00875"></a>00875 
<a name="l00876"></a>00876   s1 = <a class="code" href="cli-utils_8c.html#afa70bcaee54d487b4412d2a7a5a0c8fa">skip_spaces</a> (s1);
<a name="l00877"></a>00877   <span class="keywordflow">if</span> (*s1 == <span class="charliteral">&#39;\&#39;&#39;</span>) 
<a name="l00878"></a>00878     {
<a name="l00879"></a>00879       found_quote = 1;
<a name="l00880"></a>00880       s1++;
<a name="l00881"></a>00881     }
<a name="l00882"></a>00882   s1 = <a class="code" href="cli-utils_8c.html#afa70bcaee54d487b4412d2a7a5a0c8fa">skip_spaces</a> (s1);
<a name="l00883"></a>00883   
<a name="l00884"></a>00884   <span class="keywordflow">if</span> ((s1[0] == <span class="charliteral">&#39;+&#39;</span>) || (s1[0] == <span class="charliteral">&#39;-&#39;</span>))
<a name="l00885"></a>00885     ntype = *s1++;
<a name="l00886"></a>00886 
<a name="l00887"></a>00887   s1 = <a class="code" href="cli-utils_8c.html#afa70bcaee54d487b4412d2a7a5a0c8fa">skip_spaces</a> (s1);
<a name="l00888"></a>00888 
<a name="l00889"></a>00889   <span class="keywordflow">if</span> (*s1 != <span class="charliteral">&#39;[&#39;</span>)
<a name="l00890"></a>00890     <span class="keywordflow">return</span> NULL;
<a name="l00891"></a>00891   s1++;
<a name="l00892"></a>00892 
<a name="l00893"></a>00893   nclass = s1;
<a name="l00894"></a>00894   <span class="keywordflow">while</span> (isalnum (*s1) || (*s1 == <span class="charliteral">&#39;_&#39;</span>))
<a name="l00895"></a>00895     s1++;
<a name="l00896"></a>00896   
<a name="l00897"></a>00897   s2 = s1;
<a name="l00898"></a>00898   s2 = <a class="code" href="cli-utils_8c.html#afa70bcaee54d487b4412d2a7a5a0c8fa">skip_spaces</a> (s2);
<a name="l00899"></a>00899   
<a name="l00900"></a>00900   <span class="keywordflow">if</span> (*s2 == <span class="charliteral">&#39;(&#39;</span>)
<a name="l00901"></a>00901     {
<a name="l00902"></a>00902       s2++;
<a name="l00903"></a>00903       s2 = <a class="code" href="cli-utils_8c.html#afa70bcaee54d487b4412d2a7a5a0c8fa">skip_spaces</a> (s2);
<a name="l00904"></a>00904       ncategory = s2;
<a name="l00905"></a>00905       <span class="keywordflow">while</span> (isalnum (*s2) || (*s2 == <span class="charliteral">&#39;_&#39;</span>))
<a name="l00906"></a>00906         s2++;
<a name="l00907"></a>00907       *s2++ = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00908"></a>00908     }
<a name="l00909"></a>00909 
<a name="l00910"></a>00910   <span class="comment">/* Truncate the class name now that we&#39;re not using the open paren.  */</span>
<a name="l00911"></a>00911   *s1++ = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00912"></a>00912 
<a name="l00913"></a>00913   nselector = s2;
<a name="l00914"></a>00914   s1 = s2;
<a name="l00915"></a>00915 
<a name="l00916"></a>00916   <span class="keywordflow">for</span> (;;)
<a name="l00917"></a>00917     {
<a name="l00918"></a>00918       <span class="keywordflow">if</span> (isalnum (*s2) || (*s2 == <span class="charliteral">&#39;_&#39;</span>) || (*s2 == <span class="charliteral">&#39;:&#39;</span>))
<a name="l00919"></a>00919         *s1++ = *s2;
<a name="l00920"></a>00920       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isspace (*s2))
<a name="l00921"></a>00921         ;
<a name="l00922"></a>00922       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*s2 == <span class="charliteral">&#39;]&#39;</span>)
<a name="l00923"></a>00923         <span class="keywordflow">break</span>;
<a name="l00924"></a>00924       <span class="keywordflow">else</span>
<a name="l00925"></a>00925         <span class="keywordflow">return</span> NULL;
<a name="l00926"></a>00926       s2++;
<a name="l00927"></a>00927     }
<a name="l00928"></a>00928   *s1++ = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00929"></a>00929   s2++;
<a name="l00930"></a>00930 
<a name="l00931"></a>00931   s2 = <a class="code" href="cli-utils_8c.html#afa70bcaee54d487b4412d2a7a5a0c8fa">skip_spaces</a> (s2);
<a name="l00932"></a>00932   <span class="keywordflow">if</span> (found_quote)
<a name="l00933"></a>00933     {
<a name="l00934"></a>00934       <span class="keywordflow">if</span> (*s2 != <span class="charliteral">&#39;\&#39;&#39;</span>) 
<a name="l00935"></a>00935         <span class="keywordflow">return</span> NULL;
<a name="l00936"></a>00936       s2++;
<a name="l00937"></a>00937       s2 = <a class="code" href="cli-utils_8c.html#afa70bcaee54d487b4412d2a7a5a0c8fa">skip_spaces</a> (s2);
<a name="l00938"></a>00938     }
<a name="l00939"></a>00939 
<a name="l00940"></a>00940   <span class="keywordflow">if</span> (type != NULL)
<a name="l00941"></a>00941     *type = ntype;
<a name="l00942"></a>00942   <span class="keywordflow">if</span> (<span class="keyword">class</span> != NULL)
<a name="l00943"></a>00943     *<span class="keyword">class </span>= nclass;
<a name="l00944"></a>00944   <span class="keywordflow">if</span> (category != NULL)
<a name="l00945"></a>00945     *category = ncategory;
<a name="l00946"></a>00946   <span class="keywordflow">if</span> (selector != NULL)
<a name="l00947"></a>00947     *selector = nselector;
<a name="l00948"></a>00948 
<a name="l00949"></a>00949   <span class="keywordflow">return</span> s2;
<a name="l00950"></a>00950 }
<a name="l00951"></a>00951 
<a name="l00952"></a>00952 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00953"></a>00953 find_methods (<span class="keywordtype">char</span> type, <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">class</span>, <span class="keyword">const</span> <span class="keywordtype">char</span> *category, 
<a name="l00954"></a>00954               <span class="keyword">const</span> <span class="keywordtype">char</span> *selector,
<a name="l00955"></a>00955               <a class="code" href="vec_8h.html#ab084f6f29fcf16a6b15d15feb653d414">VEC</a> (<a class="code" href="gdb__vecs_8h.html#a88d1fb873d629b523bfa7335f8819f98">const_char_ptr</a>) **symbol_names)
<a name="l00956"></a>00956 {
<a name="l00957"></a>00957   <span class="keyword">struct </span>objfile *objfile = NULL;
<a name="l00958"></a>00958 
<a name="l00959"></a>00959   <span class="keyword">const</span> <span class="keywordtype">char</span> *symname = NULL;
<a name="l00960"></a>00960 
<a name="l00961"></a>00961   <span class="keywordtype">char</span> ntype = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00962"></a>00962   <span class="keywordtype">char</span> *nclass = NULL;
<a name="l00963"></a>00963   <span class="keywordtype">char</span> *ncategory = NULL;
<a name="l00964"></a>00964   <span class="keywordtype">char</span> *nselector = NULL;
<a name="l00965"></a>00965 
<a name="l00966"></a>00966   <span class="keyword">static</span> <span class="keywordtype">char</span> *tmp = NULL;
<a name="l00967"></a>00967   <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tmplen = 0;
<a name="l00968"></a>00968 
<a name="l00969"></a>00969   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (symbol_names != NULL);
<a name="l00970"></a>00970 
<a name="l00971"></a>00971   <a class="code" href="objfiles_8h.html#a8efee3b85a322006131a6056d45058b3">ALL_OBJFILES</a> (objfile)
<a name="l00972"></a>00972     {
<a name="l00973"></a>00973       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *objc_csym;
<a name="l00974"></a>00974       <span class="keyword">struct </span><a class="code" href="structminimal__symbol.html">minimal_symbol</a> *msymbol = NULL;
<a name="l00975"></a>00975 
<a name="l00976"></a>00976       <span class="comment">/* The objfile_csym variable counts the number of ObjC methods</span>
<a name="l00977"></a>00977 <span class="comment">         that this objfile defines.  We save that count as a private</span>
<a name="l00978"></a>00978 <span class="comment">         objfile data.  If we have already determined that this objfile</span>
<a name="l00979"></a>00979 <span class="comment">         provides no ObjC methods, we can skip it entirely.  */</span>
<a name="l00980"></a>00980 
<a name="l00981"></a>00981       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> objfile_csym = 0;
<a name="l00982"></a>00982 
<a name="l00983"></a>00983       objc_csym = objfile_data (objfile, objc_objfile_data);
<a name="l00984"></a>00984       <span class="keywordflow">if</span> (objc_csym != NULL &amp;&amp; *objc_csym == 0)
<a name="l00985"></a>00985         <span class="comment">/* There are no ObjC symbols in this objfile.  Skip it entirely.  */</span>
<a name="l00986"></a>00986         <span class="keywordflow">continue</span>;
<a name="l00987"></a>00987 
<a name="l00988"></a>00988       <a class="code" href="objfiles_8h.html#aab33f4a89ebfe4c8adb99dbe422081fe">ALL_OBJFILE_MSYMBOLS</a> (objfile, msymbol)
<a name="l00989"></a>00989         {
<a name="l00990"></a>00990           <a class="code" href="defs_8h.html#ad24e2b54375e12474e65ebf7175988fb">QUIT</a>;
<a name="l00991"></a>00991 
<a name="l00992"></a>00992           <span class="comment">/* Check the symbol name first as this can be done entirely without</span>
<a name="l00993"></a>00993 <span class="comment">             sending any query to the target.  */</span>
<a name="l00994"></a>00994           symname = <a class="code" href="symtab_8h.html#a243e66afa96ff58a851b38f428bb3394">SYMBOL_NATURAL_NAME</a> (msymbol);
<a name="l00995"></a>00995           <span class="keywordflow">if</span> (symname == NULL)
<a name="l00996"></a>00996             <span class="keywordflow">continue</span>;
<a name="l00997"></a>00997 
<a name="l00998"></a>00998           <span class="keywordflow">if</span> ((symname[0] != <span class="charliteral">&#39;-&#39;</span> &amp;&amp; symname[0] != <span class="charliteral">&#39;+&#39;</span>) || (symname[1] != <span class="charliteral">&#39;[&#39;</span>))
<a name="l00999"></a>00999             <span class="comment">/* Not a method name.  */</span>
<a name="l01000"></a>01000             <span class="keywordflow">continue</span>;
<a name="l01001"></a>01001 
<a name="l01002"></a>01002           objfile_csym++;
<a name="l01003"></a>01003 
<a name="l01004"></a>01004           <span class="comment">/* Now that thinks are a bit sane, clean up the symname.  */</span>
<a name="l01005"></a>01005           <span class="keywordflow">while</span> ((strlen (symname) + 1) &gt;= tmplen)
<a name="l01006"></a>01006             {
<a name="l01007"></a>01007               tmplen = (tmplen == 0) ? 1024 : tmplen * 2;
<a name="l01008"></a>01008               tmp = <a class="code" href="common-utils_8c.html#af404b7244f442ce8c3069f31af566eae">xrealloc</a> (tmp, tmplen);
<a name="l01009"></a>01009             }
<a name="l01010"></a>01010           strcpy (tmp, symname);
<a name="l01011"></a>01011 
<a name="l01012"></a>01012           <span class="keywordflow">if</span> (parse_method (tmp, &amp;ntype, &amp;nclass,
<a name="l01013"></a>01013                             &amp;ncategory, &amp;nselector) == NULL)
<a name="l01014"></a>01014             <span class="keywordflow">continue</span>;
<a name="l01015"></a>01015 
<a name="l01016"></a>01016           <span class="keywordflow">if</span> ((type != <span class="charliteral">&#39;\0&#39;</span>) &amp;&amp; (ntype != type))
<a name="l01017"></a>01017             <span class="keywordflow">continue</span>;
<a name="l01018"></a>01018 
<a name="l01019"></a>01019           <span class="keywordflow">if</span> ((<span class="keyword">class</span> != NULL) 
<a name="l01020"></a>01020               &amp;&amp; ((nclass == NULL) || (strcmp (<span class="keyword">class</span>, nclass) != 0)))
<a name="l01021"></a>01021             <span class="keywordflow">continue</span>;
<a name="l01022"></a>01022 
<a name="l01023"></a>01023           <span class="keywordflow">if</span> ((category != NULL) &amp;&amp; 
<a name="l01024"></a>01024               ((ncategory == NULL) || (strcmp (category, ncategory) != 0)))
<a name="l01025"></a>01025             <span class="keywordflow">continue</span>;
<a name="l01026"></a>01026 
<a name="l01027"></a>01027           <span class="keywordflow">if</span> ((selector != NULL) &amp;&amp; 
<a name="l01028"></a>01028               ((nselector == NULL) || (strcmp (selector, nselector) != 0)))
<a name="l01029"></a>01029             <span class="keywordflow">continue</span>;
<a name="l01030"></a>01030 
<a name="l01031"></a>01031           <a class="code" href="vec_8h.html#a8d090c0524726d00931070e0c438ba3f">VEC_safe_push</a> (<a class="code" href="gdb__vecs_8h.html#a88d1fb873d629b523bfa7335f8819f98">const_char_ptr</a>, *symbol_names, symname);
<a name="l01032"></a>01032         }
<a name="l01033"></a>01033 
<a name="l01034"></a>01034       <span class="keywordflow">if</span> (objc_csym == NULL)
<a name="l01035"></a>01035         {
<a name="l01036"></a>01036           objc_csym = obstack_alloc (&amp;objfile-&gt;<a class="code" href="structobjfile.html#aab9cedc53383f1b540f0b725edd2d9be">objfile_obstack</a>,
<a name="l01037"></a>01037                                      sizeof (*objc_csym));
<a name="l01038"></a>01038           *objc_csym = objfile_csym;
<a name="l01039"></a>01039           set_objfile_data (objfile, objc_objfile_data, objc_csym);
<a name="l01040"></a>01040         }
<a name="l01041"></a>01041       <span class="keywordflow">else</span>
<a name="l01042"></a>01042         <span class="comment">/* Count of ObjC methods in this objfile should be constant.  */</span>
<a name="l01043"></a>01043         <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (*objc_csym == objfile_csym);
<a name="l01044"></a>01044     }
<a name="l01045"></a>01045 }
<a name="l01046"></a>01046 
<a name="l01047"></a>01047 <span class="comment">/* Uniquify a VEC of strings.  */</span>
<a name="l01048"></a>01048 
<a name="l01049"></a>01049 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l01050"></a>01050 uniquify_strings (<a class="code" href="vec_8h.html#ab084f6f29fcf16a6b15d15feb653d414">VEC</a> (<a class="code" href="gdb__vecs_8h.html#a88d1fb873d629b523bfa7335f8819f98">const_char_ptr</a>) **strings)
<a name="l01051"></a>01051 {
<a name="l01052"></a>01052   <span class="keywordtype">int</span> ix;
<a name="l01053"></a>01053   <span class="keyword">const</span> <span class="keywordtype">char</span> *elem, *last = NULL;
<a name="l01054"></a>01054   <span class="keywordtype">int</span> out;
<a name="l01055"></a>01055 
<a name="l01056"></a>01056   <a class="code" href="ada-exp_8c.html#a849e2297facde4d3c80dc4f45f8abbdb">qsort</a> (<a class="code" href="vec_8h.html#a99adc2006a668acc675e3758d9375ad5">VEC_address</a> (<a class="code" href="gdb__vecs_8h.html#a88d1fb873d629b523bfa7335f8819f98">const_char_ptr</a>, *strings),
<a name="l01057"></a>01057          <a class="code" href="vec_8h.html#a844523bba6d0565ef73a0f4a63e48d19">VEC_length</a> (<a class="code" href="gdb__vecs_8h.html#a88d1fb873d629b523bfa7335f8819f98">const_char_ptr</a>, *strings),
<a name="l01058"></a>01058          <span class="keyword">sizeof</span> (<a class="code" href="gdb__vecs_8h.html#a88d1fb873d629b523bfa7335f8819f98">const_char_ptr</a>),
<a name="l01059"></a>01059          <a class="code" href="utils_8c.html#a4281eb333927489c88b7505cd1db4195">compare_strings</a>);
<a name="l01060"></a>01060   out = 0;
<a name="l01061"></a>01061   <span class="keywordflow">for</span> (ix = 0; <a class="code" href="vec_8h.html#ae7795b0c8e65f45eb49aac5ec2c0fa52">VEC_iterate</a> (<a class="code" href="gdb__vecs_8h.html#a88d1fb873d629b523bfa7335f8819f98">const_char_ptr</a>, *strings, ix, elem); ++ix)
<a name="l01062"></a>01062     {
<a name="l01063"></a>01063       <span class="keywordflow">if</span> (last == NULL || strcmp (last, elem) != 0)
<a name="l01064"></a>01064         {
<a name="l01065"></a>01065           <span class="comment">/* Keep ELEM.  */</span>
<a name="l01066"></a>01066           <a class="code" href="vec_8h.html#ae898349bda7814bcf92db36c0550a10f">VEC_replace</a> (<a class="code" href="gdb__vecs_8h.html#a88d1fb873d629b523bfa7335f8819f98">const_char_ptr</a>, *strings, out, elem);
<a name="l01067"></a>01067           ++out;
<a name="l01068"></a>01068         }
<a name="l01069"></a>01069       last = elem;
<a name="l01070"></a>01070     }
<a name="l01071"></a>01071   <a class="code" href="vec_8h.html#a7b3dd1d44acb431cf333c2406e1c000d">VEC_truncate</a> (<a class="code" href="gdb__vecs_8h.html#a88d1fb873d629b523bfa7335f8819f98">const_char_ptr</a>, *strings, out);
<a name="l01072"></a>01072 }
<a name="l01073"></a>01073 
<a name="l01074"></a>01074 <span class="comment">/* </span>
<a name="l01075"></a>01075 <span class="comment"> * Function: find_imps (const char *selector, struct symbol **sym_arr)</span>
<a name="l01076"></a>01076 <span class="comment"> *</span>
<a name="l01077"></a>01077 <span class="comment"> * Input:  a string representing a selector</span>
<a name="l01078"></a>01078 <span class="comment"> *         a pointer to an array of symbol pointers</span>
<a name="l01079"></a>01079 <span class="comment"> *         possibly a pointer to a symbol found by the caller.</span>
<a name="l01080"></a>01080 <span class="comment"> *</span>
<a name="l01081"></a>01081 <span class="comment"> * Output: number of methods that implement that selector.  Side</span>
<a name="l01082"></a>01082 <span class="comment"> * effects: The array of symbol pointers is filled with matching syms.</span>
<a name="l01083"></a>01083 <span class="comment"> *</span>
<a name="l01084"></a>01084 <span class="comment"> * By analogy with function &quot;find_methods&quot; (symtab.c), builds a list</span>
<a name="l01085"></a>01085 <span class="comment"> * of symbols matching the ambiguous input, so that &quot;decode_line_2&quot;</span>
<a name="l01086"></a>01086 <span class="comment"> * (symtab.c) can list them and ask the user to choose one or more.</span>
<a name="l01087"></a>01087 <span class="comment"> * In this case the matches are objective c methods</span>
<a name="l01088"></a>01088 <span class="comment"> * (&quot;implementations&quot;) matching an objective c selector.</span>
<a name="l01089"></a>01089 <span class="comment"> *</span>
<a name="l01090"></a>01090 <span class="comment"> * Note that it is possible for a normal (c-style) function to have</span>
<a name="l01091"></a>01091 <span class="comment"> * the same name as an objective c selector.  To prevent the selector</span>
<a name="l01092"></a>01092 <span class="comment"> * from eclipsing the function, we allow the caller (decode_line_1) to</span>
<a name="l01093"></a>01093 <span class="comment"> * search for such a function first, and if it finds one, pass it in</span>
<a name="l01094"></a>01094 <span class="comment"> * to us.  We will then integrate it into the list.  We also search</span>
<a name="l01095"></a>01095 <span class="comment"> * for one here, among the minsyms.</span>
<a name="l01096"></a>01096 <span class="comment"> *</span>
<a name="l01097"></a>01097 <span class="comment"> * NOTE: if NUM_DEBUGGABLE is non-zero, the sym_arr will be divided</span>
<a name="l01098"></a>01098 <span class="comment"> *       into two parts: debuggable (struct symbol) syms, and</span>
<a name="l01099"></a>01099 <span class="comment"> *       non_debuggable (struct minimal_symbol) syms.  The debuggable</span>
<a name="l01100"></a>01100 <span class="comment"> *       ones will come first, before NUM_DEBUGGABLE (which will thus</span>
<a name="l01101"></a>01101 <span class="comment"> *       be the index of the first non-debuggable one).</span>
<a name="l01102"></a>01102 <span class="comment"> */</span>
<a name="l01103"></a>01103 
<a name="l01104"></a>01104 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01105"></a><a class="code" href="objc-lang_8h.html#a21137af45dfab935797a6bc6eaf71298">01105</a> <a class="code" href="objc-lang_8c.html#a21137af45dfab935797a6bc6eaf71298">find_imps</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *method, <a class="code" href="vec_8h.html#ab084f6f29fcf16a6b15d15feb653d414">VEC</a> (<a class="code" href="gdb__vecs_8h.html#a88d1fb873d629b523bfa7335f8819f98">const_char_ptr</a>) **symbol_names)
<a name="l01106"></a>01106 {
<a name="l01107"></a>01107   <span class="keywordtype">char</span> type = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l01108"></a>01108   <span class="keywordtype">char</span> *<span class="keyword">class </span>= NULL;
<a name="l01109"></a>01109   <span class="keywordtype">char</span> *category = NULL;
<a name="l01110"></a>01110   <span class="keywordtype">char</span> *selector = NULL;
<a name="l01111"></a>01111 
<a name="l01112"></a>01112   <span class="keywordtype">char</span> *buf = NULL;
<a name="l01113"></a>01113   <span class="keywordtype">char</span> *tmp = NULL;
<a name="l01114"></a>01114 
<a name="l01115"></a>01115   <span class="keywordtype">int</span> selector_case = 0;
<a name="l01116"></a>01116 
<a name="l01117"></a>01117   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (symbol_names != NULL);
<a name="l01118"></a>01118 
<a name="l01119"></a>01119   buf = (<span class="keywordtype">char</span> *) alloca (strlen (method) + 1);
<a name="l01120"></a>01120   strcpy (buf, method);
<a name="l01121"></a>01121   tmp = parse_method (buf, &amp;type, &amp;<span class="keyword">class</span>, &amp;category, &amp;selector);
<a name="l01122"></a>01122 
<a name="l01123"></a>01123   <span class="keywordflow">if</span> (tmp == NULL)
<a name="l01124"></a>01124     {
<a name="l01125"></a>01125       strcpy (buf, method);
<a name="l01126"></a>01126       tmp = parse_selector (buf, &amp;selector);
<a name="l01127"></a>01127 
<a name="l01128"></a>01128       <span class="keywordflow">if</span> (tmp == NULL)
<a name="l01129"></a>01129         <span class="keywordflow">return</span> NULL;
<a name="l01130"></a>01130 
<a name="l01131"></a>01131       selector_case = 1;
<a name="l01132"></a>01132     }
<a name="l01133"></a>01133 
<a name="l01134"></a>01134   find_methods (type, <span class="keyword">class</span>, category, selector, symbol_names);
<a name="l01135"></a>01135 
<a name="l01136"></a>01136   <span class="comment">/* If we hit the &quot;selector&quot; case, and we found some methods, then</span>
<a name="l01137"></a>01137 <span class="comment">     add the selector itself as a symbol, if it exists.  */</span>
<a name="l01138"></a>01138   <span class="keywordflow">if</span> (selector_case &amp;&amp; !<a class="code" href="vec_8h.html#ac9981d313a5e114db0e05b7b9cd16319">VEC_empty</a> (<a class="code" href="gdb__vecs_8h.html#a88d1fb873d629b523bfa7335f8819f98">const_char_ptr</a>, *symbol_names))
<a name="l01139"></a>01139     {
<a name="l01140"></a>01140       <span class="keyword">struct </span><a class="code" href="structsymbol.html">symbol</a> *sym = <a class="code" href="symtab_8c.html#a8a5c3f803198aed047a55c0e4f61b315">lookup_symbol</a> (selector, NULL, <a class="code" href="symtab_8h.html#a5c384cef81c5f50f32caadbfd6974a1aa15693f9d844450eb4bfd4b37114f4aed">VAR_DOMAIN</a>, 0);
<a name="l01141"></a>01141 
<a name="l01142"></a>01142       <span class="keywordflow">if</span> (sym != NULL) 
<a name="l01143"></a>01143         <a class="code" href="vec_8h.html#a8d090c0524726d00931070e0c438ba3f">VEC_safe_push</a> (<a class="code" href="gdb__vecs_8h.html#a88d1fb873d629b523bfa7335f8819f98">const_char_ptr</a>, *symbol_names,
<a name="l01144"></a>01144                        <a class="code" href="symtab_8h.html#a243e66afa96ff58a851b38f428bb3394">SYMBOL_NATURAL_NAME</a> (sym));
<a name="l01145"></a>01145       <span class="keywordflow">else</span>
<a name="l01146"></a>01146         {
<a name="l01147"></a>01147           <span class="keyword">struct </span><a class="code" href="structminimal__symbol.html">minimal_symbol</a> *msym = <a class="code" href="minsyms_8c.html#af87f7a894386515074ddd71365bc09b8">lookup_minimal_symbol</a> (selector, 0, 0);
<a name="l01148"></a>01148 
<a name="l01149"></a>01149           <span class="keywordflow">if</span> (msym != NULL) 
<a name="l01150"></a>01150             <a class="code" href="vec_8h.html#a8d090c0524726d00931070e0c438ba3f">VEC_safe_push</a> (<a class="code" href="gdb__vecs_8h.html#a88d1fb873d629b523bfa7335f8819f98">const_char_ptr</a>, *symbol_names,
<a name="l01151"></a>01151                            <a class="code" href="symtab_8h.html#a243e66afa96ff58a851b38f428bb3394">SYMBOL_NATURAL_NAME</a> (msym));
<a name="l01152"></a>01152         }
<a name="l01153"></a>01153     }
<a name="l01154"></a>01154 
<a name="l01155"></a>01155   uniquify_strings (symbol_names);
<a name="l01156"></a>01156 
<a name="l01157"></a>01157   <span class="keywordflow">return</span> method + (tmp - buf);
<a name="l01158"></a>01158 }
<a name="l01159"></a>01159 
<a name="l01160"></a>01160 <span class="keyword">static</span> <span class="keywordtype">void</span> 
<a name="l01161"></a>01161 print_object_command (<span class="keywordtype">char</span> *args, <span class="keywordtype">int</span> from_tty)
<a name="l01162"></a>01162 {
<a name="l01163"></a>01163   <span class="keyword">struct </span>value *object, *<span class="keyword">function</span>, *description;
<a name="l01164"></a>01164   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> string_addr, object_addr;
<a name="l01165"></a>01165   <span class="keywordtype">int</span> i = 0;
<a name="l01166"></a>01166   <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> c = 0;
<a name="l01167"></a>01167 
<a name="l01168"></a>01168   <span class="keywordflow">if</span> (!args || !*args)
<a name="l01169"></a>01169     <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (
<a name="l01170"></a>01170 <span class="stringliteral">&quot;The &#39;print-object&#39; command requires an argument (an Objective-C object)&quot;</span>);
<a name="l01171"></a>01171 
<a name="l01172"></a>01172   {
<a name="l01173"></a>01173     <span class="keyword">struct </span><a class="code" href="structexpression.html">expression</a> *expr = <a class="code" href="expression_8h.html#a286599225dbfecf78c83d1eb5261f25a">parse_expression</a> (args);
<a name="l01174"></a>01174     <span class="keyword">struct </span>cleanup *old_chain = 
<a name="l01175"></a>01175       <a class="code" href="cleanups_8c.html#a3d418f8af424aec399898c2d48b26224">make_cleanup</a> (<a class="code" href="utils_8c.html#a6d8c21606d3f67a431a7bfbb1f47d12e">free_current_contents</a>, &amp;expr);
<a name="l01176"></a>01176     <span class="keywordtype">int</span> pc = 0;
<a name="l01177"></a>01177 
<a name="l01178"></a>01178     <span class="keywordtype">object</span> = <a class="code" href="eval_8c.html#a35831b259040b92681ffda421ae1ad4e">evaluate_subexp</a> (<a class="code" href="structbuiltin__type.html">builtin_type</a> (expr-&gt;<a class="code" href="structexpression.html#ae549c2e4f2dd35e0c72338c37eee2961">gdbarch</a>)-&gt;<a class="code" href="structbuiltin__type.html#a55f6f9ff7436431777683d8ba62f662a">builtin_data_ptr</a>,
<a name="l01179"></a>01179                               expr, &amp;pc, <a class="code" href="expression_8h.html#ad11fe8a649f74f5cf6b6a8a317672c73a2e0f47a90a425663b11d68b22e45be95">EVAL_NORMAL</a>);
<a name="l01180"></a>01180     <a class="code" href="cleanups_8c.html#a8b313a4f1c613973ea444e5fa54976f8">do_cleanups</a> (old_chain);
<a name="l01181"></a>01181   }
<a name="l01182"></a>01182 
<a name="l01183"></a>01183   <span class="comment">/* Validate the address for sanity.  */</span>
<a name="l01184"></a>01184   object_addr = <a class="code" href="value_8c.html#aa95e2692a6e5338edb5db75909064bc1">value_as_long</a> (<span class="keywordtype">object</span>);
<a name="l01185"></a>01185   <a class="code" href="corefile_8c.html#a5e0189c6f21f1c9321b379877183b819">read_memory</a> (object_addr, &amp;c, 1);
<a name="l01186"></a>01186 
<a name="l01187"></a>01187   <span class="keyword">function</span> = <a class="code" href="valops_8c.html#a122c0454d98b26597f4bfa54ba4e587d">find_function_in_inferior</a> (<span class="stringliteral">&quot;_NSPrintForDebugger&quot;</span>, NULL);
<a name="l01188"></a>01188   <span class="keywordflow">if</span> (<span class="keyword">function</span> == NULL)
<a name="l01189"></a>01189     <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Unable to locate _NSPrintForDebugger in child process&quot;</span>));
<a name="l01190"></a>01190 
<a name="l01191"></a>01191   description = <a class="code" href="infcall_8c.html#a8344d63cd8405f1e9fae104da173283d">call_function_by_hand</a> (<span class="keyword">function</span>, 1, &amp;<span class="keywordtype">object</span>);
<a name="l01192"></a>01192 
<a name="l01193"></a>01193   string_addr = <a class="code" href="value_8c.html#aa95e2692a6e5338edb5db75909064bc1">value_as_long</a> (description);
<a name="l01194"></a>01194   <span class="keywordflow">if</span> (string_addr == 0)
<a name="l01195"></a>01195     <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;object returns null description&quot;</span>));
<a name="l01196"></a>01196 
<a name="l01197"></a>01197   <a class="code" href="corefile_8c.html#a5e0189c6f21f1c9321b379877183b819">read_memory</a> (string_addr + i++, &amp;c, 1);
<a name="l01198"></a>01198   <span class="keywordflow">if</span> (c != 0)
<a name="l01199"></a>01199     <span class="keywordflow">do</span>
<a name="l01200"></a>01200       { <span class="comment">/* Read and print characters up to EOS.  */</span>
<a name="l01201"></a>01201         <a class="code" href="defs_8h.html#ad24e2b54375e12474e65ebf7175988fb">QUIT</a>;
<a name="l01202"></a>01202         <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot;%c&quot;</span>, c);
<a name="l01203"></a>01203         <a class="code" href="corefile_8c.html#a5e0189c6f21f1c9321b379877183b819">read_memory</a> (string_addr + i++, &amp;c, 1);
<a name="l01204"></a>01204       } <span class="keywordflow">while</span> (c != 0);
<a name="l01205"></a>01205   <span class="keywordflow">else</span>
<a name="l01206"></a>01206     <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a>(<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;&lt;object returns empty description&gt;&quot;</span>));
<a name="l01207"></a>01207   <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01208"></a>01208 }
<a name="l01209"></a>01209 
<a name="l01210"></a>01210 <span class="comment">/* The data structure &#39;methcalls&#39; is used to detect method calls (thru</span>
<a name="l01211"></a>01211 <span class="comment"> * ObjC runtime lib functions objc_msgSend, objc_msgSendSuper, etc.),</span>
<a name="l01212"></a>01212 <span class="comment"> * and ultimately find the method being called.</span>
<a name="l01213"></a>01213 <span class="comment"> */</span>
<a name="l01214"></a>01214 
<a name="l01215"></a>01215 <span class="keyword">struct </span>objc_methcall {
<a name="l01216"></a>01216   <span class="keywordtype">char</span> *<a class="code" href="aarch64-tdep_8c.html#acc128f98d9ceca227038c771308eff39">name</a>;
<a name="l01217"></a>01217  <span class="comment">/* Return instance method to be called.  */</span>
<a name="l01218"></a>01218   <a class="code" href="command_8h.html#a74f207b5aa4ba51c3a2ad59b219a423b">int</a> (*stop_at) (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> *);
<a name="l01219"></a>01219   <span class="comment">/* Start of pc range corresponding to method invocation.  */</span>
<a name="l01220"></a>01220   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> begin;
<a name="l01221"></a>01221   <span class="comment">/* End of pc range corresponding to method invocation.  */</span>
<a name="l01222"></a>01222   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> end;
<a name="l01223"></a>01223 };
<a name="l01224"></a>01224 
<a name="l01225"></a>01225 <span class="keyword">static</span> <span class="keywordtype">int</span> resolve_msgsend (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> *new_pc);
<a name="l01226"></a>01226 <span class="keyword">static</span> <span class="keywordtype">int</span> resolve_msgsend_stret (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> *new_pc);
<a name="l01227"></a>01227 <span class="keyword">static</span> <span class="keywordtype">int</span> resolve_msgsend_super (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> *new_pc);
<a name="l01228"></a>01228 <span class="keyword">static</span> <span class="keywordtype">int</span> resolve_msgsend_super_stret (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> *new_pc);
<a name="l01229"></a>01229 
<a name="l01230"></a>01230 <span class="keyword">static</span> <span class="keyword">struct </span>objc_methcall methcalls[] = {
<a name="l01231"></a>01231   { <span class="stringliteral">&quot;_objc_msgSend&quot;</span>, resolve_msgsend, 0, 0},
<a name="l01232"></a>01232   { <span class="stringliteral">&quot;_objc_msgSend_stret&quot;</span>, resolve_msgsend_stret, 0, 0},
<a name="l01233"></a>01233   { <span class="stringliteral">&quot;_objc_msgSendSuper&quot;</span>, resolve_msgsend_super, 0, 0},
<a name="l01234"></a>01234   { <span class="stringliteral">&quot;_objc_msgSendSuper_stret&quot;</span>, resolve_msgsend_super_stret, 0, 0},
<a name="l01235"></a>01235   { <span class="stringliteral">&quot;_objc_getClass&quot;</span>, NULL, 0, 0},
<a name="l01236"></a>01236   { <span class="stringliteral">&quot;_objc_getMetaClass&quot;</span>, NULL, 0, 0}
<a name="l01237"></a>01237 };
<a name="l01238"></a>01238 
<a name="l01239"></a><a class="code" href="objc-lang_8c.html#a5826ceebd1120e7c08e3bab684a9e415">01239</a> <span class="preprocessor">#define nmethcalls (sizeof (methcalls) / sizeof (methcalls[0]))</span>
<a name="l01240"></a>01240 <span class="preprocessor"></span>
<a name="l01241"></a>01241 <span class="comment">/* The following function, &quot;find_objc_msgsend&quot;, fills in the data</span>
<a name="l01242"></a>01242 <span class="comment"> * structure &quot;objc_msgs&quot; by finding the addresses of each of the</span>
<a name="l01243"></a>01243 <span class="comment"> * (currently four) functions that it holds (of which objc_msgSend is</span>
<a name="l01244"></a>01244 <span class="comment"> * the first).  This must be called each time symbols are loaded, in</span>
<a name="l01245"></a>01245 <span class="comment"> * case the functions have moved for some reason.</span>
<a name="l01246"></a>01246 <span class="comment"> */</span>
<a name="l01247"></a>01247 
<a name="l01248"></a>01248 <span class="keyword">static</span> <span class="keywordtype">void</span> 
<a name="l01249"></a>01249 find_objc_msgsend (<span class="keywordtype">void</span>)
<a name="l01250"></a>01250 {
<a name="l01251"></a>01251   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;
<a name="l01252"></a>01252 
<a name="l01253"></a>01253   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="objc-lang_8c.html#a5826ceebd1120e7c08e3bab684a9e415">nmethcalls</a>; i++)
<a name="l01254"></a>01254     {
<a name="l01255"></a>01255       <span class="keyword">struct </span><a class="code" href="structminimal__symbol.html">minimal_symbol</a> *<a class="code" href="remote-fileio_8c.html#a7e97efb32ba66c3f1141bdbb82529d20">func</a>;
<a name="l01256"></a>01256 
<a name="l01257"></a>01257       <span class="comment">/* Try both with and without underscore.  */</span>
<a name="l01258"></a>01258       func = <a class="code" href="minsyms_8c.html#af87f7a894386515074ddd71365bc09b8">lookup_minimal_symbol</a> (methcalls[i].name, NULL, NULL);
<a name="l01259"></a>01259       <span class="keywordflow">if</span> ((func == NULL) &amp;&amp; (methcalls[i].name[0] == <span class="charliteral">&#39;_&#39;</span>))
<a name="l01260"></a>01260         {
<a name="l01261"></a>01261           func = <a class="code" href="minsyms_8c.html#af87f7a894386515074ddd71365bc09b8">lookup_minimal_symbol</a> (methcalls[i].name + 1, NULL, NULL);
<a name="l01262"></a>01262         }
<a name="l01263"></a>01263       <span class="keywordflow">if</span> (func == NULL)
<a name="l01264"></a>01264         { 
<a name="l01265"></a>01265           methcalls[i].begin = 0;
<a name="l01266"></a>01266           methcalls[i].end = 0;
<a name="l01267"></a>01267           <span class="keywordflow">continue</span>; 
<a name="l01268"></a>01268         }
<a name="l01269"></a>01269 
<a name="l01270"></a>01270       methcalls[i].begin = <a class="code" href="symtab_8h.html#abee697b9e3bb4f4d164ad920a87ab854">SYMBOL_VALUE_ADDRESS</a> (func);
<a name="l01271"></a>01271       <span class="keywordflow">do</span> {
<a name="l01272"></a>01272         methcalls[i].end = <a class="code" href="symtab_8h.html#abee697b9e3bb4f4d164ad920a87ab854">SYMBOL_VALUE_ADDRESS</a> (++func);
<a name="l01273"></a>01273       } <span class="keywordflow">while</span> (methcalls[i].begin == methcalls[i].end);
<a name="l01274"></a>01274     }
<a name="l01275"></a>01275 }
<a name="l01276"></a>01276 
<a name="l01277"></a>01277 <span class="comment">/* find_objc_msgcall (replaces pc_off_limits)</span>
<a name="l01278"></a>01278 <span class="comment"> *</span>
<a name="l01279"></a>01279 <span class="comment"> * ALL that this function now does is to determine whether the input</span>
<a name="l01280"></a>01280 <span class="comment"> * address (&quot;pc&quot;) is the address of one of the Objective-C message</span>
<a name="l01281"></a>01281 <span class="comment"> * dispatch functions (mainly objc_msgSend or objc_msgSendSuper), and</span>
<a name="l01282"></a>01282 <span class="comment"> * if so, it returns the address of the method that will be called.</span>
<a name="l01283"></a>01283 <span class="comment"> *</span>
<a name="l01284"></a>01284 <span class="comment"> * The old function &quot;pc_off_limits&quot; used to do a lot of other things</span>
<a name="l01285"></a>01285 <span class="comment"> * in addition, such as detecting shared library jump stubs and</span>
<a name="l01286"></a>01286 <span class="comment"> * returning the address of the shlib function that would be called.</span>
<a name="l01287"></a>01287 <span class="comment"> * That functionality has been moved into the gdbarch_skip_trampoline_code and</span>
<a name="l01288"></a>01288 <span class="comment"> * IN_SOLIB_TRAMPOLINE macros, which are resolved in the target-</span>
<a name="l01289"></a>01289 <span class="comment"> * dependent modules.</span>
<a name="l01290"></a>01290 <span class="comment"> */</span>
<a name="l01291"></a>01291 
<a name="l01292"></a>01292 <span class="keyword">struct </span>objc_submethod_helper_data {
<a name="l01293"></a>01293   <a class="code" href="command_8h.html#a74f207b5aa4ba51c3a2ad59b219a423b">int</a> (*f) (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> *);
<a name="l01294"></a>01294   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc;
<a name="l01295"></a>01295   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> *new_pc;
<a name="l01296"></a>01296 };
<a name="l01297"></a>01297 
<a name="l01298"></a>01298 <span class="keyword">static</span> <span class="keywordtype">int</span> 
<a name="l01299"></a>01299 find_objc_msgcall_submethod_helper (<span class="keywordtype">void</span> * arg)
<a name="l01300"></a>01300 {
<a name="l01301"></a>01301   <span class="keyword">struct </span>objc_submethod_helper_data *s = 
<a name="l01302"></a>01302     (<span class="keyword">struct </span>objc_submethod_helper_data *) arg;
<a name="l01303"></a>01303 
<a name="l01304"></a>01304   <span class="keywordflow">if</span> (s-&gt;f (s-&gt;pc, s-&gt;new_pc) == 0) 
<a name="l01305"></a>01305     <span class="keywordflow">return</span> 1;
<a name="l01306"></a>01306   <span class="keywordflow">else</span> 
<a name="l01307"></a>01307     <span class="keywordflow">return</span> 0;
<a name="l01308"></a>01308 }
<a name="l01309"></a>01309 
<a name="l01310"></a>01310 <span class="keyword">static</span> <span class="keywordtype">int</span> 
<a name="l01311"></a>01311 find_objc_msgcall_submethod (<span class="keywordtype">int</span> (*f) (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> *),
<a name="l01312"></a>01312                              <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc, 
<a name="l01313"></a>01313                              <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> *new_pc)
<a name="l01314"></a>01314 {
<a name="l01315"></a>01315   <span class="keyword">struct </span>objc_submethod_helper_data s;
<a name="l01316"></a>01316 
<a name="l01317"></a>01317   s.f = f;
<a name="l01318"></a>01318   s.pc = pc;
<a name="l01319"></a>01319   s.new_pc = new_pc;
<a name="l01320"></a>01320 
<a name="l01321"></a>01321   <span class="keywordflow">if</span> (<a class="code" href="exceptions_8c.html#ad6275ae3cd191f69dd2fe540f138cb2d">catch_errors</a> (find_objc_msgcall_submethod_helper,
<a name="l01322"></a>01322                     (<span class="keywordtype">void</span> *) &amp;s,
<a name="l01323"></a>01323                     <span class="stringliteral">&quot;Unable to determine target of &quot;</span>
<a name="l01324"></a>01324                     <span class="stringliteral">&quot;Objective-C method call (ignoring):\n&quot;</span>,
<a name="l01325"></a>01325                     <a class="code" href="exceptions_8h.html#abfa3a3b99557b11f5766baf69465fdf6ab50fde886a7de8c013bf2bd4e7c073a4">RETURN_MASK_ALL</a>) == 0) 
<a name="l01326"></a>01326     <span class="keywordflow">return</span> 1;
<a name="l01327"></a>01327   <span class="keywordflow">else</span> 
<a name="l01328"></a>01328     <span class="keywordflow">return</span> 0;
<a name="l01329"></a>01329 }
<a name="l01330"></a>01330 
<a name="l01331"></a>01331 <span class="keywordtype">int</span> 
<a name="l01332"></a><a class="code" href="objc-lang_8h.html#a8beac5af04447e5649b8b0862418120e">01332</a> <a class="code" href="objc-lang_8c.html#a8beac5af04447e5649b8b0862418120e">find_objc_msgcall</a> (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> *new_pc)
<a name="l01333"></a>01333 {
<a name="l01334"></a>01334   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;
<a name="l01335"></a>01335 
<a name="l01336"></a>01336   find_objc_msgsend ();
<a name="l01337"></a>01337   <span class="keywordflow">if</span> (new_pc != NULL)
<a name="l01338"></a>01338     {
<a name="l01339"></a>01339       *new_pc = 0;
<a name="l01340"></a>01340     }
<a name="l01341"></a>01341 
<a name="l01342"></a>01342   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="objc-lang_8c.html#a5826ceebd1120e7c08e3bab684a9e415">nmethcalls</a>; i++) 
<a name="l01343"></a>01343     <span class="keywordflow">if</span> ((pc &gt;= methcalls[i].begin) &amp;&amp; (pc &lt; methcalls[i].end)) 
<a name="l01344"></a>01344       {
<a name="l01345"></a>01345         <span class="keywordflow">if</span> (methcalls[i].stop_at != NULL) 
<a name="l01346"></a>01346           <span class="keywordflow">return</span> find_objc_msgcall_submethod (methcalls[i].stop_at, 
<a name="l01347"></a>01347                                               pc, new_pc);
<a name="l01348"></a>01348         <span class="keywordflow">else</span> 
<a name="l01349"></a>01349           <span class="keywordflow">return</span> 0;
<a name="l01350"></a>01350       }
<a name="l01351"></a>01351 
<a name="l01352"></a>01352   <span class="keywordflow">return</span> 0;
<a name="l01353"></a>01353 }
<a name="l01354"></a>01354 
<a name="l01355"></a>01355 <span class="comment">/* -Wmissing-prototypes */</span>
<a name="l01356"></a>01356 <span class="keyword">extern</span> <a class="code" href="defs_8h.html#a686ed07d4fdcdc366f2bc677216ca08d">initialize_file_ftype</a> <a class="code" href="objc-lang_8c.html#a501129187f7b67e3a72667a7246a0366">_initialize_objc_language</a>;
<a name="l01357"></a>01357 
<a name="l01358"></a>01358 <span class="keywordtype">void</span>
<a name="l01359"></a><a class="code" href="objc-lang_8c.html#a1cee83c6918214def4dbdad4732e3a8d">01359</a> _initialize_objc_language (<span class="keywordtype">void</span>)
<a name="l01360"></a>01360 {
<a name="l01361"></a>01361   <a class="code" href="language_8c.html#acf669be4f23fee01f1d5ab3f7194df17">add_language</a> (&amp;objc_language_defn);
<a name="l01362"></a>01362   <a class="code" href="cli-decode_8c.html#a9f6cd2f7798c32a7a27cab617e71cf6a">add_info</a> (<span class="stringliteral">&quot;selectors&quot;</span>, selectors_info,    <span class="comment">/* INFO SELECTORS command.  */</span>
<a name="l01363"></a>01363             <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;All Objective-C selectors, or those matching REGEXP.&quot;</span>));
<a name="l01364"></a>01364   <a class="code" href="cli-decode_8c.html#a9f6cd2f7798c32a7a27cab617e71cf6a">add_info</a> (<span class="stringliteral">&quot;classes&quot;</span>, classes_info,        <span class="comment">/* INFO CLASSES   command.  */</span>
<a name="l01365"></a>01365             <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;All Objective-C classes, or those matching REGEXP.&quot;</span>));
<a name="l01366"></a>01366   <a class="code" href="cli-decode_8c.html#a0df0ca36d9acd96440e24407cbef593c">add_com</a> (<span class="stringliteral">&quot;print-object&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49a882324bfe96480c161105fe35d4cd58b">class_vars</a>, print_object_command, 
<a name="l01367"></a>01367            <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Ask an Objective-C object to print itself.&quot;</span>));
<a name="l01368"></a>01368   <a class="code" href="cli-decode_8c.html#aeeea74da863db26c8d7fee1573f26a05">add_com_alias</a> (<span class="stringliteral">&quot;po&quot;</span>, <span class="stringliteral">&quot;print-object&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49a882324bfe96480c161105fe35d4cd58b">class_vars</a>, 1);
<a name="l01369"></a>01369 }
<a name="l01370"></a>01370 
<a name="l01371"></a>01371 <span class="keyword">static</span> <span class="keywordtype">void</span> 
<a name="l01372"></a>01372 read_objc_method (<span class="keyword">struct</span> gdbarch *gdbarch, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> addr,
<a name="l01373"></a>01373                   <span class="keyword">struct</span> objc_method *method)
<a name="l01374"></a>01374 {
<a name="l01375"></a>01375   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l01376"></a>01376 
<a name="l01377"></a>01377   method-&gt;name  = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (addr + 0, 4, byte_order);
<a name="l01378"></a>01378   method-&gt;types = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (addr + 4, 4, byte_order);
<a name="l01379"></a>01379   method-&gt;imp   = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (addr + 8, 4, byte_order);
<a name="l01380"></a>01380 }
<a name="l01381"></a>01381 
<a name="l01382"></a>01382 <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>
<a name="l01383"></a>01383 read_objc_methlist_nmethods (<span class="keyword">struct</span> gdbarch *gdbarch, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> addr)
<a name="l01384"></a>01384 {
<a name="l01385"></a>01385   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l01386"></a>01386 
<a name="l01387"></a>01387   <span class="keywordflow">return</span> <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (addr + 4, 4, byte_order);
<a name="l01388"></a>01388 }
<a name="l01389"></a>01389 
<a name="l01390"></a>01390 <span class="keyword">static</span> <span class="keywordtype">void</span> 
<a name="l01391"></a>01391 read_objc_methlist_method (<span class="keyword">struct</span> gdbarch *gdbarch, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> addr,
<a name="l01392"></a>01392                            <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> num, <span class="keyword">struct</span> objc_method *method)
<a name="l01393"></a>01393 {
<a name="l01394"></a>01394   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (num &lt; read_objc_methlist_nmethods (gdbarch, addr));
<a name="l01395"></a>01395   read_objc_method (gdbarch, addr + 8 + (12 * num), method);
<a name="l01396"></a>01396 }
<a name="l01397"></a>01397   
<a name="l01398"></a>01398 <span class="keyword">static</span> <span class="keywordtype">void</span> 
<a name="l01399"></a>01399 read_objc_object (<span class="keyword">struct</span> gdbarch *gdbarch, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> addr,
<a name="l01400"></a>01400                   <span class="keyword">struct</span> objc_object *<span class="keywordtype">object</span>)
<a name="l01401"></a>01401 {
<a name="l01402"></a>01402   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l01403"></a>01403 
<a name="l01404"></a>01404   <span class="keywordtype">object</span>-&gt;isa = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (addr, 4, byte_order);
<a name="l01405"></a>01405 }
<a name="l01406"></a>01406 
<a name="l01407"></a>01407 <span class="keyword">static</span> <span class="keywordtype">void</span> 
<a name="l01408"></a>01408 read_objc_super (<span class="keyword">struct</span> gdbarch *gdbarch, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> addr,
<a name="l01409"></a>01409                  <span class="keyword">struct</span> objc_super *super)
<a name="l01410"></a>01410 {
<a name="l01411"></a>01411   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l01412"></a>01412 
<a name="l01413"></a>01413   super-&gt;receiver = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (addr, 4, byte_order);
<a name="l01414"></a>01414   super-&gt;class = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (addr + 4, 4, byte_order);
<a name="l01415"></a>01415 };
<a name="l01416"></a>01416 
<a name="l01417"></a>01417 <span class="keyword">static</span> <span class="keywordtype">void</span> 
<a name="l01418"></a>01418 read_objc_class (<span class="keyword">struct</span> gdbarch *gdbarch, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> addr,
<a name="l01419"></a>01419                  <span class="keyword">struct</span> objc_class *<span class="keyword">class</span>)
<a name="l01420"></a>01420 {
<a name="l01421"></a>01421   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l01422"></a>01422 
<a name="l01423"></a>01423   <span class="keyword">class</span>-&gt;isa = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (addr, 4, byte_order);
<a name="l01424"></a>01424   <span class="keyword">class</span>-&gt;super_class = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (addr + 4, 4, byte_order);
<a name="l01425"></a>01425   <span class="keyword">class</span>-&gt;name = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (addr + 8, 4, byte_order);
<a name="l01426"></a>01426   <span class="keyword">class</span>-&gt;version = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (addr + 12, 4, byte_order);
<a name="l01427"></a>01427   <span class="keyword">class</span>-&gt;info = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (addr + 16, 4, byte_order);
<a name="l01428"></a>01428   <span class="keyword">class</span>-&gt;instance_size = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (addr + 18, 4,
<a name="l01429"></a>01429                                                        byte_order);
<a name="l01430"></a>01430   <span class="keyword">class</span>-&gt;ivars = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (addr + 24, 4, byte_order);
<a name="l01431"></a>01431   <span class="keyword">class</span>-&gt;methods = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (addr + 28, 4, byte_order);
<a name="l01432"></a>01432   <span class="keyword">class</span>-&gt;cache = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (addr + 32, 4, byte_order);
<a name="l01433"></a>01433   <span class="keyword">class</span>-&gt;protocols = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (addr + 36, 4, byte_order);
<a name="l01434"></a>01434 }
<a name="l01435"></a>01435 
<a name="l01436"></a>01436 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l01437"></a>01437 find_implementation_from_class (<span class="keyword">struct</span> gdbarch *gdbarch,
<a name="l01438"></a>01438                                 <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <span class="keyword">class</span>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> sel)
<a name="l01439"></a>01439 {
<a name="l01440"></a>01440   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l01441"></a>01441   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> subclass = <span class="keyword">class</span>;
<a name="l01442"></a>01442 
<a name="l01443"></a>01443   <span class="keywordflow">while</span> (subclass != 0) 
<a name="l01444"></a>01444     {
<a name="l01445"></a>01445 
<a name="l01446"></a>01446       <span class="keyword">struct </span>objc_class class_str;
<a name="l01447"></a>01447       <span class="keywordtype">unsigned</span> mlistnum = 0;
<a name="l01448"></a>01448 
<a name="l01449"></a>01449       read_objc_class (gdbarch, subclass, &amp;class_str);
<a name="l01450"></a>01450 
<a name="l01451"></a>01451       <span class="keywordflow">for</span> (;;) 
<a name="l01452"></a>01452         {
<a name="l01453"></a>01453           <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> mlist;
<a name="l01454"></a>01454           <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> nmethods;
<a name="l01455"></a>01455           <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i;
<a name="l01456"></a>01456       
<a name="l01457"></a>01457           mlist = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (class_str.methods + 
<a name="l01458"></a>01458                                                 (4 * mlistnum),
<a name="l01459"></a>01459                                                 4, byte_order);
<a name="l01460"></a>01460           <span class="keywordflow">if</span> (mlist == 0) 
<a name="l01461"></a>01461             <span class="keywordflow">break</span>;
<a name="l01462"></a>01462 
<a name="l01463"></a>01463           nmethods = read_objc_methlist_nmethods (gdbarch, mlist);
<a name="l01464"></a>01464 
<a name="l01465"></a>01465           <span class="keywordflow">for</span> (i = 0; i &lt; nmethods; i++) 
<a name="l01466"></a>01466             {
<a name="l01467"></a>01467               <span class="keyword">struct </span>objc_method meth_str;
<a name="l01468"></a>01468 
<a name="l01469"></a>01469               read_objc_methlist_method (gdbarch, mlist, i, &amp;meth_str);
<a name="l01470"></a>01470 <span class="preprocessor">#if 0</span>
<a name="l01471"></a>01471 <span class="preprocessor"></span>              fprintf (stderr, 
<a name="l01472"></a>01472                        <span class="stringliteral">&quot;checking method 0x%lx against selector 0x%lx\n&quot;</span>, 
<a name="l01473"></a>01473                        meth_str.name, sel);
<a name="l01474"></a>01474 <span class="preprocessor">#endif</span>
<a name="l01475"></a>01475 <span class="preprocessor"></span>
<a name="l01476"></a>01476               <span class="keywordflow">if</span> (meth_str.name == sel) 
<a name="l01477"></a>01477                 <span class="comment">/* FIXME: hppa arch was doing a pointer dereference</span>
<a name="l01478"></a>01478 <span class="comment">                   here.  There needs to be a better way to do that.  */</span>
<a name="l01479"></a>01479                 <span class="keywordflow">return</span> meth_str.imp;
<a name="l01480"></a>01480             }
<a name="l01481"></a>01481           mlistnum++;
<a name="l01482"></a>01482         }
<a name="l01483"></a>01483       subclass = class_str.super_class;
<a name="l01484"></a>01484     }
<a name="l01485"></a>01485 
<a name="l01486"></a>01486   <span class="keywordflow">return</span> 0;
<a name="l01487"></a>01487 }
<a name="l01488"></a>01488 
<a name="l01489"></a>01489 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l01490"></a>01490 find_implementation (<span class="keyword">struct</span> gdbarch *gdbarch,
<a name="l01491"></a>01491                      <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <span class="keywordtype">object</span>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> sel)
<a name="l01492"></a>01492 {
<a name="l01493"></a>01493   <span class="keyword">struct </span>objc_object ostr;
<a name="l01494"></a>01494 
<a name="l01495"></a>01495   <span class="keywordflow">if</span> (<span class="keywordtype">object</span> == 0)
<a name="l01496"></a>01496     <span class="keywordflow">return</span> 0;
<a name="l01497"></a>01497   read_objc_object (gdbarch, <span class="keywordtype">object</span>, &amp;ostr);
<a name="l01498"></a>01498   <span class="keywordflow">if</span> (ostr.isa == 0)
<a name="l01499"></a>01499     <span class="keywordflow">return</span> 0;
<a name="l01500"></a>01500 
<a name="l01501"></a>01501   <span class="keywordflow">return</span> find_implementation_from_class (gdbarch, ostr.isa, sel);
<a name="l01502"></a>01502 }
<a name="l01503"></a>01503 
<a name="l01504"></a>01504 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01505"></a>01505 resolve_msgsend (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> *new_pc)
<a name="l01506"></a>01506 {
<a name="l01507"></a>01507   <span class="keyword">struct </span>frame_info *frame = <a class="code" href="frame_8c.html#a5ab254510728049878a232ed1b889820">get_current_frame</a> ();
<a name="l01508"></a>01508   <span class="keyword">struct </span>gdbarch *gdbarch = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (frame);
<a name="l01509"></a>01509   <span class="keyword">struct </span>type *ptr_type = <a class="code" href="gdbtypes_8c.html#addd01ebc9ccdf2cacb33ab01e281ddb8">builtin_type</a> (gdbarch)-&gt;<a class="code" href="structbuiltin__type.html#a3db2ea73bd0003f6e6103bd031ba7cb1">builtin_func_ptr</a>;
<a name="l01510"></a>01510 
<a name="l01511"></a>01511   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> object;
<a name="l01512"></a>01512   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> sel;
<a name="l01513"></a>01513   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> res;
<a name="l01514"></a>01514 
<a name="l01515"></a>01515   <span class="keywordtype">object</span> = <a class="code" href="gdbarch_8c.html#a0d41a3ff0251a289a53acb413d57dc80">gdbarch_fetch_pointer_argument</a> (gdbarch, frame, 0, ptr_type);
<a name="l01516"></a>01516   sel = <a class="code" href="gdbarch_8c.html#a0d41a3ff0251a289a53acb413d57dc80">gdbarch_fetch_pointer_argument</a> (gdbarch, frame, 1, ptr_type);
<a name="l01517"></a>01517 
<a name="l01518"></a>01518   res = find_implementation (gdbarch, <span class="keywordtype">object</span>, sel);
<a name="l01519"></a>01519   <span class="keywordflow">if</span> (new_pc != 0)
<a name="l01520"></a>01520     *new_pc = res;
<a name="l01521"></a>01521   <span class="keywordflow">if</span> (res == 0)
<a name="l01522"></a>01522     <span class="keywordflow">return</span> 1;
<a name="l01523"></a>01523   <span class="keywordflow">return</span> 0;
<a name="l01524"></a>01524 }
<a name="l01525"></a>01525 
<a name="l01526"></a>01526 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01527"></a>01527 resolve_msgsend_stret (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> *new_pc)
<a name="l01528"></a>01528 {
<a name="l01529"></a>01529   <span class="keyword">struct </span>frame_info *frame = <a class="code" href="frame_8c.html#a5ab254510728049878a232ed1b889820">get_current_frame</a> ();
<a name="l01530"></a>01530   <span class="keyword">struct </span>gdbarch *gdbarch = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (frame);
<a name="l01531"></a>01531   <span class="keyword">struct </span>type *ptr_type = <a class="code" href="gdbtypes_8c.html#addd01ebc9ccdf2cacb33ab01e281ddb8">builtin_type</a> (gdbarch)-&gt;<a class="code" href="structbuiltin__type.html#a3db2ea73bd0003f6e6103bd031ba7cb1">builtin_func_ptr</a>;
<a name="l01532"></a>01532 
<a name="l01533"></a>01533   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> object;
<a name="l01534"></a>01534   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> sel;
<a name="l01535"></a>01535   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> res;
<a name="l01536"></a>01536 
<a name="l01537"></a>01537   <span class="keywordtype">object</span> = <a class="code" href="gdbarch_8c.html#a0d41a3ff0251a289a53acb413d57dc80">gdbarch_fetch_pointer_argument</a> (gdbarch, frame, 1, ptr_type);
<a name="l01538"></a>01538   sel = <a class="code" href="gdbarch_8c.html#a0d41a3ff0251a289a53acb413d57dc80">gdbarch_fetch_pointer_argument</a> (gdbarch, frame, 2, ptr_type);
<a name="l01539"></a>01539 
<a name="l01540"></a>01540   res = find_implementation (gdbarch, <span class="keywordtype">object</span>, sel);
<a name="l01541"></a>01541   <span class="keywordflow">if</span> (new_pc != 0)
<a name="l01542"></a>01542     *new_pc = res;
<a name="l01543"></a>01543   <span class="keywordflow">if</span> (res == 0)
<a name="l01544"></a>01544     <span class="keywordflow">return</span> 1;
<a name="l01545"></a>01545   <span class="keywordflow">return</span> 0;
<a name="l01546"></a>01546 }
<a name="l01547"></a>01547 
<a name="l01548"></a>01548 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01549"></a>01549 resolve_msgsend_super (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> *new_pc)
<a name="l01550"></a>01550 {
<a name="l01551"></a>01551   <span class="keyword">struct </span>frame_info *frame = <a class="code" href="frame_8c.html#a5ab254510728049878a232ed1b889820">get_current_frame</a> ();
<a name="l01552"></a>01552   <span class="keyword">struct </span>gdbarch *gdbarch = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (frame);
<a name="l01553"></a>01553   <span class="keyword">struct </span>type *ptr_type = <a class="code" href="gdbtypes_8c.html#addd01ebc9ccdf2cacb33ab01e281ddb8">builtin_type</a> (gdbarch)-&gt;<a class="code" href="structbuiltin__type.html#a3db2ea73bd0003f6e6103bd031ba7cb1">builtin_func_ptr</a>;
<a name="l01554"></a>01554 
<a name="l01555"></a>01555   <span class="keyword">struct </span>objc_super sstr;
<a name="l01556"></a>01556 
<a name="l01557"></a>01557   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> super;
<a name="l01558"></a>01558   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> sel;
<a name="l01559"></a>01559   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> res;
<a name="l01560"></a>01560 
<a name="l01561"></a>01561   super = <a class="code" href="gdbarch_8c.html#a0d41a3ff0251a289a53acb413d57dc80">gdbarch_fetch_pointer_argument</a> (gdbarch, frame, 0, ptr_type);
<a name="l01562"></a>01562   sel = <a class="code" href="gdbarch_8c.html#a0d41a3ff0251a289a53acb413d57dc80">gdbarch_fetch_pointer_argument</a> (gdbarch, frame, 1, ptr_type);
<a name="l01563"></a>01563 
<a name="l01564"></a>01564   read_objc_super (gdbarch, super, &amp;sstr);
<a name="l01565"></a>01565   <span class="keywordflow">if</span> (sstr.class == 0)
<a name="l01566"></a>01566     <span class="keywordflow">return</span> 0;
<a name="l01567"></a>01567   
<a name="l01568"></a>01568   res = find_implementation_from_class (gdbarch, sstr.class, sel);
<a name="l01569"></a>01569   <span class="keywordflow">if</span> (new_pc != 0)
<a name="l01570"></a>01570     *new_pc = res;
<a name="l01571"></a>01571   <span class="keywordflow">if</span> (res == 0)
<a name="l01572"></a>01572     <span class="keywordflow">return</span> 1;
<a name="l01573"></a>01573   <span class="keywordflow">return</span> 0;
<a name="l01574"></a>01574 }
<a name="l01575"></a>01575 
<a name="l01576"></a>01576 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01577"></a>01577 resolve_msgsend_super_stret (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> *new_pc)
<a name="l01578"></a>01578 {
<a name="l01579"></a>01579   <span class="keyword">struct </span>frame_info *frame = <a class="code" href="frame_8c.html#a5ab254510728049878a232ed1b889820">get_current_frame</a> ();
<a name="l01580"></a>01580   <span class="keyword">struct </span>gdbarch *gdbarch = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (frame);
<a name="l01581"></a>01581   <span class="keyword">struct </span>type *ptr_type = <a class="code" href="gdbtypes_8c.html#addd01ebc9ccdf2cacb33ab01e281ddb8">builtin_type</a> (gdbarch)-&gt;<a class="code" href="structbuiltin__type.html#a3db2ea73bd0003f6e6103bd031ba7cb1">builtin_func_ptr</a>;
<a name="l01582"></a>01582 
<a name="l01583"></a>01583   <span class="keyword">struct </span>objc_super sstr;
<a name="l01584"></a>01584 
<a name="l01585"></a>01585   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> super;
<a name="l01586"></a>01586   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> sel;
<a name="l01587"></a>01587   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> res;
<a name="l01588"></a>01588 
<a name="l01589"></a>01589   super = <a class="code" href="gdbarch_8c.html#a0d41a3ff0251a289a53acb413d57dc80">gdbarch_fetch_pointer_argument</a> (gdbarch, frame, 1, ptr_type);
<a name="l01590"></a>01590   sel = <a class="code" href="gdbarch_8c.html#a0d41a3ff0251a289a53acb413d57dc80">gdbarch_fetch_pointer_argument</a> (gdbarch, frame, 2, ptr_type);
<a name="l01591"></a>01591 
<a name="l01592"></a>01592   read_objc_super (gdbarch, super, &amp;sstr);
<a name="l01593"></a>01593   <span class="keywordflow">if</span> (sstr.class == 0)
<a name="l01594"></a>01594     <span class="keywordflow">return</span> 0;
<a name="l01595"></a>01595   
<a name="l01596"></a>01596   res = find_implementation_from_class (gdbarch, sstr.class, sel);
<a name="l01597"></a>01597   <span class="keywordflow">if</span> (new_pc != 0)
<a name="l01598"></a>01598     *new_pc = res;
<a name="l01599"></a>01599   <span class="keywordflow">if</span> (res == 0)
<a name="l01600"></a>01600     <span class="keywordflow">return</span> 1;
<a name="l01601"></a>01601   <span class="keywordflow">return</span> 0;
<a name="l01602"></a>01602 }
<a name="l01603"></a>01603 
<a name="l01604"></a>01604 <span class="comment">/* Provide a prototype to silence -Wmissing-prototypes.  */</span>
<a name="l01605"></a>01605 <span class="keyword">extern</span> <a class="code" href="defs_8h.html#a686ed07d4fdcdc366f2bc677216ca08d">initialize_file_ftype</a> <a class="code" href="objc-lang_8c.html#a9992a52ffcf90676922096cb3a678a54">_initialize_objc_lang</a>;
<a name="l01606"></a>01606 
<a name="l01607"></a>01607 <span class="keywordtype">void</span>
<a name="l01608"></a><a class="code" href="objc-lang_8c.html#a007a77b0614c8dc0249fa3909a4687b9">01608</a> _initialize_objc_lang (<span class="keywordtype">void</span>)
<a name="l01609"></a>01609 {
<a name="l01610"></a>01610   objc_objfile_data = register_objfile_data ();
<a name="l01611"></a>01611 }
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 11 2013 14:12:21 for GDB (API) by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
