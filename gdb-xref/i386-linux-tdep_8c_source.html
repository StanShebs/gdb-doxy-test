<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>GDB (xrefs): /home/stan/gdb/src/gdb/i386-linux-tdep.c Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">GDB (xrefs)
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">/home/stan/gdb/src/gdb/i386-linux-tdep.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="i386-linux-tdep_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* Target-dependent code for GNU/Linux i386.</span>
<a name="l00002"></a>00002 <span class="comment"></span>
<a name="l00003"></a>00003 <span class="comment">   Copyright (C) 2000-2013 Free Software Foundation, Inc.</span>
<a name="l00004"></a>00004 <span class="comment"></span>
<a name="l00005"></a>00005 <span class="comment">   This file is part of GDB.</span>
<a name="l00006"></a>00006 <span class="comment"></span>
<a name="l00007"></a>00007 <span class="comment">   This program is free software; you can redistribute it and/or modify</span>
<a name="l00008"></a>00008 <span class="comment">   it under the terms of the GNU General Public License as published by</span>
<a name="l00009"></a>00009 <span class="comment">   the Free Software Foundation; either version 3 of the License, or</span>
<a name="l00010"></a>00010 <span class="comment">   (at your option) any later version.</span>
<a name="l00011"></a>00011 <span class="comment"></span>
<a name="l00012"></a>00012 <span class="comment">   This program is distributed in the hope that it will be useful,</span>
<a name="l00013"></a>00013 <span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00014"></a>00014 <span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00015"></a>00015 <span class="comment">   GNU General Public License for more details.</span>
<a name="l00016"></a>00016 <span class="comment"></span>
<a name="l00017"></a>00017 <span class="comment">   You should have received a copy of the GNU General Public License</span>
<a name="l00018"></a>00018 <span class="comment">   along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.  */</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#include &quot;<a class="code" href="defs_8h.html">defs.h</a>&quot;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &quot;<a class="code" href="gdbcore_8h.html">gdbcore.h</a>&quot;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;<a class="code" href="frame_8h.html">frame.h</a>&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;<a class="code" href="value_8h.html">value.h</a>&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="regcache_8h.html">regcache.h</a>&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="regset_8h.html">regset.h</a>&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="inferior_8h.html">inferior.h</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="osabi_8h.html">osabi.h</a>&quot;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="reggroups_8h.html">reggroups.h</a>&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="dwarf2-frame_8h.html">dwarf2-frame.h</a>&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="gdb__string_8h.html">gdb_string.h</a>&quot;</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="i386-tdep_8h.html">i386-tdep.h</a>&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;<a class="code" href="i386-linux-tdep_8h.html">i386-linux-tdep.h</a>&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="linux-tdep_8h.html">linux-tdep.h</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="glibc-tdep_8h.html">glibc-tdep.h</a>&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="solib-svr4_8h.html">solib-svr4.h</a>&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="symtab_8h.html">symtab.h</a>&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="arch-utils_8h.html">arch-utils.h</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="xml-syscall_8h.html">xml-syscall.h</a>&quot;</span>
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="i387-tdep_8h.html">i387-tdep.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="i386-xstate_8h.html">i386-xstate.h</a>&quot;</span>
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="comment">/* The syscall&#39;s XML filename for i386.  */</span>
<a name="l00045"></a><a class="code" href="i386-linux-tdep_8c.html#a65c2959a0957cc9a49f5277d50964b90">00045</a> <span class="preprocessor">#define XML_SYSCALL_FILENAME_I386 &quot;syscalls/i386-linux.xml&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="record-full_8h.html">record-full.h</a>&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;<a class="code" href="linux-record_8h.html">linux-record.h</a>&quot;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &lt;stdint.h&gt;</span>
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="preprocessor">#include &quot;<a class="code" href="i386-linux_8c.html">features/i386/i386-linux.c</a>&quot;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &quot;<a class="code" href="i386-mmx-linux_8c.html">features/i386/i386-mmx-linux.c</a>&quot;</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &quot;<a class="code" href="i386-avx-linux_8c.html">features/i386/i386-avx-linux.c</a>&quot;</span>
<a name="l00054"></a>00054 
<a name="l00055"></a>00055 <span class="comment">/* Supported register note sections.  */</span>
<a name="l00056"></a><a class="code" href="i386-linux-tdep_8c.html#a09017539deebeaceb573be3853af7729">00056</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structcore__regset__section.html">core_regset_section</a> <a class="code" href="i386-linux-tdep_8c.html#a09017539deebeaceb573be3853af7729">i386_linux_regset_sections</a>[] =
<a name="l00057"></a>00057 {
<a name="l00058"></a>00058   { <span class="stringliteral">&quot;.reg&quot;</span>, 68, <span class="stringliteral">&quot;general-purpose&quot;</span> },
<a name="l00059"></a>00059   { <span class="stringliteral">&quot;.reg2&quot;</span>, 108, <span class="stringliteral">&quot;floating-point&quot;</span> },
<a name="l00060"></a>00060   { NULL, 0 }
<a name="l00061"></a>00061 };
<a name="l00062"></a>00062 
<a name="l00063"></a><a class="code" href="i386-linux-tdep_8c.html#a807dcd54909f3d9f9780e63b18d33a11">00063</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structcore__regset__section.html">core_regset_section</a> <a class="code" href="i386-linux-tdep_8c.html#a807dcd54909f3d9f9780e63b18d33a11">i386_linux_sse_regset_sections</a>[] =
<a name="l00064"></a>00064 {
<a name="l00065"></a>00065   { <span class="stringliteral">&quot;.reg&quot;</span>, 68, <span class="stringliteral">&quot;general-purpose&quot;</span> },
<a name="l00066"></a>00066   { <span class="stringliteral">&quot;.reg-xfp&quot;</span>, 512, <span class="stringliteral">&quot;extended floating-point&quot;</span> },
<a name="l00067"></a>00067   { NULL, 0 }
<a name="l00068"></a>00068 };
<a name="l00069"></a>00069 
<a name="l00070"></a><a class="code" href="i386-linux-tdep_8c.html#a5a5061a08d1e8313e5321f560d8c5c8f">00070</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structcore__regset__section.html">core_regset_section</a> <a class="code" href="i386-linux-tdep_8c.html#a5a5061a08d1e8313e5321f560d8c5c8f">i386_linux_avx_regset_sections</a>[] =
<a name="l00071"></a>00071 {
<a name="l00072"></a>00072   { <span class="stringliteral">&quot;.reg&quot;</span>, 68, <span class="stringliteral">&quot;general-purpose&quot;</span> },
<a name="l00073"></a>00073   { <span class="stringliteral">&quot;.reg-xstate&quot;</span>, <a class="code" href="i386-xstate_8h.html#a6caa0ceffa1067626a49869008586b38">I386_XSTATE_MAX_SIZE</a>, <span class="stringliteral">&quot;XSAVE extended state&quot;</span> },
<a name="l00074"></a>00074   { NULL, 0 }
<a name="l00075"></a>00075 };
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 <span class="comment">/* Return non-zero, when the register is in the corresponding register</span>
<a name="l00078"></a>00078 <span class="comment">   group.  Put the LINUX_ORIG_EAX register in the system group.  */</span>
<a name="l00079"></a>00079 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00080"></a><a class="code" href="i386-linux-tdep_8c.html#a4cc3e306c1f7b42d2e1d427e1a0c1f88">00080</a> <a class="code" href="i386-linux-tdep_8c.html#a4cc3e306c1f7b42d2e1d427e1a0c1f88">i386_linux_register_reggroup_p</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>,
<a name="l00081"></a>00081                                 <span class="keyword">struct</span> <a class="code" href="structreggroup.html">reggroup</a> *group)
<a name="l00082"></a>00082 {
<a name="l00083"></a>00083   <span class="keywordflow">if</span> (regnum == <a class="code" href="i386-linux-tdep_8h.html#ad3b6edbbfbfc2709ea9193b9f7d09fde">I386_LINUX_ORIG_EAX_REGNUM</a>)
<a name="l00084"></a>00084     <span class="keywordflow">return</span> (group == <a class="code" href="reggroups_8c.html#a55cfcb5dfb32653c793fa6b402564068">system_reggroup</a>
<a name="l00085"></a>00085             || group == <a class="code" href="reggroups_8c.html#a9be54927c9d0393a70b8a3f0bc740de3">save_reggroup</a>
<a name="l00086"></a>00086             || group == <a class="code" href="reggroups_8c.html#a627d3b74a917560e7d81d93c472e915c">restore_reggroup</a>);
<a name="l00087"></a>00087   <span class="keywordflow">return</span> <a class="code" href="i386-tdep_8c.html#a49bdd374471dd392670edb929c71b788">i386_register_reggroup_p</a> (gdbarch, regnum, group);
<a name="l00088"></a>00088 }
<a name="l00089"></a>00089 
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 <span class="comment">/* Recognizing signal handler frames.  */</span>
<a name="l00092"></a>00092 
<a name="l00093"></a>00093 <span class="comment">/* GNU/Linux has two flavors of signals.  Normal signal handlers, and</span>
<a name="l00094"></a>00094 <span class="comment">   &quot;realtime&quot; (RT) signals.  The RT signals can provide additional</span>
<a name="l00095"></a>00095 <span class="comment">   information to the signal handler if the SA_SIGINFO flag is set</span>
<a name="l00096"></a>00096 <span class="comment">   when establishing a signal handler using `sigaction&#39;.  It is not</span>
<a name="l00097"></a>00097 <span class="comment">   unlikely that future versions of GNU/Linux will support SA_SIGINFO</span>
<a name="l00098"></a>00098 <span class="comment">   for normal signals too.  */</span>
<a name="l00099"></a>00099 
<a name="l00100"></a>00100 <span class="comment">/* When the i386 Linux kernel calls a signal handler and the</span>
<a name="l00101"></a>00101 <span class="comment">   SA_RESTORER flag isn&#39;t set, the return address points to a bit of</span>
<a name="l00102"></a>00102 <span class="comment">   code on the stack.  This function returns whether the PC appears to</span>
<a name="l00103"></a>00103 <span class="comment">   be within this bit of code.</span>
<a name="l00104"></a>00104 <span class="comment"></span>
<a name="l00105"></a>00105 <span class="comment">   The instruction sequence for normal signals is</span>
<a name="l00106"></a>00106 <span class="comment">       pop    %eax</span>
<a name="l00107"></a>00107 <span class="comment">       mov    $0x77, %eax</span>
<a name="l00108"></a>00108 <span class="comment">       int    $0x80</span>
<a name="l00109"></a>00109 <span class="comment">   or 0x58 0xb8 0x77 0x00 0x00 0x00 0xcd 0x80.</span>
<a name="l00110"></a>00110 <span class="comment"></span>
<a name="l00111"></a>00111 <span class="comment">   Checking for the code sequence should be somewhat reliable, because</span>
<a name="l00112"></a>00112 <span class="comment">   the effect is to call the system call sigreturn.  This is unlikely</span>
<a name="l00113"></a>00113 <span class="comment">   to occur anywhere other than in a signal trampoline.</span>
<a name="l00114"></a>00114 <span class="comment"></span>
<a name="l00115"></a>00115 <span class="comment">   It kind of sucks that we have to read memory from the process in</span>
<a name="l00116"></a>00116 <span class="comment">   order to identify a signal trampoline, but there doesn&#39;t seem to be</span>
<a name="l00117"></a>00117 <span class="comment">   any other way.  Therefore we only do the memory reads if no</span>
<a name="l00118"></a>00118 <span class="comment">   function name could be identified, which should be the case since</span>
<a name="l00119"></a>00119 <span class="comment">   the code is on the stack.</span>
<a name="l00120"></a>00120 <span class="comment"></span>
<a name="l00121"></a>00121 <span class="comment">   Detection of signal trampolines for handlers that set the</span>
<a name="l00122"></a>00122 <span class="comment">   SA_RESTORER flag is in general not possible.  Unfortunately this is</span>
<a name="l00123"></a>00123 <span class="comment">   what the GNU C Library has been doing for quite some time now.</span>
<a name="l00124"></a>00124 <span class="comment">   However, as of version 2.1.2, the GNU C Library uses signal</span>
<a name="l00125"></a>00125 <span class="comment">   trampolines (named __restore and __restore_rt) that are identical</span>
<a name="l00126"></a>00126 <span class="comment">   to the ones used by the kernel.  Therefore, these trampolines are</span>
<a name="l00127"></a>00127 <span class="comment">   supported too.  */</span>
<a name="l00128"></a>00128 
<a name="l00129"></a><a class="code" href="i386-linux-tdep_8c.html#a63676be10098904bece4331428fd3b6e">00129</a> <span class="preprocessor">#define LINUX_SIGTRAMP_INSN0    0x58    </span><span class="comment">/* pop %eax */</span>
<a name="l00130"></a><a class="code" href="i386-linux-tdep_8c.html#a9293040111b9a12289d14b9679ba2160">00130</a> <span class="preprocessor">#define LINUX_SIGTRAMP_OFFSET0  0</span>
<a name="l00131"></a><a class="code" href="i386-linux-tdep_8c.html#a09f952b303f7073dbb75a18157222b1f">00131</a> <span class="preprocessor"></span><span class="preprocessor">#define LINUX_SIGTRAMP_INSN1    0xb8    </span><span class="comment">/* mov $NNNN, %eax */</span>
<a name="l00132"></a><a class="code" href="i386-linux-tdep_8c.html#ae3ce75a44cbf332fb090095e450a732a">00132</a> <span class="preprocessor">#define LINUX_SIGTRAMP_OFFSET1  1</span>
<a name="l00133"></a><a class="code" href="i386-linux-tdep_8c.html#adef8934fa3d98d4d1df3243e198cced4">00133</a> <span class="preprocessor"></span><span class="preprocessor">#define LINUX_SIGTRAMP_INSN2    0xcd    </span><span class="comment">/* int */</span>
<a name="l00134"></a><a class="code" href="i386-linux-tdep_8c.html#afc1c027becb80032392d1703ef57e20a">00134</a> <span class="preprocessor">#define LINUX_SIGTRAMP_OFFSET2  6</span>
<a name="l00135"></a>00135 <span class="preprocessor"></span>
<a name="l00136"></a><a class="code" href="i386-linux-tdep_8c.html#a4ba1dc24bbade2c0da4ebc98fc876bb5">00136</a> <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> <a class="code" href="i386-linux-tdep_8c.html#a4ba1dc24bbade2c0da4ebc98fc876bb5">linux_sigtramp_code</a>[] =
<a name="l00137"></a>00137 {
<a name="l00138"></a>00138   <a class="code" href="i386-linux-tdep_8c.html#a63676be10098904bece4331428fd3b6e">LINUX_SIGTRAMP_INSN0</a>,                                 <span class="comment">/* pop %eax */</span>
<a name="l00139"></a>00139   <a class="code" href="i386-linux-tdep_8c.html#a09f952b303f7073dbb75a18157222b1f">LINUX_SIGTRAMP_INSN1</a>, 0x77, 0x00, 0x00, 0x00,         <span class="comment">/* mov $0x77, %eax */</span>
<a name="l00140"></a>00140   <a class="code" href="i386-linux-tdep_8c.html#adef8934fa3d98d4d1df3243e198cced4">LINUX_SIGTRAMP_INSN2</a>, 0x80                            <span class="comment">/* int $0x80 */</span>
<a name="l00141"></a>00141 };
<a name="l00142"></a>00142 
<a name="l00143"></a><a class="code" href="i386-linux-tdep_8c.html#a0bee2b77e720e93dbcb5ea6d6d2ed367">00143</a> <span class="preprocessor">#define LINUX_SIGTRAMP_LEN (sizeof linux_sigtramp_code)</span>
<a name="l00144"></a>00144 <span class="preprocessor"></span>
<a name="l00145"></a>00145 <span class="comment">/* If THIS_FRAME is a sigtramp routine, return the address of the</span>
<a name="l00146"></a>00146 <span class="comment">   start of the routine.  Otherwise, return 0.  */</span>
<a name="l00147"></a>00147 
<a name="l00148"></a>00148 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l00149"></a><a class="code" href="i386-linux-tdep_8c.html#a6759917ae1875ef5f03eaa6a37cd49e5">00149</a> <a class="code" href="i386-linux-tdep_8c.html#a6759917ae1875ef5f03eaa6a37cd49e5">i386_linux_sigtramp_start</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame)
<a name="l00150"></a>00150 {
<a name="l00151"></a>00151   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc = <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (this_frame);
<a name="l00152"></a>00152   <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> buf[<a class="code" href="i386-linux-tdep_8c.html#a0bee2b77e720e93dbcb5ea6d6d2ed367">LINUX_SIGTRAMP_LEN</a>];
<a name="l00153"></a>00153 
<a name="l00154"></a>00154   <span class="comment">/* We only recognize a signal trampoline if PC is at the start of</span>
<a name="l00155"></a>00155 <span class="comment">     one of the three instructions.  We optimize for finding the PC at</span>
<a name="l00156"></a>00156 <span class="comment">     the start, as will be the case when the trampoline is not the</span>
<a name="l00157"></a>00157 <span class="comment">     first frame on the stack.  We assume that in the case where the</span>
<a name="l00158"></a>00158 <span class="comment">     PC is not at the start of the instruction sequence, there will be</span>
<a name="l00159"></a>00159 <span class="comment">     a few trailing readable bytes on the stack.  */</span>
<a name="l00160"></a>00160 
<a name="l00161"></a>00161   <span class="keywordflow">if</span> (!<a class="code" href="frame_8c.html#a33ee9566c5c93f145279382fc6bf5fc3">safe_frame_unwind_memory</a> (this_frame, pc, buf, <a class="code" href="i386-linux-tdep_8c.html#a0bee2b77e720e93dbcb5ea6d6d2ed367">LINUX_SIGTRAMP_LEN</a>))
<a name="l00162"></a>00162     <span class="keywordflow">return</span> 0;
<a name="l00163"></a>00163 
<a name="l00164"></a>00164   <span class="keywordflow">if</span> (buf[0] != <a class="code" href="i386-linux-tdep_8c.html#a63676be10098904bece4331428fd3b6e">LINUX_SIGTRAMP_INSN0</a>)
<a name="l00165"></a>00165     {
<a name="l00166"></a>00166       <span class="keywordtype">int</span> adjust;
<a name="l00167"></a>00167 
<a name="l00168"></a>00168       <span class="keywordflow">switch</span> (buf[0])
<a name="l00169"></a>00169         {
<a name="l00170"></a>00170         <span class="keywordflow">case</span> <a class="code" href="i386-linux-tdep_8c.html#a09f952b303f7073dbb75a18157222b1f">LINUX_SIGTRAMP_INSN1</a>:
<a name="l00171"></a>00171           adjust = <a class="code" href="i386-linux-tdep_8c.html#ae3ce75a44cbf332fb090095e450a732a">LINUX_SIGTRAMP_OFFSET1</a>;
<a name="l00172"></a>00172           <span class="keywordflow">break</span>;
<a name="l00173"></a>00173         <span class="keywordflow">case</span> <a class="code" href="i386-linux-tdep_8c.html#adef8934fa3d98d4d1df3243e198cced4">LINUX_SIGTRAMP_INSN2</a>:
<a name="l00174"></a>00174           adjust = <a class="code" href="i386-linux-tdep_8c.html#afc1c027becb80032392d1703ef57e20a">LINUX_SIGTRAMP_OFFSET2</a>;
<a name="l00175"></a>00175           <span class="keywordflow">break</span>;
<a name="l00176"></a>00176         <span class="keywordflow">default</span>:
<a name="l00177"></a>00177           <span class="keywordflow">return</span> 0;
<a name="l00178"></a>00178         }
<a name="l00179"></a>00179 
<a name="l00180"></a>00180       pc -= adjust;
<a name="l00181"></a>00181 
<a name="l00182"></a>00182       <span class="keywordflow">if</span> (!<a class="code" href="frame_8c.html#a33ee9566c5c93f145279382fc6bf5fc3">safe_frame_unwind_memory</a> (this_frame, pc, buf, <a class="code" href="i386-linux-tdep_8c.html#a0bee2b77e720e93dbcb5ea6d6d2ed367">LINUX_SIGTRAMP_LEN</a>))
<a name="l00183"></a>00183         <span class="keywordflow">return</span> 0;
<a name="l00184"></a>00184     }
<a name="l00185"></a>00185 
<a name="l00186"></a>00186   <span class="keywordflow">if</span> (<a class="code" href="gdb__string_8h.html#a65c3e6b23d6855c86acaf147853c82cc">memcmp</a> (buf, <a class="code" href="i386-linux-tdep_8c.html#a4ba1dc24bbade2c0da4ebc98fc876bb5">linux_sigtramp_code</a>, <a class="code" href="i386-linux-tdep_8c.html#a0bee2b77e720e93dbcb5ea6d6d2ed367">LINUX_SIGTRAMP_LEN</a>) != 0)
<a name="l00187"></a>00187     <span class="keywordflow">return</span> 0;
<a name="l00188"></a>00188 
<a name="l00189"></a>00189   <span class="keywordflow">return</span> pc;
<a name="l00190"></a>00190 }
<a name="l00191"></a>00191 
<a name="l00192"></a>00192 <span class="comment">/* This function does the same for RT signals.  Here the instruction</span>
<a name="l00193"></a>00193 <span class="comment">   sequence is</span>
<a name="l00194"></a>00194 <span class="comment">       mov    $0xad, %eax</span>
<a name="l00195"></a>00195 <span class="comment">       int    $0x80</span>
<a name="l00196"></a>00196 <span class="comment">   or 0xb8 0xad 0x00 0x00 0x00 0xcd 0x80.</span>
<a name="l00197"></a>00197 <span class="comment"></span>
<a name="l00198"></a>00198 <span class="comment">   The effect is to call the system call rt_sigreturn.  */</span>
<a name="l00199"></a>00199 
<a name="l00200"></a><a class="code" href="i386-linux-tdep_8c.html#ab07967c65ac2897de7a1aa2502a93dd7">00200</a> <span class="preprocessor">#define LINUX_RT_SIGTRAMP_INSN0         0xb8 </span><span class="comment">/* mov $NNNN, %eax */</span>
<a name="l00201"></a><a class="code" href="i386-linux-tdep_8c.html#a54771ca42b33721d70bf642f3ed419d4">00201</a> <span class="preprocessor">#define LINUX_RT_SIGTRAMP_OFFSET0       0</span>
<a name="l00202"></a><a class="code" href="i386-linux-tdep_8c.html#ab52f92921902fdb0b6cab4dc30d8dcdf">00202</a> <span class="preprocessor"></span><span class="preprocessor">#define LINUX_RT_SIGTRAMP_INSN1         0xcd </span><span class="comment">/* int */</span>
<a name="l00203"></a><a class="code" href="i386-linux-tdep_8c.html#aa601b42eea294b6ffc3e7f87bd7ae87f">00203</a> <span class="preprocessor">#define LINUX_RT_SIGTRAMP_OFFSET1       5</span>
<a name="l00204"></a>00204 <span class="preprocessor"></span>
<a name="l00205"></a><a class="code" href="i386-linux-tdep_8c.html#a56a9a455a8c3c095fad8784289396ee1">00205</a> <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> <a class="code" href="i386-linux-tdep_8c.html#a56a9a455a8c3c095fad8784289396ee1">linux_rt_sigtramp_code</a>[] =
<a name="l00206"></a>00206 {
<a name="l00207"></a>00207   <a class="code" href="i386-linux-tdep_8c.html#ab07967c65ac2897de7a1aa2502a93dd7">LINUX_RT_SIGTRAMP_INSN0</a>, 0xad, 0x00, 0x00, 0x00,      <span class="comment">/* mov $0xad, %eax */</span>
<a name="l00208"></a>00208   <a class="code" href="i386-linux-tdep_8c.html#ab52f92921902fdb0b6cab4dc30d8dcdf">LINUX_RT_SIGTRAMP_INSN1</a>, 0x80                         <span class="comment">/* int $0x80 */</span>
<a name="l00209"></a>00209 };
<a name="l00210"></a>00210 
<a name="l00211"></a><a class="code" href="i386-linux-tdep_8c.html#ab5630850433573c7727b849d699ef946">00211</a> <span class="preprocessor">#define LINUX_RT_SIGTRAMP_LEN (sizeof linux_rt_sigtramp_code)</span>
<a name="l00212"></a>00212 <span class="preprocessor"></span>
<a name="l00213"></a>00213 <span class="comment">/* If THIS_FRAME is an RT sigtramp routine, return the address of the</span>
<a name="l00214"></a>00214 <span class="comment">   start of the routine.  Otherwise, return 0.  */</span>
<a name="l00215"></a>00215 
<a name="l00216"></a>00216 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l00217"></a><a class="code" href="i386-linux-tdep_8c.html#ae81182df0ee6ae14416024b487244cdc">00217</a> <a class="code" href="i386-linux-tdep_8c.html#ae81182df0ee6ae14416024b487244cdc">i386_linux_rt_sigtramp_start</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame)
<a name="l00218"></a>00218 {
<a name="l00219"></a>00219   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc = <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (this_frame);
<a name="l00220"></a>00220   <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> buf[<a class="code" href="i386-linux-tdep_8c.html#ab5630850433573c7727b849d699ef946">LINUX_RT_SIGTRAMP_LEN</a>];
<a name="l00221"></a>00221 
<a name="l00222"></a>00222   <span class="comment">/* We only recognize a signal trampoline if PC is at the start of</span>
<a name="l00223"></a>00223 <span class="comment">     one of the two instructions.  We optimize for finding the PC at</span>
<a name="l00224"></a>00224 <span class="comment">     the start, as will be the case when the trampoline is not the</span>
<a name="l00225"></a>00225 <span class="comment">     first frame on the stack.  We assume that in the case where the</span>
<a name="l00226"></a>00226 <span class="comment">     PC is not at the start of the instruction sequence, there will be</span>
<a name="l00227"></a>00227 <span class="comment">     a few trailing readable bytes on the stack.  */</span>
<a name="l00228"></a>00228 
<a name="l00229"></a>00229   <span class="keywordflow">if</span> (!<a class="code" href="frame_8c.html#a33ee9566c5c93f145279382fc6bf5fc3">safe_frame_unwind_memory</a> (this_frame, pc, buf, <a class="code" href="i386-linux-tdep_8c.html#ab5630850433573c7727b849d699ef946">LINUX_RT_SIGTRAMP_LEN</a>))
<a name="l00230"></a>00230     <span class="keywordflow">return</span> 0;
<a name="l00231"></a>00231 
<a name="l00232"></a>00232   <span class="keywordflow">if</span> (buf[0] != <a class="code" href="i386-linux-tdep_8c.html#ab07967c65ac2897de7a1aa2502a93dd7">LINUX_RT_SIGTRAMP_INSN0</a>)
<a name="l00233"></a>00233     {
<a name="l00234"></a>00234       <span class="keywordflow">if</span> (buf[0] != <a class="code" href="i386-linux-tdep_8c.html#ab52f92921902fdb0b6cab4dc30d8dcdf">LINUX_RT_SIGTRAMP_INSN1</a>)
<a name="l00235"></a>00235         <span class="keywordflow">return</span> 0;
<a name="l00236"></a>00236 
<a name="l00237"></a>00237       pc -= <a class="code" href="i386-linux-tdep_8c.html#aa601b42eea294b6ffc3e7f87bd7ae87f">LINUX_RT_SIGTRAMP_OFFSET1</a>;
<a name="l00238"></a>00238 
<a name="l00239"></a>00239       <span class="keywordflow">if</span> (!<a class="code" href="frame_8c.html#a33ee9566c5c93f145279382fc6bf5fc3">safe_frame_unwind_memory</a> (this_frame, pc, buf,
<a name="l00240"></a>00240                                      <a class="code" href="i386-linux-tdep_8c.html#ab5630850433573c7727b849d699ef946">LINUX_RT_SIGTRAMP_LEN</a>))
<a name="l00241"></a>00241         <span class="keywordflow">return</span> 0;
<a name="l00242"></a>00242     }
<a name="l00243"></a>00243 
<a name="l00244"></a>00244   <span class="keywordflow">if</span> (<a class="code" href="gdb__string_8h.html#a65c3e6b23d6855c86acaf147853c82cc">memcmp</a> (buf, <a class="code" href="i386-linux-tdep_8c.html#a56a9a455a8c3c095fad8784289396ee1">linux_rt_sigtramp_code</a>, <a class="code" href="i386-linux-tdep_8c.html#ab5630850433573c7727b849d699ef946">LINUX_RT_SIGTRAMP_LEN</a>) != 0)
<a name="l00245"></a>00245     <span class="keywordflow">return</span> 0;
<a name="l00246"></a>00246 
<a name="l00247"></a>00247   <span class="keywordflow">return</span> pc;
<a name="l00248"></a>00248 }
<a name="l00249"></a>00249 
<a name="l00250"></a>00250 <span class="comment">/* Return whether THIS_FRAME corresponds to a GNU/Linux sigtramp</span>
<a name="l00251"></a>00251 <span class="comment">   routine.  */</span>
<a name="l00252"></a>00252 
<a name="l00253"></a>00253 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00254"></a><a class="code" href="i386-linux-tdep_8c.html#a396e14e4adbd598c8ce41ca9fd78f9b0">00254</a> <a class="code" href="i386-linux-tdep_8c.html#a396e14e4adbd598c8ce41ca9fd78f9b0">i386_linux_sigtramp_p</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame)
<a name="l00255"></a>00255 {
<a name="l00256"></a>00256   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc = <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (this_frame);
<a name="l00257"></a>00257   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="aarch64-tdep_8c.html#acc128f98d9ceca227038c771308eff39">name</a>;
<a name="l00258"></a>00258 
<a name="l00259"></a>00259   <a class="code" href="blockframe_8c.html#a2dae2257ad1417604d2c26f8b9071ca9">find_pc_partial_function</a> (pc, &amp;name, NULL, NULL);
<a name="l00260"></a>00260 
<a name="l00261"></a>00261   <span class="comment">/* If we have NAME, we can optimize the search.  The trampolines are</span>
<a name="l00262"></a>00262 <span class="comment">     named __restore and __restore_rt.  However, they aren&#39;t dynamically</span>
<a name="l00263"></a>00263 <span class="comment">     exported from the shared C library, so the trampoline may appear to</span>
<a name="l00264"></a>00264 <span class="comment">     be part of the preceding function.  This should always be sigaction,</span>
<a name="l00265"></a>00265 <span class="comment">     __sigaction, or __libc_sigaction (all aliases to the same function).  */</span>
<a name="l00266"></a>00266   <span class="keywordflow">if</span> (name == NULL || <a class="code" href="gdb__string_8h.html#a55c8e1e0e5f3578988a2feb0d417ad1c">strstr</a> (name, <span class="stringliteral">&quot;sigaction&quot;</span>) != NULL)
<a name="l00267"></a>00267     <span class="keywordflow">return</span> (<a class="code" href="i386-linux-tdep_8c.html#a6759917ae1875ef5f03eaa6a37cd49e5">i386_linux_sigtramp_start</a> (this_frame) != 0
<a name="l00268"></a>00268             || <a class="code" href="i386-linux-tdep_8c.html#ae81182df0ee6ae14416024b487244cdc">i386_linux_rt_sigtramp_start</a> (this_frame) != 0);
<a name="l00269"></a>00269 
<a name="l00270"></a>00270   <span class="keywordflow">return</span> (strcmp (<span class="stringliteral">&quot;__restore&quot;</span>, name) == 0
<a name="l00271"></a>00271           || strcmp (<span class="stringliteral">&quot;__restore_rt&quot;</span>, name) == 0);
<a name="l00272"></a>00272 }
<a name="l00273"></a>00273 
<a name="l00274"></a>00274 <span class="comment">/* Return one if the PC of THIS_FRAME is in a signal trampoline which</span>
<a name="l00275"></a>00275 <span class="comment">   may have DWARF-2 CFI.  */</span>
<a name="l00276"></a>00276 
<a name="l00277"></a>00277 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00278"></a><a class="code" href="i386-linux-tdep_8c.html#a1b01e115b8b601a68ff775d950c79a3b">00278</a> <a class="code" href="i386-linux-tdep_8c.html#a1b01e115b8b601a68ff775d950c79a3b">i386_linux_dwarf_signal_frame_p</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>,
<a name="l00279"></a>00279                                  <span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame)
<a name="l00280"></a>00280 {
<a name="l00281"></a>00281   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc = <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (this_frame);
<a name="l00282"></a>00282   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="aarch64-tdep_8c.html#acc128f98d9ceca227038c771308eff39">name</a>;
<a name="l00283"></a>00283 
<a name="l00284"></a>00284   <a class="code" href="blockframe_8c.html#a2dae2257ad1417604d2c26f8b9071ca9">find_pc_partial_function</a> (pc, &amp;name, NULL, NULL);
<a name="l00285"></a>00285 
<a name="l00286"></a>00286   <span class="comment">/* If a vsyscall DSO is in use, the signal trampolines may have these</span>
<a name="l00287"></a>00287 <span class="comment">     names.  */</span>
<a name="l00288"></a>00288   <span class="keywordflow">if</span> (name &amp;&amp; (strcmp (name, <span class="stringliteral">&quot;__kernel_sigreturn&quot;</span>) == 0
<a name="l00289"></a>00289                || strcmp (name, <span class="stringliteral">&quot;__kernel_rt_sigreturn&quot;</span>) == 0))
<a name="l00290"></a>00290     <span class="keywordflow">return</span> 1;
<a name="l00291"></a>00291 
<a name="l00292"></a>00292   <span class="keywordflow">return</span> 0;
<a name="l00293"></a>00293 }
<a name="l00294"></a>00294 
<a name="l00295"></a>00295 <span class="comment">/* Offset to struct sigcontext in ucontext, from &lt;asm/ucontext.h&gt;.  */</span>
<a name="l00296"></a><a class="code" href="i386-linux-tdep_8c.html#a243fd58cd0e406b02c154c2002c021bb">00296</a> <span class="preprocessor">#define I386_LINUX_UCONTEXT_SIGCONTEXT_OFFSET 20</span>
<a name="l00297"></a>00297 <span class="preprocessor"></span>
<a name="l00298"></a>00298 <span class="comment">/* Assuming THIS_FRAME is a GNU/Linux sigtramp routine, return the</span>
<a name="l00299"></a>00299 <span class="comment">   address of the associated sigcontext structure.  */</span>
<a name="l00300"></a>00300 
<a name="l00301"></a>00301 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l00302"></a><a class="code" href="i386-linux-tdep_8c.html#a56b77b1d690b7b317d6374a2cfd8dd16">00302</a> <a class="code" href="i386-linux-tdep_8c.html#a56b77b1d690b7b317d6374a2cfd8dd16">i386_linux_sigcontext_addr</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame)
<a name="l00303"></a>00303 {
<a name="l00304"></a>00304   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (this_frame);
<a name="l00305"></a>00305   <span class="keyword">enum</span> bfd_endian <a class="code" href="structgdbarch.html#a7a9dd6544406e9cbb574dae9d531346e">byte_order</a> = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l00306"></a>00306   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc;
<a name="l00307"></a>00307   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="windows-nat_8c.html#a8d40798874dab99986478ef00ff3e297">sp</a>;
<a name="l00308"></a>00308   <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> buf[4];
<a name="l00309"></a>00309 
<a name="l00310"></a>00310   <a class="code" href="frame_8c.html#ae0e45fe018a867aabc8d9a217575c42f">get_frame_register</a> (this_frame, <a class="code" href="i386-tdep_8h.html#a57b19420cd51154eec6330210174cb1eac2436f1b8c2ea79f6cdc62ac8653bc3d">I386_ESP_REGNUM</a>, buf);
<a name="l00311"></a>00311   sp = <a class="code" href="defs_8h.html#a99aec65329508b4d449a4f881026f844">extract_unsigned_integer</a> (buf, 4, byte_order);
<a name="l00312"></a>00312 
<a name="l00313"></a>00313   pc = <a class="code" href="i386-linux-tdep_8c.html#a6759917ae1875ef5f03eaa6a37cd49e5">i386_linux_sigtramp_start</a> (this_frame);
<a name="l00314"></a>00314   <span class="keywordflow">if</span> (pc)
<a name="l00315"></a>00315     {
<a name="l00316"></a>00316       <span class="comment">/* The sigcontext structure lives on the stack, right after</span>
<a name="l00317"></a>00317 <span class="comment">         the signum argument.  We determine the address of the</span>
<a name="l00318"></a>00318 <span class="comment">         sigcontext structure by looking at the frame&#39;s stack</span>
<a name="l00319"></a>00319 <span class="comment">         pointer.  Keep in mind that the first instruction of the</span>
<a name="l00320"></a>00320 <span class="comment">         sigtramp code is &quot;pop %eax&quot;.  If the PC is after this</span>
<a name="l00321"></a>00321 <span class="comment">         instruction, adjust the returned value accordingly.  */</span>
<a name="l00322"></a>00322       <span class="keywordflow">if</span> (pc == <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (this_frame))
<a name="l00323"></a>00323         <span class="keywordflow">return</span> sp + 4;
<a name="l00324"></a>00324       <span class="keywordflow">return</span> sp;
<a name="l00325"></a>00325     }
<a name="l00326"></a>00326 
<a name="l00327"></a>00327   pc = <a class="code" href="i386-linux-tdep_8c.html#ae81182df0ee6ae14416024b487244cdc">i386_linux_rt_sigtramp_start</a> (this_frame);
<a name="l00328"></a>00328   <span class="keywordflow">if</span> (pc)
<a name="l00329"></a>00329     {
<a name="l00330"></a>00330       <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> ucontext_addr;
<a name="l00331"></a>00331 
<a name="l00332"></a>00332       <span class="comment">/* The sigcontext structure is part of the user context.  A</span>
<a name="l00333"></a>00333 <span class="comment">         pointer to the user context is passed as the third argument</span>
<a name="l00334"></a>00334 <span class="comment">         to the signal handler.  */</span>
<a name="l00335"></a>00335       <a class="code" href="corefile_8c.html#a5e0189c6f21f1c9321b379877183b819">read_memory</a> (sp + 8, buf, 4);
<a name="l00336"></a>00336       ucontext_addr = <a class="code" href="defs_8h.html#a99aec65329508b4d449a4f881026f844">extract_unsigned_integer</a> (buf, 4, byte_order);
<a name="l00337"></a>00337       <span class="keywordflow">return</span> ucontext_addr + <a class="code" href="i386-linux-tdep_8c.html#a243fd58cd0e406b02c154c2002c021bb">I386_LINUX_UCONTEXT_SIGCONTEXT_OFFSET</a>;
<a name="l00338"></a>00338     }
<a name="l00339"></a>00339 
<a name="l00340"></a>00340   <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Couldn&#39;t recognize signal trampoline.&quot;</span>));
<a name="l00341"></a>00341   <span class="keywordflow">return</span> 0;
<a name="l00342"></a>00342 }
<a name="l00343"></a>00343 
<a name="l00344"></a>00344 <span class="comment">/* Set the program counter for process PTID to PC.  */</span>
<a name="l00345"></a>00345 
<a name="l00346"></a>00346 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00347"></a><a class="code" href="i386-linux-tdep_8c.html#ae2abc0c141a41c2ce935b5f8a3bfebce">00347</a> <a class="code" href="i386-linux-tdep_8c.html#ae2abc0c141a41c2ce935b5f8a3bfebce">i386_linux_write_pc</a> (<span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc)
<a name="l00348"></a>00348 {
<a name="l00349"></a>00349   <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regcache, <a class="code" href="i386-tdep_8h.html#a57b19420cd51154eec6330210174cb1ea6cc8e97d610b2e4a8793a2d4503c56ab">I386_EIP_REGNUM</a>, pc);
<a name="l00350"></a>00350 
<a name="l00351"></a>00351   <span class="comment">/* We must be careful with modifying the program counter.  If we</span>
<a name="l00352"></a>00352 <span class="comment">     just interrupted a system call, the kernel might try to restart</span>
<a name="l00353"></a>00353 <span class="comment">     it when we resume the inferior.  On restarting the system call,</span>
<a name="l00354"></a>00354 <span class="comment">     the kernel will try backing up the program counter even though it</span>
<a name="l00355"></a>00355 <span class="comment">     no longer points at the system call.  This typically results in a</span>
<a name="l00356"></a>00356 <span class="comment">     SIGSEGV or SIGILL.  We can prevent this by writing `-1&#39; in the</span>
<a name="l00357"></a>00357 <span class="comment">     &quot;orig_eax&quot; pseudo-register.</span>
<a name="l00358"></a>00358 <span class="comment"></span>
<a name="l00359"></a>00359 <span class="comment">     Note that &quot;orig_eax&quot; is saved when setting up a dummy call frame.</span>
<a name="l00360"></a>00360 <span class="comment">     This means that it is properly restored when that frame is</span>
<a name="l00361"></a>00361 <span class="comment">     popped, and that the interrupted system call will be restarted</span>
<a name="l00362"></a>00362 <span class="comment">     when we resume the inferior on return from a function call from</span>
<a name="l00363"></a>00363 <span class="comment">     within GDB.  In all other cases the system call will not be</span>
<a name="l00364"></a>00364 <span class="comment">     restarted.  */</span>
<a name="l00365"></a>00365   <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regcache, <a class="code" href="i386-linux-tdep_8h.html#ad3b6edbbfbfc2709ea9193b9f7d09fde">I386_LINUX_ORIG_EAX_REGNUM</a>, -1);
<a name="l00366"></a>00366 }
<a name="l00367"></a>00367 
<a name="l00368"></a>00368 <span class="comment">/* Record all registers but IP register for process-record.  */</span>
<a name="l00369"></a>00369 
<a name="l00370"></a>00370 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00371"></a><a class="code" href="i386-linux-tdep_8c.html#a9d649cf7d352ff51c561a66a9f9e8805">00371</a> <a class="code" href="i386-linux-tdep_8c.html#a9d649cf7d352ff51c561a66a9f9e8805">i386_all_but_ip_registers_record</a> (<span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>)
<a name="l00372"></a>00372 {
<a name="l00373"></a>00373   <span class="keywordflow">if</span> (<a class="code" href="record-full_8c.html#a5fcf7b1f39983052860866c9eb6976ba">record_full_arch_list_add_reg</a> (regcache, <a class="code" href="i386-tdep_8h.html#a57b19420cd51154eec6330210174cb1ea8bc942b0638eaec9ec2c5b761d765f55">I386_EAX_REGNUM</a>))
<a name="l00374"></a>00374     <span class="keywordflow">return</span> -1;
<a name="l00375"></a>00375   <span class="keywordflow">if</span> (<a class="code" href="record-full_8c.html#a5fcf7b1f39983052860866c9eb6976ba">record_full_arch_list_add_reg</a> (regcache, <a class="code" href="i386-tdep_8h.html#a57b19420cd51154eec6330210174cb1ea6852654c84caf8c36f89fcdb0fc48694">I386_ECX_REGNUM</a>))
<a name="l00376"></a>00376     <span class="keywordflow">return</span> -1;
<a name="l00377"></a>00377   <span class="keywordflow">if</span> (<a class="code" href="record-full_8c.html#a5fcf7b1f39983052860866c9eb6976ba">record_full_arch_list_add_reg</a> (regcache, <a class="code" href="i386-tdep_8h.html#a57b19420cd51154eec6330210174cb1ea9cefa6020f8b9b0c1210b595fff88859">I386_EDX_REGNUM</a>))
<a name="l00378"></a>00378     <span class="keywordflow">return</span> -1;
<a name="l00379"></a>00379   <span class="keywordflow">if</span> (<a class="code" href="record-full_8c.html#a5fcf7b1f39983052860866c9eb6976ba">record_full_arch_list_add_reg</a> (regcache, <a class="code" href="i386-tdep_8h.html#a57b19420cd51154eec6330210174cb1eac5d9c458a2a11908d4381bba705e9300">I386_EBX_REGNUM</a>))
<a name="l00380"></a>00380     <span class="keywordflow">return</span> -1;
<a name="l00381"></a>00381   <span class="keywordflow">if</span> (<a class="code" href="record-full_8c.html#a5fcf7b1f39983052860866c9eb6976ba">record_full_arch_list_add_reg</a> (regcache, <a class="code" href="i386-tdep_8h.html#a57b19420cd51154eec6330210174cb1eac2436f1b8c2ea79f6cdc62ac8653bc3d">I386_ESP_REGNUM</a>))
<a name="l00382"></a>00382     <span class="keywordflow">return</span> -1;
<a name="l00383"></a>00383   <span class="keywordflow">if</span> (<a class="code" href="record-full_8c.html#a5fcf7b1f39983052860866c9eb6976ba">record_full_arch_list_add_reg</a> (regcache, <a class="code" href="i386-tdep_8h.html#a57b19420cd51154eec6330210174cb1ea6cd24db43669a3799d53839de474389f">I386_EBP_REGNUM</a>))
<a name="l00384"></a>00384     <span class="keywordflow">return</span> -1;
<a name="l00385"></a>00385   <span class="keywordflow">if</span> (<a class="code" href="record-full_8c.html#a5fcf7b1f39983052860866c9eb6976ba">record_full_arch_list_add_reg</a> (regcache, <a class="code" href="i386-tdep_8h.html#a57b19420cd51154eec6330210174cb1ea39b03a13a7a07980703d3433a98047fa">I386_ESI_REGNUM</a>))
<a name="l00386"></a>00386     <span class="keywordflow">return</span> -1;
<a name="l00387"></a>00387   <span class="keywordflow">if</span> (<a class="code" href="record-full_8c.html#a5fcf7b1f39983052860866c9eb6976ba">record_full_arch_list_add_reg</a> (regcache, <a class="code" href="i386-tdep_8h.html#a57b19420cd51154eec6330210174cb1eae4edcc2201b2cb42accf6bdd67ccfb87">I386_EDI_REGNUM</a>))
<a name="l00388"></a>00388     <span class="keywordflow">return</span> -1;
<a name="l00389"></a>00389   <span class="keywordflow">if</span> (<a class="code" href="record-full_8c.html#a5fcf7b1f39983052860866c9eb6976ba">record_full_arch_list_add_reg</a> (regcache, <a class="code" href="i386-tdep_8h.html#a57b19420cd51154eec6330210174cb1ea35212f0d8e88042b06ba0b8e75e2a50c">I386_EFLAGS_REGNUM</a>))
<a name="l00390"></a>00390     <span class="keywordflow">return</span> -1;
<a name="l00391"></a>00391 
<a name="l00392"></a>00392   <span class="keywordflow">return</span> 0;
<a name="l00393"></a>00393 }
<a name="l00394"></a>00394 
<a name="l00395"></a>00395 <span class="comment">/* i386_canonicalize_syscall maps from the native i386 Linux set</span>
<a name="l00396"></a>00396 <span class="comment">   of syscall ids into a canonical set of syscall ids used by</span>
<a name="l00397"></a>00397 <span class="comment">   process record (a mostly trivial mapping, since the canonical</span>
<a name="l00398"></a>00398 <span class="comment">   set was originally taken from the i386 set).  */</span>
<a name="l00399"></a>00399 
<a name="l00400"></a>00400 <span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="linux-record_8h.html#afbe3ceba377d950235fcc1b93c0b68b9">gdb_syscall</a>
<a name="l00401"></a><a class="code" href="i386-linux-tdep_8c.html#a2fc0b2afbd4c5e3cdead2d033a81f645">00401</a> <a class="code" href="i386-linux-tdep_8c.html#a2fc0b2afbd4c5e3cdead2d033a81f645">i386_canonicalize_syscall</a> (<span class="keywordtype">int</span> <a class="code" href="structsyscall.html">syscall</a>)
<a name="l00402"></a>00402 {
<a name="l00403"></a>00403   <span class="keyword">enum</span> { i386_syscall_max = 499 };
<a name="l00404"></a>00404 
<a name="l00405"></a>00405   <span class="keywordflow">if</span> (syscall &lt;= i386_syscall_max)
<a name="l00406"></a>00406     <span class="keywordflow">return</span> syscall;
<a name="l00407"></a>00407   <span class="keywordflow">else</span>
<a name="l00408"></a>00408     <span class="keywordflow">return</span> -1;
<a name="l00409"></a>00409 }
<a name="l00410"></a>00410 
<a name="l00411"></a>00411 <span class="comment">/* Parse the arguments of current system call instruction and record</span>
<a name="l00412"></a>00412 <span class="comment">   the values of the registers and memory that will be changed into</span>
<a name="l00413"></a>00413 <span class="comment">   &quot;record_arch_list&quot;.  This instruction is &quot;int 0x80&quot; (Linux</span>
<a name="l00414"></a>00414 <span class="comment">   Kernel2.4) or &quot;sysenter&quot; (Linux Kernel 2.6).</span>
<a name="l00415"></a>00415 <span class="comment"></span>
<a name="l00416"></a>00416 <span class="comment">   Return -1 if something wrong.  */</span>
<a name="l00417"></a>00417 
<a name="l00418"></a><a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">00418</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structlinux__record__tdep.html">linux_record_tdep</a> <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>;
<a name="l00419"></a>00419 
<a name="l00420"></a>00420 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00421"></a><a class="code" href="i386-linux-tdep_8c.html#af204dcb6a12a7a3446190d40a3dc7f8e">00421</a> <a class="code" href="i386-linux-tdep_8c.html#af204dcb6a12a7a3446190d40a3dc7f8e">i386_linux_intx80_sysenter_syscall_record</a> (<span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>)
<a name="l00422"></a>00422 {
<a name="l00423"></a>00423   <span class="keywordtype">int</span> ret;
<a name="l00424"></a>00424   <a class="code" href="defs_8h.html#ac7647a3f71533007c9e128f3ddda1987">LONGEST</a> syscall_native;
<a name="l00425"></a>00425   <span class="keyword">enum</span> <a class="code" href="linux-record_8h.html#afbe3ceba377d950235fcc1b93c0b68b9">gdb_syscall</a> syscall_gdb;
<a name="l00426"></a>00426 
<a name="l00427"></a>00427   <a class="code" href="regcache_8c.html#a2fd86b56e425cf004d0bc5cebcd0e4f6">regcache_raw_read_signed</a> (regcache, <a class="code" href="i386-tdep_8h.html#a57b19420cd51154eec6330210174cb1ea8bc942b0638eaec9ec2c5b761d765f55">I386_EAX_REGNUM</a>, &amp;syscall_native);
<a name="l00428"></a>00428 
<a name="l00429"></a>00429   syscall_gdb = <a class="code" href="i386-linux-tdep_8c.html#a2fc0b2afbd4c5e3cdead2d033a81f645">i386_canonicalize_syscall</a> (syscall_native);
<a name="l00430"></a>00430 
<a name="l00431"></a>00431   <span class="keywordflow">if</span> (syscall_gdb &lt; 0)
<a name="l00432"></a>00432     {
<a name="l00433"></a>00433       <a class="code" href="utils_8c.html#ad57145632bbcb0361dc1dfa134b1efd0">printf_unfiltered</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Process record and replay target doesn&#39;t &quot;</span>
<a name="l00434"></a>00434                            <span class="stringliteral">&quot;support syscall number %s\n&quot;</span>), 
<a name="l00435"></a>00435                          <a class="code" href="utils_8c.html#a707b1023c85049b17b9d1ca01c58768a">plongest</a> (syscall_native));
<a name="l00436"></a>00436       <span class="keywordflow">return</span> -1;
<a name="l00437"></a>00437     }
<a name="l00438"></a>00438 
<a name="l00439"></a>00439   <span class="keywordflow">if</span> (syscall_gdb == <a class="code" href="linux-record_8h.html#afbe3ceba377d950235fcc1b93c0b68b9a0268de34e92c6bafb802566349870e44">gdb_sys_sigreturn</a>
<a name="l00440"></a>00440       || syscall_gdb == <a class="code" href="linux-record_8h.html#afbe3ceba377d950235fcc1b93c0b68b9a2e1261fa3ca5488ef34bb0bdad92bb09">gdb_sys_rt_sigreturn</a>)
<a name="l00441"></a>00441    {
<a name="l00442"></a>00442      <span class="keywordflow">if</span> (<a class="code" href="i386-linux-tdep_8c.html#a9d649cf7d352ff51c561a66a9f9e8805">i386_all_but_ip_registers_record</a> (regcache))
<a name="l00443"></a>00443        <span class="keywordflow">return</span> -1;
<a name="l00444"></a>00444      <span class="keywordflow">return</span> 0;
<a name="l00445"></a>00445    }
<a name="l00446"></a>00446 
<a name="l00447"></a>00447   ret = <a class="code" href="linux-record_8c.html#a31ff59ce9fcf4649bb885e5c5927d91a">record_linux_system_call</a> (syscall_gdb, regcache,
<a name="l00448"></a>00448                                   &amp;<a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>);
<a name="l00449"></a>00449   <span class="keywordflow">if</span> (ret)
<a name="l00450"></a>00450     <span class="keywordflow">return</span> ret;
<a name="l00451"></a>00451 
<a name="l00452"></a>00452   <span class="comment">/* Record the return value of the system call.  */</span>
<a name="l00453"></a>00453   <span class="keywordflow">if</span> (<a class="code" href="record-full_8c.html#a5fcf7b1f39983052860866c9eb6976ba">record_full_arch_list_add_reg</a> (regcache, <a class="code" href="i386-tdep_8h.html#a57b19420cd51154eec6330210174cb1ea8bc942b0638eaec9ec2c5b761d765f55">I386_EAX_REGNUM</a>))
<a name="l00454"></a>00454     <span class="keywordflow">return</span> -1;
<a name="l00455"></a>00455 
<a name="l00456"></a>00456   <span class="keywordflow">return</span> 0;
<a name="l00457"></a>00457 }
<a name="l00458"></a>00458 
<a name="l00459"></a><a class="code" href="i386-linux-tdep_8c.html#aa82c7408c6ac8c5ec99a013c6e735d85">00459</a> <span class="preprocessor">#define I386_LINUX_xstate       270</span>
<a name="l00460"></a><a class="code" href="i386-linux-tdep_8c.html#a7b04ed46f0f11c8db93ca0d4f1c745de">00460</a> <span class="preprocessor"></span><span class="preprocessor">#define I386_LINUX_frame_size   732</span>
<a name="l00461"></a>00461 <span class="preprocessor"></span>
<a name="l00462"></a>00462 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00463"></a><a class="code" href="i386-linux-tdep_8c.html#a089dabfc37d94351b7fbefbd9b83d276">00463</a> <a class="code" href="i386-linux-tdep_8c.html#a089dabfc37d94351b7fbefbd9b83d276">i386_linux_record_signal</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>,
<a name="l00464"></a>00464                           <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l00465"></a>00465                           <span class="keyword">enum</span> gdb_signal signal)
<a name="l00466"></a>00466 {
<a name="l00467"></a>00467   <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> esp;
<a name="l00468"></a>00468 
<a name="l00469"></a>00469   <span class="keywordflow">if</span> (<a class="code" href="i386-linux-tdep_8c.html#a9d649cf7d352ff51c561a66a9f9e8805">i386_all_but_ip_registers_record</a> (regcache))
<a name="l00470"></a>00470     <span class="keywordflow">return</span> -1;
<a name="l00471"></a>00471 
<a name="l00472"></a>00472   <span class="keywordflow">if</span> (<a class="code" href="record-full_8c.html#a5fcf7b1f39983052860866c9eb6976ba">record_full_arch_list_add_reg</a> (regcache, <a class="code" href="i386-tdep_8h.html#a57b19420cd51154eec6330210174cb1ea6cc8e97d610b2e4a8793a2d4503c56ab">I386_EIP_REGNUM</a>))
<a name="l00473"></a>00473     <span class="keywordflow">return</span> -1;
<a name="l00474"></a>00474 
<a name="l00475"></a>00475   <span class="comment">/* Record the change in the stack.  */</span>
<a name="l00476"></a>00476   <a class="code" href="regcache_8c.html#a465c747dfdb94bb985d56e0374eb4481">regcache_raw_read_unsigned</a> (regcache, <a class="code" href="i386-tdep_8h.html#a57b19420cd51154eec6330210174cb1eac2436f1b8c2ea79f6cdc62ac8653bc3d">I386_ESP_REGNUM</a>, &amp;esp);
<a name="l00477"></a>00477   <span class="comment">/* This is for xstate.</span>
<a name="l00478"></a>00478 <span class="comment">     sp -= sizeof (struct _fpstate);  */</span>
<a name="l00479"></a>00479   esp -= <a class="code" href="i386-linux-tdep_8c.html#aa82c7408c6ac8c5ec99a013c6e735d85">I386_LINUX_xstate</a>;
<a name="l00480"></a>00480   <span class="comment">/* This is for frame_size.</span>
<a name="l00481"></a>00481 <span class="comment">     sp -= sizeof (struct rt_sigframe);  */</span>
<a name="l00482"></a>00482   esp -= <a class="code" href="i386-linux-tdep_8c.html#a7b04ed46f0f11c8db93ca0d4f1c745de">I386_LINUX_frame_size</a>;
<a name="l00483"></a>00483   <span class="keywordflow">if</span> (<a class="code" href="record-full_8c.html#a8c5820f1a4b024c531d0b6e6bcdd1fc5">record_full_arch_list_add_mem</a> (esp,
<a name="l00484"></a>00484                                      <a class="code" href="i386-linux-tdep_8c.html#aa82c7408c6ac8c5ec99a013c6e735d85">I386_LINUX_xstate</a> + <a class="code" href="i386-linux-tdep_8c.html#a7b04ed46f0f11c8db93ca0d4f1c745de">I386_LINUX_frame_size</a>))
<a name="l00485"></a>00485     <span class="keywordflow">return</span> -1;
<a name="l00486"></a>00486 
<a name="l00487"></a>00487   <span class="keywordflow">if</span> (<a class="code" href="record-full_8c.html#a93bd8b2cd011d6ca650af9909f1cd2e8">record_full_arch_list_add_end</a> ())
<a name="l00488"></a>00488     <span class="keywordflow">return</span> -1;
<a name="l00489"></a>00489 
<a name="l00490"></a>00490   <span class="keywordflow">return</span> 0;
<a name="l00491"></a>00491 }
<a name="l00492"></a>00492 
<a name="l00493"></a>00493 
<a name="l00494"></a>00494 <span class="comment">/* Core of the implementation for gdbarch get_syscall_number.  Get pending</span>
<a name="l00495"></a>00495 <span class="comment">   syscall number from REGCACHE.  If there is no pending syscall -1 will be</span>
<a name="l00496"></a>00496 <span class="comment">   returned.  Pending syscall means ptrace has stepped into the syscall but</span>
<a name="l00497"></a>00497 <span class="comment">   another ptrace call will step out.  PC is right after the int $0x80</span>
<a name="l00498"></a>00498 <span class="comment">   / syscall / sysenter instruction in both cases, PC does not change during</span>
<a name="l00499"></a>00499 <span class="comment">   the second ptrace step.  */</span>
<a name="l00500"></a>00500 
<a name="l00501"></a>00501 <span class="keyword">static</span> <a class="code" href="defs_8h.html#ac7647a3f71533007c9e128f3ddda1987">LONGEST</a>
<a name="l00502"></a><a class="code" href="i386-linux-tdep_8c.html#a6b1d13d74b3cdda2851843bb71dd10bb">00502</a> <a class="code" href="i386-linux-tdep_8c.html#a6b1d13d74b3cdda2851843bb71dd10bb">i386_linux_get_syscall_number_from_regcache</a> (<span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>)
<a name="l00503"></a>00503 {
<a name="l00504"></a>00504   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="regcache_8c.html#ad4f6d0cdf256b1fa45d59a6d71b50659">get_regcache_arch</a> (regcache);
<a name="l00505"></a>00505   <span class="keyword">enum</span> bfd_endian <a class="code" href="structgdbarch.html#a7a9dd6544406e9cbb574dae9d531346e">byte_order</a> = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l00506"></a>00506   <span class="comment">/* The content of a register.  */</span>
<a name="l00507"></a>00507   <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> buf[4];
<a name="l00508"></a>00508   <span class="comment">/* The result.  */</span>
<a name="l00509"></a>00509   <a class="code" href="defs_8h.html#ac7647a3f71533007c9e128f3ddda1987">LONGEST</a> ret;
<a name="l00510"></a>00510 
<a name="l00511"></a>00511   <span class="comment">/* Getting the system call number from the register.</span>
<a name="l00512"></a>00512 <span class="comment">     When dealing with x86 architecture, this information</span>
<a name="l00513"></a>00513 <span class="comment">     is stored at %eax register.  */</span>
<a name="l00514"></a>00514   <a class="code" href="regcache_8c.html#a7056a5ea585aa0938893952f52d95e2e">regcache_cooked_read</a> (regcache, <a class="code" href="i386-linux-tdep_8h.html#ad3b6edbbfbfc2709ea9193b9f7d09fde">I386_LINUX_ORIG_EAX_REGNUM</a>, buf);
<a name="l00515"></a>00515 
<a name="l00516"></a>00516   ret = <a class="code" href="defs_8h.html#afae519602ea9737f24bfa0e24b507faf">extract_signed_integer</a> (buf, 4, byte_order);
<a name="l00517"></a>00517 
<a name="l00518"></a>00518   <span class="keywordflow">return</span> ret;
<a name="l00519"></a>00519 }
<a name="l00520"></a>00520 
<a name="l00521"></a>00521 <span class="comment">/* Wrapper for i386_linux_get_syscall_number_from_regcache to make it</span>
<a name="l00522"></a>00522 <span class="comment">   compatible with gdbarch get_syscall_number method prototype.  */</span>
<a name="l00523"></a>00523 
<a name="l00524"></a>00524 <span class="keyword">static</span> <a class="code" href="defs_8h.html#ac7647a3f71533007c9e128f3ddda1987">LONGEST</a>
<a name="l00525"></a><a class="code" href="i386-linux-tdep_8c.html#ab6a35e9e6996128e8e05e16d4fb9ffb6">00525</a> <a class="code" href="i386-linux-tdep_8c.html#ab6a35e9e6996128e8e05e16d4fb9ffb6">i386_linux_get_syscall_number</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>,
<a name="l00526"></a>00526                                <a class="code" href="structptid.html">ptid_t</a> <a class="code" href="structptid.html">ptid</a>)
<a name="l00527"></a>00527 {
<a name="l00528"></a>00528   <span class="keyword">struct </span><a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a> = <a class="code" href="regcache_8c.html#aec7af24a2f0b7c27c042f6a22c51291b">get_thread_regcache</a> (ptid);
<a name="l00529"></a>00529 
<a name="l00530"></a>00530   <span class="keywordflow">return</span> <a class="code" href="i386-linux-tdep_8c.html#a6b1d13d74b3cdda2851843bb71dd10bb">i386_linux_get_syscall_number_from_regcache</a> (regcache);
<a name="l00531"></a>00531 }
<a name="l00532"></a>00532 
<a name="l00533"></a>00533 <span class="comment">/* The register sets used in GNU/Linux ELF core-dumps are identical to</span>
<a name="l00534"></a>00534 <span class="comment">   the register sets in `struct user&#39; that are used for a.out</span>
<a name="l00535"></a>00535 <span class="comment">   core-dumps.  These are also used by ptrace(2).  The corresponding</span>
<a name="l00536"></a>00536 <span class="comment">   types are `elf_gregset_t&#39; for the general-purpose registers (with</span>
<a name="l00537"></a>00537 <span class="comment">   `elf_greg_t&#39; the type of a single GP register) and `elf_fpregset_t&#39;</span>
<a name="l00538"></a>00538 <span class="comment">   for the floating-point registers.</span>
<a name="l00539"></a>00539 <span class="comment"></span>
<a name="l00540"></a>00540 <span class="comment">   Those types used to be available under the names `gregset_t&#39; and</span>
<a name="l00541"></a>00541 <span class="comment">   `fpregset_t&#39; too, and GDB used those names in the past.  But those</span>
<a name="l00542"></a>00542 <span class="comment">   names are now used for the register sets used in the `mcontext_t&#39;</span>
<a name="l00543"></a>00543 <span class="comment">   type, which have a different size and layout.  */</span>
<a name="l00544"></a>00544 
<a name="l00545"></a>00545 <span class="comment">/* Mapping between the general-purpose registers in `struct user&#39;</span>
<a name="l00546"></a>00546 <span class="comment">   format and GDB&#39;s register cache layout.  */</span>
<a name="l00547"></a>00547 
<a name="l00548"></a>00548 <span class="comment">/* From &lt;sys/reg.h&gt;.  */</span>
<a name="l00549"></a><a class="code" href="i386-linux-tdep_8h.html#a130aeda26973315c86fb061e5ff9ca28">00549</a> <span class="keywordtype">int</span> <a class="code" href="i386-linux-tdep_8c.html#a130aeda26973315c86fb061e5ff9ca28">i386_linux_gregset_reg_offset</a>[] =
<a name="l00550"></a>00550 {
<a name="l00551"></a>00551   6 * 4,                        <span class="comment">/* %eax */</span>
<a name="l00552"></a>00552   1 * 4,                        <span class="comment">/* %ecx */</span>
<a name="l00553"></a>00553   2 * 4,                        <span class="comment">/* %edx */</span>
<a name="l00554"></a>00554   0 * 4,                        <span class="comment">/* %ebx */</span>
<a name="l00555"></a>00555   15 * 4,                       <span class="comment">/* %esp */</span>
<a name="l00556"></a>00556   5 * 4,                        <span class="comment">/* %ebp */</span>
<a name="l00557"></a>00557   3 * 4,                        <span class="comment">/* %esi */</span>
<a name="l00558"></a>00558   4 * 4,                        <span class="comment">/* %edi */</span>
<a name="l00559"></a>00559   12 * 4,                       <span class="comment">/* %eip */</span>
<a name="l00560"></a>00560   14 * 4,                       <span class="comment">/* %eflags */</span>
<a name="l00561"></a>00561   13 * 4,                       <span class="comment">/* %cs */</span>
<a name="l00562"></a>00562   16 * 4,                       <span class="comment">/* %ss */</span>
<a name="l00563"></a>00563   7 * 4,                        <span class="comment">/* %ds */</span>
<a name="l00564"></a>00564   8 * 4,                        <span class="comment">/* %es */</span>
<a name="l00565"></a>00565   9 * 4,                        <span class="comment">/* %fs */</span>
<a name="l00566"></a>00566   10 * 4,                       <span class="comment">/* %gs */</span>
<a name="l00567"></a>00567   -1, -1, -1, -1, -1, -1, -1, -1,
<a name="l00568"></a>00568   -1, -1, -1, -1, -1, -1, -1, -1,
<a name="l00569"></a>00569   -1, -1, -1, -1, -1, -1, -1, -1,
<a name="l00570"></a>00570   -1,
<a name="l00571"></a>00571   -1, -1, -1, -1, -1, -1, -1, -1,
<a name="l00572"></a>00572   11 * 4                        <span class="comment">/* &quot;orig_eax&quot; */</span>
<a name="l00573"></a>00573 };
<a name="l00574"></a>00574 
<a name="l00575"></a>00575 <span class="comment">/* Mapping between the general-purpose registers in `struct</span>
<a name="l00576"></a>00576 <span class="comment">   sigcontext&#39; format and GDB&#39;s register cache layout.  */</span>
<a name="l00577"></a>00577 
<a name="l00578"></a>00578 <span class="comment">/* From &lt;asm/sigcontext.h&gt;.  */</span>
<a name="l00579"></a><a class="code" href="i386-linux-tdep_8c.html#a1dff19e0011dfedbad55076294de5ea1">00579</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="i386-linux-tdep_8c.html#a1dff19e0011dfedbad55076294de5ea1">i386_linux_sc_reg_offset</a>[] =
<a name="l00580"></a>00580 {
<a name="l00581"></a>00581   11 * 4,                       <span class="comment">/* %eax */</span>
<a name="l00582"></a>00582   10 * 4,                       <span class="comment">/* %ecx */</span>
<a name="l00583"></a>00583   9 * 4,                        <span class="comment">/* %edx */</span>
<a name="l00584"></a>00584   8 * 4,                        <span class="comment">/* %ebx */</span>
<a name="l00585"></a>00585   7 * 4,                        <span class="comment">/* %esp */</span>
<a name="l00586"></a>00586   6 * 4,                        <span class="comment">/* %ebp */</span>
<a name="l00587"></a>00587   5 * 4,                        <span class="comment">/* %esi */</span>
<a name="l00588"></a>00588   4 * 4,                        <span class="comment">/* %edi */</span>
<a name="l00589"></a>00589   14 * 4,                       <span class="comment">/* %eip */</span>
<a name="l00590"></a>00590   16 * 4,                       <span class="comment">/* %eflags */</span>
<a name="l00591"></a>00591   15 * 4,                       <span class="comment">/* %cs */</span>
<a name="l00592"></a>00592   18 * 4,                       <span class="comment">/* %ss */</span>
<a name="l00593"></a>00593   3 * 4,                        <span class="comment">/* %ds */</span>
<a name="l00594"></a>00594   2 * 4,                        <span class="comment">/* %es */</span>
<a name="l00595"></a>00595   1 * 4,                        <span class="comment">/* %fs */</span>
<a name="l00596"></a>00596   0 * 4                         <span class="comment">/* %gs */</span>
<a name="l00597"></a>00597 };
<a name="l00598"></a>00598 
<a name="l00599"></a>00599 <span class="comment">/* Get XSAVE extended state xcr0 from core dump.  */</span>
<a name="l00600"></a>00600 
<a name="l00601"></a>00601 uint64_t
<a name="l00602"></a><a class="code" href="i386-linux-tdep_8h.html#acb60b4907958d76a44cb1f96dde0e88e">00602</a> <a class="code" href="i386-linux-tdep_8c.html#acb60b4907958d76a44cb1f96dde0e88e">i386_linux_core_read_xcr0</a> (bfd *abfd)
<a name="l00603"></a>00603 {
<a name="l00604"></a>00604   asection *xstate = bfd_get_section_by_name (abfd, <span class="stringliteral">&quot;.reg-xstate&quot;</span>);
<a name="l00605"></a>00605   uint64_t xcr0;
<a name="l00606"></a>00606 
<a name="l00607"></a>00607   <span class="keywordflow">if</span> (xstate)
<a name="l00608"></a>00608     {
<a name="l00609"></a>00609       <span class="keywordtype">size_t</span> <a class="code" href="go32-nat_8c.html#a854352f53b148adc24983a58a1866d66">size</a> = bfd_section_size (abfd, xstate);
<a name="l00610"></a>00610 
<a name="l00611"></a>00611       <span class="comment">/* Check extended state size.  */</span>
<a name="l00612"></a>00612       <span class="keywordflow">if</span> (size &lt; <a class="code" href="i386-xstate_8h.html#a27d9e3cc054aace93846177e0adc212a">I386_XSTATE_AVX_SIZE</a>)
<a name="l00613"></a>00613         xcr0 = <a class="code" href="i386-xstate_8h.html#a7ecd8550cb0088945acf26f987001222">I386_XSTATE_SSE_MASK</a>;
<a name="l00614"></a>00614       <span class="keywordflow">else</span>
<a name="l00615"></a>00615         {
<a name="l00616"></a>00616           <span class="keywordtype">char</span> contents[8];
<a name="l00617"></a>00617 
<a name="l00618"></a>00618           <span class="keywordflow">if</span> (! bfd_get_section_contents (abfd, xstate, contents,
<a name="l00619"></a>00619                                           <a class="code" href="i386-linux-tdep_8h.html#a601601ac810f271c457b4fb57134fb4e">I386_LINUX_XSAVE_XCR0_OFFSET</a>,
<a name="l00620"></a>00620                                           8))
<a name="l00621"></a>00621             {
<a name="l00622"></a>00622               <a class="code" href="utils_8c.html#a5fc201a4181499a6b4057a6caa15b5e2">warning</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Couldn&#39;t read `xcr0&#39; bytes from &quot;</span>
<a name="l00623"></a>00623                          <span class="stringliteral">&quot;`.reg-xstate&#39; section in core file.&quot;</span>));
<a name="l00624"></a>00624               <span class="keywordflow">return</span> 0;
<a name="l00625"></a>00625             }
<a name="l00626"></a>00626 
<a name="l00627"></a>00627           xcr0 = bfd_get_64 (abfd, contents);
<a name="l00628"></a>00628         }
<a name="l00629"></a>00629     }
<a name="l00630"></a>00630   <span class="keywordflow">else</span>
<a name="l00631"></a>00631     xcr0 = 0;
<a name="l00632"></a>00632 
<a name="l00633"></a>00633   <span class="keywordflow">return</span> xcr0;
<a name="l00634"></a>00634 }
<a name="l00635"></a>00635 
<a name="l00636"></a>00636 <span class="comment">/* Get Linux/x86 target description from core dump.  */</span>
<a name="l00637"></a>00637 
<a name="l00638"></a>00638 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structtarget__desc.html">target_desc</a> *
<a name="l00639"></a><a class="code" href="i386-linux-tdep_8c.html#a1e5e25f9d2cc3970dfc1be44f57c1743">00639</a> <a class="code" href="i386-linux-tdep_8c.html#a1e5e25f9d2cc3970dfc1be44f57c1743">i386_linux_core_read_description</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>,
<a name="l00640"></a>00640                                   <span class="keyword">struct</span> <a class="code" href="structtarget__ops.html">target_ops</a> *target,
<a name="l00641"></a>00641                                   bfd *abfd)
<a name="l00642"></a>00642 {
<a name="l00643"></a>00643   <span class="comment">/* Linux/i386.  */</span>
<a name="l00644"></a>00644   uint64_t xcr0 = <a class="code" href="i386-linux-tdep_8c.html#acb60b4907958d76a44cb1f96dde0e88e">i386_linux_core_read_xcr0</a> (abfd);
<a name="l00645"></a>00645   <span class="keywordflow">switch</span> ((xcr0 &amp; <a class="code" href="i386-xstate_8h.html#a23f5ffae19a7eb01e3502cbbef632962">I386_XSTATE_AVX_MASK</a>))
<a name="l00646"></a>00646     {
<a name="l00647"></a>00647     <span class="keywordflow">case</span> I386_XSTATE_AVX_MASK:
<a name="l00648"></a>00648       <span class="keywordflow">return</span> <a class="code" href="i386-avx-linux_8c.html#a0bb33c96a2ef5f5b206ac5374ace796a">tdesc_i386_avx_linux</a>;
<a name="l00649"></a>00649     <span class="keywordflow">case</span> <a class="code" href="i386-xstate_8h.html#a7ecd8550cb0088945acf26f987001222">I386_XSTATE_SSE_MASK</a>:
<a name="l00650"></a>00650       <span class="keywordflow">return</span> <a class="code" href="i386-linux_8c.html#a658af348f649b3875664c8bcad70c706">tdesc_i386_linux</a>;
<a name="l00651"></a>00651     <span class="keywordflow">case</span> <a class="code" href="i386-xstate_8h.html#a11281b26dd01f56e31f5c41b75c53bd4">I386_XSTATE_X87_MASK</a>:
<a name="l00652"></a>00652       <span class="keywordflow">return</span> <a class="code" href="i386-mmx-linux_8c.html#ab87c0efff68bec28ae2041ba415e59de">tdesc_i386_mmx_linux</a>;
<a name="l00653"></a>00653     <span class="keywordflow">default</span>:
<a name="l00654"></a>00654       <span class="keywordflow">break</span>;
<a name="l00655"></a>00655     }
<a name="l00656"></a>00656 
<a name="l00657"></a>00657   <span class="keywordflow">if</span> (bfd_get_section_by_name (abfd, <span class="stringliteral">&quot;.reg-xfp&quot;</span>) != NULL)
<a name="l00658"></a>00658     <span class="keywordflow">return</span> <a class="code" href="i386-linux_8c.html#a658af348f649b3875664c8bcad70c706">tdesc_i386_linux</a>;
<a name="l00659"></a>00659   <span class="keywordflow">else</span>
<a name="l00660"></a>00660     <span class="keywordflow">return</span> <a class="code" href="i386-mmx-linux_8c.html#ab87c0efff68bec28ae2041ba415e59de">tdesc_i386_mmx_linux</a>;
<a name="l00661"></a>00661 }
<a name="l00662"></a>00662 
<a name="l00663"></a>00663 <span class="comment">/* Linux kernel shows PC value after the &#39;int $0x80&#39; instruction even if</span>
<a name="l00664"></a>00664 <span class="comment">   inferior is still inside the syscall.  On next PTRACE_SINGLESTEP it will</span>
<a name="l00665"></a>00665 <span class="comment">   finish the syscall but PC will not change.</span>
<a name="l00666"></a>00666 <span class="comment">   </span>
<a name="l00667"></a>00667 <span class="comment">   Some vDSOs contain &#39;int $0x80; ret&#39; and during stepping out of the syscall</span>
<a name="l00668"></a>00668 <span class="comment">   i386_displaced_step_fixup would keep PC at the displaced pad location.</span>
<a name="l00669"></a>00669 <span class="comment">   As PC is pointing to the &#39;ret&#39; instruction before the step</span>
<a name="l00670"></a>00670 <span class="comment">   i386_displaced_step_fixup would expect inferior has just executed that &#39;ret&#39;</span>
<a name="l00671"></a>00671 <span class="comment">   and PC should not be adjusted.  In reality it finished syscall instead and</span>
<a name="l00672"></a>00672 <span class="comment">   PC should get relocated back to its vDSO address.  Hide the &#39;ret&#39;</span>
<a name="l00673"></a>00673 <span class="comment">   instruction by &#39;nop&#39; so that i386_displaced_step_fixup is not confused.</span>
<a name="l00674"></a>00674 <span class="comment">   </span>
<a name="l00675"></a>00675 <span class="comment">   It is not fully correct as the bytes in struct displaced_step_closure will</span>
<a name="l00676"></a>00676 <span class="comment">   not match the inferior code.  But we would need some new flag in</span>
<a name="l00677"></a>00677 <span class="comment">   displaced_step_closure otherwise to keep the state that syscall is finishing</span>
<a name="l00678"></a>00678 <span class="comment">   for the later i386_displaced_step_fixup execution as the syscall execution</span>
<a name="l00679"></a>00679 <span class="comment">   is already no longer detectable there.  The new flag field would mean</span>
<a name="l00680"></a>00680 <span class="comment">   i386-linux-tdep.c needs to wrap all the displacement methods of i386-tdep.c</span>
<a name="l00681"></a>00681 <span class="comment">   which does not seem worth it.  The same effect is achieved by patching that</span>
<a name="l00682"></a>00682 <span class="comment">   &#39;nop&#39; instruction there instead.  */</span>
<a name="l00683"></a>00683 
<a name="l00684"></a>00684 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structdisplaced__step__closure.html">displaced_step_closure</a> *
<a name="l00685"></a><a class="code" href="i386-linux-tdep_8c.html#a89e27635d8ba7c3af43cc9895ca4dd29">00685</a> <a class="code" href="i386-linux-tdep_8c.html#a89e27635d8ba7c3af43cc9895ca4dd29">i386_linux_displaced_step_copy_insn</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>,
<a name="l00686"></a>00686                                      <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="varobj_8h.html#a43396decd62b46fa01cc6c66a84cbba1">from</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="varobj_8h.html#ae2a2635825813434f3201bf8ace439d2">to</a>,
<a name="l00687"></a>00687                                      <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *regs)
<a name="l00688"></a>00688 {
<a name="l00689"></a>00689   <span class="keyword">struct </span><a class="code" href="structdisplaced__step__closure.html">displaced_step_closure</a> *closure;
<a name="l00690"></a>00690   
<a name="l00691"></a>00691   closure = <a class="code" href="i386-tdep_8c.html#aeccb2e3715346a55624f5b5a9ffede82">i386_displaced_step_copy_insn</a> (gdbarch, from, to, regs);
<a name="l00692"></a>00692 
<a name="l00693"></a>00693   <span class="keywordflow">if</span> (<a class="code" href="i386-linux-tdep_8c.html#a6b1d13d74b3cdda2851843bb71dd10bb">i386_linux_get_syscall_number_from_regcache</a> (regs) != -1)
<a name="l00694"></a>00694     {
<a name="l00695"></a>00695       <span class="comment">/* Since we use simple_displaced_step_copy_insn, our closure is a</span>
<a name="l00696"></a>00696 <span class="comment">         copy of the instruction.  */</span>
<a name="l00697"></a>00697       <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *insn = (<a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *) closure;
<a name="l00698"></a>00698 
<a name="l00699"></a>00699       <span class="comment">/* Fake nop.  */</span>
<a name="l00700"></a>00700       insn[0] = 0x90;
<a name="l00701"></a>00701     }
<a name="l00702"></a>00702 
<a name="l00703"></a>00703   <span class="keywordflow">return</span> closure;
<a name="l00704"></a>00704 }
<a name="l00705"></a>00705 
<a name="l00706"></a>00706 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00707"></a><a class="code" href="i386-linux-tdep_8c.html#a719955337c2658ddad9d1afd4cc19fc3">00707</a> <a class="code" href="i386-linux-tdep_8c.html#a719955337c2658ddad9d1afd4cc19fc3">i386_linux_init_abi</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch__info.html">gdbarch_info</a> info, <span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>)
<a name="l00708"></a>00708 {
<a name="l00709"></a>00709   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00710"></a>00710   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structtarget__desc.html">target_desc</a> *tdesc = info.<a class="code" href="structgdbarch__info.html#ac92a2218499c8147be64826e303d688e">target_desc</a>;
<a name="l00711"></a>00711   <span class="keyword">struct </span><a class="code" href="structtdesc__arch__data.html">tdesc_arch_data</a> *<a class="code" href="target-descriptions_8c.html#aaa20fcb5e0c18b68c23e48d158440bb8">tdesc_data</a> = (<span class="keywordtype">void</span> *) info.<a class="code" href="structgdbarch__info.html#a86760dc33f60db9d946b09271bf244a3">tdep_info</a>;
<a name="l00712"></a>00712   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structtdesc__feature.html">tdesc_feature</a> *feature;
<a name="l00713"></a>00713   <span class="keywordtype">int</span> valid_p;
<a name="l00714"></a>00714 
<a name="l00715"></a>00715   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (tdesc_data);
<a name="l00716"></a>00716 
<a name="l00717"></a>00717   <a class="code" href="linux-tdep_8c.html#a4f8fc8d423c3cbbab4d15bd33388b3e4">linux_init_abi</a> (info, gdbarch);
<a name="l00718"></a>00718 
<a name="l00719"></a>00719   <span class="comment">/* GNU/Linux uses ELF.  */</span>
<a name="l00720"></a>00720   <a class="code" href="i386-tdep_8c.html#acd69f543eb49bdb119b33664358a92ff">i386_elf_init_abi</a> (info, gdbarch);
<a name="l00721"></a>00721 
<a name="l00722"></a>00722   <span class="comment">/* Reserve a number for orig_eax.  */</span>
<a name="l00723"></a>00723   <a class="code" href="gdbarch_8c.html#ad8417c5d66cf04d0587f58f82de94c48">set_gdbarch_num_regs</a> (gdbarch, <a class="code" href="i386-linux-tdep_8h.html#a4eae9a5d8940d8aaf442acd0c604cce3">I386_LINUX_NUM_REGS</a>);
<a name="l00724"></a>00724 
<a name="l00725"></a>00725   <span class="keywordflow">if</span> (! <a class="code" href="target-descriptions_8c.html#a54a8994f193cc0a0cf6dbb6d771becf2">tdesc_has_registers</a> (tdesc))
<a name="l00726"></a>00726     tdesc = <a class="code" href="i386-linux_8c.html#a658af348f649b3875664c8bcad70c706">tdesc_i386_linux</a>;
<a name="l00727"></a>00727   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a16b1887643fca284ac3a3e34f5620c8b">tdesc</a> = tdesc;
<a name="l00728"></a>00728 
<a name="l00729"></a>00729   feature = <a class="code" href="target-descriptions_8c.html#abc4d5a3eeb4bfc94bd14ac763516e938">tdesc_find_feature</a> (tdesc, <span class="stringliteral">&quot;org.gnu.gdb.i386.linux&quot;</span>);
<a name="l00730"></a>00730   <span class="keywordflow">if</span> (feature == NULL)
<a name="l00731"></a>00731     <span class="keywordflow">return</span>;
<a name="l00732"></a>00732 
<a name="l00733"></a>00733   valid_p = <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data,
<a name="l00734"></a>00734                                      <a class="code" href="i386-linux-tdep_8h.html#ad3b6edbbfbfc2709ea9193b9f7d09fde">I386_LINUX_ORIG_EAX_REGNUM</a>,
<a name="l00735"></a>00735                                      <span class="stringliteral">&quot;orig_eax&quot;</span>);
<a name="l00736"></a>00736   <span class="keywordflow">if</span> (!valid_p)
<a name="l00737"></a>00737     <span class="keywordflow">return</span>;
<a name="l00738"></a>00738 
<a name="l00739"></a>00739   <span class="comment">/* Add the %orig_eax register used for syscall restarting.  */</span>
<a name="l00740"></a>00740   <a class="code" href="gdbarch_8c.html#a3209bbcdaee096f4977ef11291f0be48">set_gdbarch_write_pc</a> (gdbarch, <a class="code" href="i386-linux-tdep_8c.html#ae2abc0c141a41c2ce935b5f8a3bfebce">i386_linux_write_pc</a>);
<a name="l00741"></a>00741 
<a name="l00742"></a>00742   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a9ae11a6c7f7d6bd7b874354a711ede5d">register_reggroup_p</a> = <a class="code" href="i386-linux-tdep_8c.html#a4cc3e306c1f7b42d2e1d427e1a0c1f88">i386_linux_register_reggroup_p</a>;
<a name="l00743"></a>00743 
<a name="l00744"></a>00744   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a174c52d6a2e773abf8e79b5c91c7459c">gregset_reg_offset</a> = <a class="code" href="i386-linux-tdep_8c.html#a130aeda26973315c86fb061e5ff9ca28">i386_linux_gregset_reg_offset</a>;
<a name="l00745"></a>00745   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a519170496a5dbcdda2ac9c44c2336b3b">gregset_num_regs</a> = ARRAY_SIZE (<a class="code" href="i386-linux-tdep_8c.html#a130aeda26973315c86fb061e5ff9ca28">i386_linux_gregset_reg_offset</a>);
<a name="l00746"></a>00746   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a4e535ed4edd0491e3897078d2fb1bd9e">sizeof_gregset</a> = 17 * 4;
<a name="l00747"></a>00747 
<a name="l00748"></a>00748   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a957885ad12880b1fe4883dff184eabe6">jb_pc_offset</a> = 20;      <span class="comment">/* From &lt;bits/setjmp.h&gt;.  */</span>
<a name="l00749"></a>00749 
<a name="l00750"></a>00750   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af64a5d942ec9e1f51c462cfe0fafef59">sigtramp_p</a> = <a class="code" href="i386-linux-tdep_8c.html#a396e14e4adbd598c8ce41ca9fd78f9b0">i386_linux_sigtramp_p</a>;
<a name="l00751"></a>00751   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ab1259773c4897264769229e39f7c9db8">sigcontext_addr</a> = <a class="code" href="i386-linux-tdep_8c.html#a56b77b1d690b7b317d6374a2cfd8dd16">i386_linux_sigcontext_addr</a>;
<a name="l00752"></a>00752   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af0040a5c43005e278b1bf2df21975f36">sc_reg_offset</a> = <a class="code" href="i386-linux-tdep_8c.html#a1dff19e0011dfedbad55076294de5ea1">i386_linux_sc_reg_offset</a>;
<a name="l00753"></a>00753   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a001e0ad9e5edd51a2119a1e5a0268f91">sc_num_regs</a> = ARRAY_SIZE (<a class="code" href="i386-linux-tdep_8c.html#a1dff19e0011dfedbad55076294de5ea1">i386_linux_sc_reg_offset</a>);
<a name="l00754"></a>00754 
<a name="l00755"></a>00755   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a8cd0c7ae00111edbffffe6d11eb39152">xsave_xcr0_offset</a> = <a class="code" href="i386-linux-tdep_8h.html#a601601ac810f271c457b4fb57134fb4e">I386_LINUX_XSAVE_XCR0_OFFSET</a>;
<a name="l00756"></a>00756 
<a name="l00757"></a>00757   <a class="code" href="gdbarch_8c.html#aa8c9dca7e6a98c781e368e51b55080cf">set_gdbarch_process_record</a> (gdbarch, <a class="code" href="i386-tdep_8c.html#a362eb742c6fdf06dac234b86b74534de">i386_process_record</a>);
<a name="l00758"></a>00758   <a class="code" href="gdbarch_8c.html#afc626bd7e6c8c31783fd6554cd10996a">set_gdbarch_process_record_signal</a> (gdbarch, <a class="code" href="i386-linux-tdep_8c.html#a089dabfc37d94351b7fbefbd9b83d276">i386_linux_record_signal</a>);
<a name="l00759"></a>00759 
<a name="l00760"></a>00760   <span class="comment">/* Initialize the i386_linux_record_tdep.  */</span>
<a name="l00761"></a>00761   <span class="comment">/* These values are the size of the type that will be used in a system</span>
<a name="l00762"></a>00762 <span class="comment">     call.  They are obtained from Linux Kernel source.  */</span>
<a name="l00763"></a>00763   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a4a0a6573bd6b455279ee9af1aeb27733">size_pointer</a>
<a name="l00764"></a>00764     = <a class="code" href="gdbarch_8c.html#ae356193e481873e4377ff922d984f13f">gdbarch_ptr_bit</a> (gdbarch) / TARGET_CHAR_BIT;
<a name="l00765"></a>00765   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#afee4d26dd9fba7994f8f9ed534435bf4">size__old_kernel_stat</a> = 32;
<a name="l00766"></a>00766   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#aa5deef9016938c28ab42f554ba6eff28">size_tms</a> = 16;
<a name="l00767"></a>00767   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#aa5a9826f416a7711c60bad7dc593d6f6">size_loff_t</a> = 8;
<a name="l00768"></a>00768   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a33f0bae72c59060fc3f11cb5229b6a84">size_flock</a> = 16;
<a name="l00769"></a>00769   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a7f4664a9ee5bd2f89e306f0c8a899da0">size_oldold_utsname</a> = 45;
<a name="l00770"></a>00770   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a0905671ac9a2616a8f766ef3501bfb45">size_ustat</a> = 20;
<a name="l00771"></a>00771   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a14e6773603cd0df249cd60f6fe9d83bc">size_old_sigaction</a> = 140;
<a name="l00772"></a>00772   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ae6b0d599f5f3f9a9317a48ffae8d0c4b">size_old_sigset_t</a> = 128;
<a name="l00773"></a>00773   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#acb75f55d3bcf5ba77e8a358e7706201c">size_rlimit</a> = 8;
<a name="l00774"></a>00774   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a9118e588d9a664292ff03bed2a47b62c">size_rusage</a> = 72;
<a name="l00775"></a>00775   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a058a6cfa194491fbe1d4432891f2daca">size_timeval</a> = 8;
<a name="l00776"></a>00776   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a59ea58df25cc9107c8c0ced8ad570870">size_timezone</a> = 8;
<a name="l00777"></a>00777   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#aeb1edf562750b7c2e848930643adccd4">size_old_gid_t</a> = 2;
<a name="l00778"></a>00778   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a4ad3a8eb53908e9e87c0d69af59bfacd">size_old_uid_t</a> = 2;
<a name="l00779"></a>00779   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a60a16f9be81bf9fbdbfed20b36ca75d8">size_fd_set</a> = 128;
<a name="l00780"></a>00780   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a3d01f767fe60554cfd22b8a03290f51a">size_dirent</a> = 268;
<a name="l00781"></a>00781   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#aefb68022912331ca66f78afba4bad0e3">size_dirent64</a> = 276;
<a name="l00782"></a>00782   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a9453b15b40810be75011a2fca1757dcc">size_statfs</a> = 64;
<a name="l00783"></a>00783   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#aedbd6062f77510a4a86d9783a40206f4">size_statfs64</a> = 84;
<a name="l00784"></a>00784   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a992614a553b46007d01f467a34b17fca">size_sockaddr</a> = 16;
<a name="l00785"></a>00785   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a7ec8aa13decec364159cc354ac44ec51">size_int</a>
<a name="l00786"></a>00786     = <a class="code" href="gdbarch_8c.html#a6f4f4c6b17870bbd5de1f5e2776f774b">gdbarch_int_bit</a> (gdbarch) / TARGET_CHAR_BIT;
<a name="l00787"></a>00787   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ace4e940126aec46902c2f7ff4fae1ab4">size_long</a>
<a name="l00788"></a>00788     = <a class="code" href="gdbarch_8c.html#adba59f763c7dd284b240b703c12d149a">gdbarch_long_bit</a> (gdbarch) / TARGET_CHAR_BIT;
<a name="l00789"></a>00789   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a056b5e5f3c0d431313946b979884bbc4">size_ulong</a>
<a name="l00790"></a>00790     = <a class="code" href="gdbarch_8c.html#adba59f763c7dd284b240b703c12d149a">gdbarch_long_bit</a> (gdbarch) / TARGET_CHAR_BIT;
<a name="l00791"></a>00791   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a3e3af4bbfd9b6abc372b340453c200ea">size_msghdr</a> = 28;
<a name="l00792"></a>00792   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a0789ae762f5b083370be38b5388e9325">size_itimerval</a> = 16;
<a name="l00793"></a>00793   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a7804425efd92efcba40b3ee300a3f2bd">size_stat</a> = 88;
<a name="l00794"></a>00794   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a8870d7bc11bd599282bee604bf728ea1">size_old_utsname</a> = 325;
<a name="l00795"></a>00795   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a32ed413de5baa7bd3445698697ca7dc5">size_sysinfo</a> = 64;
<a name="l00796"></a>00796   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a6626ef60c9c0e833eb4328ed152ed8aa">size_msqid_ds</a> = 88;
<a name="l00797"></a>00797   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a9706254036c784fd2c5b16b21a5c7471">size_shmid_ds</a> = 84;
<a name="l00798"></a>00798   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a69df111e590ffde2978ca663a2aa3085">size_new_utsname</a> = 390;
<a name="l00799"></a>00799   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a701b17d626934ce3e25f3d6577721b25">size_timex</a> = 128;
<a name="l00800"></a>00800   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ae200aac311435bc5a384cfff299081ac">size_mem_dqinfo</a> = 24;
<a name="l00801"></a>00801   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a858f4b48de7413950d2022f91cda549f">size_if_dqblk</a> = 68;
<a name="l00802"></a>00802   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a298c2347a01363f1653996fa728bf8bb">size_fs_quota_stat</a> = 68;
<a name="l00803"></a>00803   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a3c1ee92c6ca157908d9324cb4bd7f952">size_timespec</a> = 8;
<a name="l00804"></a>00804   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#aaf1de534a488d980c77c7f6c8dfc195e">size_pollfd</a> = 8;
<a name="l00805"></a>00805   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a7059e03c29ab960a1fe9dc0b9e83cc91">size_NFS_FHSIZE</a> = 32;
<a name="l00806"></a>00806   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a7f6bc64ea016568f7e128ccb90ff42a2">size_knfsd_fh</a> = 132;
<a name="l00807"></a>00807   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ac094435b60499a55157f513919e8358a">size_TASK_COMM_LEN</a> = 16;
<a name="l00808"></a>00808   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a3509ba2e37ea1c5edda3473b13d28e4b">size_sigaction</a> = 140;
<a name="l00809"></a>00809   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a704fa250826481325652f6361aea4324">size_sigset_t</a> = 8;
<a name="l00810"></a>00810   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a5020e42b3ef1c366dd1a67a66f244b3a">size_siginfo_t</a> = 128;
<a name="l00811"></a>00811   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ab6de93cf9f7f322f1e987a597a73349d">size_cap_user_data_t</a> = 12;
<a name="l00812"></a>00812   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a90dcce1823fcc2663d60a92c5d8e5da0">size_stack_t</a> = 12;
<a name="l00813"></a>00813   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#af5a55d4421cd93f938dd8e8812249d94">size_off_t</a> = <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ace4e940126aec46902c2f7ff4fae1ab4">size_long</a>;
<a name="l00814"></a>00814   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a28b998bc5e4f43a8dd7053d1a71bff4e">size_stat64</a> = 96;
<a name="l00815"></a>00815   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a1f5111227ff57f3fd75dcdce3390ee6b">size_gid_t</a> = 2;
<a name="l00816"></a>00816   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ad2d0b13f1b130e3c776892252da6ca81">size_uid_t</a> = 2;
<a name="l00817"></a>00817   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a562d48c5986297d9015871793d309647">size_PAGE_SIZE</a> = 4096;
<a name="l00818"></a>00818   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a058f07a6cafd35ed32eb4259209a321c">size_flock64</a> = 24;
<a name="l00819"></a>00819   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a05fffe6e560f96b2b6b8933f81dbb3c0">size_user_desc</a> = 16;
<a name="l00820"></a>00820   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a321a3faac36b7b2606a14ba6edc5ca78">size_io_event</a> = 32;
<a name="l00821"></a>00821   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a02dffca9e03b22e2ba77e52b76833c32">size_iocb</a> = 64;
<a name="l00822"></a>00822   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a8d8601f4491a292cd72fc6b72f13cc78">size_epoll_event</a> = 12;
<a name="l00823"></a>00823   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a52e88d49b3231e3a78b603e779445f42">size_itimerspec</a>
<a name="l00824"></a>00824     = <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a3c1ee92c6ca157908d9324cb4bd7f952">size_timespec</a> * 2;
<a name="l00825"></a>00825   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a9d13ac45f43437296ac90828487b8e14">size_mq_attr</a> = 32;
<a name="l00826"></a>00826   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a57b7dcaa71d9af2fe64c9b75220f3fcf">size_siginfo</a> = 128;
<a name="l00827"></a>00827   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#aedf167a70660b7497d47c5b844c74136">size_termios</a> = 36;
<a name="l00828"></a>00828   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ae44480f0a01ed7b0388c7d9708e12673">size_termios2</a> = 44;
<a name="l00829"></a>00829   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a327f15b6b3d8506c79c7acd078866379">size_pid_t</a> = 4;
<a name="l00830"></a>00830   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a5b10787fcd1e75b2a487b88c6a215f38">size_winsize</a> = 8;
<a name="l00831"></a>00831   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a735080009bece287f13dd43ea5cce427">size_serial_struct</a> = 60;
<a name="l00832"></a>00832   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a83cc62cec026fd6232e2c66d5e6e8f84">size_serial_icounter_struct</a> = 80;
<a name="l00833"></a>00833   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a70e0178336dfbd5f776797450c8da0bf">size_hayes_esp_config</a> = 12;
<a name="l00834"></a>00834   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ac63c0065d35e47b3724efc3bc7733335">size_size_t</a> = 4;
<a name="l00835"></a>00835   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ade4e2637c5f34315e30497c29ca933e4">size_iovec</a> = 8;
<a name="l00836"></a>00836 
<a name="l00837"></a>00837   <span class="comment">/* These values are the second argument of system call &quot;sys_ioctl&quot;.</span>
<a name="l00838"></a>00838 <span class="comment">     They are obtained from Linux Kernel source.  */</span>
<a name="l00839"></a>00839   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ab75a621dc2ea0fa1343fb916e9e5d3a8">ioctl_TCGETS</a> = 0x5401;
<a name="l00840"></a>00840   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a6669d555e61a19b969efa762243f785c">ioctl_TCSETS</a> = 0x5402;
<a name="l00841"></a>00841   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a5765fddb86ca7e28dffe613a34a8d3df">ioctl_TCSETSW</a> = 0x5403;
<a name="l00842"></a>00842   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a43926f9ff8a813423de4a177522842bf">ioctl_TCSETSF</a> = 0x5404;
<a name="l00843"></a>00843   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a170a85581a6f85227ac59bdbc861b55d">ioctl_TCGETA</a> = 0x5405;
<a name="l00844"></a>00844   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a8ae81477d00d81f304b77740628f42b5">ioctl_TCSETA</a> = 0x5406;
<a name="l00845"></a>00845   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a4bfd3867c1456de47d458a2770e27f00">ioctl_TCSETAW</a> = 0x5407;
<a name="l00846"></a>00846   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a68a16684c12452ae3725726c935b2365">ioctl_TCSETAF</a> = 0x5408;
<a name="l00847"></a>00847   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#abea4297e62172a8b7783d67a93f68139">ioctl_TCSBRK</a> = 0x5409;
<a name="l00848"></a>00848   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a8d873501582968c604a2835265bd87d8">ioctl_TCXONC</a> = 0x540A;
<a name="l00849"></a>00849   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ac7cbecaaa617603242e4cf8591fff4cd">ioctl_TCFLSH</a> = 0x540B;
<a name="l00850"></a>00850   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a08a56db29adc418b8b006eefe195a85b">ioctl_TIOCEXCL</a> = 0x540C;
<a name="l00851"></a>00851   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a21f0866e47f03d3a455e03a911838545">ioctl_TIOCNXCL</a> = 0x540D;
<a name="l00852"></a>00852   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a4a621e3e565471e556074c8a1ff1b675">ioctl_TIOCSCTTY</a> = 0x540E;
<a name="l00853"></a>00853   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ab057766deea762257107913f6065a7dd">ioctl_TIOCGPGRP</a> = 0x540F;
<a name="l00854"></a>00854   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a199dba98f30226c7fb9a095f386fc245">ioctl_TIOCSPGRP</a> = 0x5410;
<a name="l00855"></a>00855   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a4de76d22d1cb5cf0893aba4247806d5c">ioctl_TIOCOUTQ</a> = 0x5411;
<a name="l00856"></a>00856   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a75b37f8d0535bffeab25cebf1296009c">ioctl_TIOCSTI</a> = 0x5412;
<a name="l00857"></a>00857   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a14521634af3b2ef298fb618cf9b1f140">ioctl_TIOCGWINSZ</a> = 0x5413;
<a name="l00858"></a>00858   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a2fafaf2e93bb42c589949fb4459c0058">ioctl_TIOCSWINSZ</a> = 0x5414;
<a name="l00859"></a>00859   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a0bdd8562f5475ee06647f92ab0e89fc8">ioctl_TIOCMGET</a> = 0x5415;
<a name="l00860"></a>00860   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a4cb8b5221a1b5a11e6588886dff25edc">ioctl_TIOCMBIS</a> = 0x5416;
<a name="l00861"></a>00861   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ac77bf443256c4f8133192fd51ab594bd">ioctl_TIOCMBIC</a> = 0x5417;
<a name="l00862"></a>00862   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a816aace1494e13753f75f2c6f23cc27e">ioctl_TIOCMSET</a> = 0x5418;
<a name="l00863"></a>00863   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a044a73ad193084bdb70718af1f512e5c">ioctl_TIOCGSOFTCAR</a> = 0x5419;
<a name="l00864"></a>00864   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#aa73436eb894961e099b1e1d53b7c8d4e">ioctl_TIOCSSOFTCAR</a> = 0x541A;
<a name="l00865"></a>00865   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a7120ce11f4468530e158b9c60edce32f">ioctl_FIONREAD</a> = 0x541B;
<a name="l00866"></a>00866   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ac038a114b3e2ccef0de0483039eae062">ioctl_TIOCINQ</a> = <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a7120ce11f4468530e158b9c60edce32f">ioctl_FIONREAD</a>;
<a name="l00867"></a>00867   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ade0ee91551f684a3877067977ec6e02e">ioctl_TIOCLINUX</a> = 0x541C;
<a name="l00868"></a>00868   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a95b6e1b1b967423ab3df11d4eae4d0c0">ioctl_TIOCCONS</a> = 0x541D;
<a name="l00869"></a>00869   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#af2b134776ef4708db5915d43577e8da3">ioctl_TIOCGSERIAL</a> = 0x541E;
<a name="l00870"></a>00870   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a450cc4bd679baa9140b7c524a70db255">ioctl_TIOCSSERIAL</a> = 0x541F;
<a name="l00871"></a>00871   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ad30feff2daf56bc7e9de471a4f04ac9e">ioctl_TIOCPKT</a> = 0x5420;
<a name="l00872"></a>00872   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#aed497d214940d0ec10d4f48a95075d13">ioctl_FIONBIO</a> = 0x5421;
<a name="l00873"></a>00873   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a1d8c31ce70bf4455d05905804fdb913c">ioctl_TIOCNOTTY</a> = 0x5422;
<a name="l00874"></a>00874   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ab259e764a1207070e9787eb23b649136">ioctl_TIOCSETD</a> = 0x5423;
<a name="l00875"></a>00875   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a696d81c0b372ac9bbaec191401a98e6b">ioctl_TIOCGETD</a> = 0x5424;
<a name="l00876"></a>00876   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#afc545fa31f02e6150bd2a257e3089cd1">ioctl_TCSBRKP</a> = 0x5425;
<a name="l00877"></a>00877   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ae32def800ebd486c8038e2f9a1b978dc">ioctl_TIOCTTYGSTRUCT</a> = 0x5426;
<a name="l00878"></a>00878   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a4585bf2e6e5e6cc572dda2108272302b">ioctl_TIOCSBRK</a> = 0x5427;
<a name="l00879"></a>00879   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#aac29c853ef1bff1d3e16b701eff69f43">ioctl_TIOCCBRK</a> = 0x5428;
<a name="l00880"></a>00880   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ae44bb4a9bd14ada2dc7db24e9604e4c7">ioctl_TIOCGSID</a> = 0x5429;
<a name="l00881"></a>00881   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#aaa60d48d899b4944bd669d528f544a0f">ioctl_TCGETS2</a> = 0x802c542a;
<a name="l00882"></a>00882   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ae2915bfe3fed66ff4bebb117f4b1e736">ioctl_TCSETS2</a> = 0x402c542b;
<a name="l00883"></a>00883   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a269279b8e9cb7c0a36ac8a348538e8d8">ioctl_TCSETSW2</a> = 0x402c542c;
<a name="l00884"></a>00884   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ac66c0cc96b6f2bc4b4315bdb9acab4b0">ioctl_TCSETSF2</a> = 0x402c542d;
<a name="l00885"></a>00885   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#aeda2a97f24572fce3d6c5cbfccb740eb">ioctl_TIOCGPTN</a> = 0x80045430;
<a name="l00886"></a>00886   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a3bd04f7b2675066719318af8becf7feb">ioctl_TIOCSPTLCK</a> = 0x40045431;
<a name="l00887"></a>00887   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#af499ecdfda6bcfd027921a6c587c96b6">ioctl_FIONCLEX</a> = 0x5450;
<a name="l00888"></a>00888   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a92c8f24cad7a107f1281251e0c10baf6">ioctl_FIOCLEX</a> = 0x5451;
<a name="l00889"></a>00889   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a10db5af2a3188deb03ccc2fe12cedeec">ioctl_FIOASYNC</a> = 0x5452;
<a name="l00890"></a>00890   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ae34860862979faab23f24dd64595b315">ioctl_TIOCSERCONFIG</a> = 0x5453;
<a name="l00891"></a>00891   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#aa39590fed01dbb935b995fe4019d072f">ioctl_TIOCSERGWILD</a> = 0x5454;
<a name="l00892"></a>00892   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a4ab7c9997700c28677a77593569ca116">ioctl_TIOCSERSWILD</a> = 0x5455;
<a name="l00893"></a>00893   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#aefe573955e861a1ca634787a37bf05f0">ioctl_TIOCGLCKTRMIOS</a> = 0x5456;
<a name="l00894"></a>00894   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ade81ff87334fc0bcdf2fff0233135739">ioctl_TIOCSLCKTRMIOS</a> = 0x5457;
<a name="l00895"></a>00895   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ad13bb81ec66b25cea6fb072f25fbfa89">ioctl_TIOCSERGSTRUCT</a> = 0x5458;
<a name="l00896"></a>00896   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a7df081167cd9998f4a0c2f42fa3eeb85">ioctl_TIOCSERGETLSR</a> = 0x5459;
<a name="l00897"></a>00897   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a5be4431ffef42356feb2d1c41b2f64ac">ioctl_TIOCSERGETMULTI</a> = 0x545A;
<a name="l00898"></a>00898   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ac13df62bea476b613c692f9cf60994cc">ioctl_TIOCSERSETMULTI</a> = 0x545B;
<a name="l00899"></a>00899   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a31417143cd5950f0199cf512f009675c">ioctl_TIOCMIWAIT</a> = 0x545C;
<a name="l00900"></a>00900   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a1ddbdffdaf455fc33cc34a415dc88162">ioctl_TIOCGICOUNT</a> = 0x545D;
<a name="l00901"></a>00901   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a898040454da80febc877e99a274c64e7">ioctl_TIOCGHAYESESP</a> = 0x545E;
<a name="l00902"></a>00902   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a89248ae4b9eeedecaace3341e7d4a2dd">ioctl_TIOCSHAYESESP</a> = 0x545F;
<a name="l00903"></a>00903   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#aca03793b98bfe04f3e190fac930b31e2">ioctl_FIOQSIZE</a> = 0x5460;
<a name="l00904"></a>00904 
<a name="l00905"></a>00905   <span class="comment">/* These values are the second argument of system call &quot;sys_fcntl&quot;</span>
<a name="l00906"></a>00906 <span class="comment">     and &quot;sys_fcntl64&quot;.  They are obtained from Linux Kernel source.  */</span>
<a name="l00907"></a>00907   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ab01c73c2bfbf01b3ca3203283fe98645">fcntl_F_GETLK</a> = 5;
<a name="l00908"></a>00908   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a4654b08a509ba14826f5629520ea86f7">fcntl_F_GETLK64</a> = 12;
<a name="l00909"></a>00909   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a66b6757d6edf1c1a21e7cae9850401fb">fcntl_F_SETLK64</a> = 13;
<a name="l00910"></a>00910   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a2b365ed2372df84bfe5bc270c89b243f">fcntl_F_SETLKW64</a> = 14;
<a name="l00911"></a>00911 
<a name="l00912"></a>00912   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a56351217bf2057167dbe573f86c6bdd7">arg1</a> = <a class="code" href="i386-tdep_8h.html#a57b19420cd51154eec6330210174cb1eac5d9c458a2a11908d4381bba705e9300">I386_EBX_REGNUM</a>;
<a name="l00913"></a>00913   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a4afca59eac313e99fddc27663cfb415a">arg2</a> = <a class="code" href="i386-tdep_8h.html#a57b19420cd51154eec6330210174cb1ea6852654c84caf8c36f89fcdb0fc48694">I386_ECX_REGNUM</a>;
<a name="l00914"></a>00914   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a414abb85924bf0f1d7eac4583d2b223b">arg3</a> = <a class="code" href="i386-tdep_8h.html#a57b19420cd51154eec6330210174cb1ea9cefa6020f8b9b0c1210b595fff88859">I386_EDX_REGNUM</a>;
<a name="l00915"></a>00915   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#aeedfc8b6adf75835a0b352683112a6e3">arg4</a> = <a class="code" href="i386-tdep_8h.html#a57b19420cd51154eec6330210174cb1ea39b03a13a7a07980703d3433a98047fa">I386_ESI_REGNUM</a>;
<a name="l00916"></a>00916   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#a5af5d5511cb3e5a71eeb37c573d9962d">arg5</a> = <a class="code" href="i386-tdep_8h.html#a57b19420cd51154eec6330210174cb1eae4edcc2201b2cb42accf6bdd67ccfb87">I386_EDI_REGNUM</a>;
<a name="l00917"></a>00917   <a class="code" href="i386-linux-tdep_8c.html#a9bec70ac57d80fa4c40f700da15c45d2">i386_linux_record_tdep</a>.<a class="code" href="structlinux__record__tdep.html#ae8357ade19f666d9aaf3438aea2175f2">arg6</a> = <a class="code" href="i386-tdep_8h.html#a57b19420cd51154eec6330210174cb1ea6cd24db43669a3799d53839de474389f">I386_EBP_REGNUM</a>;
<a name="l00918"></a>00918 
<a name="l00919"></a>00919   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a9f0de66b40f70a7fb2645fff6955fe1d">i386_intx80_record</a> = <a class="code" href="i386-linux-tdep_8c.html#af204dcb6a12a7a3446190d40a3dc7f8e">i386_linux_intx80_sysenter_syscall_record</a>;
<a name="l00920"></a>00920   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a4dd621c15b0195c6d9623019f93a1090">i386_sysenter_record</a> = <a class="code" href="i386-linux-tdep_8c.html#af204dcb6a12a7a3446190d40a3dc7f8e">i386_linux_intx80_sysenter_syscall_record</a>;
<a name="l00921"></a>00921   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#afe87e7f56fcd8344e02cff7aa4dca2ad">i386_syscall_record</a> = <a class="code" href="i386-linux-tdep_8c.html#af204dcb6a12a7a3446190d40a3dc7f8e">i386_linux_intx80_sysenter_syscall_record</a>;
<a name="l00922"></a>00922 
<a name="l00923"></a>00923   <span class="comment">/* N_FUN symbols in shared libaries have 0 for their values and need</span>
<a name="l00924"></a>00924 <span class="comment">     to be relocated.  */</span>
<a name="l00925"></a>00925   <a class="code" href="gdbarch_8c.html#a2723158f4c6f46a4266d6e6abea418da">set_gdbarch_sofun_address_maybe_missing</a> (gdbarch, 1);
<a name="l00926"></a>00926 
<a name="l00927"></a>00927   <span class="comment">/* GNU/Linux uses SVR4-style shared libraries.  */</span>
<a name="l00928"></a>00928   <a class="code" href="gdbarch_8c.html#a07ccbd7ea452da3be3982cf93d7976c7">set_gdbarch_skip_trampoline_code</a> (gdbarch, <a class="code" href="minsyms_8c.html#a242ce2adf8d22461827406bb8ca63924">find_solib_trampoline_target</a>);
<a name="l00929"></a>00929   <a class="code" href="solib-svr4_8c.html#a10d31439da2b63753298b3b83865465e">set_solib_svr4_fetch_link_map_offsets</a>
<a name="l00930"></a>00930     (gdbarch, <a class="code" href="solib-svr4_8c.html#aa94176d616f07f4d2fe239a370103c9f">svr4_ilp32_fetch_link_map_offsets</a>);
<a name="l00931"></a>00931 
<a name="l00932"></a>00932   <span class="comment">/* GNU/Linux uses the dynamic linker included in the GNU C Library.  */</span>
<a name="l00933"></a>00933   <a class="code" href="gdbarch_8c.html#a7628a74d0792eed255746ac557cc06c0">set_gdbarch_skip_solib_resolver</a> (gdbarch, <a class="code" href="glibc-tdep_8c.html#a6f4ba5974473bc351e9d58fc70c3a0fd">glibc_skip_solib_resolver</a>);
<a name="l00934"></a>00934 
<a name="l00935"></a>00935   <a class="code" href="dwarf2-frame_8c.html#a1dd03a7996278ffb6c940c5070be9a42">dwarf2_frame_set_signal_frame_p</a> (gdbarch, <a class="code" href="i386-linux-tdep_8c.html#a1b01e115b8b601a68ff775d950c79a3b">i386_linux_dwarf_signal_frame_p</a>);
<a name="l00936"></a>00936 
<a name="l00937"></a>00937   <span class="comment">/* Enable TLS support.  */</span>
<a name="l00938"></a>00938   <a class="code" href="gdbarch_8c.html#a5a2e2806f4e83f8090c0d1b459e4e389">set_gdbarch_fetch_tls_load_module_address</a> (gdbarch,
<a name="l00939"></a>00939                                              <a class="code" href="solib-svr4_8c.html#a783de7f3513032bc52a0cd449abea4d7">svr4_fetch_objfile_link_map</a>);
<a name="l00940"></a>00940 
<a name="l00941"></a>00941   <span class="comment">/* Install supported register note sections.  */</span>
<a name="l00942"></a>00942   <span class="keywordflow">if</span> (<a class="code" href="target-descriptions_8c.html#abc4d5a3eeb4bfc94bd14ac763516e938">tdesc_find_feature</a> (tdesc, <span class="stringliteral">&quot;org.gnu.gdb.i386.avx&quot;</span>))
<a name="l00943"></a>00943     <a class="code" href="gdbarch_8c.html#acfac313b16e13b07a6f1d339cc7a12b3">set_gdbarch_core_regset_sections</a> (gdbarch, i386_linux_avx_regset_sections);
<a name="l00944"></a>00944   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="target-descriptions_8c.html#abc4d5a3eeb4bfc94bd14ac763516e938">tdesc_find_feature</a> (tdesc, <span class="stringliteral">&quot;org.gnu.gdb.i386.sse&quot;</span>))
<a name="l00945"></a>00945     <a class="code" href="gdbarch_8c.html#acfac313b16e13b07a6f1d339cc7a12b3">set_gdbarch_core_regset_sections</a> (gdbarch, i386_linux_sse_regset_sections);
<a name="l00946"></a>00946   <span class="keywordflow">else</span>
<a name="l00947"></a>00947     <a class="code" href="gdbarch_8c.html#acfac313b16e13b07a6f1d339cc7a12b3">set_gdbarch_core_regset_sections</a> (gdbarch, i386_linux_regset_sections);
<a name="l00948"></a>00948 
<a name="l00949"></a>00949   <a class="code" href="gdbarch_8c.html#a7a8fc3967566edade385e8c275c6eac0">set_gdbarch_core_read_description</a> (gdbarch,
<a name="l00950"></a>00950                                      <a class="code" href="i386-linux-tdep_8c.html#a1e5e25f9d2cc3970dfc1be44f57c1743">i386_linux_core_read_description</a>);
<a name="l00951"></a>00951 
<a name="l00952"></a>00952   <span class="comment">/* Displaced stepping.  */</span>
<a name="l00953"></a>00953   <a class="code" href="gdbarch_8c.html#a377f439d7b2cc15ed58b05a954cd5984">set_gdbarch_displaced_step_copy_insn</a> (gdbarch,
<a name="l00954"></a>00954                                         <a class="code" href="i386-linux-tdep_8c.html#a89e27635d8ba7c3af43cc9895ca4dd29">i386_linux_displaced_step_copy_insn</a>);
<a name="l00955"></a>00955   <a class="code" href="gdbarch_8c.html#a172d36c9ff7fbc6903ebbc57971dfb74">set_gdbarch_displaced_step_fixup</a> (gdbarch, <a class="code" href="i386-tdep_8c.html#aabd7810c9eb2299893e3e430320d1376">i386_displaced_step_fixup</a>);
<a name="l00956"></a>00956   <a class="code" href="gdbarch_8c.html#a906aad6d29da88f8574e000d1048bc18">set_gdbarch_displaced_step_free_closure</a> (gdbarch,
<a name="l00957"></a>00957                                            <a class="code" href="arch-utils_8c.html#a229f932ac79dc6a79b04970a66c1828f">simple_displaced_step_free_closure</a>);
<a name="l00958"></a>00958   <a class="code" href="gdbarch_8c.html#a58d22760111bd279c9bec892edaae693">set_gdbarch_displaced_step_location</a> (gdbarch,
<a name="l00959"></a>00959                                        <a class="code" href="arch-utils_8c.html#a37f304c4df681be4d0c63afb90e2724c">displaced_step_at_entry_point</a>);
<a name="l00960"></a>00960 
<a name="l00961"></a>00961   <span class="comment">/* Functions for &#39;catch syscall&#39;.  */</span>
<a name="l00962"></a>00962   <a class="code" href="xml-syscall_8c.html#a05e4b00abfe1d7dc57ce874206c20aa4">set_xml_syscall_file_name</a> (<a class="code" href="i386-linux-tdep_8c.html#a65c2959a0957cc9a49f5277d50964b90">XML_SYSCALL_FILENAME_I386</a>);
<a name="l00963"></a>00963   <a class="code" href="gdbarch_8c.html#a70e42efda91aca6e1b5be570963fab1e">set_gdbarch_get_syscall_number</a> (gdbarch,
<a name="l00964"></a>00964                                   <a class="code" href="i386-linux-tdep_8c.html#ab6a35e9e6996128e8e05e16d4fb9ffb6">i386_linux_get_syscall_number</a>);
<a name="l00965"></a>00965 
<a name="l00966"></a>00966   <a class="code" href="gdbarch_8c.html#a86560ca20a273a290b06f347fa05a6f5">set_gdbarch_get_siginfo_type</a> (gdbarch, <a class="code" href="linux-tdep_8c.html#a99c37d02167cddd375f53a64ad6e4459">linux_get_siginfo_type</a>);
<a name="l00967"></a>00967 }
<a name="l00968"></a>00968 
<a name="l00969"></a>00969 <span class="comment">/* Provide a prototype to silence -Wmissing-prototypes.  */</span>
<a name="l00970"></a>00970 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="init_8c.html#aa5d95d59d28060123425ac607af881b6">_initialize_i386_linux_tdep</a> (<span class="keywordtype">void</span>);
<a name="l00971"></a>00971 
<a name="l00972"></a>00972 <span class="keywordtype">void</span>
<a name="l00973"></a><a class="code" href="init_8c.html#aa5d95d59d28060123425ac607af881b6">00973</a> <a class="code" href="init_8c.html#aa5d95d59d28060123425ac607af881b6">_initialize_i386_linux_tdep</a> (<span class="keywordtype">void</span>)
<a name="l00974"></a>00974 {
<a name="l00975"></a>00975   <a class="code" href="osabi_8c.html#a128f5a080296285ede027b712a6e3324">gdbarch_register_osabi</a> (bfd_arch_i386, 0, <a class="code" href="defs_8h.html#a9cd05255f6826ff913d539652b5e624fa0b4fe2ba722ad0accc6caf9bd6c67912">GDB_OSABI_LINUX</a>,
<a name="l00976"></a>00976                           <a class="code" href="i386-linux-tdep_8c.html#a719955337c2658ddad9d1afd4cc19fc3">i386_linux_init_abi</a>);
<a name="l00977"></a>00977 
<a name="l00978"></a>00978   <span class="comment">/* Initialize the Linux target description.  */</span>
<a name="l00979"></a>00979   <a class="code" href="i386-linux_8c.html#a4df532f8a5648f609b700a13145fef05">initialize_tdesc_i386_linux</a> ();
<a name="l00980"></a>00980   <a class="code" href="i386-mmx-linux_8c.html#a26989d01431ade241105152f58ae2ace">initialize_tdesc_i386_mmx_linux</a> ();
<a name="l00981"></a>00981   <a class="code" href="i386-avx-linux_8c.html#aceca120453cac833a234d8a8e37af4b6">initialize_tdesc_i386_avx_linux</a> ();
<a name="l00982"></a>00982 }
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 11 2013 14:13:28 for GDB (xrefs) by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
