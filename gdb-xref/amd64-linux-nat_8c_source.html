<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>GDB (xrefs): /home/stan/gdb/src/gdb/amd64-linux-nat.c Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">GDB (xrefs)
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">/home/stan/gdb/src/gdb/amd64-linux-nat.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="amd64-linux-nat_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* Native-dependent code for GNU/Linux x86-64.</span>
<a name="l00002"></a>00002 <span class="comment"></span>
<a name="l00003"></a>00003 <span class="comment">   Copyright (C) 2001-2013 Free Software Foundation, Inc.</span>
<a name="l00004"></a>00004 <span class="comment">   Contributed by Jiri Smid, SuSE Labs.</span>
<a name="l00005"></a>00005 <span class="comment"></span>
<a name="l00006"></a>00006 <span class="comment">   This file is part of GDB.</span>
<a name="l00007"></a>00007 <span class="comment"></span>
<a name="l00008"></a>00008 <span class="comment">   This program is free software; you can redistribute it and/or modify</span>
<a name="l00009"></a>00009 <span class="comment">   it under the terms of the GNU General Public License as published by</span>
<a name="l00010"></a>00010 <span class="comment">   the Free Software Foundation; either version 3 of the License, or</span>
<a name="l00011"></a>00011 <span class="comment">   (at your option) any later version.</span>
<a name="l00012"></a>00012 <span class="comment"></span>
<a name="l00013"></a>00013 <span class="comment">   This program is distributed in the hope that it will be useful,</span>
<a name="l00014"></a>00014 <span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00015"></a>00015 <span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00016"></a>00016 <span class="comment">   GNU General Public License for more details.</span>
<a name="l00017"></a>00017 <span class="comment"></span>
<a name="l00018"></a>00018 <span class="comment">   You should have received a copy of the GNU General Public License</span>
<a name="l00019"></a>00019 <span class="comment">   along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.  */</span>
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 <span class="preprocessor">#include &quot;<a class="code" href="defs_8h.html">defs.h</a>&quot;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;<a class="code" href="inferior_8h.html">inferior.h</a>&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;<a class="code" href="gdbcore_8h.html">gdbcore.h</a>&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="regcache_8h.html">regcache.h</a>&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="regset_8h.html">regset.h</a>&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="linux-nat_8h.html">linux-nat.h</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="amd64-linux-tdep_8h.html">amd64-linux-tdep.h</a>&quot;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="linux-btrace_8h.html">linux-btrace.h</a>&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="btrace_8h.html">btrace.h</a>&quot;</span>
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="gdb__assert_8h.html">gdb_assert.h</a>&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="gdb__string_8h.html">gdb_string.h</a>&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;elf/common.h&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;sys/uio.h&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;sys/ptrace.h&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;sys/debugreg.h&gt;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;sys/syscall.h&gt;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;sys/procfs.h&gt;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;sys/user.h&gt;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &lt;asm/prctl.h&gt;</span>
<a name="l00041"></a>00041 <span class="comment">/* FIXME ezannoni-2003-07-09: we need &lt;sys/reg.h&gt; to be included after</span>
<a name="l00042"></a>00042 <span class="comment">   &lt;asm/ptrace.h&gt; because the latter redefines FS and GS for no apparent</span>
<a name="l00043"></a>00043 <span class="comment">   reason, and those definitions don&#39;t match the ones that libpthread_db</span>
<a name="l00044"></a>00044 <span class="comment">   uses, which come from &lt;sys/reg.h&gt;.  */</span>
<a name="l00045"></a>00045 <span class="comment">/* ezannoni-2003-07-09: I think this is fixed.  The extraneous defs have</span>
<a name="l00046"></a>00046 <span class="comment">   been removed from ptrace.h in the kernel.  However, better safe than</span>
<a name="l00047"></a>00047 <span class="comment">   sorry.  */</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &lt;asm/ptrace.h&gt;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &lt;sys/reg.h&gt;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="gdb__proc__service_8h.html">gdb_proc_service.h</a>&quot;</span>
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 <span class="comment">/* Prototypes for supply_gregset etc.  */</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &quot;<a class="code" href="gregset_8h.html">gregset.h</a>&quot;</span>
<a name="l00054"></a>00054 
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;<a class="code" href="amd64-tdep_8h.html">amd64-tdep.h</a>&quot;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include &quot;<a class="code" href="i386-linux-tdep_8h.html">i386-linux-tdep.h</a>&quot;</span>
<a name="l00057"></a>00057 <span class="preprocessor">#include &quot;<a class="code" href="amd64-nat_8h.html">amd64-nat.h</a>&quot;</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include &quot;<a class="code" href="i386-nat_8h.html">i386-nat.h</a>&quot;</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &quot;<a class="code" href="i386-xstate_8h.html">i386-xstate.h</a>&quot;</span>
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 <span class="preprocessor">#ifndef PTRACE_GETREGSET</span>
<a name="l00062"></a><a class="code" href="amd64-linux-nat_8c.html#afefafd04f0d0effdafae169dedf2e8ae">00062</a> <span class="preprocessor"></span><span class="preprocessor">#define PTRACE_GETREGSET        0x4204</span>
<a name="l00063"></a>00063 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00064"></a>00064 <span class="preprocessor"></span>
<a name="l00065"></a>00065 <span class="preprocessor">#ifndef PTRACE_SETREGSET</span>
<a name="l00066"></a><a class="code" href="amd64-linux-nat_8c.html#a71b8eabed8464dcb9cfb475bf5cc6f63">00066</a> <span class="preprocessor"></span><span class="preprocessor">#define PTRACE_SETREGSET        0x4205</span>
<a name="l00067"></a>00067 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span>
<a name="l00069"></a>00069 <span class="comment">/* Per-thread arch-specific data we want to keep.  */</span>
<a name="l00070"></a>00070 
<a name="l00071"></a>00071 <span class="keyword">struct </span><a class="code" href="structarch__lwp__info.html">arch_lwp_info</a>
<a name="l00072"></a>00072 {
<a name="l00073"></a>00073   <span class="comment">/* Non-zero if our copy differs from what&#39;s recorded in the thread.  */</span>
<a name="l00074"></a><a class="code" href="structarch__lwp__info.html#a0a7d4fe384d357e3f731a291942db228">00074</a>   <span class="keywordtype">int</span> <a class="code" href="structarch__lwp__info.html#a0a7d4fe384d357e3f731a291942db228">debug_registers_changed</a>;
<a name="l00075"></a>00075 };
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 <span class="comment">/* Does the current host support PTRACE_GETREGSET?  */</span>
<a name="l00078"></a><a class="code" href="amd64-linux-nat_8c.html#aecb40e584bbc59b7b994d520be7ee258">00078</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="amd64-linux-nat_8c.html#aecb40e584bbc59b7b994d520be7ee258">have_ptrace_getregset</a> = -1;
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 <span class="comment">/* Mapping between the general-purpose registers in GNU/Linux x86-64</span>
<a name="l00081"></a>00081 <span class="comment">   `struct user&#39; format and GDB&#39;s register cache layout for GNU/Linux</span>
<a name="l00082"></a>00082 <span class="comment">   i386.</span>
<a name="l00083"></a>00083 <span class="comment"></span>
<a name="l00084"></a>00084 <span class="comment">   Note that most GNU/Linux x86-64 registers are 64-bit, while the</span>
<a name="l00085"></a>00085 <span class="comment">   GNU/Linux i386 registers are all 32-bit, but since we&#39;re</span>
<a name="l00086"></a>00086 <span class="comment">   little-endian we get away with that.  */</span>
<a name="l00087"></a>00087 
<a name="l00088"></a>00088 <span class="comment">/* From &lt;sys/reg.h&gt; on GNU/Linux i386.  */</span>
<a name="l00089"></a><a class="code" href="amd64-linux-nat_8c.html#aaf7cb00f58d860251eb579c6b7551276">00089</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="amd64-linux-nat_8c.html#aaf7cb00f58d860251eb579c6b7551276">amd64_linux_gregset32_reg_offset</a>[] =
<a name="l00090"></a>00090 {
<a name="l00091"></a>00091   RAX * 8, RCX * 8,             <span class="comment">/* %eax, %ecx */</span>
<a name="l00092"></a>00092   RDX * 8, RBX * 8,             <span class="comment">/* %edx, %ebx */</span>
<a name="l00093"></a>00093   RSP * 8, RBP * 8,             <span class="comment">/* %esp, %ebp */</span>
<a name="l00094"></a>00094   RSI * 8, RDI * 8,             <span class="comment">/* %esi, %edi */</span>
<a name="l00095"></a>00095   RIP * 8, EFLAGS * 8,          <span class="comment">/* %eip, %eflags */</span>
<a name="l00096"></a>00096   CS * 8, SS * 8,               <span class="comment">/* %cs, %ss */</span>
<a name="l00097"></a>00097   DS * 8, ES * 8,               <span class="comment">/* %ds, %es */</span>
<a name="l00098"></a>00098   FS * 8, GS * 8,               <span class="comment">/* %fs, %gs */</span>
<a name="l00099"></a>00099   -1, -1, -1, -1, -1, -1, -1, -1,
<a name="l00100"></a>00100   -1, -1, -1, -1, -1, -1, -1, -1,
<a name="l00101"></a>00101   -1, -1, -1, -1, -1, -1, -1, -1, -1,
<a name="l00102"></a>00102   -1, -1, -1, -1, -1, -1, -1, -1,
<a name="l00103"></a>00103   ORIG_RAX * 8                  <span class="comment">/* &quot;orig_eax&quot; */</span>
<a name="l00104"></a>00104 };
<a name="l00105"></a>00105 
<a name="l00106"></a>00106 
<a name="l00107"></a>00107 <span class="comment">/* Transfering the general-purpose registers between GDB, inferiors</span>
<a name="l00108"></a>00108 <span class="comment">   and core files.  */</span>
<a name="l00109"></a>00109 
<a name="l00110"></a>00110 <span class="comment">/* Fill GDB&#39;s register cache with the general-purpose register values</span>
<a name="l00111"></a>00111 <span class="comment">   in *GREGSETP.  */</span>
<a name="l00112"></a>00112 
<a name="l00113"></a>00113 <span class="keywordtype">void</span>
<a name="l00114"></a><a class="code" href="amd64-linux-nat_8c.html#a9fb12d1731c1835152cf47bb9ae05216">00114</a> <a class="code" href="aarch64-linux-nat_8c.html#a285dc81c71767c55f35955e6248bf1cd">supply_gregset</a> (<span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>, <span class="keyword">const</span> <a class="code" href="structpt__regs.html">elf_gregset_t</a> *gregsetp)
<a name="l00115"></a>00115 {
<a name="l00116"></a>00116   <a class="code" href="amd64-nat_8c.html#ae69031acc712d06feca7226df19f264f">amd64_supply_native_gregset</a> (regcache, gregsetp, -1);
<a name="l00117"></a>00117 }
<a name="l00118"></a>00118 
<a name="l00119"></a>00119 <span class="comment">/* Fill register REGNUM (if it is a general-purpose register) in</span>
<a name="l00120"></a>00120 <span class="comment">   *GREGSETP with the value in GDB&#39;s register cache.  If REGNUM is -1,</span>
<a name="l00121"></a>00121 <span class="comment">   do this for all registers.  */</span>
<a name="l00122"></a>00122 
<a name="l00123"></a>00123 <span class="keywordtype">void</span>
<a name="l00124"></a><a class="code" href="amd64-linux-nat_8c.html#a4a5ee75c7d681bba64c73ec9dd061f6f">00124</a> <a class="code" href="aarch64-linux-nat_8c.html#a59e9e7e4054210afa3fc8e9f0a1bbc61">fill_gregset</a> (<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l00125"></a>00125               <a class="code" href="structpt__regs.html">elf_gregset_t</a> *gregsetp, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>)
<a name="l00126"></a>00126 {
<a name="l00127"></a>00127   <a class="code" href="amd64-nat_8c.html#ab208a5321153fcd2ba3d0bbdceefa77b">amd64_collect_native_gregset</a> (regcache, gregsetp, regnum);
<a name="l00128"></a>00128 }
<a name="l00129"></a>00129 
<a name="l00130"></a>00130 <span class="comment">/* Transfering floating-point registers between GDB, inferiors and cores.  */</span>
<a name="l00131"></a>00131 
<a name="l00132"></a>00132 <span class="comment">/* Fill GDB&#39;s register cache with the floating-point and SSE register</span>
<a name="l00133"></a>00133 <span class="comment">   values in *FPREGSETP.  */</span>
<a name="l00134"></a>00134 
<a name="l00135"></a>00135 <span class="keywordtype">void</span>
<a name="l00136"></a><a class="code" href="amd64-linux-nat_8c.html#af4e5b8134e725d656e5c323f564aa3b9">00136</a> <a class="code" href="aarch64-linux-nat_8c.html#a784d41df464cedb2bd9a12f93af6cdb8">supply_fpregset</a> (<span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>, <span class="keyword">const</span> elf_fpregset_t *fpregsetp)
<a name="l00137"></a>00137 {
<a name="l00138"></a>00138   <a class="code" href="amd64-tdep_8c.html#a9747e186066f2fdbc81761c20001cdd2">amd64_supply_fxsave</a> (regcache, -1, fpregsetp);
<a name="l00139"></a>00139 }
<a name="l00140"></a>00140 
<a name="l00141"></a>00141 <span class="comment">/* Fill register REGNUM (if it is a floating-point or SSE register) in</span>
<a name="l00142"></a>00142 <span class="comment">   *FPREGSETP with the value in GDB&#39;s register cache.  If REGNUM is</span>
<a name="l00143"></a>00143 <span class="comment">   -1, do this for all registers.  */</span>
<a name="l00144"></a>00144 
<a name="l00145"></a>00145 <span class="keywordtype">void</span>
<a name="l00146"></a><a class="code" href="amd64-linux-nat_8c.html#a6a262a8a16433a49c55d447d9ba222bb">00146</a> <a class="code" href="aarch64-linux-nat_8c.html#ad18ef6d17cc5848eb79210aed1177cbc">fill_fpregset</a> (<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l00147"></a>00147                elf_fpregset_t *fpregsetp, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>)
<a name="l00148"></a>00148 {
<a name="l00149"></a>00149   <a class="code" href="amd64-tdep_8c.html#af43dd5c7ae497b1b568a8da972590936">amd64_collect_fxsave</a> (regcache, regnum, fpregsetp);
<a name="l00150"></a>00150 }
<a name="l00151"></a>00151 
<a name="l00152"></a>00152 
<a name="l00153"></a>00153 <span class="comment">/* Transferring arbitrary registers between GDB and inferior.  */</span>
<a name="l00154"></a>00154 
<a name="l00155"></a>00155 <span class="comment">/* Fetch register REGNUM from the child process.  If REGNUM is -1, do</span>
<a name="l00156"></a>00156 <span class="comment">   this for all registers (including the floating point and SSE</span>
<a name="l00157"></a>00157 <span class="comment">   registers).  */</span>
<a name="l00158"></a>00158 
<a name="l00159"></a>00159 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00160"></a><a class="code" href="amd64-linux-nat_8c.html#ae8f2b3335dcb6668e232d2c20ba6b3c0">00160</a> <a class="code" href="amd64-linux-nat_8c.html#ae8f2b3335dcb6668e232d2c20ba6b3c0">amd64_linux_fetch_inferior_registers</a> (<span class="keyword">struct</span> <a class="code" href="structtarget__ops.html">target_ops</a> *ops,
<a name="l00161"></a>00161                                       <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>)
<a name="l00162"></a>00162 {
<a name="l00163"></a>00163   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="regcache_8c.html#ad4f6d0cdf256b1fa45d59a6d71b50659">get_regcache_arch</a> (regcache);
<a name="l00164"></a>00164   <span class="keywordtype">int</span> tid;
<a name="l00165"></a>00165 
<a name="l00166"></a>00166   <span class="comment">/* GNU/Linux LWP ID&#39;s are process ID&#39;s.  */</span>
<a name="l00167"></a>00167   tid = <a class="code" href="ptid_8c.html#af5b67a5f356c507b7809af2fa4e63b44">ptid_get_lwp</a> (<a class="code" href="infcmd_8c.html#a428c5be9ce5e70bd03760e828e19c6b7">inferior_ptid</a>);
<a name="l00168"></a>00168   <span class="keywordflow">if</span> (tid == 0)
<a name="l00169"></a>00169     tid = <a class="code" href="ptid_8c.html#a264ba40fc2a0cf3d4fb24a55fe32aede">ptid_get_pid</a> (<a class="code" href="infcmd_8c.html#a428c5be9ce5e70bd03760e828e19c6b7">inferior_ptid</a>); <span class="comment">/* Not a threaded program.  */</span>
<a name="l00170"></a>00170 
<a name="l00171"></a>00171   <span class="keywordflow">if</span> (regnum == -1 || <a class="code" href="amd64-nat_8c.html#af9ed532d37c0c19d71ab65839e8ac32e">amd64_native_gregset_supplies_p</a> (gdbarch, regnum))
<a name="l00172"></a>00172     {
<a name="l00173"></a>00173       <a class="code" href="structpt__regs.html">elf_gregset_t</a> regs;
<a name="l00174"></a>00174 
<a name="l00175"></a>00175       <span class="keywordflow">if</span> (<a class="code" href="gdb__ptrace_8h.html#a4513d889d340e4567f2a46a346f9d9e7">ptrace</a> (<a class="code" href="ppc-linux-nat_8c.html#a01949be089f33416dfc232205f8b8cc7">PTRACE_GETREGS</a>, tid, 0, (<span class="keywordtype">long</span>) &amp;regs) &lt; 0)
<a name="l00176"></a>00176         <a class="code" href="utils_8c.html#a14801ceb45147833b8ce111c89ea0d5f">perror_with_name</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Couldn&#39;t get registers&quot;</span>));
<a name="l00177"></a>00177 
<a name="l00178"></a>00178       <a class="code" href="amd64-nat_8c.html#ae69031acc712d06feca7226df19f264f">amd64_supply_native_gregset</a> (regcache, &amp;regs, -1);
<a name="l00179"></a>00179       <span class="keywordflow">if</span> (regnum != -1)
<a name="l00180"></a>00180         <span class="keywordflow">return</span>;
<a name="l00181"></a>00181     }
<a name="l00182"></a>00182 
<a name="l00183"></a>00183   <span class="keywordflow">if</span> (regnum == -1 || !<a class="code" href="amd64-nat_8c.html#af9ed532d37c0c19d71ab65839e8ac32e">amd64_native_gregset_supplies_p</a> (gdbarch, regnum))
<a name="l00184"></a>00184     {
<a name="l00185"></a>00185       elf_fpregset_t fpregs;
<a name="l00186"></a>00186 
<a name="l00187"></a>00187       <span class="keywordflow">if</span> (<a class="code" href="amd64-linux-nat_8c.html#aecb40e584bbc59b7b994d520be7ee258">have_ptrace_getregset</a>)
<a name="l00188"></a>00188         {
<a name="l00189"></a>00189           <span class="keywordtype">char</span> xstateregs[<a class="code" href="i386-xstate_8h.html#a6caa0ceffa1067626a49869008586b38">I386_XSTATE_MAX_SIZE</a>];
<a name="l00190"></a>00190           <span class="keyword">struct </span>iovec iov;
<a name="l00191"></a>00191 
<a name="l00192"></a>00192           iov.iov_base = xstateregs;
<a name="l00193"></a>00193           iov.iov_len = <span class="keyword">sizeof</span> (xstateregs);
<a name="l00194"></a>00194           <span class="keywordflow">if</span> (<a class="code" href="gdb__ptrace_8h.html#a4513d889d340e4567f2a46a346f9d9e7">ptrace</a> (<a class="code" href="amd64-linux-nat_8c.html#afefafd04f0d0effdafae169dedf2e8ae">PTRACE_GETREGSET</a>, tid,
<a name="l00195"></a>00195                       (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) NT_X86_XSTATE, (<span class="keywordtype">long</span>) &amp;iov) &lt; 0)
<a name="l00196"></a>00196             <a class="code" href="utils_8c.html#a14801ceb45147833b8ce111c89ea0d5f">perror_with_name</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Couldn&#39;t get extended state status&quot;</span>));
<a name="l00197"></a>00197 
<a name="l00198"></a>00198           <a class="code" href="amd64-tdep_8c.html#ad4672e96aa27142ef2c74962218ae993">amd64_supply_xsave</a> (regcache, -1, xstateregs);
<a name="l00199"></a>00199         }
<a name="l00200"></a>00200       <span class="keywordflow">else</span>
<a name="l00201"></a>00201         {
<a name="l00202"></a>00202           <span class="keywordflow">if</span> (<a class="code" href="gdb__ptrace_8h.html#a4513d889d340e4567f2a46a346f9d9e7">ptrace</a> (<a class="code" href="ppc-linux-nat_8c.html#a8732a447cf8264b9727671ce3db6b290">PTRACE_GETFPREGS</a>, tid, 0, (<span class="keywordtype">long</span>) &amp;fpregs) &lt; 0)
<a name="l00203"></a>00203             <a class="code" href="utils_8c.html#a14801ceb45147833b8ce111c89ea0d5f">perror_with_name</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Couldn&#39;t get floating point status&quot;</span>));
<a name="l00204"></a>00204 
<a name="l00205"></a>00205           <a class="code" href="amd64-tdep_8c.html#a9747e186066f2fdbc81761c20001cdd2">amd64_supply_fxsave</a> (regcache, -1, &amp;fpregs);
<a name="l00206"></a>00206         }
<a name="l00207"></a>00207     }
<a name="l00208"></a>00208 }
<a name="l00209"></a>00209 
<a name="l00210"></a>00210 <span class="comment">/* Store register REGNUM back into the child process.  If REGNUM is</span>
<a name="l00211"></a>00211 <span class="comment">   -1, do this for all registers (including the floating-point and SSE</span>
<a name="l00212"></a>00212 <span class="comment">   registers).  */</span>
<a name="l00213"></a>00213 
<a name="l00214"></a>00214 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00215"></a><a class="code" href="amd64-linux-nat_8c.html#ae9561627fba39fb87ac38916405b57be">00215</a> <a class="code" href="amd64-linux-nat_8c.html#ae9561627fba39fb87ac38916405b57be">amd64_linux_store_inferior_registers</a> (<span class="keyword">struct</span> <a class="code" href="structtarget__ops.html">target_ops</a> *ops,
<a name="l00216"></a>00216                                       <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>)
<a name="l00217"></a>00217 {
<a name="l00218"></a>00218   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="regcache_8c.html#ad4f6d0cdf256b1fa45d59a6d71b50659">get_regcache_arch</a> (regcache);
<a name="l00219"></a>00219   <span class="keywordtype">int</span> tid;
<a name="l00220"></a>00220 
<a name="l00221"></a>00221   <span class="comment">/* GNU/Linux LWP ID&#39;s are process ID&#39;s.  */</span>
<a name="l00222"></a>00222   tid = <a class="code" href="ptid_8c.html#af5b67a5f356c507b7809af2fa4e63b44">ptid_get_lwp</a> (<a class="code" href="infcmd_8c.html#a428c5be9ce5e70bd03760e828e19c6b7">inferior_ptid</a>);
<a name="l00223"></a>00223   <span class="keywordflow">if</span> (tid == 0)
<a name="l00224"></a>00224     tid = <a class="code" href="ptid_8c.html#a264ba40fc2a0cf3d4fb24a55fe32aede">ptid_get_pid</a> (<a class="code" href="infcmd_8c.html#a428c5be9ce5e70bd03760e828e19c6b7">inferior_ptid</a>); <span class="comment">/* Not a threaded program.  */</span>
<a name="l00225"></a>00225 
<a name="l00226"></a>00226   <span class="keywordflow">if</span> (regnum == -1 || <a class="code" href="amd64-nat_8c.html#af9ed532d37c0c19d71ab65839e8ac32e">amd64_native_gregset_supplies_p</a> (gdbarch, regnum))
<a name="l00227"></a>00227     {
<a name="l00228"></a>00228       <a class="code" href="structpt__regs.html">elf_gregset_t</a> regs;
<a name="l00229"></a>00229 
<a name="l00230"></a>00230       <span class="keywordflow">if</span> (<a class="code" href="gdb__ptrace_8h.html#a4513d889d340e4567f2a46a346f9d9e7">ptrace</a> (<a class="code" href="ppc-linux-nat_8c.html#a01949be089f33416dfc232205f8b8cc7">PTRACE_GETREGS</a>, tid, 0, (<span class="keywordtype">long</span>) &amp;regs) &lt; 0)
<a name="l00231"></a>00231         <a class="code" href="utils_8c.html#a14801ceb45147833b8ce111c89ea0d5f">perror_with_name</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Couldn&#39;t get registers&quot;</span>));
<a name="l00232"></a>00232 
<a name="l00233"></a>00233       <a class="code" href="amd64-nat_8c.html#ab208a5321153fcd2ba3d0bbdceefa77b">amd64_collect_native_gregset</a> (regcache, &amp;regs, regnum);
<a name="l00234"></a>00234 
<a name="l00235"></a>00235       <span class="keywordflow">if</span> (<a class="code" href="gdb__ptrace_8h.html#a4513d889d340e4567f2a46a346f9d9e7">ptrace</a> (<a class="code" href="ppc-linux-nat_8c.html#aa64dfa55cc59425a6b348b1969f3d1f8">PTRACE_SETREGS</a>, tid, 0, (<span class="keywordtype">long</span>) &amp;regs) &lt; 0)
<a name="l00236"></a>00236         <a class="code" href="utils_8c.html#a14801ceb45147833b8ce111c89ea0d5f">perror_with_name</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Couldn&#39;t write registers&quot;</span>));
<a name="l00237"></a>00237 
<a name="l00238"></a>00238       <span class="keywordflow">if</span> (regnum != -1)
<a name="l00239"></a>00239         <span class="keywordflow">return</span>;
<a name="l00240"></a>00240     }
<a name="l00241"></a>00241 
<a name="l00242"></a>00242   <span class="keywordflow">if</span> (regnum == -1 || !<a class="code" href="amd64-nat_8c.html#af9ed532d37c0c19d71ab65839e8ac32e">amd64_native_gregset_supplies_p</a> (gdbarch, regnum))
<a name="l00243"></a>00243     {
<a name="l00244"></a>00244       elf_fpregset_t fpregs;
<a name="l00245"></a>00245 
<a name="l00246"></a>00246       <span class="keywordflow">if</span> (<a class="code" href="amd64-linux-nat_8c.html#aecb40e584bbc59b7b994d520be7ee258">have_ptrace_getregset</a>)
<a name="l00247"></a>00247         {
<a name="l00248"></a>00248           <span class="keywordtype">char</span> xstateregs[<a class="code" href="i386-xstate_8h.html#a6caa0ceffa1067626a49869008586b38">I386_XSTATE_MAX_SIZE</a>];
<a name="l00249"></a>00249           <span class="keyword">struct </span>iovec iov;
<a name="l00250"></a>00250 
<a name="l00251"></a>00251           iov.iov_base = xstateregs;
<a name="l00252"></a>00252           iov.iov_len = <span class="keyword">sizeof</span> (xstateregs);
<a name="l00253"></a>00253           <span class="keywordflow">if</span> (<a class="code" href="gdb__ptrace_8h.html#a4513d889d340e4567f2a46a346f9d9e7">ptrace</a> (<a class="code" href="amd64-linux-nat_8c.html#afefafd04f0d0effdafae169dedf2e8ae">PTRACE_GETREGSET</a>, tid,
<a name="l00254"></a>00254                       (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) NT_X86_XSTATE, (<span class="keywordtype">long</span>) &amp;iov) &lt; 0)
<a name="l00255"></a>00255             <a class="code" href="utils_8c.html#a14801ceb45147833b8ce111c89ea0d5f">perror_with_name</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Couldn&#39;t get extended state status&quot;</span>));
<a name="l00256"></a>00256 
<a name="l00257"></a>00257           <a class="code" href="amd64-tdep_8c.html#a21268c5a42c60a4a161361f4ec2d525a">amd64_collect_xsave</a> (regcache, regnum, xstateregs, 0);
<a name="l00258"></a>00258 
<a name="l00259"></a>00259           <span class="keywordflow">if</span> (<a class="code" href="gdb__ptrace_8h.html#a4513d889d340e4567f2a46a346f9d9e7">ptrace</a> (<a class="code" href="amd64-linux-nat_8c.html#a71b8eabed8464dcb9cfb475bf5cc6f63">PTRACE_SETREGSET</a>, tid,
<a name="l00260"></a>00260                       (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) NT_X86_XSTATE, (<span class="keywordtype">long</span>) &amp;iov) &lt; 0)
<a name="l00261"></a>00261             <a class="code" href="utils_8c.html#a14801ceb45147833b8ce111c89ea0d5f">perror_with_name</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Couldn&#39;t write extended state status&quot;</span>));
<a name="l00262"></a>00262         }
<a name="l00263"></a>00263       <span class="keywordflow">else</span>
<a name="l00264"></a>00264         {
<a name="l00265"></a>00265           <span class="keywordflow">if</span> (<a class="code" href="gdb__ptrace_8h.html#a4513d889d340e4567f2a46a346f9d9e7">ptrace</a> (<a class="code" href="ppc-linux-nat_8c.html#a8732a447cf8264b9727671ce3db6b290">PTRACE_GETFPREGS</a>, tid, 0, (<span class="keywordtype">long</span>) &amp;fpregs) &lt; 0)
<a name="l00266"></a>00266             <a class="code" href="utils_8c.html#a14801ceb45147833b8ce111c89ea0d5f">perror_with_name</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Couldn&#39;t get floating point status&quot;</span>));
<a name="l00267"></a>00267 
<a name="l00268"></a>00268           <a class="code" href="amd64-tdep_8c.html#af43dd5c7ae497b1b568a8da972590936">amd64_collect_fxsave</a> (regcache, regnum, &amp;fpregs);
<a name="l00269"></a>00269 
<a name="l00270"></a>00270           <span class="keywordflow">if</span> (<a class="code" href="gdb__ptrace_8h.html#a4513d889d340e4567f2a46a346f9d9e7">ptrace</a> (<a class="code" href="ppc-linux-nat_8c.html#aa8bc5ca036f182b8edf2ec0b6d629073">PTRACE_SETFPREGS</a>, tid, 0, (<span class="keywordtype">long</span>) &amp;fpregs) &lt; 0)
<a name="l00271"></a>00271             <a class="code" href="utils_8c.html#a14801ceb45147833b8ce111c89ea0d5f">perror_with_name</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Couldn&#39;t write floating point status&quot;</span>));
<a name="l00272"></a>00272         }
<a name="l00273"></a>00273     }
<a name="l00274"></a>00274 }
<a name="l00275"></a>00275 
<a name="l00276"></a>00276 <span class="comment">/* Support for debug registers.  */</span>
<a name="l00277"></a>00277 
<a name="l00278"></a>00278 <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>
<a name="l00279"></a><a class="code" href="amd64-linux-nat_8c.html#a382fafb7a473662799bfd44b19f67d15">00279</a> <a class="code" href="amd64-linux-nat_8c.html#a382fafb7a473662799bfd44b19f67d15">amd64_linux_dr_get</a> (<a class="code" href="structptid.html">ptid_t</a> <a class="code" href="structptid.html">ptid</a>, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>)
<a name="l00280"></a>00280 {
<a name="l00281"></a>00281   <span class="keywordtype">int</span> tid;
<a name="l00282"></a>00282   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structvalue.html">value</a>;
<a name="l00283"></a>00283 
<a name="l00284"></a>00284   tid = <a class="code" href="ptid_8c.html#af5b67a5f356c507b7809af2fa4e63b44">ptid_get_lwp</a> (ptid);
<a name="l00285"></a>00285   <span class="keywordflow">if</span> (tid == 0)
<a name="l00286"></a>00286     tid = <a class="code" href="ptid_8c.html#a264ba40fc2a0cf3d4fb24a55fe32aede">ptid_get_pid</a> (ptid);
<a name="l00287"></a>00287 
<a name="l00288"></a>00288   errno = 0;
<a name="l00289"></a>00289   value = <a class="code" href="gdb__ptrace_8h.html#a4513d889d340e4567f2a46a346f9d9e7">ptrace</a> (PTRACE_PEEKUSER, tid,
<a name="l00290"></a>00290                   offsetof (<span class="keyword">struct</span> user, u_debugreg[regnum]), 0);
<a name="l00291"></a>00291   <span class="keywordflow">if</span> (errno != 0)
<a name="l00292"></a>00292     <a class="code" href="utils_8c.html#a14801ceb45147833b8ce111c89ea0d5f">perror_with_name</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Couldn&#39;t read debug register&quot;</span>));
<a name="l00293"></a>00293 
<a name="l00294"></a>00294   <span class="keywordflow">return</span> value;
<a name="l00295"></a>00295 }
<a name="l00296"></a>00296 
<a name="l00297"></a>00297 <span class="comment">/* Set debug register REGNUM to VALUE in only the one LWP of PTID.  */</span>
<a name="l00298"></a>00298 
<a name="l00299"></a>00299 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00300"></a><a class="code" href="amd64-linux-nat_8c.html#a3034475d2caf05c935916e0e68c158ce">00300</a> <a class="code" href="amd64-linux-nat_8c.html#a3034475d2caf05c935916e0e68c158ce">amd64_linux_dr_set</a> (<a class="code" href="structptid.html">ptid_t</a> <a class="code" href="structptid.html">ptid</a>, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structvalue.html">value</a>)
<a name="l00301"></a>00301 {
<a name="l00302"></a>00302   <span class="keywordtype">int</span> tid;
<a name="l00303"></a>00303 
<a name="l00304"></a>00304   tid = <a class="code" href="ptid_8c.html#af5b67a5f356c507b7809af2fa4e63b44">ptid_get_lwp</a> (ptid);
<a name="l00305"></a>00305   <span class="keywordflow">if</span> (tid == 0)
<a name="l00306"></a>00306     tid = <a class="code" href="ptid_8c.html#a264ba40fc2a0cf3d4fb24a55fe32aede">ptid_get_pid</a> (ptid);
<a name="l00307"></a>00307 
<a name="l00308"></a>00308   errno = 0;
<a name="l00309"></a>00309   <a class="code" href="gdb__ptrace_8h.html#a4513d889d340e4567f2a46a346f9d9e7">ptrace</a> (PTRACE_POKEUSER, tid,
<a name="l00310"></a>00310           offsetof (<span class="keyword">struct</span> user, u_debugreg[regnum]), value);
<a name="l00311"></a>00311   <span class="keywordflow">if</span> (errno != 0)
<a name="l00312"></a>00312     <a class="code" href="utils_8c.html#a14801ceb45147833b8ce111c89ea0d5f">perror_with_name</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Couldn&#39;t write debug register&quot;</span>));
<a name="l00313"></a>00313 }
<a name="l00314"></a>00314 
<a name="l00315"></a>00315 <span class="comment">/* Return the inferior&#39;s debug register REGNUM.  */</span>
<a name="l00316"></a>00316 
<a name="l00317"></a>00317 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l00318"></a><a class="code" href="amd64-linux-nat_8c.html#a8d73f67151b9978745bce59bea23a33b">00318</a> <a class="code" href="amd64-linux-nat_8c.html#a8d73f67151b9978745bce59bea23a33b">amd64_linux_dr_get_addr</a> (<span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>)
<a name="l00319"></a>00319 {
<a name="l00320"></a>00320   <span class="comment">/* DR6 and DR7 are retrieved with some other way.  */</span>
<a name="l00321"></a>00321   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (<a class="code" href="i386-nat_8h.html#a75642b9691c9eba1a90fee019af13c00">DR_FIRSTADDR</a> &lt;= regnum &amp;&amp; regnum &lt;= <a class="code" href="i386-nat_8h.html#ac7d6755ef1a417c06bb364601e1abd52">DR_LASTADDR</a>);
<a name="l00322"></a>00322 
<a name="l00323"></a>00323   <span class="keywordflow">return</span> <a class="code" href="amd64-linux-nat_8c.html#a382fafb7a473662799bfd44b19f67d15">amd64_linux_dr_get</a> (<a class="code" href="infcmd_8c.html#a428c5be9ce5e70bd03760e828e19c6b7">inferior_ptid</a>, regnum);
<a name="l00324"></a>00324 }
<a name="l00325"></a>00325 
<a name="l00326"></a>00326 <span class="comment">/* Return the inferior&#39;s DR7 debug control register.  */</span>
<a name="l00327"></a>00327 
<a name="l00328"></a>00328 <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>
<a name="l00329"></a><a class="code" href="amd64-linux-nat_8c.html#a1d680867d308c48c005fe7a7017c0793">00329</a> <a class="code" href="amd64-linux-nat_8c.html#a1d680867d308c48c005fe7a7017c0793">amd64_linux_dr_get_control</a> (<span class="keywordtype">void</span>)
<a name="l00330"></a>00330 {
<a name="l00331"></a>00331   <span class="keywordflow">return</span> <a class="code" href="amd64-linux-nat_8c.html#a382fafb7a473662799bfd44b19f67d15">amd64_linux_dr_get</a> (<a class="code" href="infcmd_8c.html#a428c5be9ce5e70bd03760e828e19c6b7">inferior_ptid</a>, <a class="code" href="i386-nat_8h.html#af46fba7c959c6a0f1a22058636e8e772">DR_CONTROL</a>);
<a name="l00332"></a>00332 }
<a name="l00333"></a>00333 
<a name="l00334"></a>00334 <span class="comment">/* Get DR_STATUS from only the one LWP of INFERIOR_PTID.  */</span>
<a name="l00335"></a>00335 
<a name="l00336"></a>00336 <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>
<a name="l00337"></a><a class="code" href="amd64-linux-nat_8c.html#aae5f64f3672a2a7fcdc4da5bb9b7c1cf">00337</a> <a class="code" href="amd64-linux-nat_8c.html#aae5f64f3672a2a7fcdc4da5bb9b7c1cf">amd64_linux_dr_get_status</a> (<span class="keywordtype">void</span>)
<a name="l00338"></a>00338 {
<a name="l00339"></a>00339   <span class="keywordflow">return</span> <a class="code" href="amd64-linux-nat_8c.html#a382fafb7a473662799bfd44b19f67d15">amd64_linux_dr_get</a> (<a class="code" href="infcmd_8c.html#a428c5be9ce5e70bd03760e828e19c6b7">inferior_ptid</a>, <a class="code" href="i386-nat_8h.html#a2a9105f6dea198671e64e62a287d9a73">DR_STATUS</a>);
<a name="l00340"></a>00340 }
<a name="l00341"></a>00341 
<a name="l00342"></a>00342 <span class="comment">/* Callback for iterate_over_lwps.  Update the debug registers of</span>
<a name="l00343"></a>00343 <span class="comment">   LWP.  */</span>
<a name="l00344"></a>00344 
<a name="l00345"></a>00345 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00346"></a><a class="code" href="amd64-linux-nat_8c.html#a752c8131b704b62f89a2fce24dfb9c81">00346</a> <a class="code" href="amd64-linux-nat_8c.html#a752c8131b704b62f89a2fce24dfb9c81">update_debug_registers_callback</a> (<span class="keyword">struct</span> <a class="code" href="structlwp__info.html">lwp_info</a> *lwp, <span class="keywordtype">void</span> *arg)
<a name="l00347"></a>00347 {
<a name="l00348"></a>00348   <span class="keywordflow">if</span> (lwp-&gt;<a class="code" href="structlwp__info.html#ad17b082d79a4a4216b38bec2ad2357eb">arch_private</a> == NULL)
<a name="l00349"></a>00349     lwp-&gt;<a class="code" href="structlwp__info.html#ad17b082d79a4a4216b38bec2ad2357eb">arch_private</a> = XCNEW (<span class="keyword">struct</span> <a class="code" href="structarch__lwp__info.html">arch_lwp_info</a>);
<a name="l00350"></a>00350 
<a name="l00351"></a>00351   <span class="comment">/* The actual update is done later just before resuming the lwp, we</span>
<a name="l00352"></a>00352 <span class="comment">     just mark that the registers need updating.  */</span>
<a name="l00353"></a>00353   lwp-&gt;<a class="code" href="structlwp__info.html#ad17b082d79a4a4216b38bec2ad2357eb">arch_private</a>-&gt;<a class="code" href="structarch__lwp__info.html#a0a7d4fe384d357e3f731a291942db228">debug_registers_changed</a> = 1;
<a name="l00354"></a>00354 
<a name="l00355"></a>00355   <span class="comment">/* If the lwp isn&#39;t stopped, force it to momentarily pause, so we</span>
<a name="l00356"></a>00356 <span class="comment">     can update its debug registers.  */</span>
<a name="l00357"></a>00357   <span class="keywordflow">if</span> (!lwp-&gt;<a class="code" href="structlwp__info.html#a8b51de0f6db2790336402296bbda3176">stopped</a>)
<a name="l00358"></a>00358     <a class="code" href="linux-nat_8c.html#a0f17fd0559cc3fe74be859a824c5a09a">linux_stop_lwp</a> (lwp);
<a name="l00359"></a>00359 
<a name="l00360"></a>00360   <span class="comment">/* Continue the iteration.  */</span>
<a name="l00361"></a>00361   <span class="keywordflow">return</span> 0;
<a name="l00362"></a>00362 }
<a name="l00363"></a>00363 
<a name="l00364"></a>00364 <span class="comment">/* Set DR_CONTROL to CONTROL in all LWPs of the current inferior.  */</span>
<a name="l00365"></a>00365 
<a name="l00366"></a>00366 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00367"></a><a class="code" href="amd64-linux-nat_8c.html#a4ddb1ba63fe9d6f502ea0a0eea02b75e">00367</a> <a class="code" href="amd64-linux-nat_8c.html#a4ddb1ba63fe9d6f502ea0a0eea02b75e">amd64_linux_dr_set_control</a> (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> control)
<a name="l00368"></a>00368 {
<a name="l00369"></a>00369   <a class="code" href="structptid.html">ptid_t</a> pid_ptid = <a class="code" href="ptid_8c.html#a41fa537798e02ba25c7980a7c1e46272">pid_to_ptid</a> (<a class="code" href="ptid_8c.html#a264ba40fc2a0cf3d4fb24a55fe32aede">ptid_get_pid</a> (<a class="code" href="infcmd_8c.html#a428c5be9ce5e70bd03760e828e19c6b7">inferior_ptid</a>));
<a name="l00370"></a>00370 
<a name="l00371"></a>00371   <a class="code" href="linux-nat_8c.html#af50f1b9aeccfc5c133f8e4a427be2f7f">iterate_over_lwps</a> (pid_ptid, <a class="code" href="amd64-linux-nat_8c.html#a752c8131b704b62f89a2fce24dfb9c81">update_debug_registers_callback</a>, NULL);
<a name="l00372"></a>00372 }
<a name="l00373"></a>00373 
<a name="l00374"></a>00374 <span class="comment">/* Set address REGNUM (zero based) to ADDR in all LWPs of the current</span>
<a name="l00375"></a>00375 <span class="comment">   inferior.  */</span>
<a name="l00376"></a>00376 
<a name="l00377"></a>00377 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00378"></a><a class="code" href="amd64-linux-nat_8c.html#a281ce2ea56f469c7f75b3f6c292b8d2a">00378</a> <a class="code" href="amd64-linux-nat_8c.html#a281ce2ea56f469c7f75b3f6c292b8d2a">amd64_linux_dr_set_addr</a> (<span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> addr)
<a name="l00379"></a>00379 {
<a name="l00380"></a>00380   <a class="code" href="structptid.html">ptid_t</a> pid_ptid = <a class="code" href="ptid_8c.html#a41fa537798e02ba25c7980a7c1e46272">pid_to_ptid</a> (<a class="code" href="ptid_8c.html#a264ba40fc2a0cf3d4fb24a55fe32aede">ptid_get_pid</a> (<a class="code" href="infcmd_8c.html#a428c5be9ce5e70bd03760e828e19c6b7">inferior_ptid</a>));
<a name="l00381"></a>00381 
<a name="l00382"></a>00382   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (regnum &gt;= 0 &amp;&amp; regnum &lt;= <a class="code" href="i386-nat_8h.html#ac7d6755ef1a417c06bb364601e1abd52">DR_LASTADDR</a> - <a class="code" href="i386-nat_8h.html#a75642b9691c9eba1a90fee019af13c00">DR_FIRSTADDR</a>);
<a name="l00383"></a>00383 
<a name="l00384"></a>00384   <a class="code" href="linux-nat_8c.html#af50f1b9aeccfc5c133f8e4a427be2f7f">iterate_over_lwps</a> (pid_ptid, <a class="code" href="amd64-linux-nat_8c.html#a752c8131b704b62f89a2fce24dfb9c81">update_debug_registers_callback</a>, NULL);
<a name="l00385"></a>00385 }
<a name="l00386"></a>00386 
<a name="l00387"></a>00387 <span class="comment">/* Called when resuming a thread.</span>
<a name="l00388"></a>00388 <span class="comment">   If the debug regs have changed, update the thread&#39;s copies.  */</span>
<a name="l00389"></a>00389 
<a name="l00390"></a>00390 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00391"></a><a class="code" href="amd64-linux-nat_8c.html#a7f694bb28bfb6a7ae8ab1506682d764a">00391</a> <a class="code" href="amd64-linux-nat_8c.html#a7f694bb28bfb6a7ae8ab1506682d764a">amd64_linux_prepare_to_resume</a> (<span class="keyword">struct</span> <a class="code" href="structlwp__info.html">lwp_info</a> *lwp)
<a name="l00392"></a>00392 {
<a name="l00393"></a>00393   <span class="keywordtype">int</span> clear_status = 0;
<a name="l00394"></a>00394 
<a name="l00395"></a>00395   <span class="comment">/* NULL means this is the main thread still going through the shell,</span>
<a name="l00396"></a>00396 <span class="comment">     or, no watchpoint has been set yet.  In that case, there&#39;s</span>
<a name="l00397"></a>00397 <span class="comment">     nothing to do.  */</span>
<a name="l00398"></a>00398   <span class="keywordflow">if</span> (lwp-&gt;<a class="code" href="structlwp__info.html#ad17b082d79a4a4216b38bec2ad2357eb">arch_private</a> == NULL)
<a name="l00399"></a>00399     <span class="keywordflow">return</span>;
<a name="l00400"></a>00400 
<a name="l00401"></a>00401   <span class="keywordflow">if</span> (lwp-&gt;<a class="code" href="structlwp__info.html#ad17b082d79a4a4216b38bec2ad2357eb">arch_private</a>-&gt;<a class="code" href="structarch__lwp__info.html#a0a7d4fe384d357e3f731a291942db228">debug_registers_changed</a>)
<a name="l00402"></a>00402     {
<a name="l00403"></a>00403       <span class="keyword">struct </span><a class="code" href="structi386__debug__reg__state.html">i386_debug_reg_state</a> *state
<a name="l00404"></a>00404         = <a class="code" href="i386-nat_8c.html#a97b8e55a269e64ecd196b8012f385edc">i386_debug_reg_state</a> (<a class="code" href="ptid_8c.html#a264ba40fc2a0cf3d4fb24a55fe32aede">ptid_get_pid</a> (lwp-&gt;<a class="code" href="structlwp__info.html#a03fe78c6e5209aa0ebfdbe4431c529b2">ptid</a>));
<a name="l00405"></a>00405       <span class="keywordtype">int</span> i;
<a name="l00406"></a>00406 
<a name="l00407"></a>00407       <span class="comment">/* On Linux kernel before 2.6.33 commit</span>
<a name="l00408"></a>00408 <span class="comment">         72f674d203cd230426437cdcf7dd6f681dad8b0d</span>
<a name="l00409"></a>00409 <span class="comment">         if you enable a breakpoint by the DR_CONTROL bits you need to have</span>
<a name="l00410"></a>00410 <span class="comment">         already written the corresponding DR_FIRSTADDR...DR_LASTADDR registers.</span>
<a name="l00411"></a>00411 <span class="comment"></span>
<a name="l00412"></a>00412 <span class="comment">         Ensure DR_CONTROL gets written as the very last register here.  */</span>
<a name="l00413"></a>00413 
<a name="l00414"></a>00414       <span class="keywordflow">for</span> (i = <a class="code" href="i386-nat_8h.html#a75642b9691c9eba1a90fee019af13c00">DR_FIRSTADDR</a>; i &lt;= <a class="code" href="i386-nat_8h.html#ac7d6755ef1a417c06bb364601e1abd52">DR_LASTADDR</a>; i++)
<a name="l00415"></a>00415         <span class="keywordflow">if</span> (state-&gt;<a class="code" href="structi386__debug__reg__state.html#a108e1de1548b28dae424b5405d5104cf">dr_ref_count</a>[i] &gt; 0)
<a name="l00416"></a>00416           {
<a name="l00417"></a>00417             <a class="code" href="amd64-linux-nat_8c.html#a3034475d2caf05c935916e0e68c158ce">amd64_linux_dr_set</a> (lwp-&gt;<a class="code" href="structlwp__info.html#a03fe78c6e5209aa0ebfdbe4431c529b2">ptid</a>, i, state-&gt;<a class="code" href="structi386__debug__reg__state.html#affabdc3991af7372fc19cdc809345c42">dr_mirror</a>[i]);
<a name="l00418"></a>00418 
<a name="l00419"></a>00419             <span class="comment">/* If we&#39;re setting a watchpoint, any change the inferior</span>
<a name="l00420"></a>00420 <span class="comment">               had done itself to the debug registers needs to be</span>
<a name="l00421"></a>00421 <span class="comment">               discarded, otherwise, i386_stopped_data_address can get</span>
<a name="l00422"></a>00422 <span class="comment">               confused.  */</span>
<a name="l00423"></a>00423             clear_status = 1;
<a name="l00424"></a>00424           }
<a name="l00425"></a>00425 
<a name="l00426"></a>00426       <a class="code" href="amd64-linux-nat_8c.html#a3034475d2caf05c935916e0e68c158ce">amd64_linux_dr_set</a> (lwp-&gt;<a class="code" href="structlwp__info.html#a03fe78c6e5209aa0ebfdbe4431c529b2">ptid</a>, <a class="code" href="i386-nat_8h.html#af46fba7c959c6a0f1a22058636e8e772">DR_CONTROL</a>, state-&gt;<a class="code" href="structi386__debug__reg__state.html#ac74545637ed256855edf04c497deba55">dr_control_mirror</a>);
<a name="l00427"></a>00427 
<a name="l00428"></a>00428       lwp-&gt;<a class="code" href="structlwp__info.html#ad17b082d79a4a4216b38bec2ad2357eb">arch_private</a>-&gt;<a class="code" href="structarch__lwp__info.html#a0a7d4fe384d357e3f731a291942db228">debug_registers_changed</a> = 0;
<a name="l00429"></a>00429     }
<a name="l00430"></a>00430 
<a name="l00431"></a>00431   <span class="keywordflow">if</span> (clear_status || lwp-&gt;<a class="code" href="structlwp__info.html#a8c614d4fa52a4d8a1093826d421f7735">stopped_by_watchpoint</a>)
<a name="l00432"></a>00432     <a class="code" href="amd64-linux-nat_8c.html#a3034475d2caf05c935916e0e68c158ce">amd64_linux_dr_set</a> (lwp-&gt;<a class="code" href="structlwp__info.html#a03fe78c6e5209aa0ebfdbe4431c529b2">ptid</a>, <a class="code" href="i386-nat_8h.html#a2a9105f6dea198671e64e62a287d9a73">DR_STATUS</a>, 0);
<a name="l00433"></a>00433 }
<a name="l00434"></a>00434 
<a name="l00435"></a>00435 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00436"></a><a class="code" href="amd64-linux-nat_8c.html#abd0e07661df420cd1603fbabfb88f8de">00436</a> <a class="code" href="amd64-linux-nat_8c.html#abd0e07661df420cd1603fbabfb88f8de">amd64_linux_new_thread</a> (<span class="keyword">struct</span> <a class="code" href="structlwp__info.html">lwp_info</a> *lp)
<a name="l00437"></a>00437 {
<a name="l00438"></a>00438   <span class="keyword">struct </span><a class="code" href="structarch__lwp__info.html">arch_lwp_info</a> *info = XCNEW (<span class="keyword">struct</span> <a class="code" href="structarch__lwp__info.html">arch_lwp_info</a>);
<a name="l00439"></a>00439 
<a name="l00440"></a>00440   info-&gt;<a class="code" href="structarch__lwp__info.html#a0a7d4fe384d357e3f731a291942db228">debug_registers_changed</a> = 1;
<a name="l00441"></a>00441 
<a name="l00442"></a>00442   lp-&gt;<a class="code" href="structlwp__info.html#ad17b082d79a4a4216b38bec2ad2357eb">arch_private</a> = info;
<a name="l00443"></a>00443 }
<a name="l00444"></a>00444 
<a name="l00445"></a>00445 <span class="comment">/* linux_nat_new_fork hook.   */</span>
<a name="l00446"></a>00446 
<a name="l00447"></a>00447 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00448"></a><a class="code" href="amd64-linux-nat_8c.html#ad7fc2e89e30deef4725cd7d8bf62282b">00448</a> <a class="code" href="amd64-linux-nat_8c.html#ad7fc2e89e30deef4725cd7d8bf62282b">amd64_linux_new_fork</a> (<span class="keyword">struct</span> <a class="code" href="structlwp__info.html">lwp_info</a> *parent, pid_t child_pid)
<a name="l00449"></a>00449 {
<a name="l00450"></a>00450   pid_t parent_pid;
<a name="l00451"></a>00451   <span class="keyword">struct </span><a class="code" href="structi386__debug__reg__state.html">i386_debug_reg_state</a> *parent_state;
<a name="l00452"></a>00452   <span class="keyword">struct </span><a class="code" href="structi386__debug__reg__state.html">i386_debug_reg_state</a> *child_state;
<a name="l00453"></a>00453 
<a name="l00454"></a>00454   <span class="comment">/* NULL means no watchpoint has ever been set in the parent.  In</span>
<a name="l00455"></a>00455 <span class="comment">     that case, there&#39;s nothing to do.  */</span>
<a name="l00456"></a>00456   <span class="keywordflow">if</span> (parent-&gt;<a class="code" href="structlwp__info.html#ad17b082d79a4a4216b38bec2ad2357eb">arch_private</a> == NULL)
<a name="l00457"></a>00457     <span class="keywordflow">return</span>;
<a name="l00458"></a>00458 
<a name="l00459"></a>00459   <span class="comment">/* Linux kernel before 2.6.33 commit</span>
<a name="l00460"></a>00460 <span class="comment">     72f674d203cd230426437cdcf7dd6f681dad8b0d</span>
<a name="l00461"></a>00461 <span class="comment">     will inherit hardware debug registers from parent</span>
<a name="l00462"></a>00462 <span class="comment">     on fork/vfork/clone.  Newer Linux kernels create such tasks with</span>
<a name="l00463"></a>00463 <span class="comment">     zeroed debug registers.</span>
<a name="l00464"></a>00464 <span class="comment"></span>
<a name="l00465"></a>00465 <span class="comment">     GDB core assumes the child inherits the watchpoints/hw</span>
<a name="l00466"></a>00466 <span class="comment">     breakpoints of the parent, and will remove them all from the</span>
<a name="l00467"></a>00467 <span class="comment">     forked off process.  Copy the debug registers mirrors into the</span>
<a name="l00468"></a>00468 <span class="comment">     new process so that all breakpoints and watchpoints can be</span>
<a name="l00469"></a>00469 <span class="comment">     removed together.  The debug registers mirror will become zeroed</span>
<a name="l00470"></a>00470 <span class="comment">     in the end before detaching the forked off process, thus making</span>
<a name="l00471"></a>00471 <span class="comment">     this compatible with older Linux kernels too.  */</span>
<a name="l00472"></a>00472 
<a name="l00473"></a>00473   parent_pid = <a class="code" href="ptid_8c.html#a264ba40fc2a0cf3d4fb24a55fe32aede">ptid_get_pid</a> (parent-&gt;<a class="code" href="structlwp__info.html#a03fe78c6e5209aa0ebfdbe4431c529b2">ptid</a>);
<a name="l00474"></a>00474   parent_state = <a class="code" href="i386-nat_8c.html#a97b8e55a269e64ecd196b8012f385edc">i386_debug_reg_state</a> (parent_pid);
<a name="l00475"></a>00475   child_state = <a class="code" href="i386-nat_8c.html#a97b8e55a269e64ecd196b8012f385edc">i386_debug_reg_state</a> (child_pid);
<a name="l00476"></a>00476   *child_state = *parent_state;
<a name="l00477"></a>00477 }
<a name="l00478"></a>00478 
<a name="l00479"></a>00479 
<a name="l00480"></a>00480 
<a name="l00481"></a>00481 <span class="comment">/* This function is called by libthread_db as part of its handling of</span>
<a name="l00482"></a>00482 <span class="comment">   a request for a thread&#39;s local storage address.  */</span>
<a name="l00483"></a>00483 
<a name="l00484"></a>00484 <a class="code" href="gdb__proc__service_8h.html#a6e7ca191f6aa7c32a4ada70ec9da4777">ps_err_e</a>
<a name="l00485"></a><a class="code" href="amd64-linux-nat_8c.html#abe62071478ea86abb338d3e9e74c1d83">00485</a> <a class="code" href="aarch64-linux-nat_8c.html#abe62071478ea86abb338d3e9e74c1d83">ps_get_thread_area</a> (<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structps__prochandle.html">ps_prochandle</a> *ph,
<a name="l00486"></a>00486                     <a class="code" href="gdb__proc__service_8h.html#ae0e8cfc4f21539a5c5b572c239bb8112">lwpid_t</a> lwpid, <span class="keywordtype">int</span> idx, <span class="keywordtype">void</span> **base)
<a name="l00487"></a>00487 {
<a name="l00488"></a>00488   <span class="keywordflow">if</span> (<a class="code" href="gdbarch_8c.html#a305465885963fbf0fb5a7543594a7bff">gdbarch_bfd_arch_info</a> (<a class="code" href="gdbarch_8c.html#ad648a33f69abe34e9679744a0c5a0580">target_gdbarch</a> ())-&gt;bits_per_word == 32)
<a name="l00489"></a>00489     {
<a name="l00490"></a>00490       <span class="comment">/* The full structure is found in &lt;asm-i386/ldt.h&gt;.  The second</span>
<a name="l00491"></a>00491 <span class="comment">         integer is the LDT&#39;s base_address and that is used to locate</span>
<a name="l00492"></a>00492 <span class="comment">         the thread&#39;s local storage.  See i386-linux-nat.c more</span>
<a name="l00493"></a>00493 <span class="comment">         info.  */</span>
<a name="l00494"></a>00494       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> desc[4];
<a name="l00495"></a>00495 
<a name="l00496"></a>00496       <span class="comment">/* This code assumes that &quot;int&quot; is 32 bits and that</span>
<a name="l00497"></a>00497 <span class="comment">         GET_THREAD_AREA returns no more than 4 int values.  */</span>
<a name="l00498"></a>00498       <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (<span class="keyword">sizeof</span> (<span class="keywordtype">int</span>) == 4);   
<a name="l00499"></a>00499 <span class="preprocessor">#ifndef PTRACE_GET_THREAD_AREA</span>
<a name="l00500"></a>00500 <span class="preprocessor"></span><span class="preprocessor">#define PTRACE_GET_THREAD_AREA 25</span>
<a name="l00501"></a>00501 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00502"></a>00502 <span class="preprocessor"></span>      <span class="keywordflow">if</span>  (<a class="code" href="gdb__ptrace_8h.html#a4513d889d340e4567f2a46a346f9d9e7">ptrace</a> (<a class="code" href="amd64-linux-nat_8c.html#a0c2c8e313cc26d3ae673dcc54f257bf9">PTRACE_GET_THREAD_AREA</a>, 
<a name="l00503"></a>00503                    lwpid, (<span class="keywordtype">void</span> *) (<span class="keywordtype">long</span>) idx, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) &amp;desc) &lt; 0)
<a name="l00504"></a>00504         <span class="keywordflow">return</span> <a class="code" href="gdb__proc__service_8h.html#a6e7ca191f6aa7c32a4ada70ec9da4777addab70dfd82808e0e99f118e3e63e577">PS_ERR</a>;
<a name="l00505"></a>00505       
<a name="l00506"></a>00506       <span class="comment">/* Extend the value to 64 bits.  Here it&#39;s assumed that a &quot;long&quot;</span>
<a name="l00507"></a>00507 <span class="comment">         and a &quot;void *&quot; are the same.  */</span>
<a name="l00508"></a>00508       (*base) = (<span class="keywordtype">void</span> *) (<span class="keywordtype">long</span>) desc[1];
<a name="l00509"></a>00509       <span class="keywordflow">return</span> <a class="code" href="gdb__proc__service_8h.html#a6e7ca191f6aa7c32a4ada70ec9da4777a4d9e1f94202d0062728898d11d1105b1">PS_OK</a>;
<a name="l00510"></a>00510     }
<a name="l00511"></a>00511   <span class="keywordflow">else</span>
<a name="l00512"></a>00512     {
<a name="l00513"></a>00513       <span class="comment">/* This definition comes from prctl.h, but some kernels may not</span>
<a name="l00514"></a>00514 <span class="comment">         have it.  */</span>
<a name="l00515"></a>00515 <span class="preprocessor">#ifndef PTRACE_ARCH_PRCTL</span>
<a name="l00516"></a>00516 <span class="preprocessor"></span><span class="preprocessor">#define PTRACE_ARCH_PRCTL      30</span>
<a name="l00517"></a>00517 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00518"></a>00518 <span class="preprocessor"></span>      <span class="comment">/* FIXME: ezannoni-2003-07-09 see comment above about include</span>
<a name="l00519"></a>00519 <span class="comment">         file order.  We could be getting bogus values for these two.  */</span>
<a name="l00520"></a>00520       <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (FS &lt; <a class="code" href="mips-linux-tdep_8h.html#afb1233037443a7c048dd19b4a84e57b0">ELF_NGREG</a>);
<a name="l00521"></a>00521       <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (GS &lt; <a class="code" href="mips-linux-tdep_8h.html#afb1233037443a7c048dd19b4a84e57b0">ELF_NGREG</a>);
<a name="l00522"></a>00522       <span class="keywordflow">switch</span> (idx)
<a name="l00523"></a>00523         {
<a name="l00524"></a>00524         <span class="keywordflow">case</span> FS:
<a name="l00525"></a>00525 <span class="preprocessor">#ifdef HAVE_STRUCT_USER_REGS_STRUCT_FS_BASE</span>
<a name="l00526"></a>00526 <span class="preprocessor"></span>            {
<a name="l00527"></a>00527               <span class="comment">/* PTRACE_ARCH_PRCTL is obsolete since 2.6.25, where the</span>
<a name="l00528"></a>00528 <span class="comment">                 fs_base and gs_base fields of user_regs_struct can be</span>
<a name="l00529"></a>00529 <span class="comment">                 used directly.  */</span>
<a name="l00530"></a>00530               <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> fs;
<a name="l00531"></a>00531               errno = 0;
<a name="l00532"></a>00532               fs = <a class="code" href="gdb__ptrace_8h.html#a4513d889d340e4567f2a46a346f9d9e7">ptrace</a> (PTRACE_PEEKUSER, lwpid,
<a name="l00533"></a>00533                            offsetof (<span class="keyword">struct</span> user_regs_struct, fs_base), 0);
<a name="l00534"></a>00534               <span class="keywordflow">if</span> (errno == 0)
<a name="l00535"></a>00535                 {
<a name="l00536"></a>00536                   *base = (<span class="keywordtype">void</span> *) fs;
<a name="l00537"></a>00537                   <span class="keywordflow">return</span> <a class="code" href="gdb__proc__service_8h.html#a6e7ca191f6aa7c32a4ada70ec9da4777a4d9e1f94202d0062728898d11d1105b1">PS_OK</a>;
<a name="l00538"></a>00538                 }
<a name="l00539"></a>00539             }
<a name="l00540"></a>00540 <span class="preprocessor">#endif</span>
<a name="l00541"></a>00541 <span class="preprocessor"></span>          <span class="keywordflow">if</span> (<a class="code" href="gdb__ptrace_8h.html#a4513d889d340e4567f2a46a346f9d9e7">ptrace</a> (<a class="code" href="amd64-linux-nat_8c.html#a5a07259c9adc0493ff23b766fa779fa5">PTRACE_ARCH_PRCTL</a>, lwpid, base, ARCH_GET_FS) == 0)
<a name="l00542"></a>00542             <span class="keywordflow">return</span> <a class="code" href="gdb__proc__service_8h.html#a6e7ca191f6aa7c32a4ada70ec9da4777a4d9e1f94202d0062728898d11d1105b1">PS_OK</a>;
<a name="l00543"></a>00543           <span class="keywordflow">break</span>;
<a name="l00544"></a>00544         <span class="keywordflow">case</span> GS:
<a name="l00545"></a>00545 <span class="preprocessor">#ifdef HAVE_STRUCT_USER_REGS_STRUCT_GS_BASE</span>
<a name="l00546"></a>00546 <span class="preprocessor"></span>            {
<a name="l00547"></a>00547               <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> gs;
<a name="l00548"></a>00548               errno = 0;
<a name="l00549"></a>00549               gs = <a class="code" href="gdb__ptrace_8h.html#a4513d889d340e4567f2a46a346f9d9e7">ptrace</a> (PTRACE_PEEKUSER, lwpid,
<a name="l00550"></a>00550                            offsetof (<span class="keyword">struct</span> user_regs_struct, gs_base), 0);
<a name="l00551"></a>00551               <span class="keywordflow">if</span> (errno == 0)
<a name="l00552"></a>00552                 {
<a name="l00553"></a>00553                   *base = (<span class="keywordtype">void</span> *) gs;
<a name="l00554"></a>00554                   <span class="keywordflow">return</span> <a class="code" href="gdb__proc__service_8h.html#a6e7ca191f6aa7c32a4ada70ec9da4777a4d9e1f94202d0062728898d11d1105b1">PS_OK</a>;
<a name="l00555"></a>00555                 }
<a name="l00556"></a>00556             }
<a name="l00557"></a>00557 <span class="preprocessor">#endif</span>
<a name="l00558"></a>00558 <span class="preprocessor"></span>          <span class="keywordflow">if</span> (<a class="code" href="gdb__ptrace_8h.html#a4513d889d340e4567f2a46a346f9d9e7">ptrace</a> (<a class="code" href="amd64-linux-nat_8c.html#a5a07259c9adc0493ff23b766fa779fa5">PTRACE_ARCH_PRCTL</a>, lwpid, base, ARCH_GET_GS) == 0)
<a name="l00559"></a>00559             <span class="keywordflow">return</span> <a class="code" href="gdb__proc__service_8h.html#a6e7ca191f6aa7c32a4ada70ec9da4777a4d9e1f94202d0062728898d11d1105b1">PS_OK</a>;
<a name="l00560"></a>00560           <span class="keywordflow">break</span>;
<a name="l00561"></a>00561         <span class="keywordflow">default</span>:                   <span class="comment">/* Should not happen.  */</span>
<a name="l00562"></a>00562           <span class="keywordflow">return</span> <a class="code" href="gdb__proc__service_8h.html#a6e7ca191f6aa7c32a4ada70ec9da4777afa7788183e6e4f1c60f81197d27db49d">PS_BADADDR</a>;
<a name="l00563"></a>00563         }
<a name="l00564"></a>00564     }
<a name="l00565"></a>00565   <span class="keywordflow">return</span> <a class="code" href="gdb__proc__service_8h.html#a6e7ca191f6aa7c32a4ada70ec9da4777addab70dfd82808e0e99f118e3e63e577">PS_ERR</a>;               <span class="comment">/* ptrace failed.  */</span>
<a name="l00566"></a>00566 }
<a name="l00567"></a>00567 
<a name="l00568"></a>00568 
<a name="l00569"></a><a class="code" href="amd64-linux-nat_8c.html#ad1116fe80205070a65d08c3dd62d1176">00569</a> <span class="keyword">static</span> void (*<a class="code" href="amd64-linux-nat_8c.html#ad1116fe80205070a65d08c3dd62d1176">super_post_startup_inferior</a>) (<a class="code" href="structptid.html">ptid_t</a> <a class="code" href="structptid.html">ptid</a>);
<a name="l00570"></a>00570 
<a name="l00571"></a>00571 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00572"></a><a class="code" href="amd64-linux-nat_8c.html#a9d31c9b0277779630cbb33cbed3de325">00572</a> <a class="code" href="amd64-linux-nat_8c.html#a9d31c9b0277779630cbb33cbed3de325">amd64_linux_child_post_startup_inferior</a> (<a class="code" href="structptid.html">ptid_t</a> <a class="code" href="structptid.html">ptid</a>)
<a name="l00573"></a>00573 {
<a name="l00574"></a>00574   <a class="code" href="i386-nat_8c.html#a55ef13f5cfcc7a09121f23b251a3cbbf">i386_cleanup_dregs</a> ();
<a name="l00575"></a>00575   <a class="code" href="amd64-linux-nat_8c.html#ad1116fe80205070a65d08c3dd62d1176">super_post_startup_inferior</a> (ptid);
<a name="l00576"></a>00576 }
<a name="l00577"></a>00577 
<a name="l00578"></a>00578 
<a name="l00579"></a>00579 <span class="comment">/* When GDB is built as a 64-bit application on linux, the</span>
<a name="l00580"></a>00580 <span class="comment">   PTRACE_GETSIGINFO data is always presented in 64-bit layout.  Since</span>
<a name="l00581"></a>00581 <span class="comment">   debugging a 32-bit inferior with a 64-bit GDB should look the same</span>
<a name="l00582"></a>00582 <span class="comment">   as debugging it with a 32-bit GDB, we do the 32-bit &lt;-&gt; 64-bit</span>
<a name="l00583"></a>00583 <span class="comment">   conversion in-place ourselves.  */</span>
<a name="l00584"></a>00584 
<a name="l00585"></a>00585 <span class="comment">/* These types below (compat_*) define a siginfo type that is layout</span>
<a name="l00586"></a>00586 <span class="comment">   compatible with the siginfo type exported by the 32-bit userspace</span>
<a name="l00587"></a>00587 <span class="comment">   support.  */</span>
<a name="l00588"></a>00588 
<a name="l00589"></a><a class="code" href="amd64-linux-nat_8c.html#a806d9e0392177a537c4d872075de6e86">00589</a> <span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="amd64-linux-nat_8c.html#a806d9e0392177a537c4d872075de6e86">compat_int_t</a>;
<a name="l00590"></a><a class="code" href="amd64-linux-nat_8c.html#aa147c4b9945330f3814d9d7f9c6ee7e1">00590</a> <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="amd64-linux-nat_8c.html#aa147c4b9945330f3814d9d7f9c6ee7e1">compat_uptr_t</a>;
<a name="l00591"></a>00591 
<a name="l00592"></a><a class="code" href="amd64-linux-nat_8c.html#a0208b466978174843f6a5a08b2124556">00592</a> <span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="amd64-linux-nat_8c.html#a0208b466978174843f6a5a08b2124556">compat_time_t</a>;
<a name="l00593"></a><a class="code" href="amd64-linux-nat_8c.html#ad4a92347af67da8042e37b91d1a25ee4">00593</a> <span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="amd64-linux-nat_8c.html#ad4a92347af67da8042e37b91d1a25ee4">compat_timer_t</a>;
<a name="l00594"></a><a class="code" href="amd64-linux-nat_8c.html#a0be79f536bba56eac8e5e06203705ed9">00594</a> <span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="amd64-linux-nat_8c.html#a0be79f536bba56eac8e5e06203705ed9">compat_clock_t</a>;
<a name="l00595"></a>00595 
<a name="l00596"></a><a class="code" href="structcompat__timeval.html">00596</a> <span class="keyword">struct </span><a class="code" href="structcompat__timeval.html">compat_timeval</a>
<a name="l00597"></a>00597 {
<a name="l00598"></a><a class="code" href="structcompat__timeval.html#a5f22a874e70407439743272914ccb643">00598</a>   <a class="code" href="amd64-linux-nat_8c.html#a0208b466978174843f6a5a08b2124556">compat_time_t</a> <a class="code" href="structcompat__timeval.html#a5f22a874e70407439743272914ccb643">tv_sec</a>;
<a name="l00599"></a><a class="code" href="structcompat__timeval.html#ad18153f4cd753388774bf23108b455e4">00599</a>   <span class="keywordtype">int</span> <a class="code" href="structcompat__timeval.html#ad18153f4cd753388774bf23108b455e4">tv_usec</a>;
<a name="l00600"></a>00600 };
<a name="l00601"></a>00601 
<a name="l00602"></a><a class="code" href="unioncompat__sigval.html">00602</a> <span class="keyword">typedef</span> <span class="keyword">union </span><a class="code" href="unioncompat__sigval.html">compat_sigval</a>
<a name="l00603"></a>00603 {
<a name="l00604"></a><a class="code" href="unioncompat__sigval.html#aacf1d0bcd171a4cf7aad95a772be4b3b">00604</a>   <a class="code" href="amd64-linux-nat_8c.html#a806d9e0392177a537c4d872075de6e86">compat_int_t</a> <a class="code" href="unioncompat__sigval.html#aacf1d0bcd171a4cf7aad95a772be4b3b">sival_int</a>;
<a name="l00605"></a><a class="code" href="unioncompat__sigval.html#ac6550398b82997cee16702472eb9499b">00605</a>   <a class="code" href="amd64-linux-nat_8c.html#aa147c4b9945330f3814d9d7f9c6ee7e1">compat_uptr_t</a> <a class="code" href="unioncompat__sigval.html#ac6550398b82997cee16702472eb9499b">sival_ptr</a>;
<a name="l00606"></a>00606 } <a class="code" href="amd64-linux-nat_8c.html#abf3f6a32a6c3fb19df041b0b18b4e5ad">compat_sigval_t</a>;
<a name="l00607"></a>00607 
<a name="l00608"></a><a class="code" href="structcompat__siginfo.html">00608</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structcompat__siginfo.html">compat_siginfo</a>
<a name="l00609"></a>00609 {
<a name="l00610"></a><a class="code" href="structcompat__siginfo.html#a1cfda75f31c7a17c6332dff2d5b07dea">00610</a>   <span class="keywordtype">int</span> <a class="code" href="structcompat__siginfo.html#a1cfda75f31c7a17c6332dff2d5b07dea">si_signo</a>;
<a name="l00611"></a><a class="code" href="structcompat__siginfo.html#afdc79ddc9af47192f198c31c7118c4f7">00611</a>   <span class="keywordtype">int</span> <a class="code" href="structcompat__siginfo.html#afdc79ddc9af47192f198c31c7118c4f7">si_errno</a>;
<a name="l00612"></a><a class="code" href="structcompat__siginfo.html#a837d67ba0044a9a24df74fe2d07fcb46">00612</a>   <span class="keywordtype">int</span> <a class="code" href="structcompat__siginfo.html#a837d67ba0044a9a24df74fe2d07fcb46">si_code</a>;
<a name="l00613"></a>00613 
<a name="l00614"></a>00614   <span class="keyword">union</span>
<a name="l00615"></a>00615   {
<a name="l00616"></a><a class="code" href="structcompat__siginfo.html#a0801c99074e093cfb70d8681eff9322c">00616</a>     <span class="keywordtype">int</span> <a class="code" href="structcompat__siginfo.html#a0801c99074e093cfb70d8681eff9322c">_pad</a>[((128 / <span class="keyword">sizeof</span> (<a class="code" href="command_8h.html#a74f207b5aa4ba51c3a2ad59b219a423b">int</a>)) - 3)];
<a name="l00617"></a>00617 
<a name="l00618"></a>00618     <span class="comment">/* kill() */</span>
<a name="l00619"></a>00619     <span class="keyword">struct</span>
<a name="l00620"></a>00620     {
<a name="l00621"></a><a class="code" href="structcompat__siginfo.html#a47dacd6c318aa26ee13ca9f7a3392e62">00621</a>       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structcompat__siginfo.html#a47dacd6c318aa26ee13ca9f7a3392e62">_pid</a>;
<a name="l00622"></a><a class="code" href="structcompat__siginfo.html#aa0457a575255e3fb09cc116db3f85be3">00622</a>       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structcompat__siginfo.html#aa0457a575255e3fb09cc116db3f85be3">_uid</a>;
<a name="l00623"></a>00623     } <a class="code" href="structcompat__siginfo.html#af456dfcd4f48ab175ab0c13fa522db9d">_kill</a>;
<a name="l00624"></a>00624 
<a name="l00625"></a>00625     <span class="comment">/* POSIX.1b timers */</span>
<a name="l00626"></a>00626     <span class="keyword">struct</span>
<a name="l00627"></a>00627     {
<a name="l00628"></a><a class="code" href="structcompat__siginfo.html#a3ea63fb600949e5b698f6f85bd52c160">00628</a>       <a class="code" href="amd64-linux-nat_8c.html#ad4a92347af67da8042e37b91d1a25ee4">compat_timer_t</a> <a class="code" href="structcompat__siginfo.html#a3ea63fb600949e5b698f6f85bd52c160">_tid</a>;
<a name="l00629"></a><a class="code" href="structcompat__siginfo.html#a24152ec4682bf3805cb65c92a94d549b">00629</a>       <span class="keywordtype">int</span> <a class="code" href="structcompat__siginfo.html#a24152ec4682bf3805cb65c92a94d549b">_overrun</a>;
<a name="l00630"></a><a class="code" href="structcompat__siginfo.html#a15edcff788f112ff72bd1cd5da6b5c89">00630</a>       <a class="code" href="unioncompat__sigval.html">compat_sigval_t</a> <a class="code" href="structcompat__siginfo.html#a15edcff788f112ff72bd1cd5da6b5c89">_sigval</a>;
<a name="l00631"></a>00631     } <a class="code" href="structcompat__siginfo.html#a3a0e0d88e62bea66bc678a30cb2516fa">_timer</a>;
<a name="l00632"></a>00632 
<a name="l00633"></a>00633     <span class="comment">/* POSIX.1b signals */</span>
<a name="l00634"></a>00634     <span class="keyword">struct</span>
<a name="l00635"></a>00635     {
<a name="l00636"></a>00636       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structcompat__siginfo.html#a47dacd6c318aa26ee13ca9f7a3392e62">_pid</a>;
<a name="l00637"></a>00637       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structcompat__siginfo.html#aa0457a575255e3fb09cc116db3f85be3">_uid</a>;
<a name="l00638"></a>00638       <a class="code" href="unioncompat__sigval.html">compat_sigval_t</a> <a class="code" href="structcompat__siginfo.html#a15edcff788f112ff72bd1cd5da6b5c89">_sigval</a>;
<a name="l00639"></a>00639     } <a class="code" href="structcompat__siginfo.html#a3c4785814d7e9e961f7420c3af35a273">_rt</a>;
<a name="l00640"></a>00640 
<a name="l00641"></a>00641     <span class="comment">/* SIGCHLD */</span>
<a name="l00642"></a>00642     <span class="keyword">struct</span>
<a name="l00643"></a>00643     {
<a name="l00644"></a>00644       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structcompat__siginfo.html#a47dacd6c318aa26ee13ca9f7a3392e62">_pid</a>;
<a name="l00645"></a>00645       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structcompat__siginfo.html#aa0457a575255e3fb09cc116db3f85be3">_uid</a>;
<a name="l00646"></a><a class="code" href="structcompat__siginfo.html#af23bb34a75315c26a415cfb828d3ce05">00646</a>       <span class="keywordtype">int</span> <a class="code" href="structcompat__siginfo.html#af23bb34a75315c26a415cfb828d3ce05">_status</a>;
<a name="l00647"></a><a class="code" href="structcompat__siginfo.html#aecde55a3df86098b101aea5d8861fb0a">00647</a>       <a class="code" href="amd64-linux-nat_8c.html#a0be79f536bba56eac8e5e06203705ed9">compat_clock_t</a> <a class="code" href="structcompat__siginfo.html#aecde55a3df86098b101aea5d8861fb0a">_utime</a>;
<a name="l00648"></a><a class="code" href="structcompat__siginfo.html#ab7c5693bb8d45ca824e7853513949efb">00648</a>       <a class="code" href="amd64-linux-nat_8c.html#a0be79f536bba56eac8e5e06203705ed9">compat_clock_t</a> <a class="code" href="structcompat__siginfo.html#ab7c5693bb8d45ca824e7853513949efb">_stime</a>;
<a name="l00649"></a>00649     } <a class="code" href="structcompat__siginfo.html#aa3102417f58971a157cf07c7c2ceb6ca">_sigchld</a>;
<a name="l00650"></a>00650 
<a name="l00651"></a>00651     <span class="comment">/* SIGILL, SIGFPE, SIGSEGV, SIGBUS */</span>
<a name="l00652"></a>00652     <span class="keyword">struct</span>
<a name="l00653"></a>00653     {
<a name="l00654"></a><a class="code" href="structcompat__siginfo.html#ae44baa9ced028ec5d2058c2010f9001e">00654</a>       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structcompat__siginfo.html#ae44baa9ced028ec5d2058c2010f9001e">_addr</a>;
<a name="l00655"></a>00655     } <a class="code" href="structcompat__siginfo.html#a3a34f408d29a8680fb89878b2bb2027d">_sigfault</a>;
<a name="l00656"></a>00656 
<a name="l00657"></a>00657     <span class="comment">/* SIGPOLL */</span>
<a name="l00658"></a>00658     <span class="keyword">struct</span>
<a name="l00659"></a>00659     {
<a name="l00660"></a><a class="code" href="structcompat__siginfo.html#a92da68d9aa7fdf87e588d37d622f6688">00660</a>       <span class="keywordtype">int</span> <a class="code" href="structcompat__siginfo.html#a92da68d9aa7fdf87e588d37d622f6688">_band</a>;
<a name="l00661"></a><a class="code" href="structcompat__siginfo.html#a8e09aea4e3064c86d7ee17bbacb1f053">00661</a>       <span class="keywordtype">int</span> <a class="code" href="structcompat__siginfo.html#a8e09aea4e3064c86d7ee17bbacb1f053">_fd</a>;
<a name="l00662"></a>00662     } <a class="code" href="structcompat__siginfo.html#a4aaaccf603c2832f25a27309dfd6543d">_sigpoll</a>;
<a name="l00663"></a>00663   } <a class="code" href="structcompat__siginfo.html#abb34bb8b318a97ecce876cc49929d1c6">_sifields</a>;
<a name="l00664"></a>00664 } <a class="code" href="amd64-linux-nat_8c.html#a20666ccaadf9fe343399db8f4b36110e">compat_siginfo_t</a>;
<a name="l00665"></a>00665 
<a name="l00666"></a>00666 <span class="comment">/* For x32, clock_t in _sigchld is 64bit aligned at 4 bytes.  */</span>
<a name="l00667"></a><a class="code" href="structcompat__x32__clock.html">00667</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structcompat__x32__clock.html">compat_x32_clock</a>
<a name="l00668"></a>00668 {
<a name="l00669"></a><a class="code" href="structcompat__x32__clock.html#ab8a692589801e75ed31fabab980b9c44">00669</a>   <span class="keywordtype">int</span> <a class="code" href="structcompat__x32__clock.html#ab8a692589801e75ed31fabab980b9c44">lower</a>;
<a name="l00670"></a><a class="code" href="structcompat__x32__clock.html#af07dea82a4042c4f64a5e3197df968ee">00670</a>   <span class="keywordtype">int</span> <a class="code" href="structcompat__x32__clock.html#af07dea82a4042c4f64a5e3197df968ee">upper</a>;
<a name="l00671"></a>00671 } <a class="code" href="amd64-linux-nat_8c.html#a548aff3c8a7245e11dc7802303aba5c4">compat_x32_clock_t</a>;
<a name="l00672"></a>00672 
<a name="l00673"></a><a class="code" href="structcompat__x32__siginfo.html">00673</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structcompat__x32__siginfo.html">compat_x32_siginfo</a>
<a name="l00674"></a>00674 {
<a name="l00675"></a><a class="code" href="structcompat__x32__siginfo.html#a8d330361e4164ef03145f28c15b71334">00675</a>   <span class="keywordtype">int</span> <a class="code" href="structcompat__x32__siginfo.html#a8d330361e4164ef03145f28c15b71334">si_signo</a>;
<a name="l00676"></a><a class="code" href="structcompat__x32__siginfo.html#a5b8d99c96a7ff4815eac2beeb22f195a">00676</a>   <span class="keywordtype">int</span> <a class="code" href="structcompat__x32__siginfo.html#a5b8d99c96a7ff4815eac2beeb22f195a">si_errno</a>;
<a name="l00677"></a><a class="code" href="structcompat__x32__siginfo.html#a3bf6877bb343b505a74d8c69d7eeef35">00677</a>   <span class="keywordtype">int</span> <a class="code" href="structcompat__x32__siginfo.html#a3bf6877bb343b505a74d8c69d7eeef35">si_code</a>;
<a name="l00678"></a>00678 
<a name="l00679"></a>00679   <span class="keyword">union</span>
<a name="l00680"></a>00680   {
<a name="l00681"></a><a class="code" href="structcompat__x32__siginfo.html#adaa71280c0bc811584c8988262ada977">00681</a>     <span class="keywordtype">int</span> <a class="code" href="structcompat__x32__siginfo.html#adaa71280c0bc811584c8988262ada977">_pad</a>[((128 / <span class="keyword">sizeof</span> (<a class="code" href="command_8h.html#a74f207b5aa4ba51c3a2ad59b219a423b">int</a>)) - 3)];
<a name="l00682"></a>00682 
<a name="l00683"></a>00683     <span class="comment">/* kill() */</span>
<a name="l00684"></a>00684     <span class="keyword">struct</span>
<a name="l00685"></a>00685     {
<a name="l00686"></a><a class="code" href="structcompat__x32__siginfo.html#a28e856895ce5a898319fbdbe141935f2">00686</a>       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structcompat__x32__siginfo.html#a28e856895ce5a898319fbdbe141935f2">_pid</a>;
<a name="l00687"></a><a class="code" href="structcompat__x32__siginfo.html#a6f4b090d05cedb23d97a1710ae1b9849">00687</a>       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structcompat__x32__siginfo.html#a6f4b090d05cedb23d97a1710ae1b9849">_uid</a>;
<a name="l00688"></a>00688     } <a class="code" href="structcompat__x32__siginfo.html#accfb3e87727589ec11d84f82cbb7badf">_kill</a>;
<a name="l00689"></a>00689 
<a name="l00690"></a>00690     <span class="comment">/* POSIX.1b timers */</span>
<a name="l00691"></a>00691     <span class="keyword">struct</span>
<a name="l00692"></a>00692     {
<a name="l00693"></a><a class="code" href="structcompat__x32__siginfo.html#ace82339d1011680e4015fc3167651dcc">00693</a>       <a class="code" href="amd64-linux-nat_8c.html#ad4a92347af67da8042e37b91d1a25ee4">compat_timer_t</a> <a class="code" href="structcompat__x32__siginfo.html#ace82339d1011680e4015fc3167651dcc">_tid</a>;
<a name="l00694"></a><a class="code" href="structcompat__x32__siginfo.html#acc8b2c96872e080e904da6f304f985a6">00694</a>       <span class="keywordtype">int</span> <a class="code" href="structcompat__x32__siginfo.html#acc8b2c96872e080e904da6f304f985a6">_overrun</a>;
<a name="l00695"></a><a class="code" href="structcompat__x32__siginfo.html#a187b9d92a329f2efeaac1a5a117d2e07">00695</a>       <a class="code" href="unioncompat__sigval.html">compat_sigval_t</a> <a class="code" href="structcompat__x32__siginfo.html#a187b9d92a329f2efeaac1a5a117d2e07">_sigval</a>;
<a name="l00696"></a>00696     } <a class="code" href="structcompat__x32__siginfo.html#af314f958c8a6700193e5d18a05b34f15">_timer</a>;
<a name="l00697"></a>00697 
<a name="l00698"></a>00698     <span class="comment">/* POSIX.1b signals */</span>
<a name="l00699"></a>00699     <span class="keyword">struct</span>
<a name="l00700"></a>00700     {
<a name="l00701"></a>00701       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structcompat__x32__siginfo.html#a28e856895ce5a898319fbdbe141935f2">_pid</a>;
<a name="l00702"></a>00702       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structcompat__x32__siginfo.html#a6f4b090d05cedb23d97a1710ae1b9849">_uid</a>;
<a name="l00703"></a>00703       <a class="code" href="unioncompat__sigval.html">compat_sigval_t</a> <a class="code" href="structcompat__x32__siginfo.html#a187b9d92a329f2efeaac1a5a117d2e07">_sigval</a>;
<a name="l00704"></a>00704     } <a class="code" href="structcompat__x32__siginfo.html#afc719a08a207414f4408f459b3eb50a3">_rt</a>;
<a name="l00705"></a>00705 
<a name="l00706"></a>00706     <span class="comment">/* SIGCHLD */</span>
<a name="l00707"></a>00707     <span class="keyword">struct</span>
<a name="l00708"></a>00708     {
<a name="l00709"></a>00709       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structcompat__x32__siginfo.html#a28e856895ce5a898319fbdbe141935f2">_pid</a>;
<a name="l00710"></a>00710       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structcompat__x32__siginfo.html#a6f4b090d05cedb23d97a1710ae1b9849">_uid</a>;
<a name="l00711"></a><a class="code" href="structcompat__x32__siginfo.html#ab24ed2b1f9d3465c89744b65c6ec2f6c">00711</a>       <span class="keywordtype">int</span> <a class="code" href="structcompat__x32__siginfo.html#ab24ed2b1f9d3465c89744b65c6ec2f6c">_status</a>;
<a name="l00712"></a><a class="code" href="structcompat__x32__siginfo.html#ae8591d3b83f99b06b590417c8ce2ef7a">00712</a>       <a class="code" href="structcompat__x32__clock.html">compat_x32_clock_t</a> <a class="code" href="structcompat__x32__siginfo.html#ae8591d3b83f99b06b590417c8ce2ef7a">_utime</a>;
<a name="l00713"></a><a class="code" href="structcompat__x32__siginfo.html#adc945043d6101faa78a4c530e14c5e5e">00713</a>       <a class="code" href="structcompat__x32__clock.html">compat_x32_clock_t</a> <a class="code" href="structcompat__x32__siginfo.html#adc945043d6101faa78a4c530e14c5e5e">_stime</a>;
<a name="l00714"></a>00714     } <a class="code" href="structcompat__x32__siginfo.html#a3ac80c94d4b1348bf88681643c5a46c1">_sigchld</a>;
<a name="l00715"></a>00715 
<a name="l00716"></a>00716     <span class="comment">/* SIGILL, SIGFPE, SIGSEGV, SIGBUS */</span>
<a name="l00717"></a>00717     <span class="keyword">struct</span>
<a name="l00718"></a>00718     {
<a name="l00719"></a><a class="code" href="structcompat__x32__siginfo.html#a03b5512a614609a960fb0d69c0065067">00719</a>       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structcompat__x32__siginfo.html#a03b5512a614609a960fb0d69c0065067">_addr</a>;
<a name="l00720"></a>00720     } <a class="code" href="structcompat__x32__siginfo.html#afc0812a919fd65b1990fe1c4101be15d">_sigfault</a>;
<a name="l00721"></a>00721 
<a name="l00722"></a>00722     <span class="comment">/* SIGPOLL */</span>
<a name="l00723"></a>00723     <span class="keyword">struct</span>
<a name="l00724"></a>00724     {
<a name="l00725"></a><a class="code" href="structcompat__x32__siginfo.html#a59e54ca67052709caf19e74995b9a43f">00725</a>       <span class="keywordtype">int</span> <a class="code" href="structcompat__x32__siginfo.html#a59e54ca67052709caf19e74995b9a43f">_band</a>;
<a name="l00726"></a><a class="code" href="structcompat__x32__siginfo.html#a08edd4a29965bfa4948eff0a34bd70f6">00726</a>       <span class="keywordtype">int</span> <a class="code" href="structcompat__x32__siginfo.html#a08edd4a29965bfa4948eff0a34bd70f6">_fd</a>;
<a name="l00727"></a>00727     } <a class="code" href="structcompat__x32__siginfo.html#a3dbc322261461a6528f91ec5ef347951">_sigpoll</a>;
<a name="l00728"></a>00728   } <a class="code" href="structcompat__x32__siginfo.html#a682dc11ab45d9c6132df6455ce784a4f">_sifields</a>;
<a name="l00729"></a>00729 } <a class="code" href="amd64-linux-nat_8c.html#aed17862d86c2204cbb7d3dd71af730c9">compat_x32_siginfo_t</a>;
<a name="l00730"></a>00730 
<a name="l00731"></a><a class="code" href="amd64-linux-nat_8c.html#a73e80c773762e4a2d526ef5de3569b56">00731</a> <span class="preprocessor">#define cpt_si_pid _sifields._kill._pid</span>
<a name="l00732"></a><a class="code" href="amd64-linux-nat_8c.html#ae5f88d63d034277be261bf6ad321cb80">00732</a> <span class="preprocessor"></span><span class="preprocessor">#define cpt_si_uid _sifields._kill._uid</span>
<a name="l00733"></a><a class="code" href="amd64-linux-nat_8c.html#a95f0012286cba4286720ad17db902b64">00733</a> <span class="preprocessor"></span><span class="preprocessor">#define cpt_si_timerid _sifields._timer._tid</span>
<a name="l00734"></a><a class="code" href="amd64-linux-nat_8c.html#af55222e50da55ca6a70887c65c438b0b">00734</a> <span class="preprocessor"></span><span class="preprocessor">#define cpt_si_overrun _sifields._timer._overrun</span>
<a name="l00735"></a><a class="code" href="amd64-linux-nat_8c.html#add0ae3736ea014fab6e09083a56c38b2">00735</a> <span class="preprocessor"></span><span class="preprocessor">#define cpt_si_status _sifields._sigchld._status</span>
<a name="l00736"></a><a class="code" href="amd64-linux-nat_8c.html#ae20da1fa303bc39a220c04ee972f6b5b">00736</a> <span class="preprocessor"></span><span class="preprocessor">#define cpt_si_utime _sifields._sigchld._utime</span>
<a name="l00737"></a><a class="code" href="amd64-linux-nat_8c.html#a17f702764688a2c396b5947be4e1ef4c">00737</a> <span class="preprocessor"></span><span class="preprocessor">#define cpt_si_stime _sifields._sigchld._stime</span>
<a name="l00738"></a><a class="code" href="amd64-linux-nat_8c.html#a86d9f9acd3c6c1a0d26a427b37904071">00738</a> <span class="preprocessor"></span><span class="preprocessor">#define cpt_si_ptr _sifields._rt._sigval.sival_ptr</span>
<a name="l00739"></a><a class="code" href="amd64-linux-nat_8c.html#ada070ffa7f05eb9c584f7b3a82578a6c">00739</a> <span class="preprocessor"></span><span class="preprocessor">#define cpt_si_addr _sifields._sigfault._addr</span>
<a name="l00740"></a><a class="code" href="amd64-linux-nat_8c.html#a4f1a6b403163a2bb74f20b314dab1de4">00740</a> <span class="preprocessor"></span><span class="preprocessor">#define cpt_si_band _sifields._sigpoll._band</span>
<a name="l00741"></a><a class="code" href="amd64-linux-nat_8c.html#aad9a60208eb07b2060c64cfece5b2afc">00741</a> <span class="preprocessor"></span><span class="preprocessor">#define cpt_si_fd _sifields._sigpoll._fd</span>
<a name="l00742"></a>00742 <span class="preprocessor"></span>
<a name="l00743"></a>00743 <span class="comment">/* glibc at least up to 2.3.2 doesn&#39;t have si_timerid, si_overrun.</span>
<a name="l00744"></a>00744 <span class="comment">   In their place is si_timer1,si_timer2.  */</span>
<a name="l00745"></a>00745 <span class="preprocessor">#ifndef si_timerid</span>
<a name="l00746"></a><a class="code" href="amd64-linux-nat_8c.html#a38c08b07c316a6a39d91e6dc6e51d607">00746</a> <span class="preprocessor"></span><span class="preprocessor">#define si_timerid si_timer1</span>
<a name="l00747"></a>00747 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00748"></a>00748 <span class="preprocessor"></span><span class="preprocessor">#ifndef si_overrun</span>
<a name="l00749"></a><a class="code" href="amd64-linux-nat_8c.html#ac28d905f939172271445952252f12e10">00749</a> <span class="preprocessor"></span><span class="preprocessor">#define si_overrun si_timer2</span>
<a name="l00750"></a>00750 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00751"></a>00751 <span class="preprocessor"></span>
<a name="l00752"></a>00752 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00753"></a><a class="code" href="amd64-linux-nat_8c.html#ad8ebca0ef18f00f1abcc5445537666a9">00753</a> <a class="code" href="amd64-linux-nat_8c.html#ad8ebca0ef18f00f1abcc5445537666a9">compat_siginfo_from_siginfo</a> (<a class="code" href="structcompat__siginfo.html">compat_siginfo_t</a> *<a class="code" href="varobj_8h.html#ae2a2635825813434f3201bf8ace439d2">to</a>, siginfo_t *<a class="code" href="varobj_8h.html#a43396decd62b46fa01cc6c66a84cbba1">from</a>)
<a name="l00754"></a>00754 {
<a name="l00755"></a>00755   <a class="code" href="gdb__string_8h.html#adb03df3679ce1445e801310614624ccb">memset</a> (to, 0, <span class="keyword">sizeof</span> (*to));
<a name="l00756"></a>00756 
<a name="l00757"></a>00757   to-&gt;<a class="code" href="structcompat__siginfo.html#a1cfda75f31c7a17c6332dff2d5b07dea">si_signo</a> = from-&gt;si_signo;
<a name="l00758"></a>00758   to-&gt;<a class="code" href="structcompat__siginfo.html#afdc79ddc9af47192f198c31c7118c4f7">si_errno</a> = from-&gt;si_errno;
<a name="l00759"></a>00759   to-&gt;<a class="code" href="structcompat__siginfo.html#a837d67ba0044a9a24df74fe2d07fcb46">si_code</a> = from-&gt;si_code;
<a name="l00760"></a>00760 
<a name="l00761"></a>00761   <span class="keywordflow">if</span> (to-&gt;<a class="code" href="structcompat__siginfo.html#a837d67ba0044a9a24df74fe2d07fcb46">si_code</a> == SI_TIMER)
<a name="l00762"></a>00762     {
<a name="l00763"></a>00763       to-&gt;cpt_si_timerid = from-&gt;si_timerid;
<a name="l00764"></a>00764       to-&gt;cpt_si_overrun = from-&gt;si_overrun;
<a name="l00765"></a>00765       to-&gt;cpt_si_ptr = (intptr_t) from-&gt;si_ptr;
<a name="l00766"></a>00766     }
<a name="l00767"></a>00767   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (to-&gt;<a class="code" href="structcompat__siginfo.html#a837d67ba0044a9a24df74fe2d07fcb46">si_code</a> == SI_USER)
<a name="l00768"></a>00768     {
<a name="l00769"></a>00769       to-&gt;cpt_si_pid = from-&gt;si_pid;
<a name="l00770"></a>00770       to-&gt;cpt_si_uid = from-&gt;si_uid;
<a name="l00771"></a>00771     }
<a name="l00772"></a>00772   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (to-&gt;<a class="code" href="structcompat__siginfo.html#a837d67ba0044a9a24df74fe2d07fcb46">si_code</a> &lt; 0)
<a name="l00773"></a>00773     {
<a name="l00774"></a>00774       to-&gt;cpt_si_pid = from-&gt;si_pid;
<a name="l00775"></a>00775       to-&gt;cpt_si_uid = from-&gt;si_uid;
<a name="l00776"></a>00776       to-&gt;cpt_si_ptr = (intptr_t) from-&gt;si_ptr;
<a name="l00777"></a>00777     }
<a name="l00778"></a>00778   <span class="keywordflow">else</span>
<a name="l00779"></a>00779     {
<a name="l00780"></a>00780       <span class="keywordflow">switch</span> (to-&gt;<a class="code" href="structcompat__siginfo.html#a1cfda75f31c7a17c6332dff2d5b07dea">si_signo</a>)
<a name="l00781"></a>00781         {
<a name="l00782"></a>00782         <span class="keywordflow">case</span> SIGCHLD:
<a name="l00783"></a>00783           to-&gt;cpt_si_pid = from-&gt;si_pid;
<a name="l00784"></a>00784           to-&gt;cpt_si_uid = from-&gt;si_uid;
<a name="l00785"></a>00785           to-&gt;cpt_si_status = from-&gt;si_status;
<a name="l00786"></a>00786           to-&gt;cpt_si_utime = from-&gt;si_utime;
<a name="l00787"></a>00787           to-&gt;cpt_si_stime = from-&gt;si_stime;
<a name="l00788"></a>00788           <span class="keywordflow">break</span>;
<a name="l00789"></a>00789         <span class="keywordflow">case</span> SIGILL:
<a name="l00790"></a>00790         <span class="keywordflow">case</span> SIGFPE:
<a name="l00791"></a>00791         <span class="keywordflow">case</span> SIGSEGV:
<a name="l00792"></a>00792         <span class="keywordflow">case</span> SIGBUS:
<a name="l00793"></a>00793           to-&gt;cpt_si_addr = (intptr_t) from-&gt;si_addr;
<a name="l00794"></a>00794           <span class="keywordflow">break</span>;
<a name="l00795"></a>00795         <span class="keywordflow">case</span> SIGPOLL:
<a name="l00796"></a>00796           to-&gt;cpt_si_band = from-&gt;si_band;
<a name="l00797"></a>00797           to-&gt;cpt_si_fd = from-&gt;si_fd;
<a name="l00798"></a>00798           <span class="keywordflow">break</span>;
<a name="l00799"></a>00799         <span class="keywordflow">default</span>:
<a name="l00800"></a>00800           to-&gt;cpt_si_pid = from-&gt;si_pid;
<a name="l00801"></a>00801           to-&gt;cpt_si_uid = from-&gt;si_uid;
<a name="l00802"></a>00802           to-&gt;cpt_si_ptr = (intptr_t) from-&gt;si_ptr;
<a name="l00803"></a>00803           <span class="keywordflow">break</span>;
<a name="l00804"></a>00804         }
<a name="l00805"></a>00805     }
<a name="l00806"></a>00806 }
<a name="l00807"></a>00807 
<a name="l00808"></a>00808 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00809"></a><a class="code" href="amd64-linux-nat_8c.html#ac0b93f34c17ca74edd4299550d9945a9">00809</a> <a class="code" href="amd64-linux-nat_8c.html#ac0b93f34c17ca74edd4299550d9945a9">siginfo_from_compat_siginfo</a> (siginfo_t *<a class="code" href="varobj_8h.html#ae2a2635825813434f3201bf8ace439d2">to</a>, <a class="code" href="structcompat__siginfo.html">compat_siginfo_t</a> *<a class="code" href="varobj_8h.html#a43396decd62b46fa01cc6c66a84cbba1">from</a>)
<a name="l00810"></a>00810 {
<a name="l00811"></a>00811   <a class="code" href="gdb__string_8h.html#adb03df3679ce1445e801310614624ccb">memset</a> (to, 0, <span class="keyword">sizeof</span> (*to));
<a name="l00812"></a>00812 
<a name="l00813"></a>00813   to-&gt;si_signo = from-&gt;<a class="code" href="structcompat__siginfo.html#a1cfda75f31c7a17c6332dff2d5b07dea">si_signo</a>;
<a name="l00814"></a>00814   to-&gt;si_errno = from-&gt;<a class="code" href="structcompat__siginfo.html#afdc79ddc9af47192f198c31c7118c4f7">si_errno</a>;
<a name="l00815"></a>00815   to-&gt;si_code = from-&gt;<a class="code" href="structcompat__siginfo.html#a837d67ba0044a9a24df74fe2d07fcb46">si_code</a>;
<a name="l00816"></a>00816 
<a name="l00817"></a>00817   <span class="keywordflow">if</span> (to-&gt;si_code == SI_TIMER)
<a name="l00818"></a>00818     {
<a name="l00819"></a>00819       to-&gt;si_timerid = from-&gt;cpt_si_timerid;
<a name="l00820"></a>00820       to-&gt;si_overrun = from-&gt;cpt_si_overrun;
<a name="l00821"></a>00821       to-&gt;si_ptr = (<span class="keywordtype">void</span> *) (intptr_t) from-&gt;cpt_si_ptr;
<a name="l00822"></a>00822     }
<a name="l00823"></a>00823   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (to-&gt;si_code == SI_USER)
<a name="l00824"></a>00824     {
<a name="l00825"></a>00825       to-&gt;si_pid = from-&gt;cpt_si_pid;
<a name="l00826"></a>00826       to-&gt;si_uid = from-&gt;cpt_si_uid;
<a name="l00827"></a>00827     }
<a name="l00828"></a>00828   <span class="keywordflow">if</span> (to-&gt;si_code &lt; 0)
<a name="l00829"></a>00829     {
<a name="l00830"></a>00830       to-&gt;si_pid = from-&gt;cpt_si_pid;
<a name="l00831"></a>00831       to-&gt;si_uid = from-&gt;cpt_si_uid;
<a name="l00832"></a>00832       to-&gt;si_ptr = (<span class="keywordtype">void</span> *) (intptr_t) from-&gt;cpt_si_ptr;
<a name="l00833"></a>00833     }
<a name="l00834"></a>00834   <span class="keywordflow">else</span>
<a name="l00835"></a>00835     {
<a name="l00836"></a>00836       <span class="keywordflow">switch</span> (to-&gt;si_signo)
<a name="l00837"></a>00837         {
<a name="l00838"></a>00838         <span class="keywordflow">case</span> SIGCHLD:
<a name="l00839"></a>00839           to-&gt;si_pid = from-&gt;cpt_si_pid;
<a name="l00840"></a>00840           to-&gt;si_uid = from-&gt;cpt_si_uid;
<a name="l00841"></a>00841           to-&gt;si_status = from-&gt;cpt_si_status;
<a name="l00842"></a>00842           to-&gt;si_utime = from-&gt;cpt_si_utime;
<a name="l00843"></a>00843           to-&gt;si_stime = from-&gt;cpt_si_stime;
<a name="l00844"></a>00844           <span class="keywordflow">break</span>;
<a name="l00845"></a>00845         <span class="keywordflow">case</span> SIGILL:
<a name="l00846"></a>00846         <span class="keywordflow">case</span> SIGFPE:
<a name="l00847"></a>00847         <span class="keywordflow">case</span> SIGSEGV:
<a name="l00848"></a>00848         <span class="keywordflow">case</span> SIGBUS:
<a name="l00849"></a>00849           to-&gt;si_addr = (<span class="keywordtype">void</span> *) (intptr_t) from-&gt;cpt_si_addr;
<a name="l00850"></a>00850           <span class="keywordflow">break</span>;
<a name="l00851"></a>00851         <span class="keywordflow">case</span> SIGPOLL:
<a name="l00852"></a>00852           to-&gt;si_band = from-&gt;cpt_si_band;
<a name="l00853"></a>00853           to-&gt;si_fd = from-&gt;cpt_si_fd;
<a name="l00854"></a>00854           <span class="keywordflow">break</span>;
<a name="l00855"></a>00855         <span class="keywordflow">default</span>:
<a name="l00856"></a>00856           to-&gt;si_pid = from-&gt;cpt_si_pid;
<a name="l00857"></a>00857           to-&gt;si_uid = from-&gt;cpt_si_uid;
<a name="l00858"></a>00858           to-&gt;si_ptr = (<span class="keywordtype">void</span>* ) (intptr_t) from-&gt;cpt_si_ptr;
<a name="l00859"></a>00859           <span class="keywordflow">break</span>;
<a name="l00860"></a>00860         }
<a name="l00861"></a>00861     }
<a name="l00862"></a>00862 }
<a name="l00863"></a>00863 
<a name="l00864"></a>00864 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00865"></a><a class="code" href="amd64-linux-nat_8c.html#a257c536a0b67a036f546c5df8139eca6">00865</a> <a class="code" href="amd64-linux-nat_8c.html#a257c536a0b67a036f546c5df8139eca6">compat_x32_siginfo_from_siginfo</a> (<a class="code" href="structcompat__x32__siginfo.html">compat_x32_siginfo_t</a> *<a class="code" href="varobj_8h.html#ae2a2635825813434f3201bf8ace439d2">to</a>,
<a name="l00866"></a>00866                                  siginfo_t *<a class="code" href="varobj_8h.html#a43396decd62b46fa01cc6c66a84cbba1">from</a>)
<a name="l00867"></a>00867 {
<a name="l00868"></a>00868   <a class="code" href="gdb__string_8h.html#adb03df3679ce1445e801310614624ccb">memset</a> (to, 0, <span class="keyword">sizeof</span> (*to));
<a name="l00869"></a>00869 
<a name="l00870"></a>00870   to-&gt;<a class="code" href="structcompat__x32__siginfo.html#a8d330361e4164ef03145f28c15b71334">si_signo</a> = from-&gt;si_signo;
<a name="l00871"></a>00871   to-&gt;<a class="code" href="structcompat__x32__siginfo.html#a5b8d99c96a7ff4815eac2beeb22f195a">si_errno</a> = from-&gt;si_errno;
<a name="l00872"></a>00872   to-&gt;<a class="code" href="structcompat__x32__siginfo.html#a3bf6877bb343b505a74d8c69d7eeef35">si_code</a> = from-&gt;si_code;
<a name="l00873"></a>00873 
<a name="l00874"></a>00874   <span class="keywordflow">if</span> (to-&gt;<a class="code" href="structcompat__x32__siginfo.html#a3bf6877bb343b505a74d8c69d7eeef35">si_code</a> == SI_TIMER)
<a name="l00875"></a>00875     {
<a name="l00876"></a>00876       to-&gt;cpt_si_timerid = from-&gt;si_timerid;
<a name="l00877"></a>00877       to-&gt;cpt_si_overrun = from-&gt;si_overrun;
<a name="l00878"></a>00878       to-&gt;cpt_si_ptr = (intptr_t) from-&gt;si_ptr;
<a name="l00879"></a>00879     }
<a name="l00880"></a>00880   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (to-&gt;<a class="code" href="structcompat__x32__siginfo.html#a3bf6877bb343b505a74d8c69d7eeef35">si_code</a> == SI_USER)
<a name="l00881"></a>00881     {
<a name="l00882"></a>00882       to-&gt;cpt_si_pid = from-&gt;si_pid;
<a name="l00883"></a>00883       to-&gt;cpt_si_uid = from-&gt;si_uid;
<a name="l00884"></a>00884     }
<a name="l00885"></a>00885   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (to-&gt;<a class="code" href="structcompat__x32__siginfo.html#a3bf6877bb343b505a74d8c69d7eeef35">si_code</a> &lt; 0)
<a name="l00886"></a>00886     {
<a name="l00887"></a>00887       to-&gt;cpt_si_pid = from-&gt;si_pid;
<a name="l00888"></a>00888       to-&gt;cpt_si_uid = from-&gt;si_uid;
<a name="l00889"></a>00889       to-&gt;cpt_si_ptr = (intptr_t) from-&gt;si_ptr;
<a name="l00890"></a>00890     }
<a name="l00891"></a>00891   <span class="keywordflow">else</span>
<a name="l00892"></a>00892     {
<a name="l00893"></a>00893       <span class="keywordflow">switch</span> (to-&gt;<a class="code" href="structcompat__x32__siginfo.html#a8d330361e4164ef03145f28c15b71334">si_signo</a>)
<a name="l00894"></a>00894         {
<a name="l00895"></a>00895         <span class="keywordflow">case</span> SIGCHLD:
<a name="l00896"></a>00896           to-&gt;cpt_si_pid = from-&gt;si_pid;
<a name="l00897"></a>00897           to-&gt;cpt_si_uid = from-&gt;si_uid;
<a name="l00898"></a>00898           to-&gt;cpt_si_status = from-&gt;si_status;
<a name="l00899"></a>00899           <a class="code" href="gdb__string_8h.html#a39ebe6a4e122707997e78b549a1e8c5e">memcpy</a> (&amp;to-&gt;cpt_si_utime, &amp;from-&gt;si_utime,
<a name="l00900"></a>00900                   sizeof (to-&gt;cpt_si_utime));
<a name="l00901"></a>00901           <a class="code" href="gdb__string_8h.html#a39ebe6a4e122707997e78b549a1e8c5e">memcpy</a> (&amp;to-&gt;cpt_si_stime, &amp;from-&gt;si_stime,
<a name="l00902"></a>00902                   sizeof (to-&gt;cpt_si_stime));
<a name="l00903"></a>00903           <span class="keywordflow">break</span>;
<a name="l00904"></a>00904         <span class="keywordflow">case</span> SIGILL:
<a name="l00905"></a>00905         <span class="keywordflow">case</span> SIGFPE:
<a name="l00906"></a>00906         <span class="keywordflow">case</span> SIGSEGV:
<a name="l00907"></a>00907         <span class="keywordflow">case</span> SIGBUS:
<a name="l00908"></a>00908           to-&gt;cpt_si_addr = (intptr_t) from-&gt;si_addr;
<a name="l00909"></a>00909           <span class="keywordflow">break</span>;
<a name="l00910"></a>00910         <span class="keywordflow">case</span> SIGPOLL:
<a name="l00911"></a>00911           to-&gt;cpt_si_band = from-&gt;si_band;
<a name="l00912"></a>00912           to-&gt;cpt_si_fd = from-&gt;si_fd;
<a name="l00913"></a>00913           <span class="keywordflow">break</span>;
<a name="l00914"></a>00914         <span class="keywordflow">default</span>:
<a name="l00915"></a>00915           to-&gt;cpt_si_pid = from-&gt;si_pid;
<a name="l00916"></a>00916           to-&gt;cpt_si_uid = from-&gt;si_uid;
<a name="l00917"></a>00917           to-&gt;cpt_si_ptr = (intptr_t) from-&gt;si_ptr;
<a name="l00918"></a>00918           <span class="keywordflow">break</span>;
<a name="l00919"></a>00919         }
<a name="l00920"></a>00920     }
<a name="l00921"></a>00921 }
<a name="l00922"></a>00922 
<a name="l00923"></a>00923 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00924"></a><a class="code" href="amd64-linux-nat_8c.html#a959189c69af5fe77e2659c34af8c1524">00924</a> <a class="code" href="amd64-linux-nat_8c.html#a959189c69af5fe77e2659c34af8c1524">siginfo_from_compat_x32_siginfo</a> (siginfo_t *<a class="code" href="varobj_8h.html#ae2a2635825813434f3201bf8ace439d2">to</a>,
<a name="l00925"></a>00925                                  <a class="code" href="structcompat__x32__siginfo.html">compat_x32_siginfo_t</a> *<a class="code" href="varobj_8h.html#a43396decd62b46fa01cc6c66a84cbba1">from</a>)
<a name="l00926"></a>00926 {
<a name="l00927"></a>00927   <a class="code" href="gdb__string_8h.html#adb03df3679ce1445e801310614624ccb">memset</a> (to, 0, <span class="keyword">sizeof</span> (*to));
<a name="l00928"></a>00928 
<a name="l00929"></a>00929   to-&gt;si_signo = from-&gt;<a class="code" href="structcompat__x32__siginfo.html#a8d330361e4164ef03145f28c15b71334">si_signo</a>;
<a name="l00930"></a>00930   to-&gt;si_errno = from-&gt;<a class="code" href="structcompat__x32__siginfo.html#a5b8d99c96a7ff4815eac2beeb22f195a">si_errno</a>;
<a name="l00931"></a>00931   to-&gt;si_code = from-&gt;<a class="code" href="structcompat__x32__siginfo.html#a3bf6877bb343b505a74d8c69d7eeef35">si_code</a>;
<a name="l00932"></a>00932 
<a name="l00933"></a>00933   <span class="keywordflow">if</span> (to-&gt;si_code == SI_TIMER)
<a name="l00934"></a>00934     {
<a name="l00935"></a>00935       to-&gt;si_timerid = from-&gt;cpt_si_timerid;
<a name="l00936"></a>00936       to-&gt;si_overrun = from-&gt;cpt_si_overrun;
<a name="l00937"></a>00937       to-&gt;si_ptr = (<span class="keywordtype">void</span> *) (intptr_t) from-&gt;cpt_si_ptr;
<a name="l00938"></a>00938     }
<a name="l00939"></a>00939   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (to-&gt;si_code == SI_USER)
<a name="l00940"></a>00940     {
<a name="l00941"></a>00941       to-&gt;si_pid = from-&gt;cpt_si_pid;
<a name="l00942"></a>00942       to-&gt;si_uid = from-&gt;cpt_si_uid;
<a name="l00943"></a>00943     }
<a name="l00944"></a>00944   <span class="keywordflow">if</span> (to-&gt;si_code &lt; 0)
<a name="l00945"></a>00945     {
<a name="l00946"></a>00946       to-&gt;si_pid = from-&gt;cpt_si_pid;
<a name="l00947"></a>00947       to-&gt;si_uid = from-&gt;cpt_si_uid;
<a name="l00948"></a>00948       to-&gt;si_ptr = (<span class="keywordtype">void</span> *) (intptr_t) from-&gt;cpt_si_ptr;
<a name="l00949"></a>00949     }
<a name="l00950"></a>00950   <span class="keywordflow">else</span>
<a name="l00951"></a>00951     {
<a name="l00952"></a>00952       <span class="keywordflow">switch</span> (to-&gt;si_signo)
<a name="l00953"></a>00953         {
<a name="l00954"></a>00954         <span class="keywordflow">case</span> SIGCHLD:
<a name="l00955"></a>00955           to-&gt;si_pid = from-&gt;cpt_si_pid;
<a name="l00956"></a>00956           to-&gt;si_uid = from-&gt;cpt_si_uid;
<a name="l00957"></a>00957           to-&gt;si_status = from-&gt;cpt_si_status;
<a name="l00958"></a>00958           <a class="code" href="gdb__string_8h.html#a39ebe6a4e122707997e78b549a1e8c5e">memcpy</a> (&amp;to-&gt;si_utime, &amp;from-&gt;cpt_si_utime,
<a name="l00959"></a>00959                   sizeof (to-&gt;si_utime));
<a name="l00960"></a>00960           <a class="code" href="gdb__string_8h.html#a39ebe6a4e122707997e78b549a1e8c5e">memcpy</a> (&amp;to-&gt;si_stime, &amp;from-&gt;cpt_si_stime,
<a name="l00961"></a>00961                   sizeof (to-&gt;si_stime));
<a name="l00962"></a>00962           <span class="keywordflow">break</span>;
<a name="l00963"></a>00963         <span class="keywordflow">case</span> SIGILL:
<a name="l00964"></a>00964         <span class="keywordflow">case</span> SIGFPE:
<a name="l00965"></a>00965         <span class="keywordflow">case</span> SIGSEGV:
<a name="l00966"></a>00966         <span class="keywordflow">case</span> SIGBUS:
<a name="l00967"></a>00967           to-&gt;si_addr = (<span class="keywordtype">void</span> *) (intptr_t) from-&gt;cpt_si_addr;
<a name="l00968"></a>00968           <span class="keywordflow">break</span>;
<a name="l00969"></a>00969         <span class="keywordflow">case</span> SIGPOLL:
<a name="l00970"></a>00970           to-&gt;si_band = from-&gt;cpt_si_band;
<a name="l00971"></a>00971           to-&gt;si_fd = from-&gt;cpt_si_fd;
<a name="l00972"></a>00972           <span class="keywordflow">break</span>;
<a name="l00973"></a>00973         <span class="keywordflow">default</span>:
<a name="l00974"></a>00974           to-&gt;si_pid = from-&gt;cpt_si_pid;
<a name="l00975"></a>00975           to-&gt;si_uid = from-&gt;cpt_si_uid;
<a name="l00976"></a>00976           to-&gt;si_ptr = (<span class="keywordtype">void</span>* ) (intptr_t) from-&gt;cpt_si_ptr;
<a name="l00977"></a>00977           <span class="keywordflow">break</span>;
<a name="l00978"></a>00978         }
<a name="l00979"></a>00979     }
<a name="l00980"></a>00980 }
<a name="l00981"></a>00981 
<a name="l00982"></a>00982 <span class="comment">/* Convert a native/host siginfo object, into/from the siginfo in the</span>
<a name="l00983"></a>00983 <span class="comment">   layout of the inferiors&#39; architecture.  Returns true if any</span>
<a name="l00984"></a>00984 <span class="comment">   conversion was done; false otherwise.  If DIRECTION is 1, then copy</span>
<a name="l00985"></a>00985 <span class="comment">   from INF to NATIVE.  If DIRECTION is 0, copy from NATIVE to</span>
<a name="l00986"></a>00986 <span class="comment">   INF.  */</span>
<a name="l00987"></a>00987 
<a name="l00988"></a>00988 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00989"></a><a class="code" href="amd64-linux-nat_8c.html#a188fdab6a57d0d73637eebde265fa940">00989</a> <a class="code" href="amd64-linux-nat_8c.html#a188fdab6a57d0d73637eebde265fa940">amd64_linux_siginfo_fixup</a> (siginfo_t *native, <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *<a class="code" href="structinf.html">inf</a>, <span class="keywordtype">int</span> direction)
<a name="l00990"></a>00990 {
<a name="l00991"></a>00991   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (<a class="code" href="frame_8c.html#a5ab254510728049878a232ed1b889820">get_current_frame</a> ());
<a name="l00992"></a>00992 
<a name="l00993"></a>00993   <span class="comment">/* Is the inferior 32-bit?  If so, then do fixup the siginfo</span>
<a name="l00994"></a>00994 <span class="comment">     object.  */</span>
<a name="l00995"></a>00995   <span class="keywordflow">if</span> (<a class="code" href="gdbarch_8c.html#a305465885963fbf0fb5a7543594a7bff">gdbarch_bfd_arch_info</a> (gdbarch)-&gt;bits_per_word == 32)
<a name="l00996"></a>00996     {
<a name="l00997"></a>00997       <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (<span class="keyword">sizeof</span> (siginfo_t) == <span class="keyword">sizeof</span> (<a class="code" href="structcompat__siginfo.html">compat_siginfo_t</a>));
<a name="l00998"></a>00998 
<a name="l00999"></a>00999       <span class="keywordflow">if</span> (direction == 0)
<a name="l01000"></a>01000         <a class="code" href="amd64-linux-nat_8c.html#ad8ebca0ef18f00f1abcc5445537666a9">compat_siginfo_from_siginfo</a> ((<span class="keyword">struct</span> <a class="code" href="structcompat__siginfo.html">compat_siginfo</a> *) inf, native);
<a name="l01001"></a>01001       <span class="keywordflow">else</span>
<a name="l01002"></a>01002         <a class="code" href="amd64-linux-nat_8c.html#ac0b93f34c17ca74edd4299550d9945a9">siginfo_from_compat_siginfo</a> (native, (<span class="keyword">struct</span> <a class="code" href="structcompat__siginfo.html">compat_siginfo</a> *) inf);
<a name="l01003"></a>01003 
<a name="l01004"></a>01004       <span class="keywordflow">return</span> 1;
<a name="l01005"></a>01005     }
<a name="l01006"></a>01006   <span class="comment">/* No fixup for native x32 GDB.  */</span>
<a name="l01007"></a>01007   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="gdbarch_8c.html#a3ee335ac98782b6633ab7fc235182cc9">gdbarch_addr_bit</a> (gdbarch) == 32 &amp;&amp; <span class="keyword">sizeof</span> (<span class="keywordtype">void</span> *) == 8)
<a name="l01008"></a>01008     {
<a name="l01009"></a>01009       <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (<span class="keyword">sizeof</span> (siginfo_t) == <span class="keyword">sizeof</span> (<a class="code" href="structcompat__x32__siginfo.html">compat_x32_siginfo_t</a>));
<a name="l01010"></a>01010 
<a name="l01011"></a>01011       <span class="keywordflow">if</span> (direction == 0)
<a name="l01012"></a>01012         <a class="code" href="amd64-linux-nat_8c.html#a257c536a0b67a036f546c5df8139eca6">compat_x32_siginfo_from_siginfo</a> ((<span class="keyword">struct</span> <a class="code" href="structcompat__x32__siginfo.html">compat_x32_siginfo</a> *) inf,
<a name="l01013"></a>01013                                          native);
<a name="l01014"></a>01014       <span class="keywordflow">else</span>
<a name="l01015"></a>01015         <a class="code" href="amd64-linux-nat_8c.html#a959189c69af5fe77e2659c34af8c1524">siginfo_from_compat_x32_siginfo</a> (native,
<a name="l01016"></a>01016                                          (<span class="keyword">struct</span> <a class="code" href="structcompat__x32__siginfo.html">compat_x32_siginfo</a> *) inf);
<a name="l01017"></a>01017 
<a name="l01018"></a>01018       <span class="keywordflow">return</span> 1;
<a name="l01019"></a>01019     }
<a name="l01020"></a>01020   <span class="keywordflow">else</span>
<a name="l01021"></a>01021     <span class="keywordflow">return</span> 0;
<a name="l01022"></a>01022 }
<a name="l01023"></a>01023 
<a name="l01024"></a>01024 <span class="comment">/* Get Linux/x86 target description from running target.</span>
<a name="l01025"></a>01025 <span class="comment"></span>
<a name="l01026"></a>01026 <span class="comment">   Value of CS segment register:</span>
<a name="l01027"></a>01027 <span class="comment">     1. 64bit process: 0x33.</span>
<a name="l01028"></a>01028 <span class="comment">     2. 32bit process: 0x23.</span>
<a name="l01029"></a>01029 <span class="comment"></span>
<a name="l01030"></a>01030 <span class="comment">   Value of DS segment register:</span>
<a name="l01031"></a>01031 <span class="comment">     1. LP64 process: 0x0.</span>
<a name="l01032"></a>01032 <span class="comment">     2. X32 process: 0x2b.</span>
<a name="l01033"></a>01033 <span class="comment"> */</span>
<a name="l01034"></a>01034 
<a name="l01035"></a><a class="code" href="amd64-linux-nat_8c.html#ae6ac3cf1ca1c51b47a3ccd4365d4f0ba">01035</a> <span class="preprocessor">#define AMD64_LINUX_USER64_CS   0x33</span>
<a name="l01036"></a><a class="code" href="amd64-linux-nat_8c.html#afc9275cd6dcd08d456afd1a0c141cda2">01036</a> <span class="preprocessor"></span><span class="preprocessor">#define AMD64_LINUX_X32_DS      0x2b</span>
<a name="l01037"></a>01037 <span class="preprocessor"></span>
<a name="l01038"></a>01038 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structtarget__desc.html">target_desc</a> *
<a name="l01039"></a><a class="code" href="amd64-linux-nat_8c.html#a147c00a6a3f412e6b87c38d21782334c">01039</a> <a class="code" href="amd64-linux-nat_8c.html#a147c00a6a3f412e6b87c38d21782334c">amd64_linux_read_description</a> (<span class="keyword">struct</span> <a class="code" href="structtarget__ops.html">target_ops</a> *ops)
<a name="l01040"></a>01040 {
<a name="l01041"></a>01041   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> cs;
<a name="l01042"></a>01042   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> ds;
<a name="l01043"></a>01043   <span class="keywordtype">int</span> tid;
<a name="l01044"></a>01044   <span class="keywordtype">int</span> is_64bit;
<a name="l01045"></a>01045   <span class="keywordtype">int</span> is_x32;
<a name="l01046"></a>01046   <span class="keyword">static</span> uint64_t xcr0;
<a name="l01047"></a>01047 
<a name="l01048"></a>01048   <span class="comment">/* GNU/Linux LWP ID&#39;s are process ID&#39;s.  */</span>
<a name="l01049"></a>01049   tid = <a class="code" href="ptid_8c.html#af5b67a5f356c507b7809af2fa4e63b44">ptid_get_lwp</a> (<a class="code" href="infcmd_8c.html#a428c5be9ce5e70bd03760e828e19c6b7">inferior_ptid</a>);
<a name="l01050"></a>01050   <span class="keywordflow">if</span> (tid == 0)
<a name="l01051"></a>01051     tid = <a class="code" href="ptid_8c.html#a264ba40fc2a0cf3d4fb24a55fe32aede">ptid_get_pid</a> (<a class="code" href="infcmd_8c.html#a428c5be9ce5e70bd03760e828e19c6b7">inferior_ptid</a>); <span class="comment">/* Not a threaded program.  */</span>
<a name="l01052"></a>01052 
<a name="l01053"></a>01053   <span class="comment">/* Get CS register.  */</span>
<a name="l01054"></a>01054   errno = 0;
<a name="l01055"></a>01055   cs = <a class="code" href="gdb__ptrace_8h.html#a4513d889d340e4567f2a46a346f9d9e7">ptrace</a> (PTRACE_PEEKUSER, tid,
<a name="l01056"></a>01056                offsetof (<span class="keyword">struct</span> user_regs_struct, cs), 0);
<a name="l01057"></a>01057   <span class="keywordflow">if</span> (errno != 0)
<a name="l01058"></a>01058     <a class="code" href="utils_8c.html#a14801ceb45147833b8ce111c89ea0d5f">perror_with_name</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Couldn&#39;t get CS register&quot;</span>));
<a name="l01059"></a>01059 
<a name="l01060"></a>01060   is_64bit = cs == <a class="code" href="amd64-linux-nat_8c.html#ae6ac3cf1ca1c51b47a3ccd4365d4f0ba">AMD64_LINUX_USER64_CS</a>;
<a name="l01061"></a>01061 
<a name="l01062"></a>01062   <span class="comment">/* Get DS register.  */</span>
<a name="l01063"></a>01063   errno = 0;
<a name="l01064"></a>01064   ds = <a class="code" href="gdb__ptrace_8h.html#a4513d889d340e4567f2a46a346f9d9e7">ptrace</a> (PTRACE_PEEKUSER, tid,
<a name="l01065"></a>01065                offsetof (<span class="keyword">struct</span> user_regs_struct, ds), 0);
<a name="l01066"></a>01066   <span class="keywordflow">if</span> (errno != 0)
<a name="l01067"></a>01067     <a class="code" href="utils_8c.html#a14801ceb45147833b8ce111c89ea0d5f">perror_with_name</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Couldn&#39;t get DS register&quot;</span>));
<a name="l01068"></a>01068 
<a name="l01069"></a>01069   is_x32 = ds == <a class="code" href="amd64-linux-nat_8c.html#afc9275cd6dcd08d456afd1a0c141cda2">AMD64_LINUX_X32_DS</a>;
<a name="l01070"></a>01070 
<a name="l01071"></a>01071   <span class="keywordflow">if</span> (<span class="keyword">sizeof</span> (<span class="keywordtype">void</span> *) == 4 &amp;&amp; is_64bit &amp;&amp; !is_x32)
<a name="l01072"></a>01072     <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Can&#39;t debug 64-bit process with 32-bit GDB&quot;</span>));
<a name="l01073"></a>01073 
<a name="l01074"></a>01074   <span class="keywordflow">if</span> (<a class="code" href="amd64-linux-nat_8c.html#aecb40e584bbc59b7b994d520be7ee258">have_ptrace_getregset</a> == -1)
<a name="l01075"></a>01075     {
<a name="l01076"></a>01076       uint64_t xstateregs[(<a class="code" href="i386-xstate_8h.html#ade27a7c6dd79f94f50b293c3aef6510a">I386_XSTATE_SSE_SIZE</a> / <span class="keyword">sizeof</span> (uint64_t))];
<a name="l01077"></a>01077       <span class="keyword">struct </span>iovec iov;
<a name="l01078"></a>01078 
<a name="l01079"></a>01079       iov.iov_base = xstateregs;
<a name="l01080"></a>01080       iov.iov_len = <span class="keyword">sizeof</span> (xstateregs);
<a name="l01081"></a>01081 
<a name="l01082"></a>01082       <span class="comment">/* Check if PTRACE_GETREGSET works.  */</span>
<a name="l01083"></a>01083       <span class="keywordflow">if</span> (<a class="code" href="gdb__ptrace_8h.html#a4513d889d340e4567f2a46a346f9d9e7">ptrace</a> (<a class="code" href="amd64-linux-nat_8c.html#afefafd04f0d0effdafae169dedf2e8ae">PTRACE_GETREGSET</a>, tid,
<a name="l01084"></a>01084                   (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) NT_X86_XSTATE, (<a class="code" href="namespacegdb_1_1printing.html#ae264c8b9a4ff02c4b077df5db5944977">long</a>) &amp;iov) &lt; 0)
<a name="l01085"></a>01085         <a class="code" href="amd64-linux-nat_8c.html#aecb40e584bbc59b7b994d520be7ee258">have_ptrace_getregset</a> = 0;
<a name="l01086"></a>01086       <span class="keywordflow">else</span>
<a name="l01087"></a>01087         {
<a name="l01088"></a>01088           <a class="code" href="amd64-linux-nat_8c.html#aecb40e584bbc59b7b994d520be7ee258">have_ptrace_getregset</a> = 1;
<a name="l01089"></a>01089 
<a name="l01090"></a>01090           <span class="comment">/* Get XCR0 from XSAVE extended state.  */</span>
<a name="l01091"></a>01091           xcr0 = xstateregs[(<a class="code" href="i386-linux-tdep_8h.html#a601601ac810f271c457b4fb57134fb4e">I386_LINUX_XSAVE_XCR0_OFFSET</a>
<a name="l01092"></a>01092                              / <span class="keyword">sizeof</span> (uint64_t))];
<a name="l01093"></a>01093         }
<a name="l01094"></a>01094     }
<a name="l01095"></a>01095 
<a name="l01096"></a>01096   <span class="comment">/* Check the native XCR0 only if PTRACE_GETREGSET is available.  */</span>
<a name="l01097"></a>01097   <span class="keywordflow">if</span> (<a class="code" href="amd64-linux-nat_8c.html#aecb40e584bbc59b7b994d520be7ee258">have_ptrace_getregset</a>
<a name="l01098"></a>01098       &amp;&amp; (xcr0 &amp; <a class="code" href="i386-xstate_8h.html#a23f5ffae19a7eb01e3502cbbef632962">I386_XSTATE_AVX_MASK</a>) == <a class="code" href="i386-xstate_8h.html#a23f5ffae19a7eb01e3502cbbef632962">I386_XSTATE_AVX_MASK</a>)
<a name="l01099"></a>01099     {
<a name="l01100"></a>01100       <span class="keywordflow">if</span> (is_64bit)
<a name="l01101"></a>01101         {
<a name="l01102"></a>01102           <span class="keywordflow">if</span> (is_x32)
<a name="l01103"></a>01103             <span class="keywordflow">return</span> <a class="code" href="amd64-linux-tdep_8h.html#a6e53c0d5968ce1e9a1df0577961841d7">tdesc_x32_avx_linux</a>;
<a name="l01104"></a>01104           <span class="keywordflow">else</span>
<a name="l01105"></a>01105             <span class="keywordflow">return</span> <a class="code" href="amd64-linux-tdep_8h.html#a35ad486a2c1f7f5dc3e592a9869819aa">tdesc_amd64_avx_linux</a>;
<a name="l01106"></a>01106         }
<a name="l01107"></a>01107       <span class="keywordflow">else</span>
<a name="l01108"></a>01108         <span class="keywordflow">return</span> <a class="code" href="i386-avx-linux_8c.html#a0bb33c96a2ef5f5b206ac5374ace796a">tdesc_i386_avx_linux</a>;
<a name="l01109"></a>01109     }
<a name="l01110"></a>01110   <span class="keywordflow">else</span>
<a name="l01111"></a>01111     {
<a name="l01112"></a>01112       <span class="keywordflow">if</span> (is_64bit)
<a name="l01113"></a>01113         {
<a name="l01114"></a>01114           <span class="keywordflow">if</span> (is_x32)
<a name="l01115"></a>01115             <span class="keywordflow">return</span> <a class="code" href="amd64-linux-tdep_8h.html#a81f291e995ee198df05e63ae29ba9d2c">tdesc_x32_linux</a>;
<a name="l01116"></a>01116           <span class="keywordflow">else</span>
<a name="l01117"></a>01117             <span class="keywordflow">return</span> <a class="code" href="amd64-linux-tdep_8h.html#a53a9ea1f2fea791aee8c240c6fea8652">tdesc_amd64_linux</a>;
<a name="l01118"></a>01118         }
<a name="l01119"></a>01119       <span class="keywordflow">else</span>
<a name="l01120"></a>01120         <span class="keywordflow">return</span> <a class="code" href="i386-linux_8c.html#a658af348f649b3875664c8bcad70c706">tdesc_i386_linux</a>;
<a name="l01121"></a>01121     }
<a name="l01122"></a>01122 }
<a name="l01123"></a>01123 
<a name="l01124"></a>01124 <span class="comment">/* Enable branch tracing.  */</span>
<a name="l01125"></a>01125 
<a name="l01126"></a>01126 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structbtrace__target__info.html">btrace_target_info</a> *
<a name="l01127"></a><a class="code" href="amd64-linux-nat_8c.html#ac65f4d837181701df8d3718485796450">01127</a> <a class="code" href="amd64-linux-nat_8c.html#ac65f4d837181701df8d3718485796450">amd64_linux_enable_btrace</a> (<a class="code" href="structptid.html">ptid_t</a> <a class="code" href="structptid.html">ptid</a>)
<a name="l01128"></a>01128 {
<a name="l01129"></a>01129   <span class="keyword">struct </span><a class="code" href="structbtrace__target__info.html">btrace_target_info</a> *tinfo;
<a name="l01130"></a>01130   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>;
<a name="l01131"></a>01131 
<a name="l01132"></a>01132   errno = 0;
<a name="l01133"></a>01133   tinfo = <a class="code" href="linux-btrace_8c.html#a500056b45e5ba800537791e59c3cf4e4">linux_enable_btrace</a> (ptid);
<a name="l01134"></a>01134 
<a name="l01135"></a>01135   <span class="keywordflow">if</span> (tinfo == NULL)
<a name="l01136"></a>01136     <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Could not enable branch tracing for %s: %s.&quot;</span>),
<a name="l01137"></a>01137            <a class="code" href="target_8c.html#a25ebd5fbc0b84bf9b914f7a21bfa6f7b">target_pid_to_str</a> (ptid), <a class="code" href="mingw-hdep_8c.html#a69f9363599db68d3ff495cd5e78f6b62">safe_strerror</a> (errno));
<a name="l01138"></a>01138 
<a name="l01139"></a>01139   <span class="comment">/* Fill in the size of a pointer in bits.  */</span>
<a name="l01140"></a>01140   gdbarch = <a class="code" href="target_8h.html#a7b002f8f29b4d6b40d151e7aa1e92763">target_thread_architecture</a> (ptid);
<a name="l01141"></a>01141   tinfo-&gt;<a class="code" href="structbtrace__target__info.html#a37208eac2c260ef70760276e72410d8a">ptr_bits</a> = <a class="code" href="gdbarch_8c.html#ae356193e481873e4377ff922d984f13f">gdbarch_ptr_bit</a> (gdbarch);
<a name="l01142"></a>01142 
<a name="l01143"></a>01143   <span class="keywordflow">return</span> tinfo;
<a name="l01144"></a>01144 }
<a name="l01145"></a>01145 
<a name="l01146"></a>01146 <span class="comment">/* Disable branch tracing.  */</span>
<a name="l01147"></a>01147 
<a name="l01148"></a>01148 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l01149"></a><a class="code" href="amd64-linux-nat_8c.html#a1b298ea59739fbc468e3ef0da21e50af">01149</a> <a class="code" href="amd64-linux-nat_8c.html#a1b298ea59739fbc468e3ef0da21e50af">amd64_linux_disable_btrace</a> (<span class="keyword">struct</span> <a class="code" href="structbtrace__target__info.html">btrace_target_info</a> *tinfo)
<a name="l01150"></a>01150 {
<a name="l01151"></a>01151   <span class="keywordtype">int</span> errcode = <a class="code" href="linux-btrace_8c.html#a09fb40ece97c93bcd3d124ea70183522">linux_disable_btrace</a> (tinfo);
<a name="l01152"></a>01152 
<a name="l01153"></a>01153   <span class="keywordflow">if</span> (errcode != 0)
<a name="l01154"></a>01154     <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Could not disable branch tracing: %s.&quot;</span>), <a class="code" href="mingw-hdep_8c.html#a69f9363599db68d3ff495cd5e78f6b62">safe_strerror</a> (errcode));
<a name="l01155"></a>01155 }
<a name="l01156"></a>01156 
<a name="l01157"></a>01157 <span class="comment">/* Teardown branch tracing.  */</span>
<a name="l01158"></a>01158 
<a name="l01159"></a>01159 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l01160"></a><a class="code" href="amd64-linux-nat_8c.html#af3a161e306a617a70ae3f6ba6dd3b70b">01160</a> <a class="code" href="amd64-linux-nat_8c.html#af3a161e306a617a70ae3f6ba6dd3b70b">amd64_linux_teardown_btrace</a> (<span class="keyword">struct</span> <a class="code" href="structbtrace__target__info.html">btrace_target_info</a> *tinfo)
<a name="l01161"></a>01161 {
<a name="l01162"></a>01162   <span class="comment">/* Ignore errors.  */</span>
<a name="l01163"></a>01163   <a class="code" href="linux-btrace_8c.html#a09fb40ece97c93bcd3d124ea70183522">linux_disable_btrace</a> (tinfo);
<a name="l01164"></a>01164 }
<a name="l01165"></a>01165 
<a name="l01166"></a>01166 <span class="comment">/* Provide a prototype to silence -Wmissing-prototypes.  */</span>
<a name="l01167"></a>01167 <span class="keywordtype">void</span> <a class="code" href="amd64-linux-nat_8c.html#a5c526746ae478667f97c9a1088fe91ca">_initialize_amd64_linux_nat</a> (<span class="keywordtype">void</span>);
<a name="l01168"></a>01168 
<a name="l01169"></a>01169 <span class="keywordtype">void</span>
<a name="l01170"></a><a class="code" href="amd64-linux-nat_8c.html#a5c526746ae478667f97c9a1088fe91ca">01170</a> <a class="code" href="amd64-linux-nat_8c.html#a5c526746ae478667f97c9a1088fe91ca">_initialize_amd64_linux_nat</a> (<span class="keywordtype">void</span>)
<a name="l01171"></a>01171 {
<a name="l01172"></a>01172   <span class="keyword">struct </span><a class="code" href="structtarget__ops.html">target_ops</a> *t;
<a name="l01173"></a>01173 
<a name="l01174"></a>01174   <a class="code" href="amd64-nat_8c.html#ab261bf0dc98dc1e473e093560f7cdade">amd64_native_gregset32_reg_offset</a> = <a class="code" href="amd64-linux-nat_8c.html#aaf7cb00f58d860251eb579c6b7551276">amd64_linux_gregset32_reg_offset</a>;
<a name="l01175"></a>01175   <a class="code" href="amd64-nat_8c.html#a6113223b94a68ce910253ca82d9d5f9c">amd64_native_gregset32_num_regs</a> = <a class="code" href="i386-linux-tdep_8h.html#a4eae9a5d8940d8aaf442acd0c604cce3">I386_LINUX_NUM_REGS</a>;
<a name="l01176"></a>01176   <a class="code" href="amd64-nat_8c.html#adca38a2ac029e8a827c6da187eb18e79">amd64_native_gregset64_reg_offset</a> = <a class="code" href="amd64-linux-tdep_8c.html#a323146b8289a38821bac92ea0e613ef1">amd64_linux_gregset_reg_offset</a>;
<a name="l01177"></a>01177   <a class="code" href="amd64-nat_8c.html#ac7cc93dfa7391d38f18e1eea2397a840">amd64_native_gregset64_num_regs</a> = <a class="code" href="amd64-linux-tdep_8h.html#a87c5da6e05da4d9ffe909d61a6f902be">AMD64_LINUX_NUM_REGS</a>;
<a name="l01178"></a>01178 
<a name="l01179"></a>01179   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (ARRAY_SIZE (<a class="code" href="amd64-linux-nat_8c.html#aaf7cb00f58d860251eb579c6b7551276">amd64_linux_gregset32_reg_offset</a>)
<a name="l01180"></a>01180               == <a class="code" href="amd64-nat_8c.html#a6113223b94a68ce910253ca82d9d5f9c">amd64_native_gregset32_num_regs</a>);
<a name="l01181"></a>01181 
<a name="l01182"></a>01182   <span class="comment">/* Fill in the generic GNU/Linux methods.  */</span>
<a name="l01183"></a>01183   t = <a class="code" href="linux-nat_8c.html#a034a343acfed517edaab57ff91b59d70">linux_target</a> ();
<a name="l01184"></a>01184 
<a name="l01185"></a>01185   <a class="code" href="i386-nat_8c.html#a894b2e1a1a9f933aec0f11ff7eb2427d">i386_use_watchpoints</a> (t);
<a name="l01186"></a>01186 
<a name="l01187"></a>01187   <a class="code" href="i386-nat_8c.html#a49361b63a214b65148a2f11fff97b2e6">i386_dr_low</a>.<a class="code" href="structi386__dr__low__type.html#a937bf34133f1b2690040d818650028a1">set_control</a> = <a class="code" href="amd64-linux-nat_8c.html#a4ddb1ba63fe9d6f502ea0a0eea02b75e">amd64_linux_dr_set_control</a>;
<a name="l01188"></a>01188   <a class="code" href="i386-nat_8c.html#a49361b63a214b65148a2f11fff97b2e6">i386_dr_low</a>.<a class="code" href="structi386__dr__low__type.html#a46b8820507c7c281056481b5c82d17a1">set_addr</a> = <a class="code" href="amd64-linux-nat_8c.html#a281ce2ea56f469c7f75b3f6c292b8d2a">amd64_linux_dr_set_addr</a>;
<a name="l01189"></a>01189   <a class="code" href="i386-nat_8c.html#a49361b63a214b65148a2f11fff97b2e6">i386_dr_low</a>.<a class="code" href="structi386__dr__low__type.html#a229bff0ed55bd728210f47a8c955f6af">get_addr</a> = <a class="code" href="amd64-linux-nat_8c.html#a8d73f67151b9978745bce59bea23a33b">amd64_linux_dr_get_addr</a>;
<a name="l01190"></a>01190   <a class="code" href="i386-nat_8c.html#a49361b63a214b65148a2f11fff97b2e6">i386_dr_low</a>.<a class="code" href="structi386__dr__low__type.html#a1510f9d75239974d17b345323fcf525f">get_status</a> = <a class="code" href="amd64-linux-nat_8c.html#aae5f64f3672a2a7fcdc4da5bb9b7c1cf">amd64_linux_dr_get_status</a>;
<a name="l01191"></a>01191   <a class="code" href="i386-nat_8c.html#a49361b63a214b65148a2f11fff97b2e6">i386_dr_low</a>.<a class="code" href="structi386__dr__low__type.html#a130d2f2c29c2da325727cfb8cd73cdbf">get_control</a> = <a class="code" href="amd64-linux-nat_8c.html#a1d680867d308c48c005fe7a7017c0793">amd64_linux_dr_get_control</a>;
<a name="l01192"></a>01192   <a class="code" href="i386-nat_8c.html#a78251dc818d434cecb05fe7328084059">i386_set_debug_register_length</a> (8);
<a name="l01193"></a>01193 
<a name="l01194"></a>01194   <span class="comment">/* Override the GNU/Linux inferior startup hook.  */</span>
<a name="l01195"></a>01195   <a class="code" href="amd64-linux-nat_8c.html#ad1116fe80205070a65d08c3dd62d1176">super_post_startup_inferior</a> = t-&gt;<a class="code" href="structtarget__ops.html#a648c885a1b58067c71517d41e66a7c5a">to_post_startup_inferior</a>;
<a name="l01196"></a>01196   t-&gt;<a class="code" href="structtarget__ops.html#a648c885a1b58067c71517d41e66a7c5a">to_post_startup_inferior</a> = <a class="code" href="amd64-linux-nat_8c.html#a9d31c9b0277779630cbb33cbed3de325">amd64_linux_child_post_startup_inferior</a>;
<a name="l01197"></a>01197 
<a name="l01198"></a>01198   <span class="comment">/* Add our register access methods.  */</span>
<a name="l01199"></a>01199   t-&gt;<a class="code" href="structtarget__ops.html#a117d2a74c4c794d5b309b106a413ef10">to_fetch_registers</a> = <a class="code" href="amd64-linux-nat_8c.html#ae8f2b3335dcb6668e232d2c20ba6b3c0">amd64_linux_fetch_inferior_registers</a>;
<a name="l01200"></a>01200   t-&gt;<a class="code" href="structtarget__ops.html#a755da40b533b1467a0583a5c8e91a400">to_store_registers</a> = <a class="code" href="amd64-linux-nat_8c.html#ae9561627fba39fb87ac38916405b57be">amd64_linux_store_inferior_registers</a>;
<a name="l01201"></a>01201 
<a name="l01202"></a>01202   t-&gt;<a class="code" href="structtarget__ops.html#ad68ca23fd9f64e5a0c37f279c0e781a3">to_read_description</a> = <a class="code" href="amd64-linux-nat_8c.html#a147c00a6a3f412e6b87c38d21782334c">amd64_linux_read_description</a>;
<a name="l01203"></a>01203 
<a name="l01204"></a>01204   <span class="comment">/* Add btrace methods.  */</span>
<a name="l01205"></a>01205   t-&gt;<a class="code" href="structtarget__ops.html#a0416b96f2882fdf2c1253bc353dfa5de">to_supports_btrace</a> = <a class="code" href="linux-btrace_8c.html#a69bf2ed07c97202ec37549bd05ea6af0">linux_supports_btrace</a>;
<a name="l01206"></a>01206   t-&gt;<a class="code" href="structtarget__ops.html#af2a10b0c92985dba5b5c14e38ce75019">to_enable_btrace</a> = <a class="code" href="amd64-linux-nat_8c.html#ac65f4d837181701df8d3718485796450">amd64_linux_enable_btrace</a>;
<a name="l01207"></a>01207   t-&gt;<a class="code" href="structtarget__ops.html#abba94b5bab83c35f2ea991b6beff447a">to_disable_btrace</a> = <a class="code" href="amd64-linux-nat_8c.html#a1b298ea59739fbc468e3ef0da21e50af">amd64_linux_disable_btrace</a>;
<a name="l01208"></a>01208   t-&gt;<a class="code" href="structtarget__ops.html#abf1f5102b2fdb7288bedfddc928ebba2">to_teardown_btrace</a> = <a class="code" href="amd64-linux-nat_8c.html#af3a161e306a617a70ae3f6ba6dd3b70b">amd64_linux_teardown_btrace</a>;
<a name="l01209"></a>01209   t-&gt;to_read_btrace = linux_read_btrace;
<a name="l01210"></a>01210 
<a name="l01211"></a>01211   <span class="comment">/* Register the target.  */</span>
<a name="l01212"></a>01212   <a class="code" href="linux-nat_8c.html#acb905f314f4b217cec0c77ea69574320">linux_nat_add_target</a> (t);
<a name="l01213"></a>01213   <a class="code" href="linux-nat_8c.html#a1ad9dfc1816b111fe9f9711f178dcb49">linux_nat_set_new_thread</a> (t, <a class="code" href="amd64-linux-nat_8c.html#abd0e07661df420cd1603fbabfb88f8de">amd64_linux_new_thread</a>);
<a name="l01214"></a>01214   <a class="code" href="linux-nat_8c.html#a12315e398f38c8113fd5f120fa7c531e">linux_nat_set_new_fork</a> (t, <a class="code" href="amd64-linux-nat_8c.html#ad7fc2e89e30deef4725cd7d8bf62282b">amd64_linux_new_fork</a>);
<a name="l01215"></a>01215   <a class="code" href="linux-nat_8c.html#a9eb32a878388332a71b4f75f526ee973">linux_nat_set_forget_process</a> (t, <a class="code" href="i386-nat_8c.html#a2ab128256f186ab592bbf671bc48f8c4">i386_forget_process</a>);
<a name="l01216"></a>01216   <a class="code" href="linux-nat_8c.html#aafad26f00a15b195d96a168a9fb65124">linux_nat_set_siginfo_fixup</a> (t, <a class="code" href="amd64-linux-nat_8c.html#a188fdab6a57d0d73637eebde265fa940">amd64_linux_siginfo_fixup</a>);
<a name="l01217"></a>01217   <a class="code" href="linux-nat_8c.html#ab26d4a0ba36b5fe14525e7309402100e">linux_nat_set_prepare_to_resume</a> (t, <a class="code" href="amd64-linux-nat_8c.html#a7f694bb28bfb6a7ae8ab1506682d764a">amd64_linux_prepare_to_resume</a>);
<a name="l01218"></a>01218 }
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 11 2013 14:13:22 for GDB (xrefs) by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
