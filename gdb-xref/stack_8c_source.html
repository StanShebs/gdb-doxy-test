<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>GDB (xrefs): /home/stan/gdb/src/gdb/stack.c Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">GDB (xrefs)
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">/home/stan/gdb/src/gdb/stack.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="stack_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* Print and select stack frames for GDB, the GNU debugger.</span>
<a name="l00002"></a>00002 <span class="comment"></span>
<a name="l00003"></a>00003 <span class="comment">   Copyright (C) 1986-2013 Free Software Foundation, Inc.</span>
<a name="l00004"></a>00004 <span class="comment"></span>
<a name="l00005"></a>00005 <span class="comment">   This file is part of GDB.</span>
<a name="l00006"></a>00006 <span class="comment"></span>
<a name="l00007"></a>00007 <span class="comment">   This program is free software; you can redistribute it and/or modify</span>
<a name="l00008"></a>00008 <span class="comment">   it under the terms of the GNU General Public License as published by</span>
<a name="l00009"></a>00009 <span class="comment">   the Free Software Foundation; either version 3 of the License, or</span>
<a name="l00010"></a>00010 <span class="comment">   (at your option) any later version.</span>
<a name="l00011"></a>00011 <span class="comment"></span>
<a name="l00012"></a>00012 <span class="comment">   This program is distributed in the hope that it will be useful,</span>
<a name="l00013"></a>00013 <span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00014"></a>00014 <span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00015"></a>00015 <span class="comment">   GNU General Public License for more details.</span>
<a name="l00016"></a>00016 <span class="comment"></span>
<a name="l00017"></a>00017 <span class="comment">   You should have received a copy of the GNU General Public License</span>
<a name="l00018"></a>00018 <span class="comment">   along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.  */</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#include &quot;<a class="code" href="defs_8h.html">defs.h</a>&quot;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &quot;<a class="code" href="value_8h.html">value.h</a>&quot;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;<a class="code" href="symtab_8h.html">symtab.h</a>&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;<a class="code" href="gdbtypes_8h.html">gdbtypes.h</a>&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="expression_8h.html">expression.h</a>&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="language_8h.html">language.h</a>&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="frame_8h.html">frame.h</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="gdbcmd_8h.html">gdbcmd.h</a>&quot;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="gdbcore_8h.html">gdbcore.h</a>&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="target_8h.html">target.h</a>&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="source_8h.html">source.h</a>&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="breakpoint_8h.html">breakpoint.h</a>&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;demangle.h&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;<a class="code" href="inferior_8h.html">inferior.h</a>&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="annotate_8h.html">annotate.h</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="ui-out_8h.html">ui-out.h</a>&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="block_8h.html">block.h</a>&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="stack_8h.html">stack.h</a>&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="dictionary_8h.html">dictionary.h</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="exceptions_8h.html">exceptions.h</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="reggroups_8h.html">reggroups.h</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="regcache_8h.html">regcache.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="solib_8h.html">solib.h</a>&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="valprint_8h.html">valprint.h</a>&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="gdbthread_8h.html">gdbthread.h</a>&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;<a class="code" href="cp-support_8h.html">cp-support.h</a>&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="disasm_8h.html">disasm.h</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="inline-frame_8h.html">inline-frame.h</a>&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;<a class="code" href="linespec_8h.html">linespec.h</a>&quot;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &quot;<a class="code" href="cli-utils_8h.html">cli/cli-utils.h</a>&quot;</span>
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="preprocessor">#include &quot;<a class="code" href="gdb__assert_8h.html">gdb_assert.h</a>&quot;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &lt;ctype.h&gt;</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &quot;<a class="code" href="gdb__string_8h.html">gdb_string.h</a>&quot;</span>
<a name="l00054"></a>00054 
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;<a class="code" href="symfile_8h.html">symfile.h</a>&quot;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include &quot;<a class="code" href="python_8h.html">python/python.h</a>&quot;</span>
<a name="l00057"></a>00057 
<a name="l00058"></a><a class="code" href="stack_8c.html#a1638e2b689334ca09f7717d577613f96">00058</a> void (*<a class="code" href="frame_8h.html#a1638e2b689334ca09f7717d577613f96">deprecated_selected_frame_level_changed_hook</a>) (<a class="code" href="command_8h.html#a74f207b5aa4ba51c3a2ad59b219a423b">int</a>);
<a name="l00059"></a>00059 
<a name="l00060"></a>00060 <span class="comment">/* The possible choices of &quot;set print frame-arguments&quot;, and the value</span>
<a name="l00061"></a>00061 <span class="comment">   of this setting.  */</span>
<a name="l00062"></a>00062 
<a name="l00063"></a><a class="code" href="stack_8c.html#a5ccc49a256b120bb2c05d2b791d93f36">00063</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="stack_8c.html#a5ccc49a256b120bb2c05d2b791d93f36">print_frame_arguments_choices</a>[] =
<a name="l00064"></a>00064   {<span class="stringliteral">&quot;all&quot;</span>, <span class="stringliteral">&quot;scalars&quot;</span>, <span class="stringliteral">&quot;none&quot;</span>, NULL};
<a name="l00065"></a><a class="code" href="stack_8c.html#affd7a00dca2d9a9b2fb0804ac172552c">00065</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="stack_8c.html#affd7a00dca2d9a9b2fb0804ac172552c">print_frame_arguments</a> = <span class="stringliteral">&quot;scalars&quot;</span>;
<a name="l00066"></a>00066 
<a name="l00067"></a>00067 <span class="comment">/* If non-zero, don&#39;t invoke pretty-printers for frame arguments.  */</span>
<a name="l00068"></a><a class="code" href="stack_8c.html#ad552f1563c23446bf8bfeca354d3f20e">00068</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="stack_8c.html#ad552f1563c23446bf8bfeca354d3f20e">print_raw_frame_arguments</a>;
<a name="l00069"></a>00069 
<a name="l00070"></a>00070 <span class="comment">/* The possible choices of &quot;set print entry-values&quot;, and the value</span>
<a name="l00071"></a>00071 <span class="comment">   of this setting.  */</span>
<a name="l00072"></a>00072 
<a name="l00073"></a><a class="code" href="stack_8c.html#acef9f94ae4634a8f60eb3a572216851d">00073</a> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="frame_8h.html#acef9f94ae4634a8f60eb3a572216851d">print_entry_values_no</a>[] = <span class="stringliteral">&quot;no&quot;</span>;
<a name="l00074"></a><a class="code" href="stack_8c.html#acb314d10dfd5817a8561ff32d1de95d8">00074</a> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="frame_8h.html#acb314d10dfd5817a8561ff32d1de95d8">print_entry_values_only</a>[] = <span class="stringliteral">&quot;only&quot;</span>;
<a name="l00075"></a><a class="code" href="stack_8c.html#a530d44de0aecb9c1873762eaa09476a5">00075</a> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="frame_8h.html#a530d44de0aecb9c1873762eaa09476a5">print_entry_values_preferred</a>[] = <span class="stringliteral">&quot;preferred&quot;</span>;
<a name="l00076"></a><a class="code" href="stack_8c.html#aad734ac747e7c14570eacc8394988122">00076</a> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="frame_8h.html#aad734ac747e7c14570eacc8394988122">print_entry_values_if_needed</a>[] = <span class="stringliteral">&quot;if-needed&quot;</span>;
<a name="l00077"></a><a class="code" href="stack_8c.html#a11cf31f117f9519bab242d9201a6d0a1">00077</a> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="frame_8h.html#a11cf31f117f9519bab242d9201a6d0a1">print_entry_values_both</a>[] = <span class="stringliteral">&quot;both&quot;</span>;
<a name="l00078"></a><a class="code" href="stack_8c.html#a60c2b27815bdc266c1a255682a6dc188">00078</a> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="frame_8h.html#a60c2b27815bdc266c1a255682a6dc188">print_entry_values_compact</a>[] = <span class="stringliteral">&quot;compact&quot;</span>;
<a name="l00079"></a><a class="code" href="stack_8c.html#a649d945f326143d79087ad51b8e283eb">00079</a> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="frame_8h.html#a649d945f326143d79087ad51b8e283eb">print_entry_values_default</a>[] = <span class="stringliteral">&quot;default&quot;</span>;
<a name="l00080"></a><a class="code" href="stack_8c.html#adec1f7baa17b7dad89d9ba70bb5ec6d9">00080</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="stack_8c.html#adec1f7baa17b7dad89d9ba70bb5ec6d9">print_entry_values_choices</a>[] =
<a name="l00081"></a>00081 {
<a name="l00082"></a>00082   <a class="code" href="frame_8h.html#acef9f94ae4634a8f60eb3a572216851d">print_entry_values_no</a>,
<a name="l00083"></a>00083   <a class="code" href="frame_8h.html#acb314d10dfd5817a8561ff32d1de95d8">print_entry_values_only</a>,
<a name="l00084"></a>00084   <a class="code" href="frame_8h.html#a530d44de0aecb9c1873762eaa09476a5">print_entry_values_preferred</a>,
<a name="l00085"></a>00085   <a class="code" href="frame_8h.html#aad734ac747e7c14570eacc8394988122">print_entry_values_if_needed</a>,
<a name="l00086"></a>00086   <a class="code" href="frame_8h.html#a11cf31f117f9519bab242d9201a6d0a1">print_entry_values_both</a>,
<a name="l00087"></a>00087   <a class="code" href="frame_8h.html#a60c2b27815bdc266c1a255682a6dc188">print_entry_values_compact</a>,
<a name="l00088"></a>00088   <a class="code" href="frame_8h.html#a649d945f326143d79087ad51b8e283eb">print_entry_values_default</a>,
<a name="l00089"></a>00089   NULL
<a name="l00090"></a>00090 };
<a name="l00091"></a><a class="code" href="stack_8c.html#a63d7b1862ccbc9987aac7ad11d8c57a6">00091</a> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="frame_8h.html#a63d7b1862ccbc9987aac7ad11d8c57a6">print_entry_values</a> = <a class="code" href="frame_8h.html#a649d945f326143d79087ad51b8e283eb">print_entry_values_default</a>;
<a name="l00092"></a>00092 
<a name="l00093"></a>00093 <span class="comment">/* Prototypes for local functions.  */</span>
<a name="l00094"></a>00094 
<a name="l00095"></a>00095 <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="stack_8c.html#a4c5274cb969659e0c4b1ae7e9d029bd1">print_frame_local_vars</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *, <span class="keywordtype">int</span>,
<a name="l00096"></a>00096                                     <span class="keyword">struct</span> <a class="code" href="structui__file.html">ui_file</a> *);
<a name="l00097"></a>00097 
<a name="l00098"></a>00098 <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="stack_8c.html#ab3f10aab610905e59c2a90953afd1d24">print_frame</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame, <span class="keywordtype">int</span> print_level,
<a name="l00099"></a>00099                          <span class="keyword">enum</span> <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4">print_what</a> <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4">print_what</a>,  <span class="keywordtype">int</span> print_args,
<a name="l00100"></a>00100                          <span class="keyword">struct</span> <a class="code" href="structsymtab__and__line.html">symtab_and_line</a> sal);
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="stack_8c.html#ab21472d3608ef89bb34c28b79c5ec8a4">set_last_displayed_sal</a> (<span class="keywordtype">int</span> valid,
<a name="l00103"></a>00103                                     <span class="keyword">struct</span> <a class="code" href="structprogram__space.html">program_space</a> *pspace,
<a name="l00104"></a>00104                                     <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> addr,
<a name="l00105"></a>00105                                     <span class="keyword">struct</span> <a class="code" href="structsymtab.html">symtab</a> *<a class="code" href="structsymtab.html">symtab</a>,
<a name="l00106"></a>00106                                     <span class="keywordtype">int</span> <a class="code" href="symtab_8h.html#a41ebd28ef1d7c6ade45642cb6acc1039">line</a>);
<a name="l00107"></a>00107 
<a name="l00108"></a>00108 <span class="comment">/* Zero means do things normally; we are interacting directly with the</span>
<a name="l00109"></a>00109 <span class="comment">   user.  One means print the full filename and linenumber when a</span>
<a name="l00110"></a>00110 <span class="comment">   frame is printed, and do so in a format emacs18/emacs19.22 can</span>
<a name="l00111"></a>00111 <span class="comment">   parse.  Two means print similar annotations, but in many more</span>
<a name="l00112"></a>00112 <span class="comment">   cases and in a slightly different syntax.  */</span>
<a name="l00113"></a>00113 
<a name="l00114"></a><a class="code" href="stack_8c.html#a8936079e8ffb68b6dec711d3b35133ca">00114</a> <span class="keywordtype">int</span> <a class="code" href="defs_8h.html#a8936079e8ffb68b6dec711d3b35133ca">annotation_level</a> = 0;
<a name="l00115"></a>00115 
<a name="l00116"></a>00116 <span class="comment">/* These variables hold the last symtab and line we displayed to the user.</span>
<a name="l00117"></a>00117 <span class="comment"> * This is where we insert a breakpoint or a skiplist entry by default.  */</span>
<a name="l00118"></a><a class="code" href="stack_8c.html#ac90727e2435cdffbbcbf95329bd8a647">00118</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="stack_8c.html#ac90727e2435cdffbbcbf95329bd8a647">last_displayed_sal_valid</a> = 0;
<a name="l00119"></a><a class="code" href="stack_8c.html#abd30a73ee053f465d720d9841426409a">00119</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structprogram__space.html">program_space</a> *<a class="code" href="stack_8c.html#abd30a73ee053f465d720d9841426409a">last_displayed_pspace</a> = 0;
<a name="l00120"></a><a class="code" href="stack_8c.html#aac9f4bbb5ca2fa6675fbc749f83aac3b">00120</a> <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="stack_8c.html#aac9f4bbb5ca2fa6675fbc749f83aac3b">last_displayed_addr</a> = 0;
<a name="l00121"></a><a class="code" href="stack_8c.html#aa6776ac3d2fa497074008849f76ee46a">00121</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structsymtab.html">symtab</a> *<a class="code" href="stack_8c.html#aa6776ac3d2fa497074008849f76ee46a">last_displayed_symtab</a> = 0;
<a name="l00122"></a><a class="code" href="stack_8c.html#a07f07b6163174341b60f79d96264251d">00122</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="stack_8c.html#a07f07b6163174341b60f79d96264251d">last_displayed_line</a> = 0;
<a name="l00123"></a>00123 
<a name="l00124"></a>00124 
<a name="l00125"></a>00125 <span class="comment">/* Return 1 if we should display the address in addition to the location,</span>
<a name="l00126"></a>00126 <span class="comment">   because we are in the middle of a statement.  */</span>
<a name="l00127"></a>00127 
<a name="l00128"></a>00128 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00129"></a><a class="code" href="stack_8c.html#a9aa522843eefac6f260391f68ddef0de">00129</a> <a class="code" href="stack_8c.html#a9aa522843eefac6f260391f68ddef0de">frame_show_address</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame,
<a name="l00130"></a>00130                     <span class="keyword">struct</span> <a class="code" href="structsymtab__and__line.html">symtab_and_line</a> sal)
<a name="l00131"></a>00131 {
<a name="l00132"></a>00132   <span class="comment">/* If there is a line number, but no PC, then there is no location</span>
<a name="l00133"></a>00133 <span class="comment">     information associated with this sal.  The only way that should</span>
<a name="l00134"></a>00134 <span class="comment">     happen is for the call sites of inlined functions (SAL comes from</span>
<a name="l00135"></a>00135 <span class="comment">     find_frame_sal).  Otherwise, we would have some PC range if the</span>
<a name="l00136"></a>00136 <span class="comment">     SAL came from a line table.  */</span>
<a name="l00137"></a>00137   <span class="keywordflow">if</span> (sal.<a class="code" href="structsymtab__and__line.html#a6a0468be675b9ac19a5b3ef26f471eaf">line</a> != 0 &amp;&amp; sal.<a class="code" href="structsymtab__and__line.html#a77665fa461ad187cb755efa256ba44d7">pc</a> == 0 &amp;&amp; sal.<a class="code" href="structsymtab__and__line.html#ab4a806871b9f98729ab7c9c2c345b602">end</a> == 0)
<a name="l00138"></a>00138     {
<a name="l00139"></a>00139       <span class="keywordflow">if</span> (<a class="code" href="frame_8c.html#a80df189cf511651209609685d5380340">get_next_frame</a> (frame) == NULL)
<a name="l00140"></a>00140         <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (<a class="code" href="inline-frame_8c.html#abca4e4f3327e828bb05a0fed65ed864a">inline_skipped_frames</a> (<a class="code" href="infcmd_8c.html#a428c5be9ce5e70bd03760e828e19c6b7">inferior_ptid</a>) &gt; 0);
<a name="l00141"></a>00141       <span class="keywordflow">else</span>
<a name="l00142"></a>00142         <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (<a class="code" href="frame_8c.html#a8f965671d7b55f002c993385024a2fdb">get_frame_type</a> (<a class="code" href="frame_8c.html#a80df189cf511651209609685d5380340">get_next_frame</a> (frame)) == <a class="code" href="frame_8h.html#a3ca2c0bc7578bf3d337e34b2c08a6c5faec50e9f25cd04e445a8c7b56ea98c790">INLINE_FRAME</a>);
<a name="l00143"></a>00143       <span class="keywordflow">return</span> 0;
<a name="l00144"></a>00144     }
<a name="l00145"></a>00145 
<a name="l00146"></a>00146   <span class="keywordflow">return</span> <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (frame) != sal.<a class="code" href="structsymtab__and__line.html#a77665fa461ad187cb755efa256ba44d7">pc</a>;
<a name="l00147"></a>00147 }
<a name="l00148"></a>00148 
<a name="l00149"></a>00149 <span class="comment">/* Show or print a stack frame FRAME briefly.  The output is format</span>
<a name="l00150"></a>00150 <span class="comment">   according to PRINT_LEVEL and PRINT_WHAT printing the frame&#39;s</span>
<a name="l00151"></a>00151 <span class="comment">   relative level, function name, argument list, and file name and</span>
<a name="l00152"></a>00152 <span class="comment">   line number.  If the frame&#39;s PC is not at the beginning of the</span>
<a name="l00153"></a>00153 <span class="comment">   source line, the actual PC is printed at the beginning.  */</span>
<a name="l00154"></a>00154 
<a name="l00155"></a>00155 <span class="keywordtype">void</span>
<a name="l00156"></a><a class="code" href="stack_8c.html#a67b06f06d5ee525f8ef1be5477c29e97">00156</a> <a class="code" href="frame_8h.html#a849748a17da39e76cc4648e83c64c344">print_stack_frame</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame, <span class="keywordtype">int</span> print_level,
<a name="l00157"></a>00157                    <span class="keyword">enum</span> <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4">print_what</a> <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4">print_what</a>,
<a name="l00158"></a>00158                    <span class="keywordtype">int</span> set_current_sal)
<a name="l00159"></a>00159 {
<a name="l00160"></a>00160   <span class="keyword">volatile</span> <span class="keyword">struct </span><a class="code" href="structgdb__exception.html">gdb_exception</a> e;
<a name="l00161"></a>00161 
<a name="l00162"></a>00162   <span class="comment">/* For mi, alway print location and address.  */</span>
<a name="l00163"></a>00163   <span class="keywordflow">if</span> (<a class="code" href="ui-out_8c.html#a473db54efcfbc60feeb5a4f54f27af46">ui_out_is_mi_like_p</a> (<a class="code" href="ui-out_8c.html#a3d9e2a5710f076cc035ef73920eb8c87">current_uiout</a>))
<a name="l00164"></a>00164     print_what = <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4ac928790b2192fa6a3fb9dddb1f6acbf9">LOC_AND_ADDRESS</a>;
<a name="l00165"></a>00165 
<a name="l00166"></a>00166   <a class="code" href="exceptions_8h.html#aef4514ee39b9305fddee27f49c7c34eb">TRY_CATCH</a> (e, <a class="code" href="exceptions_8h.html#abfa3a3b99557b11f5766baf69465fdf6a44de51845416ac49ab08438792b908f0">RETURN_MASK_ERROR</a>)
<a name="l00167"></a>00167     {
<a name="l00168"></a>00168       <span class="keywordtype">int</span> center = (print_what == <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4ac3894bab13e59fc69fb20fe1d532b6e6">SRC_LINE</a> || print_what == <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4a706a5abb481e7684ba3944582daf6727">SRC_AND_LOC</a>);
<a name="l00169"></a>00169 
<a name="l00170"></a>00170       <a class="code" href="frame_8h.html#acda4e77a54a6d0978784516c9c12686d">print_frame_info</a> (frame, print_level, print_what, 1 <span class="comment">/* print_args */</span>,
<a name="l00171"></a>00171                         set_current_sal);
<a name="l00172"></a>00172       <span class="keywordflow">if</span> (set_current_sal)
<a name="l00173"></a>00173         <a class="code" href="frame_8h.html#a4813bb9eb736c92d9c9a7e90172da4e0">set_current_sal_from_frame</a> (frame, center);
<a name="l00174"></a>00174     }
<a name="l00175"></a>00175 }
<a name="l00176"></a>00176 
<a name="l00177"></a>00177 <span class="comment">/* Print nameless arguments of frame FRAME on STREAM, where START is</span>
<a name="l00178"></a>00178 <span class="comment">   the offset of the first nameless argument, and NUM is the number of</span>
<a name="l00179"></a>00179 <span class="comment">   nameless arguments to print.  FIRST is nonzero if this is the first</span>
<a name="l00180"></a>00180 <span class="comment">   argument (not just the first nameless argument).  */</span>
<a name="l00181"></a>00181 
<a name="l00182"></a>00182 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00183"></a><a class="code" href="stack_8c.html#a534d0f97b10e093b66f9f0b868cb6d82">00183</a> <a class="code" href="stack_8c.html#a534d0f97b10e093b66f9f0b868cb6d82">print_frame_nameless_args</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame, <span class="keywordtype">long</span> start, <span class="keywordtype">int</span> num,
<a name="l00184"></a>00184                            <span class="keywordtype">int</span> first, <span class="keyword">struct</span> <a class="code" href="structui__file.html">ui_file</a> *stream)
<a name="l00185"></a>00185 {
<a name="l00186"></a>00186   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (frame);
<a name="l00187"></a>00187   <span class="keyword">enum</span> bfd_endian <a class="code" href="structgdbarch.html#a7a9dd6544406e9cbb574dae9d531346e">byte_order</a> = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l00188"></a>00188   <span class="keywordtype">int</span> i;
<a name="l00189"></a>00189   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> argsaddr;
<a name="l00190"></a>00190   <span class="keywordtype">long</span> arg_value;
<a name="l00191"></a>00191 
<a name="l00192"></a>00192   <span class="keywordflow">for</span> (i = 0; i &lt; num; i++)
<a name="l00193"></a>00193     {
<a name="l00194"></a>00194       <a class="code" href="defs_8h.html#ad24e2b54375e12474e65ebf7175988fb">QUIT</a>;
<a name="l00195"></a>00195       argsaddr = <a class="code" href="frame_8c.html#a443527eda97ba168d03fb1fc3adbfa3b">get_frame_args_address</a> (frame);
<a name="l00196"></a>00196       <span class="keywordflow">if</span> (!argsaddr)
<a name="l00197"></a>00197         <span class="keywordflow">return</span>;
<a name="l00198"></a>00198       arg_value = <a class="code" href="corefile_8c.html#a7097ab90f56ed7bcceb190bab139621b">read_memory_integer</a> (argsaddr + start,
<a name="l00199"></a>00199                                        <span class="keyword">sizeof</span> (<span class="keywordtype">int</span>), byte_order);
<a name="l00200"></a>00200       <span class="keywordflow">if</span> (!first)
<a name="l00201"></a>00201         <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (stream, <span class="stringliteral">&quot;, &quot;</span>);
<a name="l00202"></a>00202       <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (stream, <span class="stringliteral">&quot;%ld&quot;</span>, arg_value);
<a name="l00203"></a>00203       first = 0;
<a name="l00204"></a>00204       start += <span class="keyword">sizeof</span> (<a class="code" href="command_8h.html#a74f207b5aa4ba51c3a2ad59b219a423b">int</a>);
<a name="l00205"></a>00205     }
<a name="l00206"></a>00206 }
<a name="l00207"></a>00207 
<a name="l00208"></a>00208 <span class="comment">/* Print single argument of inferior function.  ARG must be already</span>
<a name="l00209"></a>00209 <span class="comment">   read in.</span>
<a name="l00210"></a>00210 <span class="comment"></span>
<a name="l00211"></a>00211 <span class="comment">   Errors are printed as if they would be the parameter value.  Use zeroed ARG</span>
<a name="l00212"></a>00212 <span class="comment">   iff it should not be printed accoring to user settings.  */</span>
<a name="l00213"></a>00213 
<a name="l00214"></a>00214 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00215"></a><a class="code" href="stack_8c.html#ac309557c845ac1387c3b93183dc33482">00215</a> <a class="code" href="stack_8c.html#ac309557c845ac1387c3b93183dc33482">print_frame_arg</a> (<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structframe__arg.html">frame_arg</a> *arg)
<a name="l00216"></a>00216 {
<a name="l00217"></a>00217   <span class="keyword">struct </span><a class="code" href="structui__out.html">ui_out</a> *uiout = <a class="code" href="ui-out_8c.html#a3d9e2a5710f076cc035ef73920eb8c87">current_uiout</a>;
<a name="l00218"></a>00218   <span class="keyword">volatile</span> <span class="keyword">struct </span><a class="code" href="structgdb__exception.html">gdb_exception</a> except;
<a name="l00219"></a>00219   <span class="keyword">struct </span><a class="code" href="structcleanup.html">cleanup</a> *old_chain;
<a name="l00220"></a>00220   <span class="keyword">struct </span><a class="code" href="structui__file.html">ui_file</a> *stb;
<a name="l00221"></a>00221 
<a name="l00222"></a>00222   stb = <a class="code" href="ui-file_8c.html#a340771735f105582d314e191a399a45c">mem_fileopen</a> ();
<a name="l00223"></a>00223   old_chain = <a class="code" href="utils_8c.html#a94dc56baeb57791e114136764f7763aa">make_cleanup_ui_file_delete</a> (stb);
<a name="l00224"></a>00224 
<a name="l00225"></a>00225   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (!arg-&gt;<a class="code" href="structframe__arg.html#a8e7137afb81b7925e857a88aac2dc614">val</a> || !arg-&gt;<a class="code" href="structframe__arg.html#a2c915e34171ef9c76dc5b75c4785ecfe">error</a>);
<a name="l00226"></a>00226   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (arg-&gt;<a class="code" href="structframe__arg.html#a3e4c0e8a5b26c337d4f0c73d2ee29b3e">entry_kind</a> == <a class="code" href="frame_8h.html#acef9f94ae4634a8f60eb3a572216851d">print_entry_values_no</a>
<a name="l00227"></a>00227               || arg-&gt;<a class="code" href="structframe__arg.html#a3e4c0e8a5b26c337d4f0c73d2ee29b3e">entry_kind</a> == <a class="code" href="frame_8h.html#acb314d10dfd5817a8561ff32d1de95d8">print_entry_values_only</a>
<a name="l00228"></a>00228               || (!<a class="code" href="ui-out_8c.html#a473db54efcfbc60feeb5a4f54f27af46">ui_out_is_mi_like_p</a> (uiout)
<a name="l00229"></a>00229                   &amp;&amp; arg-&gt;<a class="code" href="structframe__arg.html#a3e4c0e8a5b26c337d4f0c73d2ee29b3e">entry_kind</a> == <a class="code" href="frame_8h.html#a60c2b27815bdc266c1a255682a6dc188">print_entry_values_compact</a>));
<a name="l00230"></a>00230 
<a name="l00231"></a>00231   <a class="code" href="annotate_8c.html#a6fa4d50404c9a6c540381f2655569c7a">annotate_arg_begin</a> ();
<a name="l00232"></a>00232 
<a name="l00233"></a>00233   <a class="code" href="ui-out_8c.html#aaf5a0c991d74ad2e486f420d5c2ff058">make_cleanup_ui_out_tuple_begin_end</a> (uiout, NULL);
<a name="l00234"></a>00234   <a class="code" href="utils_8c.html#ab6cbc55040f60777508417f7708b7eb5">fprintf_symbol_filtered</a> (stb, <a class="code" href="symtab_8h.html#ac7f4cb1648125545fbd0e4f13b0c572c">SYMBOL_PRINT_NAME</a> (arg-&gt;<a class="code" href="structframe__arg.html#aef5b6d77809b8acceb4759b477c1feff">sym</a>),
<a name="l00235"></a>00235                            <a class="code" href="symtab_8h.html#a82fc22e60b1007c826a5ebf7d6593e78">SYMBOL_LANGUAGE</a> (arg-&gt;<a class="code" href="structframe__arg.html#aef5b6d77809b8acceb4759b477c1feff">sym</a>), DMGL_PARAMS | DMGL_ANSI);
<a name="l00236"></a>00236   <span class="keywordflow">if</span> (arg-&gt;<a class="code" href="structframe__arg.html#a3e4c0e8a5b26c337d4f0c73d2ee29b3e">entry_kind</a> == <a class="code" href="frame_8h.html#a60c2b27815bdc266c1a255682a6dc188">print_entry_values_compact</a>)
<a name="l00237"></a>00237     {
<a name="l00238"></a>00238       <span class="comment">/* It is OK to provide invalid MI-like stream as with</span>
<a name="l00239"></a>00239 <span class="comment">         PRINT_ENTRY_VALUE_COMPACT we never use MI.  */</span>
<a name="l00240"></a>00240       <a class="code" href="utils_8c.html#a4b28488051faf9ab4a2f07633225835f">fputs_filtered</a> (<span class="stringliteral">&quot;=&quot;</span>, stb);
<a name="l00241"></a>00241 
<a name="l00242"></a>00242       <a class="code" href="utils_8c.html#ab6cbc55040f60777508417f7708b7eb5">fprintf_symbol_filtered</a> (stb, <a class="code" href="symtab_8h.html#ac7f4cb1648125545fbd0e4f13b0c572c">SYMBOL_PRINT_NAME</a> (arg-&gt;<a class="code" href="structframe__arg.html#aef5b6d77809b8acceb4759b477c1feff">sym</a>),
<a name="l00243"></a>00243                                <a class="code" href="symtab_8h.html#a82fc22e60b1007c826a5ebf7d6593e78">SYMBOL_LANGUAGE</a> (arg-&gt;<a class="code" href="structframe__arg.html#aef5b6d77809b8acceb4759b477c1feff">sym</a>),
<a name="l00244"></a>00244                                DMGL_PARAMS | DMGL_ANSI);
<a name="l00245"></a>00245     }
<a name="l00246"></a>00246   <span class="keywordflow">if</span> (arg-&gt;<a class="code" href="structframe__arg.html#a3e4c0e8a5b26c337d4f0c73d2ee29b3e">entry_kind</a> == <a class="code" href="frame_8h.html#acb314d10dfd5817a8561ff32d1de95d8">print_entry_values_only</a>
<a name="l00247"></a>00247       || arg-&gt;<a class="code" href="structframe__arg.html#a3e4c0e8a5b26c337d4f0c73d2ee29b3e">entry_kind</a> == <a class="code" href="frame_8h.html#a60c2b27815bdc266c1a255682a6dc188">print_entry_values_compact</a>)
<a name="l00248"></a>00248     <a class="code" href="utils_8c.html#a4b28488051faf9ab4a2f07633225835f">fputs_filtered</a> (<span class="stringliteral">&quot;@entry&quot;</span>, stb);
<a name="l00249"></a>00249   <a class="code" href="ui-out_8c.html#a40106bb0446639417c75a408194a8eee">ui_out_field_stream</a> (uiout, <span class="stringliteral">&quot;name&quot;</span>, stb);
<a name="l00250"></a>00250   <a class="code" href="annotate_8c.html#a88a60bde908c4ac738ce4b91070a0591">annotate_arg_name_end</a> ();
<a name="l00251"></a>00251   <a class="code" href="ui-out_8c.html#a6a23596295dce32ba2a5bd2fd2d309f8">ui_out_text</a> (uiout, <span class="stringliteral">&quot;=&quot;</span>);
<a name="l00252"></a>00252 
<a name="l00253"></a>00253   <span class="keywordflow">if</span> (!arg-&gt;<a class="code" href="structframe__arg.html#a8e7137afb81b7925e857a88aac2dc614">val</a> &amp;&amp; !arg-&gt;<a class="code" href="structframe__arg.html#a2c915e34171ef9c76dc5b75c4785ecfe">error</a>)
<a name="l00254"></a>00254     <a class="code" href="ui-out_8c.html#a6a23596295dce32ba2a5bd2fd2d309f8">ui_out_text</a> (uiout, <span class="stringliteral">&quot;...&quot;</span>);
<a name="l00255"></a>00255   <span class="keywordflow">else</span>
<a name="l00256"></a>00256     {
<a name="l00257"></a>00257       <span class="keywordflow">if</span> (arg-&gt;<a class="code" href="structframe__arg.html#a2c915e34171ef9c76dc5b75c4785ecfe">error</a>)
<a name="l00258"></a>00258         except.<a class="code" href="structgdb__exception.html#a7f57f80c4d36200d121cee8cce513e5f">message</a> = arg-&gt;<a class="code" href="structframe__arg.html#a2c915e34171ef9c76dc5b75c4785ecfe">error</a>;
<a name="l00259"></a>00259       <span class="keywordflow">else</span>
<a name="l00260"></a>00260         {
<a name="l00261"></a>00261           <span class="comment">/* TRY_CATCH has two statements, wrap it in a block.  */</span>
<a name="l00262"></a>00262 
<a name="l00263"></a>00263           <a class="code" href="exceptions_8h.html#aef4514ee39b9305fddee27f49c7c34eb">TRY_CATCH</a> (except, <a class="code" href="exceptions_8h.html#abfa3a3b99557b11f5766baf69465fdf6a44de51845416ac49ab08438792b908f0">RETURN_MASK_ERROR</a>)
<a name="l00264"></a>00264             {
<a name="l00265"></a>00265               <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structlanguage__defn.html">language_defn</a> *<a class="code" href="defs_8h.html#aa37aa8979934d47ac32fd96ecff32202">language</a>;
<a name="l00266"></a>00266               <span class="keyword">struct </span><a class="code" href="structvalue__print__options.html">value_print_options</a> opts;
<a name="l00267"></a>00267 
<a name="l00268"></a>00268               <span class="comment">/* Avoid value_print because it will deref ref parameters.  We</span>
<a name="l00269"></a>00269 <span class="comment">                 just want to print their addresses.  Print ??? for args whose</span>
<a name="l00270"></a>00270 <span class="comment">                 address we do not know.  We pass 2 as &quot;recurse&quot; to val_print</span>
<a name="l00271"></a>00271 <span class="comment">                 because our standard indentation here is 4 spaces, and</span>
<a name="l00272"></a>00272 <span class="comment">                 val_print indents 2 for each recurse.  */</span> 
<a name="l00273"></a>00273 
<a name="l00274"></a>00274               <a class="code" href="annotate_8c.html#ac24fc58e0b9208c3e5f354753d47a881">annotate_arg_value</a> (<a class="code" href="value_8c.html#a263a4c0bee0b0df41074b952d3c121d0">value_type</a> (arg-&gt;<a class="code" href="structframe__arg.html#a8e7137afb81b7925e857a88aac2dc614">val</a>));
<a name="l00275"></a>00275 
<a name="l00276"></a>00276               <span class="comment">/* Use the appropriate language to display our symbol, unless the</span>
<a name="l00277"></a>00277 <span class="comment">                 user forced the language to a specific language.  */</span>
<a name="l00278"></a>00278               <span class="keywordflow">if</span> (<a class="code" href="language_8h.html#ae32fb3eb29743dbdbc197316b4b83f4e">language_mode</a> == <a class="code" href="language_8h.html#ae32fb3eb29743dbdbc197316b4b83f4ea45a4096e956feff249efbb38f3be6c7e">language_mode_auto</a>)
<a name="l00279"></a>00279                 language = <a class="code" href="language_8c.html#adba6bd079cb2f1df763354ec97abe0cd">language_def</a> (<a class="code" href="symtab_8h.html#a82fc22e60b1007c826a5ebf7d6593e78">SYMBOL_LANGUAGE</a> (arg-&gt;<a class="code" href="structframe__arg.html#aef5b6d77809b8acceb4759b477c1feff">sym</a>));
<a name="l00280"></a>00280               <span class="keywordflow">else</span>
<a name="l00281"></a>00281                 language = <a class="code" href="language_8c.html#acd2505a014a95629da9c836f8914fc79">current_language</a>;
<a name="l00282"></a>00282 
<a name="l00283"></a>00283               <a class="code" href="valprint_8c.html#a22fae251967271a4a965010e47e484ae">get_no_prettyformat_print_options</a> (&amp;opts);
<a name="l00284"></a>00284               opts.<a class="code" href="structvalue__print__options.html#a60ebf7f26982bd56f13befa7ef7cc686">deref_ref</a> = 1;
<a name="l00285"></a>00285               opts.<a class="code" href="structvalue__print__options.html#a906b0433c8e9bad5a42fa6430026e8cc">raw</a> = <a class="code" href="stack_8c.html#ad552f1563c23446bf8bfeca354d3f20e">print_raw_frame_arguments</a>;
<a name="l00286"></a>00286 
<a name="l00287"></a>00287               <span class="comment">/* True in &quot;summary&quot; mode, false otherwise.  */</span>
<a name="l00288"></a>00288               opts.<a class="code" href="structvalue__print__options.html#ade496374c09f77e4f0f1e8f676cfb10d">summary</a> = !strcmp (<a class="code" href="stack_8c.html#affd7a00dca2d9a9b2fb0804ac172552c">print_frame_arguments</a>, <span class="stringliteral">&quot;scalars&quot;</span>);
<a name="l00289"></a>00289 
<a name="l00290"></a>00290               <a class="code" href="valprint_8c.html#a3b8220f1b9270a2f8b8f4e197f2be9db">common_val_print</a> (arg-&gt;<a class="code" href="structframe__arg.html#a8e7137afb81b7925e857a88aac2dc614">val</a>, stb, 2, &amp;opts, language);
<a name="l00291"></a>00291             }
<a name="l00292"></a>00292         }
<a name="l00293"></a>00293       <span class="keywordflow">if</span> (except.<a class="code" href="structgdb__exception.html#a7f57f80c4d36200d121cee8cce513e5f">message</a>)
<a name="l00294"></a>00294         <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (stb, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;&lt;error reading variable: %s&gt;&quot;</span>),
<a name="l00295"></a>00295                           except.<a class="code" href="structgdb__exception.html#a7f57f80c4d36200d121cee8cce513e5f">message</a>);
<a name="l00296"></a>00296     }
<a name="l00297"></a>00297 
<a name="l00298"></a>00298   <a class="code" href="ui-out_8c.html#a40106bb0446639417c75a408194a8eee">ui_out_field_stream</a> (uiout, <span class="stringliteral">&quot;value&quot;</span>, stb);
<a name="l00299"></a>00299 
<a name="l00300"></a>00300   <span class="comment">/* Also invoke ui_out_tuple_end.  */</span>
<a name="l00301"></a>00301   <a class="code" href="cleanups_8c.html#a8b313a4f1c613973ea444e5fa54976f8">do_cleanups</a> (old_chain);
<a name="l00302"></a>00302 
<a name="l00303"></a>00303   <a class="code" href="annotate_8c.html#a4eca0c82b19854a8696b729c551aa87a">annotate_arg_end</a> ();
<a name="l00304"></a>00304 }
<a name="l00305"></a>00305 
<a name="l00306"></a>00306 <span class="comment">/* Read in inferior function local SYM at FRAME into ARGP.  Caller is</span>
<a name="l00307"></a>00307 <span class="comment">   responsible for xfree of ARGP-&gt;ERROR.  This function never throws an</span>
<a name="l00308"></a>00308 <span class="comment">   exception.  */</span>
<a name="l00309"></a>00309 
<a name="l00310"></a>00310 <span class="keywordtype">void</span>
<a name="l00311"></a><a class="code" href="stack_8c.html#a8eb73cff19232367272dbd052de6aecd">00311</a> <a class="code" href="frame_8h.html#a8eb73cff19232367272dbd052de6aecd">read_frame_local</a> (<span class="keyword">struct</span> <a class="code" href="structsymbol.html">symbol</a> *sym, <span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame,
<a name="l00312"></a>00312                   <span class="keyword">struct</span> <a class="code" href="structframe__arg.html">frame_arg</a> *argp)
<a name="l00313"></a>00313 {
<a name="l00314"></a>00314   <span class="keyword">volatile</span> <span class="keyword">struct </span><a class="code" href="structgdb__exception.html">gdb_exception</a> except;
<a name="l00315"></a>00315   <span class="keyword">struct </span><a class="code" href="structvalue.html">value</a> *val = NULL;
<a name="l00316"></a>00316 
<a name="l00317"></a>00317   <a class="code" href="exceptions_8h.html#aef4514ee39b9305fddee27f49c7c34eb">TRY_CATCH</a> (except, <a class="code" href="exceptions_8h.html#abfa3a3b99557b11f5766baf69465fdf6a44de51845416ac49ab08438792b908f0">RETURN_MASK_ERROR</a>)
<a name="l00318"></a>00318     {
<a name="l00319"></a>00319       val = <a class="code" href="findvar_8c.html#afeb191a780ccc9cc2d95378bc1413751">read_var_value</a> (sym, frame);
<a name="l00320"></a>00320     }
<a name="l00321"></a>00321 
<a name="l00322"></a>00322   argp-&gt;<a class="code" href="structframe__arg.html#a2c915e34171ef9c76dc5b75c4785ecfe">error</a> = (val == NULL) ? xstrdup (except.<a class="code" href="structgdb__exception.html#a7f57f80c4d36200d121cee8cce513e5f">message</a>) : NULL;
<a name="l00323"></a>00323   argp-&gt;<a class="code" href="structframe__arg.html#aef5b6d77809b8acceb4759b477c1feff">sym</a> = sym;
<a name="l00324"></a>00324   argp-&gt;<a class="code" href="structframe__arg.html#a8e7137afb81b7925e857a88aac2dc614">val</a> = val;
<a name="l00325"></a>00325 }
<a name="l00326"></a>00326 
<a name="l00327"></a>00327 <span class="comment">/* Read in inferior function parameter SYM at FRAME into ARGP.  Caller is</span>
<a name="l00328"></a>00328 <span class="comment">   responsible for xfree of ARGP-&gt;ERROR.  This function never throws an</span>
<a name="l00329"></a>00329 <span class="comment">   exception.  */</span>
<a name="l00330"></a>00330 
<a name="l00331"></a>00331 <span class="keywordtype">void</span>
<a name="l00332"></a><a class="code" href="stack_8c.html#a6800068d9df89417d7ed6169e24d1db3">00332</a> <a class="code" href="frame_8h.html#a6800068d9df89417d7ed6169e24d1db3">read_frame_arg</a> (<span class="keyword">struct</span> <a class="code" href="structsymbol.html">symbol</a> *sym, <span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame,
<a name="l00333"></a>00333                 <span class="keyword">struct</span> <a class="code" href="structframe__arg.html">frame_arg</a> *argp, <span class="keyword">struct</span> <a class="code" href="structframe__arg.html">frame_arg</a> *entryargp)
<a name="l00334"></a>00334 {
<a name="l00335"></a>00335   <span class="keyword">struct </span><a class="code" href="structvalue.html">value</a> *val = NULL, *entryval = NULL;
<a name="l00336"></a>00336   <span class="keywordtype">char</span> *val_error = NULL, *entryval_error = NULL;
<a name="l00337"></a>00337   <span class="keywordtype">int</span> val_equal = 0;
<a name="l00338"></a>00338   <span class="keyword">volatile</span> <span class="keyword">struct </span><a class="code" href="structgdb__exception.html">gdb_exception</a> except;
<a name="l00339"></a>00339 
<a name="l00340"></a>00340   <span class="keywordflow">if</span> (<a class="code" href="frame_8h.html#a63d7b1862ccbc9987aac7ad11d8c57a6">print_entry_values</a> != <a class="code" href="frame_8h.html#acb314d10dfd5817a8561ff32d1de95d8">print_entry_values_only</a>
<a name="l00341"></a>00341       &amp;&amp; <a class="code" href="frame_8h.html#a63d7b1862ccbc9987aac7ad11d8c57a6">print_entry_values</a> != <a class="code" href="frame_8h.html#a530d44de0aecb9c1873762eaa09476a5">print_entry_values_preferred</a>)
<a name="l00342"></a>00342     {
<a name="l00343"></a>00343       <a class="code" href="exceptions_8h.html#aef4514ee39b9305fddee27f49c7c34eb">TRY_CATCH</a> (except, <a class="code" href="exceptions_8h.html#abfa3a3b99557b11f5766baf69465fdf6a44de51845416ac49ab08438792b908f0">RETURN_MASK_ERROR</a>)
<a name="l00344"></a>00344         {
<a name="l00345"></a>00345           val = <a class="code" href="findvar_8c.html#afeb191a780ccc9cc2d95378bc1413751">read_var_value</a> (sym, frame);
<a name="l00346"></a>00346         }
<a name="l00347"></a>00347       <span class="keywordflow">if</span> (!val)
<a name="l00348"></a>00348         {
<a name="l00349"></a>00349           val_error = alloca (strlen (except.<a class="code" href="structgdb__exception.html#a7f57f80c4d36200d121cee8cce513e5f">message</a>) + 1);
<a name="l00350"></a>00350           strcpy (val_error, except.<a class="code" href="structgdb__exception.html#a7f57f80c4d36200d121cee8cce513e5f">message</a>);
<a name="l00351"></a>00351         }
<a name="l00352"></a>00352     }
<a name="l00353"></a>00353 
<a name="l00354"></a>00354   <span class="keywordflow">if</span> (<a class="code" href="symtab_8h.html#a9d6910f7fd67567d273e8ee619e0ef4e">SYMBOL_COMPUTED_OPS</a> (sym) != NULL
<a name="l00355"></a>00355       &amp;&amp; <a class="code" href="symtab_8h.html#a9d6910f7fd67567d273e8ee619e0ef4e">SYMBOL_COMPUTED_OPS</a> (sym)-&gt;read_variable_at_entry != NULL
<a name="l00356"></a>00356       &amp;&amp; <a class="code" href="frame_8h.html#a63d7b1862ccbc9987aac7ad11d8c57a6">print_entry_values</a> != <a class="code" href="frame_8h.html#acef9f94ae4634a8f60eb3a572216851d">print_entry_values_no</a>
<a name="l00357"></a>00357       &amp;&amp; (<a class="code" href="frame_8h.html#a63d7b1862ccbc9987aac7ad11d8c57a6">print_entry_values</a> != <a class="code" href="frame_8h.html#aad734ac747e7c14570eacc8394988122">print_entry_values_if_needed</a>
<a name="l00358"></a>00358           || !val || <a class="code" href="value_8c.html#ac29d8a824744789e9d8302db669dd49f">value_optimized_out</a> (val)))
<a name="l00359"></a>00359     {
<a name="l00360"></a>00360       <a class="code" href="exceptions_8h.html#aef4514ee39b9305fddee27f49c7c34eb">TRY_CATCH</a> (except, <a class="code" href="exceptions_8h.html#abfa3a3b99557b11f5766baf69465fdf6a44de51845416ac49ab08438792b908f0">RETURN_MASK_ERROR</a>)
<a name="l00361"></a>00361         {
<a name="l00362"></a>00362           <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structsymbol__computed__ops.html">symbol_computed_ops</a> *ops;
<a name="l00363"></a>00363 
<a name="l00364"></a>00364           ops = <a class="code" href="symtab_8h.html#a9d6910f7fd67567d273e8ee619e0ef4e">SYMBOL_COMPUTED_OPS</a> (sym);
<a name="l00365"></a>00365           entryval = ops-&gt;<a class="code" href="structsymbol__computed__ops.html#a03a957b656c62923631f2461f0b41fc2">read_variable_at_entry</a> (sym, frame);
<a name="l00366"></a>00366         }
<a name="l00367"></a>00367       <span class="keywordflow">if</span> (!entryval)
<a name="l00368"></a>00368         {
<a name="l00369"></a>00369           entryval_error = alloca (strlen (except.<a class="code" href="structgdb__exception.html#a7f57f80c4d36200d121cee8cce513e5f">message</a>) + 1);
<a name="l00370"></a>00370           strcpy (entryval_error, except.<a class="code" href="structgdb__exception.html#a7f57f80c4d36200d121cee8cce513e5f">message</a>);
<a name="l00371"></a>00371         }
<a name="l00372"></a>00372 
<a name="l00373"></a>00373       <span class="keywordflow">if</span> (except.<a class="code" href="structgdb__exception.html#ab5a701a197af7b5c953242d029c18e75">error</a> == <a class="code" href="exceptions_8h.html#acc42076253600be964e110149b458971aac3d732ed31a67f03dd6a6afa6beb7fe">NO_ENTRY_VALUE_ERROR</a>
<a name="l00374"></a>00374           || (entryval &amp;&amp; <a class="code" href="value_8c.html#ac29d8a824744789e9d8302db669dd49f">value_optimized_out</a> (entryval)))
<a name="l00375"></a>00375         {
<a name="l00376"></a>00376           entryval = NULL;
<a name="l00377"></a>00377           entryval_error = NULL;
<a name="l00378"></a>00378         }
<a name="l00379"></a>00379 
<a name="l00380"></a>00380       <span class="keywordflow">if</span> (<a class="code" href="frame_8h.html#a63d7b1862ccbc9987aac7ad11d8c57a6">print_entry_values</a> == <a class="code" href="frame_8h.html#a60c2b27815bdc266c1a255682a6dc188">print_entry_values_compact</a>
<a name="l00381"></a>00381           || <a class="code" href="frame_8h.html#a63d7b1862ccbc9987aac7ad11d8c57a6">print_entry_values</a> == <a class="code" href="frame_8h.html#a649d945f326143d79087ad51b8e283eb">print_entry_values_default</a>)
<a name="l00382"></a>00382         {
<a name="l00383"></a>00383           <span class="comment">/* For MI do not try to use print_entry_values_compact for ARGP.  */</span>
<a name="l00384"></a>00384 
<a name="l00385"></a>00385           <span class="keywordflow">if</span> (val &amp;&amp; entryval &amp;&amp; !<a class="code" href="ui-out_8c.html#a473db54efcfbc60feeb5a4f54f27af46">ui_out_is_mi_like_p</a> (<a class="code" href="ui-out_8c.html#a3d9e2a5710f076cc035ef73920eb8c87">current_uiout</a>))
<a name="l00386"></a>00386             {
<a name="l00387"></a>00387               <span class="keyword">struct </span><a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a> = <a class="code" href="value_8c.html#a263a4c0bee0b0df41074b952d3c121d0">value_type</a> (val);
<a name="l00388"></a>00388 
<a name="l00389"></a>00389               <span class="keywordflow">if</span> (!<a class="code" href="value_8c.html#ac29d8a824744789e9d8302db669dd49f">value_optimized_out</a> (val)
<a name="l00390"></a>00390                   &amp;&amp; <a class="code" href="value_8c.html#a260c3bb2b5c76722b3dfe14733152803">value_available_contents_eq</a> (val, 0, entryval, 0,
<a name="l00391"></a>00391                                                   <a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type)))
<a name="l00392"></a>00392                 {
<a name="l00393"></a>00393                   <span class="comment">/* Initialize it just to avoid a GCC false warning.  */</span>
<a name="l00394"></a>00394                   <span class="keyword">struct </span><a class="code" href="structvalue.html">value</a> *val_deref = NULL, *entryval_deref;
<a name="l00395"></a>00395 
<a name="l00396"></a>00396                   <span class="comment">/* DW_AT_GNU_call_site_value does match with the current</span>
<a name="l00397"></a>00397 <span class="comment">                     value.  If it is a reference still try to verify if</span>
<a name="l00398"></a>00398 <span class="comment">                     dereferenced DW_AT_GNU_call_site_data_value does not</span>
<a name="l00399"></a>00399 <span class="comment">                     differ.  */</span>
<a name="l00400"></a>00400 
<a name="l00401"></a>00401                   <a class="code" href="exceptions_8h.html#aef4514ee39b9305fddee27f49c7c34eb">TRY_CATCH</a> (except, <a class="code" href="exceptions_8h.html#abfa3a3b99557b11f5766baf69465fdf6a44de51845416ac49ab08438792b908f0">RETURN_MASK_ERROR</a>)
<a name="l00402"></a>00402                     {
<a name="l00403"></a>00403                       <span class="keyword">struct </span>type *type_deref;
<a name="l00404"></a>00404 
<a name="l00405"></a>00405                       val_deref = <a class="code" href="value_8c.html#aed5580291c7c798d71b3346932048a12">coerce_ref</a> (val);
<a name="l00406"></a>00406                       <span class="keywordflow">if</span> (<a class="code" href="value_8c.html#aa60bc8ecf77867a2d16bec57a4ccf983">value_lazy</a> (val_deref))
<a name="l00407"></a>00407                         <a class="code" href="value_8c.html#a27ee2d69678b458a82ac350e2e2132d8">value_fetch_lazy</a> (val_deref);
<a name="l00408"></a>00408                       type_deref = <a class="code" href="value_8c.html#a263a4c0bee0b0df41074b952d3c121d0">value_type</a> (val_deref);
<a name="l00409"></a>00409 
<a name="l00410"></a>00410                       entryval_deref = <a class="code" href="value_8c.html#aed5580291c7c798d71b3346932048a12">coerce_ref</a> (entryval);
<a name="l00411"></a>00411                       <span class="keywordflow">if</span> (<a class="code" href="value_8c.html#aa60bc8ecf77867a2d16bec57a4ccf983">value_lazy</a> (entryval_deref))
<a name="l00412"></a>00412                         <a class="code" href="value_8c.html#a27ee2d69678b458a82ac350e2e2132d8">value_fetch_lazy</a> (entryval_deref);
<a name="l00413"></a>00413 
<a name="l00414"></a>00414                       <span class="comment">/* If the reference addresses match but dereferenced</span>
<a name="l00415"></a>00415 <span class="comment">                         content does not match print them.  */</span>
<a name="l00416"></a>00416                       <span class="keywordflow">if</span> (val != val_deref
<a name="l00417"></a>00417                           &amp;&amp; <a class="code" href="value_8c.html#a260c3bb2b5c76722b3dfe14733152803">value_available_contents_eq</a> (val_deref, 0,
<a name="l00418"></a>00418                                                           entryval_deref, 0,
<a name="l00419"></a>00419                                                       <a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type_deref)))
<a name="l00420"></a>00420                         val_equal = 1;
<a name="l00421"></a>00421                     }
<a name="l00422"></a>00422 
<a name="l00423"></a>00423                   <span class="comment">/* Value was not a reference; and its content matches.  */</span>
<a name="l00424"></a>00424                   <span class="keywordflow">if</span> (val == val_deref)
<a name="l00425"></a>00425                     val_equal = 1;
<a name="l00426"></a>00426                   <span class="comment">/* If the dereferenced content could not be fetched do not</span>
<a name="l00427"></a>00427 <span class="comment">                     display anything.  */</span>
<a name="l00428"></a>00428                   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (except.<a class="code" href="structgdb__exception.html#ab5a701a197af7b5c953242d029c18e75">error</a> == <a class="code" href="exceptions_8h.html#acc42076253600be964e110149b458971aac3d732ed31a67f03dd6a6afa6beb7fe">NO_ENTRY_VALUE_ERROR</a>)
<a name="l00429"></a>00429                     val_equal = 1;
<a name="l00430"></a>00430                   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (except.<a class="code" href="structgdb__exception.html#a7f57f80c4d36200d121cee8cce513e5f">message</a>)
<a name="l00431"></a>00431                     {
<a name="l00432"></a>00432                       entryval_error = alloca (strlen (except.<a class="code" href="structgdb__exception.html#a7f57f80c4d36200d121cee8cce513e5f">message</a>) + 1);
<a name="l00433"></a>00433                       strcpy (entryval_error, except.<a class="code" href="structgdb__exception.html#a7f57f80c4d36200d121cee8cce513e5f">message</a>);
<a name="l00434"></a>00434                     }
<a name="l00435"></a>00435 
<a name="l00436"></a>00436                   <span class="keywordflow">if</span> (val_equal)
<a name="l00437"></a>00437                     entryval = NULL;
<a name="l00438"></a>00438                 }
<a name="l00439"></a>00439             }
<a name="l00440"></a>00440 
<a name="l00441"></a>00441           <span class="comment">/* Try to remove possibly duplicate error message for ENTRYARGP even</span>
<a name="l00442"></a>00442 <span class="comment">             in MI mode.  */</span>
<a name="l00443"></a>00443 
<a name="l00444"></a>00444           <span class="keywordflow">if</span> (val_error &amp;&amp; entryval_error
<a name="l00445"></a>00445               &amp;&amp; strcmp (val_error, entryval_error) == 0)
<a name="l00446"></a>00446             {
<a name="l00447"></a>00447               entryval_error = NULL;
<a name="l00448"></a>00448 
<a name="l00449"></a>00449               <span class="comment">/* Do not se VAL_EQUAL as the same error message may be shown for</span>
<a name="l00450"></a>00450 <span class="comment">                 the entry value even if no entry values are present in the</span>
<a name="l00451"></a>00451 <span class="comment">                 inferior.  */</span>
<a name="l00452"></a>00452             }
<a name="l00453"></a>00453         }
<a name="l00454"></a>00454     }
<a name="l00455"></a>00455 
<a name="l00456"></a>00456   <span class="keywordflow">if</span> (entryval == NULL)
<a name="l00457"></a>00457     {
<a name="l00458"></a>00458       <span class="keywordflow">if</span> (<a class="code" href="frame_8h.html#a63d7b1862ccbc9987aac7ad11d8c57a6">print_entry_values</a> == <a class="code" href="frame_8h.html#a530d44de0aecb9c1873762eaa09476a5">print_entry_values_preferred</a>)
<a name="l00459"></a>00459         {
<a name="l00460"></a>00460           <a class="code" href="exceptions_8h.html#aef4514ee39b9305fddee27f49c7c34eb">TRY_CATCH</a> (except, <a class="code" href="exceptions_8h.html#abfa3a3b99557b11f5766baf69465fdf6a44de51845416ac49ab08438792b908f0">RETURN_MASK_ERROR</a>)
<a name="l00461"></a>00461             {
<a name="l00462"></a>00462               val = <a class="code" href="findvar_8c.html#afeb191a780ccc9cc2d95378bc1413751">read_var_value</a> (sym, frame);
<a name="l00463"></a>00463             }
<a name="l00464"></a>00464           <span class="keywordflow">if</span> (!val)
<a name="l00465"></a>00465             {
<a name="l00466"></a>00466               val_error = alloca (strlen (except.<a class="code" href="structgdb__exception.html#a7f57f80c4d36200d121cee8cce513e5f">message</a>) + 1);
<a name="l00467"></a>00467               strcpy (val_error, except.<a class="code" href="structgdb__exception.html#a7f57f80c4d36200d121cee8cce513e5f">message</a>);
<a name="l00468"></a>00468             }
<a name="l00469"></a>00469         }
<a name="l00470"></a>00470       <span class="keywordflow">if</span> (<a class="code" href="frame_8h.html#a63d7b1862ccbc9987aac7ad11d8c57a6">print_entry_values</a> == <a class="code" href="frame_8h.html#acb314d10dfd5817a8561ff32d1de95d8">print_entry_values_only</a>
<a name="l00471"></a>00471           || <a class="code" href="frame_8h.html#a63d7b1862ccbc9987aac7ad11d8c57a6">print_entry_values</a> == <a class="code" href="frame_8h.html#a11cf31f117f9519bab242d9201a6d0a1">print_entry_values_both</a>
<a name="l00472"></a>00472           || (<a class="code" href="frame_8h.html#a63d7b1862ccbc9987aac7ad11d8c57a6">print_entry_values</a> == <a class="code" href="frame_8h.html#a530d44de0aecb9c1873762eaa09476a5">print_entry_values_preferred</a>
<a name="l00473"></a>00473               &amp;&amp; (!val || <a class="code" href="value_8c.html#ac29d8a824744789e9d8302db669dd49f">value_optimized_out</a> (val))))
<a name="l00474"></a>00474         {
<a name="l00475"></a>00475           entryval = <a class="code" href="value_8c.html#ade69f37db571ab00d2a1fffe8128b80c">allocate_optimized_out_value</a> (<a class="code" href="symtab_8h.html#aadfeb02c4b5fc2b6764ad32eaccf0e58">SYMBOL_TYPE</a> (sym));
<a name="l00476"></a>00476           entryval_error = NULL;
<a name="l00477"></a>00477         }
<a name="l00478"></a>00478     }
<a name="l00479"></a>00479   <span class="keywordflow">if</span> ((<a class="code" href="frame_8h.html#a63d7b1862ccbc9987aac7ad11d8c57a6">print_entry_values</a> == <a class="code" href="frame_8h.html#a60c2b27815bdc266c1a255682a6dc188">print_entry_values_compact</a>
<a name="l00480"></a>00480        || <a class="code" href="frame_8h.html#a63d7b1862ccbc9987aac7ad11d8c57a6">print_entry_values</a> == <a class="code" href="frame_8h.html#aad734ac747e7c14570eacc8394988122">print_entry_values_if_needed</a>
<a name="l00481"></a>00481        || <a class="code" href="frame_8h.html#a63d7b1862ccbc9987aac7ad11d8c57a6">print_entry_values</a> == <a class="code" href="frame_8h.html#a530d44de0aecb9c1873762eaa09476a5">print_entry_values_preferred</a>)
<a name="l00482"></a>00482       &amp;&amp; (!val || <a class="code" href="value_8c.html#ac29d8a824744789e9d8302db669dd49f">value_optimized_out</a> (val)) &amp;&amp; entryval != NULL)
<a name="l00483"></a>00483     {
<a name="l00484"></a>00484       val = NULL;
<a name="l00485"></a>00485       val_error = NULL;
<a name="l00486"></a>00486     }
<a name="l00487"></a>00487 
<a name="l00488"></a>00488   argp-&gt;<a class="code" href="structframe__arg.html#aef5b6d77809b8acceb4759b477c1feff">sym</a> = sym;
<a name="l00489"></a>00489   argp-&gt;<a class="code" href="structframe__arg.html#a8e7137afb81b7925e857a88aac2dc614">val</a> = val;
<a name="l00490"></a>00490   argp-&gt;<a class="code" href="structframe__arg.html#a2c915e34171ef9c76dc5b75c4785ecfe">error</a> = val_error ? xstrdup (val_error) : NULL;
<a name="l00491"></a>00491   <span class="keywordflow">if</span> (!val &amp;&amp; !val_error)
<a name="l00492"></a>00492     argp-&gt;<a class="code" href="structframe__arg.html#a3e4c0e8a5b26c337d4f0c73d2ee29b3e">entry_kind</a> = <a class="code" href="frame_8h.html#acb314d10dfd5817a8561ff32d1de95d8">print_entry_values_only</a>;
<a name="l00493"></a>00493   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="frame_8h.html#a63d7b1862ccbc9987aac7ad11d8c57a6">print_entry_values</a> == <a class="code" href="frame_8h.html#a60c2b27815bdc266c1a255682a6dc188">print_entry_values_compact</a>
<a name="l00494"></a>00494            || <a class="code" href="frame_8h.html#a63d7b1862ccbc9987aac7ad11d8c57a6">print_entry_values</a> == <a class="code" href="frame_8h.html#a649d945f326143d79087ad51b8e283eb">print_entry_values_default</a>) &amp;&amp; val_equal)
<a name="l00495"></a>00495     {
<a name="l00496"></a>00496       argp-&gt;<a class="code" href="structframe__arg.html#a3e4c0e8a5b26c337d4f0c73d2ee29b3e">entry_kind</a> = <a class="code" href="frame_8h.html#a60c2b27815bdc266c1a255682a6dc188">print_entry_values_compact</a>;
<a name="l00497"></a>00497       <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (!<a class="code" href="ui-out_8c.html#a473db54efcfbc60feeb5a4f54f27af46">ui_out_is_mi_like_p</a> (<a class="code" href="ui-out_8c.html#a3d9e2a5710f076cc035ef73920eb8c87">current_uiout</a>));
<a name="l00498"></a>00498     }
<a name="l00499"></a>00499   <span class="keywordflow">else</span>
<a name="l00500"></a>00500     argp-&gt;<a class="code" href="structframe__arg.html#a3e4c0e8a5b26c337d4f0c73d2ee29b3e">entry_kind</a> = <a class="code" href="frame_8h.html#acef9f94ae4634a8f60eb3a572216851d">print_entry_values_no</a>;
<a name="l00501"></a>00501 
<a name="l00502"></a>00502   entryargp-&gt;<a class="code" href="structframe__arg.html#aef5b6d77809b8acceb4759b477c1feff">sym</a> = sym;
<a name="l00503"></a>00503   entryargp-&gt;<a class="code" href="structframe__arg.html#a8e7137afb81b7925e857a88aac2dc614">val</a> = entryval;
<a name="l00504"></a>00504   entryargp-&gt;<a class="code" href="structframe__arg.html#a2c915e34171ef9c76dc5b75c4785ecfe">error</a> = entryval_error ? xstrdup (entryval_error) : NULL;
<a name="l00505"></a>00505   <span class="keywordflow">if</span> (!entryval &amp;&amp; !entryval_error)
<a name="l00506"></a>00506     entryargp-&gt;<a class="code" href="structframe__arg.html#a3e4c0e8a5b26c337d4f0c73d2ee29b3e">entry_kind</a> = <a class="code" href="frame_8h.html#acef9f94ae4634a8f60eb3a572216851d">print_entry_values_no</a>;
<a name="l00507"></a>00507   <span class="keywordflow">else</span>
<a name="l00508"></a>00508     entryargp-&gt;<a class="code" href="structframe__arg.html#a3e4c0e8a5b26c337d4f0c73d2ee29b3e">entry_kind</a> = <a class="code" href="frame_8h.html#acb314d10dfd5817a8561ff32d1de95d8">print_entry_values_only</a>;
<a name="l00509"></a>00509 }
<a name="l00510"></a>00510 
<a name="l00511"></a>00511 <span class="comment">/* Print the arguments of frame FRAME on STREAM, given the function</span>
<a name="l00512"></a>00512 <span class="comment">   FUNC running in that frame (as a symbol), where NUM is the number</span>
<a name="l00513"></a>00513 <span class="comment">   of arguments according to the stack frame (or -1 if the number of</span>
<a name="l00514"></a>00514 <span class="comment">   arguments is unknown).  */</span>
<a name="l00515"></a>00515 
<a name="l00516"></a>00516 <span class="comment">/* Note that currently the &quot;number of arguments according to the</span>
<a name="l00517"></a>00517 <span class="comment">   stack frame&quot; is only known on VAX where i refers to the &quot;number of</span>
<a name="l00518"></a>00518 <span class="comment">   ints of arguments according to the stack frame&quot;.  */</span>
<a name="l00519"></a>00519 
<a name="l00520"></a>00520 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00521"></a><a class="code" href="stack_8c.html#a5f1a36be0ba79fe164372caa648194f1">00521</a> <a class="code" href="stack_8c.html#a5f1a36be0ba79fe164372caa648194f1">print_frame_args</a> (<span class="keyword">struct</span> <a class="code" href="structsymbol.html">symbol</a> *<a class="code" href="remote-fileio_8c.html#a7e97efb32ba66c3f1141bdbb82529d20">func</a>, <span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame,
<a name="l00522"></a>00522                   <span class="keywordtype">int</span> num, <span class="keyword">struct</span> <a class="code" href="structui__file.html">ui_file</a> *stream)
<a name="l00523"></a>00523 {
<a name="l00524"></a>00524   <span class="keyword">struct </span><a class="code" href="structui__out.html">ui_out</a> *uiout = <a class="code" href="ui-out_8c.html#a3d9e2a5710f076cc035ef73920eb8c87">current_uiout</a>;
<a name="l00525"></a>00525   <span class="keywordtype">int</span> first = 1;
<a name="l00526"></a>00526   <span class="comment">/* Offset of next stack argument beyond the one we have seen that is</span>
<a name="l00527"></a>00527 <span class="comment">     at the highest offset, or -1 if we haven&#39;t come to a stack</span>
<a name="l00528"></a>00528 <span class="comment">     argument yet.  */</span>
<a name="l00529"></a>00529   <span class="keywordtype">long</span> highest_offset = -1;
<a name="l00530"></a>00530   <span class="comment">/* Number of ints of arguments that we have printed so far.  */</span>
<a name="l00531"></a>00531   <span class="keywordtype">int</span> args_printed = 0;
<a name="l00532"></a>00532   <span class="keyword">struct </span><a class="code" href="structcleanup.html">cleanup</a> *old_chain;
<a name="l00533"></a>00533   <span class="keyword">struct </span><a class="code" href="structui__file.html">ui_file</a> *stb;
<a name="l00534"></a>00534   <span class="comment">/* True if we should print arguments, false otherwise.  */</span>
<a name="l00535"></a>00535   <span class="keywordtype">int</span> print_args = strcmp (<a class="code" href="stack_8c.html#affd7a00dca2d9a9b2fb0804ac172552c">print_frame_arguments</a>, <span class="stringliteral">&quot;none&quot;</span>);
<a name="l00536"></a>00536 
<a name="l00537"></a>00537   stb = <a class="code" href="ui-file_8c.html#a340771735f105582d314e191a399a45c">mem_fileopen</a> ();
<a name="l00538"></a>00538   old_chain = <a class="code" href="utils_8c.html#a94dc56baeb57791e114136764f7763aa">make_cleanup_ui_file_delete</a> (stb);
<a name="l00539"></a>00539 
<a name="l00540"></a>00540   <span class="keywordflow">if</span> (func)
<a name="l00541"></a>00541     {
<a name="l00542"></a>00542       <span class="keyword">struct </span><a class="code" href="structblock.html">block</a> *b = <a class="code" href="symtab_8h.html#a2c83ea82b28e9a9d8f9b655c2d502593">SYMBOL_BLOCK_VALUE</a> (func);
<a name="l00543"></a>00543       <span class="keyword">struct </span><a class="code" href="structblock__iterator.html">block_iterator</a> iter;
<a name="l00544"></a>00544       <span class="keyword">struct </span><a class="code" href="structsymbol.html">symbol</a> *sym;
<a name="l00545"></a>00545 
<a name="l00546"></a>00546       <a class="code" href="block_8h.html#a0ffb1db4f5e3a6fd58700861fce48c2b">ALL_BLOCK_SYMBOLS</a> (b, iter, sym)
<a name="l00547"></a>00547         {
<a name="l00548"></a>00548           <span class="keyword">struct </span><a class="code" href="structframe__arg.html">frame_arg</a> arg, entryarg;
<a name="l00549"></a>00549 
<a name="l00550"></a>00550           <a class="code" href="defs_8h.html#ad24e2b54375e12474e65ebf7175988fb">QUIT</a>;
<a name="l00551"></a>00551 
<a name="l00552"></a>00552           <span class="comment">/* Keep track of the highest stack argument offset seen, and</span>
<a name="l00553"></a>00553 <span class="comment">             skip over any kinds of symbols we don&#39;t care about.  */</span>
<a name="l00554"></a>00554 
<a name="l00555"></a>00555           <span class="keywordflow">if</span> (!<a class="code" href="symtab_8h.html#ab3de6f2d8c380d3ca8bef520b1b4dfb9">SYMBOL_IS_ARGUMENT</a> (sym))
<a name="l00556"></a>00556             <span class="keywordflow">continue</span>;
<a name="l00557"></a>00557 
<a name="l00558"></a>00558           <span class="keywordflow">switch</span> (<a class="code" href="symtab_8h.html#a8394f2ba6c27e8026b2783db7cc0eb40">SYMBOL_CLASS</a> (sym))
<a name="l00559"></a>00559             {
<a name="l00560"></a>00560             <span class="keywordflow">case</span> <a class="code" href="symtab_8h.html#a40bca6cf3ed5cfa15b1275e6750cdda3affc89e823125f8ae758aee5fb913b308">LOC_ARG</a>:
<a name="l00561"></a>00561             <span class="keywordflow">case</span> <a class="code" href="symtab_8h.html#a40bca6cf3ed5cfa15b1275e6750cdda3a3c444a41d837bee346e19072ca35f8d3">LOC_REF_ARG</a>:
<a name="l00562"></a>00562               {
<a name="l00563"></a>00563                 <span class="keywordtype">long</span> current_offset = <a class="code" href="symtab_8h.html#a31840856d8e3eed18cbe9ca90cd2bf39">SYMBOL_VALUE</a> (sym);
<a name="l00564"></a>00564                 <span class="keywordtype">int</span> arg_size = <a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (<a class="code" href="symtab_8h.html#aadfeb02c4b5fc2b6764ad32eaccf0e58">SYMBOL_TYPE</a> (sym));
<a name="l00565"></a>00565 
<a name="l00566"></a>00566                 <span class="comment">/* Compute address of next argument by adding the size of</span>
<a name="l00567"></a>00567 <span class="comment">                   this argument and rounding to an int boundary.  */</span>
<a name="l00568"></a>00568                 current_offset =
<a name="l00569"></a>00569                   ((current_offset + arg_size + <span class="keyword">sizeof</span> (<a class="code" href="command_8h.html#a74f207b5aa4ba51c3a2ad59b219a423b">int</a>) - 1)
<a name="l00570"></a>00570                    &amp; ~(<span class="keyword">sizeof</span> (<a class="code" href="command_8h.html#a74f207b5aa4ba51c3a2ad59b219a423b">int</a>) - 1));
<a name="l00571"></a>00571 
<a name="l00572"></a>00572                 <span class="comment">/* If this is the highest offset seen yet, set</span>
<a name="l00573"></a>00573 <span class="comment">                   highest_offset.  */</span>
<a name="l00574"></a>00574                 <span class="keywordflow">if</span> (highest_offset == -1
<a name="l00575"></a>00575                     || (current_offset &gt; highest_offset))
<a name="l00576"></a>00576                   highest_offset = current_offset;
<a name="l00577"></a>00577 
<a name="l00578"></a>00578                 <span class="comment">/* Add the number of ints we&#39;re about to print to</span>
<a name="l00579"></a>00579 <span class="comment">                   args_printed.  */</span>
<a name="l00580"></a>00580                 args_printed += (arg_size + <span class="keyword">sizeof</span> (<a class="code" href="command_8h.html#a74f207b5aa4ba51c3a2ad59b219a423b">int</a>) - 1) / <span class="keyword">sizeof</span> (<a class="code" href="command_8h.html#a74f207b5aa4ba51c3a2ad59b219a423b">int</a>);
<a name="l00581"></a>00581               }
<a name="l00582"></a>00582 
<a name="l00583"></a>00583               <span class="comment">/* We care about types of symbols, but don&#39;t need to</span>
<a name="l00584"></a>00584 <span class="comment">                 keep track of stack offsets in them.  */</span>
<a name="l00585"></a>00585             <span class="keywordflow">case</span> <a class="code" href="symtab_8h.html#a40bca6cf3ed5cfa15b1275e6750cdda3a2a9bcb7d8487d7ccb3858184340712e7">LOC_REGISTER</a>:
<a name="l00586"></a>00586             <span class="keywordflow">case</span> <a class="code" href="symtab_8h.html#a40bca6cf3ed5cfa15b1275e6750cdda3ad9b13677899a4fbbd0f44f39726416e7">LOC_REGPARM_ADDR</a>:
<a name="l00587"></a>00587             <span class="keywordflow">case</span> <a class="code" href="symtab_8h.html#a40bca6cf3ed5cfa15b1275e6750cdda3afd4303a25cda7805900ce8212c67ed45">LOC_COMPUTED</a>:
<a name="l00588"></a>00588             <span class="keywordflow">case</span> <a class="code" href="symtab_8h.html#a40bca6cf3ed5cfa15b1275e6750cdda3aa4f37f80c900ee253911325c30b8a60f">LOC_OPTIMIZED_OUT</a>:
<a name="l00589"></a>00589             <span class="keywordflow">default</span>:
<a name="l00590"></a>00590               <span class="keywordflow">break</span>;
<a name="l00591"></a>00591             }
<a name="l00592"></a>00592 
<a name="l00593"></a>00593           <span class="comment">/* We have to look up the symbol because arguments can have</span>
<a name="l00594"></a>00594 <span class="comment">             two entries (one a parameter, one a local) and the one we</span>
<a name="l00595"></a>00595 <span class="comment">             want is the local, which lookup_symbol will find for us.</span>
<a name="l00596"></a>00596 <span class="comment">             This includes gcc1 (not gcc2) on SPARC when passing a</span>
<a name="l00597"></a>00597 <span class="comment">             small structure and gcc2 when the argument type is float</span>
<a name="l00598"></a>00598 <span class="comment">             and it is passed as a double and converted to float by</span>
<a name="l00599"></a>00599 <span class="comment">             the prologue (in the latter case the type of the LOC_ARG</span>
<a name="l00600"></a>00600 <span class="comment">             symbol is double and the type of the LOC_LOCAL symbol is</span>
<a name="l00601"></a>00601 <span class="comment">             float).  */</span>
<a name="l00602"></a>00602           <span class="comment">/* But if the parameter name is null, don&#39;t try it.  Null</span>
<a name="l00603"></a>00603 <span class="comment">             parameter names occur on the RS/6000, for traceback</span>
<a name="l00604"></a>00604 <span class="comment">             tables.  FIXME, should we even print them?  */</span>
<a name="l00605"></a>00605 
<a name="l00606"></a>00606           <span class="keywordflow">if</span> (*<a class="code" href="symtab_8h.html#a956b56288511a18b855d8a263d60e87f">SYMBOL_LINKAGE_NAME</a> (sym))
<a name="l00607"></a>00607             {
<a name="l00608"></a>00608               <span class="keyword">struct </span><a class="code" href="structsymbol.html">symbol</a> *nsym;
<a name="l00609"></a>00609 
<a name="l00610"></a>00610               nsym = <a class="code" href="symtab_8c.html#a8a5c3f803198aed047a55c0e4f61b315">lookup_symbol</a> (<a class="code" href="symtab_8h.html#a956b56288511a18b855d8a263d60e87f">SYMBOL_LINKAGE_NAME</a> (sym),
<a name="l00611"></a>00611                                     b, <a class="code" href="symtab_8h.html#a5c384cef81c5f50f32caadbfd6974a1aa15693f9d844450eb4bfd4b37114f4aed">VAR_DOMAIN</a>, NULL);
<a name="l00612"></a>00612               <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (nsym != NULL);
<a name="l00613"></a>00613               <span class="keywordflow">if</span> (<a class="code" href="symtab_8h.html#a8394f2ba6c27e8026b2783db7cc0eb40">SYMBOL_CLASS</a> (nsym) == <a class="code" href="symtab_8h.html#a40bca6cf3ed5cfa15b1275e6750cdda3a2a9bcb7d8487d7ccb3858184340712e7">LOC_REGISTER</a>
<a name="l00614"></a>00614                   &amp;&amp; !<a class="code" href="symtab_8h.html#ab3de6f2d8c380d3ca8bef520b1b4dfb9">SYMBOL_IS_ARGUMENT</a> (nsym))
<a name="l00615"></a>00615                 {
<a name="l00616"></a>00616                   <span class="comment">/* There is a LOC_ARG/LOC_REGISTER pair.  This means</span>
<a name="l00617"></a>00617 <span class="comment">                     that it was passed on the stack and loaded into a</span>
<a name="l00618"></a>00618 <span class="comment">                     register, or passed in a register and stored in a</span>
<a name="l00619"></a>00619 <span class="comment">                     stack slot.  GDB 3.x used the LOC_ARG; GDB</span>
<a name="l00620"></a>00620 <span class="comment">                     4.0-4.11 used the LOC_REGISTER.</span>
<a name="l00621"></a>00621 <span class="comment"></span>
<a name="l00622"></a>00622 <span class="comment">                     Reasons for using the LOC_ARG:</span>
<a name="l00623"></a>00623 <span class="comment"></span>
<a name="l00624"></a>00624 <span class="comment">                     (1) Because find_saved_registers may be slow for</span>
<a name="l00625"></a>00625 <span class="comment">                         remote debugging.</span>
<a name="l00626"></a>00626 <span class="comment"></span>
<a name="l00627"></a>00627 <span class="comment">                     (2) Because registers are often re-used and stack</span>
<a name="l00628"></a>00628 <span class="comment">                         slots rarely (never?) are.  Therefore using</span>
<a name="l00629"></a>00629 <span class="comment">                         the stack slot is much less likely to print</span>
<a name="l00630"></a>00630 <span class="comment">                         garbage.</span>
<a name="l00631"></a>00631 <span class="comment"></span>
<a name="l00632"></a>00632 <span class="comment">                     Reasons why we might want to use the LOC_REGISTER:</span>
<a name="l00633"></a>00633 <span class="comment"></span>
<a name="l00634"></a>00634 <span class="comment">                     (1) So that the backtrace prints the same value</span>
<a name="l00635"></a>00635 <span class="comment">                         as &quot;print foo&quot;.  I see no compelling reason</span>
<a name="l00636"></a>00636 <span class="comment">                         why this needs to be the case; having the</span>
<a name="l00637"></a>00637 <span class="comment">                         backtrace print the value which was passed</span>
<a name="l00638"></a>00638 <span class="comment">                         in, and &quot;print foo&quot; print the value as</span>
<a name="l00639"></a>00639 <span class="comment">                         modified within the called function, makes</span>
<a name="l00640"></a>00640 <span class="comment">                         perfect sense to me.</span>
<a name="l00641"></a>00641 <span class="comment"></span>
<a name="l00642"></a>00642 <span class="comment">                     Additional note: It might be nice if &quot;info args&quot;</span>
<a name="l00643"></a>00643 <span class="comment">                     displayed both values.</span>
<a name="l00644"></a>00644 <span class="comment"></span>
<a name="l00645"></a>00645 <span class="comment">                     One more note: There is a case with SPARC</span>
<a name="l00646"></a>00646 <span class="comment">                     structure passing where we need to use the</span>
<a name="l00647"></a>00647 <span class="comment">                     LOC_REGISTER, but this is dealt with by creating</span>
<a name="l00648"></a>00648 <span class="comment">                     a single LOC_REGPARM in symbol reading.  */</span>
<a name="l00649"></a>00649 
<a name="l00650"></a>00650                   <span class="comment">/* Leave sym (the LOC_ARG) alone.  */</span>
<a name="l00651"></a>00651                   ;
<a name="l00652"></a>00652                 }
<a name="l00653"></a>00653               <span class="keywordflow">else</span>
<a name="l00654"></a>00654                 sym = nsym;
<a name="l00655"></a>00655             }
<a name="l00656"></a>00656 
<a name="l00657"></a>00657           <span class="comment">/* Print the current arg.  */</span>
<a name="l00658"></a>00658           <span class="keywordflow">if</span> (!first)
<a name="l00659"></a>00659             <a class="code" href="ui-out_8c.html#a6a23596295dce32ba2a5bd2fd2d309f8">ui_out_text</a> (uiout, <span class="stringliteral">&quot;, &quot;</span>);
<a name="l00660"></a>00660           <a class="code" href="ui-out_8c.html#a24e0ad942242d807edb27cd3fe6aaa39">ui_out_wrap_hint</a> (uiout, <span class="stringliteral">&quot;    &quot;</span>);
<a name="l00661"></a>00661 
<a name="l00662"></a>00662           <span class="keywordflow">if</span> (!print_args)
<a name="l00663"></a>00663             {
<a name="l00664"></a>00664               <a class="code" href="gdb__string_8h.html#adb03df3679ce1445e801310614624ccb">memset</a> (&amp;arg, 0, <span class="keyword">sizeof</span> (arg));
<a name="l00665"></a>00665               arg.<a class="code" href="structframe__arg.html#aef5b6d77809b8acceb4759b477c1feff">sym</a> = sym;
<a name="l00666"></a>00666               arg.<a class="code" href="structframe__arg.html#a3e4c0e8a5b26c337d4f0c73d2ee29b3e">entry_kind</a> = <a class="code" href="frame_8h.html#acef9f94ae4634a8f60eb3a572216851d">print_entry_values_no</a>;
<a name="l00667"></a>00667               <a class="code" href="gdb__string_8h.html#adb03df3679ce1445e801310614624ccb">memset</a> (&amp;entryarg, 0, <span class="keyword">sizeof</span> (entryarg));
<a name="l00668"></a>00668               entryarg.<a class="code" href="structframe__arg.html#aef5b6d77809b8acceb4759b477c1feff">sym</a> = sym;
<a name="l00669"></a>00669               entryarg.<a class="code" href="structframe__arg.html#a3e4c0e8a5b26c337d4f0c73d2ee29b3e">entry_kind</a> = <a class="code" href="frame_8h.html#acef9f94ae4634a8f60eb3a572216851d">print_entry_values_no</a>;
<a name="l00670"></a>00670             }
<a name="l00671"></a>00671           <span class="keywordflow">else</span>
<a name="l00672"></a>00672             <a class="code" href="frame_8h.html#a6800068d9df89417d7ed6169e24d1db3">read_frame_arg</a> (sym, frame, &amp;arg, &amp;entryarg);
<a name="l00673"></a>00673 
<a name="l00674"></a>00674           <span class="keywordflow">if</span> (arg.<a class="code" href="structframe__arg.html#a3e4c0e8a5b26c337d4f0c73d2ee29b3e">entry_kind</a> != <a class="code" href="frame_8h.html#acb314d10dfd5817a8561ff32d1de95d8">print_entry_values_only</a>)
<a name="l00675"></a>00675             <a class="code" href="stack_8c.html#ac309557c845ac1387c3b93183dc33482">print_frame_arg</a> (&amp;arg);
<a name="l00676"></a>00676 
<a name="l00677"></a>00677           <span class="keywordflow">if</span> (entryarg.<a class="code" href="structframe__arg.html#a3e4c0e8a5b26c337d4f0c73d2ee29b3e">entry_kind</a> != <a class="code" href="frame_8h.html#acef9f94ae4634a8f60eb3a572216851d">print_entry_values_no</a>)
<a name="l00678"></a>00678             {
<a name="l00679"></a>00679               <span class="keywordflow">if</span> (arg.<a class="code" href="structframe__arg.html#a3e4c0e8a5b26c337d4f0c73d2ee29b3e">entry_kind</a> != <a class="code" href="frame_8h.html#acb314d10dfd5817a8561ff32d1de95d8">print_entry_values_only</a>)
<a name="l00680"></a>00680                 {
<a name="l00681"></a>00681                   <a class="code" href="ui-out_8c.html#a6a23596295dce32ba2a5bd2fd2d309f8">ui_out_text</a> (uiout, <span class="stringliteral">&quot;, &quot;</span>);
<a name="l00682"></a>00682                   <a class="code" href="ui-out_8c.html#a24e0ad942242d807edb27cd3fe6aaa39">ui_out_wrap_hint</a> (uiout, <span class="stringliteral">&quot;    &quot;</span>);
<a name="l00683"></a>00683                 }
<a name="l00684"></a>00684 
<a name="l00685"></a>00685               <a class="code" href="stack_8c.html#ac309557c845ac1387c3b93183dc33482">print_frame_arg</a> (&amp;entryarg);
<a name="l00686"></a>00686             }
<a name="l00687"></a>00687 
<a name="l00688"></a>00688           <a class="code" href="common-utils_8c.html#a976e14808b9247ec952c262553f09f8f">xfree</a> (arg.<a class="code" href="structframe__arg.html#a2c915e34171ef9c76dc5b75c4785ecfe">error</a>);
<a name="l00689"></a>00689           <a class="code" href="common-utils_8c.html#a976e14808b9247ec952c262553f09f8f">xfree</a> (entryarg.<a class="code" href="structframe__arg.html#a2c915e34171ef9c76dc5b75c4785ecfe">error</a>);
<a name="l00690"></a>00690 
<a name="l00691"></a>00691           first = 0;
<a name="l00692"></a>00692         }
<a name="l00693"></a>00693     }
<a name="l00694"></a>00694 
<a name="l00695"></a>00695   <span class="comment">/* Don&#39;t print nameless args in situations where we don&#39;t know</span>
<a name="l00696"></a>00696 <span class="comment">     enough about the stack to find them.  */</span>
<a name="l00697"></a>00697   <span class="keywordflow">if</span> (num != -1)
<a name="l00698"></a>00698     {
<a name="l00699"></a>00699       <span class="keywordtype">long</span> start;
<a name="l00700"></a>00700 
<a name="l00701"></a>00701       <span class="keywordflow">if</span> (highest_offset == -1)
<a name="l00702"></a>00702         start = <a class="code" href="gdbarch_8c.html#aade2b10452bb967d20a6d0e487d444b9">gdbarch_frame_args_skip</a> (<a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (frame));
<a name="l00703"></a>00703       <span class="keywordflow">else</span>
<a name="l00704"></a>00704         start = highest_offset;
<a name="l00705"></a>00705 
<a name="l00706"></a>00706       <a class="code" href="stack_8c.html#a534d0f97b10e093b66f9f0b868cb6d82">print_frame_nameless_args</a> (frame, start, num - args_printed,
<a name="l00707"></a>00707                                  first, stream);
<a name="l00708"></a>00708     }
<a name="l00709"></a>00709 
<a name="l00710"></a>00710   <a class="code" href="cleanups_8c.html#a8b313a4f1c613973ea444e5fa54976f8">do_cleanups</a> (old_chain);
<a name="l00711"></a>00711 }
<a name="l00712"></a>00712 
<a name="l00713"></a>00713 <span class="comment">/* Set the current source and line to the location given by frame</span>
<a name="l00714"></a>00714 <span class="comment">   FRAME, if possible.  When CENTER is true, adjust so the relevant</span>
<a name="l00715"></a>00715 <span class="comment">   line is in the center of the next &#39;list&#39;.  */</span>
<a name="l00716"></a>00716 
<a name="l00717"></a>00717 <span class="keywordtype">void</span>
<a name="l00718"></a><a class="code" href="stack_8c.html#aad2160a306d91ad4005df1f373515a8e">00718</a> <a class="code" href="frame_8h.html#a4813bb9eb736c92d9c9a7e90172da4e0">set_current_sal_from_frame</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame, <span class="keywordtype">int</span> center)
<a name="l00719"></a>00719 {
<a name="l00720"></a>00720   <span class="keyword">struct </span><a class="code" href="structsymtab__and__line.html">symtab_and_line</a> sal;
<a name="l00721"></a>00721 
<a name="l00722"></a>00722   <a class="code" href="frame_8c.html#a462d32901b9dd9787da65adb627a9a05">find_frame_sal</a> (frame, &amp;sal);
<a name="l00723"></a>00723   <span class="keywordflow">if</span> (sal.<a class="code" href="structsymtab__and__line.html#a74216e171a96d8bcaab43fe69b49c599">symtab</a>)
<a name="l00724"></a>00724     {
<a name="l00725"></a>00725       <span class="keywordflow">if</span> (center)
<a name="l00726"></a>00726         sal.<a class="code" href="structsymtab__and__line.html#a6a0468be675b9ac19a5b3ef26f471eaf">line</a> = <a class="code" href="environ_8c.html#affe776513b24d84b39af8ab0930fef7f">max</a> (sal.<a class="code" href="structsymtab__and__line.html#a6a0468be675b9ac19a5b3ef26f471eaf">line</a> - <a class="code" href="source_8c.html#abaae2754cf891e2db9874ba8e67f0bd6">get_lines_to_list</a> () / 2, 1);
<a name="l00727"></a>00727       <a class="code" href="source_8c.html#aa044b5dc1e0b3ce4eb13e02788fb9e99">set_current_source_symtab_and_line</a> (&amp;sal);
<a name="l00728"></a>00728     }
<a name="l00729"></a>00729 }
<a name="l00730"></a>00730 
<a name="l00731"></a>00731 <span class="comment">/* If ON, GDB will display disassembly of the next source line when</span>
<a name="l00732"></a>00732 <span class="comment">   execution of the program being debugged stops.</span>
<a name="l00733"></a>00733 <span class="comment">   If AUTO (which is the default), or there&#39;s no line info to determine</span>
<a name="l00734"></a>00734 <span class="comment">   the source line of the next instruction, display disassembly of next</span>
<a name="l00735"></a>00735 <span class="comment">   instruction instead.  */</span>
<a name="l00736"></a>00736 
<a name="l00737"></a><a class="code" href="stack_8c.html#aef5846e08cd997153bdf79c1c8e29424">00737</a> <span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="defs_8h.html#a7e28c5d9363062b4fd5eec5fed14448f">auto_boolean</a> <a class="code" href="stack_8c.html#aef5846e08cd997153bdf79c1c8e29424">disassemble_next_line</a>;
<a name="l00738"></a>00738 
<a name="l00739"></a>00739 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00740"></a><a class="code" href="stack_8c.html#a3d0a31c9ef6b5f5fe2774cd44da18ddb">00740</a> <a class="code" href="stack_8c.html#a3d0a31c9ef6b5f5fe2774cd44da18ddb">show_disassemble_next_line</a> (<span class="keyword">struct</span> <a class="code" href="structui__file.html">ui_file</a> *file, <span class="keywordtype">int</span> from_tty,
<a name="l00741"></a>00741                                  <span class="keyword">struct</span> <a class="code" href="structcmd__list__element.html">cmd_list_element</a> *c,
<a name="l00742"></a>00742                                  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structvalue.html">value</a>)
<a name="l00743"></a>00743 {
<a name="l00744"></a>00744   <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file,
<a name="l00745"></a>00745                     <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Debugger&#39;s willingness to use &quot;</span>
<a name="l00746"></a>00746                       <span class="stringliteral">&quot;disassemble-next-line is %s.\n&quot;</span>),
<a name="l00747"></a>00747                     value);
<a name="l00748"></a>00748 }
<a name="l00749"></a>00749 
<a name="l00750"></a>00750 <span class="comment">/* Use TRY_CATCH to catch the exception from the gdb_disassembly</span>
<a name="l00751"></a>00751 <span class="comment">   because it will be broken by filter sometime.  */</span>
<a name="l00752"></a>00752 
<a name="l00753"></a>00753 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00754"></a><a class="code" href="stack_8c.html#a4c7dc8022fc9117f770f469f9b64e556">00754</a> <a class="code" href="stack_8c.html#a4c7dc8022fc9117f770f469f9b64e556">do_gdb_disassembly</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>,
<a name="l00755"></a>00755                     <span class="keywordtype">int</span> how_many, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> low, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> high)
<a name="l00756"></a>00756 {
<a name="l00757"></a>00757   <span class="keyword">volatile</span> <span class="keyword">struct </span><a class="code" href="structgdb__exception.html">gdb_exception</a> exception;
<a name="l00758"></a>00758 
<a name="l00759"></a>00759   <a class="code" href="exceptions_8h.html#aef4514ee39b9305fddee27f49c7c34eb">TRY_CATCH</a> (exception, <a class="code" href="exceptions_8h.html#abfa3a3b99557b11f5766baf69465fdf6a44de51845416ac49ab08438792b908f0">RETURN_MASK_ERROR</a>)
<a name="l00760"></a>00760     {
<a name="l00761"></a>00761       <a class="code" href="disasm_8c.html#a47a52b1e80bc2d3bda77d83fcc983f76">gdb_disassembly</a> (gdbarch, <a class="code" href="ui-out_8c.html#a3d9e2a5710f076cc035ef73920eb8c87">current_uiout</a>, 0,
<a name="l00762"></a>00762                        <a class="code" href="disasm_8h.html#a65f01f011045c7617fa74d8fbb920887">DISASSEMBLY_RAW_INSN</a>, how_many,
<a name="l00763"></a>00763                        low, high);
<a name="l00764"></a>00764     }
<a name="l00765"></a>00765   <span class="keywordflow">if</span> (exception.<a class="code" href="structgdb__exception.html#ae0e14189c63f830024865d557c1122cc">reason</a> &lt; 0)
<a name="l00766"></a>00766     {
<a name="l00767"></a>00767       <span class="comment">/* If an exception was thrown while doing the disassembly, print</span>
<a name="l00768"></a>00768 <span class="comment">         the error message, to give the user a clue of what happened.  */</span>
<a name="l00769"></a>00769       <a class="code" href="exceptions_8c.html#ac90532089cc9e4b0e3c57798a13887d3">exception_print</a> (<a class="code" href="main_8c.html#a2a1dea1e551cadb9541353a004193a47">gdb_stderr</a>, exception);
<a name="l00770"></a>00770     }
<a name="l00771"></a>00771 }
<a name="l00772"></a>00772 
<a name="l00773"></a>00773 <span class="comment">/* Print information about frame FRAME.  The output is format according</span>
<a name="l00774"></a>00774 <span class="comment">   to PRINT_LEVEL and PRINT_WHAT and PRINT_ARGS.  The meaning of</span>
<a name="l00775"></a>00775 <span class="comment">   PRINT_WHAT is:</span>
<a name="l00776"></a>00776 <span class="comment">   </span>
<a name="l00777"></a>00777 <span class="comment">   SRC_LINE: Print only source line.</span>
<a name="l00778"></a>00778 <span class="comment">   LOCATION: Print only location.</span>
<a name="l00779"></a>00779 <span class="comment">   LOC_AND_SRC: Print location and source line.</span>
<a name="l00780"></a>00780 <span class="comment"></span>
<a name="l00781"></a>00781 <span class="comment">   Used in &quot;where&quot; output, and to emit breakpoint or step</span>
<a name="l00782"></a>00782 <span class="comment">   messages.  */</span>
<a name="l00783"></a>00783 
<a name="l00784"></a>00784 <span class="keywordtype">void</span>
<a name="l00785"></a><a class="code" href="stack_8c.html#ad6cf03e272a018abf707669472d49ca4">00785</a> <a class="code" href="frame_8h.html#acda4e77a54a6d0978784516c9c12686d">print_frame_info</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame, <span class="keywordtype">int</span> print_level,
<a name="l00786"></a>00786                   <span class="keyword">enum</span> <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4">print_what</a> <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4">print_what</a>, <span class="keywordtype">int</span> print_args,
<a name="l00787"></a>00787                   <span class="keywordtype">int</span> set_current_sal)
<a name="l00788"></a>00788 {
<a name="l00789"></a>00789   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (frame);
<a name="l00790"></a>00790   <span class="keyword">struct </span><a class="code" href="structsymtab__and__line.html">symtab_and_line</a> sal;
<a name="l00791"></a>00791   <span class="keywordtype">int</span> source_print;
<a name="l00792"></a>00792   <span class="keywordtype">int</span> location_print;
<a name="l00793"></a>00793   <span class="keyword">struct </span><a class="code" href="structui__out.html">ui_out</a> *uiout = <a class="code" href="ui-out_8c.html#a3d9e2a5710f076cc035ef73920eb8c87">current_uiout</a>;
<a name="l00794"></a>00794 
<a name="l00795"></a>00795   <span class="keywordflow">if</span> (<a class="code" href="frame_8c.html#a8f965671d7b55f002c993385024a2fdb">get_frame_type</a> (frame) == <a class="code" href="frame_8h.html#a3ca2c0bc7578bf3d337e34b2c08a6c5fa87b564e01c3d113432b047cd72174513">DUMMY_FRAME</a>
<a name="l00796"></a>00796       || <a class="code" href="frame_8c.html#a8f965671d7b55f002c993385024a2fdb">get_frame_type</a> (frame) == <a class="code" href="frame_8h.html#a3ca2c0bc7578bf3d337e34b2c08a6c5fab5e81cbdc78e85afc7451a04b596914e">SIGTRAMP_FRAME</a>
<a name="l00797"></a>00797       || <a class="code" href="frame_8c.html#a8f965671d7b55f002c993385024a2fdb">get_frame_type</a> (frame) == <a class="code" href="frame_8h.html#a3ca2c0bc7578bf3d337e34b2c08a6c5fa50388d38f494a082759eee92dff528aa">ARCH_FRAME</a>)
<a name="l00798"></a>00798     {
<a name="l00799"></a>00799       <span class="keyword">struct </span><a class="code" href="structcleanup.html">cleanup</a> *uiout_cleanup
<a name="l00800"></a>00800         = <a class="code" href="ui-out_8c.html#aaf5a0c991d74ad2e486f420d5c2ff058">make_cleanup_ui_out_tuple_begin_end</a> (uiout, <span class="stringliteral">&quot;frame&quot;</span>);
<a name="l00801"></a>00801 
<a name="l00802"></a>00802       <a class="code" href="annotate_8c.html#afdc42612e2f6e8d0c74b04e4431822c5">annotate_frame_begin</a> (print_level ? <a class="code" href="frame_8c.html#aa543a3af3a0507905c26e22142dabe59">frame_relative_level</a> (frame) : 0,
<a name="l00803"></a>00803                             gdbarch, <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (frame));
<a name="l00804"></a>00804 
<a name="l00805"></a>00805       <span class="comment">/* Do this regardless of SOURCE because we don&#39;t have any source</span>
<a name="l00806"></a>00806 <span class="comment">         to list for this frame.  */</span>
<a name="l00807"></a>00807       <span class="keywordflow">if</span> (print_level)
<a name="l00808"></a>00808         {
<a name="l00809"></a>00809           <a class="code" href="ui-out_8c.html#a6a23596295dce32ba2a5bd2fd2d309f8">ui_out_text</a> (uiout, <span class="stringliteral">&quot;#&quot;</span>);
<a name="l00810"></a>00810           <a class="code" href="ui-out_8c.html#a983656a2ac220cdfb83e3f309473c0cd">ui_out_field_fmt_int</a> (uiout, 2, <a class="code" href="ui-out_8h.html#ac5d0187f97768dc203458ddf644e0c7aac8a02f1b44706ba412f42aa3fc249695">ui_left</a>, <span class="stringliteral">&quot;level&quot;</span>,
<a name="l00811"></a>00811                                 <a class="code" href="frame_8c.html#aa543a3af3a0507905c26e22142dabe59">frame_relative_level</a> (frame));
<a name="l00812"></a>00812         }
<a name="l00813"></a>00813       <span class="keywordflow">if</span> (<a class="code" href="ui-out_8c.html#a473db54efcfbc60feeb5a4f54f27af46">ui_out_is_mi_like_p</a> (uiout))
<a name="l00814"></a>00814         {
<a name="l00815"></a>00815           <a class="code" href="annotate_8c.html#a80d3aebf632624ff63d70ae1306a88e4">annotate_frame_address</a> ();
<a name="l00816"></a>00816           <a class="code" href="ui-out_8c.html#ada85ed653fecf3c2a80027de6f71ef71">ui_out_field_core_addr</a> (uiout, <span class="stringliteral">&quot;addr&quot;</span>,
<a name="l00817"></a>00817                                   gdbarch, <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (frame));
<a name="l00818"></a>00818           <a class="code" href="annotate_8c.html#a60e08636bc1bc78b8f8c21336b96f43e">annotate_frame_address_end</a> ();
<a name="l00819"></a>00819         }
<a name="l00820"></a>00820 
<a name="l00821"></a>00821       <span class="keywordflow">if</span> (<a class="code" href="frame_8c.html#a8f965671d7b55f002c993385024a2fdb">get_frame_type</a> (frame) == <a class="code" href="frame_8h.html#a3ca2c0bc7578bf3d337e34b2c08a6c5fa87b564e01c3d113432b047cd72174513">DUMMY_FRAME</a>)
<a name="l00822"></a>00822         {
<a name="l00823"></a>00823           <a class="code" href="annotate_8c.html#a22ba6e47f9a8f9ccbce190b2d5f323ab">annotate_function_call</a> ();
<a name="l00824"></a>00824           <a class="code" href="ui-out_8c.html#a58efe771979c53ca23a30573d06dc291">ui_out_field_string</a> (uiout, <span class="stringliteral">&quot;func&quot;</span>, <span class="stringliteral">&quot;&lt;function called from gdb&gt;&quot;</span>);
<a name="l00825"></a>00825         }
<a name="l00826"></a>00826       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="frame_8c.html#a8f965671d7b55f002c993385024a2fdb">get_frame_type</a> (frame) == <a class="code" href="frame_8h.html#a3ca2c0bc7578bf3d337e34b2c08a6c5fab5e81cbdc78e85afc7451a04b596914e">SIGTRAMP_FRAME</a>)
<a name="l00827"></a>00827         {
<a name="l00828"></a>00828           <a class="code" href="annotate_8c.html#abf57b14248b0dfed3c738cefda4f9d01">annotate_signal_handler_caller</a> ();
<a name="l00829"></a>00829           <a class="code" href="ui-out_8c.html#a58efe771979c53ca23a30573d06dc291">ui_out_field_string</a> (uiout, <span class="stringliteral">&quot;func&quot;</span>, <span class="stringliteral">&quot;&lt;signal handler called&gt;&quot;</span>);
<a name="l00830"></a>00830         }
<a name="l00831"></a>00831       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="frame_8c.html#a8f965671d7b55f002c993385024a2fdb">get_frame_type</a> (frame) == <a class="code" href="frame_8h.html#a3ca2c0bc7578bf3d337e34b2c08a6c5fa50388d38f494a082759eee92dff528aa">ARCH_FRAME</a>)
<a name="l00832"></a>00832         {
<a name="l00833"></a>00833           <a class="code" href="ui-out_8c.html#a58efe771979c53ca23a30573d06dc291">ui_out_field_string</a> (uiout, <span class="stringliteral">&quot;func&quot;</span>, <span class="stringliteral">&quot;&lt;cross-architecture call&gt;&quot;</span>);
<a name="l00834"></a>00834         }
<a name="l00835"></a>00835       <a class="code" href="ui-out_8c.html#a6a23596295dce32ba2a5bd2fd2d309f8">ui_out_text</a> (uiout, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00836"></a>00836       <a class="code" href="annotate_8c.html#a3b8a3ff0fd0f01c38af3c28bb2473d2f">annotate_frame_end</a> ();
<a name="l00837"></a>00837 
<a name="l00838"></a>00838       <a class="code" href="cleanups_8c.html#a8b313a4f1c613973ea444e5fa54976f8">do_cleanups</a> (uiout_cleanup);
<a name="l00839"></a>00839       <span class="keywordflow">return</span>;
<a name="l00840"></a>00840     }
<a name="l00841"></a>00841 
<a name="l00842"></a>00842   <span class="comment">/* If FRAME is not the innermost frame, that normally means that</span>
<a name="l00843"></a>00843 <span class="comment">     FRAME-&gt;pc points to *after* the call instruction, and we want to</span>
<a name="l00844"></a>00844 <span class="comment">     get the line containing the call, never the next line.  But if</span>
<a name="l00845"></a>00845 <span class="comment">     the next frame is a SIGTRAMP_FRAME or a DUMMY_FRAME, then the</span>
<a name="l00846"></a>00846 <span class="comment">     next frame was not entered as the result of a call, and we want</span>
<a name="l00847"></a>00847 <span class="comment">     to get the line containing FRAME-&gt;pc.  */</span>
<a name="l00848"></a>00848   <a class="code" href="frame_8c.html#a462d32901b9dd9787da65adb627a9a05">find_frame_sal</a> (frame, &amp;sal);
<a name="l00849"></a>00849 
<a name="l00850"></a>00850   location_print = (print_what == <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4a1e9e3944b93fde52c7c92e1e15dcaf4a">LOCATION</a> 
<a name="l00851"></a>00851                     || print_what == <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4ac928790b2192fa6a3fb9dddb1f6acbf9">LOC_AND_ADDRESS</a>
<a name="l00852"></a>00852                     || print_what == <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4a706a5abb481e7684ba3944582daf6727">SRC_AND_LOC</a>);
<a name="l00853"></a>00853 
<a name="l00854"></a>00854   <span class="keywordflow">if</span> (location_print || !sal.<a class="code" href="structsymtab__and__line.html#a74216e171a96d8bcaab43fe69b49c599">symtab</a>)
<a name="l00855"></a>00855     <a class="code" href="stack_8c.html#ab3f10aab610905e59c2a90953afd1d24">print_frame</a> (frame, print_level, print_what, print_args, sal);
<a name="l00856"></a>00856 
<a name="l00857"></a>00857   source_print = (print_what == <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4ac3894bab13e59fc69fb20fe1d532b6e6">SRC_LINE</a> || print_what == <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4a706a5abb481e7684ba3944582daf6727">SRC_AND_LOC</a>);
<a name="l00858"></a>00858 
<a name="l00859"></a>00859   <span class="comment">/* If disassemble-next-line is set to auto or on and doesn&#39;t have</span>
<a name="l00860"></a>00860 <span class="comment">     the line debug messages for $pc, output the next instruction.  */</span>
<a name="l00861"></a>00861   <span class="keywordflow">if</span> ((<a class="code" href="stack_8c.html#aef5846e08cd997153bdf79c1c8e29424">disassemble_next_line</a> == <a class="code" href="defs_8h.html#a7e28c5d9363062b4fd5eec5fed14448fa48f3bffd79907d65a7ee3aee7aabc163">AUTO_BOOLEAN_AUTO</a>
<a name="l00862"></a>00862        || <a class="code" href="stack_8c.html#aef5846e08cd997153bdf79c1c8e29424">disassemble_next_line</a> == <a class="code" href="defs_8h.html#a7e28c5d9363062b4fd5eec5fed14448fa167e41bbf39564ded650f13ba73c3e22">AUTO_BOOLEAN_TRUE</a>)
<a name="l00863"></a>00863       &amp;&amp; source_print &amp;&amp; !sal.<a class="code" href="structsymtab__and__line.html#a74216e171a96d8bcaab43fe69b49c599">symtab</a>)
<a name="l00864"></a>00864     <a class="code" href="stack_8c.html#a4c7dc8022fc9117f770f469f9b64e556">do_gdb_disassembly</a> (<a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (frame), 1,
<a name="l00865"></a>00865                         <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (frame), <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (frame) + 1);
<a name="l00866"></a>00866 
<a name="l00867"></a>00867   <span class="keywordflow">if</span> (source_print &amp;&amp; sal.<a class="code" href="structsymtab__and__line.html#a74216e171a96d8bcaab43fe69b49c599">symtab</a>)
<a name="l00868"></a>00868     {
<a name="l00869"></a>00869       <span class="keywordtype">int</span> done = 0;
<a name="l00870"></a>00870       <span class="keywordtype">int</span> mid_statement = ((print_what == <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4ac3894bab13e59fc69fb20fe1d532b6e6">SRC_LINE</a>)
<a name="l00871"></a>00871                            &amp;&amp; <a class="code" href="stack_8c.html#a9aa522843eefac6f260391f68ddef0de">frame_show_address</a> (frame, sal));
<a name="l00872"></a>00872 
<a name="l00873"></a>00873       <span class="keywordflow">if</span> (<a class="code" href="defs_8h.html#a8936079e8ffb68b6dec711d3b35133ca">annotation_level</a>)
<a name="l00874"></a>00874         done = <a class="code" href="source_8c.html#a45ff3c684f9337c457f019421d14dacb">identify_source_line</a> (sal.<a class="code" href="structsymtab__and__line.html#a74216e171a96d8bcaab43fe69b49c599">symtab</a>, sal.<a class="code" href="structsymtab__and__line.html#a6a0468be675b9ac19a5b3ef26f471eaf">line</a>, mid_statement,
<a name="l00875"></a>00875                                      <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (frame));
<a name="l00876"></a>00876       <span class="keywordflow">if</span> (!done)
<a name="l00877"></a>00877         {
<a name="l00878"></a>00878           <span class="keywordflow">if</span> (<a class="code" href="defs_8h.html#af7a2b3434c7096d33fdaaffaf0857774">deprecated_print_frame_info_listing_hook</a>)
<a name="l00879"></a>00879             <a class="code" href="defs_8h.html#af7a2b3434c7096d33fdaaffaf0857774">deprecated_print_frame_info_listing_hook</a> (sal.<a class="code" href="structsymtab__and__line.html#a74216e171a96d8bcaab43fe69b49c599">symtab</a>, 
<a name="l00880"></a>00880                                                       sal.<a class="code" href="structsymtab__and__line.html#a6a0468be675b9ac19a5b3ef26f471eaf">line</a>, 
<a name="l00881"></a>00881                                                       sal.<a class="code" href="structsymtab__and__line.html#a6a0468be675b9ac19a5b3ef26f471eaf">line</a> + 1, 0);
<a name="l00882"></a>00882           <span class="keywordflow">else</span>
<a name="l00883"></a>00883             {
<a name="l00884"></a>00884               <span class="keyword">struct </span><a class="code" href="structvalue__print__options.html">value_print_options</a> opts;
<a name="l00885"></a>00885 
<a name="l00886"></a>00886               <a class="code" href="valprint_8c.html#aa2d4dfe4b11841ccafc4d0c0d410095d">get_user_print_options</a> (&amp;opts);
<a name="l00887"></a>00887               <span class="comment">/* We used to do this earlier, but that is clearly</span>
<a name="l00888"></a>00888 <span class="comment">                 wrong.  This function is used by many different</span>
<a name="l00889"></a>00889 <span class="comment">                 parts of gdb, including normal_stop in infrun.c,</span>
<a name="l00890"></a>00890 <span class="comment">                 which uses this to print out the current PC</span>
<a name="l00891"></a>00891 <span class="comment">                 when we stepi/nexti into the middle of a source</span>
<a name="l00892"></a>00892 <span class="comment">                 line.  Only the command line really wants this</span>
<a name="l00893"></a>00893 <span class="comment">                 behavior.  Other UIs probably would like the</span>
<a name="l00894"></a>00894 <span class="comment">                 ability to decide for themselves if it is desired.  */</span>
<a name="l00895"></a>00895               <span class="keywordflow">if</span> (opts.<a class="code" href="structvalue__print__options.html#a43ff625f7e08533c0e5cc38eddca80cf">addressprint</a> &amp;&amp; mid_statement)
<a name="l00896"></a>00896                 {
<a name="l00897"></a>00897                   <a class="code" href="ui-out_8c.html#ada85ed653fecf3c2a80027de6f71ef71">ui_out_field_core_addr</a> (uiout, <span class="stringliteral">&quot;addr&quot;</span>,
<a name="l00898"></a>00898                                           gdbarch, <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (frame));
<a name="l00899"></a>00899                   <a class="code" href="ui-out_8c.html#a6a23596295dce32ba2a5bd2fd2d309f8">ui_out_text</a> (uiout, <span class="stringliteral">&quot;\t&quot;</span>);
<a name="l00900"></a>00900                 }
<a name="l00901"></a>00901 
<a name="l00902"></a>00902               <a class="code" href="source_8c.html#a2b372e093e79fa280d0c537309a6042c">print_source_lines</a> (sal.<a class="code" href="structsymtab__and__line.html#a74216e171a96d8bcaab43fe69b49c599">symtab</a>, sal.<a class="code" href="structsymtab__and__line.html#a6a0468be675b9ac19a5b3ef26f471eaf">line</a>, sal.<a class="code" href="structsymtab__and__line.html#a6a0468be675b9ac19a5b3ef26f471eaf">line</a> + 1, 0);
<a name="l00903"></a>00903             }
<a name="l00904"></a>00904         }
<a name="l00905"></a>00905 
<a name="l00906"></a>00906       <span class="comment">/* If disassemble-next-line is set to on and there is line debug</span>
<a name="l00907"></a>00907 <span class="comment">         messages, output assembly codes for next line.  */</span>
<a name="l00908"></a>00908       <span class="keywordflow">if</span> (<a class="code" href="stack_8c.html#aef5846e08cd997153bdf79c1c8e29424">disassemble_next_line</a> == <a class="code" href="defs_8h.html#a7e28c5d9363062b4fd5eec5fed14448fa167e41bbf39564ded650f13ba73c3e22">AUTO_BOOLEAN_TRUE</a>)
<a name="l00909"></a>00909         <a class="code" href="stack_8c.html#a4c7dc8022fc9117f770f469f9b64e556">do_gdb_disassembly</a> (<a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (frame), -1, sal.<a class="code" href="structsymtab__and__line.html#a77665fa461ad187cb755efa256ba44d7">pc</a>, sal.<a class="code" href="structsymtab__and__line.html#ab4a806871b9f98729ab7c9c2c345b602">end</a>);
<a name="l00910"></a>00910     }
<a name="l00911"></a>00911 
<a name="l00912"></a>00912   <span class="keywordflow">if</span> (set_current_sal)
<a name="l00913"></a>00913     {
<a name="l00914"></a>00914       <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc;
<a name="l00915"></a>00915 
<a name="l00916"></a>00916       <span class="keywordflow">if</span> (<a class="code" href="frame_8c.html#af87888489ef191ac98c292350017e84e">get_frame_pc_if_available</a> (frame, &amp;pc))
<a name="l00917"></a>00917         <a class="code" href="stack_8c.html#ab21472d3608ef89bb34c28b79c5ec8a4">set_last_displayed_sal</a> (1, sal.<a class="code" href="structsymtab__and__line.html#acc91f0276f4648cb5a970f17ddcbaf09">pspace</a>, pc, sal.<a class="code" href="structsymtab__and__line.html#a74216e171a96d8bcaab43fe69b49c599">symtab</a>, sal.<a class="code" href="structsymtab__and__line.html#a6a0468be675b9ac19a5b3ef26f471eaf">line</a>);
<a name="l00918"></a>00918       <span class="keywordflow">else</span>
<a name="l00919"></a>00919         <a class="code" href="stack_8c.html#ab21472d3608ef89bb34c28b79c5ec8a4">set_last_displayed_sal</a> (0, 0, 0, 0, 0);
<a name="l00920"></a>00920     }
<a name="l00921"></a>00921 
<a name="l00922"></a>00922   <a class="code" href="annotate_8c.html#a3b8a3ff0fd0f01c38af3c28bb2473d2f">annotate_frame_end</a> ();
<a name="l00923"></a>00923 
<a name="l00924"></a>00924   <a class="code" href="ui-file_8c.html#a046f07b5ef1bcc35c28b4be983e39998">gdb_flush</a> (<a class="code" href="main_8c.html#a41a2b997ba5454df787d61f051dd918c">gdb_stdout</a>);
<a name="l00925"></a>00925 }
<a name="l00926"></a>00926 
<a name="l00927"></a>00927 <span class="comment">/* Remember the last symtab and line we displayed, which we use e.g.</span>
<a name="l00928"></a>00928 <span class="comment"> * as the place to put a breakpoint when the `break&#39; command is</span>
<a name="l00929"></a>00929 <span class="comment"> * invoked with no arguments.  */</span>
<a name="l00930"></a>00930 
<a name="l00931"></a>00931 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00932"></a><a class="code" href="stack_8c.html#ab21472d3608ef89bb34c28b79c5ec8a4">00932</a> <a class="code" href="stack_8c.html#ab21472d3608ef89bb34c28b79c5ec8a4">set_last_displayed_sal</a> (<span class="keywordtype">int</span> valid, <span class="keyword">struct</span> <a class="code" href="structprogram__space.html">program_space</a> *pspace,
<a name="l00933"></a>00933                         <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> addr, <span class="keyword">struct</span> <a class="code" href="structsymtab.html">symtab</a> *<a class="code" href="structsymtab.html">symtab</a>,
<a name="l00934"></a>00934                         <span class="keywordtype">int</span> <a class="code" href="symtab_8h.html#a41ebd28ef1d7c6ade45642cb6acc1039">line</a>)
<a name="l00935"></a>00935 {
<a name="l00936"></a>00936   <a class="code" href="stack_8c.html#ac90727e2435cdffbbcbf95329bd8a647">last_displayed_sal_valid</a> = valid;
<a name="l00937"></a>00937   last_displayed_pspace = pspace;
<a name="l00938"></a>00938   <a class="code" href="stack_8c.html#aac9f4bbb5ca2fa6675fbc749f83aac3b">last_displayed_addr</a> = addr;
<a name="l00939"></a>00939   last_displayed_symtab = symtab;
<a name="l00940"></a>00940   <a class="code" href="stack_8c.html#a07f07b6163174341b60f79d96264251d">last_displayed_line</a> = <a class="code" href="symtab_8h.html#a41ebd28ef1d7c6ade45642cb6acc1039">line</a>;
<a name="l00941"></a>00941   <span class="keywordflow">if</span> (valid &amp;&amp; pspace == NULL)
<a name="l00942"></a>00942     {
<a name="l00943"></a>00943       <a class="code" href="stack_8c.html#aa3f437c3475396471464569d8b7213ec">clear_last_displayed_sal</a> ();
<a name="l00944"></a>00944       <a class="code" href="common-utils_8h.html#aa14285d9d3d4171016ef9cf09447e8bb">internal_error</a> (__FILE__, __LINE__,
<a name="l00945"></a>00945                       <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Trying to set NULL pspace.&quot;</span>));
<a name="l00946"></a>00946     }
<a name="l00947"></a>00947 }
<a name="l00948"></a>00948 
<a name="l00949"></a>00949 <span class="comment">/* Forget the last sal we displayed.  */</span>
<a name="l00950"></a>00950 
<a name="l00951"></a>00951 <span class="keywordtype">void</span>
<a name="l00952"></a><a class="code" href="stack_8h.html#aa3f437c3475396471464569d8b7213ec">00952</a> <a class="code" href="stack_8c.html#aa3f437c3475396471464569d8b7213ec">clear_last_displayed_sal</a> (<span class="keywordtype">void</span>)
<a name="l00953"></a>00953 {
<a name="l00954"></a>00954   <a class="code" href="stack_8c.html#ac90727e2435cdffbbcbf95329bd8a647">last_displayed_sal_valid</a> = 0;
<a name="l00955"></a>00955   last_displayed_pspace = 0;
<a name="l00956"></a>00956   <a class="code" href="stack_8c.html#aac9f4bbb5ca2fa6675fbc749f83aac3b">last_displayed_addr</a> = 0;
<a name="l00957"></a>00957   last_displayed_symtab = 0;
<a name="l00958"></a>00958   <a class="code" href="stack_8c.html#a07f07b6163174341b60f79d96264251d">last_displayed_line</a> = 0;
<a name="l00959"></a>00959 }
<a name="l00960"></a>00960 
<a name="l00961"></a>00961 <span class="comment">/* Is our record of the last sal we displayed valid?  If not,</span>
<a name="l00962"></a>00962 <span class="comment"> * the get_last_displayed_* functions will return NULL or 0, as</span>
<a name="l00963"></a>00963 <span class="comment"> * appropriate.  */</span>
<a name="l00964"></a>00964 
<a name="l00965"></a>00965 <span class="keywordtype">int</span>
<a name="l00966"></a><a class="code" href="stack_8h.html#a47beab727091bf3c0ed6747aa51e88a4">00966</a> <a class="code" href="stack_8c.html#a47beab727091bf3c0ed6747aa51e88a4">last_displayed_sal_is_valid</a> (<span class="keywordtype">void</span>)
<a name="l00967"></a>00967 {
<a name="l00968"></a>00968   <span class="keywordflow">return</span> <a class="code" href="stack_8c.html#ac90727e2435cdffbbcbf95329bd8a647">last_displayed_sal_valid</a>;
<a name="l00969"></a>00969 }
<a name="l00970"></a>00970 
<a name="l00971"></a>00971 <span class="comment">/* Get the pspace of the last sal we displayed, if it&#39;s valid.  */</span>
<a name="l00972"></a>00972 
<a name="l00973"></a>00973 <span class="keyword">struct </span><a class="code" href="structprogram__space.html">program_space</a> *
<a name="l00974"></a><a class="code" href="stack_8h.html#a49093b6cd49e5ba6950a19446ec1c4c5">00974</a> <a class="code" href="stack_8c.html#a49093b6cd49e5ba6950a19446ec1c4c5">get_last_displayed_pspace</a> (<span class="keywordtype">void</span>)
<a name="l00975"></a>00975 {
<a name="l00976"></a>00976   <span class="keywordflow">if</span> (<a class="code" href="stack_8c.html#ac90727e2435cdffbbcbf95329bd8a647">last_displayed_sal_valid</a>)
<a name="l00977"></a>00977     <span class="keywordflow">return</span> <a class="code" href="stack_8c.html#abd30a73ee053f465d720d9841426409a">last_displayed_pspace</a>;
<a name="l00978"></a>00978   <span class="keywordflow">return</span> 0;
<a name="l00979"></a>00979 }
<a name="l00980"></a>00980 
<a name="l00981"></a>00981 <span class="comment">/* Get the address of the last sal we displayed, if it&#39;s valid.  */</span>
<a name="l00982"></a>00982 
<a name="l00983"></a>00983 <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l00984"></a><a class="code" href="stack_8h.html#a4b9d3262c1067ac9e8f74b76993299da">00984</a> <a class="code" href="stack_8c.html#a4b9d3262c1067ac9e8f74b76993299da">get_last_displayed_addr</a> (<span class="keywordtype">void</span>)
<a name="l00985"></a>00985 {
<a name="l00986"></a>00986   <span class="keywordflow">if</span> (<a class="code" href="stack_8c.html#ac90727e2435cdffbbcbf95329bd8a647">last_displayed_sal_valid</a>)
<a name="l00987"></a>00987     <span class="keywordflow">return</span> <a class="code" href="stack_8c.html#aac9f4bbb5ca2fa6675fbc749f83aac3b">last_displayed_addr</a>;
<a name="l00988"></a>00988   <span class="keywordflow">return</span> 0;
<a name="l00989"></a>00989 }
<a name="l00990"></a>00990 
<a name="l00991"></a>00991 <span class="comment">/* Get the symtab of the last sal we displayed, if it&#39;s valid.  */</span>
<a name="l00992"></a>00992 
<a name="l00993"></a>00993 <span class="keyword">struct </span><a class="code" href="structsymtab.html">symtab</a>*
<a name="l00994"></a><a class="code" href="stack_8h.html#afdef12055c64d642f37c595fc63be5f2">00994</a> <a class="code" href="stack_8c.html#afdef12055c64d642f37c595fc63be5f2">get_last_displayed_symtab</a> (<span class="keywordtype">void</span>)
<a name="l00995"></a>00995 {
<a name="l00996"></a>00996   <span class="keywordflow">if</span> (<a class="code" href="stack_8c.html#ac90727e2435cdffbbcbf95329bd8a647">last_displayed_sal_valid</a>)
<a name="l00997"></a>00997     <span class="keywordflow">return</span> <a class="code" href="stack_8c.html#aa6776ac3d2fa497074008849f76ee46a">last_displayed_symtab</a>;
<a name="l00998"></a>00998   <span class="keywordflow">return</span> 0;
<a name="l00999"></a>00999 }
<a name="l01000"></a>01000 
<a name="l01001"></a>01001 <span class="comment">/* Get the line of the last sal we displayed, if it&#39;s valid.  */</span>
<a name="l01002"></a>01002 
<a name="l01003"></a>01003 <span class="keywordtype">int</span>
<a name="l01004"></a><a class="code" href="stack_8h.html#a94a7a8437ec860efe5c514ed72cae337">01004</a> <a class="code" href="stack_8c.html#a94a7a8437ec860efe5c514ed72cae337">get_last_displayed_line</a> (<span class="keywordtype">void</span>)
<a name="l01005"></a>01005 {
<a name="l01006"></a>01006   <span class="keywordflow">if</span> (<a class="code" href="stack_8c.html#ac90727e2435cdffbbcbf95329bd8a647">last_displayed_sal_valid</a>)
<a name="l01007"></a>01007     <span class="keywordflow">return</span> <a class="code" href="stack_8c.html#a07f07b6163174341b60f79d96264251d">last_displayed_line</a>;
<a name="l01008"></a>01008   <span class="keywordflow">return</span> 0;
<a name="l01009"></a>01009 }
<a name="l01010"></a>01010 
<a name="l01011"></a>01011 <span class="comment">/* Get the last sal we displayed, if it&#39;s valid.  */</span>
<a name="l01012"></a>01012 
<a name="l01013"></a>01013 <span class="keywordtype">void</span>
<a name="l01014"></a><a class="code" href="stack_8h.html#a1dd36b19717f12efb7b06cc658ce085f">01014</a> <a class="code" href="stack_8c.html#a1dd36b19717f12efb7b06cc658ce085f">get_last_displayed_sal</a> (<span class="keyword">struct</span> <a class="code" href="structsymtab__and__line.html">symtab_and_line</a> *sal)
<a name="l01015"></a>01015 {
<a name="l01016"></a>01016   <span class="keywordflow">if</span> (<a class="code" href="stack_8c.html#ac90727e2435cdffbbcbf95329bd8a647">last_displayed_sal_valid</a>)
<a name="l01017"></a>01017     {
<a name="l01018"></a>01018       sal-&gt;<a class="code" href="structsymtab__and__line.html#acc91f0276f4648cb5a970f17ddcbaf09">pspace</a> = <a class="code" href="stack_8c.html#abd30a73ee053f465d720d9841426409a">last_displayed_pspace</a>;
<a name="l01019"></a>01019       sal-&gt;<a class="code" href="structsymtab__and__line.html#a77665fa461ad187cb755efa256ba44d7">pc</a> = <a class="code" href="stack_8c.html#aac9f4bbb5ca2fa6675fbc749f83aac3b">last_displayed_addr</a>;
<a name="l01020"></a>01020       sal-&gt;<a class="code" href="structsymtab__and__line.html#a74216e171a96d8bcaab43fe69b49c599">symtab</a> = <a class="code" href="stack_8c.html#aa6776ac3d2fa497074008849f76ee46a">last_displayed_symtab</a>;
<a name="l01021"></a>01021       sal-&gt;<a class="code" href="structsymtab__and__line.html#a6a0468be675b9ac19a5b3ef26f471eaf">line</a> = <a class="code" href="stack_8c.html#a07f07b6163174341b60f79d96264251d">last_displayed_line</a>;
<a name="l01022"></a>01022     }
<a name="l01023"></a>01023   <span class="keywordflow">else</span>
<a name="l01024"></a>01024     {
<a name="l01025"></a>01025       sal-&gt;<a class="code" href="structsymtab__and__line.html#acc91f0276f4648cb5a970f17ddcbaf09">pspace</a> = 0;
<a name="l01026"></a>01026       sal-&gt;<a class="code" href="structsymtab__and__line.html#a77665fa461ad187cb755efa256ba44d7">pc</a> = 0;
<a name="l01027"></a>01027       sal-&gt;<a class="code" href="structsymtab__and__line.html#a74216e171a96d8bcaab43fe69b49c599">symtab</a> = 0;
<a name="l01028"></a>01028       sal-&gt;<a class="code" href="structsymtab__and__line.html#a6a0468be675b9ac19a5b3ef26f471eaf">line</a> = 0;
<a name="l01029"></a>01029     }
<a name="l01030"></a>01030 }
<a name="l01031"></a>01031 
<a name="l01032"></a>01032 
<a name="l01033"></a>01033 <span class="comment">/* Attempt to obtain the FUNNAME, FUNLANG and optionally FUNCP of the function</span>
<a name="l01034"></a>01034 <span class="comment">   corresponding to FRAME.  FUNNAME needs to be freed by the caller.  */</span>
<a name="l01035"></a>01035 
<a name="l01036"></a>01036 <span class="keywordtype">void</span>
<a name="l01037"></a><a class="code" href="stack_8h.html#aae29e3af4291a6c85fd82000e51ee80c">01037</a> <a class="code" href="stack_8c.html#aae29e3af4291a6c85fd82000e51ee80c">find_frame_funname</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame, <span class="keywordtype">char</span> **funname,
<a name="l01038"></a>01038                     <span class="keyword">enum</span> <a class="code" href="defs_8h.html#aa37aa8979934d47ac32fd96ecff32202">language</a> *funlang, <span class="keyword">struct</span> <a class="code" href="structsymbol.html">symbol</a> **funcp)
<a name="l01039"></a>01039 {
<a name="l01040"></a>01040   <span class="keyword">struct </span><a class="code" href="structsymbol.html">symbol</a> *<a class="code" href="remote-fileio_8c.html#a7e97efb32ba66c3f1141bdbb82529d20">func</a>;
<a name="l01041"></a>01041 
<a name="l01042"></a>01042   *funname = NULL;
<a name="l01043"></a>01043   *funlang = <a class="code" href="defs_8h.html#aa37aa8979934d47ac32fd96ecff32202a3082c2da456a8ca3aa34f721de2c3565">language_unknown</a>;
<a name="l01044"></a>01044   <span class="keywordflow">if</span> (funcp)
<a name="l01045"></a>01045     *funcp = NULL;
<a name="l01046"></a>01046 
<a name="l01047"></a>01047   func = <a class="code" href="blockframe_8c.html#a901685553101d7f605ab9f3d7d328cd6">get_frame_function</a> (frame);
<a name="l01048"></a>01048   <span class="keywordflow">if</span> (func)
<a name="l01049"></a>01049     {
<a name="l01050"></a>01050       <span class="comment">/* In certain pathological cases, the symtabs give the wrong</span>
<a name="l01051"></a>01051 <span class="comment">         function (when we are in the first function in a file which</span>
<a name="l01052"></a>01052 <span class="comment">         is compiled without debugging symbols, the previous function</span>
<a name="l01053"></a>01053 <span class="comment">         is compiled with debugging symbols, and the &quot;foo.o&quot; symbol</span>
<a name="l01054"></a>01054 <span class="comment">         that is supposed to tell us where the file with debugging</span>
<a name="l01055"></a>01055 <span class="comment">         symbols ends has been truncated by ar because it is longer</span>
<a name="l01056"></a>01056 <span class="comment">         than 15 characters).  This also occurs if the user uses asm()</span>
<a name="l01057"></a>01057 <span class="comment">         to create a function but not stabs for it (in a file compiled</span>
<a name="l01058"></a>01058 <span class="comment">         with -g).</span>
<a name="l01059"></a>01059 <span class="comment"></span>
<a name="l01060"></a>01060 <span class="comment">         So look in the minimal symbol tables as well, and if it comes</span>
<a name="l01061"></a>01061 <span class="comment">         up with a larger address for the function use that instead.</span>
<a name="l01062"></a>01062 <span class="comment">         I don&#39;t think this can ever cause any problems; there</span>
<a name="l01063"></a>01063 <span class="comment">         shouldn&#39;t be any minimal symbols in the middle of a function;</span>
<a name="l01064"></a>01064 <span class="comment">         if this is ever changed many parts of GDB will need to be</span>
<a name="l01065"></a>01065 <span class="comment">         changed (and we&#39;ll create a find_pc_minimal_function or some</span>
<a name="l01066"></a>01066 <span class="comment">         such).  */</span>
<a name="l01067"></a>01067 
<a name="l01068"></a>01068       <span class="keyword">struct </span><a class="code" href="structbound__minimal__symbol.html">bound_minimal_symbol</a> msymbol;
<a name="l01069"></a>01069 
<a name="l01070"></a>01070       <span class="comment">/* Don&#39;t attempt to do this for inlined functions, which do not</span>
<a name="l01071"></a>01071 <span class="comment">         have a corresponding minimal symbol.  */</span>
<a name="l01072"></a>01072       <span class="keywordflow">if</span> (!<a class="code" href="block_8c.html#a4f68882a103ca948ccea9a5fff7aa764">block_inlined_p</a> (<a class="code" href="symtab_8h.html#a2c83ea82b28e9a9d8f9b655c2d502593">SYMBOL_BLOCK_VALUE</a> (func)))
<a name="l01073"></a>01073         msymbol
<a name="l01074"></a>01074           = <a class="code" href="minsyms_8c.html#ad4b48b6ef6c913138a8ac33f8c3cfeb2">lookup_minimal_symbol_by_pc</a> (<a class="code" href="frame_8c.html#a9035a35b7470b669f9bafee9c3961559">get_frame_address_in_block</a> (frame));
<a name="l01075"></a>01075       <span class="keywordflow">else</span>
<a name="l01076"></a>01076         <a class="code" href="gdb__string_8h.html#adb03df3679ce1445e801310614624ccb">memset</a> (&amp;msymbol, 0, <span class="keyword">sizeof</span> (msymbol));
<a name="l01077"></a>01077 
<a name="l01078"></a>01078       <span class="keywordflow">if</span> (msymbol.<a class="code" href="structbound__minimal__symbol.html#aabff08898c1d96d6c68a95f35b635214">minsym</a> != NULL
<a name="l01079"></a>01079           &amp;&amp; (<a class="code" href="symtab_8h.html#abee697b9e3bb4f4d164ad920a87ab854">SYMBOL_VALUE_ADDRESS</a> (msymbol.<a class="code" href="structbound__minimal__symbol.html#aabff08898c1d96d6c68a95f35b635214">minsym</a>)
<a name="l01080"></a>01080               &gt; <a class="code" href="block_8h.html#a08fdff319bcd75e92b61c79139592af6">BLOCK_START</a> (<a class="code" href="symtab_8h.html#a2c83ea82b28e9a9d8f9b655c2d502593">SYMBOL_BLOCK_VALUE</a> (func))))
<a name="l01081"></a>01081         {
<a name="l01082"></a>01082           <span class="comment">/* We also don&#39;t know anything about the function besides</span>
<a name="l01083"></a>01083 <span class="comment">             its address and name.  */</span>
<a name="l01084"></a>01084           func = 0;
<a name="l01085"></a>01085           *funname = xstrdup (<a class="code" href="symtab_8h.html#ac7f4cb1648125545fbd0e4f13b0c572c">SYMBOL_PRINT_NAME</a> (msymbol.<a class="code" href="structbound__minimal__symbol.html#aabff08898c1d96d6c68a95f35b635214">minsym</a>));
<a name="l01086"></a>01086           *funlang = <a class="code" href="symtab_8h.html#a82fc22e60b1007c826a5ebf7d6593e78">SYMBOL_LANGUAGE</a> (msymbol.<a class="code" href="structbound__minimal__symbol.html#aabff08898c1d96d6c68a95f35b635214">minsym</a>);
<a name="l01087"></a>01087         }
<a name="l01088"></a>01088       <span class="keywordflow">else</span>
<a name="l01089"></a>01089         {
<a name="l01090"></a>01090           *funname = xstrdup (<a class="code" href="symtab_8h.html#ac7f4cb1648125545fbd0e4f13b0c572c">SYMBOL_PRINT_NAME</a> (func));
<a name="l01091"></a>01091           *funlang = <a class="code" href="symtab_8h.html#a82fc22e60b1007c826a5ebf7d6593e78">SYMBOL_LANGUAGE</a> (func);
<a name="l01092"></a>01092           <span class="keywordflow">if</span> (funcp)
<a name="l01093"></a>01093             *funcp = <a class="code" href="remote-fileio_8c.html#a7e97efb32ba66c3f1141bdbb82529d20">func</a>;
<a name="l01094"></a>01094           <span class="keywordflow">if</span> (*funlang == <a class="code" href="defs_8h.html#aa37aa8979934d47ac32fd96ecff32202a44cdc45a15de5e8e690da9ebf1b91132">language_cplus</a>)
<a name="l01095"></a>01095             {
<a name="l01096"></a>01096               <span class="comment">/* It seems appropriate to use SYMBOL_PRINT_NAME() here,</span>
<a name="l01097"></a>01097 <span class="comment">                 to display the demangled name that we already have</span>
<a name="l01098"></a>01098 <span class="comment">                 stored in the symbol table, but we stored a version</span>
<a name="l01099"></a>01099 <span class="comment">                 with DMGL_PARAMS turned on, and here we don&#39;t want to</span>
<a name="l01100"></a>01100 <span class="comment">                 display parameters.  So remove the parameters.  */</span>
<a name="l01101"></a>01101               <span class="keywordtype">char</span> *func_only = <a class="code" href="cp-support_8c.html#a6a38238179eb06d9c4927adf4385b2e7">cp_remove_params</a> (*funname);
<a name="l01102"></a>01102 
<a name="l01103"></a>01103               <span class="keywordflow">if</span> (func_only)
<a name="l01104"></a>01104                 {
<a name="l01105"></a>01105                   <a class="code" href="common-utils_8c.html#a976e14808b9247ec952c262553f09f8f">xfree</a> (*funname);
<a name="l01106"></a>01106                   *funname = func_only;
<a name="l01107"></a>01107                 }
<a name="l01108"></a>01108             }
<a name="l01109"></a>01109         }
<a name="l01110"></a>01110     }
<a name="l01111"></a>01111   <span class="keywordflow">else</span>
<a name="l01112"></a>01112     {
<a name="l01113"></a>01113       <span class="keyword">struct </span><a class="code" href="structbound__minimal__symbol.html">bound_minimal_symbol</a> msymbol;
<a name="l01114"></a>01114       <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc;
<a name="l01115"></a>01115 
<a name="l01116"></a>01116       <span class="keywordflow">if</span> (!<a class="code" href="frame_8c.html#a2e2cce87f4a2649678192f4db323c095">get_frame_address_in_block_if_available</a> (frame, &amp;pc))
<a name="l01117"></a>01117         <span class="keywordflow">return</span>;
<a name="l01118"></a>01118 
<a name="l01119"></a>01119       msymbol = <a class="code" href="minsyms_8c.html#ad4b48b6ef6c913138a8ac33f8c3cfeb2">lookup_minimal_symbol_by_pc</a> (pc);
<a name="l01120"></a>01120       <span class="keywordflow">if</span> (msymbol.<a class="code" href="structbound__minimal__symbol.html#aabff08898c1d96d6c68a95f35b635214">minsym</a> != NULL)
<a name="l01121"></a>01121         {
<a name="l01122"></a>01122           *funname = xstrdup (<a class="code" href="symtab_8h.html#ac7f4cb1648125545fbd0e4f13b0c572c">SYMBOL_PRINT_NAME</a> (msymbol.<a class="code" href="structbound__minimal__symbol.html#aabff08898c1d96d6c68a95f35b635214">minsym</a>));
<a name="l01123"></a>01123           *funlang = <a class="code" href="symtab_8h.html#a82fc22e60b1007c826a5ebf7d6593e78">SYMBOL_LANGUAGE</a> (msymbol.<a class="code" href="structbound__minimal__symbol.html#aabff08898c1d96d6c68a95f35b635214">minsym</a>);
<a name="l01124"></a>01124         }
<a name="l01125"></a>01125     }
<a name="l01126"></a>01126 }
<a name="l01127"></a>01127 
<a name="l01128"></a>01128 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l01129"></a><a class="code" href="stack_8c.html#ab3f10aab610905e59c2a90953afd1d24">01129</a> <a class="code" href="stack_8c.html#ab3f10aab610905e59c2a90953afd1d24">print_frame</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame, <span class="keywordtype">int</span> print_level,
<a name="l01130"></a>01130              <span class="keyword">enum</span> <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4">print_what</a> <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4">print_what</a>, <span class="keywordtype">int</span> print_args,
<a name="l01131"></a>01131              <span class="keyword">struct</span> <a class="code" href="structsymtab__and__line.html">symtab_and_line</a> sal)
<a name="l01132"></a>01132 {
<a name="l01133"></a>01133   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (frame);
<a name="l01134"></a>01134   <span class="keyword">struct </span><a class="code" href="structui__out.html">ui_out</a> *uiout = <a class="code" href="ui-out_8c.html#a3d9e2a5710f076cc035ef73920eb8c87">current_uiout</a>;
<a name="l01135"></a>01135   <span class="keywordtype">char</span> *funname = NULL;
<a name="l01136"></a>01136   <span class="keyword">enum</span> <a class="code" href="defs_8h.html#aa37aa8979934d47ac32fd96ecff32202">language</a> funlang = <a class="code" href="defs_8h.html#aa37aa8979934d47ac32fd96ecff32202a3082c2da456a8ca3aa34f721de2c3565">language_unknown</a>;
<a name="l01137"></a>01137   <span class="keyword">struct </span><a class="code" href="structui__file.html">ui_file</a> *stb;
<a name="l01138"></a>01138   <span class="keyword">struct </span><a class="code" href="structcleanup.html">cleanup</a> *old_chain, *list_chain;
<a name="l01139"></a>01139   <span class="keyword">struct </span><a class="code" href="structvalue__print__options.html">value_print_options</a> opts;
<a name="l01140"></a>01140   <span class="keyword">struct </span><a class="code" href="structsymbol.html">symbol</a> *<a class="code" href="remote-fileio_8c.html#a7e97efb32ba66c3f1141bdbb82529d20">func</a>;
<a name="l01141"></a>01141   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc = 0;
<a name="l01142"></a>01142   <span class="keywordtype">int</span> pc_p;
<a name="l01143"></a>01143 
<a name="l01144"></a>01144   pc_p = <a class="code" href="frame_8c.html#af87888489ef191ac98c292350017e84e">get_frame_pc_if_available</a> (frame, &amp;pc);
<a name="l01145"></a>01145 
<a name="l01146"></a>01146   stb = <a class="code" href="ui-file_8c.html#a340771735f105582d314e191a399a45c">mem_fileopen</a> ();
<a name="l01147"></a>01147   old_chain = <a class="code" href="utils_8c.html#a94dc56baeb57791e114136764f7763aa">make_cleanup_ui_file_delete</a> (stb);
<a name="l01148"></a>01148 
<a name="l01149"></a>01149   <a class="code" href="stack_8c.html#aae29e3af4291a6c85fd82000e51ee80c">find_frame_funname</a> (frame, &amp;funname, &amp;funlang, &amp;func);
<a name="l01150"></a>01150   <a class="code" href="cleanups_8c.html#a3d418f8af424aec399898c2d48b26224">make_cleanup</a> (<a class="code" href="common-utils_8c.html#a976e14808b9247ec952c262553f09f8f">xfree</a>, funname);
<a name="l01151"></a>01151 
<a name="l01152"></a>01152   <a class="code" href="annotate_8c.html#afdc42612e2f6e8d0c74b04e4431822c5">annotate_frame_begin</a> (print_level ? <a class="code" href="frame_8c.html#aa543a3af3a0507905c26e22142dabe59">frame_relative_level</a> (frame) : 0,
<a name="l01153"></a>01153                         gdbarch, pc);
<a name="l01154"></a>01154 
<a name="l01155"></a>01155   list_chain = <a class="code" href="ui-out_8c.html#aaf5a0c991d74ad2e486f420d5c2ff058">make_cleanup_ui_out_tuple_begin_end</a> (uiout, <span class="stringliteral">&quot;frame&quot;</span>);
<a name="l01156"></a>01156 
<a name="l01157"></a>01157   <span class="keywordflow">if</span> (print_level)
<a name="l01158"></a>01158     {
<a name="l01159"></a>01159       <a class="code" href="ui-out_8c.html#a6a23596295dce32ba2a5bd2fd2d309f8">ui_out_text</a> (uiout, <span class="stringliteral">&quot;#&quot;</span>);
<a name="l01160"></a>01160       <a class="code" href="ui-out_8c.html#a983656a2ac220cdfb83e3f309473c0cd">ui_out_field_fmt_int</a> (uiout, 2, <a class="code" href="ui-out_8h.html#ac5d0187f97768dc203458ddf644e0c7aac8a02f1b44706ba412f42aa3fc249695">ui_left</a>, <span class="stringliteral">&quot;level&quot;</span>,
<a name="l01161"></a>01161                             <a class="code" href="frame_8c.html#aa543a3af3a0507905c26e22142dabe59">frame_relative_level</a> (frame));
<a name="l01162"></a>01162     }
<a name="l01163"></a>01163   <a class="code" href="valprint_8c.html#aa2d4dfe4b11841ccafc4d0c0d410095d">get_user_print_options</a> (&amp;opts);
<a name="l01164"></a>01164   <span class="keywordflow">if</span> (opts.<a class="code" href="structvalue__print__options.html#a43ff625f7e08533c0e5cc38eddca80cf">addressprint</a>)
<a name="l01165"></a>01165     <span class="keywordflow">if</span> (!sal.<a class="code" href="structsymtab__and__line.html#a74216e171a96d8bcaab43fe69b49c599">symtab</a>
<a name="l01166"></a>01166         || <a class="code" href="stack_8c.html#a9aa522843eefac6f260391f68ddef0de">frame_show_address</a> (frame, sal)
<a name="l01167"></a>01167         || print_what == <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4ac928790b2192fa6a3fb9dddb1f6acbf9">LOC_AND_ADDRESS</a>)
<a name="l01168"></a>01168       {
<a name="l01169"></a>01169         <a class="code" href="annotate_8c.html#a80d3aebf632624ff63d70ae1306a88e4">annotate_frame_address</a> ();
<a name="l01170"></a>01170         <span class="keywordflow">if</span> (pc_p)
<a name="l01171"></a>01171           <a class="code" href="ui-out_8c.html#ada85ed653fecf3c2a80027de6f71ef71">ui_out_field_core_addr</a> (uiout, <span class="stringliteral">&quot;addr&quot;</span>, gdbarch, pc);
<a name="l01172"></a>01172         <span class="keywordflow">else</span>
<a name="l01173"></a>01173           <a class="code" href="ui-out_8c.html#a58efe771979c53ca23a30573d06dc291">ui_out_field_string</a> (uiout, <span class="stringliteral">&quot;addr&quot;</span>, <span class="stringliteral">&quot;&lt;unavailable&gt;&quot;</span>);
<a name="l01174"></a>01174         <a class="code" href="annotate_8c.html#a60e08636bc1bc78b8f8c21336b96f43e">annotate_frame_address_end</a> ();
<a name="l01175"></a>01175         <a class="code" href="ui-out_8c.html#a6a23596295dce32ba2a5bd2fd2d309f8">ui_out_text</a> (uiout, <span class="stringliteral">&quot; in &quot;</span>);
<a name="l01176"></a>01176       }
<a name="l01177"></a>01177   <a class="code" href="annotate_8c.html#a2ecad01790f3c47cd084ef10668951f6">annotate_frame_function_name</a> ();
<a name="l01178"></a>01178   <a class="code" href="utils_8c.html#ab6cbc55040f60777508417f7708b7eb5">fprintf_symbol_filtered</a> (stb, funname ? funname : <span class="stringliteral">&quot;??&quot;</span>,
<a name="l01179"></a>01179                            funlang, DMGL_ANSI);
<a name="l01180"></a>01180   <a class="code" href="ui-out_8c.html#a40106bb0446639417c75a408194a8eee">ui_out_field_stream</a> (uiout, <span class="stringliteral">&quot;func&quot;</span>, stb);
<a name="l01181"></a>01181   <a class="code" href="ui-out_8c.html#a24e0ad942242d807edb27cd3fe6aaa39">ui_out_wrap_hint</a> (uiout, <span class="stringliteral">&quot;   &quot;</span>);
<a name="l01182"></a>01182   <a class="code" href="annotate_8c.html#af624be355c89f8c48be01843f0f3ec4e">annotate_frame_args</a> ();
<a name="l01183"></a>01183       
<a name="l01184"></a>01184   <a class="code" href="ui-out_8c.html#a6a23596295dce32ba2a5bd2fd2d309f8">ui_out_text</a> (uiout, <span class="stringliteral">&quot; (&quot;</span>);
<a name="l01185"></a>01185   <span class="keywordflow">if</span> (print_args)
<a name="l01186"></a>01186     {
<a name="l01187"></a>01187       <span class="keyword">struct </span>gdbarch *gdbarch = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (frame);
<a name="l01188"></a>01188       <span class="keywordtype">int</span> numargs;
<a name="l01189"></a>01189       <span class="keyword">struct </span><a class="code" href="structcleanup.html">cleanup</a> *args_list_chain;
<a name="l01190"></a>01190       <span class="keyword">volatile</span> <span class="keyword">struct </span><a class="code" href="structgdb__exception.html">gdb_exception</a> e;
<a name="l01191"></a>01191 
<a name="l01192"></a>01192       <span class="keywordflow">if</span> (<a class="code" href="gdbarch_8c.html#af3b52bc29c0ce7e1783e7c17e6f2caaa">gdbarch_frame_num_args_p</a> (gdbarch))
<a name="l01193"></a>01193         {
<a name="l01194"></a>01194           numargs = <a class="code" href="gdbarch_8c.html#a258bb5a40a9c35968117f7357fe8f448">gdbarch_frame_num_args</a> (gdbarch, frame);
<a name="l01195"></a>01195           <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (numargs &gt;= 0);
<a name="l01196"></a>01196         }
<a name="l01197"></a>01197       <span class="keywordflow">else</span>
<a name="l01198"></a>01198         numargs = -1;
<a name="l01199"></a>01199     
<a name="l01200"></a>01200       args_list_chain = <a class="code" href="ui-out_8c.html#aa6e8e9b18ba11e13617a6c56cbfab08f">make_cleanup_ui_out_list_begin_end</a> (uiout, <span class="stringliteral">&quot;args&quot;</span>);
<a name="l01201"></a>01201       <a class="code" href="exceptions_8h.html#aef4514ee39b9305fddee27f49c7c34eb">TRY_CATCH</a> (e, <a class="code" href="exceptions_8h.html#abfa3a3b99557b11f5766baf69465fdf6a44de51845416ac49ab08438792b908f0">RETURN_MASK_ERROR</a>)
<a name="l01202"></a>01202         {
<a name="l01203"></a>01203           <a class="code" href="stack_8c.html#a5f1a36be0ba79fe164372caa648194f1">print_frame_args</a> (func, frame, numargs, <a class="code" href="main_8c.html#a41a2b997ba5454df787d61f051dd918c">gdb_stdout</a>);
<a name="l01204"></a>01204         }
<a name="l01205"></a>01205       <span class="comment">/* FIXME: ARGS must be a list.  If one argument is a string it</span>
<a name="l01206"></a>01206 <span class="comment">          will have &quot; that will not be properly escaped.  */</span>
<a name="l01207"></a>01207       <span class="comment">/* Invoke ui_out_tuple_end.  */</span>
<a name="l01208"></a>01208       <a class="code" href="cleanups_8c.html#a8b313a4f1c613973ea444e5fa54976f8">do_cleanups</a> (args_list_chain);
<a name="l01209"></a>01209       <a class="code" href="defs_8h.html#ad24e2b54375e12474e65ebf7175988fb">QUIT</a>;
<a name="l01210"></a>01210     }
<a name="l01211"></a>01211   <a class="code" href="ui-out_8c.html#a6a23596295dce32ba2a5bd2fd2d309f8">ui_out_text</a> (uiout, <span class="stringliteral">&quot;)&quot;</span>);
<a name="l01212"></a>01212   <span class="keywordflow">if</span> (sal.<a class="code" href="structsymtab__and__line.html#a74216e171a96d8bcaab43fe69b49c599">symtab</a>)
<a name="l01213"></a>01213     {
<a name="l01214"></a>01214       <span class="keyword">const</span> <span class="keywordtype">char</span> *filename_display;
<a name="l01215"></a>01215       
<a name="l01216"></a>01216       filename_display = <a class="code" href="source_8c.html#ae251616cab166301d5fed95cbdd31232">symtab_to_filename_for_display</a> (sal.<a class="code" href="structsymtab__and__line.html#a74216e171a96d8bcaab43fe69b49c599">symtab</a>);
<a name="l01217"></a>01217       <a class="code" href="annotate_8c.html#aacdb1aeff057a9106f65c887426322d5">annotate_frame_source_begin</a> ();
<a name="l01218"></a>01218       <a class="code" href="ui-out_8c.html#a24e0ad942242d807edb27cd3fe6aaa39">ui_out_wrap_hint</a> (uiout, <span class="stringliteral">&quot;   &quot;</span>);
<a name="l01219"></a>01219       <a class="code" href="ui-out_8c.html#a6a23596295dce32ba2a5bd2fd2d309f8">ui_out_text</a> (uiout, <span class="stringliteral">&quot; at &quot;</span>);
<a name="l01220"></a>01220       <a class="code" href="annotate_8c.html#a83bf844d8eb13ef6d73d01e2c8234740">annotate_frame_source_file</a> ();
<a name="l01221"></a>01221       <a class="code" href="ui-out_8c.html#a58efe771979c53ca23a30573d06dc291">ui_out_field_string</a> (uiout, <span class="stringliteral">&quot;file&quot;</span>, filename_display);
<a name="l01222"></a>01222       <span class="keywordflow">if</span> (<a class="code" href="ui-out_8c.html#a473db54efcfbc60feeb5a4f54f27af46">ui_out_is_mi_like_p</a> (uiout))
<a name="l01223"></a>01223         {
<a name="l01224"></a>01224           <span class="keyword">const</span> <span class="keywordtype">char</span> *fullname = <a class="code" href="source_8c.html#aa78177718e9d6c01595600975e8254df">symtab_to_fullname</a> (sal.<a class="code" href="structsymtab__and__line.html#a74216e171a96d8bcaab43fe69b49c599">symtab</a>);
<a name="l01225"></a>01225 
<a name="l01226"></a>01226           <a class="code" href="ui-out_8c.html#a58efe771979c53ca23a30573d06dc291">ui_out_field_string</a> (uiout, <span class="stringliteral">&quot;fullname&quot;</span>, fullname);
<a name="l01227"></a>01227         }
<a name="l01228"></a>01228       <a class="code" href="annotate_8c.html#a1b7a0524ba74d803947a59cc3deab4a3">annotate_frame_source_file_end</a> ();
<a name="l01229"></a>01229       <a class="code" href="ui-out_8c.html#a6a23596295dce32ba2a5bd2fd2d309f8">ui_out_text</a> (uiout, <span class="stringliteral">&quot;:&quot;</span>);
<a name="l01230"></a>01230       <a class="code" href="annotate_8c.html#a9ca48d6a5ad95c29a9b3ecd0fb8e3cd5">annotate_frame_source_line</a> ();
<a name="l01231"></a>01231       <a class="code" href="ui-out_8c.html#aa6f66551d03db456fb94ca1c9038f5a0">ui_out_field_int</a> (uiout, <span class="stringliteral">&quot;line&quot;</span>, sal.<a class="code" href="structsymtab__and__line.html#a6a0468be675b9ac19a5b3ef26f471eaf">line</a>);
<a name="l01232"></a>01232       <a class="code" href="annotate_8c.html#aaf4bc2fe9426b57c1187131d4ee207eb">annotate_frame_source_end</a> ();
<a name="l01233"></a>01233     }
<a name="l01234"></a>01234 
<a name="l01235"></a>01235   <span class="keywordflow">if</span> (pc_p &amp;&amp; (funname == NULL || sal.<a class="code" href="structsymtab__and__line.html#a74216e171a96d8bcaab43fe69b49c599">symtab</a> == NULL))
<a name="l01236"></a>01236     {
<a name="l01237"></a>01237       <span class="keywordtype">char</span> *lib = <a class="code" href="solib_8c.html#aeb7eeab1d9375e787425078df3a08b9d">solib_name_from_address</a> (<a class="code" href="frame_8c.html#a6f51a6f34937e7139176ab67b404076d">get_frame_program_space</a> (frame),
<a name="l01238"></a>01238                                            <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (frame));
<a name="l01239"></a>01239 
<a name="l01240"></a>01240       <span class="keywordflow">if</span> (lib)
<a name="l01241"></a>01241         {
<a name="l01242"></a>01242           <a class="code" href="annotate_8c.html#a9fe37c3b8903fbcf0fdb55030230877d">annotate_frame_where</a> ();
<a name="l01243"></a>01243           <a class="code" href="ui-out_8c.html#a24e0ad942242d807edb27cd3fe6aaa39">ui_out_wrap_hint</a> (uiout, <span class="stringliteral">&quot;  &quot;</span>);
<a name="l01244"></a>01244           <a class="code" href="ui-out_8c.html#a6a23596295dce32ba2a5bd2fd2d309f8">ui_out_text</a> (uiout, <span class="stringliteral">&quot; from &quot;</span>);
<a name="l01245"></a>01245           <a class="code" href="ui-out_8c.html#a58efe771979c53ca23a30573d06dc291">ui_out_field_string</a> (uiout, <span class="stringliteral">&quot;from&quot;</span>, lib);
<a name="l01246"></a>01246         }
<a name="l01247"></a>01247     }
<a name="l01248"></a>01248 
<a name="l01249"></a>01249   <span class="comment">/* do_cleanups will call ui_out_tuple_end() for us.  */</span>
<a name="l01250"></a>01250   <a class="code" href="cleanups_8c.html#a8b313a4f1c613973ea444e5fa54976f8">do_cleanups</a> (list_chain);
<a name="l01251"></a>01251   <a class="code" href="ui-out_8c.html#a6a23596295dce32ba2a5bd2fd2d309f8">ui_out_text</a> (uiout, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01252"></a>01252   <a class="code" href="cleanups_8c.html#a8b313a4f1c613973ea444e5fa54976f8">do_cleanups</a> (old_chain);
<a name="l01253"></a>01253 }
<a name="l01254"></a>01254 
<a name="l01255"></a>01255 
<a name="l01256"></a>01256 <span class="comment">/* Read a frame specification in whatever the appropriate format is</span>
<a name="l01257"></a>01257 <span class="comment">   from FRAME_EXP.  Call error(), printing MESSAGE, if the</span>
<a name="l01258"></a>01258 <span class="comment">   specification is in any way invalid (so this function never returns</span>
<a name="l01259"></a>01259 <span class="comment">   NULL).  When SEPECTED_P is non-NULL set its target to indicate that</span>
<a name="l01260"></a>01260 <span class="comment">   the default selected frame was used.  */</span>
<a name="l01261"></a>01261 
<a name="l01262"></a>01262 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *
<a name="l01263"></a><a class="code" href="stack_8c.html#ae19e426088fdace128bd5fccd5fd3c07">01263</a> <a class="code" href="stack_8c.html#ae19e426088fdace128bd5fccd5fd3c07">parse_frame_specification_1</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *frame_exp, <span class="keyword">const</span> <span class="keywordtype">char</span> *message,
<a name="l01264"></a>01264                              <span class="keywordtype">int</span> *selected_frame_p)
<a name="l01265"></a>01265 {
<a name="l01266"></a>01266   <span class="keywordtype">int</span> numargs;
<a name="l01267"></a>01267   <span class="keyword">struct </span><a class="code" href="structvalue.html">value</a> *args[4];
<a name="l01268"></a>01268   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> addrs[ARRAY_SIZE (args)];
<a name="l01269"></a>01269 
<a name="l01270"></a>01270   <span class="keywordflow">if</span> (frame_exp == NULL)
<a name="l01271"></a>01271     numargs = 0;
<a name="l01272"></a>01272   <span class="keywordflow">else</span>
<a name="l01273"></a>01273     {
<a name="l01274"></a>01274       numargs = 0;
<a name="l01275"></a>01275       <span class="keywordflow">while</span> (1)
<a name="l01276"></a>01276         {
<a name="l01277"></a>01277           <span class="keywordtype">char</span> *addr_string;
<a name="l01278"></a>01278           <span class="keyword">struct </span><a class="code" href="structcleanup.html">cleanup</a> *<a class="code" href="structcleanup.html">cleanup</a>;
<a name="l01279"></a>01279           <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="windows-nat_8c.html#ade66e4ccafbc33b117610bbc0d85feb0">p</a>;
<a name="l01280"></a>01280 
<a name="l01281"></a>01281           <span class="comment">/* Skip leading white space, bail of EOL.  */</span>
<a name="l01282"></a>01282           frame_exp = <a class="code" href="cli-utils_8c.html#aad7df612354d99c740a7ea12eccd3848">skip_spaces_const</a> (frame_exp);
<a name="l01283"></a>01283           <span class="keywordflow">if</span> (!*frame_exp)
<a name="l01284"></a>01284             <span class="keywordflow">break</span>;
<a name="l01285"></a>01285 
<a name="l01286"></a>01286           <span class="comment">/* Parse the argument, extract it, save it.  */</span>
<a name="l01287"></a>01287           <span class="keywordflow">for</span> (p = frame_exp;
<a name="l01288"></a>01288                *p &amp;&amp; !isspace (*p);
<a name="l01289"></a>01289                p++);
<a name="l01290"></a>01290           addr_string = <a class="code" href="common-utils_8c.html#a5f388f89054b57d850779d7d71bc4d1c">savestring</a> (frame_exp, p - frame_exp);
<a name="l01291"></a>01291           frame_exp = p;
<a name="l01292"></a>01292           cleanup = <a class="code" href="cleanups_8c.html#a3d418f8af424aec399898c2d48b26224">make_cleanup</a> (<a class="code" href="common-utils_8c.html#a976e14808b9247ec952c262553f09f8f">xfree</a>, addr_string);
<a name="l01293"></a>01293           
<a name="l01294"></a>01294           <span class="comment">/* NOTE: Parse and evaluate expression, but do not use</span>
<a name="l01295"></a>01295 <span class="comment">             functions such as parse_and_eval_long or</span>
<a name="l01296"></a>01296 <span class="comment">             parse_and_eval_address to also extract the value.</span>
<a name="l01297"></a>01297 <span class="comment">             Instead value_as_long and value_as_address are used.</span>
<a name="l01298"></a>01298 <span class="comment">             This avoids problems with expressions that contain</span>
<a name="l01299"></a>01299 <span class="comment">             side-effects.  */</span>
<a name="l01300"></a>01300           <span class="keywordflow">if</span> (numargs &gt;= ARRAY_SIZE (args))
<a name="l01301"></a>01301             <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Too many args in frame specification&quot;</span>));
<a name="l01302"></a>01302           args[numargs++] = <a class="code" href="eval_8c.html#a4e744c8c383f947f6e3da4112541c2f7">parse_and_eval</a> (addr_string);
<a name="l01303"></a>01303 
<a name="l01304"></a>01304           <a class="code" href="cleanups_8c.html#a8b313a4f1c613973ea444e5fa54976f8">do_cleanups</a> (cleanup);
<a name="l01305"></a>01305         }
<a name="l01306"></a>01306     }
<a name="l01307"></a>01307 
<a name="l01308"></a>01308   <span class="comment">/* If no args, default to the selected frame.  */</span>
<a name="l01309"></a>01309   <span class="keywordflow">if</span> (numargs == 0)
<a name="l01310"></a>01310     {
<a name="l01311"></a>01311       <span class="keywordflow">if</span> (selected_frame_p != NULL)
<a name="l01312"></a>01312         (*selected_frame_p) = 1;
<a name="l01313"></a>01313       <span class="keywordflow">return</span> <a class="code" href="frame_8c.html#a8b714a78478670e14a297eba8d1a9915">get_selected_frame</a> (message);
<a name="l01314"></a>01314     }
<a name="l01315"></a>01315 
<a name="l01316"></a>01316   <span class="comment">/* None of the remaining use the selected frame.  */</span>
<a name="l01317"></a>01317   <span class="keywordflow">if</span> (selected_frame_p != NULL)
<a name="l01318"></a>01318     (*selected_frame_p) = 0;
<a name="l01319"></a>01319 
<a name="l01320"></a>01320   <span class="comment">/* Assume the single arg[0] is an integer, and try using that to</span>
<a name="l01321"></a>01321 <span class="comment">     select a frame relative to current.  */</span>
<a name="l01322"></a>01322   <span class="keywordflow">if</span> (numargs == 1)
<a name="l01323"></a>01323     {
<a name="l01324"></a>01324       <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *fid;
<a name="l01325"></a>01325       <span class="keywordtype">int</span> <a class="code" href="structframe__info.html#abde5202d41f7517cbab8359c7069a2ed">level</a> = <a class="code" href="value_8c.html#aa95e2692a6e5338edb5db75909064bc1">value_as_long</a> (args[0]);
<a name="l01326"></a>01326 
<a name="l01327"></a>01327       fid = <a class="code" href="frame_8h.html#a11bc71bb842ee9f30b990aec07f4399a">find_relative_frame</a> (<a class="code" href="frame_8c.html#a5ab254510728049878a232ed1b889820">get_current_frame</a> (), &amp;level);
<a name="l01328"></a>01328       <span class="keywordflow">if</span> (level == 0)
<a name="l01329"></a>01329         <span class="comment">/* find_relative_frame was successful.  */</span>
<a name="l01330"></a>01330         <span class="keywordflow">return</span> fid;
<a name="l01331"></a>01331     }
<a name="l01332"></a>01332 
<a name="l01333"></a>01333   <span class="comment">/* Convert each value into a corresponding address.  */</span>
<a name="l01334"></a>01334   {
<a name="l01335"></a>01335     <span class="keywordtype">int</span> i;
<a name="l01336"></a>01336 
<a name="l01337"></a>01337     <span class="keywordflow">for</span> (i = 0; i &lt; numargs; i++)
<a name="l01338"></a>01338       addrs[i] = <a class="code" href="value_8c.html#a2e64d8ca2ab5480e05097c6b2df1aa02">value_as_address</a> (args[i]);
<a name="l01339"></a>01339   }
<a name="l01340"></a>01340 
<a name="l01341"></a>01341   <span class="comment">/* Assume that the single arg[0] is an address, use that to identify</span>
<a name="l01342"></a>01342 <span class="comment">     a frame with a matching ID.  Should this also accept stack/pc or</span>
<a name="l01343"></a>01343 <span class="comment">     stack/pc/special.  */</span>
<a name="l01344"></a>01344   <span class="keywordflow">if</span> (numargs == 1)
<a name="l01345"></a>01345     {
<a name="l01346"></a>01346       <span class="keyword">struct </span><a class="code" href="structframe__id.html">frame_id</a> id = <a class="code" href="frame_8c.html#a8140849de9ddee4033f13cf14460f907">frame_id_build_wild</a> (addrs[0]);
<a name="l01347"></a>01347       <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *fid;
<a name="l01348"></a>01348 
<a name="l01349"></a>01349       <span class="comment">/* If (s)he specifies the frame with an address, he deserves</span>
<a name="l01350"></a>01350 <span class="comment">         what (s)he gets.  Still, give the highest one that matches.</span>
<a name="l01351"></a>01351 <span class="comment">         (NOTE: cagney/2004-10-29: Why highest, or outer-most, I don&#39;t</span>
<a name="l01352"></a>01352 <span class="comment">         know).  */</span>
<a name="l01353"></a>01353       <span class="keywordflow">for</span> (fid = <a class="code" href="frame_8c.html#a5ab254510728049878a232ed1b889820">get_current_frame</a> ();
<a name="l01354"></a>01354            fid != NULL;
<a name="l01355"></a>01355            fid = <a class="code" href="frame_8c.html#a7dc158f329065de426029f24f5578838">get_prev_frame</a> (fid))
<a name="l01356"></a>01356         {
<a name="l01357"></a>01357           <span class="keywordflow">if</span> (<a class="code" href="frame_8c.html#a1948b73cbb94aef2e2f11a48b0f4b74c">frame_id_eq</a> (<span class="keywordtype">id</span>, <a class="code" href="frame_8c.html#a4d69effe10c03fa7c702d490081012bf">get_frame_id</a> (fid)))
<a name="l01358"></a>01358             {
<a name="l01359"></a>01359               <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *prev_frame;
<a name="l01360"></a>01360 
<a name="l01361"></a>01361               <span class="keywordflow">while</span> (1)
<a name="l01362"></a>01362                 {
<a name="l01363"></a>01363                   prev_frame = <a class="code" href="frame_8c.html#a7dc158f329065de426029f24f5578838">get_prev_frame</a> (fid);
<a name="l01364"></a>01364                   <span class="keywordflow">if</span> (!prev_frame
<a name="l01365"></a>01365                       || !<a class="code" href="frame_8c.html#a1948b73cbb94aef2e2f11a48b0f4b74c">frame_id_eq</a> (<span class="keywordtype">id</span>, <a class="code" href="frame_8c.html#a4d69effe10c03fa7c702d490081012bf">get_frame_id</a> (prev_frame)))
<a name="l01366"></a>01366                     <span class="keywordflow">break</span>;
<a name="l01367"></a>01367                   fid = prev_frame;
<a name="l01368"></a>01368                 }
<a name="l01369"></a>01369               <span class="keywordflow">return</span> fid;
<a name="l01370"></a>01370             }
<a name="l01371"></a>01371         }
<a name="l01372"></a>01372       }
<a name="l01373"></a>01373 
<a name="l01374"></a>01374   <span class="comment">/* We couldn&#39;t identify the frame as an existing frame, but</span>
<a name="l01375"></a>01375 <span class="comment">     perhaps we can create one with a single argument.  */</span>
<a name="l01376"></a>01376   <span class="keywordflow">if</span> (numargs == 1)
<a name="l01377"></a>01377     <span class="keywordflow">return</span> <a class="code" href="frame_8c.html#ae7cd37285a79f001a7d1cdecfc39293d">create_new_frame</a> (addrs[0], 0);
<a name="l01378"></a>01378   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (numargs == 2)
<a name="l01379"></a>01379     <span class="keywordflow">return</span> <a class="code" href="frame_8c.html#ae7cd37285a79f001a7d1cdecfc39293d">create_new_frame</a> (addrs[0], addrs[1]);
<a name="l01380"></a>01380   <span class="keywordflow">else</span>
<a name="l01381"></a>01381     <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Too many args in frame specification&quot;</span>));
<a name="l01382"></a>01382 }
<a name="l01383"></a>01383 
<a name="l01384"></a>01384 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *
<a name="l01385"></a><a class="code" href="stack_8c.html#a034468c6d69dd73ad33f75170ba40419">01385</a> <a class="code" href="stack_8c.html#a034468c6d69dd73ad33f75170ba40419">parse_frame_specification</a> (<span class="keywordtype">char</span> *frame_exp)
<a name="l01386"></a>01386 {
<a name="l01387"></a>01387   <span class="keywordflow">return</span> <a class="code" href="stack_8c.html#ae19e426088fdace128bd5fccd5fd3c07">parse_frame_specification_1</a> (frame_exp, NULL, NULL);
<a name="l01388"></a>01388 }
<a name="l01389"></a>01389 
<a name="l01390"></a>01390 <span class="comment">/* Print verbosely the selected frame or the frame at address</span>
<a name="l01391"></a>01391 <span class="comment">   ADDR_EXP.  Absolutely all information in the frame is printed.  */</span>
<a name="l01392"></a>01392 
<a name="l01393"></a>01393 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l01394"></a><a class="code" href="stack_8c.html#aca01e83497c67b8fdb5615c3f1393fb1">01394</a> <a class="code" href="stack_8c.html#aca01e83497c67b8fdb5615c3f1393fb1">frame_info</a> (<span class="keywordtype">char</span> *addr_exp, <span class="keywordtype">int</span> from_tty)
<a name="l01395"></a>01395 {
<a name="l01396"></a>01396   <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *fi;
<a name="l01397"></a>01397   <span class="keyword">struct </span><a class="code" href="structsymtab__and__line.html">symtab_and_line</a> sal;
<a name="l01398"></a>01398   <span class="keyword">struct </span><a class="code" href="structsymbol.html">symbol</a> *<a class="code" href="remote-fileio_8c.html#a7e97efb32ba66c3f1141bdbb82529d20">func</a>;
<a name="l01399"></a>01399   <span class="keyword">struct </span><a class="code" href="structsymtab.html">symtab</a> *s;
<a name="l01400"></a>01400   <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *calling_frame_info;
<a name="l01401"></a>01401   <span class="keywordtype">int</span> numregs;
<a name="l01402"></a>01402   <span class="keyword">const</span> <span class="keywordtype">char</span> *funname = 0;
<a name="l01403"></a>01403   <span class="keyword">enum</span> <a class="code" href="defs_8h.html#aa37aa8979934d47ac32fd96ecff32202">language</a> funlang = <a class="code" href="defs_8h.html#aa37aa8979934d47ac32fd96ecff32202a3082c2da456a8ca3aa34f721de2c3565">language_unknown</a>;
<a name="l01404"></a>01404   <span class="keyword">const</span> <span class="keywordtype">char</span> *pc_regname;
<a name="l01405"></a>01405   <span class="keywordtype">int</span> selected_frame_p;
<a name="l01406"></a>01406   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>;
<a name="l01407"></a>01407   <span class="keyword">struct </span><a class="code" href="structcleanup.html">cleanup</a> *back_to = <a class="code" href="cleanups_8c.html#a3d418f8af424aec399898c2d48b26224">make_cleanup</a> (<a class="code" href="cleanups_8c.html#a1ec2a3980c2be1f31f2142103d1f7abf">null_cleanup</a>, NULL);
<a name="l01408"></a>01408   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> frame_pc;
<a name="l01409"></a>01409   <span class="keywordtype">int</span> frame_pc_p;
<a name="l01410"></a>01410   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> caller_pc;
<a name="l01411"></a>01411 
<a name="l01412"></a>01412   fi = <a class="code" href="stack_8c.html#ae19e426088fdace128bd5fccd5fd3c07">parse_frame_specification_1</a> (addr_exp, <span class="stringliteral">&quot;No stack.&quot;</span>, &amp;selected_frame_p);
<a name="l01413"></a>01413   gdbarch = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (fi);
<a name="l01414"></a>01414 
<a name="l01415"></a>01415   <span class="comment">/* Name of the value returned by get_frame_pc().  Per comments, &quot;pc&quot;</span>
<a name="l01416"></a>01416 <span class="comment">     is not a good name.  */</span>
<a name="l01417"></a>01417   <span class="keywordflow">if</span> (<a class="code" href="gdbarch_8c.html#a07a162ebafea1269eb8f341db44e53e7">gdbarch_pc_regnum</a> (gdbarch) &gt;= 0)
<a name="l01418"></a>01418     <span class="comment">/* OK, this is weird.  The gdbarch_pc_regnum hardware register&#39;s value can</span>
<a name="l01419"></a>01419 <span class="comment">       easily not match that of the internal value returned by</span>
<a name="l01420"></a>01420 <span class="comment">       get_frame_pc().  */</span>
<a name="l01421"></a>01421     pc_regname = <a class="code" href="gdbarch_8c.html#a86c0cf41eb88c54e943cd80e79af36e5">gdbarch_register_name</a> (gdbarch, <a class="code" href="gdbarch_8c.html#a07a162ebafea1269eb8f341db44e53e7">gdbarch_pc_regnum</a> (gdbarch));
<a name="l01422"></a>01422   <span class="keywordflow">else</span>
<a name="l01423"></a>01423     <span class="comment">/* But then, this is weird to.  Even without gdbarch_pc_regnum, an</span>
<a name="l01424"></a>01424 <span class="comment">       architectures will often have a hardware register called &quot;pc&quot;,</span>
<a name="l01425"></a>01425 <span class="comment">       and that register&#39;s value, again, can easily not match</span>
<a name="l01426"></a>01426 <span class="comment">       get_frame_pc().  */</span>
<a name="l01427"></a>01427     pc_regname = <span class="stringliteral">&quot;pc&quot;</span>;
<a name="l01428"></a>01428 
<a name="l01429"></a>01429   frame_pc_p = <a class="code" href="frame_8c.html#af87888489ef191ac98c292350017e84e">get_frame_pc_if_available</a> (fi, &amp;frame_pc);
<a name="l01430"></a>01430   <a class="code" href="frame_8c.html#a462d32901b9dd9787da65adb627a9a05">find_frame_sal</a> (fi, &amp;sal);
<a name="l01431"></a>01431   func = <a class="code" href="blockframe_8c.html#a901685553101d7f605ab9f3d7d328cd6">get_frame_function</a> (fi);
<a name="l01432"></a>01432   s = sal.<a class="code" href="structsymtab__and__line.html#a74216e171a96d8bcaab43fe69b49c599">symtab</a>;
<a name="l01433"></a>01433   <span class="keywordflow">if</span> (func)
<a name="l01434"></a>01434     {
<a name="l01435"></a>01435       funname = <a class="code" href="symtab_8h.html#ac7f4cb1648125545fbd0e4f13b0c572c">SYMBOL_PRINT_NAME</a> (func);
<a name="l01436"></a>01436       funlang = <a class="code" href="symtab_8h.html#a82fc22e60b1007c826a5ebf7d6593e78">SYMBOL_LANGUAGE</a> (func);
<a name="l01437"></a>01437       <span class="keywordflow">if</span> (funlang == <a class="code" href="defs_8h.html#aa37aa8979934d47ac32fd96ecff32202a44cdc45a15de5e8e690da9ebf1b91132">language_cplus</a>)
<a name="l01438"></a>01438         {
<a name="l01439"></a>01439           <span class="comment">/* It seems appropriate to use SYMBOL_PRINT_NAME() here,</span>
<a name="l01440"></a>01440 <span class="comment">             to display the demangled name that we already have</span>
<a name="l01441"></a>01441 <span class="comment">             stored in the symbol table, but we stored a version</span>
<a name="l01442"></a>01442 <span class="comment">             with DMGL_PARAMS turned on, and here we don&#39;t want to</span>
<a name="l01443"></a>01443 <span class="comment">             display parameters.  So remove the parameters.  */</span>
<a name="l01444"></a>01444           <span class="keywordtype">char</span> *func_only = <a class="code" href="cp-support_8c.html#a6a38238179eb06d9c4927adf4385b2e7">cp_remove_params</a> (funname);
<a name="l01445"></a>01445 
<a name="l01446"></a>01446           <span class="keywordflow">if</span> (func_only)
<a name="l01447"></a>01447             {
<a name="l01448"></a>01448               funname = func_only;
<a name="l01449"></a>01449               <a class="code" href="cleanups_8c.html#a3d418f8af424aec399898c2d48b26224">make_cleanup</a> (<a class="code" href="common-utils_8c.html#a976e14808b9247ec952c262553f09f8f">xfree</a>, func_only);
<a name="l01450"></a>01450             }
<a name="l01451"></a>01451         }
<a name="l01452"></a>01452     }
<a name="l01453"></a>01453   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (frame_pc_p)
<a name="l01454"></a>01454     {
<a name="l01455"></a>01455       <span class="keyword">struct </span><a class="code" href="structbound__minimal__symbol.html">bound_minimal_symbol</a> msymbol;
<a name="l01456"></a>01456 
<a name="l01457"></a>01457       msymbol = <a class="code" href="minsyms_8c.html#ad4b48b6ef6c913138a8ac33f8c3cfeb2">lookup_minimal_symbol_by_pc</a> (frame_pc);
<a name="l01458"></a>01458       <span class="keywordflow">if</span> (msymbol.minsym != NULL)
<a name="l01459"></a>01459         {
<a name="l01460"></a>01460           funname = <a class="code" href="symtab_8h.html#ac7f4cb1648125545fbd0e4f13b0c572c">SYMBOL_PRINT_NAME</a> (msymbol.minsym);
<a name="l01461"></a>01461           funlang = <a class="code" href="symtab_8h.html#a82fc22e60b1007c826a5ebf7d6593e78">SYMBOL_LANGUAGE</a> (msymbol.minsym);
<a name="l01462"></a>01462         }
<a name="l01463"></a>01463     }
<a name="l01464"></a>01464   calling_frame_info = <a class="code" href="frame_8c.html#a7dc158f329065de426029f24f5578838">get_prev_frame</a> (fi);
<a name="l01465"></a>01465 
<a name="l01466"></a>01466   <span class="keywordflow">if</span> (selected_frame_p &amp;&amp; <a class="code" href="frame_8c.html#aa543a3af3a0507905c26e22142dabe59">frame_relative_level</a> (fi) &gt;= 0)
<a name="l01467"></a>01467     {
<a name="l01468"></a>01468       <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Stack level %d, frame at &quot;</span>),
<a name="l01469"></a>01469                        <a class="code" href="frame_8c.html#aa543a3af3a0507905c26e22142dabe59">frame_relative_level</a> (fi));
<a name="l01470"></a>01470     }
<a name="l01471"></a>01471   <span class="keywordflow">else</span>
<a name="l01472"></a>01472     {
<a name="l01473"></a>01473       <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Stack frame at &quot;</span>));
<a name="l01474"></a>01474     }
<a name="l01475"></a>01475   <a class="code" href="utils_8c.html#a4b28488051faf9ab4a2f07633225835f">fputs_filtered</a> (<a class="code" href="utils_8c.html#ab5c76d72090f01d3848b63dda4e37d1c">paddress</a> (gdbarch, <a class="code" href="frame_8c.html#a518a758861e7719b4ca24bcf7a5ffd33">get_frame_base</a> (fi)), <a class="code" href="main_8c.html#a41a2b997ba5454df787d61f051dd918c">gdb_stdout</a>);
<a name="l01476"></a>01476   <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot;:\n&quot;</span>);
<a name="l01477"></a>01477   <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot; %s = &quot;</span>, pc_regname);
<a name="l01478"></a>01478   <span class="keywordflow">if</span> (frame_pc_p)
<a name="l01479"></a>01479     <a class="code" href="utils_8c.html#a4b28488051faf9ab4a2f07633225835f">fputs_filtered</a> (<a class="code" href="utils_8c.html#ab5c76d72090f01d3848b63dda4e37d1c">paddress</a> (gdbarch, <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (fi)), <a class="code" href="main_8c.html#a41a2b997ba5454df787d61f051dd918c">gdb_stdout</a>);
<a name="l01480"></a>01480   <span class="keywordflow">else</span>
<a name="l01481"></a>01481     <a class="code" href="utils_8c.html#a4b28488051faf9ab4a2f07633225835f">fputs_filtered</a> (<span class="stringliteral">&quot;&lt;unavailable&gt;&quot;</span>, <a class="code" href="main_8c.html#a41a2b997ba5454df787d61f051dd918c">gdb_stdout</a>);
<a name="l01482"></a>01482 
<a name="l01483"></a>01483   <a class="code" href="utils_8c.html#a857540a17ef1cd62fef4a33cc3b6a894">wrap_here</a> (<span class="stringliteral">&quot;   &quot;</span>);
<a name="l01484"></a>01484   <span class="keywordflow">if</span> (funname)
<a name="l01485"></a>01485     {
<a name="l01486"></a>01486       <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot; in &quot;</span>);
<a name="l01487"></a>01487       <a class="code" href="utils_8c.html#ab6cbc55040f60777508417f7708b7eb5">fprintf_symbol_filtered</a> (<a class="code" href="main_8c.html#a41a2b997ba5454df787d61f051dd918c">gdb_stdout</a>, funname, funlang,
<a name="l01488"></a>01488                                DMGL_ANSI | DMGL_PARAMS);
<a name="l01489"></a>01489     }
<a name="l01490"></a>01490   <a class="code" href="utils_8c.html#a857540a17ef1cd62fef4a33cc3b6a894">wrap_here</a> (<span class="stringliteral">&quot;   &quot;</span>);
<a name="l01491"></a>01491   <span class="keywordflow">if</span> (sal.<a class="code" href="structsymtab__and__line.html#a74216e171a96d8bcaab43fe69b49c599">symtab</a>)
<a name="l01492"></a>01492     <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot; (%s:%d)&quot;</span>, <a class="code" href="source_8c.html#ae251616cab166301d5fed95cbdd31232">symtab_to_filename_for_display</a> (sal.<a class="code" href="structsymtab__and__line.html#a74216e171a96d8bcaab43fe69b49c599">symtab</a>),
<a name="l01493"></a>01493                      sal.<a class="code" href="structsymtab__and__line.html#a6a0468be675b9ac19a5b3ef26f471eaf">line</a>);
<a name="l01494"></a>01494   <a class="code" href="utils_8c.html#ab4c30e1b3fe2dfa6e73f320a6758ad5f">puts_filtered</a> (<span class="stringliteral">&quot;; &quot;</span>);
<a name="l01495"></a>01495   <a class="code" href="utils_8c.html#a857540a17ef1cd62fef4a33cc3b6a894">wrap_here</a> (<span class="stringliteral">&quot;    &quot;</span>);
<a name="l01496"></a>01496   <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot;saved %s &quot;</span>, pc_regname);
<a name="l01497"></a>01497   <span class="keywordflow">if</span> (<a class="code" href="frame_8c.html#a771e515e1ea15998cbfdb570b715ecc5">frame_unwind_caller_pc_if_available</a> (fi, &amp;caller_pc))
<a name="l01498"></a>01498     <a class="code" href="utils_8c.html#a4b28488051faf9ab4a2f07633225835f">fputs_filtered</a> (<a class="code" href="utils_8c.html#ab5c76d72090f01d3848b63dda4e37d1c">paddress</a> (gdbarch, caller_pc), <a class="code" href="main_8c.html#a41a2b997ba5454df787d61f051dd918c">gdb_stdout</a>);
<a name="l01499"></a>01499   <span class="keywordflow">else</span>
<a name="l01500"></a>01500     <a class="code" href="utils_8c.html#a4b28488051faf9ab4a2f07633225835f">fputs_filtered</a> (<span class="stringliteral">&quot;&lt;unavailable&gt;&quot;</span>, <a class="code" href="main_8c.html#a41a2b997ba5454df787d61f051dd918c">gdb_stdout</a>);
<a name="l01501"></a>01501   <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01502"></a>01502 
<a name="l01503"></a>01503   <span class="keywordflow">if</span> (calling_frame_info == NULL)
<a name="l01504"></a>01504     {
<a name="l01505"></a>01505       <span class="keyword">enum</span> <a class="code" href="frame_8h.html#ad7491d3a051c1990a9777f60afbb4399">unwind_stop_reason</a> reason;
<a name="l01506"></a>01506 
<a name="l01507"></a>01507       reason = <a class="code" href="frame_8c.html#a739635558f5ea22c6240b4895cd6a9c2">get_frame_unwind_stop_reason</a> (fi);
<a name="l01508"></a>01508       <span class="keywordflow">if</span> (reason != UNWIND_NO_REASON)
<a name="l01509"></a>01509         <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot; Outermost frame: %s\n&quot;</span>),
<a name="l01510"></a>01510                          <a class="code" href="frame_8c.html#ab8fa488427762f646118279ffaa72a53">frame_stop_reason_string</a> (reason));
<a name="l01511"></a>01511     }
<a name="l01512"></a>01512   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="frame_8c.html#a8f965671d7b55f002c993385024a2fdb">get_frame_type</a> (fi) == <a class="code" href="frame_8h.html#a3ca2c0bc7578bf3d337e34b2c08a6c5fa98e73b522cccfdb254dfd78f97ec0822">TAILCALL_FRAME</a>)
<a name="l01513"></a>01513     <a class="code" href="utils_8c.html#ab4c30e1b3fe2dfa6e73f320a6758ad5f">puts_filtered</a> (<span class="stringliteral">&quot; tail call frame&quot;</span>);
<a name="l01514"></a>01514   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="frame_8c.html#a8f965671d7b55f002c993385024a2fdb">get_frame_type</a> (fi) == <a class="code" href="frame_8h.html#a3ca2c0bc7578bf3d337e34b2c08a6c5faec50e9f25cd04e445a8c7b56ea98c790">INLINE_FRAME</a>)
<a name="l01515"></a>01515     <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot; inlined into frame %d&quot;</span>,
<a name="l01516"></a>01516                      <a class="code" href="frame_8c.html#aa543a3af3a0507905c26e22142dabe59">frame_relative_level</a> (<a class="code" href="frame_8c.html#a7dc158f329065de426029f24f5578838">get_prev_frame</a> (fi)));
<a name="l01517"></a>01517   <span class="keywordflow">else</span>
<a name="l01518"></a>01518     {
<a name="l01519"></a>01519       <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot; called by frame at &quot;</span>);
<a name="l01520"></a>01520       <a class="code" href="utils_8c.html#a4b28488051faf9ab4a2f07633225835f">fputs_filtered</a> (<a class="code" href="utils_8c.html#ab5c76d72090f01d3848b63dda4e37d1c">paddress</a> (gdbarch, <a class="code" href="frame_8c.html#a518a758861e7719b4ca24bcf7a5ffd33">get_frame_base</a> (calling_frame_info)),
<a name="l01521"></a>01521                       <a class="code" href="main_8c.html#a41a2b997ba5454df787d61f051dd918c">gdb_stdout</a>);
<a name="l01522"></a>01522     }
<a name="l01523"></a>01523   <span class="keywordflow">if</span> (<a class="code" href="frame_8c.html#a80df189cf511651209609685d5380340">get_next_frame</a> (fi) &amp;&amp; calling_frame_info)
<a name="l01524"></a>01524     <a class="code" href="utils_8c.html#ab4c30e1b3fe2dfa6e73f320a6758ad5f">puts_filtered</a> (<span class="stringliteral">&quot;,&quot;</span>);
<a name="l01525"></a>01525   <a class="code" href="utils_8c.html#a857540a17ef1cd62fef4a33cc3b6a894">wrap_here</a> (<span class="stringliteral">&quot;   &quot;</span>);
<a name="l01526"></a>01526   <span class="keywordflow">if</span> (<a class="code" href="frame_8c.html#a80df189cf511651209609685d5380340">get_next_frame</a> (fi))
<a name="l01527"></a>01527     {
<a name="l01528"></a>01528       <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot; caller of frame at &quot;</span>);
<a name="l01529"></a>01529       <a class="code" href="utils_8c.html#a4b28488051faf9ab4a2f07633225835f">fputs_filtered</a> (<a class="code" href="utils_8c.html#ab5c76d72090f01d3848b63dda4e37d1c">paddress</a> (gdbarch, <a class="code" href="frame_8c.html#a518a758861e7719b4ca24bcf7a5ffd33">get_frame_base</a> (<a class="code" href="frame_8c.html#a80df189cf511651209609685d5380340">get_next_frame</a> (fi))),
<a name="l01530"></a>01530                       <a class="code" href="main_8c.html#a41a2b997ba5454df787d61f051dd918c">gdb_stdout</a>);
<a name="l01531"></a>01531     }
<a name="l01532"></a>01532   <span class="keywordflow">if</span> (<a class="code" href="frame_8c.html#a80df189cf511651209609685d5380340">get_next_frame</a> (fi) || calling_frame_info)
<a name="l01533"></a>01533     <a class="code" href="utils_8c.html#ab4c30e1b3fe2dfa6e73f320a6758ad5f">puts_filtered</a> (<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01534"></a>01534 
<a name="l01535"></a>01535   <span class="keywordflow">if</span> (s)
<a name="l01536"></a>01536     <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot; source language %s.\n&quot;</span>,
<a name="l01537"></a>01537                      <a class="code" href="language_8c.html#aba6ca4d60b4edf31700eccd67abc5fe4">language_str</a> (s-&gt;<a class="code" href="structsymtab.html#a26ff640a27ab8781d9e09231bd173e6c">language</a>));
<a name="l01538"></a>01538 
<a name="l01539"></a>01539   {
<a name="l01540"></a>01540     <span class="comment">/* Address of the argument list for this frame, or 0.  */</span>
<a name="l01541"></a>01541     <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> arg_list = <a class="code" href="frame_8c.html#a443527eda97ba168d03fb1fc3adbfa3b">get_frame_args_address</a> (fi);
<a name="l01542"></a>01542     <span class="comment">/* Number of args for this frame, or -1 if unknown.  */</span>
<a name="l01543"></a>01543     <span class="keywordtype">int</span> numargs;
<a name="l01544"></a>01544 
<a name="l01545"></a>01545     <span class="keywordflow">if</span> (arg_list == 0)
<a name="l01546"></a>01546       <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot; Arglist at unknown address.\n&quot;</span>);
<a name="l01547"></a>01547     <span class="keywordflow">else</span>
<a name="l01548"></a>01548       {
<a name="l01549"></a>01549         <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot; Arglist at &quot;</span>);
<a name="l01550"></a>01550         <a class="code" href="utils_8c.html#a4b28488051faf9ab4a2f07633225835f">fputs_filtered</a> (<a class="code" href="utils_8c.html#ab5c76d72090f01d3848b63dda4e37d1c">paddress</a> (gdbarch, arg_list), <a class="code" href="main_8c.html#a41a2b997ba5454df787d61f051dd918c">gdb_stdout</a>);
<a name="l01551"></a>01551         <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot;,&quot;</span>);
<a name="l01552"></a>01552 
<a name="l01553"></a>01553         <span class="keywordflow">if</span> (!<a class="code" href="gdbarch_8c.html#af3b52bc29c0ce7e1783e7c17e6f2caaa">gdbarch_frame_num_args_p</a> (gdbarch))
<a name="l01554"></a>01554           {
<a name="l01555"></a>01555             numargs = -1;
<a name="l01556"></a>01556             <a class="code" href="utils_8c.html#ab4c30e1b3fe2dfa6e73f320a6758ad5f">puts_filtered</a> (<span class="stringliteral">&quot; args: &quot;</span>);
<a name="l01557"></a>01557           }
<a name="l01558"></a>01558         <span class="keywordflow">else</span>
<a name="l01559"></a>01559           {
<a name="l01560"></a>01560             numargs = <a class="code" href="gdbarch_8c.html#a258bb5a40a9c35968117f7357fe8f448">gdbarch_frame_num_args</a> (gdbarch, fi);
<a name="l01561"></a>01561             <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (numargs &gt;= 0);
<a name="l01562"></a>01562             <span class="keywordflow">if</span> (numargs == 0)
<a name="l01563"></a>01563               <a class="code" href="utils_8c.html#ab4c30e1b3fe2dfa6e73f320a6758ad5f">puts_filtered</a> (<span class="stringliteral">&quot; no args.&quot;</span>);
<a name="l01564"></a>01564             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (numargs == 1)
<a name="l01565"></a>01565               <a class="code" href="utils_8c.html#ab4c30e1b3fe2dfa6e73f320a6758ad5f">puts_filtered</a> (<span class="stringliteral">&quot; 1 arg: &quot;</span>);
<a name="l01566"></a>01566             <span class="keywordflow">else</span>
<a name="l01567"></a>01567               <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot; %d args: &quot;</span>, numargs);
<a name="l01568"></a>01568           }
<a name="l01569"></a>01569         <a class="code" href="stack_8c.html#a5f1a36be0ba79fe164372caa648194f1">print_frame_args</a> (func, fi, numargs, <a class="code" href="main_8c.html#a41a2b997ba5454df787d61f051dd918c">gdb_stdout</a>);
<a name="l01570"></a>01570         <a class="code" href="utils_8c.html#ab4c30e1b3fe2dfa6e73f320a6758ad5f">puts_filtered</a> (<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01571"></a>01571       }
<a name="l01572"></a>01572   }
<a name="l01573"></a>01573   {
<a name="l01574"></a>01574     <span class="comment">/* Address of the local variables for this frame, or 0.  */</span>
<a name="l01575"></a>01575     <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> arg_list = <a class="code" href="frame_8c.html#a232f7cacd3cc8d127801e13ef18f8b67">get_frame_locals_address</a> (fi);
<a name="l01576"></a>01576 
<a name="l01577"></a>01577     <span class="keywordflow">if</span> (arg_list == 0)
<a name="l01578"></a>01578       <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot; Locals at unknown address,&quot;</span>);
<a name="l01579"></a>01579     <span class="keywordflow">else</span>
<a name="l01580"></a>01580       {
<a name="l01581"></a>01581         <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot; Locals at &quot;</span>);
<a name="l01582"></a>01582         <a class="code" href="utils_8c.html#a4b28488051faf9ab4a2f07633225835f">fputs_filtered</a> (<a class="code" href="utils_8c.html#ab5c76d72090f01d3848b63dda4e37d1c">paddress</a> (gdbarch, arg_list), <a class="code" href="main_8c.html#a41a2b997ba5454df787d61f051dd918c">gdb_stdout</a>);
<a name="l01583"></a>01583         <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot;,&quot;</span>);
<a name="l01584"></a>01584       }
<a name="l01585"></a>01585   }
<a name="l01586"></a>01586 
<a name="l01587"></a>01587   <span class="comment">/* Print as much information as possible on the location of all the</span>
<a name="l01588"></a>01588 <span class="comment">     registers.  */</span>
<a name="l01589"></a>01589   {
<a name="l01590"></a>01590     <span class="keyword">enum</span> <a class="code" href="defs_8h.html#aae40e9877f56980bf8fac75923a098ab">lval_type</a> lval;
<a name="l01591"></a>01591     <span class="keywordtype">int</span> optimized;
<a name="l01592"></a>01592     <span class="keywordtype">int</span> unavailable;
<a name="l01593"></a>01593     <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> addr;
<a name="l01594"></a>01594     <span class="keywordtype">int</span> realnum;
<a name="l01595"></a>01595     <span class="keywordtype">int</span> count;
<a name="l01596"></a>01596     <span class="keywordtype">int</span> i;
<a name="l01597"></a>01597     <span class="keywordtype">int</span> need_nl = 1;
<a name="l01598"></a>01598 
<a name="l01599"></a>01599     <span class="comment">/* The sp is special; what&#39;s displayed isn&#39;t the save address, but</span>
<a name="l01600"></a>01600 <span class="comment">       the value of the previous frame&#39;s sp.  This is a legacy thing,</span>
<a name="l01601"></a>01601 <span class="comment">       at one stage the frame cached the previous frame&#39;s SP instead</span>
<a name="l01602"></a>01602 <span class="comment">       of its address, hence it was easiest to just display the cached</span>
<a name="l01603"></a>01603 <span class="comment">       value.  */</span>
<a name="l01604"></a>01604     <span class="keywordflow">if</span> (<a class="code" href="gdbarch_8c.html#a86f6193dd957c193df77477d9d84c4f3">gdbarch_sp_regnum</a> (gdbarch) &gt;= 0)
<a name="l01605"></a>01605       {
<a name="l01606"></a>01606         <span class="comment">/* Find out the location of the saved stack pointer with out</span>
<a name="l01607"></a>01607 <span class="comment">           actually evaluating it.  */</span>
<a name="l01608"></a>01608         <a class="code" href="frame_8c.html#ab74c84f6b35ce2b003b0ed177ec96c56">frame_register_unwind</a> (fi, <a class="code" href="gdbarch_8c.html#a86f6193dd957c193df77477d9d84c4f3">gdbarch_sp_regnum</a> (gdbarch),
<a name="l01609"></a>01609                                &amp;optimized, &amp;unavailable, &amp;lval, &amp;addr,
<a name="l01610"></a>01610                                &amp;realnum, NULL);
<a name="l01611"></a>01611         <span class="keywordflow">if</span> (!optimized &amp;&amp; !unavailable &amp;&amp; lval == <a class="code" href="defs_8h.html#aae40e9877f56980bf8fac75923a098aba4c7a515c0bfd34444a3b1edfbd282619">not_lval</a>)
<a name="l01612"></a>01612           {
<a name="l01613"></a>01613             <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l01614"></a>01614             <span class="keywordtype">int</span> sp_size = <a class="code" href="regcache_8c.html#a4c51fa25edb9ce25451b9dc7bd127aac">register_size</a> (gdbarch, <a class="code" href="gdbarch_8c.html#a86f6193dd957c193df77477d9d84c4f3">gdbarch_sp_regnum</a> (gdbarch));
<a name="l01615"></a>01615             <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> <a class="code" href="structvalue.html">value</a>[<a class="code" href="defs_8h.html#a1f9aebf1de3ebbf4283a4dcf73308562a4f3d67bb99ae292178850a8930ab8252">MAX_REGISTER_SIZE</a>];
<a name="l01616"></a>01616             <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="windows-nat_8c.html#a8d40798874dab99986478ef00ff3e297">sp</a>;
<a name="l01617"></a>01617 
<a name="l01618"></a>01618             <a class="code" href="frame_8c.html#ab74c84f6b35ce2b003b0ed177ec96c56">frame_register_unwind</a> (fi, <a class="code" href="gdbarch_8c.html#a86f6193dd957c193df77477d9d84c4f3">gdbarch_sp_regnum</a> (gdbarch),
<a name="l01619"></a>01619                                    &amp;optimized, &amp;unavailable, &amp;lval, &amp;addr,
<a name="l01620"></a>01620                                    &amp;realnum, value);
<a name="l01621"></a>01621             <span class="comment">/* NOTE: cagney/2003-05-22: This is assuming that the</span>
<a name="l01622"></a>01622 <span class="comment">               stack pointer was packed as an unsigned integer.  That</span>
<a name="l01623"></a>01623 <span class="comment">               may or may not be valid.  */</span>
<a name="l01624"></a>01624             sp = <a class="code" href="defs_8h.html#a99aec65329508b4d449a4f881026f844">extract_unsigned_integer</a> (value, sp_size, byte_order);
<a name="l01625"></a>01625             <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot; Previous frame&#39;s sp is &quot;</span>);
<a name="l01626"></a>01626             <a class="code" href="utils_8c.html#a4b28488051faf9ab4a2f07633225835f">fputs_filtered</a> (<a class="code" href="utils_8c.html#ab5c76d72090f01d3848b63dda4e37d1c">paddress</a> (gdbarch, sp), <a class="code" href="main_8c.html#a41a2b997ba5454df787d61f051dd918c">gdb_stdout</a>);
<a name="l01627"></a>01627             <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01628"></a>01628             need_nl = 0;
<a name="l01629"></a>01629           }
<a name="l01630"></a>01630         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!optimized &amp;&amp; !unavailable &amp;&amp; lval == <a class="code" href="defs_8h.html#aae40e9877f56980bf8fac75923a098aba04e4ffc3d93e9a0cdec974596a72c17e">lval_memory</a>)
<a name="l01631"></a>01631           {
<a name="l01632"></a>01632             <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot; Previous frame&#39;s sp at &quot;</span>);
<a name="l01633"></a>01633             <a class="code" href="utils_8c.html#a4b28488051faf9ab4a2f07633225835f">fputs_filtered</a> (<a class="code" href="utils_8c.html#ab5c76d72090f01d3848b63dda4e37d1c">paddress</a> (gdbarch, addr), <a class="code" href="main_8c.html#a41a2b997ba5454df787d61f051dd918c">gdb_stdout</a>);
<a name="l01634"></a>01634             <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01635"></a>01635             need_nl = 0;
<a name="l01636"></a>01636           }
<a name="l01637"></a>01637         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!optimized &amp;&amp; !unavailable &amp;&amp; lval == <a class="code" href="defs_8h.html#aae40e9877f56980bf8fac75923a098abad63b16226e0a89af48f2750b1259377c">lval_register</a>)
<a name="l01638"></a>01638           {
<a name="l01639"></a>01639             <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot; Previous frame&#39;s sp in %s\n&quot;</span>,
<a name="l01640"></a>01640                              <a class="code" href="gdbarch_8c.html#a86c0cf41eb88c54e943cd80e79af36e5">gdbarch_register_name</a> (gdbarch, realnum));
<a name="l01641"></a>01641             need_nl = 0;
<a name="l01642"></a>01642           }
<a name="l01643"></a>01643         <span class="comment">/* else keep quiet.  */</span>
<a name="l01644"></a>01644       }
<a name="l01645"></a>01645 
<a name="l01646"></a>01646     count = 0;
<a name="l01647"></a>01647     numregs = <a class="code" href="gdbarch_8c.html#a69069435754d0b434c7043a21d247325">gdbarch_num_regs</a> (gdbarch)
<a name="l01648"></a>01648               + <a class="code" href="gdbarch_8c.html#a8e0e40f42e5969ee4559ee47717aa9f3">gdbarch_num_pseudo_regs</a> (gdbarch);
<a name="l01649"></a>01649     <span class="keywordflow">for</span> (i = 0; i &lt; numregs; i++)
<a name="l01650"></a>01650       <span class="keywordflow">if</span> (i != <a class="code" href="gdbarch_8c.html#a86f6193dd957c193df77477d9d84c4f3">gdbarch_sp_regnum</a> (gdbarch)
<a name="l01651"></a>01651           &amp;&amp; <a class="code" href="gdbarch_8c.html#a5e3c1613a66c870b79f71625026c67f2">gdbarch_register_reggroup_p</a> (gdbarch, i, <a class="code" href="reggroups_8c.html#a1c7760844f4c40a5fb70e84f76f39676">all_reggroup</a>))
<a name="l01652"></a>01652         {
<a name="l01653"></a>01653           <span class="comment">/* Find out the location of the saved register without</span>
<a name="l01654"></a>01654 <span class="comment">             fetching the corresponding value.  */</span>
<a name="l01655"></a>01655           <a class="code" href="frame_8c.html#ab74c84f6b35ce2b003b0ed177ec96c56">frame_register_unwind</a> (fi, i, &amp;optimized, &amp;unavailable,
<a name="l01656"></a>01656                                  &amp;lval, &amp;addr, &amp;realnum, NULL);
<a name="l01657"></a>01657           <span class="comment">/* For moment, only display registers that were saved on the</span>
<a name="l01658"></a>01658 <span class="comment">             stack.  */</span>
<a name="l01659"></a>01659           <span class="keywordflow">if</span> (!optimized &amp;&amp; !unavailable &amp;&amp; lval == <a class="code" href="defs_8h.html#aae40e9877f56980bf8fac75923a098aba04e4ffc3d93e9a0cdec974596a72c17e">lval_memory</a>)
<a name="l01660"></a>01660             {
<a name="l01661"></a>01661               <span class="keywordflow">if</span> (count == 0)
<a name="l01662"></a>01662                 <a class="code" href="utils_8c.html#ab4c30e1b3fe2dfa6e73f320a6758ad5f">puts_filtered</a> (<span class="stringliteral">&quot; Saved registers:\n &quot;</span>);
<a name="l01663"></a>01663               <span class="keywordflow">else</span>
<a name="l01664"></a>01664                 <a class="code" href="utils_8c.html#ab4c30e1b3fe2dfa6e73f320a6758ad5f">puts_filtered</a> (<span class="stringliteral">&quot;,&quot;</span>);
<a name="l01665"></a>01665               <a class="code" href="utils_8c.html#a857540a17ef1cd62fef4a33cc3b6a894">wrap_here</a> (<span class="stringliteral">&quot; &quot;</span>);
<a name="l01666"></a>01666               <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<span class="stringliteral">&quot; %s at &quot;</span>,
<a name="l01667"></a>01667                                <a class="code" href="gdbarch_8c.html#a86c0cf41eb88c54e943cd80e79af36e5">gdbarch_register_name</a> (gdbarch, i));
<a name="l01668"></a>01668               <a class="code" href="utils_8c.html#a4b28488051faf9ab4a2f07633225835f">fputs_filtered</a> (<a class="code" href="utils_8c.html#ab5c76d72090f01d3848b63dda4e37d1c">paddress</a> (gdbarch, addr), <a class="code" href="main_8c.html#a41a2b997ba5454df787d61f051dd918c">gdb_stdout</a>);
<a name="l01669"></a>01669               count++;
<a name="l01670"></a>01670             }
<a name="l01671"></a>01671         }
<a name="l01672"></a>01672     <span class="keywordflow">if</span> (count || need_nl)
<a name="l01673"></a>01673       <a class="code" href="utils_8c.html#ab4c30e1b3fe2dfa6e73f320a6758ad5f">puts_filtered</a> (<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01674"></a>01674   }
<a name="l01675"></a>01675 
<a name="l01676"></a>01676   <a class="code" href="cleanups_8c.html#a8b313a4f1c613973ea444e5fa54976f8">do_cleanups</a> (back_to);
<a name="l01677"></a>01677 }
<a name="l01678"></a>01678 
<a name="l01679"></a>01679 <span class="comment">/* Print briefly all stack frames or just the innermost COUNT_EXP</span>
<a name="l01680"></a>01680 <span class="comment">   frames.  */</span>
<a name="l01681"></a>01681 
<a name="l01682"></a>01682 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l01683"></a><a class="code" href="stack_8c.html#af4ff7d6fc24f87cc52da4aedcac15114">01683</a> <a class="code" href="stack_8c.html#af4ff7d6fc24f87cc52da4aedcac15114">backtrace_command_1</a> (<span class="keywordtype">char</span> *count_exp, <span class="keywordtype">int</span> show_locals, <span class="keywordtype">int</span> no_filters,
<a name="l01684"></a>01684                      <span class="keywordtype">int</span> from_tty)
<a name="l01685"></a>01685 {
<a name="l01686"></a>01686   <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *fi;
<a name="l01687"></a>01687   <span class="keywordtype">int</span> count;
<a name="l01688"></a>01688   <span class="keywordtype">int</span> i;
<a name="l01689"></a>01689   <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *trailing;
<a name="l01690"></a>01690   <span class="keywordtype">int</span> trailing_level, py_start = 0, py_end = 0;
<a name="l01691"></a>01691   <span class="keyword">enum</span> <a class="code" href="python_8h.html#a0f1debb05eb63feb3d35d8a3d7c5c694">py_bt_status</a> result = <a class="code" href="python_8h.html#a0f1debb05eb63feb3d35d8a3d7c5c694a883c83c30e292c3291552077af8c7170">PY_BT_ERROR</a>;
<a name="l01692"></a>01692 
<a name="l01693"></a>01693   <span class="keywordflow">if</span> (!<a class="code" href="target_8h.html#a3ca2aede43425f44535225aa4a2c2724">target_has_stack</a>)
<a name="l01694"></a>01694     <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;No stack.&quot;</span>));
<a name="l01695"></a>01695 
<a name="l01696"></a>01696   <span class="comment">/* The following code must do two things.  First, it must set the</span>
<a name="l01697"></a>01697 <span class="comment">     variable TRAILING to the frame from which we should start</span>
<a name="l01698"></a>01698 <span class="comment">     printing.  Second, it must set the variable count to the number</span>
<a name="l01699"></a>01699 <span class="comment">     of frames which we should print, or -1 if all of them.  */</span>
<a name="l01700"></a>01700   trailing = <a class="code" href="frame_8c.html#a5ab254510728049878a232ed1b889820">get_current_frame</a> ();
<a name="l01701"></a>01701 
<a name="l01702"></a>01702   trailing_level = 0;
<a name="l01703"></a>01703   <span class="keywordflow">if</span> (count_exp)
<a name="l01704"></a>01704     {
<a name="l01705"></a>01705       count = <a class="code" href="eval_8c.html#a8c10c34c4f91482249243e53ab7d16b7">parse_and_eval_long</a> (count_exp);
<a name="l01706"></a>01706       <span class="keywordflow">if</span> (count &lt; 0)
<a name="l01707"></a>01707         {
<a name="l01708"></a>01708           <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *current;
<a name="l01709"></a>01709 
<a name="l01710"></a>01710           py_start = count;
<a name="l01711"></a>01711           count = -count;
<a name="l01712"></a>01712 
<a name="l01713"></a>01713           current = trailing;
<a name="l01714"></a>01714           <span class="keywordflow">while</span> (current &amp;&amp; count--)
<a name="l01715"></a>01715             {
<a name="l01716"></a>01716               <a class="code" href="defs_8h.html#ad24e2b54375e12474e65ebf7175988fb">QUIT</a>;
<a name="l01717"></a>01717               current = <a class="code" href="frame_8c.html#a7dc158f329065de426029f24f5578838">get_prev_frame</a> (current);
<a name="l01718"></a>01718             }
<a name="l01719"></a>01719 
<a name="l01720"></a>01720           <span class="comment">/* Will stop when CURRENT reaches the top of the stack.</span>
<a name="l01721"></a>01721 <span class="comment">             TRAILING will be COUNT below it.  */</span>
<a name="l01722"></a>01722           <span class="keywordflow">while</span> (current)
<a name="l01723"></a>01723             {
<a name="l01724"></a>01724               <a class="code" href="defs_8h.html#ad24e2b54375e12474e65ebf7175988fb">QUIT</a>;
<a name="l01725"></a>01725               trailing = <a class="code" href="frame_8c.html#a7dc158f329065de426029f24f5578838">get_prev_frame</a> (trailing);
<a name="l01726"></a>01726               current = <a class="code" href="frame_8c.html#a7dc158f329065de426029f24f5578838">get_prev_frame</a> (current);
<a name="l01727"></a>01727               trailing_level++;
<a name="l01728"></a>01728             }
<a name="l01729"></a>01729 
<a name="l01730"></a>01730           count = -1;
<a name="l01731"></a>01731         }
<a name="l01732"></a>01732       <span class="keywordflow">else</span>
<a name="l01733"></a>01733         {
<a name="l01734"></a>01734           py_start = 0;
<a name="l01735"></a>01735           py_end = count;
<a name="l01736"></a>01736         }
<a name="l01737"></a>01737     }
<a name="l01738"></a>01738   <span class="keywordflow">else</span>
<a name="l01739"></a>01739     {
<a name="l01740"></a>01740       py_end = -1;
<a name="l01741"></a>01741       count = -1;
<a name="l01742"></a>01742     }
<a name="l01743"></a>01743 
<a name="l01744"></a>01744   <span class="keywordflow">if</span> (<a class="code" href="defs_8h.html#a3f2f91ed92de5dfaa6d27fb82822f8d5">info_verbose</a>)
<a name="l01745"></a>01745     {
<a name="l01746"></a>01746       <span class="comment">/* Read in symbols for all of the frames.  Need to do this in a</span>
<a name="l01747"></a>01747 <span class="comment">         separate pass so that &quot;Reading in symbols for xxx&quot; messages</span>
<a name="l01748"></a>01748 <span class="comment">         don&#39;t screw up the appearance of the backtrace.  Also if</span>
<a name="l01749"></a>01749 <span class="comment">         people have strong opinions against reading symbols for</span>
<a name="l01750"></a>01750 <span class="comment">         backtrace this may have to be an option.  */</span>
<a name="l01751"></a>01751       i = count;
<a name="l01752"></a>01752       <span class="keywordflow">for</span> (fi = trailing; fi != NULL &amp;&amp; i--; fi = <a class="code" href="frame_8c.html#a7dc158f329065de426029f24f5578838">get_prev_frame</a> (fi))
<a name="l01753"></a>01753         {
<a name="l01754"></a>01754           <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc;
<a name="l01755"></a>01755 
<a name="l01756"></a>01756           <a class="code" href="defs_8h.html#ad24e2b54375e12474e65ebf7175988fb">QUIT</a>;
<a name="l01757"></a>01757           pc = <a class="code" href="frame_8c.html#a9035a35b7470b669f9bafee9c3961559">get_frame_address_in_block</a> (fi);
<a name="l01758"></a>01758           <a class="code" href="symtab_8c.html#a573ede76af73e4c1b027bad585fa1315">find_pc_sect_symtab_via_partial</a> (pc, <a class="code" href="symfile_8c.html#a33d038361894796168eaae2cf48f744c">find_pc_mapped_section</a> (pc));
<a name="l01759"></a>01759         }
<a name="l01760"></a>01760     }
<a name="l01761"></a>01761 
<a name="l01762"></a>01762   <span class="keywordflow">if</span> (! no_filters)
<a name="l01763"></a>01763     {
<a name="l01764"></a>01764       <span class="keywordtype">int</span> <a class="code" href="solib-som_8c.html#a555096840020c318e34b205419e98cca">flags</a> = <a class="code" href="python_8h.html#a3946462490e70c3f95066a1b678a3713aff893661810a75e613d248108c9ace25">PRINT_LEVEL</a> | <a class="code" href="python_8h.html#a3946462490e70c3f95066a1b678a3713abbc2cbfabe3e794e0c8ea19cddd1dee3">PRINT_FRAME_INFO</a> | <a class="code" href="python_8h.html#a3946462490e70c3f95066a1b678a3713a3d746b3ba8e087957203a8c39c871eb9">PRINT_ARGS</a>;
<a name="l01765"></a>01765       <span class="keyword">enum</span> <a class="code" href="python_8h.html#a7f504e7fd32a3c4e17d883517ca1cf11">py_frame_args</a> arg_type;
<a name="l01766"></a>01766 
<a name="l01767"></a>01767       <span class="keywordflow">if</span> (show_locals)
<a name="l01768"></a>01768         flags |= <a class="code" href="python_8h.html#a3946462490e70c3f95066a1b678a3713a82a0edbc6f68cf9e84d3f51d610e1e07">PRINT_LOCALS</a>;
<a name="l01769"></a>01769 
<a name="l01770"></a>01770       <span class="keywordflow">if</span> (!strcmp (<a class="code" href="stack_8c.html#affd7a00dca2d9a9b2fb0804ac172552c">print_frame_arguments</a>, <span class="stringliteral">&quot;scalars&quot;</span>))
<a name="l01771"></a>01771         arg_type = <a class="code" href="python_8h.html#a7f504e7fd32a3c4e17d883517ca1cf11af6c9b33540fe4a2046a8fe932626755a">CLI_SCALAR_VALUES</a>;
<a name="l01772"></a>01772       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp (<a class="code" href="stack_8c.html#affd7a00dca2d9a9b2fb0804ac172552c">print_frame_arguments</a>, <span class="stringliteral">&quot;all&quot;</span>))
<a name="l01773"></a>01773         arg_type = <a class="code" href="python_8h.html#a7f504e7fd32a3c4e17d883517ca1cf11a88d632cc159bbc81b754c90a85aaaff5">CLI_ALL_VALUES</a>;
<a name="l01774"></a>01774       <span class="keywordflow">else</span>
<a name="l01775"></a>01775         arg_type = <a class="code" href="python_8h.html#a7f504e7fd32a3c4e17d883517ca1cf11a4c09de0c4a69419b025fae5888da7485">NO_VALUES</a>;
<a name="l01776"></a>01776 
<a name="l01777"></a>01777       result = <a class="code" href="py-framefilter_8c.html#a04773885454bf0191b385982710a8d11">apply_frame_filter</a> (<a class="code" href="frame_8c.html#a5ab254510728049878a232ed1b889820">get_current_frame</a> (), flags, arg_type,
<a name="l01778"></a>01778                                    <a class="code" href="ui-out_8c.html#a3d9e2a5710f076cc035ef73920eb8c87">current_uiout</a>, py_start, py_end);
<a name="l01779"></a>01779 
<a name="l01780"></a>01780     }
<a name="l01781"></a>01781   <span class="comment">/* Run the inbuilt backtrace if there are no filters registered, or</span>
<a name="l01782"></a>01782 <span class="comment">     &quot;no-filters&quot; has been specified from the command.  */</span>
<a name="l01783"></a>01783   <span class="keywordflow">if</span> (no_filters ||  result == <a class="code" href="python_8h.html#a0f1debb05eb63feb3d35d8a3d7c5c694a77ca6b82d4fa428fb094a8b1efb7d6e3">PY_BT_NO_FILTERS</a>)
<a name="l01784"></a>01784     {
<a name="l01785"></a>01785       <span class="keywordflow">for</span> (i = 0, fi = trailing; fi &amp;&amp; count--; i++, fi = <a class="code" href="frame_8c.html#a7dc158f329065de426029f24f5578838">get_prev_frame</a> (fi))
<a name="l01786"></a>01786         {
<a name="l01787"></a>01787           <a class="code" href="defs_8h.html#ad24e2b54375e12474e65ebf7175988fb">QUIT</a>;
<a name="l01788"></a>01788 
<a name="l01789"></a>01789           <span class="comment">/* Don&#39;t use print_stack_frame; if an error() occurs it probably</span>
<a name="l01790"></a>01790 <span class="comment">             means further attempts to backtrace would fail (on the other</span>
<a name="l01791"></a>01791 <span class="comment">             hand, perhaps the code does or could be fixed to make sure</span>
<a name="l01792"></a>01792 <span class="comment">             the frame-&gt;prev field gets set to NULL in that case).  */</span>
<a name="l01793"></a>01793 
<a name="l01794"></a>01794           <a class="code" href="frame_8h.html#acda4e77a54a6d0978784516c9c12686d">print_frame_info</a> (fi, 1, <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4a1e9e3944b93fde52c7c92e1e15dcaf4a">LOCATION</a>, 1, 0);
<a name="l01795"></a>01795           <span class="keywordflow">if</span> (show_locals)
<a name="l01796"></a>01796             {
<a name="l01797"></a>01797               <span class="keyword">struct </span><a class="code" href="structframe__id.html">frame_id</a> frame_id = <a class="code" href="frame_8c.html#a4d69effe10c03fa7c702d490081012bf">get_frame_id</a> (fi);
<a name="l01798"></a>01798 
<a name="l01799"></a>01799               <a class="code" href="stack_8c.html#a4c5274cb969659e0c4b1ae7e9d029bd1">print_frame_local_vars</a> (fi, 1, <a class="code" href="main_8c.html#a41a2b997ba5454df787d61f051dd918c">gdb_stdout</a>);
<a name="l01800"></a>01800 
<a name="l01801"></a>01801               <span class="comment">/* print_frame_local_vars invalidates FI.  */</span>
<a name="l01802"></a>01802               fi = <a class="code" href="frame_8c.html#a09616280d1811c8f06c46e26a8e07960">frame_find_by_id</a> (frame_id);
<a name="l01803"></a>01803               <span class="keywordflow">if</span> (fi == NULL)
<a name="l01804"></a>01804                 {
<a name="l01805"></a>01805                   trailing = NULL;
<a name="l01806"></a>01806                   <a class="code" href="utils_8c.html#a5fc201a4181499a6b4057a6caa15b5e2">warning</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Unable to restore previously selected frame.&quot;</span>));
<a name="l01807"></a>01807                   <span class="keywordflow">break</span>;
<a name="l01808"></a>01808                 }
<a name="l01809"></a>01809             }
<a name="l01810"></a>01810 
<a name="l01811"></a>01811           <span class="comment">/* Save the last frame to check for error conditions.  */</span>
<a name="l01812"></a>01812           trailing = fi;
<a name="l01813"></a>01813         }
<a name="l01814"></a>01814 
<a name="l01815"></a>01815       <span class="comment">/* If we&#39;ve stopped before the end, mention that.  */</span>
<a name="l01816"></a>01816       <span class="keywordflow">if</span> (fi &amp;&amp; from_tty)
<a name="l01817"></a>01817         <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;(More stack frames follow...)\n&quot;</span>));
<a name="l01818"></a>01818 
<a name="l01819"></a>01819       <span class="comment">/* If we&#39;ve run out of frames, and the reason appears to be an error</span>
<a name="l01820"></a>01820 <span class="comment">         condition, print it.  */</span>
<a name="l01821"></a>01821       <span class="keywordflow">if</span> (fi == NULL &amp;&amp; trailing != NULL)
<a name="l01822"></a>01822         {
<a name="l01823"></a>01823           <span class="keyword">enum</span> <a class="code" href="frame_8h.html#ad7491d3a051c1990a9777f60afbb4399">unwind_stop_reason</a> reason;
<a name="l01824"></a>01824 
<a name="l01825"></a>01825           reason = <a class="code" href="frame_8c.html#a739635558f5ea22c6240b4895cd6a9c2">get_frame_unwind_stop_reason</a> (trailing);
<a name="l01826"></a>01826           <span class="keywordflow">if</span> (reason &gt;= UNWIND_FIRST_ERROR)
<a name="l01827"></a>01827             <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Backtrace stopped: %s\n&quot;</span>),
<a name="l01828"></a>01828                              <a class="code" href="frame_8c.html#ab8fa488427762f646118279ffaa72a53">frame_stop_reason_string</a> (reason));
<a name="l01829"></a>01829         }
<a name="l01830"></a>01830     }
<a name="l01831"></a>01831 }
<a name="l01832"></a>01832 
<a name="l01833"></a>01833 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l01834"></a><a class="code" href="stack_8c.html#a98a85c55889195230c9002bc2ff39739">01834</a> <a class="code" href="stack_8c.html#a98a85c55889195230c9002bc2ff39739">backtrace_command</a> (<span class="keywordtype">char</span> *arg, <span class="keywordtype">int</span> from_tty)
<a name="l01835"></a>01835 {
<a name="l01836"></a>01836   <span class="keyword">struct </span><a class="code" href="structcleanup.html">cleanup</a> *old_chain = <a class="code" href="cleanups_8c.html#a3d418f8af424aec399898c2d48b26224">make_cleanup</a> (<a class="code" href="cleanups_8c.html#a1ec2a3980c2be1f31f2142103d1f7abf">null_cleanup</a>, NULL);
<a name="l01837"></a>01837   <span class="keywordtype">int</span> fulltrace_arg = -1, arglen = 0, argc = 0, no_filters  = -1;
<a name="l01838"></a>01838   <span class="keywordtype">int</span> user_arg = 0;
<a name="l01839"></a>01839 
<a name="l01840"></a>01840   <span class="keywordflow">if</span> (arg)
<a name="l01841"></a>01841     {
<a name="l01842"></a>01842       <span class="keywordtype">char</span> **argv;
<a name="l01843"></a>01843       <span class="keywordtype">int</span> i;
<a name="l01844"></a>01844 
<a name="l01845"></a>01845       argv = <a class="code" href="utils_8c.html#a146bf06d6062174a10a36700c40fdae4">gdb_buildargv</a> (arg);
<a name="l01846"></a>01846       <a class="code" href="utils_8c.html#aad1e14fe73668592441775f7346f558e">make_cleanup_freeargv</a> (argv);
<a name="l01847"></a>01847       argc = 0;
<a name="l01848"></a>01848       <span class="keywordflow">for</span> (i = 0; argv[i]; i++)
<a name="l01849"></a>01849         {
<a name="l01850"></a>01850           <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j;
<a name="l01851"></a>01851 
<a name="l01852"></a>01852           <span class="keywordflow">for</span> (j = 0; j &lt; strlen (argv[i]); j++)
<a name="l01853"></a>01853             argv[i][j] = tolower (argv[i][j]);
<a name="l01854"></a>01854 
<a name="l01855"></a>01855           <span class="keywordflow">if</span> (no_filters &lt; 0 &amp;&amp; <a class="code" href="utils_8c.html#a98d2eaa8c41d37c9e74162e4012d7300">subset_compare</a> (argv[i], <span class="stringliteral">&quot;no-filters&quot;</span>))
<a name="l01856"></a>01856             no_filters = argc;
<a name="l01857"></a>01857           <span class="keywordflow">else</span>
<a name="l01858"></a>01858             {
<a name="l01859"></a>01859               <span class="keywordflow">if</span> (fulltrace_arg &lt; 0 &amp;&amp; <a class="code" href="utils_8c.html#a98d2eaa8c41d37c9e74162e4012d7300">subset_compare</a> (argv[i], <span class="stringliteral">&quot;full&quot;</span>))
<a name="l01860"></a>01860                 fulltrace_arg = argc;
<a name="l01861"></a>01861               <span class="keywordflow">else</span>
<a name="l01862"></a>01862                 {
<a name="l01863"></a>01863                   user_arg++;
<a name="l01864"></a>01864                   arglen += strlen (argv[i]);
<a name="l01865"></a>01865                 }
<a name="l01866"></a>01866             }
<a name="l01867"></a>01867           argc++;
<a name="l01868"></a>01868         }
<a name="l01869"></a>01869       arglen += user_arg;
<a name="l01870"></a>01870       <span class="keywordflow">if</span> (fulltrace_arg &gt;= 0 || no_filters &gt;= 0)
<a name="l01871"></a>01871         {
<a name="l01872"></a>01872           <span class="keywordflow">if</span> (arglen &gt; 0)
<a name="l01873"></a>01873             {
<a name="l01874"></a>01874               arg = <a class="code" href="common-utils_8c.html#a634d6cd850bb831afebc499579303b3b">xmalloc</a> (arglen + 1);
<a name="l01875"></a>01875               <a class="code" href="cleanups_8c.html#a3d418f8af424aec399898c2d48b26224">make_cleanup</a> (<a class="code" href="common-utils_8c.html#a976e14808b9247ec952c262553f09f8f">xfree</a>, arg);
<a name="l01876"></a>01876               arg[0] = 0;
<a name="l01877"></a>01877               <span class="keywordflow">for</span> (i = 0; i &lt; argc; i++)
<a name="l01878"></a>01878                 {
<a name="l01879"></a>01879                   <span class="keywordflow">if</span> (i != fulltrace_arg &amp;&amp; i != no_filters)
<a name="l01880"></a>01880                     {
<a name="l01881"></a>01881                       strcat (arg, argv[i]);
<a name="l01882"></a>01882                       strcat (arg, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01883"></a>01883                     }
<a name="l01884"></a>01884                 }
<a name="l01885"></a>01885             }
<a name="l01886"></a>01886           <span class="keywordflow">else</span>
<a name="l01887"></a>01887             arg = NULL;
<a name="l01888"></a>01888         }
<a name="l01889"></a>01889     }
<a name="l01890"></a>01890 
<a name="l01891"></a>01891   <a class="code" href="stack_8c.html#af4ff7d6fc24f87cc52da4aedcac15114">backtrace_command_1</a> (arg, fulltrace_arg &gt;= 0 <span class="comment">/* show_locals */</span>,
<a name="l01892"></a>01892                        no_filters &gt;= 0 <span class="comment">/* no frame-filters */</span>, from_tty);
<a name="l01893"></a>01893 
<a name="l01894"></a>01894   <a class="code" href="cleanups_8c.html#a8b313a4f1c613973ea444e5fa54976f8">do_cleanups</a> (old_chain);
<a name="l01895"></a>01895 }
<a name="l01896"></a>01896 
<a name="l01897"></a>01897 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l01898"></a><a class="code" href="stack_8c.html#aa8738d35bfe2d9c7e50ca77c43ee75f2">01898</a> <a class="code" href="stack_8c.html#aa8738d35bfe2d9c7e50ca77c43ee75f2">backtrace_full_command</a> (<span class="keywordtype">char</span> *<a class="code" href="structcleanup.html#a10b494058e88a8972633026b5fa3873f">arg</a>, <span class="keywordtype">int</span> from_tty)
<a name="l01899"></a>01899 {
<a name="l01900"></a>01900   <a class="code" href="stack_8c.html#af4ff7d6fc24f87cc52da4aedcac15114">backtrace_command_1</a> (arg, 1 <span class="comment">/* show_locals */</span>, 0, from_tty);
<a name="l01901"></a>01901 }
<a name="l01902"></a>01902 
<a name="l01903"></a>01903 
<a name="l01904"></a>01904 <span class="comment">/* Iterate over the local variables of a block B, calling CB with</span>
<a name="l01905"></a>01905 <span class="comment">   CB_DATA.  */</span>
<a name="l01906"></a>01906 
<a name="l01907"></a>01907 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l01908"></a><a class="code" href="stack_8c.html#ac8ea5848779eb1168b7e479b37e01d47">01908</a> <a class="code" href="stack_8c.html#ac8ea5848779eb1168b7e479b37e01d47">iterate_over_block_locals</a> (<span class="keyword">struct</span> <a class="code" href="structblock.html">block</a> *b,
<a name="l01909"></a>01909                            <a class="code" href="stack_8h.html#a2d82addb4422aaefc7e7f86bfdc4cee1">iterate_over_block_arg_local_vars_cb</a> cb,
<a name="l01910"></a>01910                            <span class="keywordtype">void</span> *cb_data)
<a name="l01911"></a>01911 {
<a name="l01912"></a>01912   <span class="keyword">struct </span><a class="code" href="structblock__iterator.html">block_iterator</a> iter;
<a name="l01913"></a>01913   <span class="keyword">struct </span><a class="code" href="structsymbol.html">symbol</a> *sym;
<a name="l01914"></a>01914 
<a name="l01915"></a>01915   <a class="code" href="block_8h.html#a0ffb1db4f5e3a6fd58700861fce48c2b">ALL_BLOCK_SYMBOLS</a> (b, iter, sym)
<a name="l01916"></a>01916     {
<a name="l01917"></a>01917       <span class="keywordflow">switch</span> (<a class="code" href="symtab_8h.html#a8394f2ba6c27e8026b2783db7cc0eb40">SYMBOL_CLASS</a> (sym))
<a name="l01918"></a>01918         {
<a name="l01919"></a>01919         <span class="keywordflow">case</span> <a class="code" href="symtab_8h.html#a40bca6cf3ed5cfa15b1275e6750cdda3a495b83fa459ac0722b15a3e94afadbce">LOC_LOCAL</a>:
<a name="l01920"></a>01920         <span class="keywordflow">case</span> <a class="code" href="symtab_8h.html#a40bca6cf3ed5cfa15b1275e6750cdda3a2a9bcb7d8487d7ccb3858184340712e7">LOC_REGISTER</a>:
<a name="l01921"></a>01921         <span class="keywordflow">case</span> <a class="code" href="symtab_8h.html#a40bca6cf3ed5cfa15b1275e6750cdda3a154b256439f7acd7ec7f6257d5881a0f">LOC_STATIC</a>:
<a name="l01922"></a>01922         <span class="keywordflow">case</span> <a class="code" href="symtab_8h.html#a40bca6cf3ed5cfa15b1275e6750cdda3afd4303a25cda7805900ce8212c67ed45">LOC_COMPUTED</a>:
<a name="l01923"></a>01923           <span class="keywordflow">if</span> (<a class="code" href="symtab_8h.html#ab3de6f2d8c380d3ca8bef520b1b4dfb9">SYMBOL_IS_ARGUMENT</a> (sym))
<a name="l01924"></a>01924             <span class="keywordflow">break</span>;
<a name="l01925"></a>01925           <span class="keywordflow">if</span> (<a class="code" href="symtab_8h.html#a362f2f64212c0c45fb770a3f21ef5ab0">SYMBOL_DOMAIN</a> (sym) == <a class="code" href="symtab_8h.html#a5c384cef81c5f50f32caadbfd6974a1aa60e9537c28edca1b9d62867b8afcfe98">COMMON_BLOCK_DOMAIN</a>)
<a name="l01926"></a>01926             <span class="keywordflow">break</span>;
<a name="l01927"></a>01927           (*cb) (<a class="code" href="symtab_8h.html#ac7f4cb1648125545fbd0e4f13b0c572c">SYMBOL_PRINT_NAME</a> (sym), sym, cb_data);
<a name="l01928"></a>01928           <span class="keywordflow">break</span>;
<a name="l01929"></a>01929 
<a name="l01930"></a>01930         <span class="keywordflow">default</span>:
<a name="l01931"></a>01931           <span class="comment">/* Ignore symbols which are not locals.  */</span>
<a name="l01932"></a>01932           <span class="keywordflow">break</span>;
<a name="l01933"></a>01933         }
<a name="l01934"></a>01934     }
<a name="l01935"></a>01935 }
<a name="l01936"></a>01936 
<a name="l01937"></a>01937 
<a name="l01938"></a>01938 <span class="comment">/* Same, but print labels.  */</span>
<a name="l01939"></a>01939 
<a name="l01940"></a>01940 <span class="preprocessor">#if 0</span>
<a name="l01941"></a>01941 <span class="preprocessor"></span><span class="comment">/* Commented out, as the code using this function has also been</span>
<a name="l01942"></a>01942 <span class="comment">   commented out.  FIXME:brobecker/2009-01-13: Find out why the code</span>
<a name="l01943"></a>01943 <span class="comment">   was commented out in the first place.  The discussion introducing</span>
<a name="l01944"></a>01944 <span class="comment">   this change (2007-12-04: Support lexical blocks and function bodies</span>
<a name="l01945"></a>01945 <span class="comment">   that occupy non-contiguous address ranges) did not explain why</span>
<a name="l01946"></a>01946 <span class="comment">   this change was made.  */</span>
<a name="l01947"></a>01947 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01948"></a>01948 print_block_frame_labels (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keyword">struct</span> <a class="code" href="structblock.html">block</a> *b,
<a name="l01949"></a>01949                           <span class="keywordtype">int</span> *have_default, <span class="keyword">struct</span> <a class="code" href="structui__file.html">ui_file</a> *stream)
<a name="l01950"></a>01950 {
<a name="l01951"></a>01951   <span class="keyword">struct </span><a class="code" href="structblock__iterator.html">block_iterator</a> iter;
<a name="l01952"></a>01952   <span class="keyword">struct </span><a class="code" href="structsymbol.html">symbol</a> *sym;
<a name="l01953"></a>01953   <span class="keywordtype">int</span> values_printed = 0;
<a name="l01954"></a>01954 
<a name="l01955"></a>01955   <a class="code" href="block_8h.html#a0ffb1db4f5e3a6fd58700861fce48c2b">ALL_BLOCK_SYMBOLS</a> (b, iter, sym)
<a name="l01956"></a>01956     {
<a name="l01957"></a>01957       <span class="keywordflow">if</span> (strcmp (<a class="code" href="symtab_8h.html#a956b56288511a18b855d8a263d60e87f">SYMBOL_LINKAGE_NAME</a> (sym), <span class="stringliteral">&quot;default&quot;</span>) == 0)
<a name="l01958"></a>01958         {
<a name="l01959"></a>01959           <span class="keywordflow">if</span> (*have_default)
<a name="l01960"></a>01960             <span class="keywordflow">continue</span>;
<a name="l01961"></a>01961           *have_default = 1;
<a name="l01962"></a>01962         }
<a name="l01963"></a>01963       <span class="keywordflow">if</span> (<a class="code" href="symtab_8h.html#a8394f2ba6c27e8026b2783db7cc0eb40">SYMBOL_CLASS</a> (sym) == <a class="code" href="symtab_8h.html#a40bca6cf3ed5cfa15b1275e6750cdda3a246b44ddd9acee8dac2a7d9d2c5d7c6e">LOC_LABEL</a>)
<a name="l01964"></a>01964         {
<a name="l01965"></a>01965           <span class="keyword">struct </span><a class="code" href="structsymtab__and__line.html">symtab_and_line</a> sal;
<a name="l01966"></a>01966           <span class="keyword">struct </span><a class="code" href="structvalue__print__options.html">value_print_options</a> opts;
<a name="l01967"></a>01967 
<a name="l01968"></a>01968           sal = <a class="code" href="symtab_8c.html#ad9bbd85700e3d7fa50e7ba0e32f37846">find_pc_line</a> (<a class="code" href="symtab_8h.html#abee697b9e3bb4f4d164ad920a87ab854">SYMBOL_VALUE_ADDRESS</a> (sym), 0);
<a name="l01969"></a>01969           values_printed = 1;
<a name="l01970"></a>01970           <a class="code" href="utils_8c.html#a4b28488051faf9ab4a2f07633225835f">fputs_filtered</a> (<a class="code" href="symtab_8h.html#ac7f4cb1648125545fbd0e4f13b0c572c">SYMBOL_PRINT_NAME</a> (sym), stream);
<a name="l01971"></a>01971           <a class="code" href="valprint_8c.html#aa2d4dfe4b11841ccafc4d0c0d410095d">get_user_print_options</a> (&amp;opts);
<a name="l01972"></a>01972           <span class="keywordflow">if</span> (opts.addressprint)
<a name="l01973"></a>01973             {
<a name="l01974"></a>01974               <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (stream, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01975"></a>01975               <a class="code" href="utils_8c.html#a4b28488051faf9ab4a2f07633225835f">fputs_filtered</a> (<a class="code" href="utils_8c.html#ab5c76d72090f01d3848b63dda4e37d1c">paddress</a> (gdbarch, <a class="code" href="symtab_8h.html#abee697b9e3bb4f4d164ad920a87ab854">SYMBOL_VALUE_ADDRESS</a> (sym)),
<a name="l01976"></a>01976                               stream);
<a name="l01977"></a>01977             }
<a name="l01978"></a>01978           <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (stream, <span class="stringliteral">&quot; in file %s, line %d\n&quot;</span>,
<a name="l01979"></a>01979                             sal.symtab-&gt;filename, sal.line);
<a name="l01980"></a>01980         }
<a name="l01981"></a>01981     }
<a name="l01982"></a>01982 
<a name="l01983"></a>01983   <span class="keywordflow">return</span> values_printed;
<a name="l01984"></a>01984 }
<a name="l01985"></a>01985 <span class="preprocessor">#endif</span>
<a name="l01986"></a>01986 <span class="preprocessor"></span>
<a name="l01987"></a>01987 <span class="comment">/* Iterate over all the local variables in block B, including all its</span>
<a name="l01988"></a>01988 <span class="comment">   superblocks, stopping when the top-level block is reached.  */</span>
<a name="l01989"></a>01989 
<a name="l01990"></a>01990 <span class="keywordtype">void</span>
<a name="l01991"></a><a class="code" href="stack_8h.html#aa9d8f435229d0ef264cb672657d46db5">01991</a> <a class="code" href="stack_8c.html#aa9d8f435229d0ef264cb672657d46db5">iterate_over_block_local_vars</a> (<span class="keyword">struct</span> <a class="code" href="structblock.html">block</a> *<a class="code" href="structblock.html">block</a>,
<a name="l01992"></a>01992                                <a class="code" href="stack_8h.html#a2d82addb4422aaefc7e7f86bfdc4cee1">iterate_over_block_arg_local_vars_cb</a> cb,
<a name="l01993"></a>01993                                <span class="keywordtype">void</span> *cb_data)
<a name="l01994"></a>01994 {
<a name="l01995"></a>01995   <span class="keywordflow">while</span> (block)
<a name="l01996"></a>01996     {
<a name="l01997"></a>01997       <a class="code" href="stack_8c.html#ac8ea5848779eb1168b7e479b37e01d47">iterate_over_block_locals</a> (block, cb, cb_data);
<a name="l01998"></a>01998       <span class="comment">/* After handling the function&#39;s top-level block, stop.  Don&#39;t</span>
<a name="l01999"></a>01999 <span class="comment">         continue to its superblock, the block of per-file</span>
<a name="l02000"></a>02000 <span class="comment">         symbols.  */</span>
<a name="l02001"></a>02001       <span class="keywordflow">if</span> (<a class="code" href="block_8h.html#aeea4a00e65c2be0c8674106f38d8ab65">BLOCK_FUNCTION</a> (block))
<a name="l02002"></a>02002         <span class="keywordflow">break</span>;
<a name="l02003"></a>02003       block = <a class="code" href="block_8h.html#a8b7633ab6d6feadf9b2ee58e10ad8397">BLOCK_SUPERBLOCK</a> (block);
<a name="l02004"></a>02004     }
<a name="l02005"></a>02005 }
<a name="l02006"></a>02006 
<a name="l02007"></a>02007 <span class="comment">/* Data to be passed around in the calls to the locals and args</span>
<a name="l02008"></a>02008 <span class="comment">   iterators.  */</span>
<a name="l02009"></a>02009 
<a name="l02010"></a><a class="code" href="structprint__variable__and__value__data.html">02010</a> <span class="keyword">struct </span><a class="code" href="structprint__variable__and__value__data.html">print_variable_and_value_data</a>
<a name="l02011"></a>02011 {
<a name="l02012"></a><a class="code" href="structprint__variable__and__value__data.html#a43825fc7feb7a8fe94b6512afed778de">02012</a>   <span class="keyword">struct </span><a class="code" href="structframe__id.html">frame_id</a> <a class="code" href="structframe__id.html">frame_id</a>;
<a name="l02013"></a><a class="code" href="structprint__variable__and__value__data.html#aa3f4a1e94cea80f7f4b85ec7df6ef54d">02013</a>   <span class="keywordtype">int</span> <a class="code" href="structprint__variable__and__value__data.html#aa3f4a1e94cea80f7f4b85ec7df6ef54d">num_tabs</a>;
<a name="l02014"></a><a class="code" href="structprint__variable__and__value__data.html#ae30fb2fdc74c90317eead9c7edf169f1">02014</a>   <span class="keyword">struct </span><a class="code" href="structui__file.html">ui_file</a> *<a class="code" href="structprint__variable__and__value__data.html#ae30fb2fdc74c90317eead9c7edf169f1">stream</a>;
<a name="l02015"></a><a class="code" href="structprint__variable__and__value__data.html#a3c48b68e5ac1ac5f8c871e6a2a5cc3d7">02015</a>   <span class="keywordtype">int</span> <a class="code" href="structprint__variable__and__value__data.html#a3c48b68e5ac1ac5f8c871e6a2a5cc3d7">values_printed</a>;
<a name="l02016"></a>02016 };
<a name="l02017"></a>02017 
<a name="l02018"></a>02018 <span class="comment">/* The callback for the locals and args iterators.  */</span>
<a name="l02019"></a>02019 
<a name="l02020"></a>02020 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02021"></a><a class="code" href="stack_8c.html#a09a36d94ceea7b13b14a1e25ed502c3d">02021</a> <a class="code" href="stack_8c.html#a09a36d94ceea7b13b14a1e25ed502c3d">do_print_variable_and_value</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *print_name,
<a name="l02022"></a>02022                              <span class="keyword">struct</span> <a class="code" href="structsymbol.html">symbol</a> *sym,
<a name="l02023"></a>02023                              <span class="keywordtype">void</span> *cb_data)
<a name="l02024"></a>02024 {
<a name="l02025"></a>02025   <span class="keyword">struct </span><a class="code" href="structprint__variable__and__value__data.html">print_variable_and_value_data</a> *<a class="code" href="windows-nat_8c.html#ade66e4ccafbc33b117610bbc0d85feb0">p</a> = cb_data;
<a name="l02026"></a>02026   <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *frame;
<a name="l02027"></a>02027 
<a name="l02028"></a>02028   frame = <a class="code" href="frame_8c.html#a09616280d1811c8f06c46e26a8e07960">frame_find_by_id</a> (p-&gt;<a class="code" href="structprint__variable__and__value__data.html#a43825fc7feb7a8fe94b6512afed778de">frame_id</a>);
<a name="l02029"></a>02029   <span class="keywordflow">if</span> (frame == NULL)
<a name="l02030"></a>02030     {
<a name="l02031"></a>02031       <a class="code" href="utils_8c.html#a5fc201a4181499a6b4057a6caa15b5e2">warning</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Unable to restore previously selected frame.&quot;</span>));
<a name="l02032"></a>02032       <span class="keywordflow">return</span>;
<a name="l02033"></a>02033     }
<a name="l02034"></a>02034 
<a name="l02035"></a>02035   <a class="code" href="printcmd_8c.html#a89788fe9b84e0174fc7fe2851928d0cc">print_variable_and_value</a> (print_name, sym, frame, p-&gt;<a class="code" href="structprint__variable__and__value__data.html#ae30fb2fdc74c90317eead9c7edf169f1">stream</a>, p-&gt;<a class="code" href="structprint__variable__and__value__data.html#aa3f4a1e94cea80f7f4b85ec7df6ef54d">num_tabs</a>);
<a name="l02036"></a>02036 
<a name="l02037"></a>02037   <span class="comment">/* print_variable_and_value invalidates FRAME.  */</span>
<a name="l02038"></a>02038   frame = NULL;
<a name="l02039"></a>02039 
<a name="l02040"></a>02040   p-&gt;<a class="code" href="structprint__variable__and__value__data.html#a3c48b68e5ac1ac5f8c871e6a2a5cc3d7">values_printed</a> = 1;
<a name="l02041"></a>02041 }
<a name="l02042"></a>02042 
<a name="l02043"></a>02043 <span class="comment">/* Print all variables from the innermost up to the function block of FRAME.</span>
<a name="l02044"></a>02044 <span class="comment">   Print them with values to STREAM indented by NUM_TABS.</span>
<a name="l02045"></a>02045 <span class="comment"></span>
<a name="l02046"></a>02046 <span class="comment">   This function will invalidate FRAME.  */</span>
<a name="l02047"></a>02047 
<a name="l02048"></a>02048 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02049"></a><a class="code" href="stack_8c.html#a4c5274cb969659e0c4b1ae7e9d029bd1">02049</a> <a class="code" href="stack_8c.html#a4c5274cb969659e0c4b1ae7e9d029bd1">print_frame_local_vars</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame, <span class="keywordtype">int</span> num_tabs,
<a name="l02050"></a>02050                         <span class="keyword">struct</span> <a class="code" href="structui__file.html">ui_file</a> *stream)
<a name="l02051"></a>02051 {
<a name="l02052"></a>02052   <span class="keyword">struct </span><a class="code" href="structprint__variable__and__value__data.html">print_variable_and_value_data</a> cb_data;
<a name="l02053"></a>02053   <span class="keyword">struct </span><a class="code" href="structblock.html">block</a> *<a class="code" href="structblock.html">block</a>;
<a name="l02054"></a>02054   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc;
<a name="l02055"></a>02055 
<a name="l02056"></a>02056   <span class="keywordflow">if</span> (!<a class="code" href="frame_8c.html#af87888489ef191ac98c292350017e84e">get_frame_pc_if_available</a> (frame, &amp;pc))
<a name="l02057"></a>02057     {
<a name="l02058"></a>02058       <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (stream,
<a name="l02059"></a>02059                         <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;PC unavailable, cannot determine locals.\n&quot;</span>));
<a name="l02060"></a>02060       <span class="keywordflow">return</span>;
<a name="l02061"></a>02061     }
<a name="l02062"></a>02062 
<a name="l02063"></a>02063   block = <a class="code" href="blockframe_8c.html#a48cd98610b3a7f167334b616336cadfb">get_frame_block</a> (frame, 0);
<a name="l02064"></a>02064   <span class="keywordflow">if</span> (block == 0)
<a name="l02065"></a>02065     {
<a name="l02066"></a>02066       <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (stream, <span class="stringliteral">&quot;No symbol table info available.\n&quot;</span>);
<a name="l02067"></a>02067       <span class="keywordflow">return</span>;
<a name="l02068"></a>02068     }
<a name="l02069"></a>02069 
<a name="l02070"></a>02070   cb_data.<a class="code" href="structprint__variable__and__value__data.html#a43825fc7feb7a8fe94b6512afed778de">frame_id</a> = <a class="code" href="frame_8c.html#a4d69effe10c03fa7c702d490081012bf">get_frame_id</a> (frame);
<a name="l02071"></a>02071   cb_data.<a class="code" href="structprint__variable__and__value__data.html#aa3f4a1e94cea80f7f4b85ec7df6ef54d">num_tabs</a> = 4 * num_tabs;
<a name="l02072"></a>02072   cb_data.<a class="code" href="structprint__variable__and__value__data.html#ae30fb2fdc74c90317eead9c7edf169f1">stream</a> = stream;
<a name="l02073"></a>02073   cb_data.<a class="code" href="structprint__variable__and__value__data.html#a3c48b68e5ac1ac5f8c871e6a2a5cc3d7">values_printed</a> = 0;
<a name="l02074"></a>02074 
<a name="l02075"></a>02075   <a class="code" href="stack_8c.html#aa9d8f435229d0ef264cb672657d46db5">iterate_over_block_local_vars</a> (block,
<a name="l02076"></a>02076                                  <a class="code" href="stack_8c.html#a09a36d94ceea7b13b14a1e25ed502c3d">do_print_variable_and_value</a>,
<a name="l02077"></a>02077                                  &amp;cb_data);
<a name="l02078"></a>02078 
<a name="l02079"></a>02079   <span class="comment">/* do_print_variable_and_value invalidates FRAME.  */</span>
<a name="l02080"></a>02080   frame = NULL;
<a name="l02081"></a>02081 
<a name="l02082"></a>02082   <span class="keywordflow">if</span> (!cb_data.<a class="code" href="structprint__variable__and__value__data.html#a3c48b68e5ac1ac5f8c871e6a2a5cc3d7">values_printed</a>)
<a name="l02083"></a>02083     <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (stream, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;No locals.\n&quot;</span>));
<a name="l02084"></a>02084 }
<a name="l02085"></a>02085 
<a name="l02086"></a>02086 <span class="keywordtype">void</span>
<a name="l02087"></a><a class="code" href="stack_8c.html#a802139d2fd933fa0cd80cf2b8fbe7834">02087</a> <a class="code" href="frame_8h.html#ac8096db688dc13edd29e377c964d826d">locals_info</a> (<span class="keywordtype">char</span> *args, <span class="keywordtype">int</span> from_tty)
<a name="l02088"></a>02088 {
<a name="l02089"></a>02089   <a class="code" href="stack_8c.html#a4c5274cb969659e0c4b1ae7e9d029bd1">print_frame_local_vars</a> (<a class="code" href="frame_8c.html#a8b714a78478670e14a297eba8d1a9915">get_selected_frame</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;No frame selected.&quot;</span>)),
<a name="l02090"></a>02090                           0, <a class="code" href="main_8c.html#a41a2b997ba5454df787d61f051dd918c">gdb_stdout</a>);
<a name="l02091"></a>02091 }
<a name="l02092"></a>02092 
<a name="l02093"></a>02093 <span class="comment">/* Iterate over all the argument variables in block B.</span>
<a name="l02094"></a>02094 <span class="comment"></span>
<a name="l02095"></a>02095 <span class="comment">   Returns 1 if any argument was walked; 0 otherwise.  */</span>
<a name="l02096"></a>02096 
<a name="l02097"></a>02097 <span class="keywordtype">void</span>
<a name="l02098"></a><a class="code" href="stack_8h.html#aeae52a622141b0a1d939e03fb7b3d670">02098</a> <a class="code" href="stack_8c.html#a0dbcc369048c01fee5b2c916e751a2ad">iterate_over_block_arg_vars</a> (<span class="keyword">struct</span> <a class="code" href="structblock.html">block</a> *b,
<a name="l02099"></a>02099                              <a class="code" href="stack_8h.html#a2d82addb4422aaefc7e7f86bfdc4cee1">iterate_over_block_arg_local_vars_cb</a> cb,
<a name="l02100"></a>02100                              <span class="keywordtype">void</span> *cb_data)
<a name="l02101"></a>02101 {
<a name="l02102"></a>02102   <span class="keyword">struct </span><a class="code" href="structblock__iterator.html">block_iterator</a> iter;
<a name="l02103"></a>02103   <span class="keyword">struct </span><a class="code" href="structsymbol.html">symbol</a> *sym, *sym2;
<a name="l02104"></a>02104 
<a name="l02105"></a>02105   <a class="code" href="block_8h.html#a0ffb1db4f5e3a6fd58700861fce48c2b">ALL_BLOCK_SYMBOLS</a> (b, iter, sym)
<a name="l02106"></a>02106     {
<a name="l02107"></a>02107       <span class="comment">/* Don&#39;t worry about things which aren&#39;t arguments.  */</span>
<a name="l02108"></a>02108       <span class="keywordflow">if</span> (<a class="code" href="symtab_8h.html#ab3de6f2d8c380d3ca8bef520b1b4dfb9">SYMBOL_IS_ARGUMENT</a> (sym))
<a name="l02109"></a>02109         {
<a name="l02110"></a>02110           <span class="comment">/* We have to look up the symbol because arguments can have</span>
<a name="l02111"></a>02111 <span class="comment">             two entries (one a parameter, one a local) and the one we</span>
<a name="l02112"></a>02112 <span class="comment">             want is the local, which lookup_symbol will find for us.</span>
<a name="l02113"></a>02113 <span class="comment">             This includes gcc1 (not gcc2) on the sparc when passing a</span>
<a name="l02114"></a>02114 <span class="comment">             small structure and gcc2 when the argument type is float</span>
<a name="l02115"></a>02115 <span class="comment">             and it is passed as a double and converted to float by</span>
<a name="l02116"></a>02116 <span class="comment">             the prologue (in the latter case the type of the LOC_ARG</span>
<a name="l02117"></a>02117 <span class="comment">             symbol is double and the type of the LOC_LOCAL symbol is</span>
<a name="l02118"></a>02118 <span class="comment">             float).  There are also LOC_ARG/LOC_REGISTER pairs which</span>
<a name="l02119"></a>02119 <span class="comment">             are not combined in symbol-reading.  */</span>
<a name="l02120"></a>02120 
<a name="l02121"></a>02121           sym2 = <a class="code" href="symtab_8c.html#a8a5c3f803198aed047a55c0e4f61b315">lookup_symbol</a> (<a class="code" href="symtab_8h.html#a956b56288511a18b855d8a263d60e87f">SYMBOL_LINKAGE_NAME</a> (sym),
<a name="l02122"></a>02122                                 b, <a class="code" href="symtab_8h.html#a5c384cef81c5f50f32caadbfd6974a1aa15693f9d844450eb4bfd4b37114f4aed">VAR_DOMAIN</a>, NULL);
<a name="l02123"></a>02123           (*cb) (<a class="code" href="symtab_8h.html#ac7f4cb1648125545fbd0e4f13b0c572c">SYMBOL_PRINT_NAME</a> (sym), sym2, cb_data);
<a name="l02124"></a>02124         }
<a name="l02125"></a>02125     }
<a name="l02126"></a>02126 }
<a name="l02127"></a>02127 
<a name="l02128"></a>02128 <span class="comment">/* Print all argument variables of the function of FRAME.</span>
<a name="l02129"></a>02129 <span class="comment">   Print them with values to STREAM.</span>
<a name="l02130"></a>02130 <span class="comment"></span>
<a name="l02131"></a>02131 <span class="comment">   This function will invalidate FRAME.  */</span>
<a name="l02132"></a>02132 
<a name="l02133"></a>02133 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02134"></a><a class="code" href="stack_8c.html#a6f694fbb40b824be83154b23f2d647cb">02134</a> <a class="code" href="stack_8c.html#a6f694fbb40b824be83154b23f2d647cb">print_frame_arg_vars</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame, <span class="keyword">struct</span> <a class="code" href="structui__file.html">ui_file</a> *stream)
<a name="l02135"></a>02135 {
<a name="l02136"></a>02136   <span class="keyword">struct </span><a class="code" href="structprint__variable__and__value__data.html">print_variable_and_value_data</a> cb_data;
<a name="l02137"></a>02137   <span class="keyword">struct </span><a class="code" href="structsymbol.html">symbol</a> *<a class="code" href="remote-fileio_8c.html#a7e97efb32ba66c3f1141bdbb82529d20">func</a>;
<a name="l02138"></a>02138   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc;
<a name="l02139"></a>02139 
<a name="l02140"></a>02140   <span class="keywordflow">if</span> (!<a class="code" href="frame_8c.html#af87888489ef191ac98c292350017e84e">get_frame_pc_if_available</a> (frame, &amp;pc))
<a name="l02141"></a>02141     {
<a name="l02142"></a>02142       <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (stream, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;PC unavailable, cannot determine args.\n&quot;</span>));
<a name="l02143"></a>02143       <span class="keywordflow">return</span>;
<a name="l02144"></a>02144     }
<a name="l02145"></a>02145 
<a name="l02146"></a>02146   func = <a class="code" href="blockframe_8c.html#a901685553101d7f605ab9f3d7d328cd6">get_frame_function</a> (frame);
<a name="l02147"></a>02147   <span class="keywordflow">if</span> (func == NULL)
<a name="l02148"></a>02148     {
<a name="l02149"></a>02149       <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (stream, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;No symbol table info available.\n&quot;</span>));
<a name="l02150"></a>02150       <span class="keywordflow">return</span>;
<a name="l02151"></a>02151     }
<a name="l02152"></a>02152 
<a name="l02153"></a>02153   cb_data.<a class="code" href="structprint__variable__and__value__data.html#a43825fc7feb7a8fe94b6512afed778de">frame_id</a> = <a class="code" href="frame_8c.html#a4d69effe10c03fa7c702d490081012bf">get_frame_id</a> (frame);
<a name="l02154"></a>02154   cb_data.<a class="code" href="structprint__variable__and__value__data.html#aa3f4a1e94cea80f7f4b85ec7df6ef54d">num_tabs</a> = 0;
<a name="l02155"></a>02155   cb_data.<a class="code" href="structprint__variable__and__value__data.html#ae30fb2fdc74c90317eead9c7edf169f1">stream</a> = <a class="code" href="main_8c.html#a41a2b997ba5454df787d61f051dd918c">gdb_stdout</a>;
<a name="l02156"></a>02156   cb_data.<a class="code" href="structprint__variable__and__value__data.html#a3c48b68e5ac1ac5f8c871e6a2a5cc3d7">values_printed</a> = 0;
<a name="l02157"></a>02157 
<a name="l02158"></a>02158   <a class="code" href="stack_8c.html#a0dbcc369048c01fee5b2c916e751a2ad">iterate_over_block_arg_vars</a> (<a class="code" href="symtab_8h.html#a2c83ea82b28e9a9d8f9b655c2d502593">SYMBOL_BLOCK_VALUE</a> (func),
<a name="l02159"></a>02159                                <a class="code" href="stack_8c.html#a09a36d94ceea7b13b14a1e25ed502c3d">do_print_variable_and_value</a>, &amp;cb_data);
<a name="l02160"></a>02160 
<a name="l02161"></a>02161   <span class="comment">/* do_print_variable_and_value invalidates FRAME.  */</span>
<a name="l02162"></a>02162   frame = NULL;
<a name="l02163"></a>02163 
<a name="l02164"></a>02164   <span class="keywordflow">if</span> (!cb_data.<a class="code" href="structprint__variable__and__value__data.html#a3c48b68e5ac1ac5f8c871e6a2a5cc3d7">values_printed</a>)
<a name="l02165"></a>02165     <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (stream, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;No arguments.\n&quot;</span>));
<a name="l02166"></a>02166 }
<a name="l02167"></a>02167 
<a name="l02168"></a>02168 <span class="keywordtype">void</span>
<a name="l02169"></a><a class="code" href="stack_8c.html#a7363bbded72c742b552bfdd10d58f499">02169</a> <a class="code" href="frame_8h.html#a5b54190e4a3e837cf5a830bf3e646c08">args_info</a> (<span class="keywordtype">char</span> *<a class="code" href="corelow_8c.html#ac54c1aef0966c38fc155dec95a38db50">ignore</a>, <span class="keywordtype">int</span> from_tty)
<a name="l02170"></a>02170 {
<a name="l02171"></a>02171   <a class="code" href="stack_8c.html#a6f694fbb40b824be83154b23f2d647cb">print_frame_arg_vars</a> (<a class="code" href="frame_8c.html#a8b714a78478670e14a297eba8d1a9915">get_selected_frame</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;No frame selected.&quot;</span>)),
<a name="l02172"></a>02172                         <a class="code" href="main_8c.html#a41a2b997ba5454df787d61f051dd918c">gdb_stdout</a>);
<a name="l02173"></a>02173 }
<a name="l02174"></a>02174 
<a name="l02175"></a>02175 
<a name="l02176"></a>02176 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02177"></a><a class="code" href="stack_8c.html#ad43c978923b7e02335ff99faa8a647e2">02177</a> <a class="code" href="stack_8c.html#ad43c978923b7e02335ff99faa8a647e2">args_plus_locals_info</a> (<span class="keywordtype">char</span> *<a class="code" href="corelow_8c.html#ac54c1aef0966c38fc155dec95a38db50">ignore</a>, <span class="keywordtype">int</span> from_tty)
<a name="l02178"></a>02178 {
<a name="l02179"></a>02179   <a class="code" href="frame_8h.html#a5b54190e4a3e837cf5a830bf3e646c08">args_info</a> (ignore, from_tty);
<a name="l02180"></a>02180   <a class="code" href="frame_8h.html#ac8096db688dc13edd29e377c964d826d">locals_info</a> (ignore, from_tty);
<a name="l02181"></a>02181 }
<a name="l02182"></a>02182 
<a name="l02183"></a>02183 
<a name="l02184"></a>02184 <span class="comment">/* Select frame FRAME.  Also print the stack frame and show the source</span>
<a name="l02185"></a>02185 <span class="comment">   if this is the tui version.  */</span>
<a name="l02186"></a>02186 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02187"></a><a class="code" href="stack_8c.html#abdb4b832775d0b983ef9ed4856abee81">02187</a> <a class="code" href="stack_8c.html#abdb4b832775d0b983ef9ed4856abee81">select_and_print_frame</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame)
<a name="l02188"></a>02188 {
<a name="l02189"></a>02189   <a class="code" href="frame_8c.html#a400fa273ac86863322cdc65683ef2356">select_frame</a> (frame);
<a name="l02190"></a>02190   <span class="keywordflow">if</span> (frame)
<a name="l02191"></a>02191     <a class="code" href="frame_8h.html#a849748a17da39e76cc4648e83c64c344">print_stack_frame</a> (frame, 1, <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4a706a5abb481e7684ba3944582daf6727">SRC_AND_LOC</a>, 1);
<a name="l02192"></a>02192 }
<a name="l02193"></a>02193 
<a name="l02194"></a>02194 <span class="comment">/* Return the symbol-block in which the selected frame is executing.</span>
<a name="l02195"></a>02195 <span class="comment">   Can return zero under various legitimate circumstances.</span>
<a name="l02196"></a>02196 <span class="comment"></span>
<a name="l02197"></a>02197 <span class="comment">   If ADDR_IN_BLOCK is non-zero, set *ADDR_IN_BLOCK to the relevant</span>
<a name="l02198"></a>02198 <span class="comment">   code address within the block returned.  We use this to decide</span>
<a name="l02199"></a>02199 <span class="comment">   which macros are in scope.  */</span>
<a name="l02200"></a>02200 
<a name="l02201"></a>02201 <span class="keyword">struct </span><a class="code" href="structblock.html">block</a> *
<a name="l02202"></a><a class="code" href="stack_8c.html#a91efbdcf182d840c28d378def97cfc23">02202</a> <a class="code" href="frame_8h.html#a91efbdcf182d840c28d378def97cfc23">get_selected_block</a> (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> *addr_in_block)
<a name="l02203"></a>02203 {
<a name="l02204"></a>02204   <span class="keywordflow">if</span> (!<a class="code" href="frame_8c.html#ad1e8bd5ac45df219a168640934f891cc">has_stack_frames</a> ())
<a name="l02205"></a>02205     <span class="keywordflow">return</span> 0;
<a name="l02206"></a>02206 
<a name="l02207"></a>02207   <span class="keywordflow">return</span> <a class="code" href="blockframe_8c.html#a48cd98610b3a7f167334b616336cadfb">get_frame_block</a> (<a class="code" href="frame_8c.html#a8b714a78478670e14a297eba8d1a9915">get_selected_frame</a> (NULL), addr_in_block);
<a name="l02208"></a>02208 }
<a name="l02209"></a>02209 
<a name="l02210"></a>02210 <span class="comment">/* Find a frame a certain number of levels away from FRAME.</span>
<a name="l02211"></a>02211 <span class="comment">   LEVEL_OFFSET_PTR points to an int containing the number of levels.</span>
<a name="l02212"></a>02212 <span class="comment">   Positive means go to earlier frames (up); negative, the reverse.</span>
<a name="l02213"></a>02213 <span class="comment">   The int that contains the number of levels is counted toward</span>
<a name="l02214"></a>02214 <span class="comment">   zero as the frames for those levels are found.</span>
<a name="l02215"></a>02215 <span class="comment">   If the top or bottom frame is reached, that frame is returned,</span>
<a name="l02216"></a>02216 <span class="comment">   but the final value of *LEVEL_OFFSET_PTR is nonzero and indicates</span>
<a name="l02217"></a>02217 <span class="comment">   how much farther the original request asked to go.  */</span>
<a name="l02218"></a>02218 
<a name="l02219"></a>02219 <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *
<a name="l02220"></a><a class="code" href="stack_8c.html#a9c67d30a43b9ad7112ec9f77b9c1b9db">02220</a> <a class="code" href="frame_8h.html#a11bc71bb842ee9f30b990aec07f4399a">find_relative_frame</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame, <span class="keywordtype">int</span> *level_offset_ptr)
<a name="l02221"></a>02221 {
<a name="l02222"></a>02222   <span class="comment">/* Going up is simple: just call get_prev_frame enough times or</span>
<a name="l02223"></a>02223 <span class="comment">     until the initial frame is reached.  */</span>
<a name="l02224"></a>02224   <span class="keywordflow">while</span> (*level_offset_ptr &gt; 0)
<a name="l02225"></a>02225     {
<a name="l02226"></a>02226       <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *<a class="code" href="structframe__info.html#a6860ebd4f5d35ac78a8af1f17596c75f">prev</a> = <a class="code" href="frame_8c.html#a7dc158f329065de426029f24f5578838">get_prev_frame</a> (frame);
<a name="l02227"></a>02227 
<a name="l02228"></a>02228       <span class="keywordflow">if</span> (!prev)
<a name="l02229"></a>02229         <span class="keywordflow">break</span>;
<a name="l02230"></a>02230       (*level_offset_ptr)--;
<a name="l02231"></a>02231       frame = <a class="code" href="structframe__info.html#a6860ebd4f5d35ac78a8af1f17596c75f">prev</a>;
<a name="l02232"></a>02232     }
<a name="l02233"></a>02233 
<a name="l02234"></a>02234   <span class="comment">/* Going down is just as simple.  */</span>
<a name="l02235"></a>02235   <span class="keywordflow">while</span> (*level_offset_ptr &lt; 0)
<a name="l02236"></a>02236     {
<a name="l02237"></a>02237       <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *<a class="code" href="structframe__info.html#a532e83aad85ef2a6fffe6b8c40661c35">next</a> = <a class="code" href="frame_8c.html#a80df189cf511651209609685d5380340">get_next_frame</a> (frame);
<a name="l02238"></a>02238 
<a name="l02239"></a>02239       <span class="keywordflow">if</span> (!next)
<a name="l02240"></a>02240         <span class="keywordflow">break</span>;
<a name="l02241"></a>02241       (*level_offset_ptr)++;
<a name="l02242"></a>02242       frame = <a class="code" href="structframe__info.html#a532e83aad85ef2a6fffe6b8c40661c35">next</a>;
<a name="l02243"></a>02243     }
<a name="l02244"></a>02244 
<a name="l02245"></a>02245   <span class="keywordflow">return</span> frame;
<a name="l02246"></a>02246 }
<a name="l02247"></a>02247 
<a name="l02248"></a>02248 <span class="comment">/* The &quot;select_frame&quot; command.  With no argument this is a NOP.</span>
<a name="l02249"></a>02249 <span class="comment">   Select the frame at level LEVEL_EXP if it is a valid level.</span>
<a name="l02250"></a>02250 <span class="comment">   Otherwise, treat LEVEL_EXP as an address expression and select it.</span>
<a name="l02251"></a>02251 <span class="comment"></span>
<a name="l02252"></a>02252 <span class="comment">   See parse_frame_specification for more info on proper frame</span>
<a name="l02253"></a>02253 <span class="comment">   expressions.  */</span>
<a name="l02254"></a>02254 
<a name="l02255"></a>02255 <span class="keywordtype">void</span>
<a name="l02256"></a><a class="code" href="stack_8h.html#adff8e79f6ddb07d5747fc5e93945d302">02256</a> <a class="code" href="stack_8c.html#adff8e79f6ddb07d5747fc5e93945d302">select_frame_command</a> (<span class="keywordtype">char</span> *level_exp, <span class="keywordtype">int</span> from_tty)
<a name="l02257"></a>02257 {
<a name="l02258"></a>02258   <a class="code" href="frame_8c.html#a400fa273ac86863322cdc65683ef2356">select_frame</a> (<a class="code" href="stack_8c.html#ae19e426088fdace128bd5fccd5fd3c07">parse_frame_specification_1</a> (level_exp, <span class="stringliteral">&quot;No stack.&quot;</span>, NULL));
<a name="l02259"></a>02259 }
<a name="l02260"></a>02260 
<a name="l02261"></a>02261 <span class="comment">/* The &quot;frame&quot; command.  With no argument, print the selected frame</span>
<a name="l02262"></a>02262 <span class="comment">   briefly.  With an argument, behave like select_frame and then print</span>
<a name="l02263"></a>02263 <span class="comment">   the selected frame.  */</span>
<a name="l02264"></a>02264 
<a name="l02265"></a>02265 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02266"></a><a class="code" href="stack_8c.html#a5a1ba39ef510a1f69e34119f0029570c">02266</a> <a class="code" href="stack_8c.html#a5a1ba39ef510a1f69e34119f0029570c">frame_command</a> (<span class="keywordtype">char</span> *level_exp, <span class="keywordtype">int</span> from_tty)
<a name="l02267"></a>02267 {
<a name="l02268"></a>02268   <a class="code" href="stack_8c.html#adff8e79f6ddb07d5747fc5e93945d302">select_frame_command</a> (level_exp, from_tty);
<a name="l02269"></a>02269   <a class="code" href="frame_8h.html#a849748a17da39e76cc4648e83c64c344">print_stack_frame</a> (<a class="code" href="frame_8c.html#a8b714a78478670e14a297eba8d1a9915">get_selected_frame</a> (NULL), 1, <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4a706a5abb481e7684ba3944582daf6727">SRC_AND_LOC</a>, 1);
<a name="l02270"></a>02270 }
<a name="l02271"></a>02271 
<a name="l02272"></a>02272 <span class="comment">/* The XDB Compatibility command to print the current frame.  */</span>
<a name="l02273"></a>02273 
<a name="l02274"></a>02274 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02275"></a><a class="code" href="stack_8c.html#a71c81882ebc1bf5095fa3462d6cabf2b">02275</a> <a class="code" href="stack_8c.html#a71c81882ebc1bf5095fa3462d6cabf2b">current_frame_command</a> (<span class="keywordtype">char</span> *level_exp, <span class="keywordtype">int</span> from_tty)
<a name="l02276"></a>02276 {
<a name="l02277"></a>02277   <a class="code" href="frame_8h.html#a849748a17da39e76cc4648e83c64c344">print_stack_frame</a> (<a class="code" href="frame_8c.html#a8b714a78478670e14a297eba8d1a9915">get_selected_frame</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;No stack.&quot;</span>)), 1, <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4a706a5abb481e7684ba3944582daf6727">SRC_AND_LOC</a>, 1);
<a name="l02278"></a>02278 }
<a name="l02279"></a>02279 
<a name="l02280"></a>02280 <span class="comment">/* Select the frame up one or COUNT_EXP stack levels from the</span>
<a name="l02281"></a>02281 <span class="comment">   previously selected frame, and print it briefly.  */</span>
<a name="l02282"></a>02282 
<a name="l02283"></a>02283 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02284"></a><a class="code" href="stack_8c.html#ab7f10c1b453b222c55ef95f8688a00a2">02284</a> <a class="code" href="stack_8c.html#ab7f10c1b453b222c55ef95f8688a00a2">up_silently_base</a> (<span class="keywordtype">char</span> *count_exp)
<a name="l02285"></a>02285 {
<a name="l02286"></a>02286   <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *frame;
<a name="l02287"></a>02287   <span class="keywordtype">int</span> count = 1;
<a name="l02288"></a>02288 
<a name="l02289"></a>02289   <span class="keywordflow">if</span> (count_exp)
<a name="l02290"></a>02290     count = <a class="code" href="eval_8c.html#a8c10c34c4f91482249243e53ab7d16b7">parse_and_eval_long</a> (count_exp);
<a name="l02291"></a>02291 
<a name="l02292"></a>02292   frame = <a class="code" href="frame_8h.html#a11bc71bb842ee9f30b990aec07f4399a">find_relative_frame</a> (<a class="code" href="frame_8c.html#a8b714a78478670e14a297eba8d1a9915">get_selected_frame</a> (<span class="stringliteral">&quot;No stack.&quot;</span>), &amp;count);
<a name="l02293"></a>02293   <span class="keywordflow">if</span> (count != 0 &amp;&amp; count_exp == NULL)
<a name="l02294"></a>02294     <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Initial frame selected; you cannot go up.&quot;</span>));
<a name="l02295"></a>02295   <a class="code" href="frame_8c.html#a400fa273ac86863322cdc65683ef2356">select_frame</a> (frame);
<a name="l02296"></a>02296 }
<a name="l02297"></a>02297 
<a name="l02298"></a>02298 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02299"></a><a class="code" href="stack_8c.html#aaac0172d61f43d53837010005081a695">02299</a> <a class="code" href="stack_8c.html#aaac0172d61f43d53837010005081a695">up_silently_command</a> (<span class="keywordtype">char</span> *count_exp, <span class="keywordtype">int</span> from_tty)
<a name="l02300"></a>02300 {
<a name="l02301"></a>02301   <a class="code" href="stack_8c.html#ab7f10c1b453b222c55ef95f8688a00a2">up_silently_base</a> (count_exp);
<a name="l02302"></a>02302 }
<a name="l02303"></a>02303 
<a name="l02304"></a>02304 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02305"></a><a class="code" href="stack_8c.html#af218d2a0eadbb92c54c9a56f00459b9b">02305</a> <a class="code" href="stack_8c.html#af218d2a0eadbb92c54c9a56f00459b9b">up_command</a> (<span class="keywordtype">char</span> *count_exp, <span class="keywordtype">int</span> from_tty)
<a name="l02306"></a>02306 {
<a name="l02307"></a>02307   <a class="code" href="stack_8c.html#ab7f10c1b453b222c55ef95f8688a00a2">up_silently_base</a> (count_exp);
<a name="l02308"></a>02308   <a class="code" href="frame_8h.html#a849748a17da39e76cc4648e83c64c344">print_stack_frame</a> (<a class="code" href="frame_8c.html#a8b714a78478670e14a297eba8d1a9915">get_selected_frame</a> (NULL), 1, <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4a706a5abb481e7684ba3944582daf6727">SRC_AND_LOC</a>, 1);
<a name="l02309"></a>02309 }
<a name="l02310"></a>02310 
<a name="l02311"></a>02311 <span class="comment">/* Select the frame down one or COUNT_EXP stack levels from the previously</span>
<a name="l02312"></a>02312 <span class="comment">   selected frame, and print it briefly.  */</span>
<a name="l02313"></a>02313 
<a name="l02314"></a>02314 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02315"></a><a class="code" href="stack_8c.html#a549edbdecc6d1af9aab5a4d77b7d1b94">02315</a> <a class="code" href="stack_8c.html#a549edbdecc6d1af9aab5a4d77b7d1b94">down_silently_base</a> (<span class="keywordtype">char</span> *count_exp)
<a name="l02316"></a>02316 {
<a name="l02317"></a>02317   <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *frame;
<a name="l02318"></a>02318   <span class="keywordtype">int</span> count = -1;
<a name="l02319"></a>02319 
<a name="l02320"></a>02320   <span class="keywordflow">if</span> (count_exp)
<a name="l02321"></a>02321     count = -<a class="code" href="eval_8c.html#a8c10c34c4f91482249243e53ab7d16b7">parse_and_eval_long</a> (count_exp);
<a name="l02322"></a>02322 
<a name="l02323"></a>02323   frame = <a class="code" href="frame_8h.html#a11bc71bb842ee9f30b990aec07f4399a">find_relative_frame</a> (<a class="code" href="frame_8c.html#a8b714a78478670e14a297eba8d1a9915">get_selected_frame</a> (<span class="stringliteral">&quot;No stack.&quot;</span>), &amp;count);
<a name="l02324"></a>02324   <span class="keywordflow">if</span> (count != 0 &amp;&amp; count_exp == NULL)
<a name="l02325"></a>02325     {
<a name="l02326"></a>02326       <span class="comment">/* We only do this if COUNT_EXP is not specified.  That way</span>
<a name="l02327"></a>02327 <span class="comment">         &quot;down&quot; means to really go down (and let me know if that is</span>
<a name="l02328"></a>02328 <span class="comment">         impossible), but &quot;down 9999&quot; can be used to mean go all the</span>
<a name="l02329"></a>02329 <span class="comment">         way down without getting an error.  */</span>
<a name="l02330"></a>02330 
<a name="l02331"></a>02331       <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Bottom (innermost) frame selected; you cannot go down.&quot;</span>));
<a name="l02332"></a>02332     }
<a name="l02333"></a>02333 
<a name="l02334"></a>02334   <a class="code" href="frame_8c.html#a400fa273ac86863322cdc65683ef2356">select_frame</a> (frame);
<a name="l02335"></a>02335 }
<a name="l02336"></a>02336 
<a name="l02337"></a>02337 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02338"></a><a class="code" href="stack_8c.html#a0ee777b81c485545110152792911a572">02338</a> <a class="code" href="stack_8c.html#a0ee777b81c485545110152792911a572">down_silently_command</a> (<span class="keywordtype">char</span> *count_exp, <span class="keywordtype">int</span> from_tty)
<a name="l02339"></a>02339 {
<a name="l02340"></a>02340   <a class="code" href="stack_8c.html#a549edbdecc6d1af9aab5a4d77b7d1b94">down_silently_base</a> (count_exp);
<a name="l02341"></a>02341 }
<a name="l02342"></a>02342 
<a name="l02343"></a>02343 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02344"></a><a class="code" href="stack_8c.html#a88f26e64a5be64a499259050accc747b">02344</a> <a class="code" href="stack_8c.html#a88f26e64a5be64a499259050accc747b">down_command</a> (<span class="keywordtype">char</span> *count_exp, <span class="keywordtype">int</span> from_tty)
<a name="l02345"></a>02345 {
<a name="l02346"></a>02346   <a class="code" href="stack_8c.html#a549edbdecc6d1af9aab5a4d77b7d1b94">down_silently_base</a> (count_exp);
<a name="l02347"></a>02347   <a class="code" href="frame_8h.html#a849748a17da39e76cc4648e83c64c344">print_stack_frame</a> (<a class="code" href="frame_8c.html#a8b714a78478670e14a297eba8d1a9915">get_selected_frame</a> (NULL), 1, <a class="code" href="frame_8h.html#a2431f51963af6773c12937f24f7525a4a706a5abb481e7684ba3944582daf6727">SRC_AND_LOC</a>, 1);
<a name="l02348"></a>02348 }
<a name="l02349"></a>02349 
<a name="l02350"></a>02350 
<a name="l02351"></a>02351 <span class="keywordtype">void</span>
<a name="l02352"></a><a class="code" href="stack_8c.html#a3f048a5bd51b751c686df5afbc2e3fe3">02352</a> <a class="code" href="frame_8h.html#ab5e52b8372e53e7f7099b0bee2413a6a">return_command</a> (<span class="keywordtype">char</span> *retval_exp, <span class="keywordtype">int</span> from_tty)
<a name="l02353"></a>02353 {
<a name="l02354"></a>02354   <span class="comment">/* Initialize it just to avoid a GCC false warning.  */</span>
<a name="l02355"></a>02355   <span class="keyword">enum</span> <a class="code" href="defs_8h.html#ad73ff2db888df8f297b907f7093082a5">return_value_convention</a> rv_conv = <a class="code" href="defs_8h.html#ad73ff2db888df8f297b907f7093082a5a1fab6a0bfd44af88ba17a143673dc937">RETURN_VALUE_STRUCT_CONVENTION</a>;
<a name="l02356"></a>02356   <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *thisframe;
<a name="l02357"></a>02357   <span class="keyword">struct </span>gdbarch *gdbarch;
<a name="l02358"></a>02358   <span class="keyword">struct </span><a class="code" href="structsymbol.html">symbol</a> *thisfun;
<a name="l02359"></a>02359   <span class="keyword">struct </span><a class="code" href="structvalue.html">value</a> *return_value = NULL;
<a name="l02360"></a>02360   <span class="keyword">struct </span><a class="code" href="structvalue.html">value</a> *<span class="keyword">function</span> = NULL;
<a name="l02361"></a>02361   <span class="keyword">const</span> <span class="keywordtype">char</span> *query_prefix = <span class="stringliteral">&quot;&quot;</span>;
<a name="l02362"></a>02362 
<a name="l02363"></a>02363   thisframe = <a class="code" href="frame_8c.html#a8b714a78478670e14a297eba8d1a9915">get_selected_frame</a> (<span class="stringliteral">&quot;No selected frame.&quot;</span>);
<a name="l02364"></a>02364   thisfun = <a class="code" href="blockframe_8c.html#a901685553101d7f605ab9f3d7d328cd6">get_frame_function</a> (thisframe);
<a name="l02365"></a>02365   gdbarch = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (thisframe);
<a name="l02366"></a>02366 
<a name="l02367"></a>02367   <span class="keywordflow">if</span> (<a class="code" href="frame_8c.html#a8f965671d7b55f002c993385024a2fdb">get_frame_type</a> (<a class="code" href="frame_8c.html#a5ab254510728049878a232ed1b889820">get_current_frame</a> ()) == <a class="code" href="frame_8h.html#a3ca2c0bc7578bf3d337e34b2c08a6c5faec50e9f25cd04e445a8c7b56ea98c790">INLINE_FRAME</a>)
<a name="l02368"></a>02368     <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Can not force return from an inlined function.&quot;</span>));
<a name="l02369"></a>02369 
<a name="l02370"></a>02370   <span class="comment">/* Compute the return value.  If the computation triggers an error,</span>
<a name="l02371"></a>02371 <span class="comment">     let it bail.  If the return type can&#39;t be handled, set</span>
<a name="l02372"></a>02372 <span class="comment">     RETURN_VALUE to NULL, and QUERY_PREFIX to an informational</span>
<a name="l02373"></a>02373 <span class="comment">     message.  */</span>
<a name="l02374"></a>02374   <span class="keywordflow">if</span> (retval_exp)
<a name="l02375"></a>02375     {
<a name="l02376"></a>02376       <span class="keyword">struct </span><a class="code" href="structexpression.html">expression</a> *retval_expr = <a class="code" href="expression_8h.html#a286599225dbfecf78c83d1eb5261f25a">parse_expression</a> (retval_exp);
<a name="l02377"></a>02377       <span class="keyword">struct </span><a class="code" href="structcleanup.html">cleanup</a> *old_chain = <a class="code" href="cleanups_8c.html#a3d418f8af424aec399898c2d48b26224">make_cleanup</a> (<a class="code" href="common-utils_8c.html#a976e14808b9247ec952c262553f09f8f">xfree</a>, retval_expr);
<a name="l02378"></a>02378       <span class="keyword">struct </span><a class="code" href="structtype.html">type</a> *return_type = NULL;
<a name="l02379"></a>02379 
<a name="l02380"></a>02380       <span class="comment">/* Compute the return value.  Should the computation fail, this</span>
<a name="l02381"></a>02381 <span class="comment">         call throws an error.  */</span>
<a name="l02382"></a>02382       return_value = <a class="code" href="eval_8c.html#ab50151ccba3ea3184c114121d6bed422">evaluate_expression</a> (retval_expr);
<a name="l02383"></a>02383 
<a name="l02384"></a>02384       <span class="comment">/* Cast return value to the return type of the function.  Should</span>
<a name="l02385"></a>02385 <span class="comment">         the cast fail, this call throws an error.  */</span>
<a name="l02386"></a>02386       <span class="keywordflow">if</span> (thisfun != NULL)
<a name="l02387"></a>02387         return_type = <a class="code" href="gdbtypes_8h.html#a87a33d723acd28a033e63c4297c6c916">TYPE_TARGET_TYPE</a> (<a class="code" href="symtab_8h.html#aadfeb02c4b5fc2b6764ad32eaccf0e58">SYMBOL_TYPE</a> (thisfun));
<a name="l02388"></a>02388       <span class="keywordflow">if</span> (return_type == NULL)
<a name="l02389"></a>02389         {
<a name="l02390"></a>02390           <span class="keywordflow">if</span> (retval_expr-&gt;<a class="code" href="structexpression.html#a121cbb7647db0430c9e217dbcd27021f">elts</a>[0].<a class="code" href="unionexp__element.html#a732546b7148c98393e390e52d954bc83">opcode</a> != UNOP_CAST
<a name="l02391"></a>02391               &amp;&amp; retval_expr-&gt;<a class="code" href="structexpression.html#a121cbb7647db0430c9e217dbcd27021f">elts</a>[0].<a class="code" href="unionexp__element.html#a732546b7148c98393e390e52d954bc83">opcode</a> != UNOP_CAST_TYPE)
<a name="l02392"></a>02392             <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Return value type not available for selected &quot;</span>
<a name="l02393"></a>02393                      <span class="stringliteral">&quot;stack frame.\n&quot;</span>
<a name="l02394"></a>02394                      <span class="stringliteral">&quot;Please use an explicit cast of the value to return.&quot;</span>));
<a name="l02395"></a>02395           return_type = <a class="code" href="value_8c.html#a263a4c0bee0b0df41074b952d3c121d0">value_type</a> (return_value);
<a name="l02396"></a>02396         }
<a name="l02397"></a>02397       <a class="code" href="cleanups_8c.html#a8b313a4f1c613973ea444e5fa54976f8">do_cleanups</a> (old_chain);
<a name="l02398"></a>02398       <a class="code" href="gdbtypes_8h.html#ae2f9348c644babaa9038b4dc18bffaac">CHECK_TYPEDEF</a> (return_type);
<a name="l02399"></a>02399       return_value = <a class="code" href="valops_8c.html#a458c471119ca0e007cecaa24fe6b1333">value_cast</a> (return_type, return_value);
<a name="l02400"></a>02400 
<a name="l02401"></a>02401       <span class="comment">/* Make sure the value is fully evaluated.  It may live in the</span>
<a name="l02402"></a>02402 <span class="comment">         stack frame we&#39;re about to pop.  */</span>
<a name="l02403"></a>02403       <span class="keywordflow">if</span> (<a class="code" href="value_8c.html#aa60bc8ecf77867a2d16bec57a4ccf983">value_lazy</a> (return_value))
<a name="l02404"></a>02404         <a class="code" href="value_8c.html#a27ee2d69678b458a82ac350e2e2132d8">value_fetch_lazy</a> (return_value);
<a name="l02405"></a>02405 
<a name="l02406"></a>02406       <span class="keywordflow">if</span> (thisfun != NULL)
<a name="l02407"></a>02407         <span class="keyword">function</span> = <a class="code" href="findvar_8c.html#afeb191a780ccc9cc2d95378bc1413751">read_var_value</a> (thisfun, thisframe);
<a name="l02408"></a>02408 
<a name="l02409"></a>02409       rv_conv = <a class="code" href="defs_8h.html#ad73ff2db888df8f297b907f7093082a5a0cd14b7546740080384acc0c7e5caf3b">RETURN_VALUE_REGISTER_CONVENTION</a>;
<a name="l02410"></a>02410       <span class="keywordflow">if</span> (<a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (return_type) == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462ad142a78789548b777dee1a3313e3e64f">TYPE_CODE_VOID</a>)
<a name="l02411"></a>02411         <span class="comment">/* If the return-type is &quot;void&quot;, don&#39;t try to find the</span>
<a name="l02412"></a>02412 <span class="comment">           return-value&#39;s location.  However, do still evaluate the</span>
<a name="l02413"></a>02413 <span class="comment">           return expression so that, even when the expression result</span>
<a name="l02414"></a>02414 <span class="comment">           is discarded, side effects such as &quot;return i++&quot; still</span>
<a name="l02415"></a>02415 <span class="comment">           occur.  */</span>
<a name="l02416"></a>02416         return_value = NULL;
<a name="l02417"></a>02417       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (thisfun != NULL)
<a name="l02418"></a>02418         {
<a name="l02419"></a>02419           rv_conv = <a class="code" href="value_8c.html#a04f957ea106a151de0efe6a6a85cd559">struct_return_convention</a> (gdbarch, <span class="keyword">function</span>, return_type);
<a name="l02420"></a>02420           <span class="keywordflow">if</span> (rv_conv == <a class="code" href="defs_8h.html#ad73ff2db888df8f297b907f7093082a5a1fab6a0bfd44af88ba17a143673dc937">RETURN_VALUE_STRUCT_CONVENTION</a>
<a name="l02421"></a>02421               || rv_conv == <a class="code" href="defs_8h.html#ad73ff2db888df8f297b907f7093082a5a00f278d54cd655da91166f8b58133f7e">RETURN_VALUE_ABI_RETURNS_ADDRESS</a>)
<a name="l02422"></a>02422             {
<a name="l02423"></a>02423               query_prefix = <span class="stringliteral">&quot;The location at which to store the &quot;</span>
<a name="l02424"></a>02424                 <span class="stringliteral">&quot;function&#39;s return value is unknown.\n&quot;</span>
<a name="l02425"></a>02425                 <span class="stringliteral">&quot;If you continue, the return value &quot;</span>
<a name="l02426"></a>02426                 <span class="stringliteral">&quot;that you specified will be ignored.\n&quot;</span>;
<a name="l02427"></a>02427               return_value = NULL;
<a name="l02428"></a>02428             }
<a name="l02429"></a>02429         }
<a name="l02430"></a>02430     }
<a name="l02431"></a>02431 
<a name="l02432"></a>02432   <span class="comment">/* Does an interactive user really want to do this?  Include</span>
<a name="l02433"></a>02433 <span class="comment">     information, such as how well GDB can handle the return value, in</span>
<a name="l02434"></a>02434 <span class="comment">     the query message.  */</span>
<a name="l02435"></a>02435   <span class="keywordflow">if</span> (from_tty)
<a name="l02436"></a>02436     {
<a name="l02437"></a>02437       <span class="keywordtype">int</span> confirmed;
<a name="l02438"></a>02438 
<a name="l02439"></a>02439       <span class="keywordflow">if</span> (thisfun == NULL)
<a name="l02440"></a>02440         confirmed = <a class="code" href="utils_8c.html#a4b369431cd1ce5d26bccf6b79a44c085">query</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;%sMake selected stack frame return now? &quot;</span>),
<a name="l02441"></a>02441                            query_prefix);
<a name="l02442"></a>02442       <span class="keywordflow">else</span>
<a name="l02443"></a>02443         confirmed = <a class="code" href="utils_8c.html#a4b369431cd1ce5d26bccf6b79a44c085">query</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;%sMake %s return now? &quot;</span>), query_prefix,
<a name="l02444"></a>02444                            <a class="code" href="symtab_8h.html#ac7f4cb1648125545fbd0e4f13b0c572c">SYMBOL_PRINT_NAME</a> (thisfun));
<a name="l02445"></a>02445       <span class="keywordflow">if</span> (!confirmed)
<a name="l02446"></a>02446         <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Not confirmed&quot;</span>));
<a name="l02447"></a>02447     }
<a name="l02448"></a>02448 
<a name="l02449"></a>02449   <span class="comment">/* Discard the selected frame and all frames inner-to it.  */</span>
<a name="l02450"></a>02450   <a class="code" href="frame_8c.html#adf6d14c38915e960170d8ccbfb7abc67">frame_pop</a> (<a class="code" href="frame_8c.html#a8b714a78478670e14a297eba8d1a9915">get_selected_frame</a> (NULL));
<a name="l02451"></a>02451 
<a name="l02452"></a>02452   <span class="comment">/* Store RETURN_VALUE in the just-returned register set.  */</span>
<a name="l02453"></a>02453   <span class="keywordflow">if</span> (return_value != NULL)
<a name="l02454"></a>02454     {
<a name="l02455"></a>02455       <span class="keyword">struct </span><a class="code" href="structtype.html">type</a> *return_type = <a class="code" href="value_8c.html#a263a4c0bee0b0df41074b952d3c121d0">value_type</a> (return_value);
<a name="l02456"></a>02456       <span class="keyword">struct </span>gdbarch *gdbarch = <a class="code" href="regcache_8c.html#ad4f6d0cdf256b1fa45d59a6d71b50659">get_regcache_arch</a> (<a class="code" href="regcache_8c.html#a09a386286dc22d882378f639630fecef">get_current_regcache</a> ());
<a name="l02457"></a>02457 
<a name="l02458"></a>02458       <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (rv_conv != <a class="code" href="defs_8h.html#ad73ff2db888df8f297b907f7093082a5a1fab6a0bfd44af88ba17a143673dc937">RETURN_VALUE_STRUCT_CONVENTION</a>
<a name="l02459"></a>02459                   &amp;&amp; rv_conv != <a class="code" href="defs_8h.html#ad73ff2db888df8f297b907f7093082a5a00f278d54cd655da91166f8b58133f7e">RETURN_VALUE_ABI_RETURNS_ADDRESS</a>);
<a name="l02460"></a>02460       <a class="code" href="gdbarch_8c.html#a100c2f8459bbeb9924e135876c7ca730">gdbarch_return_value</a> (gdbarch, <span class="keyword">function</span>, return_type,
<a name="l02461"></a>02461                             <a class="code" href="regcache_8c.html#a09a386286dc22d882378f639630fecef">get_current_regcache</a> (), NULL <span class="comment">/*read*/</span>,
<a name="l02462"></a>02462                             <a class="code" href="value_8c.html#ad41a6de8fde15c01e1ffabb603c4f108">value_contents</a> (return_value) <span class="comment">/*write*/</span>);
<a name="l02463"></a>02463     }
<a name="l02464"></a>02464 
<a name="l02465"></a>02465   <span class="comment">/* If we are at the end of a call dummy now, pop the dummy frame</span>
<a name="l02466"></a>02466 <span class="comment">     too.  */</span>
<a name="l02467"></a>02467   <span class="keywordflow">if</span> (<a class="code" href="frame_8c.html#a8f965671d7b55f002c993385024a2fdb">get_frame_type</a> (<a class="code" href="frame_8c.html#a5ab254510728049878a232ed1b889820">get_current_frame</a> ()) == <a class="code" href="frame_8h.html#a3ca2c0bc7578bf3d337e34b2c08a6c5fa87b564e01c3d113432b047cd72174513">DUMMY_FRAME</a>)
<a name="l02468"></a>02468     <a class="code" href="frame_8c.html#adf6d14c38915e960170d8ccbfb7abc67">frame_pop</a> (<a class="code" href="frame_8c.html#a5ab254510728049878a232ed1b889820">get_current_frame</a> ());
<a name="l02469"></a>02469 
<a name="l02470"></a>02470   <span class="comment">/* If interactive, print the frame that is now current.  */</span>
<a name="l02471"></a>02471   <span class="keywordflow">if</span> (from_tty)
<a name="l02472"></a>02472     <a class="code" href="stack_8c.html#a5a1ba39ef510a1f69e34119f0029570c">frame_command</a> (<span class="stringliteral">&quot;0&quot;</span>, 1);
<a name="l02473"></a>02473   <span class="keywordflow">else</span>
<a name="l02474"></a>02474     <a class="code" href="stack_8c.html#adff8e79f6ddb07d5747fc5e93945d302">select_frame_command</a> (<span class="stringliteral">&quot;0&quot;</span>, 0);
<a name="l02475"></a>02475 }
<a name="l02476"></a>02476 
<a name="l02477"></a>02477 <span class="comment">/* Sets the scope to input function name, provided that the function</span>
<a name="l02478"></a>02478 <span class="comment">   is within the current stack frame.  */</span>
<a name="l02479"></a>02479 
<a name="l02480"></a><a class="code" href="structfunction__bounds.html">02480</a> <span class="keyword">struct </span><a class="code" href="structfunction__bounds.html">function_bounds</a>
<a name="l02481"></a>02481 {
<a name="l02482"></a><a class="code" href="structfunction__bounds.html#a6f3f2cafd2950787671ea241714b163b">02482</a>   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="structfunction__bounds.html#a6f3f2cafd2950787671ea241714b163b">low</a>, <a class="code" href="structfunction__bounds.html#a9289c8bc14aeb9301af9a79c8cfb4906">high</a>;
<a name="l02483"></a>02483 };
<a name="l02484"></a>02484 
<a name="l02485"></a>02485 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02486"></a><a class="code" href="stack_8c.html#a3568b4eabea7c7a2951b79de0dafeb78">02486</a> <a class="code" href="stack_8c.html#a3568b4eabea7c7a2951b79de0dafeb78">func_command</a> (<span class="keywordtype">char</span> *arg, <span class="keywordtype">int</span> from_tty)
<a name="l02487"></a>02487 {
<a name="l02488"></a>02488   <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *frame;
<a name="l02489"></a>02489   <span class="keywordtype">int</span> found = 0;
<a name="l02490"></a>02490   <span class="keyword">struct </span><a class="code" href="structsymtabs__and__lines.html">symtabs_and_lines</a> sals;
<a name="l02491"></a>02491   <span class="keywordtype">int</span> i;
<a name="l02492"></a>02492   <span class="keywordtype">int</span> level = 1;
<a name="l02493"></a>02493   <span class="keyword">struct </span><a class="code" href="structfunction__bounds.html">function_bounds</a> *func_bounds = NULL;
<a name="l02494"></a>02494   <span class="keyword">struct </span><a class="code" href="structcleanup.html">cleanup</a> *cleanups;
<a name="l02495"></a>02495 
<a name="l02496"></a>02496   <span class="keywordflow">if</span> (arg != NULL)
<a name="l02497"></a>02497     <span class="keywordflow">return</span>;
<a name="l02498"></a>02498 
<a name="l02499"></a>02499   frame = <a class="code" href="stack_8c.html#a034468c6d69dd73ad33f75170ba40419">parse_frame_specification</a> (<span class="stringliteral">&quot;0&quot;</span>);
<a name="l02500"></a>02500   sals = <a class="code" href="linespec_8c.html#a99c1ec5e07db5d8ffc64de454d190650">decode_line_with_current_source</a> (arg, <a class="code" href="linespec_8h.html#a66db0c56cdf6b7d07a996c374a0572caadb5b3965c89f02bfa79f8871fde72588">DECODE_LINE_FUNFIRSTLINE</a>);
<a name="l02501"></a>02501   cleanups = <a class="code" href="cleanups_8c.html#a3d418f8af424aec399898c2d48b26224">make_cleanup</a> (<a class="code" href="common-utils_8c.html#a976e14808b9247ec952c262553f09f8f">xfree</a>, sals.<a class="code" href="structsymtabs__and__lines.html#ab601f48fdf29c3b190ba068f57983df4">sals</a>);
<a name="l02502"></a>02502   func_bounds = (<span class="keyword">struct </span><a class="code" href="structfunction__bounds.html">function_bounds</a> *) <a class="code" href="common-utils_8c.html#a634d6cd850bb831afebc499579303b3b">xmalloc</a> (
<a name="l02503"></a>02503                               <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structfunction__bounds.html">function_bounds</a>) * sals.<a class="code" href="structsymtabs__and__lines.html#a1c8b832fc2f8c096c95144a2acedd36a">nelts</a>);
<a name="l02504"></a>02504   <a class="code" href="cleanups_8c.html#a3d418f8af424aec399898c2d48b26224">make_cleanup</a> (<a class="code" href="common-utils_8c.html#a976e14808b9247ec952c262553f09f8f">xfree</a>, func_bounds);
<a name="l02505"></a>02505   <span class="keywordflow">for</span> (i = 0; (i &lt; sals.<a class="code" href="structsymtabs__and__lines.html#a1c8b832fc2f8c096c95144a2acedd36a">nelts</a> &amp;&amp; !found); i++)
<a name="l02506"></a>02506     {
<a name="l02507"></a>02507       <span class="keywordflow">if</span> (sals.<a class="code" href="structsymtabs__and__lines.html#ab601f48fdf29c3b190ba068f57983df4">sals</a>[i].<a class="code" href="structsymtab__and__line.html#acc91f0276f4648cb5a970f17ddcbaf09">pspace</a> != <a class="code" href="progspace_8c.html#a07722ff15a98814c086dda44f93380c9">current_program_space</a>)
<a name="l02508"></a>02508         func_bounds[i].<a class="code" href="structfunction__bounds.html#a6f3f2cafd2950787671ea241714b163b">low</a> = func_bounds[i].<a class="code" href="structfunction__bounds.html#a9289c8bc14aeb9301af9a79c8cfb4906">high</a> = 0;
<a name="l02509"></a>02509       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sals.<a class="code" href="structsymtabs__and__lines.html#ab601f48fdf29c3b190ba068f57983df4">sals</a>[i].<a class="code" href="structsymtab__and__line.html#a77665fa461ad187cb755efa256ba44d7">pc</a> == 0
<a name="l02510"></a>02510                || <a class="code" href="blockframe_8c.html#a2dae2257ad1417604d2c26f8b9071ca9">find_pc_partial_function</a> (sals.<a class="code" href="structsymtabs__and__lines.html#ab601f48fdf29c3b190ba068f57983df4">sals</a>[i].<a class="code" href="structsymtab__and__line.html#a77665fa461ad187cb755efa256ba44d7">pc</a>, NULL,
<a name="l02511"></a>02511                                             &amp;func_bounds[i].<a class="code" href="structfunction__bounds.html#a6f3f2cafd2950787671ea241714b163b">low</a>,
<a name="l02512"></a>02512                                             &amp;func_bounds[i].<a class="code" href="structfunction__bounds.html#a9289c8bc14aeb9301af9a79c8cfb4906">high</a>) == 0)
<a name="l02513"></a>02513         {
<a name="l02514"></a>02514           func_bounds[i].<a class="code" href="structfunction__bounds.html#a6f3f2cafd2950787671ea241714b163b">low</a> = func_bounds[i].<a class="code" href="structfunction__bounds.html#a9289c8bc14aeb9301af9a79c8cfb4906">high</a> = 0;
<a name="l02515"></a>02515         }
<a name="l02516"></a>02516     }
<a name="l02517"></a>02517 
<a name="l02518"></a>02518   <span class="keywordflow">do</span>
<a name="l02519"></a>02519     {
<a name="l02520"></a>02520       <span class="keywordflow">for</span> (i = 0; (i &lt; sals.<a class="code" href="structsymtabs__and__lines.html#a1c8b832fc2f8c096c95144a2acedd36a">nelts</a> &amp;&amp; !found); i++)
<a name="l02521"></a>02521         found = (<a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (frame) &gt;= func_bounds[i].<a class="code" href="structfunction__bounds.html#a6f3f2cafd2950787671ea241714b163b">low</a>
<a name="l02522"></a>02522                  &amp;&amp; <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (frame) &lt; func_bounds[i].<a class="code" href="structfunction__bounds.html#a9289c8bc14aeb9301af9a79c8cfb4906">high</a>);
<a name="l02523"></a>02523       <span class="keywordflow">if</span> (!found)
<a name="l02524"></a>02524         {
<a name="l02525"></a>02525           level = 1;
<a name="l02526"></a>02526           frame = <a class="code" href="frame_8h.html#a11bc71bb842ee9f30b990aec07f4399a">find_relative_frame</a> (frame, &amp;level);
<a name="l02527"></a>02527         }
<a name="l02528"></a>02528     }
<a name="l02529"></a>02529   <span class="keywordflow">while</span> (!found &amp;&amp; level == 0);
<a name="l02530"></a>02530 
<a name="l02531"></a>02531   <a class="code" href="cleanups_8c.html#a8b313a4f1c613973ea444e5fa54976f8">do_cleanups</a> (cleanups);
<a name="l02532"></a>02532 
<a name="l02533"></a>02533   <span class="keywordflow">if</span> (!found)
<a name="l02534"></a>02534     <a class="code" href="utils_8c.html#a8a83ee04701e157bf53e23d8682874e8">printf_filtered</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;&#39;%s&#39; not within current stack frame.\n&quot;</span>), arg);
<a name="l02535"></a>02535   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (frame != <a class="code" href="frame_8c.html#a8b714a78478670e14a297eba8d1a9915">get_selected_frame</a> (NULL))
<a name="l02536"></a>02536     <a class="code" href="stack_8c.html#abdb4b832775d0b983ef9ed4856abee81">select_and_print_frame</a> (frame);
<a name="l02537"></a>02537 }
<a name="l02538"></a>02538 
<a name="l02539"></a>02539 <span class="comment">/* Gets the language of the current frame.  */</span>
<a name="l02540"></a>02540 
<a name="l02541"></a>02541 <span class="keyword">enum</span> <a class="code" href="defs_8h.html#aa37aa8979934d47ac32fd96ecff32202">language</a>
<a name="l02542"></a><a class="code" href="stack_8c.html#a35b101ad261ed79c6c51d39f2da6c525">02542</a> <a class="code" href="language_8h.html#a35b101ad261ed79c6c51d39f2da6c525">get_frame_language</a> (<span class="keywordtype">void</span>)
<a name="l02543"></a>02543 {
<a name="l02544"></a>02544   <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *frame = <a class="code" href="frame_8c.html#aff8ce563cf529a6695bd2afc8b3d9833">deprecated_safe_get_selected_frame</a> ();
<a name="l02545"></a>02545 
<a name="l02546"></a>02546   <span class="keywordflow">if</span> (frame)
<a name="l02547"></a>02547     {
<a name="l02548"></a>02548       <span class="keyword">volatile</span> <span class="keyword">struct </span><a class="code" href="structgdb__exception.html">gdb_exception</a> ex;
<a name="l02549"></a>02549       <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc = 0;
<a name="l02550"></a>02550       <span class="keyword">struct </span><a class="code" href="structsymtab.html">symtab</a> *s;
<a name="l02551"></a>02551 
<a name="l02552"></a>02552       <span class="comment">/* We determine the current frame language by looking up its</span>
<a name="l02553"></a>02553 <span class="comment">         associated symtab.  To retrieve this symtab, we use the frame</span>
<a name="l02554"></a>02554 <span class="comment">         PC.  However we cannot use the frame PC as is, because it</span>
<a name="l02555"></a>02555 <span class="comment">         usually points to the instruction following the &quot;call&quot;, which</span>
<a name="l02556"></a>02556 <span class="comment">         is sometimes the first instruction of another function.  So</span>
<a name="l02557"></a>02557 <span class="comment">         we rely on get_frame_address_in_block(), it provides us with</span>
<a name="l02558"></a>02558 <span class="comment">         a PC that is guaranteed to be inside the frame&#39;s code</span>
<a name="l02559"></a>02559 <span class="comment">         block.  */</span>
<a name="l02560"></a>02560 
<a name="l02561"></a>02561       <a class="code" href="exceptions_8h.html#aef4514ee39b9305fddee27f49c7c34eb">TRY_CATCH</a> (ex, <a class="code" href="exceptions_8h.html#abfa3a3b99557b11f5766baf69465fdf6a44de51845416ac49ab08438792b908f0">RETURN_MASK_ERROR</a>)
<a name="l02562"></a>02562         {
<a name="l02563"></a>02563           pc = <a class="code" href="frame_8c.html#a9035a35b7470b669f9bafee9c3961559">get_frame_address_in_block</a> (frame);
<a name="l02564"></a>02564         }
<a name="l02565"></a>02565       <span class="keywordflow">if</span> (ex.<a class="code" href="structgdb__exception.html#ae0e14189c63f830024865d557c1122cc">reason</a> &lt; 0)
<a name="l02566"></a>02566         {
<a name="l02567"></a>02567           <span class="keywordflow">if</span> (ex.<a class="code" href="structgdb__exception.html#ab5a701a197af7b5c953242d029c18e75">error</a> != <a class="code" href="exceptions_8h.html#acc42076253600be964e110149b458971ad5f524b407f1cb2d36cb365112de18c9">NOT_AVAILABLE_ERROR</a>)
<a name="l02568"></a>02568             <a class="code" href="exceptions_8c.html#a541d1b545da68efe4f8b729a945f83e7">throw_exception</a> (ex);
<a name="l02569"></a>02569         }
<a name="l02570"></a>02570       <span class="keywordflow">else</span>
<a name="l02571"></a>02571         {
<a name="l02572"></a>02572           s = <a class="code" href="symtab_8c.html#a67d3e309c557a2f51ace98f7ea662a03">find_pc_symtab</a> (pc);
<a name="l02573"></a>02573           <span class="keywordflow">if</span> (s != NULL)
<a name="l02574"></a>02574             <span class="keywordflow">return</span> s-&gt;<a class="code" href="structsymtab.html#a26ff640a27ab8781d9e09231bd173e6c">language</a>;
<a name="l02575"></a>02575         }
<a name="l02576"></a>02576     }
<a name="l02577"></a>02577 
<a name="l02578"></a>02578   <span class="keywordflow">return</span> <a class="code" href="defs_8h.html#aa37aa8979934d47ac32fd96ecff32202a3082c2da456a8ca3aa34f721de2c3565">language_unknown</a>;
<a name="l02579"></a>02579 }
<a name="l02580"></a>02580 
<a name="l02581"></a>02581 
<a name="l02582"></a>02582 <span class="comment">/* Provide a prototype to silence -Wmissing-prototypes.  */</span>
<a name="l02583"></a>02583 <span class="keywordtype">void</span> <a class="code" href="init_8c.html#abdc7ebe941476a002be117f3006d3480">_initialize_stack</a> (<span class="keywordtype">void</span>);
<a name="l02584"></a>02584 
<a name="l02585"></a>02585 <span class="keywordtype">void</span>
<a name="l02586"></a><a class="code" href="init_8c.html#abdc7ebe941476a002be117f3006d3480">02586</a> <a class="code" href="init_8c.html#abdc7ebe941476a002be117f3006d3480">_initialize_stack</a> (<span class="keywordtype">void</span>)
<a name="l02587"></a>02587 {
<a name="l02588"></a>02588   <a class="code" href="cli-decode_8c.html#a0df0ca36d9acd96440e24407cbef593c">add_com</a> (<span class="stringliteral">&quot;return&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49aca4e222cb510f9e9555ac25ba69e812a">class_stack</a>, <a class="code" href="frame_8h.html#ab5e52b8372e53e7f7099b0bee2413a6a">return_command</a>, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;\</span>
<a name="l02589"></a>02589 <span class="stringliteral">Make selected stack frame return to its caller.\n\</span>
<a name="l02590"></a>02590 <span class="stringliteral">Control remains in the debugger, but when you continue\n\</span>
<a name="l02591"></a>02591 <span class="stringliteral">execution will resume in the frame above the one now selected.\n\</span>
<a name="l02592"></a>02592 <span class="stringliteral">If an argument is given, it is an expression for the value to return.&quot;</span>));
<a name="l02593"></a>02593 
<a name="l02594"></a>02594   <a class="code" href="cli-decode_8c.html#a0df0ca36d9acd96440e24407cbef593c">add_com</a> (<span class="stringliteral">&quot;up&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49aca4e222cb510f9e9555ac25ba69e812a">class_stack</a>, <a class="code" href="stack_8c.html#af218d2a0eadbb92c54c9a56f00459b9b">up_command</a>, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;\</span>
<a name="l02595"></a>02595 <span class="stringliteral">Select and print stack frame that called this one.\n\</span>
<a name="l02596"></a>02596 <span class="stringliteral">An argument says how many frames up to go.&quot;</span>));
<a name="l02597"></a>02597   <a class="code" href="cli-decode_8c.html#a0df0ca36d9acd96440e24407cbef593c">add_com</a> (<span class="stringliteral">&quot;up-silently&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49a92be6efbab6bd9647a6f7a2862712d9b">class_support</a>, <a class="code" href="stack_8c.html#aaac0172d61f43d53837010005081a695">up_silently_command</a>, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;\</span>
<a name="l02598"></a>02598 <span class="stringliteral">Same as the `up&#39; command, but does not print anything.\n\</span>
<a name="l02599"></a>02599 <span class="stringliteral">This is useful in command scripts.&quot;</span>));
<a name="l02600"></a>02600 
<a name="l02601"></a>02601   <a class="code" href="cli-decode_8c.html#a0df0ca36d9acd96440e24407cbef593c">add_com</a> (<span class="stringliteral">&quot;down&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49aca4e222cb510f9e9555ac25ba69e812a">class_stack</a>, <a class="code" href="stack_8c.html#a88f26e64a5be64a499259050accc747b">down_command</a>, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;\</span>
<a name="l02602"></a>02602 <span class="stringliteral">Select and print stack frame called by this one.\n\</span>
<a name="l02603"></a>02603 <span class="stringliteral">An argument says how many frames down to go.&quot;</span>));
<a name="l02604"></a>02604   <a class="code" href="cli-decode_8c.html#aeeea74da863db26c8d7fee1573f26a05">add_com_alias</a> (<span class="stringliteral">&quot;do&quot;</span>, <span class="stringliteral">&quot;down&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49aca4e222cb510f9e9555ac25ba69e812a">class_stack</a>, 1);
<a name="l02605"></a>02605   <a class="code" href="cli-decode_8c.html#aeeea74da863db26c8d7fee1573f26a05">add_com_alias</a> (<span class="stringliteral">&quot;dow&quot;</span>, <span class="stringliteral">&quot;down&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49aca4e222cb510f9e9555ac25ba69e812a">class_stack</a>, 1);
<a name="l02606"></a>02606   <a class="code" href="cli-decode_8c.html#a0df0ca36d9acd96440e24407cbef593c">add_com</a> (<span class="stringliteral">&quot;down-silently&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49a92be6efbab6bd9647a6f7a2862712d9b">class_support</a>, <a class="code" href="stack_8c.html#a0ee777b81c485545110152792911a572">down_silently_command</a>, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;\</span>
<a name="l02607"></a>02607 <span class="stringliteral">Same as the `down&#39; command, but does not print anything.\n\</span>
<a name="l02608"></a>02608 <span class="stringliteral">This is useful in command scripts.&quot;</span>));
<a name="l02609"></a>02609 
<a name="l02610"></a>02610   <a class="code" href="cli-decode_8c.html#a0df0ca36d9acd96440e24407cbef593c">add_com</a> (<span class="stringliteral">&quot;frame&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49aca4e222cb510f9e9555ac25ba69e812a">class_stack</a>, <a class="code" href="stack_8c.html#a5a1ba39ef510a1f69e34119f0029570c">frame_command</a>, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;\</span>
<a name="l02611"></a>02611 <span class="stringliteral">Select and print a stack frame.\nWith no argument, \</span>
<a name="l02612"></a>02612 <span class="stringliteral">print the selected stack frame.  (See also \&quot;info frame\&quot;).\n\</span>
<a name="l02613"></a>02613 <span class="stringliteral">An argument specifies the frame to select.\n\</span>
<a name="l02614"></a>02614 <span class="stringliteral">It can be a stack frame number or the address of the frame.\n\</span>
<a name="l02615"></a>02615 <span class="stringliteral">With argument, nothing is printed if input is coming from\n\</span>
<a name="l02616"></a>02616 <span class="stringliteral">a command file or a user-defined command.&quot;</span>));
<a name="l02617"></a>02617 
<a name="l02618"></a>02618   <a class="code" href="cli-decode_8c.html#aeeea74da863db26c8d7fee1573f26a05">add_com_alias</a> (<span class="stringliteral">&quot;f&quot;</span>, <span class="stringliteral">&quot;frame&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49aca4e222cb510f9e9555ac25ba69e812a">class_stack</a>, 1);
<a name="l02619"></a>02619 
<a name="l02620"></a>02620   <span class="keywordflow">if</span> (<a class="code" href="defs_8h.html#a195fb001f0890cfc064403357feecca1">xdb_commands</a>)
<a name="l02621"></a>02621     {
<a name="l02622"></a>02622       <a class="code" href="cli-decode_8c.html#a0df0ca36d9acd96440e24407cbef593c">add_com</a> (<span class="stringliteral">&quot;L&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49aca4e222cb510f9e9555ac25ba69e812a">class_stack</a>, <a class="code" href="stack_8c.html#a71c81882ebc1bf5095fa3462d6cabf2b">current_frame_command</a>,
<a name="l02623"></a>02623                <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Print the current stack frame.\n&quot;</span>));
<a name="l02624"></a>02624       <a class="code" href="cli-decode_8c.html#aeeea74da863db26c8d7fee1573f26a05">add_com_alias</a> (<span class="stringliteral">&quot;V&quot;</span>, <span class="stringliteral">&quot;frame&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49aca4e222cb510f9e9555ac25ba69e812a">class_stack</a>, 1);
<a name="l02625"></a>02625     }
<a name="l02626"></a>02626   <a class="code" href="cli-decode_8c.html#a0df0ca36d9acd96440e24407cbef593c">add_com</a> (<span class="stringliteral">&quot;select-frame&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49aca4e222cb510f9e9555ac25ba69e812a">class_stack</a>, <a class="code" href="stack_8c.html#adff8e79f6ddb07d5747fc5e93945d302">select_frame_command</a>, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;\</span>
<a name="l02627"></a>02627 <span class="stringliteral">Select a stack frame without printing anything.\n\</span>
<a name="l02628"></a>02628 <span class="stringliteral">An argument specifies the frame to select.\n\</span>
<a name="l02629"></a>02629 <span class="stringliteral">It can be a stack frame number or the address of the frame.\n&quot;</span>));
<a name="l02630"></a>02630 
<a name="l02631"></a>02631   <a class="code" href="cli-decode_8c.html#a0df0ca36d9acd96440e24407cbef593c">add_com</a> (<span class="stringliteral">&quot;backtrace&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49aca4e222cb510f9e9555ac25ba69e812a">class_stack</a>, <a class="code" href="stack_8c.html#a98a85c55889195230c9002bc2ff39739">backtrace_command</a>, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;\</span>
<a name="l02632"></a>02632 <span class="stringliteral">Print backtrace of all stack frames, or innermost COUNT frames.\n\</span>
<a name="l02633"></a>02633 <span class="stringliteral">With a negative argument, print outermost -COUNT frames.\nUse of the \</span>
<a name="l02634"></a>02634 <span class="stringliteral">&#39;full&#39; qualifier also prints the values of the local variables.\n\</span>
<a name="l02635"></a>02635 <span class="stringliteral">Use of the &#39;no-filters&#39; qualifier prohibits frame filters from executing\n\</span>
<a name="l02636"></a>02636 <span class="stringliteral">on this backtrace.\n&quot;</span>));
<a name="l02637"></a>02637   <a class="code" href="cli-decode_8c.html#aeeea74da863db26c8d7fee1573f26a05">add_com_alias</a> (<span class="stringliteral">&quot;bt&quot;</span>, <span class="stringliteral">&quot;backtrace&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49aca4e222cb510f9e9555ac25ba69e812a">class_stack</a>, 0);
<a name="l02638"></a>02638   <span class="keywordflow">if</span> (<a class="code" href="defs_8h.html#a195fb001f0890cfc064403357feecca1">xdb_commands</a>)
<a name="l02639"></a>02639     {
<a name="l02640"></a>02640       <a class="code" href="cli-decode_8c.html#aeeea74da863db26c8d7fee1573f26a05">add_com_alias</a> (<span class="stringliteral">&quot;t&quot;</span>, <span class="stringliteral">&quot;backtrace&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49aca4e222cb510f9e9555ac25ba69e812a">class_stack</a>, 0);
<a name="l02641"></a>02641       <a class="code" href="cli-decode_8c.html#a0df0ca36d9acd96440e24407cbef593c">add_com</a> (<span class="stringliteral">&quot;T&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49aca4e222cb510f9e9555ac25ba69e812a">class_stack</a>, <a class="code" href="stack_8c.html#aa8738d35bfe2d9c7e50ca77c43ee75f2">backtrace_full_command</a>, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;\</span>
<a name="l02642"></a>02642 <span class="stringliteral">Print backtrace of all stack frames, or innermost COUNT frames\n\</span>
<a name="l02643"></a>02643 <span class="stringliteral">and the values of the local variables.\n\</span>
<a name="l02644"></a>02644 <span class="stringliteral">With a negative argument, print outermost -COUNT frames.\n\</span>
<a name="l02645"></a>02645 <span class="stringliteral">Usage: T &lt;count&gt;\n&quot;</span>));
<a name="l02646"></a>02646     }
<a name="l02647"></a>02647 
<a name="l02648"></a>02648   <a class="code" href="cli-decode_8c.html#aeeea74da863db26c8d7fee1573f26a05">add_com_alias</a> (<span class="stringliteral">&quot;where&quot;</span>, <span class="stringliteral">&quot;backtrace&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49ab3f4371cd43a9a1392c164b37cdef36f">class_alias</a>, 0);
<a name="l02649"></a>02649   <a class="code" href="cli-decode_8c.html#a9f6cd2f7798c32a7a27cab617e71cf6a">add_info</a> (<span class="stringliteral">&quot;stack&quot;</span>, <a class="code" href="stack_8c.html#a98a85c55889195230c9002bc2ff39739">backtrace_command</a>,
<a name="l02650"></a>02650             <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Backtrace of the stack, or innermost COUNT frames.&quot;</span>));
<a name="l02651"></a>02651   <a class="code" href="cli-decode_8c.html#a156b2909061aa101144577fbea69ca77">add_info_alias</a> (<span class="stringliteral">&quot;s&quot;</span>, <span class="stringliteral">&quot;stack&quot;</span>, 1);
<a name="l02652"></a>02652   <a class="code" href="cli-decode_8c.html#a9f6cd2f7798c32a7a27cab617e71cf6a">add_info</a> (<span class="stringliteral">&quot;frame&quot;</span>, <a class="code" href="structframe__info.html">frame_info</a>,
<a name="l02653"></a>02653             <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;All about selected stack frame, or frame at ADDR.&quot;</span>));
<a name="l02654"></a>02654   <a class="code" href="cli-decode_8c.html#a156b2909061aa101144577fbea69ca77">add_info_alias</a> (<span class="stringliteral">&quot;f&quot;</span>, <span class="stringliteral">&quot;frame&quot;</span>, 1);
<a name="l02655"></a>02655   <a class="code" href="cli-decode_8c.html#a9f6cd2f7798c32a7a27cab617e71cf6a">add_info</a> (<span class="stringliteral">&quot;locals&quot;</span>, <a class="code" href="frame_8h.html#ac8096db688dc13edd29e377c964d826d">locals_info</a>,
<a name="l02656"></a>02656             <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Local variables of current stack frame.&quot;</span>));
<a name="l02657"></a>02657   <a class="code" href="cli-decode_8c.html#a9f6cd2f7798c32a7a27cab617e71cf6a">add_info</a> (<span class="stringliteral">&quot;args&quot;</span>, <a class="code" href="frame_8h.html#a5b54190e4a3e837cf5a830bf3e646c08">args_info</a>,
<a name="l02658"></a>02658             <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Argument variables of current stack frame.&quot;</span>));
<a name="l02659"></a>02659   <span class="keywordflow">if</span> (<a class="code" href="defs_8h.html#a195fb001f0890cfc064403357feecca1">xdb_commands</a>)
<a name="l02660"></a>02660     <a class="code" href="cli-decode_8c.html#a0df0ca36d9acd96440e24407cbef593c">add_com</a> (<span class="stringliteral">&quot;l&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49afeb5c4e1710a4f7dfc804136248d274d">class_info</a>, <a class="code" href="stack_8c.html#ad43c978923b7e02335ff99faa8a647e2">args_plus_locals_info</a>,
<a name="l02661"></a>02661              <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Argument and local variables of current stack frame.&quot;</span>));
<a name="l02662"></a>02662 
<a name="l02663"></a>02663   <span class="keywordflow">if</span> (<a class="code" href="defs_8h.html#a05c64837f5abc518eec4f97238728111">dbx_commands</a>)
<a name="l02664"></a>02664     <a class="code" href="cli-decode_8c.html#a0df0ca36d9acd96440e24407cbef593c">add_com</a> (<span class="stringliteral">&quot;func&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49aca4e222cb510f9e9555ac25ba69e812a">class_stack</a>, <a class="code" href="stack_8c.html#a3568b4eabea7c7a2951b79de0dafeb78">func_command</a>, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;\</span>
<a name="l02665"></a>02665 <span class="stringliteral">Select the stack frame that contains &lt;func&gt;.\n\</span>
<a name="l02666"></a>02666 <span class="stringliteral">Usage: func &lt;name&gt;\n&quot;</span>));
<a name="l02667"></a>02667 
<a name="l02668"></a>02668   <a class="code" href="cli-decode_8c.html#a79332268b2efb4698434e6ddf4d8c00e">add_setshow_enum_cmd</a> (<span class="stringliteral">&quot;frame-arguments&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49aca4e222cb510f9e9555ac25ba69e812a">class_stack</a>,
<a name="l02669"></a>02669                         <a class="code" href="stack_8c.html#a5ccc49a256b120bb2c05d2b791d93f36">print_frame_arguments_choices</a>, &amp;<a class="code" href="stack_8c.html#affd7a00dca2d9a9b2fb0804ac172552c">print_frame_arguments</a>,
<a name="l02670"></a>02670                         <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Set printing of non-scalar frame arguments&quot;</span>),
<a name="l02671"></a>02671                         <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Show printing of non-scalar frame arguments&quot;</span>),
<a name="l02672"></a>02672                         NULL, NULL, NULL, &amp;<a class="code" href="cli-cmds_8c.html#a6ebc4c82da52b9e82c557b19081f1314">setprintlist</a>, &amp;<a class="code" href="cli-cmds_8c.html#a066724dffa9e968b6b6904c372807a80">showprintlist</a>);
<a name="l02673"></a>02673 
<a name="l02674"></a>02674   <a class="code" href="cli-decode_8c.html#ad86a0f135b6c546ae7ffbb41fd72e14f">add_setshow_boolean_cmd</a> (<span class="stringliteral">&quot;frame-arguments&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49afbf489a4abce7e8770b178aa54f0908b">no_class</a>,
<a name="l02675"></a>02675                            &amp;<a class="code" href="stack_8c.html#ad552f1563c23446bf8bfeca354d3f20e">print_raw_frame_arguments</a>, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;\</span>
<a name="l02676"></a>02676 <span class="stringliteral">Set whether to print frame arguments in raw form.&quot;</span>), <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;\</span>
<a name="l02677"></a>02677 <span class="stringliteral">Show whether to print frame arguments in raw form.&quot;</span>), <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;\</span>
<a name="l02678"></a>02678 <span class="stringliteral">If set, frame arguments are printed in raw form, bypassing any\n\</span>
<a name="l02679"></a>02679 <span class="stringliteral">pretty-printers for that value.&quot;</span>),
<a name="l02680"></a>02680                            NULL, NULL,
<a name="l02681"></a>02681                            &amp;<a class="code" href="gdbcmd_8h.html#aea2e275d4392b023a5db20d07c404238">setprintrawlist</a>, &amp;<a class="code" href="gdbcmd_8h.html#a657db8cedc6d9f03494d215fdeda2a3b">showprintrawlist</a>);
<a name="l02682"></a>02682 
<a name="l02683"></a>02683   <a class="code" href="cli-decode_8c.html#a23ea3d5840b00a6fad40e165ba4feba7">add_setshow_auto_boolean_cmd</a> (<span class="stringliteral">&quot;disassemble-next-line&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49aca4e222cb510f9e9555ac25ba69e812a">class_stack</a>,
<a name="l02684"></a>02684                                 &amp;<a class="code" href="stack_8c.html#aef5846e08cd997153bdf79c1c8e29424">disassemble_next_line</a>, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;\</span>
<a name="l02685"></a>02685 <span class="stringliteral">Set whether to disassemble next source line or insn when execution stops.&quot;</span>),
<a name="l02686"></a>02686                                 <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;\</span>
<a name="l02687"></a>02687 <span class="stringliteral">Show whether to disassemble next source line or insn when execution stops.&quot;</span>),
<a name="l02688"></a>02688                                 <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;\</span>
<a name="l02689"></a>02689 <span class="stringliteral">If ON, GDB will display disassembly of the next source line, in addition\n\</span>
<a name="l02690"></a>02690 <span class="stringliteral">to displaying the source line itself.  If the next source line cannot\n\</span>
<a name="l02691"></a>02691 <span class="stringliteral">be displayed (e.g., source is unavailable or there&#39;s no line info), GDB\n\</span>
<a name="l02692"></a>02692 <span class="stringliteral">will display disassembly of next instruction instead of showing the\n\</span>
<a name="l02693"></a>02693 <span class="stringliteral">source line.\n\</span>
<a name="l02694"></a>02694 <span class="stringliteral">If AUTO, display disassembly of next instruction only if the source line\n\</span>
<a name="l02695"></a>02695 <span class="stringliteral">cannot be displayed.\n\</span>
<a name="l02696"></a>02696 <span class="stringliteral">If OFF (which is the default), never display the disassembly of the next\n\</span>
<a name="l02697"></a>02697 <span class="stringliteral">source line.&quot;</span>),
<a name="l02698"></a>02698                                 NULL,
<a name="l02699"></a>02699                                 <a class="code" href="stack_8c.html#a3d0a31c9ef6b5f5fe2774cd44da18ddb">show_disassemble_next_line</a>,
<a name="l02700"></a>02700                                 &amp;<a class="code" href="cli-cmds_8c.html#a723e0174d833cba0aa82fb936a56c8fa">setlist</a>, &amp;<a class="code" href="cli-cmds_8c.html#a003932aa76fd3f41763ecc6bee5e2ca8">showlist</a>);
<a name="l02701"></a>02701   <a class="code" href="stack_8c.html#aef5846e08cd997153bdf79c1c8e29424">disassemble_next_line</a> = <a class="code" href="defs_8h.html#a7e28c5d9363062b4fd5eec5fed14448fad5edac705ebbe17f475a693d6b00141c">AUTO_BOOLEAN_FALSE</a>;
<a name="l02702"></a>02702 
<a name="l02703"></a>02703   <a class="code" href="cli-decode_8c.html#a79332268b2efb4698434e6ddf4d8c00e">add_setshow_enum_cmd</a> (<span class="stringliteral">&quot;entry-values&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49aca4e222cb510f9e9555ac25ba69e812a">class_stack</a>,
<a name="l02704"></a>02704                         <a class="code" href="stack_8c.html#adec1f7baa17b7dad89d9ba70bb5ec6d9">print_entry_values_choices</a>, &amp;<a class="code" href="frame_8h.html#a63d7b1862ccbc9987aac7ad11d8c57a6">print_entry_values</a>,
<a name="l02705"></a>02705                         <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Set printing of function arguments at function &quot;</span>
<a name="l02706"></a>02706                           <span class="stringliteral">&quot;entry&quot;</span>),
<a name="l02707"></a>02707                         <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Show printing of function arguments at function &quot;</span>
<a name="l02708"></a>02708                           <span class="stringliteral">&quot;entry&quot;</span>),
<a name="l02709"></a>02709                         <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;\</span>
<a name="l02710"></a>02710 <span class="stringliteral">GDB can sometimes determine the values of function arguments at entry,\n\</span>
<a name="l02711"></a>02711 <span class="stringliteral">in addition to their current values.  This option tells GDB whether\n\</span>
<a name="l02712"></a>02712 <span class="stringliteral">to print the current value, the value at entry (marked as val@entry),\n\</span>
<a name="l02713"></a>02713 <span class="stringliteral">or both.  Note that one or both of these values may be &lt;optimized out&gt;.&quot;</span>),
<a name="l02714"></a>02714                         NULL, NULL, &amp;<a class="code" href="cli-cmds_8c.html#a6ebc4c82da52b9e82c557b19081f1314">setprintlist</a>, &amp;<a class="code" href="cli-cmds_8c.html#a066724dffa9e968b6b6904c372807a80">showprintlist</a>);
<a name="l02715"></a>02715 }
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 11 2013 14:13:34 for GDB (xrefs) by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
