<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>GDB (xrefs): /home/stan/gdb/src/gdb/s390-tdep.c Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">GDB (xrefs)
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">/home/stan/gdb/src/gdb/s390-tdep.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="s390-tdep_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* Target-dependent code for GDB, the GNU debugger.</span>
<a name="l00002"></a>00002 <span class="comment"></span>
<a name="l00003"></a>00003 <span class="comment">   Copyright (C) 2001-2013 Free Software Foundation, Inc.</span>
<a name="l00004"></a>00004 <span class="comment"></span>
<a name="l00005"></a>00005 <span class="comment">   Contributed by D.J. Barrow (djbarrow@de.ibm.com,barrow_dj@yahoo.com)</span>
<a name="l00006"></a>00006 <span class="comment">   for IBM Deutschland Entwicklung GmbH, IBM Corporation.</span>
<a name="l00007"></a>00007 <span class="comment"></span>
<a name="l00008"></a>00008 <span class="comment">   This file is part of GDB.</span>
<a name="l00009"></a>00009 <span class="comment"></span>
<a name="l00010"></a>00010 <span class="comment">   This program is free software; you can redistribute it and/or modify</span>
<a name="l00011"></a>00011 <span class="comment">   it under the terms of the GNU General Public License as published by</span>
<a name="l00012"></a>00012 <span class="comment">   the Free Software Foundation; either version 3 of the License, or</span>
<a name="l00013"></a>00013 <span class="comment">   (at your option) any later version.</span>
<a name="l00014"></a>00014 <span class="comment"></span>
<a name="l00015"></a>00015 <span class="comment">   This program is distributed in the hope that it will be useful,</span>
<a name="l00016"></a>00016 <span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00017"></a>00017 <span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00018"></a>00018 <span class="comment">   GNU General Public License for more details.</span>
<a name="l00019"></a>00019 <span class="comment"></span>
<a name="l00020"></a>00020 <span class="comment">   You should have received a copy of the GNU General Public License</span>
<a name="l00021"></a>00021 <span class="comment">   along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.  */</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;<a class="code" href="defs_8h.html">defs.h</a>&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="arch-utils_8h.html">arch-utils.h</a>&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="frame_8h.html">frame.h</a>&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="inferior_8h.html">inferior.h</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="symtab_8h.html">symtab.h</a>&quot;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="target_8h.html">target.h</a>&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="gdbcore_8h.html">gdbcore.h</a>&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="gdbcmd_8h.html">gdbcmd.h</a>&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="objfiles_8h.html">objfiles.h</a>&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;floatformat.h&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;<a class="code" href="regcache_8h.html">regcache.h</a>&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="trad-frame_8h.html">trad-frame.h</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="frame-base_8h.html">frame-base.h</a>&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="frame-unwind_8h.html">frame-unwind.h</a>&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="dwarf2-frame_8h.html">dwarf2-frame.h</a>&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="reggroups_8h.html">reggroups.h</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="regset_8h.html">regset.h</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="value_8h.html">value.h</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="gdb__assert_8h.html">gdb_assert.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;dis-asm.h&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="solib-svr4_8h.html">solib-svr4.h</a>&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="prologue-value_8h.html">prologue-value.h</a>&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;<a class="code" href="linux-tdep_8h.html">linux-tdep.h</a>&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="s390-tdep_8h.html">s390-tdep.h</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="auxv_8h.html">auxv.h</a>&quot;</span>
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 <span class="preprocessor">#include &quot;<a class="code" href="stap-probe_8h.html">stap-probe.h</a>&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="ax_8h.html">ax.h</a>&quot;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &quot;<a class="code" href="ax-gdb_8h.html">ax-gdb.h</a>&quot;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &quot;<a class="code" href="user-regs_8h.html">user-regs.h</a>&quot;</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &quot;<a class="code" href="cli-utils_8h.html">cli/cli-utils.h</a>&quot;</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include &lt;ctype.h&gt;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;elf/common.h&quot;</span>
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 <span class="preprocessor">#include &quot;<a class="code" href="s390-linux32_8c.html">features/s390-linux32.c</a>&quot;</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include &quot;<a class="code" href="s390-linux32v1_8c.html">features/s390-linux32v1.c</a>&quot;</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &quot;<a class="code" href="s390-linux32v2_8c.html">features/s390-linux32v2.c</a>&quot;</span>
<a name="l00060"></a>00060 <span class="preprocessor">#include &quot;<a class="code" href="s390-linux64_8c.html">features/s390-linux64.c</a>&quot;</span>
<a name="l00061"></a>00061 <span class="preprocessor">#include &quot;<a class="code" href="s390-linux64v1_8c.html">features/s390-linux64v1.c</a>&quot;</span>
<a name="l00062"></a>00062 <span class="preprocessor">#include &quot;<a class="code" href="s390-linux64v2_8c.html">features/s390-linux64v2.c</a>&quot;</span>
<a name="l00063"></a>00063 <span class="preprocessor">#include &quot;<a class="code" href="s390-te-linux64_8c.html">features/s390-te-linux64.c</a>&quot;</span>
<a name="l00064"></a>00064 <span class="preprocessor">#include &quot;<a class="code" href="s390x-linux64_8c.html">features/s390x-linux64.c</a>&quot;</span>
<a name="l00065"></a>00065 <span class="preprocessor">#include &quot;<a class="code" href="s390x-linux64v1_8c.html">features/s390x-linux64v1.c</a>&quot;</span>
<a name="l00066"></a>00066 <span class="preprocessor">#include &quot;<a class="code" href="s390x-linux64v2_8c.html">features/s390x-linux64v2.c</a>&quot;</span>
<a name="l00067"></a>00067 <span class="preprocessor">#include &quot;<a class="code" href="s390x-te-linux64_8c.html">features/s390x-te-linux64.c</a>&quot;</span>
<a name="l00068"></a>00068 
<a name="l00069"></a>00069 <span class="comment">/* The tdep structure.  */</span>
<a name="l00070"></a>00070 
<a name="l00071"></a>00071 <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a>
<a name="l00072"></a>00072 {
<a name="l00073"></a>00073   <span class="comment">/* ABI version.  */</span>
<a name="l00074"></a><a class="code" href="structgdbarch__tdep.html#a4a7b38aa57a0b6f6b0568804ce76aed2a755c4da50d780771b5a0b5ee11b7f8b8">00074</a>   <span class="keyword">enum</span> { <a class="code" href="structgdbarch__tdep.html#a4a7b38aa57a0b6f6b0568804ce76aed2accc799a01df359add5c661b6e78cb2d6">ABI_LINUX_S390</a>, <a class="code" href="structgdbarch__tdep.html#a4a7b38aa57a0b6f6b0568804ce76aed2a755c4da50d780771b5a0b5ee11b7f8b8">ABI_LINUX_ZSERIES</a> } <a class="code" href="structgdbarch__tdep.html#af1e7479196010341d589e5d793b4c7b1">abi</a>;
<a name="l00075"></a>00075 
<a name="l00076"></a>00076   <span class="comment">/* Pseudo register numbers.  */</span>
<a name="l00077"></a><a class="code" href="structgdbarch__tdep.html#a68c8669a924fc7e5703c7aefcdb78ed0">00077</a>   <span class="keywordtype">int</span> <a class="code" href="structgdbarch__tdep.html#a68c8669a924fc7e5703c7aefcdb78ed0">gpr_full_regnum</a>;
<a name="l00078"></a><a class="code" href="structgdbarch__tdep.html#aaf14dc59eceddbc9a4512ae0ca551cb4">00078</a>   <span class="keywordtype">int</span> <a class="code" href="structgdbarch__tdep.html#aaf14dc59eceddbc9a4512ae0ca551cb4">pc_regnum</a>;
<a name="l00079"></a><a class="code" href="structgdbarch__tdep.html#a2431ca4c0c48ea776a4f55f2d3ecb180">00079</a>   <span class="keywordtype">int</span> <a class="code" href="structgdbarch__tdep.html#a2431ca4c0c48ea776a4f55f2d3ecb180">cc_regnum</a>;
<a name="l00080"></a>00080 
<a name="l00081"></a>00081   <span class="comment">/* Core file register sets.  */</span>
<a name="l00082"></a>00082   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structregset.html">regset</a> *<a class="code" href="structgdbarch__tdep.html#a0292e4e45fc2986b86c92cd4a66733fd">gregset</a>;
<a name="l00083"></a><a class="code" href="structgdbarch__tdep.html#ad8317c796eb5aadfd4e48f43e6418a7e">00083</a>   <span class="keywordtype">int</span> <a class="code" href="structgdbarch__tdep.html#ad8317c796eb5aadfd4e48f43e6418a7e">sizeof_gregset</a>;
<a name="l00084"></a>00084 
<a name="l00085"></a>00085   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structregset.html">regset</a> *<a class="code" href="structgdbarch__tdep.html#af3f6e6595d74dfa5142187feb895bfd5">fpregset</a>;
<a name="l00086"></a><a class="code" href="structgdbarch__tdep.html#a10ffcc939e80895d51d50fc3cc54f1d4">00086</a>   <span class="keywordtype">int</span> <a class="code" href="structgdbarch__tdep.html#a10ffcc939e80895d51d50fc3cc54f1d4">sizeof_fpregset</a>;
<a name="l00087"></a>00087 };
<a name="l00088"></a>00088 
<a name="l00089"></a>00089 
<a name="l00090"></a>00090 <span class="comment">/* ABI call-saved register information.  */</span>
<a name="l00091"></a>00091 
<a name="l00092"></a>00092 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00093"></a><a class="code" href="s390-tdep_8c.html#a2d670a8ae3df41270eac79e8c6123893">00093</a> <a class="code" href="s390-tdep_8c.html#a2d670a8ae3df41270eac79e8c6123893">s390_register_call_saved</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>)
<a name="l00094"></a>00094 {
<a name="l00095"></a>00095   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00096"></a>00096 
<a name="l00097"></a>00097   <span class="keywordflow">switch</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af1e7479196010341d589e5d793b4c7b1">abi</a>)
<a name="l00098"></a>00098     {
<a name="l00099"></a>00099     <span class="keywordflow">case</span> <a class="code" href="structgdbarch__tdep.html#a4a7b38aa57a0b6f6b0568804ce76aed2accc799a01df359add5c661b6e78cb2d6">ABI_LINUX_S390</a>:
<a name="l00100"></a>00100       <span class="keywordflow">if</span> ((regnum &gt;= <a class="code" href="s390-tdep_8h.html#a9a38931b0a9e3abd78c2cb134432c262">S390_R6_REGNUM</a> &amp;&amp; regnum &lt;= <a class="code" href="s390-tdep_8h.html#a17bfa32d42ccc1e496db2f5c47379dfa">S390_R15_REGNUM</a>)
<a name="l00101"></a>00101           || regnum == <a class="code" href="s390-tdep_8h.html#a502c7d6da3485b600fb7e59df627d76b">S390_F4_REGNUM</a> || regnum == <a class="code" href="s390-tdep_8h.html#abf43433cba1a886bb9db1e91736ba9ca">S390_F6_REGNUM</a>
<a name="l00102"></a>00102           || regnum == <a class="code" href="s390-tdep_8h.html#ac07fc6e371b3155e859a66c1d7f6a770">S390_A0_REGNUM</a>)
<a name="l00103"></a>00103         <span class="keywordflow">return</span> 1;
<a name="l00104"></a>00104 
<a name="l00105"></a>00105       <span class="keywordflow">break</span>;
<a name="l00106"></a>00106 
<a name="l00107"></a>00107     <span class="keywordflow">case</span> <a class="code" href="structgdbarch__tdep.html#a4a7b38aa57a0b6f6b0568804ce76aed2a755c4da50d780771b5a0b5ee11b7f8b8">ABI_LINUX_ZSERIES</a>:
<a name="l00108"></a>00108       <span class="keywordflow">if</span> ((regnum &gt;= <a class="code" href="s390-tdep_8h.html#a9a38931b0a9e3abd78c2cb134432c262">S390_R6_REGNUM</a> &amp;&amp; regnum &lt;= <a class="code" href="s390-tdep_8h.html#a17bfa32d42ccc1e496db2f5c47379dfa">S390_R15_REGNUM</a>)
<a name="l00109"></a>00109           || (regnum &gt;= <a class="code" href="s390-tdep_8h.html#aa815c05c747076543ad31cfe8fba43c2">S390_F8_REGNUM</a> &amp;&amp; regnum &lt;= <a class="code" href="s390-tdep_8h.html#ac30b77264079d9803f98a378a474b21c">S390_F15_REGNUM</a>)
<a name="l00110"></a>00110           || (regnum &gt;= <a class="code" href="s390-tdep_8h.html#ac07fc6e371b3155e859a66c1d7f6a770">S390_A0_REGNUM</a> &amp;&amp; regnum &lt;= <a class="code" href="s390-tdep_8h.html#af8708df5cf37bff6df6daf5b1674e3be">S390_A1_REGNUM</a>))
<a name="l00111"></a>00111         <span class="keywordflow">return</span> 1;
<a name="l00112"></a>00112 
<a name="l00113"></a>00113       <span class="keywordflow">break</span>;
<a name="l00114"></a>00114     }
<a name="l00115"></a>00115 
<a name="l00116"></a>00116   <span class="keywordflow">return</span> 0;
<a name="l00117"></a>00117 }
<a name="l00118"></a>00118 
<a name="l00119"></a>00119 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00120"></a><a class="code" href="s390-tdep_8c.html#a8471b6dd4ee6980152c103c5093a4f8c">00120</a> <a class="code" href="s390-tdep_8c.html#a8471b6dd4ee6980152c103c5093a4f8c">s390_cannot_store_register</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>)
<a name="l00121"></a>00121 {
<a name="l00122"></a>00122   <span class="comment">/* The last-break address is read-only.  */</span>
<a name="l00123"></a>00123   <span class="keywordflow">return</span> regnum == <a class="code" href="s390-tdep_8h.html#a0b8a8d82744c2380c0c451f4672efdb9">S390_LAST_BREAK_REGNUM</a>;
<a name="l00124"></a>00124 }
<a name="l00125"></a>00125 
<a name="l00126"></a>00126 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00127"></a><a class="code" href="s390-tdep_8c.html#af7664446969eaaf7cf6ccd920b76e8dd">00127</a> <a class="code" href="s390-tdep_8c.html#af7664446969eaaf7cf6ccd920b76e8dd">s390_write_pc</a> (<span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="structgdbarch__tdep.html#ab7a207d4e85b564c48238283745247b8">pc</a>)
<a name="l00128"></a>00128 {
<a name="l00129"></a>00129   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="regcache_8c.html#ad4f6d0cdf256b1fa45d59a6d71b50659">get_regcache_arch</a> (regcache);
<a name="l00130"></a>00130   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00131"></a>00131 
<a name="l00132"></a>00132   <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aaf14dc59eceddbc9a4512ae0ca551cb4">pc_regnum</a>, pc);
<a name="l00133"></a>00133 
<a name="l00134"></a>00134   <span class="comment">/* Set special SYSTEM_CALL register to 0 to prevent the kernel from</span>
<a name="l00135"></a>00135 <span class="comment">     messing with the PC we just installed, if we happen to be within</span>
<a name="l00136"></a>00136 <span class="comment">     an interrupted system call that the kernel wants to restart.</span>
<a name="l00137"></a>00137 <span class="comment"></span>
<a name="l00138"></a>00138 <span class="comment">     Note that after we return from the dummy call, the SYSTEM_CALL and</span>
<a name="l00139"></a>00139 <span class="comment">     ORIG_R2 registers will be automatically restored, and the kernel</span>
<a name="l00140"></a>00140 <span class="comment">     continues to restart the system call at this point.  */</span>
<a name="l00141"></a>00141   <span class="keywordflow">if</span> (<a class="code" href="regcache_8c.html#a4c51fa25edb9ce25451b9dc7bd127aac">register_size</a> (gdbarch, <a class="code" href="s390-tdep_8h.html#a9486315bcc2b637872c7ffddd7c0eb01">S390_SYSTEM_CALL_REGNUM</a>) &gt; 0)
<a name="l00142"></a>00142     <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regcache, <a class="code" href="s390-tdep_8h.html#a9486315bcc2b637872c7ffddd7c0eb01">S390_SYSTEM_CALL_REGNUM</a>, 0);
<a name="l00143"></a>00143 }
<a name="l00144"></a>00144 
<a name="l00145"></a>00145 
<a name="l00146"></a>00146 <span class="comment">/* DWARF Register Mapping.  */</span>
<a name="l00147"></a>00147 
<a name="l00148"></a><a class="code" href="s390-tdep_8c.html#aef0d06877f02ce7f01661b89beb09b24">00148</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="s390-tdep_8c.html#aef0d06877f02ce7f01661b89beb09b24">s390_dwarf_regmap</a>[] =
<a name="l00149"></a>00149 {
<a name="l00150"></a>00150   <span class="comment">/* General Purpose Registers.  */</span>
<a name="l00151"></a>00151   <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a1bd56758376a3edb9b1f766868fc1aa8">S390_R1_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a2ba9018e7c0f7f8fc683427061fad546">S390_R2_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#ab3e5162af7f59bfec8e024377852a323">S390_R3_REGNUM</a>,
<a name="l00152"></a>00152   <a class="code" href="s390-tdep_8h.html#aeea631bc9c3f68a85e49c5a852c61bcf">S390_R4_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#ac37c19b4691404ae903f96b071756bbe">S390_R5_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a9a38931b0a9e3abd78c2cb134432c262">S390_R6_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#ad1af49486f4e3150440f135d9e02495a">S390_R7_REGNUM</a>,
<a name="l00153"></a>00153   <a class="code" href="s390-tdep_8h.html#a9fdfa11ff09fb4a63ff887109cc6c8b8">S390_R8_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a2ae96d25e948f4bfd82724a4aad72d46">S390_R9_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#aae18385b1a48ad8f0c7bdc1b25bed4d8">S390_R10_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a7402538b47752338bc083328fd90d525">S390_R11_REGNUM</a>,
<a name="l00154"></a>00154   <a class="code" href="s390-tdep_8h.html#affca8dc82d59441bb26a7676ab2090cc">S390_R12_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a3fe2429a9015412c99029a63d41d35cf">S390_R13_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a409f8f8656947b97358dc2e831aa61bd">S390_R14_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a17bfa32d42ccc1e496db2f5c47379dfa">S390_R15_REGNUM</a>,
<a name="l00155"></a>00155 
<a name="l00156"></a>00156   <span class="comment">/* Floating Point Registers.  */</span>
<a name="l00157"></a>00157   <a class="code" href="s390-tdep_8h.html#a49c471b21ebc6e58b3db78912901bbfc">S390_F0_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a7c071af61ff80001854541f4866d9e63">S390_F2_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a502c7d6da3485b600fb7e59df627d76b">S390_F4_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#abf43433cba1a886bb9db1e91736ba9ca">S390_F6_REGNUM</a>,
<a name="l00158"></a>00158   <a class="code" href="s390-tdep_8h.html#a16be3867de6b3487eb7cc784f05b8608">S390_F1_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#adcb2ea6370c3aff061b05b7605302efa">S390_F3_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a4244f984b304f31ca0a11acea4d7ff35">S390_F5_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a6b1bc911ff0f8afe399ddc0208975213">S390_F7_REGNUM</a>,
<a name="l00159"></a>00159   <a class="code" href="s390-tdep_8h.html#aa815c05c747076543ad31cfe8fba43c2">S390_F8_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a4f0b0654e0a874c92177cfbb6849649f">S390_F10_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#abf4708e6ef37e523c47056e45b009d52">S390_F12_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a53b0bd8287441e52cbb18814710a0ea4">S390_F14_REGNUM</a>,
<a name="l00160"></a>00160   <a class="code" href="s390-tdep_8h.html#ae21450ecd5182553bb6213bd185630e8">S390_F9_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#ad47da5670a4791a3807fcc6cb67b116d">S390_F11_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a79f044ccb4e1b6db9a3c3ef7dd3e589b">S390_F13_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#ac30b77264079d9803f98a378a474b21c">S390_F15_REGNUM</a>,
<a name="l00161"></a>00161 
<a name="l00162"></a>00162   <span class="comment">/* Control Registers (not mapped).  */</span>
<a name="l00163"></a>00163   -1, -1, -1, -1, -1, -1, -1, -1, 
<a name="l00164"></a>00164   -1, -1, -1, -1, -1, -1, -1, -1, 
<a name="l00165"></a>00165 
<a name="l00166"></a>00166   <span class="comment">/* Access Registers.  */</span>
<a name="l00167"></a>00167   <a class="code" href="s390-tdep_8h.html#ac07fc6e371b3155e859a66c1d7f6a770">S390_A0_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#af8708df5cf37bff6df6daf5b1674e3be">S390_A1_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#aa8ecaf7ccfa4788a491474b4edcb8f16">S390_A2_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#ada1f569141b3cc312ebf7b12d1121b5e">S390_A3_REGNUM</a>,
<a name="l00168"></a>00168   <a class="code" href="s390-tdep_8h.html#a981f9249905d29d864cbd7afefbd42ce">S390_A4_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a5c65225174a82ba8a8f38b29681e6df8">S390_A5_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a3da7f8258aea922b494456d33080a2c9">S390_A6_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a78de2a05f81b4e633a945531f5269c75">S390_A7_REGNUM</a>,
<a name="l00169"></a>00169   <a class="code" href="s390-tdep_8h.html#a9d70de7410cfa192c9a38d2aaaa0cf51">S390_A8_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a9f65dfe535824b816c82cdd50bcb385b">S390_A9_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#abeb16d276bb82e27177b72a7fda4891f">S390_A10_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a1e2027e797b5c755bbb86c8cde777e9a">S390_A11_REGNUM</a>,
<a name="l00170"></a>00170   <a class="code" href="s390-tdep_8h.html#ae54f0f52f827424d744d758c25e988a7">S390_A12_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a9a8de7c56d0f1df87ee4a7b771dd40a6">S390_A13_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a75b369ec3718c9ea7e94574a463bfe4a">S390_A14_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#aeaf7ceca6f54b974ba46acc511a75170">S390_A15_REGNUM</a>,
<a name="l00171"></a>00171 
<a name="l00172"></a>00172   <span class="comment">/* Program Status Word.  */</span>
<a name="l00173"></a>00173   <a class="code" href="s390-tdep_8h.html#a2e5117a5450cef1e8280cb8f68c64145">S390_PSWM_REGNUM</a>,
<a name="l00174"></a>00174   <a class="code" href="s390-tdep_8h.html#a0ce4efe91c3fcbfe21e8a67f77057258">S390_PSWA_REGNUM</a>,
<a name="l00175"></a>00175 
<a name="l00176"></a>00176   <span class="comment">/* GPR Lower Half Access.  */</span>
<a name="l00177"></a>00177   <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a1bd56758376a3edb9b1f766868fc1aa8">S390_R1_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a2ba9018e7c0f7f8fc683427061fad546">S390_R2_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#ab3e5162af7f59bfec8e024377852a323">S390_R3_REGNUM</a>,
<a name="l00178"></a>00178   <a class="code" href="s390-tdep_8h.html#aeea631bc9c3f68a85e49c5a852c61bcf">S390_R4_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#ac37c19b4691404ae903f96b071756bbe">S390_R5_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a9a38931b0a9e3abd78c2cb134432c262">S390_R6_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#ad1af49486f4e3150440f135d9e02495a">S390_R7_REGNUM</a>,
<a name="l00179"></a>00179   <a class="code" href="s390-tdep_8h.html#a9fdfa11ff09fb4a63ff887109cc6c8b8">S390_R8_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a2ae96d25e948f4bfd82724a4aad72d46">S390_R9_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#aae18385b1a48ad8f0c7bdc1b25bed4d8">S390_R10_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a7402538b47752338bc083328fd90d525">S390_R11_REGNUM</a>,
<a name="l00180"></a>00180   <a class="code" href="s390-tdep_8h.html#affca8dc82d59441bb26a7676ab2090cc">S390_R12_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a3fe2429a9015412c99029a63d41d35cf">S390_R13_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a409f8f8656947b97358dc2e831aa61bd">S390_R14_REGNUM</a>, <a class="code" href="s390-tdep_8h.html#a17bfa32d42ccc1e496db2f5c47379dfa">S390_R15_REGNUM</a>,
<a name="l00181"></a>00181 
<a name="l00182"></a>00182   <span class="comment">/* GNU/Linux-specific registers (not mapped).  */</span>
<a name="l00183"></a>00183   -1, -1, -1,
<a name="l00184"></a>00184 };
<a name="l00185"></a>00185 
<a name="l00186"></a>00186 <span class="comment">/* Convert DWARF register number REG to the appropriate register</span>
<a name="l00187"></a>00187 <span class="comment">   number used by GDB.  */</span>
<a name="l00188"></a>00188 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00189"></a><a class="code" href="s390-tdep_8c.html#aaaf1e18319754b4a4d9f656cc8eb6382">00189</a> <a class="code" href="s390-tdep_8c.html#aaaf1e18319754b4a4d9f656cc8eb6382">s390_dwarf_reg_to_regnum</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keywordtype">int</span> <a class="code" href="structreg.html">reg</a>)
<a name="l00190"></a>00190 {
<a name="l00191"></a>00191   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00192"></a>00192 
<a name="l00193"></a>00193   <span class="comment">/* In a 32-on-64 debug scenario, debug info refers to the full 64-bit</span>
<a name="l00194"></a>00194 <span class="comment">     GPRs.  Note that call frame information still refers to the 32-bit</span>
<a name="l00195"></a>00195 <span class="comment">     lower halves, because s390_adjust_frame_regnum uses register numbers</span>
<a name="l00196"></a>00196 <span class="comment">     66 .. 81 to access GPRs.  */</span>
<a name="l00197"></a>00197   <span class="keywordflow">if</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a68c8669a924fc7e5703c7aefcdb78ed0">gpr_full_regnum</a> != -1 &amp;&amp; reg &gt;= 0 &amp;&amp; reg &lt; 16)
<a name="l00198"></a>00198     <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a68c8669a924fc7e5703c7aefcdb78ed0">gpr_full_regnum</a> + reg;
<a name="l00199"></a>00199 
<a name="l00200"></a>00200   <span class="keywordflow">if</span> (reg &gt;= 0 &amp;&amp; reg &lt; ARRAY_SIZE (<a class="code" href="s390-tdep_8c.html#aef0d06877f02ce7f01661b89beb09b24">s390_dwarf_regmap</a>))
<a name="l00201"></a>00201     <span class="keywordflow">return</span> <a class="code" href="s390-tdep_8c.html#aef0d06877f02ce7f01661b89beb09b24">s390_dwarf_regmap</a>[reg];
<a name="l00202"></a>00202 
<a name="l00203"></a>00203   <a class="code" href="utils_8c.html#a5fc201a4181499a6b4057a6caa15b5e2">warning</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Unmapped DWARF Register #%d encountered.&quot;</span>), reg);
<a name="l00204"></a>00204   <span class="keywordflow">return</span> -1;
<a name="l00205"></a>00205 }
<a name="l00206"></a>00206 
<a name="l00207"></a>00207 <span class="comment">/* Translate a .eh_frame register to DWARF register, or adjust a</span>
<a name="l00208"></a>00208 <span class="comment">   .debug_frame register.  */</span>
<a name="l00209"></a>00209 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00210"></a><a class="code" href="s390-tdep_8c.html#ab3def1ae926302fa6d3da174f600995b">00210</a> <a class="code" href="s390-tdep_8c.html#ab3def1ae926302fa6d3da174f600995b">s390_adjust_frame_regnum</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keywordtype">int</span> num, <span class="keywordtype">int</span> eh_frame_p)
<a name="l00211"></a>00211 {
<a name="l00212"></a>00212   <span class="comment">/* See s390_dwarf_reg_to_regnum for comments.  */</span>
<a name="l00213"></a>00213   <span class="keywordflow">return</span> (num &gt;= 0 &amp;&amp; num &lt; 16)? num + 66 : num;
<a name="l00214"></a>00214 }
<a name="l00215"></a>00215 
<a name="l00216"></a>00216 
<a name="l00217"></a>00217 <span class="comment">/* Pseudo registers.  */</span>
<a name="l00218"></a>00218 
<a name="l00219"></a>00219 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00220"></a><a class="code" href="s390-tdep_8c.html#af36254a7ce222558134b867d93af6349">00220</a> <a class="code" href="s390-tdep_8c.html#af36254a7ce222558134b867d93af6349">regnum_is_gpr_full</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>)
<a name="l00221"></a>00221 {
<a name="l00222"></a>00222   <span class="keywordflow">return</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a68c8669a924fc7e5703c7aefcdb78ed0">gpr_full_regnum</a> != -1
<a name="l00223"></a>00223           &amp;&amp; regnum &gt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a68c8669a924fc7e5703c7aefcdb78ed0">gpr_full_regnum</a>
<a name="l00224"></a>00224           &amp;&amp; regnum &lt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a68c8669a924fc7e5703c7aefcdb78ed0">gpr_full_regnum</a> + 15);
<a name="l00225"></a>00225 }
<a name="l00226"></a>00226 
<a name="l00227"></a>00227 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00228"></a><a class="code" href="s390-tdep_8c.html#a2141e5f4af316d7936e363c535ea043f">00228</a> <a class="code" href="s390-tdep_8c.html#a2141e5f4af316d7936e363c535ea043f">s390_pseudo_register_name</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>)
<a name="l00229"></a>00229 {
<a name="l00230"></a>00230   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00231"></a>00231 
<a name="l00232"></a>00232   <span class="keywordflow">if</span> (regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aaf14dc59eceddbc9a4512ae0ca551cb4">pc_regnum</a>)
<a name="l00233"></a>00233     <span class="keywordflow">return</span> <span class="stringliteral">&quot;pc&quot;</span>;
<a name="l00234"></a>00234 
<a name="l00235"></a>00235   <span class="keywordflow">if</span> (regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a2431ca4c0c48ea776a4f55f2d3ecb180">cc_regnum</a>)
<a name="l00236"></a>00236     <span class="keywordflow">return</span> <span class="stringliteral">&quot;cc&quot;</span>;
<a name="l00237"></a>00237 
<a name="l00238"></a>00238   <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#af36254a7ce222558134b867d93af6349">regnum_is_gpr_full</a> (tdep, regnum))
<a name="l00239"></a>00239     {
<a name="l00240"></a>00240       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *full_name[] = {
<a name="l00241"></a>00241         <span class="stringliteral">&quot;r0&quot;</span>, <span class="stringliteral">&quot;r1&quot;</span>, <span class="stringliteral">&quot;r2&quot;</span>, <span class="stringliteral">&quot;r3&quot;</span>, <span class="stringliteral">&quot;r4&quot;</span>, <span class="stringliteral">&quot;r5&quot;</span>, <span class="stringliteral">&quot;r6&quot;</span>, <span class="stringliteral">&quot;r7&quot;</span>,
<a name="l00242"></a>00242         <span class="stringliteral">&quot;r8&quot;</span>, <span class="stringliteral">&quot;r9&quot;</span>, <span class="stringliteral">&quot;r10&quot;</span>, <span class="stringliteral">&quot;r11&quot;</span>, <span class="stringliteral">&quot;r12&quot;</span>, <span class="stringliteral">&quot;r13&quot;</span>, <span class="stringliteral">&quot;r14&quot;</span>, <span class="stringliteral">&quot;r15&quot;</span>
<a name="l00243"></a>00243       };
<a name="l00244"></a>00244       <span class="keywordflow">return</span> full_name[regnum - tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a68c8669a924fc7e5703c7aefcdb78ed0">gpr_full_regnum</a>];
<a name="l00245"></a>00245     }
<a name="l00246"></a>00246 
<a name="l00247"></a>00247   <a class="code" href="common-utils_8h.html#aa14285d9d3d4171016ef9cf09447e8bb">internal_error</a> (__FILE__, __LINE__, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;invalid regnum&quot;</span>));
<a name="l00248"></a>00248 }
<a name="l00249"></a>00249 
<a name="l00250"></a>00250 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structtype.html">type</a> *
<a name="l00251"></a><a class="code" href="s390-tdep_8c.html#a6eb51cc584a966b832c8efe28289e827">00251</a> <a class="code" href="s390-tdep_8c.html#a6eb51cc584a966b832c8efe28289e827">s390_pseudo_register_type</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>)
<a name="l00252"></a>00252 {
<a name="l00253"></a>00253   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00254"></a>00254 
<a name="l00255"></a>00255   <span class="keywordflow">if</span> (regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aaf14dc59eceddbc9a4512ae0ca551cb4">pc_regnum</a>)
<a name="l00256"></a>00256     <span class="keywordflow">return</span> <a class="code" href="gdbtypes_8c.html#addd01ebc9ccdf2cacb33ab01e281ddb8">builtin_type</a> (gdbarch)-&gt;<a class="code" href="structbuiltin__type.html#a3db2ea73bd0003f6e6103bd031ba7cb1">builtin_func_ptr</a>;
<a name="l00257"></a>00257 
<a name="l00258"></a>00258   <span class="keywordflow">if</span> (regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a2431ca4c0c48ea776a4f55f2d3ecb180">cc_regnum</a>)
<a name="l00259"></a>00259     <span class="keywordflow">return</span> <a class="code" href="gdbtypes_8c.html#addd01ebc9ccdf2cacb33ab01e281ddb8">builtin_type</a> (gdbarch)-&gt;<a class="code" href="structbuiltin__type.html#ab12f96a04e89e8c951f0eacb379f7ffc">builtin_int</a>;
<a name="l00260"></a>00260 
<a name="l00261"></a>00261   <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#af36254a7ce222558134b867d93af6349">regnum_is_gpr_full</a> (tdep, regnum))
<a name="l00262"></a>00262     <span class="keywordflow">return</span> <a class="code" href="gdbtypes_8c.html#addd01ebc9ccdf2cacb33ab01e281ddb8">builtin_type</a> (gdbarch)-&gt;<a class="code" href="structbuiltin__type.html#a82b181ebbb2bdb20e94beafeb3497674">builtin_uint64</a>;
<a name="l00263"></a>00263 
<a name="l00264"></a>00264   <a class="code" href="common-utils_8h.html#aa14285d9d3d4171016ef9cf09447e8bb">internal_error</a> (__FILE__, __LINE__, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;invalid regnum&quot;</span>));
<a name="l00265"></a>00265 }
<a name="l00266"></a>00266 
<a name="l00267"></a>00267 <span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7">register_status</a>
<a name="l00268"></a><a class="code" href="s390-tdep_8c.html#a8b33ab7cebcc3193f7701457daf1b747">00268</a> <a class="code" href="s390-tdep_8c.html#a8b33ab7cebcc3193f7701457daf1b747">s390_pseudo_register_read</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l00269"></a>00269                            <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>, <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *buf)
<a name="l00270"></a>00270 {
<a name="l00271"></a>00271   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00272"></a>00272   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l00273"></a>00273   <span class="keywordtype">int</span> regsize = <a class="code" href="regcache_8c.html#a4c51fa25edb9ce25451b9dc7bd127aac">register_size</a> (gdbarch, regnum);
<a name="l00274"></a>00274   <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> val;
<a name="l00275"></a>00275 
<a name="l00276"></a>00276   <span class="keywordflow">if</span> (regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aaf14dc59eceddbc9a4512ae0ca551cb4">pc_regnum</a>)
<a name="l00277"></a>00277     {
<a name="l00278"></a>00278       <span class="keyword">enum</span> <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7">register_status</a> <a class="code" href="namespaceexsummary.html#aa4a2eed06e51a1f73ff9053ec9f2591e">status</a>;
<a name="l00279"></a>00279 
<a name="l00280"></a>00280       status = <a class="code" href="regcache_8c.html#a465c747dfdb94bb985d56e0374eb4481">regcache_raw_read_unsigned</a> (regcache, <a class="code" href="s390-tdep_8h.html#a0ce4efe91c3fcbfe21e8a67f77057258">S390_PSWA_REGNUM</a>, &amp;val);
<a name="l00281"></a>00281       <span class="keywordflow">if</span> (status == <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7a0155a2fd1e7e3b53cf1d75cf675d2ea2">REG_VALID</a>)
<a name="l00282"></a>00282         {
<a name="l00283"></a>00283           <span class="keywordflow">if</span> (<a class="code" href="regcache_8c.html#a4c51fa25edb9ce25451b9dc7bd127aac">register_size</a> (gdbarch, <a class="code" href="s390-tdep_8h.html#a0ce4efe91c3fcbfe21e8a67f77057258">S390_PSWA_REGNUM</a>) == 4)
<a name="l00284"></a>00284             val &amp;= 0x7fffffff;
<a name="l00285"></a>00285           <a class="code" href="defs_8h.html#ad11c013c83c64d9d0ee2e4bdeb1fb62d">store_unsigned_integer</a> (buf, regsize, byte_order, val);
<a name="l00286"></a>00286         }
<a name="l00287"></a>00287       <span class="keywordflow">return</span> <a class="code" href="namespaceexsummary.html#aa4a2eed06e51a1f73ff9053ec9f2591e">status</a>;
<a name="l00288"></a>00288     }
<a name="l00289"></a>00289 
<a name="l00290"></a>00290   <span class="keywordflow">if</span> (regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a2431ca4c0c48ea776a4f55f2d3ecb180">cc_regnum</a>)
<a name="l00291"></a>00291     {
<a name="l00292"></a>00292       <span class="keyword">enum</span> <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7">register_status</a> <a class="code" href="namespaceexsummary.html#aa4a2eed06e51a1f73ff9053ec9f2591e">status</a>;
<a name="l00293"></a>00293 
<a name="l00294"></a>00294       status = <a class="code" href="regcache_8c.html#a465c747dfdb94bb985d56e0374eb4481">regcache_raw_read_unsigned</a> (regcache, <a class="code" href="s390-tdep_8h.html#a2e5117a5450cef1e8280cb8f68c64145">S390_PSWM_REGNUM</a>, &amp;val);
<a name="l00295"></a>00295       <span class="keywordflow">if</span> (status == <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7a0155a2fd1e7e3b53cf1d75cf675d2ea2">REG_VALID</a>)
<a name="l00296"></a>00296         {
<a name="l00297"></a>00297           <span class="keywordflow">if</span> (<a class="code" href="regcache_8c.html#a4c51fa25edb9ce25451b9dc7bd127aac">register_size</a> (gdbarch, <a class="code" href="s390-tdep_8h.html#a0ce4efe91c3fcbfe21e8a67f77057258">S390_PSWA_REGNUM</a>) == 4)
<a name="l00298"></a>00298             val = (val &gt;&gt; 12) &amp; 3;
<a name="l00299"></a>00299           <span class="keywordflow">else</span>
<a name="l00300"></a>00300             val = (val &gt;&gt; 44) &amp; 3;
<a name="l00301"></a>00301           <a class="code" href="defs_8h.html#ad11c013c83c64d9d0ee2e4bdeb1fb62d">store_unsigned_integer</a> (buf, regsize, byte_order, val);
<a name="l00302"></a>00302         }
<a name="l00303"></a>00303       <span class="keywordflow">return</span> <a class="code" href="namespaceexsummary.html#aa4a2eed06e51a1f73ff9053ec9f2591e">status</a>;
<a name="l00304"></a>00304     }
<a name="l00305"></a>00305 
<a name="l00306"></a>00306   <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#af36254a7ce222558134b867d93af6349">regnum_is_gpr_full</a> (tdep, regnum))
<a name="l00307"></a>00307     {
<a name="l00308"></a>00308       <span class="keyword">enum</span> <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7">register_status</a> <a class="code" href="namespaceexsummary.html#aa4a2eed06e51a1f73ff9053ec9f2591e">status</a>;
<a name="l00309"></a>00309       <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> val_upper;
<a name="l00310"></a>00310 
<a name="l00311"></a>00311       regnum -= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a68c8669a924fc7e5703c7aefcdb78ed0">gpr_full_regnum</a>;
<a name="l00312"></a>00312 
<a name="l00313"></a>00313       status = <a class="code" href="regcache_8c.html#a465c747dfdb94bb985d56e0374eb4481">regcache_raw_read_unsigned</a> (regcache, <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a> + regnum, &amp;val);
<a name="l00314"></a>00314       <span class="keywordflow">if</span> (status == <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7a0155a2fd1e7e3b53cf1d75cf675d2ea2">REG_VALID</a>)
<a name="l00315"></a>00315         status = <a class="code" href="regcache_8c.html#a465c747dfdb94bb985d56e0374eb4481">regcache_raw_read_unsigned</a> (regcache, <a class="code" href="s390-tdep_8h.html#a1456fa06846f2c14417759e95ab5c493">S390_R0_UPPER_REGNUM</a> + regnum,
<a name="l00316"></a>00316                                              &amp;val_upper);
<a name="l00317"></a>00317       <span class="keywordflow">if</span> (status == <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7a0155a2fd1e7e3b53cf1d75cf675d2ea2">REG_VALID</a>)
<a name="l00318"></a>00318         {
<a name="l00319"></a>00319           val |= val_upper &lt;&lt; 32;
<a name="l00320"></a>00320           <a class="code" href="defs_8h.html#ad11c013c83c64d9d0ee2e4bdeb1fb62d">store_unsigned_integer</a> (buf, regsize, byte_order, val);
<a name="l00321"></a>00321         }
<a name="l00322"></a>00322       <span class="keywordflow">return</span> <a class="code" href="namespaceexsummary.html#aa4a2eed06e51a1f73ff9053ec9f2591e">status</a>;
<a name="l00323"></a>00323     }
<a name="l00324"></a>00324 
<a name="l00325"></a>00325   <a class="code" href="common-utils_8h.html#aa14285d9d3d4171016ef9cf09447e8bb">internal_error</a> (__FILE__, __LINE__, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;invalid regnum&quot;</span>));
<a name="l00326"></a>00326 }
<a name="l00327"></a>00327 
<a name="l00328"></a>00328 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00329"></a><a class="code" href="s390-tdep_8c.html#ad2e14c4da066c5d446c4ecb0241b426b">00329</a> <a class="code" href="s390-tdep_8c.html#ad2e14c4da066c5d446c4ecb0241b426b">s390_pseudo_register_write</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l00330"></a>00330                             <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>, <span class="keyword">const</span> <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *buf)
<a name="l00331"></a>00331 {
<a name="l00332"></a>00332   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00333"></a>00333   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l00334"></a>00334   <span class="keywordtype">int</span> regsize = <a class="code" href="regcache_8c.html#a4c51fa25edb9ce25451b9dc7bd127aac">register_size</a> (gdbarch, regnum);
<a name="l00335"></a>00335   <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> val, psw;
<a name="l00336"></a>00336 
<a name="l00337"></a>00337   <span class="keywordflow">if</span> (regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aaf14dc59eceddbc9a4512ae0ca551cb4">pc_regnum</a>)
<a name="l00338"></a>00338     {
<a name="l00339"></a>00339       val = <a class="code" href="defs_8h.html#a99aec65329508b4d449a4f881026f844">extract_unsigned_integer</a> (buf, regsize, byte_order);
<a name="l00340"></a>00340       <span class="keywordflow">if</span> (<a class="code" href="regcache_8c.html#a4c51fa25edb9ce25451b9dc7bd127aac">register_size</a> (gdbarch, <a class="code" href="s390-tdep_8h.html#a0ce4efe91c3fcbfe21e8a67f77057258">S390_PSWA_REGNUM</a>) == 4)
<a name="l00341"></a>00341         {
<a name="l00342"></a>00342           <a class="code" href="regcache_8c.html#a465c747dfdb94bb985d56e0374eb4481">regcache_raw_read_unsigned</a> (regcache, <a class="code" href="s390-tdep_8h.html#a0ce4efe91c3fcbfe21e8a67f77057258">S390_PSWA_REGNUM</a>, &amp;psw);
<a name="l00343"></a>00343           val = (psw &amp; 0x80000000) | (val &amp; 0x7fffffff);
<a name="l00344"></a>00344         }
<a name="l00345"></a>00345       <a class="code" href="regcache_8c.html#aabf28852a01dbc9342b054408225d396">regcache_raw_write_unsigned</a> (regcache, <a class="code" href="s390-tdep_8h.html#a0ce4efe91c3fcbfe21e8a67f77057258">S390_PSWA_REGNUM</a>, val);
<a name="l00346"></a>00346       <span class="keywordflow">return</span>;
<a name="l00347"></a>00347     }
<a name="l00348"></a>00348 
<a name="l00349"></a>00349   <span class="keywordflow">if</span> (regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a2431ca4c0c48ea776a4f55f2d3ecb180">cc_regnum</a>)
<a name="l00350"></a>00350     {
<a name="l00351"></a>00351       val = <a class="code" href="defs_8h.html#a99aec65329508b4d449a4f881026f844">extract_unsigned_integer</a> (buf, regsize, byte_order);
<a name="l00352"></a>00352       <a class="code" href="regcache_8c.html#a465c747dfdb94bb985d56e0374eb4481">regcache_raw_read_unsigned</a> (regcache, <a class="code" href="s390-tdep_8h.html#a2e5117a5450cef1e8280cb8f68c64145">S390_PSWM_REGNUM</a>, &amp;psw);
<a name="l00353"></a>00353       <span class="keywordflow">if</span> (<a class="code" href="regcache_8c.html#a4c51fa25edb9ce25451b9dc7bd127aac">register_size</a> (gdbarch, <a class="code" href="s390-tdep_8h.html#a0ce4efe91c3fcbfe21e8a67f77057258">S390_PSWA_REGNUM</a>) == 4)
<a name="l00354"></a>00354         val = (psw &amp; ~((<a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a>)3 &lt;&lt; 12)) | ((val &amp; 3) &lt;&lt; 12);
<a name="l00355"></a>00355       <span class="keywordflow">else</span>
<a name="l00356"></a>00356         val = (psw &amp; ~((<a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a>)3 &lt;&lt; 44)) | ((val &amp; 3) &lt;&lt; 44);
<a name="l00357"></a>00357       <a class="code" href="regcache_8c.html#aabf28852a01dbc9342b054408225d396">regcache_raw_write_unsigned</a> (regcache, <a class="code" href="s390-tdep_8h.html#a2e5117a5450cef1e8280cb8f68c64145">S390_PSWM_REGNUM</a>, val);
<a name="l00358"></a>00358       <span class="keywordflow">return</span>;
<a name="l00359"></a>00359     }
<a name="l00360"></a>00360 
<a name="l00361"></a>00361   <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#af36254a7ce222558134b867d93af6349">regnum_is_gpr_full</a> (tdep, regnum))
<a name="l00362"></a>00362     {
<a name="l00363"></a>00363       regnum -= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a68c8669a924fc7e5703c7aefcdb78ed0">gpr_full_regnum</a>;
<a name="l00364"></a>00364       val = <a class="code" href="defs_8h.html#a99aec65329508b4d449a4f881026f844">extract_unsigned_integer</a> (buf, regsize, byte_order);
<a name="l00365"></a>00365       <a class="code" href="regcache_8c.html#aabf28852a01dbc9342b054408225d396">regcache_raw_write_unsigned</a> (regcache, <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a> + regnum,
<a name="l00366"></a>00366                                    val &amp; 0xffffffff);
<a name="l00367"></a>00367       <a class="code" href="regcache_8c.html#aabf28852a01dbc9342b054408225d396">regcache_raw_write_unsigned</a> (regcache, <a class="code" href="s390-tdep_8h.html#a1456fa06846f2c14417759e95ab5c493">S390_R0_UPPER_REGNUM</a> + regnum,
<a name="l00368"></a>00368                                    val &gt;&gt; 32);
<a name="l00369"></a>00369       <span class="keywordflow">return</span>;
<a name="l00370"></a>00370     }
<a name="l00371"></a>00371 
<a name="l00372"></a>00372   <a class="code" href="common-utils_8h.html#aa14285d9d3d4171016ef9cf09447e8bb">internal_error</a> (__FILE__, __LINE__, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;invalid regnum&quot;</span>));
<a name="l00373"></a>00373 }
<a name="l00374"></a>00374 
<a name="l00375"></a>00375 <span class="comment">/* &#39;float&#39; values are stored in the upper half of floating-point</span>
<a name="l00376"></a>00376 <span class="comment">   registers, even though we are otherwise a big-endian platform.  */</span>
<a name="l00377"></a>00377 
<a name="l00378"></a>00378 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structvalue.html">value</a> *
<a name="l00379"></a><a class="code" href="s390-tdep_8c.html#a47e11bdd150965e64ea0c0c5d853f826">00379</a> <a class="code" href="s390-tdep_8c.html#a47e11bdd150965e64ea0c0c5d853f826">s390_value_from_register</a> (<span class="keyword">struct</span> <a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a>, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>,
<a name="l00380"></a>00380                           <span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame)
<a name="l00381"></a>00381 {
<a name="l00382"></a>00382   <span class="keyword">struct </span><a class="code" href="structvalue.html">value</a> *<a class="code" href="structvalue.html">value</a> = <a class="code" href="findvar_8c.html#ab542ad3f3d8b01a2f3e4109fe393b484">default_value_from_register</a> (type, regnum, frame);
<a name="l00383"></a>00383 
<a name="l00384"></a>00384   <a class="code" href="gdbtypes_8c.html#a0bf29d7521d8a8b8735b9a259e380386">check_typedef</a> (type);
<a name="l00385"></a>00385 
<a name="l00386"></a>00386   <span class="keywordflow">if</span> (regnum &gt;= <a class="code" href="s390-tdep_8h.html#a49c471b21ebc6e58b3db78912901bbfc">S390_F0_REGNUM</a> &amp;&amp; regnum &lt;= <a class="code" href="s390-tdep_8h.html#ac30b77264079d9803f98a378a474b21c">S390_F15_REGNUM</a>
<a name="l00387"></a>00387       &amp;&amp; <a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type) &lt; 8)
<a name="l00388"></a>00388     <a class="code" href="value_8c.html#a3d475a6b1e01fde10fa68ed0d666067e">set_value_offset</a> (value, 0);
<a name="l00389"></a>00389 
<a name="l00390"></a>00390   <span class="keywordflow">return</span> value;
<a name="l00391"></a>00391 }
<a name="l00392"></a>00392 
<a name="l00393"></a>00393 <span class="comment">/* Register groups.  */</span>
<a name="l00394"></a>00394 
<a name="l00395"></a>00395 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00396"></a><a class="code" href="s390-tdep_8c.html#a478a5eb871a09da97f425ba4ad156301">00396</a> <a class="code" href="s390-tdep_8c.html#a478a5eb871a09da97f425ba4ad156301">s390_pseudo_register_reggroup_p</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>,
<a name="l00397"></a>00397                                  <span class="keyword">struct</span> <a class="code" href="structreggroup.html">reggroup</a> *group)
<a name="l00398"></a>00398 {
<a name="l00399"></a>00399   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00400"></a>00400 
<a name="l00401"></a>00401   <span class="comment">/* We usually save/restore the whole PSW, which includes PC and CC.</span>
<a name="l00402"></a>00402 <span class="comment">     However, some older gdbservers may not support saving/restoring</span>
<a name="l00403"></a>00403 <span class="comment">     the whole PSW yet, and will return an XML register description</span>
<a name="l00404"></a>00404 <span class="comment">     excluding those from the save/restore register groups.  In those</span>
<a name="l00405"></a>00405 <span class="comment">     cases, we still need to explicitly save/restore PC and CC in order</span>
<a name="l00406"></a>00406 <span class="comment">     to push or pop frames.  Since this doesn&#39;t hurt anything if we</span>
<a name="l00407"></a>00407 <span class="comment">     already save/restore the whole PSW (it&#39;s just redundant), we add</span>
<a name="l00408"></a>00408 <span class="comment">     PC and CC at this point unconditionally.  */</span>
<a name="l00409"></a>00409   <span class="keywordflow">if</span> (group == <a class="code" href="reggroups_8c.html#a9be54927c9d0393a70b8a3f0bc740de3">save_reggroup</a> || group == <a class="code" href="reggroups_8c.html#a627d3b74a917560e7d81d93c472e915c">restore_reggroup</a>)
<a name="l00410"></a>00410     <span class="keywordflow">return</span> regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aaf14dc59eceddbc9a4512ae0ca551cb4">pc_regnum</a> || regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a2431ca4c0c48ea776a4f55f2d3ecb180">cc_regnum</a>;
<a name="l00411"></a>00411 
<a name="l00412"></a>00412   <span class="keywordflow">return</span> <a class="code" href="reggroups_8c.html#af8dd83e11930382e46910f10da113e94">default_register_reggroup_p</a> (gdbarch, regnum, group);
<a name="l00413"></a>00413 }
<a name="l00414"></a>00414 
<a name="l00415"></a>00415 
<a name="l00416"></a>00416 <span class="comment">/* Maps for register sets.  */</span>
<a name="l00417"></a>00417 
<a name="l00418"></a><a class="code" href="s390-tdep_8h.html#a3ab02403fa447e286fedf6ead22be4ea">00418</a> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="s390-tdep_8c.html#a3ab02403fa447e286fedf6ead22be4ea">s390_regmap_gregset</a>[] =
<a name="l00419"></a>00419   {
<a name="l00420"></a>00420     0x00, <a class="code" href="s390-tdep_8h.html#a2e5117a5450cef1e8280cb8f68c64145">S390_PSWM_REGNUM</a>,
<a name="l00421"></a>00421     0x04, <a class="code" href="s390-tdep_8h.html#a0ce4efe91c3fcbfe21e8a67f77057258">S390_PSWA_REGNUM</a>,
<a name="l00422"></a>00422     0x08, <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a>,
<a name="l00423"></a>00423     0x0c, <a class="code" href="s390-tdep_8h.html#a1bd56758376a3edb9b1f766868fc1aa8">S390_R1_REGNUM</a>,
<a name="l00424"></a>00424     0x10, <a class="code" href="s390-tdep_8h.html#a2ba9018e7c0f7f8fc683427061fad546">S390_R2_REGNUM</a>,
<a name="l00425"></a>00425     0x14, <a class="code" href="s390-tdep_8h.html#ab3e5162af7f59bfec8e024377852a323">S390_R3_REGNUM</a>,
<a name="l00426"></a>00426     0x18, <a class="code" href="s390-tdep_8h.html#aeea631bc9c3f68a85e49c5a852c61bcf">S390_R4_REGNUM</a>,
<a name="l00427"></a>00427     0x1c, <a class="code" href="s390-tdep_8h.html#ac37c19b4691404ae903f96b071756bbe">S390_R5_REGNUM</a>,
<a name="l00428"></a>00428     0x20, <a class="code" href="s390-tdep_8h.html#a9a38931b0a9e3abd78c2cb134432c262">S390_R6_REGNUM</a>,
<a name="l00429"></a>00429     0x24, <a class="code" href="s390-tdep_8h.html#ad1af49486f4e3150440f135d9e02495a">S390_R7_REGNUM</a>,
<a name="l00430"></a>00430     0x28, <a class="code" href="s390-tdep_8h.html#a9fdfa11ff09fb4a63ff887109cc6c8b8">S390_R8_REGNUM</a>,
<a name="l00431"></a>00431     0x2c, <a class="code" href="s390-tdep_8h.html#a2ae96d25e948f4bfd82724a4aad72d46">S390_R9_REGNUM</a>,
<a name="l00432"></a>00432     0x30, <a class="code" href="s390-tdep_8h.html#aae18385b1a48ad8f0c7bdc1b25bed4d8">S390_R10_REGNUM</a>,
<a name="l00433"></a>00433     0x34, <a class="code" href="s390-tdep_8h.html#a7402538b47752338bc083328fd90d525">S390_R11_REGNUM</a>,
<a name="l00434"></a>00434     0x38, <a class="code" href="s390-tdep_8h.html#affca8dc82d59441bb26a7676ab2090cc">S390_R12_REGNUM</a>,
<a name="l00435"></a>00435     0x3c, <a class="code" href="s390-tdep_8h.html#a3fe2429a9015412c99029a63d41d35cf">S390_R13_REGNUM</a>,
<a name="l00436"></a>00436     0x40, <a class="code" href="s390-tdep_8h.html#a409f8f8656947b97358dc2e831aa61bd">S390_R14_REGNUM</a>,
<a name="l00437"></a>00437     0x44, <a class="code" href="s390-tdep_8h.html#a17bfa32d42ccc1e496db2f5c47379dfa">S390_R15_REGNUM</a>,
<a name="l00438"></a>00438     0x48, <a class="code" href="s390-tdep_8h.html#ac07fc6e371b3155e859a66c1d7f6a770">S390_A0_REGNUM</a>,
<a name="l00439"></a>00439     0x4c, <a class="code" href="s390-tdep_8h.html#af8708df5cf37bff6df6daf5b1674e3be">S390_A1_REGNUM</a>,
<a name="l00440"></a>00440     0x50, <a class="code" href="s390-tdep_8h.html#aa8ecaf7ccfa4788a491474b4edcb8f16">S390_A2_REGNUM</a>,
<a name="l00441"></a>00441     0x54, <a class="code" href="s390-tdep_8h.html#ada1f569141b3cc312ebf7b12d1121b5e">S390_A3_REGNUM</a>,
<a name="l00442"></a>00442     0x58, <a class="code" href="s390-tdep_8h.html#a981f9249905d29d864cbd7afefbd42ce">S390_A4_REGNUM</a>,
<a name="l00443"></a>00443     0x5c, <a class="code" href="s390-tdep_8h.html#a5c65225174a82ba8a8f38b29681e6df8">S390_A5_REGNUM</a>,
<a name="l00444"></a>00444     0x60, <a class="code" href="s390-tdep_8h.html#a3da7f8258aea922b494456d33080a2c9">S390_A6_REGNUM</a>,
<a name="l00445"></a>00445     0x64, <a class="code" href="s390-tdep_8h.html#a78de2a05f81b4e633a945531f5269c75">S390_A7_REGNUM</a>,
<a name="l00446"></a>00446     0x68, <a class="code" href="s390-tdep_8h.html#a9d70de7410cfa192c9a38d2aaaa0cf51">S390_A8_REGNUM</a>,
<a name="l00447"></a>00447     0x6c, <a class="code" href="s390-tdep_8h.html#a9f65dfe535824b816c82cdd50bcb385b">S390_A9_REGNUM</a>,
<a name="l00448"></a>00448     0x70, <a class="code" href="s390-tdep_8h.html#abeb16d276bb82e27177b72a7fda4891f">S390_A10_REGNUM</a>,
<a name="l00449"></a>00449     0x74, <a class="code" href="s390-tdep_8h.html#a1e2027e797b5c755bbb86c8cde777e9a">S390_A11_REGNUM</a>,
<a name="l00450"></a>00450     0x78, <a class="code" href="s390-tdep_8h.html#ae54f0f52f827424d744d758c25e988a7">S390_A12_REGNUM</a>,
<a name="l00451"></a>00451     0x7c, <a class="code" href="s390-tdep_8h.html#a9a8de7c56d0f1df87ee4a7b771dd40a6">S390_A13_REGNUM</a>,
<a name="l00452"></a>00452     0x80, <a class="code" href="s390-tdep_8h.html#a75b369ec3718c9ea7e94574a463bfe4a">S390_A14_REGNUM</a>,
<a name="l00453"></a>00453     0x84, <a class="code" href="s390-tdep_8h.html#aeaf7ceca6f54b974ba46acc511a75170">S390_A15_REGNUM</a>,
<a name="l00454"></a>00454     0x88, <a class="code" href="s390-tdep_8h.html#ad40a364ec9499804a5fc5f0c3e25a86a">S390_ORIG_R2_REGNUM</a>,
<a name="l00455"></a>00455     -1, -1
<a name="l00456"></a>00456   };
<a name="l00457"></a>00457 
<a name="l00458"></a><a class="code" href="s390-tdep_8h.html#a1ab95692c3765b2a50e2343ea739edd8">00458</a> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="s390-tdep_8c.html#a1ab95692c3765b2a50e2343ea739edd8">s390x_regmap_gregset</a>[] =
<a name="l00459"></a>00459   {
<a name="l00460"></a>00460     0x00, <a class="code" href="s390-tdep_8h.html#a2e5117a5450cef1e8280cb8f68c64145">S390_PSWM_REGNUM</a>,
<a name="l00461"></a>00461     0x08, <a class="code" href="s390-tdep_8h.html#a0ce4efe91c3fcbfe21e8a67f77057258">S390_PSWA_REGNUM</a>,
<a name="l00462"></a>00462     0x10, <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a>,
<a name="l00463"></a>00463     0x18, <a class="code" href="s390-tdep_8h.html#a1bd56758376a3edb9b1f766868fc1aa8">S390_R1_REGNUM</a>,
<a name="l00464"></a>00464     0x20, <a class="code" href="s390-tdep_8h.html#a2ba9018e7c0f7f8fc683427061fad546">S390_R2_REGNUM</a>,
<a name="l00465"></a>00465     0x28, <a class="code" href="s390-tdep_8h.html#ab3e5162af7f59bfec8e024377852a323">S390_R3_REGNUM</a>,
<a name="l00466"></a>00466     0x30, <a class="code" href="s390-tdep_8h.html#aeea631bc9c3f68a85e49c5a852c61bcf">S390_R4_REGNUM</a>,
<a name="l00467"></a>00467     0x38, <a class="code" href="s390-tdep_8h.html#ac37c19b4691404ae903f96b071756bbe">S390_R5_REGNUM</a>,
<a name="l00468"></a>00468     0x40, <a class="code" href="s390-tdep_8h.html#a9a38931b0a9e3abd78c2cb134432c262">S390_R6_REGNUM</a>,
<a name="l00469"></a>00469     0x48, <a class="code" href="s390-tdep_8h.html#ad1af49486f4e3150440f135d9e02495a">S390_R7_REGNUM</a>,
<a name="l00470"></a>00470     0x50, <a class="code" href="s390-tdep_8h.html#a9fdfa11ff09fb4a63ff887109cc6c8b8">S390_R8_REGNUM</a>,
<a name="l00471"></a>00471     0x58, <a class="code" href="s390-tdep_8h.html#a2ae96d25e948f4bfd82724a4aad72d46">S390_R9_REGNUM</a>,
<a name="l00472"></a>00472     0x60, <a class="code" href="s390-tdep_8h.html#aae18385b1a48ad8f0c7bdc1b25bed4d8">S390_R10_REGNUM</a>,
<a name="l00473"></a>00473     0x68, <a class="code" href="s390-tdep_8h.html#a7402538b47752338bc083328fd90d525">S390_R11_REGNUM</a>,
<a name="l00474"></a>00474     0x70, <a class="code" href="s390-tdep_8h.html#affca8dc82d59441bb26a7676ab2090cc">S390_R12_REGNUM</a>,
<a name="l00475"></a>00475     0x78, <a class="code" href="s390-tdep_8h.html#a3fe2429a9015412c99029a63d41d35cf">S390_R13_REGNUM</a>,
<a name="l00476"></a>00476     0x80, <a class="code" href="s390-tdep_8h.html#a409f8f8656947b97358dc2e831aa61bd">S390_R14_REGNUM</a>,
<a name="l00477"></a>00477     0x88, <a class="code" href="s390-tdep_8h.html#a17bfa32d42ccc1e496db2f5c47379dfa">S390_R15_REGNUM</a>,
<a name="l00478"></a>00478     0x90, <a class="code" href="s390-tdep_8h.html#ac07fc6e371b3155e859a66c1d7f6a770">S390_A0_REGNUM</a>,
<a name="l00479"></a>00479     0x94, <a class="code" href="s390-tdep_8h.html#af8708df5cf37bff6df6daf5b1674e3be">S390_A1_REGNUM</a>,
<a name="l00480"></a>00480     0x98, <a class="code" href="s390-tdep_8h.html#aa8ecaf7ccfa4788a491474b4edcb8f16">S390_A2_REGNUM</a>,
<a name="l00481"></a>00481     0x9c, <a class="code" href="s390-tdep_8h.html#ada1f569141b3cc312ebf7b12d1121b5e">S390_A3_REGNUM</a>,
<a name="l00482"></a>00482     0xa0, <a class="code" href="s390-tdep_8h.html#a981f9249905d29d864cbd7afefbd42ce">S390_A4_REGNUM</a>,
<a name="l00483"></a>00483     0xa4, <a class="code" href="s390-tdep_8h.html#a5c65225174a82ba8a8f38b29681e6df8">S390_A5_REGNUM</a>,
<a name="l00484"></a>00484     0xa8, <a class="code" href="s390-tdep_8h.html#a3da7f8258aea922b494456d33080a2c9">S390_A6_REGNUM</a>,
<a name="l00485"></a>00485     0xac, <a class="code" href="s390-tdep_8h.html#a78de2a05f81b4e633a945531f5269c75">S390_A7_REGNUM</a>,
<a name="l00486"></a>00486     0xb0, <a class="code" href="s390-tdep_8h.html#a9d70de7410cfa192c9a38d2aaaa0cf51">S390_A8_REGNUM</a>,
<a name="l00487"></a>00487     0xb4, <a class="code" href="s390-tdep_8h.html#a9f65dfe535824b816c82cdd50bcb385b">S390_A9_REGNUM</a>,
<a name="l00488"></a>00488     0xb8, <a class="code" href="s390-tdep_8h.html#abeb16d276bb82e27177b72a7fda4891f">S390_A10_REGNUM</a>,
<a name="l00489"></a>00489     0xbc, <a class="code" href="s390-tdep_8h.html#a1e2027e797b5c755bbb86c8cde777e9a">S390_A11_REGNUM</a>,
<a name="l00490"></a>00490     0xc0, <a class="code" href="s390-tdep_8h.html#ae54f0f52f827424d744d758c25e988a7">S390_A12_REGNUM</a>,
<a name="l00491"></a>00491     0xc4, <a class="code" href="s390-tdep_8h.html#a9a8de7c56d0f1df87ee4a7b771dd40a6">S390_A13_REGNUM</a>,
<a name="l00492"></a>00492     0xc8, <a class="code" href="s390-tdep_8h.html#a75b369ec3718c9ea7e94574a463bfe4a">S390_A14_REGNUM</a>,
<a name="l00493"></a>00493     0xcc, <a class="code" href="s390-tdep_8h.html#aeaf7ceca6f54b974ba46acc511a75170">S390_A15_REGNUM</a>,
<a name="l00494"></a>00494     0x10, <a class="code" href="s390-tdep_8h.html#a1456fa06846f2c14417759e95ab5c493">S390_R0_UPPER_REGNUM</a>,
<a name="l00495"></a>00495     0x18, <a class="code" href="s390-tdep_8h.html#a0f659425f311198739e7e1afdc9a7b2c">S390_R1_UPPER_REGNUM</a>,
<a name="l00496"></a>00496     0x20, <a class="code" href="s390-tdep_8h.html#a16be5398ef6b4e2f38b649ad52d7379c">S390_R2_UPPER_REGNUM</a>,
<a name="l00497"></a>00497     0x28, <a class="code" href="s390-tdep_8h.html#af3d6519e4095a211c1f10d843fae1290">S390_R3_UPPER_REGNUM</a>,
<a name="l00498"></a>00498     0x30, <a class="code" href="s390-tdep_8h.html#a078432b17d4cc66a5df268469bd35c7a">S390_R4_UPPER_REGNUM</a>,
<a name="l00499"></a>00499     0x38, <a class="code" href="s390-tdep_8h.html#a0a406b4479094705cf79acf931211f04">S390_R5_UPPER_REGNUM</a>,
<a name="l00500"></a>00500     0x40, <a class="code" href="s390-tdep_8h.html#af67072087078674ad486c37233cadcfd">S390_R6_UPPER_REGNUM</a>,
<a name="l00501"></a>00501     0x48, <a class="code" href="s390-tdep_8h.html#a1c959fc584d52733f34a92bfcb8cfb0d">S390_R7_UPPER_REGNUM</a>,
<a name="l00502"></a>00502     0x50, <a class="code" href="s390-tdep_8h.html#a98e27adca9e40e633f23d0afa0f988fe">S390_R8_UPPER_REGNUM</a>,
<a name="l00503"></a>00503     0x58, <a class="code" href="s390-tdep_8h.html#a8d718c2d9e9c3c77251db0051a01704f">S390_R9_UPPER_REGNUM</a>,
<a name="l00504"></a>00504     0x60, <a class="code" href="s390-tdep_8h.html#a5ff71985da384c19618e11de038ddcbb">S390_R10_UPPER_REGNUM</a>,
<a name="l00505"></a>00505     0x68, <a class="code" href="s390-tdep_8h.html#ac05da6153bf047a27fc3c19ffe308a23">S390_R11_UPPER_REGNUM</a>,
<a name="l00506"></a>00506     0x70, <a class="code" href="s390-tdep_8h.html#a45682aefc782cce6995fec25076dc2d9">S390_R12_UPPER_REGNUM</a>,
<a name="l00507"></a>00507     0x78, <a class="code" href="s390-tdep_8h.html#ab1e96fd75f61d7433224e44527b3ac06">S390_R13_UPPER_REGNUM</a>,
<a name="l00508"></a>00508     0x80, <a class="code" href="s390-tdep_8h.html#ab894fd2f8e384c17b075bcea6d5ccfd2">S390_R14_UPPER_REGNUM</a>,
<a name="l00509"></a>00509     0x88, <a class="code" href="s390-tdep_8h.html#a282e42354117a472978c51ef550e31ed">S390_R15_UPPER_REGNUM</a>,
<a name="l00510"></a>00510     0xd0, <a class="code" href="s390-tdep_8h.html#ad40a364ec9499804a5fc5f0c3e25a86a">S390_ORIG_R2_REGNUM</a>,
<a name="l00511"></a>00511     -1, -1
<a name="l00512"></a>00512   };
<a name="l00513"></a>00513 
<a name="l00514"></a><a class="code" href="s390-tdep_8h.html#a28e016bde5bda8157a7c9782ef429c57">00514</a> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="s390-tdep_8c.html#a28e016bde5bda8157a7c9782ef429c57">s390_regmap_fpregset</a>[] =
<a name="l00515"></a>00515   {
<a name="l00516"></a>00516     0x00, <a class="code" href="s390-tdep_8h.html#ac9d653aef87ad7c8c68547566a40f654">S390_FPC_REGNUM</a>,
<a name="l00517"></a>00517     0x08, <a class="code" href="s390-tdep_8h.html#a49c471b21ebc6e58b3db78912901bbfc">S390_F0_REGNUM</a>,
<a name="l00518"></a>00518     0x10, <a class="code" href="s390-tdep_8h.html#a16be3867de6b3487eb7cc784f05b8608">S390_F1_REGNUM</a>,
<a name="l00519"></a>00519     0x18, <a class="code" href="s390-tdep_8h.html#a7c071af61ff80001854541f4866d9e63">S390_F2_REGNUM</a>,
<a name="l00520"></a>00520     0x20, <a class="code" href="s390-tdep_8h.html#adcb2ea6370c3aff061b05b7605302efa">S390_F3_REGNUM</a>,
<a name="l00521"></a>00521     0x28, <a class="code" href="s390-tdep_8h.html#a502c7d6da3485b600fb7e59df627d76b">S390_F4_REGNUM</a>,
<a name="l00522"></a>00522     0x30, <a class="code" href="s390-tdep_8h.html#a4244f984b304f31ca0a11acea4d7ff35">S390_F5_REGNUM</a>,
<a name="l00523"></a>00523     0x38, <a class="code" href="s390-tdep_8h.html#abf43433cba1a886bb9db1e91736ba9ca">S390_F6_REGNUM</a>,
<a name="l00524"></a>00524     0x40, <a class="code" href="s390-tdep_8h.html#a6b1bc911ff0f8afe399ddc0208975213">S390_F7_REGNUM</a>,
<a name="l00525"></a>00525     0x48, <a class="code" href="s390-tdep_8h.html#aa815c05c747076543ad31cfe8fba43c2">S390_F8_REGNUM</a>,
<a name="l00526"></a>00526     0x50, <a class="code" href="s390-tdep_8h.html#ae21450ecd5182553bb6213bd185630e8">S390_F9_REGNUM</a>,
<a name="l00527"></a>00527     0x58, <a class="code" href="s390-tdep_8h.html#a4f0b0654e0a874c92177cfbb6849649f">S390_F10_REGNUM</a>,
<a name="l00528"></a>00528     0x60, <a class="code" href="s390-tdep_8h.html#ad47da5670a4791a3807fcc6cb67b116d">S390_F11_REGNUM</a>,
<a name="l00529"></a>00529     0x68, <a class="code" href="s390-tdep_8h.html#abf4708e6ef37e523c47056e45b009d52">S390_F12_REGNUM</a>,
<a name="l00530"></a>00530     0x70, <a class="code" href="s390-tdep_8h.html#a79f044ccb4e1b6db9a3c3ef7dd3e589b">S390_F13_REGNUM</a>,
<a name="l00531"></a>00531     0x78, <a class="code" href="s390-tdep_8h.html#a53b0bd8287441e52cbb18814710a0ea4">S390_F14_REGNUM</a>,
<a name="l00532"></a>00532     0x80, <a class="code" href="s390-tdep_8h.html#ac30b77264079d9803f98a378a474b21c">S390_F15_REGNUM</a>,
<a name="l00533"></a>00533     -1, -1
<a name="l00534"></a>00534   };
<a name="l00535"></a>00535 
<a name="l00536"></a><a class="code" href="s390-tdep_8c.html#ad6e3de8bff993723bde764f4473b46fa">00536</a> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="s390-tdep_8c.html#ad6e3de8bff993723bde764f4473b46fa">s390_regmap_upper</a>[] =
<a name="l00537"></a>00537   {
<a name="l00538"></a>00538     0x00, <a class="code" href="s390-tdep_8h.html#a1456fa06846f2c14417759e95ab5c493">S390_R0_UPPER_REGNUM</a>,
<a name="l00539"></a>00539     0x04, <a class="code" href="s390-tdep_8h.html#a0f659425f311198739e7e1afdc9a7b2c">S390_R1_UPPER_REGNUM</a>,
<a name="l00540"></a>00540     0x08, <a class="code" href="s390-tdep_8h.html#a16be5398ef6b4e2f38b649ad52d7379c">S390_R2_UPPER_REGNUM</a>,
<a name="l00541"></a>00541     0x0c, <a class="code" href="s390-tdep_8h.html#af3d6519e4095a211c1f10d843fae1290">S390_R3_UPPER_REGNUM</a>,
<a name="l00542"></a>00542     0x10, <a class="code" href="s390-tdep_8h.html#a078432b17d4cc66a5df268469bd35c7a">S390_R4_UPPER_REGNUM</a>,
<a name="l00543"></a>00543     0x14, <a class="code" href="s390-tdep_8h.html#a0a406b4479094705cf79acf931211f04">S390_R5_UPPER_REGNUM</a>,
<a name="l00544"></a>00544     0x18, <a class="code" href="s390-tdep_8h.html#af67072087078674ad486c37233cadcfd">S390_R6_UPPER_REGNUM</a>,
<a name="l00545"></a>00545     0x1c, <a class="code" href="s390-tdep_8h.html#a1c959fc584d52733f34a92bfcb8cfb0d">S390_R7_UPPER_REGNUM</a>,
<a name="l00546"></a>00546     0x20, <a class="code" href="s390-tdep_8h.html#a98e27adca9e40e633f23d0afa0f988fe">S390_R8_UPPER_REGNUM</a>,
<a name="l00547"></a>00547     0x24, <a class="code" href="s390-tdep_8h.html#a8d718c2d9e9c3c77251db0051a01704f">S390_R9_UPPER_REGNUM</a>,
<a name="l00548"></a>00548     0x28, <a class="code" href="s390-tdep_8h.html#a5ff71985da384c19618e11de038ddcbb">S390_R10_UPPER_REGNUM</a>,
<a name="l00549"></a>00549     0x2c, <a class="code" href="s390-tdep_8h.html#ac05da6153bf047a27fc3c19ffe308a23">S390_R11_UPPER_REGNUM</a>,
<a name="l00550"></a>00550     0x30, <a class="code" href="s390-tdep_8h.html#a45682aefc782cce6995fec25076dc2d9">S390_R12_UPPER_REGNUM</a>,
<a name="l00551"></a>00551     0x34, <a class="code" href="s390-tdep_8h.html#ab1e96fd75f61d7433224e44527b3ac06">S390_R13_UPPER_REGNUM</a>,
<a name="l00552"></a>00552     0x38, <a class="code" href="s390-tdep_8h.html#ab894fd2f8e384c17b075bcea6d5ccfd2">S390_R14_UPPER_REGNUM</a>,
<a name="l00553"></a>00553     0x3c, <a class="code" href="s390-tdep_8h.html#a282e42354117a472978c51ef550e31ed">S390_R15_UPPER_REGNUM</a>,
<a name="l00554"></a>00554     -1, -1
<a name="l00555"></a>00555   };
<a name="l00556"></a>00556 
<a name="l00557"></a><a class="code" href="s390-tdep_8h.html#ab3b43f6d63a15b18c70a0cd9a33ef01f">00557</a> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="s390-tdep_8c.html#ab3b43f6d63a15b18c70a0cd9a33ef01f">s390_regmap_last_break</a>[] =
<a name="l00558"></a>00558   {
<a name="l00559"></a>00559     0x04, <a class="code" href="s390-tdep_8h.html#a0b8a8d82744c2380c0c451f4672efdb9">S390_LAST_BREAK_REGNUM</a>,
<a name="l00560"></a>00560     -1, -1
<a name="l00561"></a>00561   };
<a name="l00562"></a>00562 
<a name="l00563"></a><a class="code" href="s390-tdep_8h.html#ae822fba45274baac8c5eee02aa970a95">00563</a> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="s390-tdep_8c.html#ae822fba45274baac8c5eee02aa970a95">s390x_regmap_last_break</a>[] =
<a name="l00564"></a>00564   {
<a name="l00565"></a>00565     0x00, <a class="code" href="s390-tdep_8h.html#a0b8a8d82744c2380c0c451f4672efdb9">S390_LAST_BREAK_REGNUM</a>,
<a name="l00566"></a>00566     -1, -1
<a name="l00567"></a>00567   };
<a name="l00568"></a>00568 
<a name="l00569"></a><a class="code" href="s390-tdep_8h.html#a7cd59617a4d50b540ad599f7f1581d58">00569</a> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="s390-tdep_8c.html#a7cd59617a4d50b540ad599f7f1581d58">s390_regmap_system_call</a>[] =
<a name="l00570"></a>00570   {
<a name="l00571"></a>00571     0x00, <a class="code" href="s390-tdep_8h.html#a9486315bcc2b637872c7ffddd7c0eb01">S390_SYSTEM_CALL_REGNUM</a>,
<a name="l00572"></a>00572     -1, -1
<a name="l00573"></a>00573   };
<a name="l00574"></a>00574 
<a name="l00575"></a><a class="code" href="s390-tdep_8h.html#a67a399caf3854d34455db89ba0de6fae">00575</a> <span class="keyword">const</span> <span class="keywordtype">short</span> <a class="code" href="s390-tdep_8c.html#a67a399caf3854d34455db89ba0de6fae">s390_regmap_tdb</a>[] =
<a name="l00576"></a>00576   {
<a name="l00577"></a>00577     0x00, <a class="code" href="s390-tdep_8h.html#ae021c40f8b76519f4274b94f6e84d250">S390_TDB_DWORD0_REGNUM</a>,
<a name="l00578"></a>00578     0x08, <a class="code" href="s390-tdep_8h.html#a4c69b61368ab15949bc050fd2006060c">S390_TDB_ABORT_CODE_REGNUM</a>,
<a name="l00579"></a>00579     0x10, <a class="code" href="s390-tdep_8h.html#a47b4eaacb18309ef81762f81f37d792e">S390_TDB_CONFLICT_TOKEN_REGNUM</a>,
<a name="l00580"></a>00580     0x18, <a class="code" href="s390-tdep_8h.html#ac25a0141c56f063556f1c0e018fbefee">S390_TDB_ATIA_REGNUM</a>,
<a name="l00581"></a>00581     0x80, <a class="code" href="s390-tdep_8h.html#a7d07f692b757318a7fb2eb117a11e5bd">S390_TDB_R0_REGNUM</a>,
<a name="l00582"></a>00582     0x88, <a class="code" href="s390-tdep_8h.html#a7966e6813a5fcebb5cb5341afaf51ce0">S390_TDB_R1_REGNUM</a>,
<a name="l00583"></a>00583     0x90, <a class="code" href="s390-tdep_8h.html#a3115c64dcec61c5dfe97e58fcc601940">S390_TDB_R2_REGNUM</a>,
<a name="l00584"></a>00584     0x98, <a class="code" href="s390-tdep_8h.html#a902feeef15d5e45b4eabc135a19bac6f">S390_TDB_R3_REGNUM</a>,
<a name="l00585"></a>00585     0xa0, <a class="code" href="s390-tdep_8h.html#a141dbb0803afce6665da9a54cebaa4b8">S390_TDB_R4_REGNUM</a>,
<a name="l00586"></a>00586     0xa8, <a class="code" href="s390-tdep_8h.html#acc39f64db63b18ffcff884d1a3443c9c">S390_TDB_R5_REGNUM</a>,
<a name="l00587"></a>00587     0xb0, <a class="code" href="s390-tdep_8h.html#a5e9dafc721a568226a9359a0d25ff995">S390_TDB_R6_REGNUM</a>,
<a name="l00588"></a>00588     0xb8, <a class="code" href="s390-tdep_8h.html#a1a67925f78fc5a8918f83cbd1f8fd67f">S390_TDB_R7_REGNUM</a>,
<a name="l00589"></a>00589     0xc0, <a class="code" href="s390-tdep_8h.html#ad64c8bf293ebff439116243d06369802">S390_TDB_R8_REGNUM</a>,
<a name="l00590"></a>00590     0xc8, <a class="code" href="s390-tdep_8h.html#a1608236c459f677b5afc1519b0a4d49f">S390_TDB_R9_REGNUM</a>,
<a name="l00591"></a>00591     0xd0, <a class="code" href="s390-tdep_8h.html#aa087618697a46ad3edda49e6472294e9">S390_TDB_R10_REGNUM</a>,
<a name="l00592"></a>00592     0xd8, <a class="code" href="s390-tdep_8h.html#a82026f8718c9f3ade5cdbad017957193">S390_TDB_R11_REGNUM</a>,
<a name="l00593"></a>00593     0xe0, <a class="code" href="s390-tdep_8h.html#ad4af6b4b18a1cc6e409e0803e58ba97e">S390_TDB_R12_REGNUM</a>,
<a name="l00594"></a>00594     0xe8, <a class="code" href="s390-tdep_8h.html#ac4edf637b7b74d27614145309cbb6cc1">S390_TDB_R13_REGNUM</a>,
<a name="l00595"></a>00595     0xf0, <a class="code" href="s390-tdep_8h.html#a395f19c2a254c2a21d721cbc092ab589">S390_TDB_R14_REGNUM</a>,
<a name="l00596"></a>00596     0xf8, <a class="code" href="s390-tdep_8h.html#ab975ade39df3ce3f51921cafec105c55">S390_TDB_R15_REGNUM</a>,
<a name="l00597"></a>00597     -1, -1
<a name="l00598"></a>00598   };
<a name="l00599"></a>00599 
<a name="l00600"></a>00600 
<a name="l00601"></a>00601 <span class="comment">/* Supply register REGNUM from the register set REGSET to register cache </span>
<a name="l00602"></a>00602 <span class="comment">   REGCACHE.  If REGNUM is -1, do this for all registers in REGSET.  */</span>
<a name="l00603"></a>00603 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00604"></a><a class="code" href="s390-tdep_8c.html#a61df5bdf2efc6d8bf3354ce778ff6155">00604</a> <a class="code" href="s390-tdep_8c.html#a61df5bdf2efc6d8bf3354ce778ff6155">s390_supply_regset</a> (<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structregset.html">regset</a> *<a class="code" href="structregset.html">regset</a>, <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l00605"></a>00605                     <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>, <span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="structgdbarch__tdep.html#a1dafc33980aca4b7214915336ef2c55d">regs</a>, <span class="keywordtype">size_t</span> <a class="code" href="exec_8h.html#a00f945351279d3c8935f13d2b9f9b808">len</a>)
<a name="l00606"></a>00606 {
<a name="l00607"></a>00607   <span class="keyword">const</span> <span class="keywordtype">short</span> *map;
<a name="l00608"></a>00608   <span class="keywordflow">for</span> (map = regset-&gt;<a class="code" href="structregset.html#a48a85083a9ec739072ed3a6030e52edd">descr</a>; map[0] &gt;= 0; map += 2)
<a name="l00609"></a>00609     <span class="keywordflow">if</span> (regnum == -1 || regnum == map[1])
<a name="l00610"></a>00610       <a class="code" href="regcache_8c.html#a127ceeb6f30d3bab748c60570ac077a6">regcache_raw_supply</a> (regcache, map[1],
<a name="l00611"></a>00611                            regs ? (<span class="keyword">const</span> <span class="keywordtype">char</span> *)regs + map[0] : NULL);
<a name="l00612"></a>00612 }
<a name="l00613"></a>00613 
<a name="l00614"></a>00614 <span class="comment">/* Supply the TDB regset.  Like s390_supply_regset, but invalidate the</span>
<a name="l00615"></a>00615 <span class="comment">   TDB registers unless the TDB format field is valid.  */</span>
<a name="l00616"></a>00616 
<a name="l00617"></a>00617 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00618"></a><a class="code" href="s390-tdep_8c.html#a29d015bb1bf8e2e85499a71b89410e34">00618</a> <a class="code" href="s390-tdep_8c.html#a29d015bb1bf8e2e85499a71b89410e34">s390_supply_tdb_regset</a> (<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structregset.html">regset</a> *<a class="code" href="structregset.html">regset</a>, <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l00619"></a>00619                     <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>, <span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="structgdbarch__tdep.html#a1dafc33980aca4b7214915336ef2c55d">regs</a>, <span class="keywordtype">size_t</span> <a class="code" href="exec_8h.html#a00f945351279d3c8935f13d2b9f9b808">len</a>)
<a name="l00620"></a>00620 {
<a name="l00621"></a>00621   <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> tdw;
<a name="l00622"></a>00622   <span class="keyword">enum</span> <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7">register_status</a> ret;
<a name="l00623"></a>00623   <span class="keywordtype">int</span> i;
<a name="l00624"></a>00624 
<a name="l00625"></a>00625   <a class="code" href="s390-tdep_8c.html#a61df5bdf2efc6d8bf3354ce778ff6155">s390_supply_regset</a> (regset, regcache, regnum, regs, len);
<a name="l00626"></a>00626   ret = <a class="code" href="regcache_8c.html#a959a077d769de1641d4f9754cc7b4a1f">regcache_cooked_read_unsigned</a> (regcache, <a class="code" href="s390-tdep_8h.html#ae021c40f8b76519f4274b94f6e84d250">S390_TDB_DWORD0_REGNUM</a>, &amp;tdw);
<a name="l00627"></a>00627   <span class="keywordflow">if</span> (ret != <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7a0155a2fd1e7e3b53cf1d75cf675d2ea2">REG_VALID</a> || (tdw &gt;&gt; 56) != 1)
<a name="l00628"></a>00628     <a class="code" href="s390-tdep_8c.html#a61df5bdf2efc6d8bf3354ce778ff6155">s390_supply_regset</a> (regset, regcache, regnum, NULL, len);
<a name="l00629"></a>00629 }
<a name="l00630"></a>00630 
<a name="l00631"></a>00631 <span class="comment">/* Collect register REGNUM from the register cache REGCACHE and store</span>
<a name="l00632"></a>00632 <span class="comment">   it in the buffer specified by REGS and LEN as described by the</span>
<a name="l00633"></a>00633 <span class="comment">   general-purpose register set REGSET.  If REGNUM is -1, do this for</span>
<a name="l00634"></a>00634 <span class="comment">   all registers in REGSET.  */</span>
<a name="l00635"></a>00635 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00636"></a><a class="code" href="s390-tdep_8c.html#a64baa9c210cbd2211cd576f890908331">00636</a> <a class="code" href="s390-tdep_8c.html#a64baa9c210cbd2211cd576f890908331">s390_collect_regset</a> (<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structregset.html">regset</a> *<a class="code" href="structregset.html">regset</a>,
<a name="l00637"></a>00637                      <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l00638"></a>00638                      <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>, <span class="keywordtype">void</span> *<a class="code" href="structgdbarch__tdep.html#a1dafc33980aca4b7214915336ef2c55d">regs</a>, <span class="keywordtype">size_t</span> <a class="code" href="exec_8h.html#a00f945351279d3c8935f13d2b9f9b808">len</a>)
<a name="l00639"></a>00639 {
<a name="l00640"></a>00640   <span class="keyword">const</span> <span class="keywordtype">short</span> *map;
<a name="l00641"></a>00641   <span class="keywordflow">for</span> (map = regset-&gt;<a class="code" href="structregset.html#a48a85083a9ec739072ed3a6030e52edd">descr</a>; map[0] &gt;= 0; map += 2)
<a name="l00642"></a>00642     <span class="keywordflow">if</span> (regnum == -1 || regnum == map[1])
<a name="l00643"></a>00643       <a class="code" href="regcache_8c.html#a3d2dc4fc1d7d491061e087b547c7f9a8">regcache_raw_collect</a> (regcache, map[1], (<span class="keywordtype">char</span> *)regs + map[0]);
<a name="l00644"></a>00644 }
<a name="l00645"></a>00645 
<a name="l00646"></a><a class="code" href="s390-tdep_8c.html#a31d5287c45035ac626a1e00354417969">00646</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structregset.html">regset</a> <a class="code" href="s390-tdep_8c.html#a31d5287c45035ac626a1e00354417969">s390_gregset</a> = {
<a name="l00647"></a>00647   <a class="code" href="s390-tdep_8c.html#a3ab02403fa447e286fedf6ead22be4ea">s390_regmap_gregset</a>, 
<a name="l00648"></a>00648   <a class="code" href="s390-tdep_8c.html#a61df5bdf2efc6d8bf3354ce778ff6155">s390_supply_regset</a>,
<a name="l00649"></a>00649   <a class="code" href="s390-tdep_8c.html#a64baa9c210cbd2211cd576f890908331">s390_collect_regset</a>
<a name="l00650"></a>00650 };
<a name="l00651"></a>00651 
<a name="l00652"></a><a class="code" href="s390-tdep_8c.html#ae7a9b3f6ac266335cfb2b236cccdd0dd">00652</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structregset.html">regset</a> <a class="code" href="s390-tdep_8c.html#ae7a9b3f6ac266335cfb2b236cccdd0dd">s390x_gregset</a> = {
<a name="l00653"></a>00653   <a class="code" href="s390-tdep_8c.html#a1ab95692c3765b2a50e2343ea739edd8">s390x_regmap_gregset</a>, 
<a name="l00654"></a>00654   <a class="code" href="s390-tdep_8c.html#a61df5bdf2efc6d8bf3354ce778ff6155">s390_supply_regset</a>,
<a name="l00655"></a>00655   <a class="code" href="s390-tdep_8c.html#a64baa9c210cbd2211cd576f890908331">s390_collect_regset</a>
<a name="l00656"></a>00656 };
<a name="l00657"></a>00657 
<a name="l00658"></a><a class="code" href="s390-tdep_8c.html#afb6e46d3b70aecef29c1ff2bef40c1b3">00658</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structregset.html">regset</a> <a class="code" href="s390-tdep_8c.html#afb6e46d3b70aecef29c1ff2bef40c1b3">s390_fpregset</a> = {
<a name="l00659"></a>00659   <a class="code" href="s390-tdep_8c.html#a28e016bde5bda8157a7c9782ef429c57">s390_regmap_fpregset</a>, 
<a name="l00660"></a>00660   <a class="code" href="s390-tdep_8c.html#a61df5bdf2efc6d8bf3354ce778ff6155">s390_supply_regset</a>,
<a name="l00661"></a>00661   <a class="code" href="s390-tdep_8c.html#a64baa9c210cbd2211cd576f890908331">s390_collect_regset</a>
<a name="l00662"></a>00662 };
<a name="l00663"></a>00663 
<a name="l00664"></a><a class="code" href="s390-tdep_8c.html#ad7091bf5af75acc2a90d1301d8ac10d3">00664</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structregset.html">regset</a> <a class="code" href="s390-tdep_8c.html#ad7091bf5af75acc2a90d1301d8ac10d3">s390_upper_regset</a> = {
<a name="l00665"></a>00665   <a class="code" href="s390-tdep_8c.html#ad6e3de8bff993723bde764f4473b46fa">s390_regmap_upper</a>, 
<a name="l00666"></a>00666   <a class="code" href="s390-tdep_8c.html#a61df5bdf2efc6d8bf3354ce778ff6155">s390_supply_regset</a>,
<a name="l00667"></a>00667   <a class="code" href="s390-tdep_8c.html#a64baa9c210cbd2211cd576f890908331">s390_collect_regset</a>
<a name="l00668"></a>00668 };
<a name="l00669"></a>00669 
<a name="l00670"></a><a class="code" href="s390-tdep_8c.html#a7baf18a6a1feb72c24d95d60c700c474">00670</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structregset.html">regset</a> <a class="code" href="s390-tdep_8c.html#a7baf18a6a1feb72c24d95d60c700c474">s390_last_break_regset</a> = {
<a name="l00671"></a>00671   <a class="code" href="s390-tdep_8c.html#ab3b43f6d63a15b18c70a0cd9a33ef01f">s390_regmap_last_break</a>,
<a name="l00672"></a>00672   <a class="code" href="s390-tdep_8c.html#a61df5bdf2efc6d8bf3354ce778ff6155">s390_supply_regset</a>,
<a name="l00673"></a>00673   <a class="code" href="s390-tdep_8c.html#a64baa9c210cbd2211cd576f890908331">s390_collect_regset</a>
<a name="l00674"></a>00674 };
<a name="l00675"></a>00675 
<a name="l00676"></a><a class="code" href="s390-tdep_8c.html#a514c8789de7f55834e5417ec7b28584e">00676</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structregset.html">regset</a> <a class="code" href="s390-tdep_8c.html#a514c8789de7f55834e5417ec7b28584e">s390x_last_break_regset</a> = {
<a name="l00677"></a>00677   <a class="code" href="s390-tdep_8c.html#ae822fba45274baac8c5eee02aa970a95">s390x_regmap_last_break</a>,
<a name="l00678"></a>00678   <a class="code" href="s390-tdep_8c.html#a61df5bdf2efc6d8bf3354ce778ff6155">s390_supply_regset</a>,
<a name="l00679"></a>00679   <a class="code" href="s390-tdep_8c.html#a64baa9c210cbd2211cd576f890908331">s390_collect_regset</a>
<a name="l00680"></a>00680 };
<a name="l00681"></a>00681 
<a name="l00682"></a><a class="code" href="s390-tdep_8c.html#a9f6a2fb9827955ee287fad5289ad9e23">00682</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structregset.html">regset</a> <a class="code" href="s390-tdep_8c.html#a9f6a2fb9827955ee287fad5289ad9e23">s390_system_call_regset</a> = {
<a name="l00683"></a>00683   <a class="code" href="s390-tdep_8c.html#a7cd59617a4d50b540ad599f7f1581d58">s390_regmap_system_call</a>,
<a name="l00684"></a>00684   <a class="code" href="s390-tdep_8c.html#a61df5bdf2efc6d8bf3354ce778ff6155">s390_supply_regset</a>,
<a name="l00685"></a>00685   <a class="code" href="s390-tdep_8c.html#a64baa9c210cbd2211cd576f890908331">s390_collect_regset</a>
<a name="l00686"></a>00686 };
<a name="l00687"></a>00687 
<a name="l00688"></a><a class="code" href="s390-tdep_8c.html#a1cef44061968b482289b5ce0c3414c2b">00688</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structregset.html">regset</a> <a class="code" href="s390-tdep_8c.html#a1cef44061968b482289b5ce0c3414c2b">s390_tdb_regset</a> = {
<a name="l00689"></a>00689   <a class="code" href="s390-tdep_8c.html#a67a399caf3854d34455db89ba0de6fae">s390_regmap_tdb</a>,
<a name="l00690"></a>00690   <a class="code" href="s390-tdep_8c.html#a29d015bb1bf8e2e85499a71b89410e34">s390_supply_tdb_regset</a>,
<a name="l00691"></a>00691   <a class="code" href="s390-tdep_8c.html#a64baa9c210cbd2211cd576f890908331">s390_collect_regset</a>
<a name="l00692"></a>00692 };
<a name="l00693"></a>00693 
<a name="l00694"></a><a class="code" href="s390-tdep_8c.html#a64fc6fd36f55f29ac0d918cda339c3b1">00694</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structcore__regset__section.html">core_regset_section</a> <a class="code" href="s390-tdep_8c.html#a64fc6fd36f55f29ac0d918cda339c3b1">s390_linux32_regset_sections</a>[] =
<a name="l00695"></a>00695 {
<a name="l00696"></a>00696   { <span class="stringliteral">&quot;.reg&quot;</span>, <a class="code" href="s390-tdep_8h.html#aeae5b306500c9fc3af1c7d3a1e7e75b4">s390_sizeof_gregset</a>, <span class="stringliteral">&quot;general-purpose&quot;</span> },
<a name="l00697"></a>00697   { <span class="stringliteral">&quot;.reg2&quot;</span>, <a class="code" href="s390-tdep_8h.html#a48c8b902b3848eb02f9fa9ec4a93b13f">s390_sizeof_fpregset</a>, <span class="stringliteral">&quot;floating-point&quot;</span> },
<a name="l00698"></a>00698   { NULL, 0}
<a name="l00699"></a>00699 };
<a name="l00700"></a>00700 
<a name="l00701"></a><a class="code" href="s390-tdep_8c.html#a1ee6799258c30f17467c11f61cec9c0a">00701</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structcore__regset__section.html">core_regset_section</a> <a class="code" href="s390-tdep_8c.html#a1ee6799258c30f17467c11f61cec9c0a">s390_linux32v1_regset_sections</a>[] =
<a name="l00702"></a>00702 {
<a name="l00703"></a>00703   { <span class="stringliteral">&quot;.reg&quot;</span>, <a class="code" href="s390-tdep_8h.html#aeae5b306500c9fc3af1c7d3a1e7e75b4">s390_sizeof_gregset</a>, <span class="stringliteral">&quot;general-purpose&quot;</span> },
<a name="l00704"></a>00704   { <span class="stringliteral">&quot;.reg2&quot;</span>, <a class="code" href="s390-tdep_8h.html#a48c8b902b3848eb02f9fa9ec4a93b13f">s390_sizeof_fpregset</a>, <span class="stringliteral">&quot;floating-point&quot;</span> },
<a name="l00705"></a>00705   { <span class="stringliteral">&quot;.reg-s390-last-break&quot;</span>, 8, <span class="stringliteral">&quot;s390 last-break address&quot;</span> },
<a name="l00706"></a>00706   { NULL, 0}
<a name="l00707"></a>00707 };
<a name="l00708"></a>00708 
<a name="l00709"></a><a class="code" href="s390-tdep_8c.html#aa5d40cafd83c888b4ec013ead2d1ff47">00709</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structcore__regset__section.html">core_regset_section</a> <a class="code" href="s390-tdep_8c.html#aa5d40cafd83c888b4ec013ead2d1ff47">s390_linux32v2_regset_sections</a>[] =
<a name="l00710"></a>00710 {
<a name="l00711"></a>00711   { <span class="stringliteral">&quot;.reg&quot;</span>, <a class="code" href="s390-tdep_8h.html#aeae5b306500c9fc3af1c7d3a1e7e75b4">s390_sizeof_gregset</a>, <span class="stringliteral">&quot;general-purpose&quot;</span> },
<a name="l00712"></a>00712   { <span class="stringliteral">&quot;.reg2&quot;</span>, <a class="code" href="s390-tdep_8h.html#a48c8b902b3848eb02f9fa9ec4a93b13f">s390_sizeof_fpregset</a>, <span class="stringliteral">&quot;floating-point&quot;</span> },
<a name="l00713"></a>00713   { <span class="stringliteral">&quot;.reg-s390-last-break&quot;</span>, 8, <span class="stringliteral">&quot;s390 last-break address&quot;</span> },
<a name="l00714"></a>00714   { <span class="stringliteral">&quot;.reg-s390-system-call&quot;</span>, 4, <span class="stringliteral">&quot;s390 system-call&quot;</span> },
<a name="l00715"></a>00715   { NULL, 0}
<a name="l00716"></a>00716 };
<a name="l00717"></a>00717 
<a name="l00718"></a><a class="code" href="s390-tdep_8c.html#a6cd59276fbf93d8ef41117ca863549cd">00718</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structcore__regset__section.html">core_regset_section</a> <a class="code" href="s390-tdep_8c.html#a6cd59276fbf93d8ef41117ca863549cd">s390_linux64_regset_sections</a>[] =
<a name="l00719"></a>00719 {
<a name="l00720"></a>00720   { <span class="stringliteral">&quot;.reg&quot;</span>, <a class="code" href="s390-tdep_8h.html#aeae5b306500c9fc3af1c7d3a1e7e75b4">s390_sizeof_gregset</a>, <span class="stringliteral">&quot;general-purpose&quot;</span> },
<a name="l00721"></a>00721   { <span class="stringliteral">&quot;.reg2&quot;</span>, <a class="code" href="s390-tdep_8h.html#a48c8b902b3848eb02f9fa9ec4a93b13f">s390_sizeof_fpregset</a>, <span class="stringliteral">&quot;floating-point&quot;</span> },
<a name="l00722"></a>00722   { <span class="stringliteral">&quot;.reg-s390-high-gprs&quot;</span>, 16*4, <span class="stringliteral">&quot;s390 GPR upper halves&quot;</span> },
<a name="l00723"></a>00723   { NULL, 0}
<a name="l00724"></a>00724 };
<a name="l00725"></a>00725 
<a name="l00726"></a><a class="code" href="s390-tdep_8c.html#a61e479c5445f1106d3fa2c99a873bd94">00726</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structcore__regset__section.html">core_regset_section</a> <a class="code" href="s390-tdep_8c.html#a61e479c5445f1106d3fa2c99a873bd94">s390_linux64v1_regset_sections</a>[] =
<a name="l00727"></a>00727 {
<a name="l00728"></a>00728   { <span class="stringliteral">&quot;.reg&quot;</span>, <a class="code" href="s390-tdep_8h.html#aeae5b306500c9fc3af1c7d3a1e7e75b4">s390_sizeof_gregset</a>, <span class="stringliteral">&quot;general-purpose&quot;</span> },
<a name="l00729"></a>00729   { <span class="stringliteral">&quot;.reg2&quot;</span>, <a class="code" href="s390-tdep_8h.html#a48c8b902b3848eb02f9fa9ec4a93b13f">s390_sizeof_fpregset</a>, <span class="stringliteral">&quot;floating-point&quot;</span> },
<a name="l00730"></a>00730   { <span class="stringliteral">&quot;.reg-s390-high-gprs&quot;</span>, 16*4, <span class="stringliteral">&quot;s390 GPR upper halves&quot;</span> },
<a name="l00731"></a>00731   { <span class="stringliteral">&quot;.reg-s390-last-break&quot;</span>, 8, <span class="stringliteral">&quot;s930 last-break address&quot;</span> },
<a name="l00732"></a>00732   { NULL, 0}
<a name="l00733"></a>00733 };
<a name="l00734"></a>00734 
<a name="l00735"></a><a class="code" href="s390-tdep_8c.html#a78e44d7b591c126b5ed3355fb95c6b7b">00735</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structcore__regset__section.html">core_regset_section</a> <a class="code" href="s390-tdep_8c.html#a78e44d7b591c126b5ed3355fb95c6b7b">s390_linux64v2_regset_sections</a>[] =
<a name="l00736"></a>00736 {
<a name="l00737"></a>00737   { <span class="stringliteral">&quot;.reg&quot;</span>, <a class="code" href="s390-tdep_8h.html#aeae5b306500c9fc3af1c7d3a1e7e75b4">s390_sizeof_gregset</a>, <span class="stringliteral">&quot;general-purpose&quot;</span> },
<a name="l00738"></a>00738   { <span class="stringliteral">&quot;.reg2&quot;</span>, <a class="code" href="s390-tdep_8h.html#a48c8b902b3848eb02f9fa9ec4a93b13f">s390_sizeof_fpregset</a>, <span class="stringliteral">&quot;floating-point&quot;</span> },
<a name="l00739"></a>00739   { <span class="stringliteral">&quot;.reg-s390-high-gprs&quot;</span>, 16*4, <span class="stringliteral">&quot;s390 GPR upper halves&quot;</span> },
<a name="l00740"></a>00740   { <span class="stringliteral">&quot;.reg-s390-last-break&quot;</span>, 8, <span class="stringliteral">&quot;s930 last-break address&quot;</span> },
<a name="l00741"></a>00741   { <span class="stringliteral">&quot;.reg-s390-system-call&quot;</span>, 4, <span class="stringliteral">&quot;s390 system-call&quot;</span> },
<a name="l00742"></a>00742   { <span class="stringliteral">&quot;.reg-s390-tdb&quot;</span>, <a class="code" href="s390-tdep_8h.html#a8f2437dafc42aecbc256b139aab8e216">s390_sizeof_tdbregset</a>, <span class="stringliteral">&quot;s390 TDB&quot;</span> },
<a name="l00743"></a>00743   { NULL, 0}
<a name="l00744"></a>00744 };
<a name="l00745"></a>00745 
<a name="l00746"></a><a class="code" href="s390-tdep_8c.html#a36950892808f891906baf84ceb9f7044">00746</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structcore__regset__section.html">core_regset_section</a> <a class="code" href="s390-tdep_8c.html#a36950892808f891906baf84ceb9f7044">s390x_linux64_regset_sections</a>[] =
<a name="l00747"></a>00747 {
<a name="l00748"></a>00748   { <span class="stringliteral">&quot;.reg&quot;</span>, <a class="code" href="s390-tdep_8h.html#a5e567d77c9ae80d506debdff8889a482">s390x_sizeof_gregset</a>, <span class="stringliteral">&quot;general-purpose&quot;</span> },
<a name="l00749"></a>00749   { <span class="stringliteral">&quot;.reg2&quot;</span>, <a class="code" href="s390-tdep_8h.html#a48c8b902b3848eb02f9fa9ec4a93b13f">s390_sizeof_fpregset</a>, <span class="stringliteral">&quot;floating-point&quot;</span> },
<a name="l00750"></a>00750   { NULL, 0}
<a name="l00751"></a>00751 };
<a name="l00752"></a>00752 
<a name="l00753"></a><a class="code" href="s390-tdep_8c.html#a20381ce2f87666e363ef130a48d3eec9">00753</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structcore__regset__section.html">core_regset_section</a> <a class="code" href="s390-tdep_8c.html#a20381ce2f87666e363ef130a48d3eec9">s390x_linux64v1_regset_sections</a>[] =
<a name="l00754"></a>00754 {
<a name="l00755"></a>00755   { <span class="stringliteral">&quot;.reg&quot;</span>, <a class="code" href="s390-tdep_8h.html#a5e567d77c9ae80d506debdff8889a482">s390x_sizeof_gregset</a>, <span class="stringliteral">&quot;general-purpose&quot;</span> },
<a name="l00756"></a>00756   { <span class="stringliteral">&quot;.reg2&quot;</span>, <a class="code" href="s390-tdep_8h.html#a48c8b902b3848eb02f9fa9ec4a93b13f">s390_sizeof_fpregset</a>, <span class="stringliteral">&quot;floating-point&quot;</span> },
<a name="l00757"></a>00757   { <span class="stringliteral">&quot;.reg-s390-last-break&quot;</span>, 8, <span class="stringliteral">&quot;s930 last-break address&quot;</span> },
<a name="l00758"></a>00758   { NULL, 0}
<a name="l00759"></a>00759 };
<a name="l00760"></a>00760 
<a name="l00761"></a><a class="code" href="s390-tdep_8c.html#ab5afc747da39ea0374a8b6349bb9723d">00761</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structcore__regset__section.html">core_regset_section</a> <a class="code" href="s390-tdep_8c.html#ab5afc747da39ea0374a8b6349bb9723d">s390x_linux64v2_regset_sections</a>[] =
<a name="l00762"></a>00762 {
<a name="l00763"></a>00763   { <span class="stringliteral">&quot;.reg&quot;</span>, <a class="code" href="s390-tdep_8h.html#a5e567d77c9ae80d506debdff8889a482">s390x_sizeof_gregset</a>, <span class="stringliteral">&quot;general-purpose&quot;</span> },
<a name="l00764"></a>00764   { <span class="stringliteral">&quot;.reg2&quot;</span>, <a class="code" href="s390-tdep_8h.html#a48c8b902b3848eb02f9fa9ec4a93b13f">s390_sizeof_fpregset</a>, <span class="stringliteral">&quot;floating-point&quot;</span> },
<a name="l00765"></a>00765   { <span class="stringliteral">&quot;.reg-s390-last-break&quot;</span>, 8, <span class="stringliteral">&quot;s930 last-break address&quot;</span> },
<a name="l00766"></a>00766   { <span class="stringliteral">&quot;.reg-s390-system-call&quot;</span>, 4, <span class="stringliteral">&quot;s390 system-call&quot;</span> },
<a name="l00767"></a>00767   { <span class="stringliteral">&quot;.reg-s390-tdb&quot;</span>, <a class="code" href="s390-tdep_8h.html#a8f2437dafc42aecbc256b139aab8e216">s390_sizeof_tdbregset</a>, <span class="stringliteral">&quot;s390 TDB&quot;</span> },
<a name="l00768"></a>00768   { NULL, 0}
<a name="l00769"></a>00769 };
<a name="l00770"></a>00770 
<a name="l00771"></a>00771 
<a name="l00772"></a>00772 <span class="comment">/* Return the appropriate register set for the core section identified</span>
<a name="l00773"></a>00773 <span class="comment">   by SECT_NAME and SECT_SIZE.  */</span>
<a name="l00774"></a>00774 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structregset.html">regset</a> *
<a name="l00775"></a><a class="code" href="s390-tdep_8c.html#a0af1e7b1edf1d1fe34c026e36c225fb3">00775</a> <a class="code" href="s390-tdep_8c.html#a0af1e7b1edf1d1fe34c026e36c225fb3">s390_regset_from_core_section</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>,
<a name="l00776"></a>00776                                <span class="keyword">const</span> <span class="keywordtype">char</span> *sect_name, <span class="keywordtype">size_t</span> sect_size)
<a name="l00777"></a>00777 {
<a name="l00778"></a>00778   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00779"></a>00779 
<a name="l00780"></a>00780   <span class="keywordflow">if</span> (strcmp (sect_name, <span class="stringliteral">&quot;.reg&quot;</span>) == 0 &amp;&amp; sect_size &gt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a4e535ed4edd0491e3897078d2fb1bd9e">sizeof_gregset</a>)
<a name="l00781"></a>00781     <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a0292e4e45fc2986b86c92cd4a66733fd">gregset</a>;
<a name="l00782"></a>00782 
<a name="l00783"></a>00783   <span class="keywordflow">if</span> (strcmp (sect_name, <span class="stringliteral">&quot;.reg2&quot;</span>) == 0 &amp;&amp; sect_size &gt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a1914a0a96ba18e752e1f051eaceb903b">sizeof_fpregset</a>)
<a name="l00784"></a>00784     <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af3f6e6595d74dfa5142187feb895bfd5">fpregset</a>;
<a name="l00785"></a>00785 
<a name="l00786"></a>00786   <span class="keywordflow">if</span> (strcmp (sect_name, <span class="stringliteral">&quot;.reg-s390-high-gprs&quot;</span>) == 0 &amp;&amp; sect_size &gt;= 16*4)
<a name="l00787"></a>00787     <span class="keywordflow">return</span> &amp;<a class="code" href="s390-tdep_8c.html#ad7091bf5af75acc2a90d1301d8ac10d3">s390_upper_regset</a>;
<a name="l00788"></a>00788 
<a name="l00789"></a>00789   <span class="keywordflow">if</span> (strcmp (sect_name, <span class="stringliteral">&quot;.reg-s390-last-break&quot;</span>) == 0 &amp;&amp; sect_size &gt;= 8)
<a name="l00790"></a>00790     <span class="keywordflow">return</span> (<a class="code" href="gdbarch_8c.html#ae356193e481873e4377ff922d984f13f">gdbarch_ptr_bit</a> (gdbarch) == 32
<a name="l00791"></a>00791             ?  &amp;s390_last_break_regset : &amp;s390x_last_break_regset);
<a name="l00792"></a>00792 
<a name="l00793"></a>00793   <span class="keywordflow">if</span> (strcmp (sect_name, <span class="stringliteral">&quot;.reg-s390-system-call&quot;</span>) == 0 &amp;&amp; sect_size &gt;= 4)
<a name="l00794"></a>00794     <span class="keywordflow">return</span> &amp;<a class="code" href="s390-tdep_8c.html#a9f6a2fb9827955ee287fad5289ad9e23">s390_system_call_regset</a>;
<a name="l00795"></a>00795 
<a name="l00796"></a>00796   <span class="keywordflow">if</span> (strcmp (sect_name, <span class="stringliteral">&quot;.reg-s390-tdb&quot;</span>) == 0 &amp;&amp; sect_size &gt;= 256)
<a name="l00797"></a>00797     <span class="keywordflow">return</span> &amp;<a class="code" href="s390-tdep_8c.html#a1cef44061968b482289b5ce0c3414c2b">s390_tdb_regset</a>;
<a name="l00798"></a>00798 
<a name="l00799"></a>00799   <span class="keywordflow">return</span> NULL;
<a name="l00800"></a>00800 }
<a name="l00801"></a>00801 
<a name="l00802"></a>00802 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structtarget__desc.html">target_desc</a> *
<a name="l00803"></a><a class="code" href="s390-tdep_8c.html#aaa5702a56c86c5343d8dc67e50129e05">00803</a> <a class="code" href="s390-tdep_8c.html#aaa5702a56c86c5343d8dc67e50129e05">s390_core_read_description</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>,
<a name="l00804"></a>00804                             <span class="keyword">struct</span> <a class="code" href="structtarget__ops.html">target_ops</a> *target, bfd *abfd)
<a name="l00805"></a>00805 {
<a name="l00806"></a>00806   asection *high_gprs = bfd_get_section_by_name (abfd, <span class="stringliteral">&quot;.reg-s390-high-gprs&quot;</span>);
<a name="l00807"></a>00807   asection *v1 = bfd_get_section_by_name (abfd, <span class="stringliteral">&quot;.reg-s390-last-break&quot;</span>);
<a name="l00808"></a>00808   asection *v2 = bfd_get_section_by_name (abfd, <span class="stringliteral">&quot;.reg-s390-system-call&quot;</span>);
<a name="l00809"></a>00809   asection *section = bfd_get_section_by_name (abfd, <span class="stringliteral">&quot;.reg&quot;</span>);
<a name="l00810"></a>00810   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> hwcap = 0;
<a name="l00811"></a>00811 
<a name="l00812"></a>00812   <a class="code" href="auxv_8c.html#a381e0e50c471f99dfbdc7cf437b32bc5">target_auxv_search</a> (target, AT_HWCAP, &amp;hwcap);
<a name="l00813"></a>00813   <span class="keywordflow">if</span> (!section)
<a name="l00814"></a>00814     <span class="keywordflow">return</span> NULL;
<a name="l00815"></a>00815 
<a name="l00816"></a>00816   <span class="keywordflow">switch</span> (bfd_section_size (abfd, section))
<a name="l00817"></a>00817     {
<a name="l00818"></a>00818     <span class="keywordflow">case</span> <a class="code" href="s390-tdep_8h.html#aeae5b306500c9fc3af1c7d3a1e7e75b4">s390_sizeof_gregset</a>:
<a name="l00819"></a>00819       <span class="keywordflow">if</span> (high_gprs)
<a name="l00820"></a>00820         <span class="keywordflow">return</span> ((hwcap &amp; HWCAP_S390_TE) ? <a class="code" href="s390-te-linux64_8c.html#a18a203fbf065c17b188384ced64452bf">tdesc_s390_te_linux64</a> :
<a name="l00821"></a>00821                 v2? <a class="code" href="s390-linux64v2_8c.html#a2625e00df06cf7bb8d406f04b7f1e624">tdesc_s390_linux64v2</a> :
<a name="l00822"></a>00822                 v1? <a class="code" href="s390-linux64v1_8c.html#a1b62f834a593b2dd13c6eb542f33b771">tdesc_s390_linux64v1</a> : <a class="code" href="s390-linux64_8c.html#a867b909f405a60799203689c5db1a515">tdesc_s390_linux64</a>);
<a name="l00823"></a>00823       <span class="keywordflow">else</span>
<a name="l00824"></a>00824         <span class="keywordflow">return</span> (v2? <a class="code" href="s390-linux32v2_8c.html#adc0873a6b29cd73af8055d5999937a2f">tdesc_s390_linux32v2</a> :
<a name="l00825"></a>00825                 v1? <a class="code" href="s390-linux32v1_8c.html#ab7bea1cc05a796c22f0c8adf8464bc82">tdesc_s390_linux32v1</a> : <a class="code" href="s390-linux32_8c.html#acc9636fce7346511b7d66ed484f320e9">tdesc_s390_linux32</a>);
<a name="l00826"></a>00826 
<a name="l00827"></a>00827     <span class="keywordflow">case</span> <a class="code" href="s390-tdep_8h.html#a5e567d77c9ae80d506debdff8889a482">s390x_sizeof_gregset</a>:
<a name="l00828"></a>00828       <span class="keywordflow">return</span> ((hwcap &amp; HWCAP_S390_TE) ? <a class="code" href="s390x-te-linux64_8c.html#ac2e7841fab573b4d6f8dae09a53bcb09">tdesc_s390x_te_linux64</a> :
<a name="l00829"></a>00829               v2? <a class="code" href="s390x-linux64v2_8c.html#a0cd89dd6989ac4a1b5d6c261fee18047">tdesc_s390x_linux64v2</a> :
<a name="l00830"></a>00830               v1? <a class="code" href="s390x-linux64v1_8c.html#ad3b5e2947caec3318215255b2bbf6db0">tdesc_s390x_linux64v1</a> : <a class="code" href="s390x-linux64_8c.html#afedc508403edafc835651211b8129da6">tdesc_s390x_linux64</a>);
<a name="l00831"></a>00831 
<a name="l00832"></a>00832     <span class="keywordflow">default</span>:
<a name="l00833"></a>00833       <span class="keywordflow">return</span> NULL;
<a name="l00834"></a>00834     }
<a name="l00835"></a>00835 }
<a name="l00836"></a>00836 
<a name="l00837"></a>00837 
<a name="l00838"></a>00838 <span class="comment">/* Decoding S/390 instructions.  */</span>
<a name="l00839"></a>00839 
<a name="l00840"></a>00840 <span class="comment">/* Named opcode values for the S/390 instructions we recognize.  Some</span>
<a name="l00841"></a>00841 <span class="comment">   instructions have their opcode split across two fields; those are the</span>
<a name="l00842"></a>00842 <span class="comment">   op1_* and op2_* enums.  */</span>
<a name="l00843"></a>00843 <span class="keyword">enum</span>
<a name="l00844"></a>00844   {
<a name="l00845"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2ea5aa2592a29524e7e93ef55af54bb5">00845</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeadb010259482679101f4da11410776835">op1_lhi</a>  = 0xa7,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2ea5aa2592a29524e7e93ef55af54bb5">op2_lhi</a>  = 0x08,
<a name="l00846"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaf4ac5d6de274f249b40543b61eb03e47">00846</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea0de2f9977e79f00384901543d857e8ae">op1_lghi</a> = 0xa7,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaf4ac5d6de274f249b40543b61eb03e47">op2_lghi</a> = 0x09,
<a name="l00847"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeafc42577199e9429249201d48d387c4fb">00847</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea0981930806f46c239f8c27bae26b2bb9">op1_lgfi</a> = 0xc0,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeafc42577199e9429249201d48d387c4fb">op2_lgfi</a> = 0x01,
<a name="l00848"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea82d2604a56499c76c8185e08c5eded26">00848</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea82d2604a56499c76c8185e08c5eded26">op_lr</a>    = 0x18,
<a name="l00849"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea82a97704639bb1711cbbabebf4934e6f">00849</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea82a97704639bb1711cbbabebf4934e6f">op_lgr</a>   = 0xb904,
<a name="l00850"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea05531cc41979d9d0a7139125a946d5b6">00850</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea05531cc41979d9d0a7139125a946d5b6">op_l</a>     = 0x58,
<a name="l00851"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea091985929b1c9690c660335113ac468c">00851</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea5a1f70f224c1c61fd053bf429caa864b">op1_ly</a>   = 0xe3,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea091985929b1c9690c660335113ac468c">op2_ly</a>   = 0x58,
<a name="l00852"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2df50613b3549ba87517b690b12e5ce0">00852</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeadca1215a67220dbd4ab98fa78d6f708d">op1_lg</a>   = 0xe3,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2df50613b3549ba87517b690b12e5ce0">op2_lg</a>   = 0x04,
<a name="l00853"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea5bf9b9da73b6f0b2dd620937f854ced0">00853</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea5bf9b9da73b6f0b2dd620937f854ced0">op_lm</a>    = 0x98,
<a name="l00854"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea47892d853dbed6716e9341adea701ca7">00854</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea8f8781dd5dcf5ef08998fb2059c76787">op1_lmy</a>  = 0xeb,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea47892d853dbed6716e9341adea701ca7">op2_lmy</a>  = 0x98,
<a name="l00855"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea0ff4497e79d8a6bbce42fe62e96149bb">00855</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea430763130a9f1c439b3981bbd9ef273a">op1_lmg</a>  = 0xeb,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea0ff4497e79d8a6bbce42fe62e96149bb">op2_lmg</a>  = 0x04,
<a name="l00856"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea3c7ca7c22cd2befa6dc43dd94a49ec40">00856</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea3c7ca7c22cd2befa6dc43dd94a49ec40">op_st</a>    = 0x50,
<a name="l00857"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2b5142889dcae6546fa70ed812fad459">00857</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea1c46271888a8f5c2dcbdbc5c28257c37">op1_sty</a>  = 0xe3,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2b5142889dcae6546fa70ed812fad459">op2_sty</a>  = 0x50,
<a name="l00858"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea7f2753100d67b2761d25cc93f0d002ac">00858</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea1bdaa3c047559af86e53aa0b51fc4fd6">op1_stg</a>  = 0xe3,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea7f2753100d67b2761d25cc93f0d002ac">op2_stg</a>  = 0x24,
<a name="l00859"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea5b46be3df9c651bced7c64ad5e1b0e93">00859</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea5b46be3df9c651bced7c64ad5e1b0e93">op_std</a>   = 0x60,
<a name="l00860"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea049c312e8c405ebc44e24031d47c2f71">00860</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea049c312e8c405ebc44e24031d47c2f71">op_stm</a>   = 0x90,
<a name="l00861"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea0d3c9fbc6cd8d0ea193f5cd17e955855">00861</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea5914328a033902381c57c4c5aca0518f">op1_stmy</a> = 0xeb,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea0d3c9fbc6cd8d0ea193f5cd17e955855">op2_stmy</a> = 0x90,
<a name="l00862"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea510db4c92b0557eed0e3e2251a1fad22">00862</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea71552030b0db841b52c242124d6ae031">op1_stmg</a> = 0xeb,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea510db4c92b0557eed0e3e2251a1fad22">op2_stmg</a> = 0x24,
<a name="l00863"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea93e8854da8dc4f3cc77c493140c36bde">00863</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeae6393ddbb315926225c7d1f2bd2dd5c5">op1_aghi</a> = 0xa7,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea93e8854da8dc4f3cc77c493140c36bde">op2_aghi</a> = 0x0b,
<a name="l00864"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaa3389c8d42e70b9ae3ec5ca70853052d">00864</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea213f9f0dca89db77b1f03c69e3eb9de9">op1_ahi</a>  = 0xa7,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaa3389c8d42e70b9ae3ec5ca70853052d">op2_ahi</a>  = 0x0a,
<a name="l00865"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea3e2233a42b0cc6dec2dca24429374075">00865</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeab207eeab40bfb04b110af3a7a54c8db7">op1_agfi</a> = 0xc2,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea3e2233a42b0cc6dec2dca24429374075">op2_agfi</a> = 0x08,
<a name="l00866"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaf91e9962bf43a5a65aeb00b0887f630a">00866</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea4ab763c6de9386c50292d3cf5b42c6ae">op1_afi</a>  = 0xc2,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaf91e9962bf43a5a65aeb00b0887f630a">op2_afi</a>  = 0x09,
<a name="l00867"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2b1bf6b9332d4e220731111b9fd6c2b4">00867</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea35256bd25b075d1f80cf1b360ddce413">op1_algfi</a>= 0xc2,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2b1bf6b9332d4e220731111b9fd6c2b4">op2_algfi</a>= 0x0a,
<a name="l00868"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeac99dfa316dd68786fc04d7f8ff73f628">00868</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea828d1ac9bd0cfddf2d9895e8b74ee282">op1_alfi</a> = 0xc2,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeac99dfa316dd68786fc04d7f8ff73f628">op2_alfi</a> = 0x0b,
<a name="l00869"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaf008fd7350ead0cb0b813ed9a7dffee4">00869</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaf008fd7350ead0cb0b813ed9a7dffee4">op_ar</a>    = 0x1a,
<a name="l00870"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea0dadc4610465dad0a031eec806d1268a">00870</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea0dadc4610465dad0a031eec806d1268a">op_agr</a>   = 0xb908,
<a name="l00871"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaf3134e04b09f15e32c646d70c006ca47">00871</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaf3134e04b09f15e32c646d70c006ca47">op_a</a>     = 0x5a,
<a name="l00872"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaaca91f71af7d77fff0b87a1bf66c18cb">00872</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeacc3ca433724f51b12f41801fff5e9465">op1_ay</a>   = 0xe3,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaaca91f71af7d77fff0b87a1bf66c18cb">op2_ay</a>   = 0x5a,
<a name="l00873"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeae71eeb26538bff76dc4edbab164ee402">00873</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2dccb15c4f5fb65a1aa0f45c1e64459b">op1_ag</a>   = 0xe3,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeae71eeb26538bff76dc4edbab164ee402">op2_ag</a>   = 0x08,
<a name="l00874"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeabebda767b50d52e168ba2d4713a7af49">00874</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaf9b8cbaa421a1b1d0bf7a50d836b71d9">op1_slgfi</a>= 0xc2,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeabebda767b50d52e168ba2d4713a7af49">op2_slgfi</a>= 0x04,
<a name="l00875"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea16b9b23e1fb9ec594d2c22eab1af8499">00875</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea4cd9a65547c990f63abd4873a76f4fd4">op1_slfi</a> = 0xc2,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea16b9b23e1fb9ec594d2c22eab1af8499">op2_slfi</a> = 0x05,
<a name="l00876"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea815a509a746312d07dd6e4dff5f69a46">00876</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea815a509a746312d07dd6e4dff5f69a46">op_sr</a>    = 0x1b,
<a name="l00877"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea08d73af51b3dc463d9f4db836fd3d064">00877</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea08d73af51b3dc463d9f4db836fd3d064">op_sgr</a>   = 0xb909,
<a name="l00878"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeab325f0632f832b9588aecaf775269f78">00878</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeab325f0632f832b9588aecaf775269f78">op_s</a>     = 0x5b,
<a name="l00879"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaea9d235caa5480f3b8c504c4d01c3b3e">00879</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea9fe47b803f16b68fe1d7e0828fcf9f5a">op1_sy</a>   = 0xe3,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaea9d235caa5480f3b8c504c4d01c3b3e">op2_sy</a>   = 0x5b,
<a name="l00880"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeab0edd1c0635ab8cb991645544e125f60">00880</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2b2e5c482c6cc0e0c06ec88e5241b4b9">op1_sg</a>   = 0xe3,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeab0edd1c0635ab8cb991645544e125f60">op2_sg</a>   = 0x09,
<a name="l00881"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea3066eb4749ce8011d9d675eb4935152d">00881</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea3066eb4749ce8011d9d675eb4935152d">op_nr</a>    = 0x14,
<a name="l00882"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea3506a509b7de4a122dab9f3fb8647edd">00882</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea3506a509b7de4a122dab9f3fb8647edd">op_ngr</a>   = 0xb980,
<a name="l00883"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2b980f229c805709cfa3534deb7cf235">00883</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2b980f229c805709cfa3534deb7cf235">op_la</a>    = 0x41,
<a name="l00884"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeac2fc7ec7f6efd51e06d7947000a9ba14">00884</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea0ac95da03a6ccc495a529395391e35af">op1_lay</a>  = 0xe3,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeac2fc7ec7f6efd51e06d7947000a9ba14">op2_lay</a>  = 0x71,
<a name="l00885"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2ff0edbff0ab21601efcb6c2995e53d8">00885</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea65ce3fe937ce256957147808d30d8abe">op1_larl</a> = 0xc0,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2ff0edbff0ab21601efcb6c2995e53d8">op2_larl</a> = 0x00,
<a name="l00886"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea9f7d1f8a7d074f602ca353c6014e4add">00886</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea9f7d1f8a7d074f602ca353c6014e4add">op_basr</a>  = 0x0d,
<a name="l00887"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea79faf14e2dc5e8d3bdd55b8706b7362d">00887</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea79faf14e2dc5e8d3bdd55b8706b7362d">op_bas</a>   = 0x4d,
<a name="l00888"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea6e127724fb63a7c168868c351b00752c">00888</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea6e127724fb63a7c168868c351b00752c">op_bcr</a>   = 0x07,
<a name="l00889"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aead7c5d3898f9080734f02b736ef8111fa">00889</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aead7c5d3898f9080734f02b736ef8111fa">op_bc</a>    = 0x0d,
<a name="l00890"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaefbf2fb4d7de3732a04458b81de62055">00890</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaefbf2fb4d7de3732a04458b81de62055">op_bctr</a>  = 0x06,
<a name="l00891"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea973122307a161e04dcfcfda957c5d4cc">00891</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea973122307a161e04dcfcfda957c5d4cc">op_bctgr</a> = 0xb946,
<a name="l00892"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaf1daf7802db3b5effc0cd7513fdc46cf">00892</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaf1daf7802db3b5effc0cd7513fdc46cf">op_bct</a>   = 0x46,
<a name="l00893"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea6a497f4251a2137b51a224a6f7489b93">00893</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea19347bb71e192e7613fecff35a933fde">op1_bctg</a> = 0xe3,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea6a497f4251a2137b51a224a6f7489b93">op2_bctg</a> = 0x46,
<a name="l00894"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea71d152acb4d8b5dbe15609b4bc7a0ab7">00894</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea71d152acb4d8b5dbe15609b4bc7a0ab7">op_bxh</a>   = 0x86,
<a name="l00895"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaf4f75c521924f8feaea247cfc39c7ed9">00895</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea28b34263429a6c6f022e35f4a2318d58">op1_bxhg</a> = 0xeb,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaf4f75c521924f8feaea247cfc39c7ed9">op2_bxhg</a> = 0x44,
<a name="l00896"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeab5147b612e013966ba6f0ccfe1abb40f">00896</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeab5147b612e013966ba6f0ccfe1abb40f">op_bxle</a>  = 0x87,
<a name="l00897"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea40e05e7259fd80f0be18416618f898c7">00897</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea9f55c52c50b1108395fed88a840ccbae">op1_bxleg</a>= 0xeb,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea40e05e7259fd80f0be18416618f898c7">op2_bxleg</a>= 0x45,
<a name="l00898"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea9ada736dfab48ee544854cef6d763dec">00898</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2d988a33df86ecd50be63a53418f158c">op1_bras</a> = 0xa7,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea9ada736dfab48ee544854cef6d763dec">op2_bras</a> = 0x05,
<a name="l00899"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaaee47846c827d10b90aeca86615c02ce">00899</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea51c371d4f4c9e24495cf30c9a9561f96">op1_brasl</a>= 0xc0,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaaee47846c827d10b90aeca86615c02ce">op2_brasl</a>= 0x05,
<a name="l00900"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaa5772dfb52a587f16d76590bf8dc86e8">00900</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea361192ea2cb8b050a62458ba8e3390bd">op1_brc</a>  = 0xa7,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaa5772dfb52a587f16d76590bf8dc86e8">op2_brc</a>  = 0x04,
<a name="l00901"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea1af515979fce6a474c1a0e171a9584ed">00901</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaa57097b1977f2c29fd370bc84e4171eb">op1_brcl</a> = 0xc0,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea1af515979fce6a474c1a0e171a9584ed">op2_brcl</a> = 0x04,
<a name="l00902"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea98ad06bdcb9e39a6958f02ea01d4629f">00902</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeac8a8c1d671635ad12fc306a8b487d151">op1_brct</a> = 0xa7,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea98ad06bdcb9e39a6958f02ea01d4629f">op2_brct</a> = 0x06,
<a name="l00903"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeae90900f4b338328a228748cfe989f267">00903</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea80d85786ab85f1fd54a44a24f6529a54">op1_brctg</a>= 0xa7,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeae90900f4b338328a228748cfe989f267">op2_brctg</a>= 0x07,
<a name="l00904"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea23d6f52a7aabac93a3d88d612aa4e166">00904</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea23d6f52a7aabac93a3d88d612aa4e166">op_brxh</a>  = 0x84,
<a name="l00905"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea4985362f5d5a812ea4586c194b736180">00905</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea27c3304edda4fcc74d924c00dc84705c">op1_brxhg</a>= 0xec,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea4985362f5d5a812ea4586c194b736180">op2_brxhg</a>= 0x44,
<a name="l00906"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea643d0b29c04aa5d5b2fb28975cdf9f5e">00906</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea643d0b29c04aa5d5b2fb28975cdf9f5e">op_brxle</a> = 0x85,
<a name="l00907"></a><a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea4a0c9f21c98fbfe12ad75a4676d20a15">00907</a>     <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeafefbd8e19ebf006e284c94ed3a3731c2">op1_brxlg</a>= 0xec,   <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea4a0c9f21c98fbfe12ad75a4676d20a15">op2_brxlg</a>= 0x45,
<a name="l00908"></a>00908   };
<a name="l00909"></a>00909 
<a name="l00910"></a>00910 
<a name="l00911"></a>00911 <span class="comment">/* Read a single instruction from address AT.  */</span>
<a name="l00912"></a>00912 
<a name="l00913"></a><a class="code" href="s390-tdep_8c.html#a4c66fa932b211ca014f7b83f66b871e3">00913</a> <span class="preprocessor">#define S390_MAX_INSTR_SIZE 6</span>
<a name="l00914"></a>00914 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00915"></a><a class="code" href="s390-tdep_8c.html#a931ae969aed0641258c45afcb1410b2f">00915</a> <a class="code" href="s390-tdep_8c.html#a931ae969aed0641258c45afcb1410b2f">s390_readinstruction</a> (bfd_byte instr[], <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> at)
<a name="l00916"></a>00916 {
<a name="l00917"></a>00917   <span class="keyword">static</span> <span class="keywordtype">int</span> s390_instrlen[] = { 2, 4, 4, 6 };
<a name="l00918"></a>00918   <span class="keywordtype">int</span> instrlen;
<a name="l00919"></a>00919 
<a name="l00920"></a>00920   <span class="keywordflow">if</span> (<a class="code" href="target_8c.html#ac579515fbccfb9e6b1a45766a71c1d4f">target_read_memory</a> (at, &amp;instr[0], 2))
<a name="l00921"></a>00921     <span class="keywordflow">return</span> -1;
<a name="l00922"></a>00922   instrlen = s390_instrlen[instr[0] &gt;&gt; 6];
<a name="l00923"></a>00923   <span class="keywordflow">if</span> (instrlen &gt; 2)
<a name="l00924"></a>00924     {
<a name="l00925"></a>00925       <span class="keywordflow">if</span> (<a class="code" href="target_8c.html#ac579515fbccfb9e6b1a45766a71c1d4f">target_read_memory</a> (at + 2, &amp;instr[2], instrlen - 2))
<a name="l00926"></a>00926         <span class="keywordflow">return</span> -1;
<a name="l00927"></a>00927     }
<a name="l00928"></a>00928   <span class="keywordflow">return</span> instrlen;
<a name="l00929"></a>00929 }
<a name="l00930"></a>00930 
<a name="l00931"></a>00931 
<a name="l00932"></a>00932 <span class="comment">/* The functions below are for recognizing and decoding S/390</span>
<a name="l00933"></a>00933 <span class="comment">   instructions of various formats.  Each of them checks whether INSN</span>
<a name="l00934"></a>00934 <span class="comment">   is an instruction of the given format, with the specified opcodes.</span>
<a name="l00935"></a>00935 <span class="comment">   If it is, it sets the remaining arguments to the values of the</span>
<a name="l00936"></a>00936 <span class="comment">   instruction&#39;s fields, and returns a non-zero value; otherwise, it</span>
<a name="l00937"></a>00937 <span class="comment">   returns zero.</span>
<a name="l00938"></a>00938 <span class="comment"></span>
<a name="l00939"></a>00939 <span class="comment">   These functions&#39; arguments appear in the order they appear in the</span>
<a name="l00940"></a>00940 <span class="comment">   instruction, not in the machine-language form.  So, opcodes always</span>
<a name="l00941"></a>00941 <span class="comment">   come first, even though they&#39;re sometimes scattered around the</span>
<a name="l00942"></a>00942 <span class="comment">   instructions.  And displacements appear before base and extension</span>
<a name="l00943"></a>00943 <span class="comment">   registers, as they do in the assembly syntax, not at the end, as</span>
<a name="l00944"></a>00944 <span class="comment">   they do in the machine language.  */</span>
<a name="l00945"></a>00945 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00946"></a><a class="code" href="s390-tdep_8c.html#aba2d5253005bb90c5fa62dae8c835547">00946</a> <a class="code" href="s390-tdep_8c.html#aba2d5253005bb90c5fa62dae8c835547">is_ri</a> (bfd_byte *insn, <span class="keywordtype">int</span> op1, <span class="keywordtype">int</span> op2, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *r1, <span class="keywordtype">int</span> *i2)
<a name="l00947"></a>00947 {
<a name="l00948"></a>00948   <span class="keywordflow">if</span> (insn[0] == op1 &amp;&amp; (insn[1] &amp; 0xf) == op2)
<a name="l00949"></a>00949     {
<a name="l00950"></a>00950       *r1 = (insn[1] &gt;&gt; 4) &amp; 0xf;
<a name="l00951"></a>00951       <span class="comment">/* i2 is a 16-bit signed quantity.  */</span>
<a name="l00952"></a>00952       *i2 = (((insn[2] &lt;&lt; 8) | insn[3]) ^ 0x8000) - 0x8000;
<a name="l00953"></a>00953       <span class="keywordflow">return</span> 1;
<a name="l00954"></a>00954     }
<a name="l00955"></a>00955   <span class="keywordflow">else</span>
<a name="l00956"></a>00956     <span class="keywordflow">return</span> 0;
<a name="l00957"></a>00957 }
<a name="l00958"></a>00958 
<a name="l00959"></a>00959 
<a name="l00960"></a>00960 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00961"></a><a class="code" href="s390-tdep_8c.html#a76c82ff57e5109d64450d9f79c953be1">00961</a> <a class="code" href="s390-tdep_8c.html#a76c82ff57e5109d64450d9f79c953be1">is_ril</a> (bfd_byte *insn, <span class="keywordtype">int</span> op1, <span class="keywordtype">int</span> op2,
<a name="l00962"></a>00962         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *r1, <span class="keywordtype">int</span> *i2)
<a name="l00963"></a>00963 {
<a name="l00964"></a>00964   <span class="keywordflow">if</span> (insn[0] == op1 &amp;&amp; (insn[1] &amp; 0xf) == op2)
<a name="l00965"></a>00965     {
<a name="l00966"></a>00966       *r1 = (insn[1] &gt;&gt; 4) &amp; 0xf;
<a name="l00967"></a>00967       <span class="comment">/* i2 is a signed quantity.  If the host &#39;int&#39; is 32 bits long,</span>
<a name="l00968"></a>00968 <span class="comment">         no sign extension is necessary, but we don&#39;t want to assume</span>
<a name="l00969"></a>00969 <span class="comment">         that.  */</span>
<a name="l00970"></a>00970       *i2 = (((insn[2] &lt;&lt; 24)
<a name="l00971"></a>00971               | (insn[3] &lt;&lt; 16)
<a name="l00972"></a>00972               | (insn[4] &lt;&lt; 8)
<a name="l00973"></a>00973               | (insn[5])) ^ 0x80000000) - 0x80000000;
<a name="l00974"></a>00974       <span class="keywordflow">return</span> 1;
<a name="l00975"></a>00975     }
<a name="l00976"></a>00976   <span class="keywordflow">else</span>
<a name="l00977"></a>00977     <span class="keywordflow">return</span> 0;
<a name="l00978"></a>00978 }
<a name="l00979"></a>00979 
<a name="l00980"></a>00980 
<a name="l00981"></a>00981 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00982"></a><a class="code" href="s390-tdep_8c.html#a320f6b6218c97a66d6ab010fd089b98c">00982</a> <a class="code" href="s390-tdep_8c.html#a320f6b6218c97a66d6ab010fd089b98c">is_rr</a> (bfd_byte *insn, <span class="keywordtype">int</span> op, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *r1, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *r2)
<a name="l00983"></a>00983 {
<a name="l00984"></a>00984   <span class="keywordflow">if</span> (insn[0] == op)
<a name="l00985"></a>00985     {
<a name="l00986"></a>00986       *r1 = (insn[1] &gt;&gt; 4) &amp; 0xf;
<a name="l00987"></a>00987       *r2 = insn[1] &amp; 0xf;
<a name="l00988"></a>00988       <span class="keywordflow">return</span> 1;
<a name="l00989"></a>00989     }
<a name="l00990"></a>00990   <span class="keywordflow">else</span>
<a name="l00991"></a>00991     <span class="keywordflow">return</span> 0;
<a name="l00992"></a>00992 }
<a name="l00993"></a>00993 
<a name="l00994"></a>00994 
<a name="l00995"></a>00995 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00996"></a><a class="code" href="s390-tdep_8c.html#ab8776695f07642f8be597722b774ccfd">00996</a> <a class="code" href="s390-tdep_8c.html#ab8776695f07642f8be597722b774ccfd">is_rre</a> (bfd_byte *insn, <span class="keywordtype">int</span> op, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *r1, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *r2)
<a name="l00997"></a>00997 {
<a name="l00998"></a>00998   <span class="keywordflow">if</span> (((insn[0] &lt;&lt; 8) | insn[1]) == op)
<a name="l00999"></a>00999     {
<a name="l01000"></a>01000       <span class="comment">/* Yes, insn[3].  insn[2] is unused in RRE format.  */</span>
<a name="l01001"></a>01001       *r1 = (insn[3] &gt;&gt; 4) &amp; 0xf;
<a name="l01002"></a>01002       *r2 = insn[3] &amp; 0xf;
<a name="l01003"></a>01003       <span class="keywordflow">return</span> 1;
<a name="l01004"></a>01004     }
<a name="l01005"></a>01005   <span class="keywordflow">else</span>
<a name="l01006"></a>01006     <span class="keywordflow">return</span> 0;
<a name="l01007"></a>01007 }
<a name="l01008"></a>01008 
<a name="l01009"></a>01009 
<a name="l01010"></a>01010 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01011"></a><a class="code" href="s390-tdep_8c.html#af7321f2a99ba7d507baff44be3d1a880">01011</a> <a class="code" href="s390-tdep_8c.html#af7321f2a99ba7d507baff44be3d1a880">is_rs</a> (bfd_byte *insn, <span class="keywordtype">int</span> op,
<a name="l01012"></a>01012        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *r1, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *r3, <span class="keywordtype">int</span> *d2, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *b2)
<a name="l01013"></a>01013 {
<a name="l01014"></a>01014   <span class="keywordflow">if</span> (insn[0] == op)
<a name="l01015"></a>01015     {
<a name="l01016"></a>01016       *r1 = (insn[1] &gt;&gt; 4) &amp; 0xf;
<a name="l01017"></a>01017       *r3 = insn[1] &amp; 0xf;
<a name="l01018"></a>01018       *b2 = (insn[2] &gt;&gt; 4) &amp; 0xf;
<a name="l01019"></a>01019       *d2 = ((insn[2] &amp; 0xf) &lt;&lt; 8) | insn[3];
<a name="l01020"></a>01020       <span class="keywordflow">return</span> 1;
<a name="l01021"></a>01021     }
<a name="l01022"></a>01022   <span class="keywordflow">else</span>
<a name="l01023"></a>01023     <span class="keywordflow">return</span> 0;
<a name="l01024"></a>01024 }
<a name="l01025"></a>01025 
<a name="l01026"></a>01026 
<a name="l01027"></a>01027 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01028"></a><a class="code" href="s390-tdep_8c.html#a23b3660804fd1ee3a827c18db2800961">01028</a> <a class="code" href="s390-tdep_8c.html#a23b3660804fd1ee3a827c18db2800961">is_rsy</a> (bfd_byte *insn, <span class="keywordtype">int</span> op1, <span class="keywordtype">int</span> op2,
<a name="l01029"></a>01029         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *r1, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *r3, <span class="keywordtype">int</span> *d2, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *b2)
<a name="l01030"></a>01030 {
<a name="l01031"></a>01031   <span class="keywordflow">if</span> (insn[0] == op1
<a name="l01032"></a>01032       &amp;&amp; insn[5] == op2)
<a name="l01033"></a>01033     {
<a name="l01034"></a>01034       *r1 = (insn[1] &gt;&gt; 4) &amp; 0xf;
<a name="l01035"></a>01035       *r3 = insn[1] &amp; 0xf;
<a name="l01036"></a>01036       *b2 = (insn[2] &gt;&gt; 4) &amp; 0xf;
<a name="l01037"></a>01037       <span class="comment">/* The &#39;long displacement&#39; is a 20-bit signed integer.  */</span>
<a name="l01038"></a>01038       *d2 = ((((insn[2] &amp; 0xf) &lt;&lt; 8) | insn[3] | (insn[4] &lt;&lt; 12)) 
<a name="l01039"></a>01039                 ^ 0x80000) - 0x80000;
<a name="l01040"></a>01040       <span class="keywordflow">return</span> 1;
<a name="l01041"></a>01041     }
<a name="l01042"></a>01042   <span class="keywordflow">else</span>
<a name="l01043"></a>01043     <span class="keywordflow">return</span> 0;
<a name="l01044"></a>01044 }
<a name="l01045"></a>01045 
<a name="l01046"></a>01046 
<a name="l01047"></a>01047 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01048"></a><a class="code" href="s390-tdep_8c.html#a2c24dc4e229203b6e5fdd71cad7a5752">01048</a> <a class="code" href="s390-tdep_8c.html#a2c24dc4e229203b6e5fdd71cad7a5752">is_rsi</a> (bfd_byte *insn, <span class="keywordtype">int</span> op,
<a name="l01049"></a>01049         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *r1, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *r3, <span class="keywordtype">int</span> *i2)
<a name="l01050"></a>01050 {
<a name="l01051"></a>01051   <span class="keywordflow">if</span> (insn[0] == op)
<a name="l01052"></a>01052     {
<a name="l01053"></a>01053       *r1 = (insn[1] &gt;&gt; 4) &amp; 0xf;
<a name="l01054"></a>01054       *r3 = insn[1] &amp; 0xf;
<a name="l01055"></a>01055       <span class="comment">/* i2 is a 16-bit signed quantity.  */</span>
<a name="l01056"></a>01056       *i2 = (((insn[2] &lt;&lt; 8) | insn[3]) ^ 0x8000) - 0x8000;
<a name="l01057"></a>01057       <span class="keywordflow">return</span> 1;
<a name="l01058"></a>01058     }
<a name="l01059"></a>01059   <span class="keywordflow">else</span>
<a name="l01060"></a>01060     <span class="keywordflow">return</span> 0;
<a name="l01061"></a>01061 }
<a name="l01062"></a>01062 
<a name="l01063"></a>01063 
<a name="l01064"></a>01064 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01065"></a><a class="code" href="s390-tdep_8c.html#aa9e45d2687f012ae916a0fc844034db6">01065</a> <a class="code" href="s390-tdep_8c.html#aa9e45d2687f012ae916a0fc844034db6">is_rie</a> (bfd_byte *insn, <span class="keywordtype">int</span> op1, <span class="keywordtype">int</span> op2,
<a name="l01066"></a>01066         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *r1, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *r3, <span class="keywordtype">int</span> *i2)
<a name="l01067"></a>01067 {
<a name="l01068"></a>01068   <span class="keywordflow">if</span> (insn[0] == op1
<a name="l01069"></a>01069       &amp;&amp; insn[5] == op2)
<a name="l01070"></a>01070     {
<a name="l01071"></a>01071       *r1 = (insn[1] &gt;&gt; 4) &amp; 0xf;
<a name="l01072"></a>01072       *r3 = insn[1] &amp; 0xf;
<a name="l01073"></a>01073       <span class="comment">/* i2 is a 16-bit signed quantity.  */</span>
<a name="l01074"></a>01074       *i2 = (((insn[2] &lt;&lt; 8) | insn[3]) ^ 0x8000) - 0x8000;
<a name="l01075"></a>01075       <span class="keywordflow">return</span> 1;
<a name="l01076"></a>01076     }
<a name="l01077"></a>01077   <span class="keywordflow">else</span>
<a name="l01078"></a>01078     <span class="keywordflow">return</span> 0;
<a name="l01079"></a>01079 }
<a name="l01080"></a>01080 
<a name="l01081"></a>01081 
<a name="l01082"></a>01082 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01083"></a><a class="code" href="s390-tdep_8c.html#a200ec40a2cb23e74fc2b585a6e4e4381">01083</a> <a class="code" href="s390-tdep_8c.html#a200ec40a2cb23e74fc2b585a6e4e4381">is_rx</a> (bfd_byte *insn, <span class="keywordtype">int</span> op,
<a name="l01084"></a>01084        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *r1, <span class="keywordtype">int</span> *d2, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *x2, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *b2)
<a name="l01085"></a>01085 {
<a name="l01086"></a>01086   <span class="keywordflow">if</span> (insn[0] == op)
<a name="l01087"></a>01087     {
<a name="l01088"></a>01088       *r1 = (insn[1] &gt;&gt; 4) &amp; 0xf;
<a name="l01089"></a>01089       *x2 = insn[1] &amp; 0xf;
<a name="l01090"></a>01090       *b2 = (insn[2] &gt;&gt; 4) &amp; 0xf;
<a name="l01091"></a>01091       *d2 = ((insn[2] &amp; 0xf) &lt;&lt; 8) | insn[3];
<a name="l01092"></a>01092       <span class="keywordflow">return</span> 1;
<a name="l01093"></a>01093     }
<a name="l01094"></a>01094   <span class="keywordflow">else</span>
<a name="l01095"></a>01095     <span class="keywordflow">return</span> 0;
<a name="l01096"></a>01096 }
<a name="l01097"></a>01097 
<a name="l01098"></a>01098 
<a name="l01099"></a>01099 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01100"></a><a class="code" href="s390-tdep_8c.html#a5f73cf256258cd13fca13ec2023a1a6c">01100</a> <a class="code" href="s390-tdep_8c.html#a5f73cf256258cd13fca13ec2023a1a6c">is_rxy</a> (bfd_byte *insn, <span class="keywordtype">int</span> op1, <span class="keywordtype">int</span> op2,
<a name="l01101"></a>01101         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *r1, <span class="keywordtype">int</span> *d2, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *x2, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *b2)
<a name="l01102"></a>01102 {
<a name="l01103"></a>01103   <span class="keywordflow">if</span> (insn[0] == op1
<a name="l01104"></a>01104       &amp;&amp; insn[5] == op2)
<a name="l01105"></a>01105     {
<a name="l01106"></a>01106       *r1 = (insn[1] &gt;&gt; 4) &amp; 0xf;
<a name="l01107"></a>01107       *x2 = insn[1] &amp; 0xf;
<a name="l01108"></a>01108       *b2 = (insn[2] &gt;&gt; 4) &amp; 0xf;
<a name="l01109"></a>01109       <span class="comment">/* The &#39;long displacement&#39; is a 20-bit signed integer.  */</span>
<a name="l01110"></a>01110       *d2 = ((((insn[2] &amp; 0xf) &lt;&lt; 8) | insn[3] | (insn[4] &lt;&lt; 12)) 
<a name="l01111"></a>01111                 ^ 0x80000) - 0x80000;
<a name="l01112"></a>01112       <span class="keywordflow">return</span> 1;
<a name="l01113"></a>01113     }
<a name="l01114"></a>01114   <span class="keywordflow">else</span>
<a name="l01115"></a>01115     <span class="keywordflow">return</span> 0;
<a name="l01116"></a>01116 }
<a name="l01117"></a>01117 
<a name="l01118"></a>01118 
<a name="l01119"></a>01119 <span class="comment">/* Prologue analysis.  */</span>
<a name="l01120"></a>01120 
<a name="l01121"></a><a class="code" href="s390-tdep_8c.html#a562bc37f6d3ad0974f9a133a4e09a440">01121</a> <span class="preprocessor">#define S390_NUM_GPRS 16</span>
<a name="l01122"></a><a class="code" href="s390-tdep_8c.html#a98d44356c84f940fbb702123447d3e2b">01122</a> <span class="preprocessor"></span><span class="preprocessor">#define S390_NUM_FPRS 16</span>
<a name="l01123"></a>01123 <span class="preprocessor"></span>
<a name="l01124"></a><a class="code" href="structs390__prologue__data.html">01124</a> <span class="keyword">struct </span><a class="code" href="structs390__prologue__data.html">s390_prologue_data</a> {
<a name="l01125"></a>01125 
<a name="l01126"></a>01126   <span class="comment">/* The stack.  */</span>
<a name="l01127"></a><a class="code" href="structs390__prologue__data.html#a93b2fbab8250e816de5b6165d431453c">01127</a>   <span class="keyword">struct </span><a class="code" href="structpv__area.html">pv_area</a> *<a class="code" href="structs390__prologue__data.html#a93b2fbab8250e816de5b6165d431453c">stack</a>;
<a name="l01128"></a>01128 
<a name="l01129"></a>01129   <span class="comment">/* The size and byte-order of a GPR or FPR.  */</span>
<a name="l01130"></a><a class="code" href="structs390__prologue__data.html#a030abe1b40144216f65571927a6d81bb">01130</a>   <span class="keywordtype">int</span> <a class="code" href="structs390__prologue__data.html#a030abe1b40144216f65571927a6d81bb">gpr_size</a>;
<a name="l01131"></a><a class="code" href="structs390__prologue__data.html#ad96940e9e8028658952aa1f7588fa7e8">01131</a>   <span class="keywordtype">int</span> <a class="code" href="structs390__prologue__data.html#ad96940e9e8028658952aa1f7588fa7e8">fpr_size</a>;
<a name="l01132"></a><a class="code" href="structs390__prologue__data.html#a5204f40d44a0e5e7943fa9b99490c170">01132</a>   <span class="keyword">enum</span> bfd_endian <a class="code" href="structs390__prologue__data.html#a5204f40d44a0e5e7943fa9b99490c170">byte_order</a>;
<a name="l01133"></a>01133 
<a name="l01134"></a>01134   <span class="comment">/* The general-purpose registers.  */</span>
<a name="l01135"></a><a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">01135</a>   <a class="code" href="structprologue__value.html">pv_t</a> <a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[<a class="code" href="s390-tdep_8c.html#a562bc37f6d3ad0974f9a133a4e09a440">S390_NUM_GPRS</a>];
<a name="l01136"></a>01136 
<a name="l01137"></a>01137   <span class="comment">/* The floating-point registers.  */</span>
<a name="l01138"></a><a class="code" href="structs390__prologue__data.html#a2cdb0ea7e378e43e5ee4d7950a991aae">01138</a>   <a class="code" href="structprologue__value.html">pv_t</a> <a class="code" href="structs390__prologue__data.html#a2cdb0ea7e378e43e5ee4d7950a991aae">fpr</a>[<a class="code" href="s390-tdep_8c.html#a98d44356c84f940fbb702123447d3e2b">S390_NUM_FPRS</a>];
<a name="l01139"></a>01139 
<a name="l01140"></a>01140   <span class="comment">/* The offset relative to the CFA where the incoming GPR N was saved</span>
<a name="l01141"></a>01141 <span class="comment">     by the function prologue.  0 if not saved or unknown.  */</span>
<a name="l01142"></a><a class="code" href="structs390__prologue__data.html#a669434cac329c5b88d3e2fd4beca6e20">01142</a>   <span class="keywordtype">int</span> <a class="code" href="structs390__prologue__data.html#a669434cac329c5b88d3e2fd4beca6e20">gpr_slot</a>[<a class="code" href="s390-tdep_8c.html#a562bc37f6d3ad0974f9a133a4e09a440">S390_NUM_GPRS</a>];
<a name="l01143"></a>01143 
<a name="l01144"></a>01144   <span class="comment">/* Likewise for FPRs.  */</span>
<a name="l01145"></a><a class="code" href="structs390__prologue__data.html#a9148ae4d008c4d46e3fda91945bd0b30">01145</a>   <span class="keywordtype">int</span> <a class="code" href="structs390__prologue__data.html#a9148ae4d008c4d46e3fda91945bd0b30">fpr_slot</a>[<a class="code" href="s390-tdep_8c.html#a98d44356c84f940fbb702123447d3e2b">S390_NUM_FPRS</a>];
<a name="l01146"></a>01146 
<a name="l01147"></a>01147   <span class="comment">/* Nonzero if the backchain was saved.  This is assumed to be the</span>
<a name="l01148"></a>01148 <span class="comment">     case when the incoming SP is saved at the current SP location.  */</span>
<a name="l01149"></a><a class="code" href="structs390__prologue__data.html#ab1659de04669163518908a76cab4366d">01149</a>   <span class="keywordtype">int</span> <a class="code" href="structs390__prologue__data.html#ab1659de04669163518908a76cab4366d">back_chain_saved_p</a>;
<a name="l01150"></a>01150 };
<a name="l01151"></a>01151 
<a name="l01152"></a>01152 <span class="comment">/* Return the effective address for an X-style instruction, like:</span>
<a name="l01153"></a>01153 <span class="comment"></span>
<a name="l01154"></a>01154 <span class="comment">        L R1, D2(X2, B2)</span>
<a name="l01155"></a>01155 <span class="comment"></span>
<a name="l01156"></a>01156 <span class="comment">   Here, X2 and B2 are registers, and D2 is a signed 20-bit</span>
<a name="l01157"></a>01157 <span class="comment">   constant; the effective address is the sum of all three.  If either</span>
<a name="l01158"></a>01158 <span class="comment">   X2 or B2 are zero, then it doesn&#39;t contribute to the sum --- this</span>
<a name="l01159"></a>01159 <span class="comment">   means that r0 can&#39;t be used as either X2 or B2.  */</span>
<a name="l01160"></a>01160 <span class="keyword">static</span> <a class="code" href="structprologue__value.html">pv_t</a>
<a name="l01161"></a><a class="code" href="s390-tdep_8c.html#a89ce76b71005790dad872bea81dbc116">01161</a> <a class="code" href="s390-tdep_8c.html#a89ce76b71005790dad872bea81dbc116">s390_addr</a> (<span class="keyword">struct</span> <a class="code" href="structs390__prologue__data.html">s390_prologue_data</a> *data,
<a name="l01162"></a>01162            <span class="keywordtype">int</span> d2, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x2, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> b2)
<a name="l01163"></a>01163 {
<a name="l01164"></a>01164   <a class="code" href="structprologue__value.html">pv_t</a> result;
<a name="l01165"></a>01165 
<a name="l01166"></a>01166   result = <a class="code" href="prologue-value_8c.html#a1d35dc4423d652ac8f7cbdfb94df117b">pv_constant</a> (d2);
<a name="l01167"></a>01167   <span class="keywordflow">if</span> (x2)
<a name="l01168"></a>01168     result = <a class="code" href="prologue-value_8c.html#a9bd6922d20b5d35a25036c73b6d572ce">pv_add</a> (result, data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[x2]);
<a name="l01169"></a>01169   <span class="keywordflow">if</span> (b2)
<a name="l01170"></a>01170     result = <a class="code" href="prologue-value_8c.html#a9bd6922d20b5d35a25036c73b6d572ce">pv_add</a> (result, data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[b2]);
<a name="l01171"></a>01171 
<a name="l01172"></a>01172   <span class="keywordflow">return</span> result;
<a name="l01173"></a>01173 }
<a name="l01174"></a>01174 
<a name="l01175"></a>01175 <span class="comment">/* Do a SIZE-byte store of VALUE to D2(X2,B2).  */</span>
<a name="l01176"></a>01176 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l01177"></a><a class="code" href="s390-tdep_8c.html#ad4a3560e7cd1a0c2c241c6372242e936">01177</a> <a class="code" href="s390-tdep_8c.html#ad4a3560e7cd1a0c2c241c6372242e936">s390_store</a> (<span class="keyword">struct</span> <a class="code" href="structs390__prologue__data.html">s390_prologue_data</a> *data,
<a name="l01178"></a>01178             <span class="keywordtype">int</span> d2, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x2, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> b2, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="go32-nat_8c.html#a854352f53b148adc24983a58a1866d66">size</a>,
<a name="l01179"></a>01179             <a class="code" href="structprologue__value.html">pv_t</a> <a class="code" href="structvalue.html">value</a>)
<a name="l01180"></a>01180 {
<a name="l01181"></a>01181   <a class="code" href="structprologue__value.html">pv_t</a> addr = <a class="code" href="s390-tdep_8c.html#a89ce76b71005790dad872bea81dbc116">s390_addr</a> (data, d2, x2, b2);
<a name="l01182"></a>01182   <a class="code" href="structprologue__value.html">pv_t</a> <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l01183"></a>01183 
<a name="l01184"></a>01184   <span class="comment">/* Check whether we are storing the backchain.  */</span>
<a name="l01185"></a>01185   offset = <a class="code" href="prologue-value_8c.html#a00a4a7681b4fd1a74d5e6f32bab6b973">pv_subtract</a> (data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[<a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a> - <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a>], addr);
<a name="l01186"></a>01186 
<a name="l01187"></a>01187   <span class="keywordflow">if</span> (<a class="code" href="prologue-value_8c.html#ae54ca4de092a4d35d4e583fb7fbd838c">pv_is_constant</a> (offset) &amp;&amp; offset.<a class="code" href="structprologue__value.html#a2dd1a03b2edadea2ade3c7d2aec24d22">k</a> == 0)
<a name="l01188"></a>01188     <span class="keywordflow">if</span> (size == data-&gt;<a class="code" href="structs390__prologue__data.html#a030abe1b40144216f65571927a6d81bb">gpr_size</a>
<a name="l01189"></a>01189         &amp;&amp; <a class="code" href="prologue-value_8c.html#a2a8f42226ec88b80bd295476a6648df6">pv_is_register_k</a> (value, <a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a>, 0))
<a name="l01190"></a>01190       {
<a name="l01191"></a>01191         data-&gt;<a class="code" href="structs390__prologue__data.html#ab1659de04669163518908a76cab4366d">back_chain_saved_p</a> = 1;
<a name="l01192"></a>01192         <span class="keywordflow">return</span>;
<a name="l01193"></a>01193       }
<a name="l01194"></a>01194 
<a name="l01195"></a>01195 
<a name="l01196"></a>01196   <span class="comment">/* Check whether we are storing a register into the stack.  */</span>
<a name="l01197"></a>01197   <span class="keywordflow">if</span> (!<a class="code" href="prologue-value_8c.html#af16f8e9cb043efd0a97c592f199d4aa7">pv_area_store_would_trash</a> (data-&gt;<a class="code" href="structs390__prologue__data.html#a93b2fbab8250e816de5b6165d431453c">stack</a>, addr))
<a name="l01198"></a>01198     <a class="code" href="prologue-value_8c.html#af1c1f51f05db124191cd6bf1a4077f3f">pv_area_store</a> (data-&gt;<a class="code" href="structs390__prologue__data.html#a93b2fbab8250e816de5b6165d431453c">stack</a>, addr, size, value);
<a name="l01199"></a>01199 
<a name="l01200"></a>01200 
<a name="l01201"></a>01201   <span class="comment">/* Note: If this is some store we cannot identify, you might think we</span>
<a name="l01202"></a>01202 <span class="comment">     should forget our cached values, as any of those might have been hit.</span>
<a name="l01203"></a>01203 <span class="comment"></span>
<a name="l01204"></a>01204 <span class="comment">     However, we make the assumption that the register save areas are only</span>
<a name="l01205"></a>01205 <span class="comment">     ever stored to once in any given function, and we do recognize these</span>
<a name="l01206"></a>01206 <span class="comment">     stores.  Thus every store we cannot recognize does not hit our data.  */</span>
<a name="l01207"></a>01207 }
<a name="l01208"></a>01208 
<a name="l01209"></a>01209 <span class="comment">/* Do a SIZE-byte load from D2(X2,B2).  */</span>
<a name="l01210"></a>01210 <span class="keyword">static</span> <a class="code" href="structprologue__value.html">pv_t</a>
<a name="l01211"></a><a class="code" href="s390-tdep_8c.html#aa0837c43a079e46852be8e4cfac58bbb">01211</a> <a class="code" href="s390-tdep_8c.html#aa0837c43a079e46852be8e4cfac58bbb">s390_load</a> (<span class="keyword">struct</span> <a class="code" href="structs390__prologue__data.html">s390_prologue_data</a> *data,
<a name="l01212"></a>01212            <span class="keywordtype">int</span> d2, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x2, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> b2, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="go32-nat_8c.html#a854352f53b148adc24983a58a1866d66">size</a>)
<a name="l01213"></a>01213            
<a name="l01214"></a>01214 {
<a name="l01215"></a>01215   <a class="code" href="structprologue__value.html">pv_t</a> addr = <a class="code" href="s390-tdep_8c.html#a89ce76b71005790dad872bea81dbc116">s390_addr</a> (data, d2, x2, b2);
<a name="l01216"></a>01216 
<a name="l01217"></a>01217   <span class="comment">/* If it&#39;s a load from an in-line constant pool, then we can</span>
<a name="l01218"></a>01218 <span class="comment">     simulate that, under the assumption that the code isn&#39;t</span>
<a name="l01219"></a>01219 <span class="comment">     going to change between the time the processor actually</span>
<a name="l01220"></a>01220 <span class="comment">     executed it creating the current frame, and the time when</span>
<a name="l01221"></a>01221 <span class="comment">     we&#39;re analyzing the code to unwind past that frame.  */</span>
<a name="l01222"></a>01222   <span class="keywordflow">if</span> (<a class="code" href="prologue-value_8c.html#ae54ca4de092a4d35d4e583fb7fbd838c">pv_is_constant</a> (addr))
<a name="l01223"></a>01223     {
<a name="l01224"></a>01224       <span class="keyword">struct </span><a class="code" href="structtarget__section.html">target_section</a> *secp;
<a name="l01225"></a>01225       secp = <a class="code" href="target_8c.html#a196ba145eb2ad5a85d02157bba8ee50d">target_section_by_addr</a> (&amp;<a class="code" href="target_8h.html#a2d8640b030266b58d3821eb5cfd112b9">current_target</a>, addr.<a class="code" href="structprologue__value.html#a2dd1a03b2edadea2ade3c7d2aec24d22">k</a>);
<a name="l01226"></a>01226       <span class="keywordflow">if</span> (secp != NULL
<a name="l01227"></a>01227           &amp;&amp; (bfd_get_section_flags (secp-&gt;<a class="code" href="structtarget__section.html#a3eeadf384747cb6a6e8cbb07db089723">the_bfd_section</a>-&gt;owner,
<a name="l01228"></a>01228                                      secp-&gt;<a class="code" href="structtarget__section.html#a3eeadf384747cb6a6e8cbb07db089723">the_bfd_section</a>)
<a name="l01229"></a>01229               &amp; SEC_READONLY))
<a name="l01230"></a>01230         <span class="keywordflow">return</span> <a class="code" href="prologue-value_8c.html#a1d35dc4423d652ac8f7cbdfb94df117b">pv_constant</a> (<a class="code" href="corefile_8c.html#a7097ab90f56ed7bcceb190bab139621b">read_memory_integer</a> (addr.<a class="code" href="structprologue__value.html#a2dd1a03b2edadea2ade3c7d2aec24d22">k</a>, size,
<a name="l01231"></a>01231                                                  data-&gt;<a class="code" href="structs390__prologue__data.html#a5204f40d44a0e5e7943fa9b99490c170">byte_order</a>));
<a name="l01232"></a>01232     }
<a name="l01233"></a>01233 
<a name="l01234"></a>01234   <span class="comment">/* Check whether we are accessing one of our save slots.  */</span>
<a name="l01235"></a>01235   <span class="keywordflow">return</span> <a class="code" href="prologue-value_8c.html#ab467d5c80e75828bd5889f4c2b16ca48">pv_area_fetch</a> (data-&gt;<a class="code" href="structs390__prologue__data.html#a93b2fbab8250e816de5b6165d431453c">stack</a>, addr, size);
<a name="l01236"></a>01236 }
<a name="l01237"></a>01237 
<a name="l01238"></a>01238 <span class="comment">/* Function for finding saved registers in a &#39;struct pv_area&#39;; we pass</span>
<a name="l01239"></a>01239 <span class="comment">   this to pv_area_scan.</span>
<a name="l01240"></a>01240 <span class="comment"></span>
<a name="l01241"></a>01241 <span class="comment">   If VALUE is a saved register, ADDR says it was saved at a constant</span>
<a name="l01242"></a>01242 <span class="comment">   offset from the frame base, and SIZE indicates that the whole</span>
<a name="l01243"></a>01243 <span class="comment">   register was saved, record its offset in the reg_offset table in</span>
<a name="l01244"></a>01244 <span class="comment">   PROLOGUE_UNTYPED.  */</span>
<a name="l01245"></a>01245 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l01246"></a><a class="code" href="s390-tdep_8c.html#a9c7766b26bef5ef88bf14af2fe97ee42">01246</a> <a class="code" href="s390-tdep_8c.html#a9c7766b26bef5ef88bf14af2fe97ee42">s390_check_for_saved</a> (<span class="keywordtype">void</span> *data_untyped, <a class="code" href="structprologue__value.html">pv_t</a> <a class="code" href="structtarget__section.html#a3e4564d6ceb39f962f70bb7afdd3b260">addr</a>,
<a name="l01247"></a>01247                       <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="go32-nat_8c.html#a854352f53b148adc24983a58a1866d66">size</a>, <a class="code" href="structprologue__value.html">pv_t</a> <a class="code" href="structvalue.html">value</a>)
<a name="l01248"></a>01248 {
<a name="l01249"></a>01249   <span class="keyword">struct </span><a class="code" href="structs390__prologue__data.html">s390_prologue_data</a> *data = data_untyped;
<a name="l01250"></a>01250   <span class="keywordtype">int</span> i, <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l01251"></a>01251 
<a name="l01252"></a>01252   <span class="keywordflow">if</span> (!<a class="code" href="prologue-value_8c.html#acb3cd4d819006186a58efb6243d43a29">pv_is_register</a> (addr, <a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a>))
<a name="l01253"></a>01253     <span class="keywordflow">return</span>;
<a name="l01254"></a>01254 
<a name="l01255"></a>01255   offset = 16 * data-&gt;<a class="code" href="structs390__prologue__data.html#a030abe1b40144216f65571927a6d81bb">gpr_size</a> + 32 - addr.<a class="code" href="structprologue__value.html#a2dd1a03b2edadea2ade3c7d2aec24d22">k</a>;
<a name="l01256"></a>01256 
<a name="l01257"></a>01257   <span class="comment">/* If we are storing the original value of a register, we want to</span>
<a name="l01258"></a>01258 <span class="comment">     record the CFA offset.  If the same register is stored multiple</span>
<a name="l01259"></a>01259 <span class="comment">     times, the stack slot with the highest address counts.  */</span>
<a name="l01260"></a>01260  
<a name="l01261"></a>01261   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="s390-tdep_8c.html#a562bc37f6d3ad0974f9a133a4e09a440">S390_NUM_GPRS</a>; i++)
<a name="l01262"></a>01262     <span class="keywordflow">if</span> (size == data-&gt;<a class="code" href="structs390__prologue__data.html#a030abe1b40144216f65571927a6d81bb">gpr_size</a>
<a name="l01263"></a>01263         &amp;&amp; <a class="code" href="prologue-value_8c.html#a2a8f42226ec88b80bd295476a6648df6">pv_is_register_k</a> (value, <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a> + i, 0))
<a name="l01264"></a>01264       <span class="keywordflow">if</span> (data-&gt;<a class="code" href="structs390__prologue__data.html#a669434cac329c5b88d3e2fd4beca6e20">gpr_slot</a>[i] == 0
<a name="l01265"></a>01265           || data-&gt;<a class="code" href="structs390__prologue__data.html#a669434cac329c5b88d3e2fd4beca6e20">gpr_slot</a>[i] &gt; offset)
<a name="l01266"></a>01266         {
<a name="l01267"></a>01267           data-&gt;<a class="code" href="structs390__prologue__data.html#a669434cac329c5b88d3e2fd4beca6e20">gpr_slot</a>[i] = <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l01268"></a>01268           <span class="keywordflow">return</span>;
<a name="l01269"></a>01269         }
<a name="l01270"></a>01270 
<a name="l01271"></a>01271   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="s390-tdep_8c.html#a98d44356c84f940fbb702123447d3e2b">S390_NUM_FPRS</a>; i++)
<a name="l01272"></a>01272     <span class="keywordflow">if</span> (size == data-&gt;<a class="code" href="structs390__prologue__data.html#ad96940e9e8028658952aa1f7588fa7e8">fpr_size</a>
<a name="l01273"></a>01273         &amp;&amp; <a class="code" href="prologue-value_8c.html#a2a8f42226ec88b80bd295476a6648df6">pv_is_register_k</a> (value, <a class="code" href="s390-tdep_8h.html#a49c471b21ebc6e58b3db78912901bbfc">S390_F0_REGNUM</a> + i, 0))
<a name="l01274"></a>01274       <span class="keywordflow">if</span> (data-&gt;<a class="code" href="structs390__prologue__data.html#a9148ae4d008c4d46e3fda91945bd0b30">fpr_slot</a>[i] == 0
<a name="l01275"></a>01275           || data-&gt;<a class="code" href="structs390__prologue__data.html#a9148ae4d008c4d46e3fda91945bd0b30">fpr_slot</a>[i] &gt; offset)
<a name="l01276"></a>01276         {
<a name="l01277"></a>01277           data-&gt;<a class="code" href="structs390__prologue__data.html#a9148ae4d008c4d46e3fda91945bd0b30">fpr_slot</a>[i] = <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l01278"></a>01278           <span class="keywordflow">return</span>;
<a name="l01279"></a>01279         }
<a name="l01280"></a>01280 }
<a name="l01281"></a>01281 
<a name="l01282"></a>01282 <span class="comment">/* Analyze the prologue of the function starting at START_PC,</span>
<a name="l01283"></a>01283 <span class="comment">   continuing at most until CURRENT_PC.  Initialize DATA to</span>
<a name="l01284"></a>01284 <span class="comment">   hold all information we find out about the state of the registers</span>
<a name="l01285"></a>01285 <span class="comment">   and stack slots.  Return the address of the instruction after</span>
<a name="l01286"></a>01286 <span class="comment">   the last one that changed the SP, FP, or back chain; or zero</span>
<a name="l01287"></a>01287 <span class="comment">   on error.  */</span>
<a name="l01288"></a>01288 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l01289"></a><a class="code" href="s390-tdep_8c.html#a73a2a877b2e6d59d4fb13d77af183eb3">01289</a> <a class="code" href="s390-tdep_8c.html#a73a2a877b2e6d59d4fb13d77af183eb3">s390_analyze_prologue</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>,
<a name="l01290"></a>01290                        <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> start_pc,
<a name="l01291"></a>01291                        <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> current_pc,
<a name="l01292"></a>01292                        <span class="keyword">struct</span> <a class="code" href="structs390__prologue__data.html">s390_prologue_data</a> *data)
<a name="l01293"></a>01293 {
<a name="l01294"></a>01294   <span class="keywordtype">int</span> word_size = <a class="code" href="gdbarch_8c.html#ae356193e481873e4377ff922d984f13f">gdbarch_ptr_bit</a> (gdbarch) / 8;
<a name="l01295"></a>01295 
<a name="l01296"></a>01296   <span class="comment">/* Our return value:</span>
<a name="l01297"></a>01297 <span class="comment">     The address of the instruction after the last one that changed</span>
<a name="l01298"></a>01298 <span class="comment">     the SP, FP, or back chain;  zero if we got an error trying to </span>
<a name="l01299"></a>01299 <span class="comment">     read memory.  */</span>
<a name="l01300"></a>01300   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> result = start_pc;
<a name="l01301"></a>01301 
<a name="l01302"></a>01302   <span class="comment">/* The current PC for our abstract interpretation.  */</span>
<a name="l01303"></a>01303   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc;
<a name="l01304"></a>01304 
<a name="l01305"></a>01305   <span class="comment">/* The address of the next instruction after that.  */</span>
<a name="l01306"></a>01306   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> next_pc;
<a name="l01307"></a>01307   
<a name="l01308"></a>01308   <span class="comment">/* Set up everything&#39;s initial value.  */</span>
<a name="l01309"></a>01309   {
<a name="l01310"></a>01310     <span class="keywordtype">int</span> i;
<a name="l01311"></a>01311 
<a name="l01312"></a>01312     data-&gt;<a class="code" href="structs390__prologue__data.html#a93b2fbab8250e816de5b6165d431453c">stack</a> = <a class="code" href="prologue-value_8c.html#a962e98d46aef2ed10288f8ae28b713f0">make_pv_area</a> (<a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a>, <a class="code" href="gdbarch_8c.html#a3ee335ac98782b6633ab7fc235182cc9">gdbarch_addr_bit</a> (gdbarch));
<a name="l01313"></a>01313 
<a name="l01314"></a>01314     <span class="comment">/* For the purpose of prologue tracking, we consider the GPR size to</span>
<a name="l01315"></a>01315 <span class="comment">       be equal to the ABI word size, even if it is actually larger</span>
<a name="l01316"></a>01316 <span class="comment">       (i.e. when running a 32-bit binary under a 64-bit kernel).  */</span>
<a name="l01317"></a>01317     data-&gt;<a class="code" href="structs390__prologue__data.html#a030abe1b40144216f65571927a6d81bb">gpr_size</a> = word_size;
<a name="l01318"></a>01318     data-&gt;<a class="code" href="structs390__prologue__data.html#ad96940e9e8028658952aa1f7588fa7e8">fpr_size</a> = 8;
<a name="l01319"></a>01319     data-&gt;<a class="code" href="structs390__prologue__data.html#a5204f40d44a0e5e7943fa9b99490c170">byte_order</a> = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l01320"></a>01320 
<a name="l01321"></a>01321     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="s390-tdep_8c.html#a562bc37f6d3ad0974f9a133a4e09a440">S390_NUM_GPRS</a>; i++)
<a name="l01322"></a>01322       data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[i] = <a class="code" href="prologue-value_8c.html#a34b5d4a01cdf3fdb23cc9b69a407acc2">pv_register</a> (<a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a> + i, 0);
<a name="l01323"></a>01323 
<a name="l01324"></a>01324     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="s390-tdep_8c.html#a98d44356c84f940fbb702123447d3e2b">S390_NUM_FPRS</a>; i++)
<a name="l01325"></a>01325       data-&gt;<a class="code" href="structs390__prologue__data.html#a2cdb0ea7e378e43e5ee4d7950a991aae">fpr</a>[i] = <a class="code" href="prologue-value_8c.html#a34b5d4a01cdf3fdb23cc9b69a407acc2">pv_register</a> (<a class="code" href="s390-tdep_8h.html#a49c471b21ebc6e58b3db78912901bbfc">S390_F0_REGNUM</a> + i, 0);
<a name="l01326"></a>01326 
<a name="l01327"></a>01327     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="s390-tdep_8c.html#a562bc37f6d3ad0974f9a133a4e09a440">S390_NUM_GPRS</a>; i++)
<a name="l01328"></a>01328       data-&gt;<a class="code" href="structs390__prologue__data.html#a669434cac329c5b88d3e2fd4beca6e20">gpr_slot</a>[i]  = 0;
<a name="l01329"></a>01329 
<a name="l01330"></a>01330     for (i = 0; i &lt; <a class="code" href="s390-tdep_8c.html#a98d44356c84f940fbb702123447d3e2b">S390_NUM_FPRS</a>; i++)
<a name="l01331"></a>01331       data-&gt;<a class="code" href="structs390__prologue__data.html#a9148ae4d008c4d46e3fda91945bd0b30">fpr_slot</a>[i]  = 0;
<a name="l01332"></a>01332 
<a name="l01333"></a>01333     data-&gt;<a class="code" href="structs390__prologue__data.html#ab1659de04669163518908a76cab4366d">back_chain_saved_p</a> = 0;
<a name="l01334"></a>01334   }
<a name="l01335"></a>01335 
<a name="l01336"></a>01336   <span class="comment">/* Start interpreting instructions, until we hit the frame&#39;s</span>
<a name="l01337"></a>01337 <span class="comment">     current PC or the first branch instruction.  */</span>
<a name="l01338"></a>01338   <span class="keywordflow">for</span> (pc = start_pc; pc &gt; 0 &amp;&amp; pc &lt; current_pc; pc = next_pc)
<a name="l01339"></a>01339     {
<a name="l01340"></a>01340       bfd_byte insn[<a class="code" href="s390-tdep_8c.html#a4c66fa932b211ca014f7b83f66b871e3">S390_MAX_INSTR_SIZE</a>];
<a name="l01341"></a>01341       <span class="keywordtype">int</span> insn_len = <a class="code" href="s390-tdep_8c.html#a931ae969aed0641258c45afcb1410b2f">s390_readinstruction</a> (insn, pc);
<a name="l01342"></a>01342 
<a name="l01343"></a>01343       bfd_byte <a class="code" href="go32-nat_8c.html#a36fb645a916cd19d79712e75c47b8d03">dummy</a>[<a class="code" href="s390-tdep_8c.html#a4c66fa932b211ca014f7b83f66b871e3">S390_MAX_INSTR_SIZE</a>] = { 0 };
<a name="l01344"></a>01344       bfd_byte *insn32 = word_size == 4 ? insn : <a class="code" href="go32-nat_8c.html#a36fb645a916cd19d79712e75c47b8d03">dummy</a>;
<a name="l01345"></a>01345       bfd_byte *insn64 = word_size == 8 ? insn : <a class="code" href="go32-nat_8c.html#a36fb645a916cd19d79712e75c47b8d03">dummy</a>;
<a name="l01346"></a>01346 
<a name="l01347"></a>01347       <span class="comment">/* Fields for various kinds of instructions.  */</span>
<a name="l01348"></a>01348       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> b2, r1, r2, x2, r3;
<a name="l01349"></a>01349       <span class="keywordtype">int</span> i2, d2;
<a name="l01350"></a>01350 
<a name="l01351"></a>01351       <span class="comment">/* The values of SP and FP before this instruction,</span>
<a name="l01352"></a>01352 <span class="comment">         for detecting instructions that change them.  */</span>
<a name="l01353"></a>01353       <a class="code" href="structprologue__value.html">pv_t</a> pre_insn_sp, pre_insn_fp;
<a name="l01354"></a>01354       <span class="comment">/* Likewise for the flag whether the back chain was saved.  */</span>
<a name="l01355"></a>01355       <span class="keywordtype">int</span> pre_insn_back_chain_saved_p;
<a name="l01356"></a>01356 
<a name="l01357"></a>01357       <span class="comment">/* If we got an error trying to read the instruction, report it.  */</span>
<a name="l01358"></a>01358       <span class="keywordflow">if</span> (insn_len &lt; 0)
<a name="l01359"></a>01359         {
<a name="l01360"></a>01360           result = 0;
<a name="l01361"></a>01361           <span class="keywordflow">break</span>;
<a name="l01362"></a>01362         }
<a name="l01363"></a>01363 
<a name="l01364"></a>01364       next_pc = pc + insn_len;
<a name="l01365"></a>01365 
<a name="l01366"></a>01366       pre_insn_sp = data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[<a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a> - <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a>];
<a name="l01367"></a>01367       pre_insn_fp = data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[<a class="code" href="s390-tdep_8h.html#a31af3bccb0bda6d6396851551c3b71f5">S390_FRAME_REGNUM</a> - <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a>];
<a name="l01368"></a>01368       pre_insn_back_chain_saved_p = data-&gt;<a class="code" href="structs390__prologue__data.html#ab1659de04669163518908a76cab4366d">back_chain_saved_p</a>;
<a name="l01369"></a>01369 
<a name="l01370"></a>01370 
<a name="l01371"></a>01371       <span class="comment">/* LHI r1, i2 --- load halfword immediate.  */</span>
<a name="l01372"></a>01372       <span class="comment">/* LGHI r1, i2 --- load halfword immediate (64-bit version).  */</span>
<a name="l01373"></a>01373       <span class="comment">/* LGFI r1, i2 --- load fullword immediate.  */</span>
<a name="l01374"></a>01374       <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#aba2d5253005bb90c5fa62dae8c835547">is_ri</a> (insn32, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeadb010259482679101f4da11410776835">op1_lhi</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2ea5aa2592a29524e7e93ef55af54bb5">op2_lhi</a>, &amp;r1, &amp;i2)
<a name="l01375"></a>01375           || <a class="code" href="s390-tdep_8c.html#aba2d5253005bb90c5fa62dae8c835547">is_ri</a> (insn64, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea0de2f9977e79f00384901543d857e8ae">op1_lghi</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaf4ac5d6de274f249b40543b61eb03e47">op2_lghi</a>, &amp;r1, &amp;i2)
<a name="l01376"></a>01376           || <a class="code" href="s390-tdep_8c.html#a76c82ff57e5109d64450d9f79c953be1">is_ril</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea0981930806f46c239f8c27bae26b2bb9">op1_lgfi</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeafc42577199e9429249201d48d387c4fb">op2_lgfi</a>, &amp;r1, &amp;i2))
<a name="l01377"></a>01377         data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r1] = <a class="code" href="prologue-value_8c.html#a1d35dc4423d652ac8f7cbdfb94df117b">pv_constant</a> (i2);
<a name="l01378"></a>01378 
<a name="l01379"></a>01379       <span class="comment">/* LR r1, r2 --- load from register.  */</span>
<a name="l01380"></a>01380       <span class="comment">/* LGR r1, r2 --- load from register (64-bit version).  */</span>
<a name="l01381"></a>01381       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a320f6b6218c97a66d6ab010fd089b98c">is_rr</a> (insn32, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea82d2604a56499c76c8185e08c5eded26">op_lr</a>, &amp;r1, &amp;r2)
<a name="l01382"></a>01382                || <a class="code" href="s390-tdep_8c.html#ab8776695f07642f8be597722b774ccfd">is_rre</a> (insn64, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea82a97704639bb1711cbbabebf4934e6f">op_lgr</a>, &amp;r1, &amp;r2))
<a name="l01383"></a>01383         data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r1] = data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r2];
<a name="l01384"></a>01384 
<a name="l01385"></a>01385       <span class="comment">/* L r1, d2(x2, b2) --- load.  */</span>
<a name="l01386"></a>01386       <span class="comment">/* LY r1, d2(x2, b2) --- load (long-displacement version).  */</span>
<a name="l01387"></a>01387       <span class="comment">/* LG r1, d2(x2, b2) --- load (64-bit version).  */</span>
<a name="l01388"></a>01388       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a200ec40a2cb23e74fc2b585a6e4e4381">is_rx</a> (insn32, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea05531cc41979d9d0a7139125a946d5b6">op_l</a>, &amp;r1, &amp;d2, &amp;x2, &amp;b2)
<a name="l01389"></a>01389                || <a class="code" href="s390-tdep_8c.html#a5f73cf256258cd13fca13ec2023a1a6c">is_rxy</a> (insn32, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea5a1f70f224c1c61fd053bf429caa864b">op1_ly</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea091985929b1c9690c660335113ac468c">op2_ly</a>, &amp;r1, &amp;d2, &amp;x2, &amp;b2)
<a name="l01390"></a>01390                || <a class="code" href="s390-tdep_8c.html#a5f73cf256258cd13fca13ec2023a1a6c">is_rxy</a> (insn64, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeadca1215a67220dbd4ab98fa78d6f708d">op1_lg</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2df50613b3549ba87517b690b12e5ce0">op2_lg</a>, &amp;r1, &amp;d2, &amp;x2, &amp;b2))
<a name="l01391"></a>01391         data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r1] = <a class="code" href="s390-tdep_8c.html#aa0837c43a079e46852be8e4cfac58bbb">s390_load</a> (data, d2, x2, b2, data-&gt;<a class="code" href="structs390__prologue__data.html#a030abe1b40144216f65571927a6d81bb">gpr_size</a>);
<a name="l01392"></a>01392 
<a name="l01393"></a>01393       <span class="comment">/* ST r1, d2(x2, b2) --- store.  */</span>
<a name="l01394"></a>01394       <span class="comment">/* STY r1, d2(x2, b2) --- store (long-displacement version).  */</span>
<a name="l01395"></a>01395       <span class="comment">/* STG r1, d2(x2, b2) --- store (64-bit version).  */</span>
<a name="l01396"></a>01396       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a200ec40a2cb23e74fc2b585a6e4e4381">is_rx</a> (insn32, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea3c7ca7c22cd2befa6dc43dd94a49ec40">op_st</a>, &amp;r1, &amp;d2, &amp;x2, &amp;b2)
<a name="l01397"></a>01397                || <a class="code" href="s390-tdep_8c.html#a5f73cf256258cd13fca13ec2023a1a6c">is_rxy</a> (insn32, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea1c46271888a8f5c2dcbdbc5c28257c37">op1_sty</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2b5142889dcae6546fa70ed812fad459">op2_sty</a>, &amp;r1, &amp;d2, &amp;x2, &amp;b2)
<a name="l01398"></a>01398                || <a class="code" href="s390-tdep_8c.html#a5f73cf256258cd13fca13ec2023a1a6c">is_rxy</a> (insn64, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea1bdaa3c047559af86e53aa0b51fc4fd6">op1_stg</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea7f2753100d67b2761d25cc93f0d002ac">op2_stg</a>, &amp;r1, &amp;d2, &amp;x2, &amp;b2))
<a name="l01399"></a>01399         <a class="code" href="s390-tdep_8c.html#ad4a3560e7cd1a0c2c241c6372242e936">s390_store</a> (data, d2, x2, b2, data-&gt;<a class="code" href="structs390__prologue__data.html#a030abe1b40144216f65571927a6d81bb">gpr_size</a>, data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r1]);
<a name="l01400"></a>01400 
<a name="l01401"></a>01401       <span class="comment">/* STD r1, d2(x2,b2) --- store floating-point register.  */</span>
<a name="l01402"></a>01402       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a200ec40a2cb23e74fc2b585a6e4e4381">is_rx</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea5b46be3df9c651bced7c64ad5e1b0e93">op_std</a>, &amp;r1, &amp;d2, &amp;x2, &amp;b2))
<a name="l01403"></a>01403         <a class="code" href="s390-tdep_8c.html#ad4a3560e7cd1a0c2c241c6372242e936">s390_store</a> (data, d2, x2, b2, data-&gt;<a class="code" href="structs390__prologue__data.html#ad96940e9e8028658952aa1f7588fa7e8">fpr_size</a>, data-&gt;<a class="code" href="structs390__prologue__data.html#a2cdb0ea7e378e43e5ee4d7950a991aae">fpr</a>[r1]);
<a name="l01404"></a>01404 
<a name="l01405"></a>01405       <span class="comment">/* STM r1, r3, d2(b2) --- store multiple.  */</span>
<a name="l01406"></a>01406       <span class="comment">/* STMY r1, r3, d2(b2) --- store multiple (long-displacement</span>
<a name="l01407"></a>01407 <span class="comment">         version).  */</span>
<a name="l01408"></a>01408       <span class="comment">/* STMG r1, r3, d2(b2) --- store multiple (64-bit version).  */</span>
<a name="l01409"></a>01409       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#af7321f2a99ba7d507baff44be3d1a880">is_rs</a> (insn32, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea049c312e8c405ebc44e24031d47c2f71">op_stm</a>, &amp;r1, &amp;r3, &amp;d2, &amp;b2)
<a name="l01410"></a>01410                || <a class="code" href="s390-tdep_8c.html#a23b3660804fd1ee3a827c18db2800961">is_rsy</a> (insn32, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea5914328a033902381c57c4c5aca0518f">op1_stmy</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea0d3c9fbc6cd8d0ea193f5cd17e955855">op2_stmy</a>, &amp;r1, &amp;r3, &amp;d2, &amp;b2)
<a name="l01411"></a>01411                || <a class="code" href="s390-tdep_8c.html#a23b3660804fd1ee3a827c18db2800961">is_rsy</a> (insn64, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea71552030b0db841b52c242124d6ae031">op1_stmg</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea510db4c92b0557eed0e3e2251a1fad22">op2_stmg</a>, &amp;r1, &amp;r3, &amp;d2, &amp;b2))
<a name="l01412"></a>01412         {
<a name="l01413"></a>01413           <span class="keywordflow">for</span> (; r1 &lt;= r3; r1++, d2 += data-&gt;<a class="code" href="structs390__prologue__data.html#a030abe1b40144216f65571927a6d81bb">gpr_size</a>)
<a name="l01414"></a>01414             <a class="code" href="s390-tdep_8c.html#ad4a3560e7cd1a0c2c241c6372242e936">s390_store</a> (data, d2, 0, b2, data-&gt;<a class="code" href="structs390__prologue__data.html#a030abe1b40144216f65571927a6d81bb">gpr_size</a>, data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r1]);
<a name="l01415"></a>01415         }
<a name="l01416"></a>01416 
<a name="l01417"></a>01417       <span class="comment">/* AHI r1, i2 --- add halfword immediate.  */</span>
<a name="l01418"></a>01418       <span class="comment">/* AGHI r1, i2 --- add halfword immediate (64-bit version).  */</span>
<a name="l01419"></a>01419       <span class="comment">/* AFI r1, i2 --- add fullword immediate.  */</span>
<a name="l01420"></a>01420       <span class="comment">/* AGFI r1, i2 --- add fullword immediate (64-bit version).  */</span>
<a name="l01421"></a>01421       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#aba2d5253005bb90c5fa62dae8c835547">is_ri</a> (insn32, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea213f9f0dca89db77b1f03c69e3eb9de9">op1_ahi</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaa3389c8d42e70b9ae3ec5ca70853052d">op2_ahi</a>, &amp;r1, &amp;i2)
<a name="l01422"></a>01422                || <a class="code" href="s390-tdep_8c.html#aba2d5253005bb90c5fa62dae8c835547">is_ri</a> (insn64, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeae6393ddbb315926225c7d1f2bd2dd5c5">op1_aghi</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea93e8854da8dc4f3cc77c493140c36bde">op2_aghi</a>, &amp;r1, &amp;i2)
<a name="l01423"></a>01423                || <a class="code" href="s390-tdep_8c.html#a76c82ff57e5109d64450d9f79c953be1">is_ril</a> (insn32, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea4ab763c6de9386c50292d3cf5b42c6ae">op1_afi</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaf91e9962bf43a5a65aeb00b0887f630a">op2_afi</a>, &amp;r1, &amp;i2)
<a name="l01424"></a>01424                || <a class="code" href="s390-tdep_8c.html#a76c82ff57e5109d64450d9f79c953be1">is_ril</a> (insn64, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeab207eeab40bfb04b110af3a7a54c8db7">op1_agfi</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea3e2233a42b0cc6dec2dca24429374075">op2_agfi</a>, &amp;r1, &amp;i2))
<a name="l01425"></a>01425         data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r1] = <a class="code" href="prologue-value_8c.html#abb868b251953ef345cda781678243e18">pv_add_constant</a> (data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r1], i2);
<a name="l01426"></a>01426 
<a name="l01427"></a>01427       <span class="comment">/* ALFI r1, i2 --- add logical immediate.  */</span>
<a name="l01428"></a>01428       <span class="comment">/* ALGFI r1, i2 --- add logical immediate (64-bit version).  */</span>
<a name="l01429"></a>01429       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a76c82ff57e5109d64450d9f79c953be1">is_ril</a> (insn32, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea828d1ac9bd0cfddf2d9895e8b74ee282">op1_alfi</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeac99dfa316dd68786fc04d7f8ff73f628">op2_alfi</a>, &amp;r1, &amp;i2)
<a name="l01430"></a>01430                || <a class="code" href="s390-tdep_8c.html#a76c82ff57e5109d64450d9f79c953be1">is_ril</a> (insn64, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea35256bd25b075d1f80cf1b360ddce413">op1_algfi</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2b1bf6b9332d4e220731111b9fd6c2b4">op2_algfi</a>, &amp;r1, &amp;i2))
<a name="l01431"></a>01431         data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r1] = <a class="code" href="prologue-value_8c.html#abb868b251953ef345cda781678243e18">pv_add_constant</a> (data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r1],
<a name="l01432"></a>01432                                          (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>)i2 &amp; 0xffffffff);
<a name="l01433"></a>01433 
<a name="l01434"></a>01434       <span class="comment">/* AR r1, r2 -- add register.  */</span>
<a name="l01435"></a>01435       <span class="comment">/* AGR r1, r2 -- add register (64-bit version).  */</span>
<a name="l01436"></a>01436       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a320f6b6218c97a66d6ab010fd089b98c">is_rr</a> (insn32, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaf008fd7350ead0cb0b813ed9a7dffee4">op_ar</a>, &amp;r1, &amp;r2)
<a name="l01437"></a>01437                || <a class="code" href="s390-tdep_8c.html#ab8776695f07642f8be597722b774ccfd">is_rre</a> (insn64, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea0dadc4610465dad0a031eec806d1268a">op_agr</a>, &amp;r1, &amp;r2))
<a name="l01438"></a>01438         data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r1] = <a class="code" href="prologue-value_8c.html#a9bd6922d20b5d35a25036c73b6d572ce">pv_add</a> (data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r1], data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r2]);
<a name="l01439"></a>01439 
<a name="l01440"></a>01440       <span class="comment">/* A r1, d2(x2, b2) -- add.  */</span>
<a name="l01441"></a>01441       <span class="comment">/* AY r1, d2(x2, b2) -- add (long-displacement version).  */</span>
<a name="l01442"></a>01442       <span class="comment">/* AG r1, d2(x2, b2) -- add (64-bit version).  */</span>
<a name="l01443"></a>01443       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a200ec40a2cb23e74fc2b585a6e4e4381">is_rx</a> (insn32, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaf3134e04b09f15e32c646d70c006ca47">op_a</a>, &amp;r1, &amp;d2, &amp;x2, &amp;b2)
<a name="l01444"></a>01444                || <a class="code" href="s390-tdep_8c.html#a5f73cf256258cd13fca13ec2023a1a6c">is_rxy</a> (insn32, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeacc3ca433724f51b12f41801fff5e9465">op1_ay</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaaca91f71af7d77fff0b87a1bf66c18cb">op2_ay</a>, &amp;r1, &amp;d2, &amp;x2, &amp;b2)
<a name="l01445"></a>01445                || <a class="code" href="s390-tdep_8c.html#a5f73cf256258cd13fca13ec2023a1a6c">is_rxy</a> (insn64, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2dccb15c4f5fb65a1aa0f45c1e64459b">op1_ag</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeae71eeb26538bff76dc4edbab164ee402">op2_ag</a>, &amp;r1, &amp;d2, &amp;x2, &amp;b2))
<a name="l01446"></a>01446         data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r1] = <a class="code" href="prologue-value_8c.html#a9bd6922d20b5d35a25036c73b6d572ce">pv_add</a> (data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r1],
<a name="l01447"></a>01447                                 <a class="code" href="s390-tdep_8c.html#aa0837c43a079e46852be8e4cfac58bbb">s390_load</a> (data, d2, x2, b2, data-&gt;<a class="code" href="structs390__prologue__data.html#a030abe1b40144216f65571927a6d81bb">gpr_size</a>));
<a name="l01448"></a>01448 
<a name="l01449"></a>01449       <span class="comment">/* SLFI r1, i2 --- subtract logical immediate.  */</span>
<a name="l01450"></a>01450       <span class="comment">/* SLGFI r1, i2 --- subtract logical immediate (64-bit version).  */</span>
<a name="l01451"></a>01451       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a76c82ff57e5109d64450d9f79c953be1">is_ril</a> (insn32, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea4cd9a65547c990f63abd4873a76f4fd4">op1_slfi</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea16b9b23e1fb9ec594d2c22eab1af8499">op2_slfi</a>, &amp;r1, &amp;i2)
<a name="l01452"></a>01452                || <a class="code" href="s390-tdep_8c.html#a76c82ff57e5109d64450d9f79c953be1">is_ril</a> (insn64, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaf9b8cbaa421a1b1d0bf7a50d836b71d9">op1_slgfi</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeabebda767b50d52e168ba2d4713a7af49">op2_slgfi</a>, &amp;r1, &amp;i2))
<a name="l01453"></a>01453         data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r1] = <a class="code" href="prologue-value_8c.html#abb868b251953ef345cda781678243e18">pv_add_constant</a> (data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r1],
<a name="l01454"></a>01454                                          -((<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>)i2 &amp; 0xffffffff));
<a name="l01455"></a>01455 
<a name="l01456"></a>01456       <span class="comment">/* SR r1, r2 -- subtract register.  */</span>
<a name="l01457"></a>01457       <span class="comment">/* SGR r1, r2 -- subtract register (64-bit version).  */</span>
<a name="l01458"></a>01458       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a320f6b6218c97a66d6ab010fd089b98c">is_rr</a> (insn32, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea815a509a746312d07dd6e4dff5f69a46">op_sr</a>, &amp;r1, &amp;r2)
<a name="l01459"></a>01459                || <a class="code" href="s390-tdep_8c.html#ab8776695f07642f8be597722b774ccfd">is_rre</a> (insn64, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea08d73af51b3dc463d9f4db836fd3d064">op_sgr</a>, &amp;r1, &amp;r2))
<a name="l01460"></a>01460         data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r1] = <a class="code" href="prologue-value_8c.html#a00a4a7681b4fd1a74d5e6f32bab6b973">pv_subtract</a> (data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r1], data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r2]);
<a name="l01461"></a>01461 
<a name="l01462"></a>01462       <span class="comment">/* S r1, d2(x2, b2) -- subtract.  */</span>
<a name="l01463"></a>01463       <span class="comment">/* SY r1, d2(x2, b2) -- subtract (long-displacement version).  */</span>
<a name="l01464"></a>01464       <span class="comment">/* SG r1, d2(x2, b2) -- subtract (64-bit version).  */</span>
<a name="l01465"></a>01465       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a200ec40a2cb23e74fc2b585a6e4e4381">is_rx</a> (insn32, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeab325f0632f832b9588aecaf775269f78">op_s</a>, &amp;r1, &amp;d2, &amp;x2, &amp;b2)
<a name="l01466"></a>01466                || <a class="code" href="s390-tdep_8c.html#a5f73cf256258cd13fca13ec2023a1a6c">is_rxy</a> (insn32, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea9fe47b803f16b68fe1d7e0828fcf9f5a">op1_sy</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaea9d235caa5480f3b8c504c4d01c3b3e">op2_sy</a>, &amp;r1, &amp;d2, &amp;x2, &amp;b2)
<a name="l01467"></a>01467                || <a class="code" href="s390-tdep_8c.html#a5f73cf256258cd13fca13ec2023a1a6c">is_rxy</a> (insn64, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2b2e5c482c6cc0e0c06ec88e5241b4b9">op1_sg</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeab0edd1c0635ab8cb991645544e125f60">op2_sg</a>, &amp;r1, &amp;d2, &amp;x2, &amp;b2))
<a name="l01468"></a>01468         data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r1] = <a class="code" href="prologue-value_8c.html#a00a4a7681b4fd1a74d5e6f32bab6b973">pv_subtract</a> (data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r1],
<a name="l01469"></a>01469                                 <a class="code" href="s390-tdep_8c.html#aa0837c43a079e46852be8e4cfac58bbb">s390_load</a> (data, d2, x2, b2, data-&gt;<a class="code" href="structs390__prologue__data.html#a030abe1b40144216f65571927a6d81bb">gpr_size</a>));
<a name="l01470"></a>01470 
<a name="l01471"></a>01471       <span class="comment">/* LA r1, d2(x2, b2) --- load address.  */</span>
<a name="l01472"></a>01472       <span class="comment">/* LAY r1, d2(x2, b2) --- load address (long-displacement version).  */</span>
<a name="l01473"></a>01473       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a200ec40a2cb23e74fc2b585a6e4e4381">is_rx</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2b980f229c805709cfa3534deb7cf235">op_la</a>, &amp;r1, &amp;d2, &amp;x2, &amp;b2)
<a name="l01474"></a>01474                || <a class="code" href="s390-tdep_8c.html#a5f73cf256258cd13fca13ec2023a1a6c">is_rxy</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea0ac95da03a6ccc495a529395391e35af">op1_lay</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeac2fc7ec7f6efd51e06d7947000a9ba14">op2_lay</a>, &amp;r1, &amp;d2, &amp;x2, &amp;b2))
<a name="l01475"></a>01475         data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r1] = <a class="code" href="s390-tdep_8c.html#a89ce76b71005790dad872bea81dbc116">s390_addr</a> (data, d2, x2, b2);
<a name="l01476"></a>01476 
<a name="l01477"></a>01477       <span class="comment">/* LARL r1, i2 --- load address relative long.  */</span>
<a name="l01478"></a>01478       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a76c82ff57e5109d64450d9f79c953be1">is_ril</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea65ce3fe937ce256957147808d30d8abe">op1_larl</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2ff0edbff0ab21601efcb6c2995e53d8">op2_larl</a>, &amp;r1, &amp;i2))
<a name="l01479"></a>01479         data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r1] = <a class="code" href="prologue-value_8c.html#a1d35dc4423d652ac8f7cbdfb94df117b">pv_constant</a> (pc + i2 * 2);
<a name="l01480"></a>01480 
<a name="l01481"></a>01481       <span class="comment">/* BASR r1, 0 --- branch and save.</span>
<a name="l01482"></a>01482 <span class="comment">         Since r2 is zero, this saves the PC in r1, but doesn&#39;t branch.  */</span>
<a name="l01483"></a>01483       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a320f6b6218c97a66d6ab010fd089b98c">is_rr</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea9f7d1f8a7d074f602ca353c6014e4add">op_basr</a>, &amp;r1, &amp;r2)
<a name="l01484"></a>01484                &amp;&amp; r2 == 0)
<a name="l01485"></a>01485         data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r1] = <a class="code" href="prologue-value_8c.html#a1d35dc4423d652ac8f7cbdfb94df117b">pv_constant</a> (next_pc);
<a name="l01486"></a>01486 
<a name="l01487"></a>01487       <span class="comment">/* BRAS r1, i2 --- branch relative and save.  */</span>
<a name="l01488"></a>01488       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#aba2d5253005bb90c5fa62dae8c835547">is_ri</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2d988a33df86ecd50be63a53418f158c">op1_bras</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea9ada736dfab48ee544854cef6d763dec">op2_bras</a>, &amp;r1, &amp;i2))
<a name="l01489"></a>01489         {
<a name="l01490"></a>01490           data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[r1] = <a class="code" href="prologue-value_8c.html#a1d35dc4423d652ac8f7cbdfb94df117b">pv_constant</a> (next_pc);
<a name="l01491"></a>01491           next_pc = pc + i2 * 2;
<a name="l01492"></a>01492 
<a name="l01493"></a>01493           <span class="comment">/* We&#39;d better not interpret any backward branches.  We&#39;ll</span>
<a name="l01494"></a>01494 <span class="comment">             never terminate.  */</span>
<a name="l01495"></a>01495           <span class="keywordflow">if</span> (next_pc &lt;= pc)
<a name="l01496"></a>01496             <span class="keywordflow">break</span>;
<a name="l01497"></a>01497         }
<a name="l01498"></a>01498 
<a name="l01499"></a>01499       <span class="comment">/* Terminate search when hitting any other branch instruction.  */</span>
<a name="l01500"></a>01500       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a320f6b6218c97a66d6ab010fd089b98c">is_rr</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea9f7d1f8a7d074f602ca353c6014e4add">op_basr</a>, &amp;r1, &amp;r2)
<a name="l01501"></a>01501                || <a class="code" href="s390-tdep_8c.html#a200ec40a2cb23e74fc2b585a6e4e4381">is_rx</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea79faf14e2dc5e8d3bdd55b8706b7362d">op_bas</a>, &amp;r1, &amp;d2, &amp;x2, &amp;b2)
<a name="l01502"></a>01502                || <a class="code" href="s390-tdep_8c.html#a320f6b6218c97a66d6ab010fd089b98c">is_rr</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea6e127724fb63a7c168868c351b00752c">op_bcr</a>, &amp;r1, &amp;r2)
<a name="l01503"></a>01503                || <a class="code" href="s390-tdep_8c.html#a200ec40a2cb23e74fc2b585a6e4e4381">is_rx</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aead7c5d3898f9080734f02b736ef8111fa">op_bc</a>, &amp;r1, &amp;d2, &amp;x2, &amp;b2)
<a name="l01504"></a>01504                || <a class="code" href="s390-tdep_8c.html#aba2d5253005bb90c5fa62dae8c835547">is_ri</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea361192ea2cb8b050a62458ba8e3390bd">op1_brc</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaa5772dfb52a587f16d76590bf8dc86e8">op2_brc</a>, &amp;r1, &amp;i2)
<a name="l01505"></a>01505                || <a class="code" href="s390-tdep_8c.html#a76c82ff57e5109d64450d9f79c953be1">is_ril</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaa57097b1977f2c29fd370bc84e4171eb">op1_brcl</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea1af515979fce6a474c1a0e171a9584ed">op2_brcl</a>, &amp;r1, &amp;i2)
<a name="l01506"></a>01506                || <a class="code" href="s390-tdep_8c.html#a76c82ff57e5109d64450d9f79c953be1">is_ril</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea51c371d4f4c9e24495cf30c9a9561f96">op1_brasl</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaaee47846c827d10b90aeca86615c02ce">op2_brasl</a>, &amp;r2, &amp;i2))
<a name="l01507"></a>01507         <span class="keywordflow">break</span>;
<a name="l01508"></a>01508 
<a name="l01509"></a>01509       <span class="keywordflow">else</span>
<a name="l01510"></a>01510         {
<a name="l01511"></a>01511           <span class="comment">/* An instruction we don&#39;t know how to simulate.  The only</span>
<a name="l01512"></a>01512 <span class="comment">             safe thing to do would be to set every value we&#39;re tracking</span>
<a name="l01513"></a>01513 <span class="comment">             to &#39;unknown&#39;.  Instead, we&#39;ll be optimistic: we assume that</span>
<a name="l01514"></a>01514 <span class="comment">             we *can* interpret every instruction that the compiler uses</span>
<a name="l01515"></a>01515 <span class="comment">             to manipulate any of the data we&#39;re interested in here --</span>
<a name="l01516"></a>01516 <span class="comment">             then we can just ignore anything else.  */</span>
<a name="l01517"></a>01517         }
<a name="l01518"></a>01518 
<a name="l01519"></a>01519       <span class="comment">/* Record the address after the last instruction that changed</span>
<a name="l01520"></a>01520 <span class="comment">         the FP, SP, or backlink.  Ignore instructions that changed</span>
<a name="l01521"></a>01521 <span class="comment">         them back to their original values --- those are probably</span>
<a name="l01522"></a>01522 <span class="comment">         restore instructions.  (The back chain is never restored,</span>
<a name="l01523"></a>01523 <span class="comment">         just popped.)  */</span>
<a name="l01524"></a>01524       {
<a name="l01525"></a>01525         <a class="code" href="structprologue__value.html">pv_t</a> <a class="code" href="windows-nat_8c.html#a8d40798874dab99986478ef00ff3e297">sp</a> = data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[<a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a> - <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a>];
<a name="l01526"></a>01526         <a class="code" href="structprologue__value.html">pv_t</a> fp = data-&gt;<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[<a class="code" href="s390-tdep_8h.html#a31af3bccb0bda6d6396851551c3b71f5">S390_FRAME_REGNUM</a> - <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a>];
<a name="l01527"></a>01527         
<a name="l01528"></a>01528         <span class="keywordflow">if</span> ((! <a class="code" href="prologue-value_8c.html#a3c9e13a6dc53cd468eb98e73968f52c9">pv_is_identical</a> (pre_insn_sp, sp)
<a name="l01529"></a>01529              &amp;&amp; ! <a class="code" href="prologue-value_8c.html#a2a8f42226ec88b80bd295476a6648df6">pv_is_register_k</a> (sp, <a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a>, 0)
<a name="l01530"></a>01530              &amp;&amp; sp.<a class="code" href="structprologue__value.html#a6b52b744f67b02d26add61c3e6bf4e7f">kind</a> != pvk_unknown)
<a name="l01531"></a>01531             || (! <a class="code" href="prologue-value_8c.html#a3c9e13a6dc53cd468eb98e73968f52c9">pv_is_identical</a> (pre_insn_fp, fp)
<a name="l01532"></a>01532                 &amp;&amp; ! <a class="code" href="prologue-value_8c.html#a2a8f42226ec88b80bd295476a6648df6">pv_is_register_k</a> (fp, <a class="code" href="s390-tdep_8h.html#a31af3bccb0bda6d6396851551c3b71f5">S390_FRAME_REGNUM</a>, 0)
<a name="l01533"></a>01533                 &amp;&amp; fp.<a class="code" href="structprologue__value.html#a6b52b744f67b02d26add61c3e6bf4e7f">kind</a> != pvk_unknown)
<a name="l01534"></a>01534             || pre_insn_back_chain_saved_p != data-&gt;<a class="code" href="structs390__prologue__data.html#ab1659de04669163518908a76cab4366d">back_chain_saved_p</a>)
<a name="l01535"></a>01535           result = next_pc;
<a name="l01536"></a>01536       }
<a name="l01537"></a>01537     }
<a name="l01538"></a>01538 
<a name="l01539"></a>01539   <span class="comment">/* Record where all the registers were saved.  */</span>
<a name="l01540"></a>01540   <a class="code" href="prologue-value_8c.html#a4401a7a0b5fb6495e7db332f34e89db4">pv_area_scan</a> (data-&gt;<a class="code" href="structs390__prologue__data.html#a93b2fbab8250e816de5b6165d431453c">stack</a>, <a class="code" href="s390-tdep_8c.html#a9c7766b26bef5ef88bf14af2fe97ee42">s390_check_for_saved</a>, data);
<a name="l01541"></a>01541 
<a name="l01542"></a>01542   <a class="code" href="prologue-value_8c.html#af64b24209426a8a0714a52f0bc03dd9d">free_pv_area</a> (data-&gt;<a class="code" href="structs390__prologue__data.html#a93b2fbab8250e816de5b6165d431453c">stack</a>);
<a name="l01543"></a>01543   data-&gt;<a class="code" href="structs390__prologue__data.html#a93b2fbab8250e816de5b6165d431453c">stack</a> = NULL;
<a name="l01544"></a>01544 
<a name="l01545"></a>01545   <span class="keywordflow">return</span> result;
<a name="l01546"></a>01546 }
<a name="l01547"></a>01547 
<a name="l01548"></a>01548 <span class="comment">/* Advance PC across any function entry prologue instructions to reach </span>
<a name="l01549"></a>01549 <span class="comment">   some &quot;real&quot; code.  */</span>
<a name="l01550"></a>01550 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l01551"></a><a class="code" href="s390-tdep_8c.html#ab1be58734527952a9b9cab40f1dc5db5">01551</a> <a class="code" href="s390-tdep_8c.html#ab1be58734527952a9b9cab40f1dc5db5">s390_skip_prologue</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc)
<a name="l01552"></a>01552 {
<a name="l01553"></a>01553   <span class="keyword">struct </span><a class="code" href="structs390__prologue__data.html">s390_prologue_data</a> data;
<a name="l01554"></a>01554   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> skip_pc;
<a name="l01555"></a>01555   skip_pc = <a class="code" href="s390-tdep_8c.html#a73a2a877b2e6d59d4fb13d77af183eb3">s390_analyze_prologue</a> (gdbarch, pc, (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>)-1, &amp;data);
<a name="l01556"></a>01556   <span class="keywordflow">return</span> skip_pc ? skip_pc : pc;
<a name="l01557"></a>01557 }
<a name="l01558"></a>01558 
<a name="l01559"></a>01559 <span class="comment">/* Return true if we are in the functin&#39;s epilogue, i.e. after the</span>
<a name="l01560"></a>01560 <span class="comment">   instruction that destroyed the function&#39;s stack frame.  */</span>
<a name="l01561"></a>01561 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01562"></a><a class="code" href="s390-tdep_8c.html#a5b6967cea54d26e5d33a862df5d12cb9">01562</a> <a class="code" href="s390-tdep_8c.html#a5b6967cea54d26e5d33a862df5d12cb9">s390_in_function_epilogue_p</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc)
<a name="l01563"></a>01563 {
<a name="l01564"></a>01564   <span class="keywordtype">int</span> word_size = <a class="code" href="gdbarch_8c.html#ae356193e481873e4377ff922d984f13f">gdbarch_ptr_bit</a> (gdbarch) / 8;
<a name="l01565"></a>01565 
<a name="l01566"></a>01566   <span class="comment">/* In frameless functions, there&#39;s not frame to destroy and thus</span>
<a name="l01567"></a>01567 <span class="comment">     we don&#39;t care about the epilogue.</span>
<a name="l01568"></a>01568 <span class="comment"></span>
<a name="l01569"></a>01569 <span class="comment">     In functions with frame, the epilogue sequence is a pair of</span>
<a name="l01570"></a>01570 <span class="comment">     a LM-type instruction that restores (amongst others) the</span>
<a name="l01571"></a>01571 <span class="comment">     return register %r14 and the stack pointer %r15, followed</span>
<a name="l01572"></a>01572 <span class="comment">     by a branch &#39;br %r14&#39; --or equivalent-- that effects the</span>
<a name="l01573"></a>01573 <span class="comment">     actual return.</span>
<a name="l01574"></a>01574 <span class="comment"></span>
<a name="l01575"></a>01575 <span class="comment">     In that situation, this function needs to return &#39;true&#39; in</span>
<a name="l01576"></a>01576 <span class="comment">     exactly one case: when pc points to that branch instruction.</span>
<a name="l01577"></a>01577 <span class="comment"></span>
<a name="l01578"></a>01578 <span class="comment">     Thus we try to disassemble the one instructions immediately</span>
<a name="l01579"></a>01579 <span class="comment">     preceding pc and check whether it is an LM-type instruction</span>
<a name="l01580"></a>01580 <span class="comment">     modifying the stack pointer.</span>
<a name="l01581"></a>01581 <span class="comment"></span>
<a name="l01582"></a>01582 <span class="comment">     Note that disassembling backwards is not reliable, so there</span>
<a name="l01583"></a>01583 <span class="comment">     is a slight chance of false positives here ...  */</span>
<a name="l01584"></a>01584 
<a name="l01585"></a>01585   bfd_byte insn[6];
<a name="l01586"></a>01586   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> r1, r3, b2;
<a name="l01587"></a>01587   <span class="keywordtype">int</span> d2;
<a name="l01588"></a>01588 
<a name="l01589"></a>01589   <span class="keywordflow">if</span> (word_size == 4
<a name="l01590"></a>01590       &amp;&amp; !<a class="code" href="target_8c.html#ac579515fbccfb9e6b1a45766a71c1d4f">target_read_memory</a> (pc - 4, insn, 4)
<a name="l01591"></a>01591       &amp;&amp; <a class="code" href="s390-tdep_8c.html#af7321f2a99ba7d507baff44be3d1a880">is_rs</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea5bf9b9da73b6f0b2dd620937f854ced0">op_lm</a>, &amp;r1, &amp;r3, &amp;d2, &amp;b2)
<a name="l01592"></a>01592       &amp;&amp; r3 == <a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a> - <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a>)
<a name="l01593"></a>01593     <span class="keywordflow">return</span> 1;
<a name="l01594"></a>01594 
<a name="l01595"></a>01595   <span class="keywordflow">if</span> (word_size == 4
<a name="l01596"></a>01596       &amp;&amp; !<a class="code" href="target_8c.html#ac579515fbccfb9e6b1a45766a71c1d4f">target_read_memory</a> (pc - 6, insn, 6)
<a name="l01597"></a>01597       &amp;&amp; <a class="code" href="s390-tdep_8c.html#a23b3660804fd1ee3a827c18db2800961">is_rsy</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea8f8781dd5dcf5ef08998fb2059c76787">op1_lmy</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea47892d853dbed6716e9341adea701ca7">op2_lmy</a>, &amp;r1, &amp;r3, &amp;d2, &amp;b2)
<a name="l01598"></a>01598       &amp;&amp; r3 == <a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a> - <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a>)
<a name="l01599"></a>01599     <span class="keywordflow">return</span> 1;
<a name="l01600"></a>01600 
<a name="l01601"></a>01601   <span class="keywordflow">if</span> (word_size == 8
<a name="l01602"></a>01602       &amp;&amp; !<a class="code" href="target_8c.html#ac579515fbccfb9e6b1a45766a71c1d4f">target_read_memory</a> (pc - 6, insn, 6)
<a name="l01603"></a>01603       &amp;&amp; <a class="code" href="s390-tdep_8c.html#a23b3660804fd1ee3a827c18db2800961">is_rsy</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea430763130a9f1c439b3981bbd9ef273a">op1_lmg</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea0ff4497e79d8a6bbce42fe62e96149bb">op2_lmg</a>, &amp;r1, &amp;r3, &amp;d2, &amp;b2)
<a name="l01604"></a>01604       &amp;&amp; r3 == <a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a> - <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a>)
<a name="l01605"></a>01605     <span class="keywordflow">return</span> 1;
<a name="l01606"></a>01606 
<a name="l01607"></a>01607   <span class="keywordflow">return</span> 0;
<a name="l01608"></a>01608 }
<a name="l01609"></a>01609 
<a name="l01610"></a>01610 <span class="comment">/* Displaced stepping.  */</span>
<a name="l01611"></a>01611 
<a name="l01612"></a>01612 <span class="comment">/* Fix up the state of registers and memory after having single-stepped</span>
<a name="l01613"></a>01613 <span class="comment">   a displaced instruction.  */</span>
<a name="l01614"></a>01614 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l01615"></a><a class="code" href="s390-tdep_8c.html#a2a27e5c9702568cf5a228a22583df1fd">01615</a> <a class="code" href="s390-tdep_8c.html#a2a27e5c9702568cf5a228a22583df1fd">s390_displaced_step_fixup</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>,
<a name="l01616"></a>01616                            <span class="keyword">struct</span> <a class="code" href="structdisplaced__step__closure.html">displaced_step_closure</a> *closure,
<a name="l01617"></a>01617                            <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="varobj_8h.html#a43396decd62b46fa01cc6c66a84cbba1">from</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="varobj_8h.html#ae2a2635825813434f3201bf8ace439d2">to</a>,
<a name="l01618"></a>01618                            <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *regs)
<a name="l01619"></a>01619 {
<a name="l01620"></a>01620   <span class="comment">/* Since we use simple_displaced_step_copy_insn, our closure is a</span>
<a name="l01621"></a>01621 <span class="comment">     copy of the instruction.  */</span>
<a name="l01622"></a>01622   <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *insn = (<a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *) closure;
<a name="l01623"></a>01623   <span class="keyword">static</span> <span class="keywordtype">int</span> s390_instrlen[] = { 2, 4, 4, 6 };
<a name="l01624"></a>01624   <span class="keywordtype">int</span> insnlen = s390_instrlen[insn[0] &gt;&gt; 6];
<a name="l01625"></a>01625 
<a name="l01626"></a>01626   <span class="comment">/* Fields for various kinds of instructions.  */</span>
<a name="l01627"></a>01627   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> b2, r1, r2, x2, r3;
<a name="l01628"></a>01628   <span class="keywordtype">int</span> i2, d2;
<a name="l01629"></a>01629 
<a name="l01630"></a>01630   <span class="comment">/* Get current PC and addressing mode bit.  */</span>
<a name="l01631"></a>01631   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc = <a class="code" href="regcache_8c.html#a01b72bb2ee2d14e0097af17241cee731">regcache_read_pc</a> (regs);
<a name="l01632"></a>01632   <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> amode = 0;
<a name="l01633"></a>01633 
<a name="l01634"></a>01634   <span class="keywordflow">if</span> (<a class="code" href="regcache_8c.html#a4c51fa25edb9ce25451b9dc7bd127aac">register_size</a> (gdbarch, <a class="code" href="s390-tdep_8h.html#a0ce4efe91c3fcbfe21e8a67f77057258">S390_PSWA_REGNUM</a>) == 4)
<a name="l01635"></a>01635     {
<a name="l01636"></a>01636       <a class="code" href="regcache_8c.html#a959a077d769de1641d4f9754cc7b4a1f">regcache_cooked_read_unsigned</a> (regs, <a class="code" href="s390-tdep_8h.html#a0ce4efe91c3fcbfe21e8a67f77057258">S390_PSWA_REGNUM</a>, &amp;amode);
<a name="l01637"></a>01637       amode &amp;= 0x80000000;
<a name="l01638"></a>01638     }
<a name="l01639"></a>01639 
<a name="l01640"></a>01640   <span class="keywordflow">if</span> (<a class="code" href="inferior_8h.html#aab9732a6e65fa8c725ca7bca0ed3c9fd">debug_displaced</a>)
<a name="l01641"></a>01641     <a class="code" href="utils_8c.html#aa624d49eae7e3e3ee9124fde6c631392">fprintf_unfiltered</a> (<a class="code" href="main_8c.html#a097b10b28c07237b554c73fbf42a8e9e">gdb_stdlog</a>,
<a name="l01642"></a>01642                         <span class="stringliteral">&quot;displaced: (s390) fixup (%s, %s) pc %s len %d amode 0x%x\n&quot;</span>,
<a name="l01643"></a>01643                         <a class="code" href="utils_8c.html#ab5c76d72090f01d3848b63dda4e37d1c">paddress</a> (gdbarch, from), <a class="code" href="utils_8c.html#ab5c76d72090f01d3848b63dda4e37d1c">paddress</a> (gdbarch, to),
<a name="l01644"></a>01644                         <a class="code" href="utils_8c.html#ab5c76d72090f01d3848b63dda4e37d1c">paddress</a> (gdbarch, pc), insnlen, (<span class="keywordtype">int</span>) amode);
<a name="l01645"></a>01645 
<a name="l01646"></a>01646   <span class="comment">/* Handle absolute branch and save instructions.  */</span>
<a name="l01647"></a>01647   <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a320f6b6218c97a66d6ab010fd089b98c">is_rr</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea9f7d1f8a7d074f602ca353c6014e4add">op_basr</a>, &amp;r1, &amp;r2)
<a name="l01648"></a>01648       || <a class="code" href="s390-tdep_8c.html#a200ec40a2cb23e74fc2b585a6e4e4381">is_rx</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea79faf14e2dc5e8d3bdd55b8706b7362d">op_bas</a>, &amp;r1, &amp;d2, &amp;x2, &amp;b2))
<a name="l01649"></a>01649     {
<a name="l01650"></a>01650       <span class="comment">/* Recompute saved return address in R1.  */</span>
<a name="l01651"></a>01651       <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regs, <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a> + r1,
<a name="l01652"></a>01652                                       amode | (from + insnlen));
<a name="l01653"></a>01653     }
<a name="l01654"></a>01654 
<a name="l01655"></a>01655   <span class="comment">/* Handle absolute branch instructions.  */</span>
<a name="l01656"></a>01656   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a320f6b6218c97a66d6ab010fd089b98c">is_rr</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea6e127724fb63a7c168868c351b00752c">op_bcr</a>, &amp;r1, &amp;r2)
<a name="l01657"></a>01657            || <a class="code" href="s390-tdep_8c.html#a200ec40a2cb23e74fc2b585a6e4e4381">is_rx</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aead7c5d3898f9080734f02b736ef8111fa">op_bc</a>, &amp;r1, &amp;d2, &amp;x2, &amp;b2)
<a name="l01658"></a>01658            || <a class="code" href="s390-tdep_8c.html#a320f6b6218c97a66d6ab010fd089b98c">is_rr</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaefbf2fb4d7de3732a04458b81de62055">op_bctr</a>, &amp;r1, &amp;r2)
<a name="l01659"></a>01659            || <a class="code" href="s390-tdep_8c.html#ab8776695f07642f8be597722b774ccfd">is_rre</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea973122307a161e04dcfcfda957c5d4cc">op_bctgr</a>, &amp;r1, &amp;r2)
<a name="l01660"></a>01660            || <a class="code" href="s390-tdep_8c.html#a200ec40a2cb23e74fc2b585a6e4e4381">is_rx</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaf1daf7802db3b5effc0cd7513fdc46cf">op_bct</a>, &amp;r1, &amp;d2, &amp;x2, &amp;b2)
<a name="l01661"></a>01661            || <a class="code" href="s390-tdep_8c.html#a5f73cf256258cd13fca13ec2023a1a6c">is_rxy</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea19347bb71e192e7613fecff35a933fde">op1_bctg</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeae90900f4b338328a228748cfe989f267">op2_brctg</a>, &amp;r1, &amp;d2, &amp;x2, &amp;b2)
<a name="l01662"></a>01662            || <a class="code" href="s390-tdep_8c.html#af7321f2a99ba7d507baff44be3d1a880">is_rs</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea71d152acb4d8b5dbe15609b4bc7a0ab7">op_bxh</a>, &amp;r1, &amp;r3, &amp;d2, &amp;b2)
<a name="l01663"></a>01663            || <a class="code" href="s390-tdep_8c.html#a23b3660804fd1ee3a827c18db2800961">is_rsy</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea28b34263429a6c6f022e35f4a2318d58">op1_bxhg</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaf4f75c521924f8feaea247cfc39c7ed9">op2_bxhg</a>, &amp;r1, &amp;r3, &amp;d2, &amp;b2)
<a name="l01664"></a>01664            || <a class="code" href="s390-tdep_8c.html#af7321f2a99ba7d507baff44be3d1a880">is_rs</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeab5147b612e013966ba6f0ccfe1abb40f">op_bxle</a>, &amp;r1, &amp;r3, &amp;d2, &amp;b2)
<a name="l01665"></a>01665            || <a class="code" href="s390-tdep_8c.html#a23b3660804fd1ee3a827c18db2800961">is_rsy</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea9f55c52c50b1108395fed88a840ccbae">op1_bxleg</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea40e05e7259fd80f0be18416618f898c7">op2_bxleg</a>, &amp;r1, &amp;r3, &amp;d2, &amp;b2))
<a name="l01666"></a>01666     {
<a name="l01667"></a>01667       <span class="comment">/* Update PC iff branch was *not* taken.  */</span>
<a name="l01668"></a>01668       <span class="keywordflow">if</span> (pc == to + insnlen)
<a name="l01669"></a>01669         <a class="code" href="regcache_8c.html#ab2bc5dc8948a1ae0b5efb4e2503375b8">regcache_write_pc</a> (regs, from + insnlen);
<a name="l01670"></a>01670     }
<a name="l01671"></a>01671 
<a name="l01672"></a>01672   <span class="comment">/* Handle PC-relative branch and save instructions.  */</span>
<a name="l01673"></a>01673   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#aba2d5253005bb90c5fa62dae8c835547">is_ri</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2d988a33df86ecd50be63a53418f158c">op1_bras</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea9ada736dfab48ee544854cef6d763dec">op2_bras</a>, &amp;r1, &amp;i2)
<a name="l01674"></a>01674            || <a class="code" href="s390-tdep_8c.html#a76c82ff57e5109d64450d9f79c953be1">is_ril</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea51c371d4f4c9e24495cf30c9a9561f96">op1_brasl</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaaee47846c827d10b90aeca86615c02ce">op2_brasl</a>, &amp;r1, &amp;i2))
<a name="l01675"></a>01675     {
<a name="l01676"></a>01676       <span class="comment">/* Update PC.  */</span>
<a name="l01677"></a>01677       <a class="code" href="regcache_8c.html#ab2bc5dc8948a1ae0b5efb4e2503375b8">regcache_write_pc</a> (regs, pc - to + from);
<a name="l01678"></a>01678       <span class="comment">/* Recompute saved return address in R1.  */</span>
<a name="l01679"></a>01679       <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regs, <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a> + r1,
<a name="l01680"></a>01680                                       amode | (from + insnlen));
<a name="l01681"></a>01681     }
<a name="l01682"></a>01682 
<a name="l01683"></a>01683   <span class="comment">/* Handle PC-relative branch instructions.  */</span>
<a name="l01684"></a>01684   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#aba2d5253005bb90c5fa62dae8c835547">is_ri</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea361192ea2cb8b050a62458ba8e3390bd">op1_brc</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaa5772dfb52a587f16d76590bf8dc86e8">op2_brc</a>, &amp;r1, &amp;i2)
<a name="l01685"></a>01685            || <a class="code" href="s390-tdep_8c.html#a76c82ff57e5109d64450d9f79c953be1">is_ril</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeaa57097b1977f2c29fd370bc84e4171eb">op1_brcl</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea1af515979fce6a474c1a0e171a9584ed">op2_brcl</a>, &amp;r1, &amp;i2)
<a name="l01686"></a>01686            || <a class="code" href="s390-tdep_8c.html#aba2d5253005bb90c5fa62dae8c835547">is_ri</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeac8a8c1d671635ad12fc306a8b487d151">op1_brct</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea98ad06bdcb9e39a6958f02ea01d4629f">op2_brct</a>, &amp;r1, &amp;i2)
<a name="l01687"></a>01687            || <a class="code" href="s390-tdep_8c.html#aba2d5253005bb90c5fa62dae8c835547">is_ri</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea80d85786ab85f1fd54a44a24f6529a54">op1_brctg</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeae90900f4b338328a228748cfe989f267">op2_brctg</a>, &amp;r1, &amp;i2)
<a name="l01688"></a>01688            || <a class="code" href="s390-tdep_8c.html#a2c24dc4e229203b6e5fdd71cad7a5752">is_rsi</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea23d6f52a7aabac93a3d88d612aa4e166">op_brxh</a>, &amp;r1, &amp;r3, &amp;i2)
<a name="l01689"></a>01689            || <a class="code" href="s390-tdep_8c.html#aa9e45d2687f012ae916a0fc844034db6">is_rie</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea27c3304edda4fcc74d924c00dc84705c">op1_brxhg</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea4985362f5d5a812ea4586c194b736180">op2_brxhg</a>, &amp;r1, &amp;r3, &amp;i2)
<a name="l01690"></a>01690            || <a class="code" href="s390-tdep_8c.html#a2c24dc4e229203b6e5fdd71cad7a5752">is_rsi</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea643d0b29c04aa5d5b2fb28975cdf9f5e">op_brxle</a>, &amp;r1, &amp;r3, &amp;i2)
<a name="l01691"></a>01691            || <a class="code" href="s390-tdep_8c.html#aa9e45d2687f012ae916a0fc844034db6">is_rie</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aeafefbd8e19ebf006e284c94ed3a3731c2">op1_brxlg</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea4a0c9f21c98fbfe12ad75a4676d20a15">op2_brxlg</a>, &amp;r1, &amp;r3, &amp;i2))
<a name="l01692"></a>01692     {
<a name="l01693"></a>01693       <span class="comment">/* Update PC.  */</span>
<a name="l01694"></a>01694       <a class="code" href="regcache_8c.html#ab2bc5dc8948a1ae0b5efb4e2503375b8">regcache_write_pc</a> (regs, pc - to + from);
<a name="l01695"></a>01695     }
<a name="l01696"></a>01696 
<a name="l01697"></a>01697   <span class="comment">/* Handle LOAD ADDRESS RELATIVE LONG.  */</span>
<a name="l01698"></a>01698   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a76c82ff57e5109d64450d9f79c953be1">is_ril</a> (insn, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea65ce3fe937ce256957147808d30d8abe">op1_larl</a>, <a class="code" href="s390-tdep_8c.html#ae62fccd8cea8f216b24ba625d404c4aea2ff0edbff0ab21601efcb6c2995e53d8">op2_larl</a>, &amp;r1, &amp;i2))
<a name="l01699"></a>01699     {
<a name="l01700"></a>01700       <span class="comment">/* Update PC.  */</span>
<a name="l01701"></a>01701       <a class="code" href="regcache_8c.html#ab2bc5dc8948a1ae0b5efb4e2503375b8">regcache_write_pc</a> (regs, from + insnlen);
<a name="l01702"></a>01702       <span class="comment">/* Recompute output address in R1.  */</span> 
<a name="l01703"></a>01703       <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regs, <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a> + r1,
<a name="l01704"></a>01704                                       amode | (from + i2 * 2));
<a name="l01705"></a>01705     }
<a name="l01706"></a>01706 
<a name="l01707"></a>01707   <span class="comment">/* If we executed a breakpoint instruction, point PC right back at it.  */</span>
<a name="l01708"></a>01708   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (insn[0] == 0x0 &amp;&amp; insn[1] == 0x1)
<a name="l01709"></a>01709     <a class="code" href="regcache_8c.html#ab2bc5dc8948a1ae0b5efb4e2503375b8">regcache_write_pc</a> (regs, from);
<a name="l01710"></a>01710 
<a name="l01711"></a>01711   <span class="comment">/* For any other insn, PC points right after the original instruction.  */</span>
<a name="l01712"></a>01712   <span class="keywordflow">else</span>
<a name="l01713"></a>01713     <a class="code" href="regcache_8c.html#ab2bc5dc8948a1ae0b5efb4e2503375b8">regcache_write_pc</a> (regs, from + insnlen);
<a name="l01714"></a>01714 
<a name="l01715"></a>01715   <span class="keywordflow">if</span> (<a class="code" href="inferior_8h.html#aab9732a6e65fa8c725ca7bca0ed3c9fd">debug_displaced</a>)
<a name="l01716"></a>01716     <a class="code" href="utils_8c.html#aa624d49eae7e3e3ee9124fde6c631392">fprintf_unfiltered</a> (<a class="code" href="main_8c.html#a097b10b28c07237b554c73fbf42a8e9e">gdb_stdlog</a>,
<a name="l01717"></a>01717                         <span class="stringliteral">&quot;displaced: (s390) pc is now %s\n&quot;</span>,
<a name="l01718"></a>01718                         <a class="code" href="utils_8c.html#ab5c76d72090f01d3848b63dda4e37d1c">paddress</a> (gdbarch, <a class="code" href="regcache_8c.html#a01b72bb2ee2d14e0097af17241cee731">regcache_read_pc</a> (regs)));
<a name="l01719"></a>01719 }
<a name="l01720"></a>01720 
<a name="l01721"></a>01721 
<a name="l01722"></a>01722 <span class="comment">/* Helper routine to unwind pseudo registers.  */</span>
<a name="l01723"></a>01723 
<a name="l01724"></a>01724 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structvalue.html">value</a> *
<a name="l01725"></a><a class="code" href="s390-tdep_8c.html#a0b43770de70fb30567a3dfb5b597ee74">01725</a> <a class="code" href="s390-tdep_8c.html#a0b43770de70fb30567a3dfb5b597ee74">s390_unwind_pseudo_register</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>)
<a name="l01726"></a>01726 {
<a name="l01727"></a>01727   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (this_frame);
<a name="l01728"></a>01728   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l01729"></a>01729   <span class="keyword">struct </span><a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a> = <a class="code" href="regcache_8c.html#a90aec5037b097c4b81dbe63b54f95e96">register_type</a> (gdbarch, regnum);
<a name="l01730"></a>01730 
<a name="l01731"></a>01731   <span class="comment">/* Unwind PC via PSW address.  */</span>
<a name="l01732"></a>01732   <span class="keywordflow">if</span> (regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aaf14dc59eceddbc9a4512ae0ca551cb4">pc_regnum</a>)
<a name="l01733"></a>01733     {
<a name="l01734"></a>01734       <span class="keyword">struct </span><a class="code" href="structvalue.html">value</a> *val;
<a name="l01735"></a>01735 
<a name="l01736"></a>01736       val = <a class="code" href="frame_8c.html#afa792172cf11a59304ad444a2ef9bd2d">frame_unwind_register_value</a> (this_frame, <a class="code" href="s390-tdep_8h.html#a0ce4efe91c3fcbfe21e8a67f77057258">S390_PSWA_REGNUM</a>);
<a name="l01737"></a>01737       <span class="keywordflow">if</span> (!<a class="code" href="value_8c.html#ac29d8a824744789e9d8302db669dd49f">value_optimized_out</a> (val))
<a name="l01738"></a>01738         {
<a name="l01739"></a>01739           <a class="code" href="defs_8h.html#ac7647a3f71533007c9e128f3ddda1987">LONGEST</a> pswa = <a class="code" href="value_8c.html#aa95e2692a6e5338edb5db75909064bc1">value_as_long</a> (val);
<a name="l01740"></a>01740 
<a name="l01741"></a>01741           <span class="keywordflow">if</span> (<a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type) == 4)
<a name="l01742"></a>01742             <span class="keywordflow">return</span> <a class="code" href="value_8c.html#a2f2d0d3d3ce482fc844f1fc4dc4c038e">value_from_pointer</a> (type, pswa &amp; 0x7fffffff);
<a name="l01743"></a>01743           <span class="keywordflow">else</span>
<a name="l01744"></a>01744             <span class="keywordflow">return</span> <a class="code" href="value_8c.html#a2f2d0d3d3ce482fc844f1fc4dc4c038e">value_from_pointer</a> (type, pswa);
<a name="l01745"></a>01745         }
<a name="l01746"></a>01746     }
<a name="l01747"></a>01747 
<a name="l01748"></a>01748   <span class="comment">/* Unwind CC via PSW mask.  */</span>
<a name="l01749"></a>01749   <span class="keywordflow">if</span> (regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a2431ca4c0c48ea776a4f55f2d3ecb180">cc_regnum</a>)
<a name="l01750"></a>01750     {
<a name="l01751"></a>01751       <span class="keyword">struct </span><a class="code" href="structvalue.html">value</a> *val;
<a name="l01752"></a>01752 
<a name="l01753"></a>01753       val = <a class="code" href="frame_8c.html#afa792172cf11a59304ad444a2ef9bd2d">frame_unwind_register_value</a> (this_frame, <a class="code" href="s390-tdep_8h.html#a2e5117a5450cef1e8280cb8f68c64145">S390_PSWM_REGNUM</a>);
<a name="l01754"></a>01754       <span class="keywordflow">if</span> (!<a class="code" href="value_8c.html#ac29d8a824744789e9d8302db669dd49f">value_optimized_out</a> (val))
<a name="l01755"></a>01755         {
<a name="l01756"></a>01756           <a class="code" href="defs_8h.html#ac7647a3f71533007c9e128f3ddda1987">LONGEST</a> pswm = <a class="code" href="value_8c.html#aa95e2692a6e5338edb5db75909064bc1">value_as_long</a> (val);
<a name="l01757"></a>01757 
<a name="l01758"></a>01758           <span class="keywordflow">if</span> (<a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type) == 4)
<a name="l01759"></a>01759             <span class="keywordflow">return</span> <a class="code" href="value_8c.html#a194b41f9d10ade20e32daff64b4ae03c">value_from_longest</a> (type, (pswm &gt;&gt; 12) &amp; 3);
<a name="l01760"></a>01760           <span class="keywordflow">else</span>
<a name="l01761"></a>01761             <span class="keywordflow">return</span> <a class="code" href="value_8c.html#a194b41f9d10ade20e32daff64b4ae03c">value_from_longest</a> (type, (pswm &gt;&gt; 44) &amp; 3);
<a name="l01762"></a>01762         }
<a name="l01763"></a>01763     }
<a name="l01764"></a>01764 
<a name="l01765"></a>01765   <span class="comment">/* Unwind full GPRs to show at least the lower halves (as the</span>
<a name="l01766"></a>01766 <span class="comment">     upper halves are undefined).  */</span>
<a name="l01767"></a>01767   <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#af36254a7ce222558134b867d93af6349">regnum_is_gpr_full</a> (tdep, regnum))
<a name="l01768"></a>01768     {
<a name="l01769"></a>01769       <span class="keywordtype">int</span> <a class="code" href="structreg.html">reg</a> = regnum - tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a68c8669a924fc7e5703c7aefcdb78ed0">gpr_full_regnum</a>;
<a name="l01770"></a>01770       <span class="keyword">struct </span><a class="code" href="structvalue.html">value</a> *val;
<a name="l01771"></a>01771 
<a name="l01772"></a>01772       val = <a class="code" href="frame_8c.html#afa792172cf11a59304ad444a2ef9bd2d">frame_unwind_register_value</a> (this_frame, <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a> + reg);
<a name="l01773"></a>01773       <span class="keywordflow">if</span> (!<a class="code" href="value_8c.html#ac29d8a824744789e9d8302db669dd49f">value_optimized_out</a> (val))
<a name="l01774"></a>01774         <span class="keywordflow">return</span> <a class="code" href="valops_8c.html#a458c471119ca0e007cecaa24fe6b1333">value_cast</a> (type, val);
<a name="l01775"></a>01775     }
<a name="l01776"></a>01776 
<a name="l01777"></a>01777   <span class="keywordflow">return</span> <a class="code" href="value_8c.html#ade69f37db571ab00d2a1fffe8128b80c">allocate_optimized_out_value</a> (type);
<a name="l01778"></a>01778 }
<a name="l01779"></a>01779 
<a name="l01780"></a>01780 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structvalue.html">value</a> *
<a name="l01781"></a><a class="code" href="s390-tdep_8c.html#af4b53748742680f5578f77829e9118c2">01781</a> <a class="code" href="s390-tdep_8c.html#af4b53748742680f5578f77829e9118c2">s390_trad_frame_prev_register</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame,
<a name="l01782"></a>01782                                <span class="keyword">struct</span> <a class="code" href="structtrad__frame__saved__reg.html">trad_frame_saved_reg</a> saved_regs[],
<a name="l01783"></a>01783                                <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>)
<a name="l01784"></a>01784 {
<a name="l01785"></a>01785   <span class="keywordflow">if</span> (regnum &lt; <a class="code" href="s390-tdep_8h.html#a8742e6e8c0d755dc761f9da2e92cff80">S390_NUM_REGS</a>)
<a name="l01786"></a>01786     <span class="keywordflow">return</span> <a class="code" href="trad-frame_8c.html#a942094830577eeb218e28c3c84452d59">trad_frame_get_prev_register</a> (this_frame, saved_regs, regnum);
<a name="l01787"></a>01787   <span class="keywordflow">else</span>
<a name="l01788"></a>01788     <span class="keywordflow">return</span> <a class="code" href="s390-tdep_8c.html#a0b43770de70fb30567a3dfb5b597ee74">s390_unwind_pseudo_register</a> (this_frame, regnum);
<a name="l01789"></a>01789 }
<a name="l01790"></a>01790 
<a name="l01791"></a>01791 
<a name="l01792"></a>01792 <span class="comment">/* Normal stack frames.  */</span>
<a name="l01793"></a>01793 
<a name="l01794"></a><a class="code" href="structs390__unwind__cache.html">01794</a> <span class="keyword">struct </span><a class="code" href="structs390__unwind__cache.html">s390_unwind_cache</a> {
<a name="l01795"></a>01795 
<a name="l01796"></a><a class="code" href="structs390__unwind__cache.html#a04a7b6808a1cfbcf9e55dc83c6ea9b76">01796</a>   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="structs390__unwind__cache.html#a04a7b6808a1cfbcf9e55dc83c6ea9b76">func</a>;
<a name="l01797"></a><a class="code" href="structs390__unwind__cache.html#aa45a49770c6f39cd67928fc2a9ed153f">01797</a>   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="structs390__unwind__cache.html#aa45a49770c6f39cd67928fc2a9ed153f">frame_base</a>;
<a name="l01798"></a><a class="code" href="structs390__unwind__cache.html#a377ddb6dc71957d5753253ffc5888b6d">01798</a>   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="structs390__unwind__cache.html#a377ddb6dc71957d5753253ffc5888b6d">local_base</a>;
<a name="l01799"></a>01799 
<a name="l01800"></a><a class="code" href="structs390__unwind__cache.html#a46c98f3e6cbf1d5b390d13f979e37184">01800</a>   <span class="keyword">struct </span><a class="code" href="structtrad__frame__saved__reg.html">trad_frame_saved_reg</a> *<a class="code" href="structs390__unwind__cache.html#a46c98f3e6cbf1d5b390d13f979e37184">saved_regs</a>;
<a name="l01801"></a>01801 };
<a name="l01802"></a>01802 
<a name="l01803"></a>01803 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01804"></a><a class="code" href="s390-tdep_8c.html#a10997d1c60e43227affbfd76933116f2">01804</a> <a class="code" href="s390-tdep_8c.html#a10997d1c60e43227affbfd76933116f2">s390_prologue_frame_unwind_cache</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame,
<a name="l01805"></a>01805                                   <span class="keyword">struct</span> <a class="code" href="structs390__unwind__cache.html">s390_unwind_cache</a> *info)
<a name="l01806"></a>01806 {
<a name="l01807"></a>01807   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (this_frame);
<a name="l01808"></a>01808   <span class="keywordtype">int</span> word_size = <a class="code" href="gdbarch_8c.html#ae356193e481873e4377ff922d984f13f">gdbarch_ptr_bit</a> (gdbarch) / 8;
<a name="l01809"></a>01809   <span class="keyword">struct </span><a class="code" href="structs390__prologue__data.html">s390_prologue_data</a> data;
<a name="l01810"></a>01810   <a class="code" href="structprologue__value.html">pv_t</a> *fp = &amp;data.<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[<a class="code" href="s390-tdep_8h.html#a31af3bccb0bda6d6396851551c3b71f5">S390_FRAME_REGNUM</a> - <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a>];
<a name="l01811"></a>01811   <a class="code" href="structprologue__value.html">pv_t</a> *<a class="code" href="windows-nat_8c.html#a8d40798874dab99986478ef00ff3e297">sp</a> = &amp;data.<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[<a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a> - <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a>];
<a name="l01812"></a>01812   <span class="keywordtype">int</span> i;
<a name="l01813"></a>01813   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> cfa;
<a name="l01814"></a>01814   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="remote-fileio_8c.html#a7e97efb32ba66c3f1141bdbb82529d20">func</a>;
<a name="l01815"></a>01815   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> result;
<a name="l01816"></a>01816   <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> <a class="code" href="structreg.html">reg</a>;
<a name="l01817"></a>01817   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> prev_sp;
<a name="l01818"></a>01818   <span class="keywordtype">int</span> frame_pointer;
<a name="l01819"></a>01819   <span class="keywordtype">int</span> <a class="code" href="go32-nat_8c.html#a854352f53b148adc24983a58a1866d66">size</a>;
<a name="l01820"></a>01820   <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *next_frame;
<a name="l01821"></a>01821 
<a name="l01822"></a>01822   <span class="comment">/* Try to find the function start address.  If we can&#39;t find it, we don&#39;t</span>
<a name="l01823"></a>01823 <span class="comment">     bother searching for it -- with modern compilers this would be mostly</span>
<a name="l01824"></a>01824 <span class="comment">     pointless anyway.  Trust that we&#39;ll either have valid DWARF-2 CFI data</span>
<a name="l01825"></a>01825 <span class="comment">     or else a valid backchain ...  */</span>
<a name="l01826"></a>01826   func = <a class="code" href="frame_8c.html#ac64c0ce600cc134b2256c0d507f57cde">get_frame_func</a> (this_frame);
<a name="l01827"></a>01827   <span class="keywordflow">if</span> (!func)
<a name="l01828"></a>01828     <span class="keywordflow">return</span> 0;
<a name="l01829"></a>01829 
<a name="l01830"></a>01830   <span class="comment">/* Try to analyze the prologue.  */</span>
<a name="l01831"></a>01831   result = <a class="code" href="s390-tdep_8c.html#a73a2a877b2e6d59d4fb13d77af183eb3">s390_analyze_prologue</a> (gdbarch, func,
<a name="l01832"></a>01832                                   <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (this_frame), &amp;data);
<a name="l01833"></a>01833   <span class="keywordflow">if</span> (!result)
<a name="l01834"></a>01834     <span class="keywordflow">return</span> 0;
<a name="l01835"></a>01835 
<a name="l01836"></a>01836   <span class="comment">/* If this was successful, we should have found the instruction that</span>
<a name="l01837"></a>01837 <span class="comment">     sets the stack pointer register to the previous value of the stack </span>
<a name="l01838"></a>01838 <span class="comment">     pointer minus the frame size.  */</span>
<a name="l01839"></a>01839   <span class="keywordflow">if</span> (!<a class="code" href="prologue-value_8c.html#acb3cd4d819006186a58efb6243d43a29">pv_is_register</a> (*sp, <a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a>))
<a name="l01840"></a>01840     <span class="keywordflow">return</span> 0;
<a name="l01841"></a>01841 
<a name="l01842"></a>01842   <span class="comment">/* A frame size of zero at this point can mean either a real </span>
<a name="l01843"></a>01843 <span class="comment">     frameless function, or else a failure to find the prologue.</span>
<a name="l01844"></a>01844 <span class="comment">     Perform some sanity checks to verify we really have a </span>
<a name="l01845"></a>01845 <span class="comment">     frameless function.  */</span>
<a name="l01846"></a>01846   <span class="keywordflow">if</span> (sp-&gt;<a class="code" href="structprologue__value.html#a2dd1a03b2edadea2ade3c7d2aec24d22">k</a> == 0)
<a name="l01847"></a>01847     {
<a name="l01848"></a>01848       <span class="comment">/* If the next frame is a NORMAL_FRAME, this frame *cannot* have frame </span>
<a name="l01849"></a>01849 <span class="comment">         size zero.  This is only possible if the next frame is a sentinel </span>
<a name="l01850"></a>01850 <span class="comment">         frame, a dummy frame, or a signal trampoline frame.  */</span>
<a name="l01851"></a>01851       <span class="comment">/* FIXME: cagney/2004-05-01: This sanity check shouldn&#39;t be</span>
<a name="l01852"></a>01852 <span class="comment">         needed, instead the code should simpliy rely on its</span>
<a name="l01853"></a>01853 <span class="comment">         analysis.  */</span>
<a name="l01854"></a>01854       next_frame = <a class="code" href="frame_8c.html#a80df189cf511651209609685d5380340">get_next_frame</a> (this_frame);
<a name="l01855"></a>01855       <span class="keywordflow">while</span> (next_frame &amp;&amp; <a class="code" href="frame_8c.html#a8f965671d7b55f002c993385024a2fdb">get_frame_type</a> (next_frame) == <a class="code" href="frame_8h.html#a3ca2c0bc7578bf3d337e34b2c08a6c5faec50e9f25cd04e445a8c7b56ea98c790">INLINE_FRAME</a>)
<a name="l01856"></a>01856         next_frame = <a class="code" href="frame_8c.html#a80df189cf511651209609685d5380340">get_next_frame</a> (next_frame);
<a name="l01857"></a>01857       <span class="keywordflow">if</span> (next_frame
<a name="l01858"></a>01858           &amp;&amp; <a class="code" href="frame_8c.html#a8f965671d7b55f002c993385024a2fdb">get_frame_type</a> (<a class="code" href="frame_8c.html#a80df189cf511651209609685d5380340">get_next_frame</a> (this_frame)) == <a class="code" href="frame_8h.html#a3ca2c0bc7578bf3d337e34b2c08a6c5faeb4f7fd6d9e397d1141feb133746637a">NORMAL_FRAME</a>)
<a name="l01859"></a>01859         <span class="keywordflow">return</span> 0;
<a name="l01860"></a>01860 
<a name="l01861"></a>01861       <span class="comment">/* If we really have a frameless function, %r14 must be valid</span>
<a name="l01862"></a>01862 <span class="comment">         -- in particular, it must point to a different function.  */</span>
<a name="l01863"></a>01863       reg = <a class="code" href="frame_8c.html#affa785e8937e96fd727e46a2cfec94c4">get_frame_register_unsigned</a> (this_frame, <a class="code" href="s390-tdep_8h.html#a44cef8aee0f141dafb5f5e48a5d911be">S390_RETADDR_REGNUM</a>);
<a name="l01864"></a>01864       reg = <a class="code" href="gdbarch_8c.html#abee635dc7cb9e9793c6100971df1a859">gdbarch_addr_bits_remove</a> (gdbarch, reg) - 1;
<a name="l01865"></a>01865       <span class="keywordflow">if</span> (<a class="code" href="blockframe_8c.html#a5f755befa096231f25bf9c0f7ce5a7c2">get_pc_function_start</a> (reg) == func)
<a name="l01866"></a>01866         {
<a name="l01867"></a>01867           <span class="comment">/* However, there is one case where it *is* valid for %r14</span>
<a name="l01868"></a>01868 <span class="comment">             to point to the same function -- if this is a recursive</span>
<a name="l01869"></a>01869 <span class="comment">             call, and we have stopped in the prologue *before* the</span>
<a name="l01870"></a>01870 <span class="comment">             stack frame was allocated.</span>
<a name="l01871"></a>01871 <span class="comment"></span>
<a name="l01872"></a>01872 <span class="comment">             Recognize this case by looking ahead a bit ...  */</span>
<a name="l01873"></a>01873 
<a name="l01874"></a>01874           <span class="keyword">struct </span><a class="code" href="structs390__prologue__data.html">s390_prologue_data</a> data2;
<a name="l01875"></a>01875           <a class="code" href="structprologue__value.html">pv_t</a> *sp = &amp;data2.<a class="code" href="structs390__prologue__data.html#ac7c8f40383305a6c9d44442e0c857f2b">gpr</a>[<a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a> - <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a>];
<a name="l01876"></a>01876 
<a name="l01877"></a>01877           <span class="keywordflow">if</span> (!(<a class="code" href="s390-tdep_8c.html#a73a2a877b2e6d59d4fb13d77af183eb3">s390_analyze_prologue</a> (gdbarch, func, (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>)-1, &amp;data2)
<a name="l01878"></a>01878                 &amp;&amp; <a class="code" href="prologue-value_8c.html#acb3cd4d819006186a58efb6243d43a29">pv_is_register</a> (*sp, <a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a>)
<a name="l01879"></a>01879                 &amp;&amp; sp-&gt;k != 0))
<a name="l01880"></a>01880             <span class="keywordflow">return</span> 0;
<a name="l01881"></a>01881         }
<a name="l01882"></a>01882     }
<a name="l01883"></a>01883 
<a name="l01884"></a>01884 
<a name="l01885"></a>01885   <span class="comment">/* OK, we&#39;ve found valid prologue data.  */</span>
<a name="l01886"></a>01886   size = -sp-&gt;<a class="code" href="structprologue__value.html#a2dd1a03b2edadea2ade3c7d2aec24d22">k</a>;
<a name="l01887"></a>01887 
<a name="l01888"></a>01888   <span class="comment">/* If the frame pointer originally also holds the same value</span>
<a name="l01889"></a>01889 <span class="comment">     as the stack pointer, we&#39;re probably using it.  If it holds</span>
<a name="l01890"></a>01890 <span class="comment">     some other value -- even a constant offset -- it is most</span>
<a name="l01891"></a>01891 <span class="comment">     likely used as temp register.  */</span>
<a name="l01892"></a>01892   <span class="keywordflow">if</span> (<a class="code" href="prologue-value_8c.html#a3c9e13a6dc53cd468eb98e73968f52c9">pv_is_identical</a> (*sp, *fp))
<a name="l01893"></a>01893     frame_pointer = <a class="code" href="s390-tdep_8h.html#a31af3bccb0bda6d6396851551c3b71f5">S390_FRAME_REGNUM</a>;
<a name="l01894"></a>01894   <span class="keywordflow">else</span>
<a name="l01895"></a>01895     frame_pointer = <a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a>;
<a name="l01896"></a>01896 
<a name="l01897"></a>01897   <span class="comment">/* If we&#39;ve detected a function with stack frame, we&#39;ll still have to </span>
<a name="l01898"></a>01898 <span class="comment">     treat it as frameless if we&#39;re currently within the function epilog </span>
<a name="l01899"></a>01899 <span class="comment">     code at a point where the frame pointer has already been restored.</span>
<a name="l01900"></a>01900 <span class="comment">     This can only happen in an innermost frame.  */</span>
<a name="l01901"></a>01901   <span class="comment">/* FIXME: cagney/2004-05-01: This sanity check shouldn&#39;t be needed,</span>
<a name="l01902"></a>01902 <span class="comment">     instead the code should simpliy rely on its analysis.  */</span>
<a name="l01903"></a>01903   next_frame = <a class="code" href="frame_8c.html#a80df189cf511651209609685d5380340">get_next_frame</a> (this_frame);
<a name="l01904"></a>01904   <span class="keywordflow">while</span> (next_frame &amp;&amp; <a class="code" href="frame_8c.html#a8f965671d7b55f002c993385024a2fdb">get_frame_type</a> (next_frame) == <a class="code" href="frame_8h.html#a3ca2c0bc7578bf3d337e34b2c08a6c5faec50e9f25cd04e445a8c7b56ea98c790">INLINE_FRAME</a>)
<a name="l01905"></a>01905     next_frame = <a class="code" href="frame_8c.html#a80df189cf511651209609685d5380340">get_next_frame</a> (next_frame);
<a name="l01906"></a>01906   <span class="keywordflow">if</span> (size &gt; 0
<a name="l01907"></a>01907       &amp;&amp; (next_frame == NULL
<a name="l01908"></a>01908           || <a class="code" href="frame_8c.html#a8f965671d7b55f002c993385024a2fdb">get_frame_type</a> (<a class="code" href="frame_8c.html#a80df189cf511651209609685d5380340">get_next_frame</a> (this_frame)) != <a class="code" href="frame_8h.html#a3ca2c0bc7578bf3d337e34b2c08a6c5faeb4f7fd6d9e397d1141feb133746637a">NORMAL_FRAME</a>))
<a name="l01909"></a>01909     {
<a name="l01910"></a>01910       <span class="comment">/* See the comment in s390_in_function_epilogue_p on why this is</span>
<a name="l01911"></a>01911 <span class="comment">         not completely reliable ...  */</span>
<a name="l01912"></a>01912       <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a5b6967cea54d26e5d33a862df5d12cb9">s390_in_function_epilogue_p</a> (gdbarch, <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (this_frame)))
<a name="l01913"></a>01913         {
<a name="l01914"></a>01914           <a class="code" href="gdb__string_8h.html#adb03df3679ce1445e801310614624ccb">memset</a> (&amp;data, 0, <span class="keyword">sizeof</span> (data));
<a name="l01915"></a>01915           size = 0;
<a name="l01916"></a>01916           frame_pointer = <a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a>;
<a name="l01917"></a>01917         }
<a name="l01918"></a>01918     }
<a name="l01919"></a>01919 
<a name="l01920"></a>01920   <span class="comment">/* Once we know the frame register and the frame size, we can unwind</span>
<a name="l01921"></a>01921 <span class="comment">     the current value of the frame register from the next frame, and</span>
<a name="l01922"></a>01922 <span class="comment">     add back the frame size to arrive that the previous frame&#39;s </span>
<a name="l01923"></a>01923 <span class="comment">     stack pointer value.  */</span>
<a name="l01924"></a>01924   prev_sp = <a class="code" href="frame_8c.html#affa785e8937e96fd727e46a2cfec94c4">get_frame_register_unsigned</a> (this_frame, frame_pointer) + <a class="code" href="go32-nat_8c.html#a854352f53b148adc24983a58a1866d66">size</a>;
<a name="l01925"></a>01925   cfa = prev_sp + 16*word_size + 32;
<a name="l01926"></a>01926 
<a name="l01927"></a>01927   <span class="comment">/* Set up ABI call-saved/call-clobbered registers.  */</span>
<a name="l01928"></a>01928   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="s390-tdep_8h.html#a8742e6e8c0d755dc761f9da2e92cff80">S390_NUM_REGS</a>; i++)
<a name="l01929"></a>01929     <span class="keywordflow">if</span> (!<a class="code" href="s390-tdep_8c.html#a2d670a8ae3df41270eac79e8c6123893">s390_register_call_saved</a> (gdbarch, i))
<a name="l01930"></a>01930       <a class="code" href="trad-frame_8c.html#ac9092e09ed7be8570b101030c499d197">trad_frame_set_unknown</a> (info-&gt;<a class="code" href="structs390__unwind__cache.html#a46c98f3e6cbf1d5b390d13f979e37184">saved_regs</a>, i);
<a name="l01931"></a>01931 
<a name="l01932"></a>01932   <span class="comment">/* CC is always call-clobbered.  */</span>
<a name="l01933"></a>01933   <a class="code" href="trad-frame_8c.html#ac9092e09ed7be8570b101030c499d197">trad_frame_set_unknown</a> (info-&gt;<a class="code" href="structs390__unwind__cache.html#a46c98f3e6cbf1d5b390d13f979e37184">saved_regs</a>, <a class="code" href="s390-tdep_8h.html#a2e5117a5450cef1e8280cb8f68c64145">S390_PSWM_REGNUM</a>);
<a name="l01934"></a>01934 
<a name="l01935"></a>01935   <span class="comment">/* Record the addresses of all register spill slots the prologue parser</span>
<a name="l01936"></a>01936 <span class="comment">     has recognized.  Consider only registers defined as call-saved by the</span>
<a name="l01937"></a>01937 <span class="comment">     ABI; for call-clobbered registers the parser may have recognized</span>
<a name="l01938"></a>01938 <span class="comment">     spurious stores.  */</span>
<a name="l01939"></a>01939 
<a name="l01940"></a>01940   <span class="keywordflow">for</span> (i = 0; i &lt; 16; i++)
<a name="l01941"></a>01941     <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a2d670a8ae3df41270eac79e8c6123893">s390_register_call_saved</a> (gdbarch, <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a> + i)
<a name="l01942"></a>01942         &amp;&amp; data.<a class="code" href="structs390__prologue__data.html#a669434cac329c5b88d3e2fd4beca6e20">gpr_slot</a>[i] != 0)
<a name="l01943"></a>01943       info-&gt;<a class="code" href="structs390__unwind__cache.html#a46c98f3e6cbf1d5b390d13f979e37184">saved_regs</a>[<a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a> + i].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = cfa - data.<a class="code" href="structs390__prologue__data.html#a669434cac329c5b88d3e2fd4beca6e20">gpr_slot</a>[i];
<a name="l01944"></a>01944 
<a name="l01945"></a>01945   <span class="keywordflow">for</span> (i = 0; i &lt; 16; i++)
<a name="l01946"></a>01946     <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a2d670a8ae3df41270eac79e8c6123893">s390_register_call_saved</a> (gdbarch, <a class="code" href="s390-tdep_8h.html#a49c471b21ebc6e58b3db78912901bbfc">S390_F0_REGNUM</a> + i)
<a name="l01947"></a>01947         &amp;&amp; data.<a class="code" href="structs390__prologue__data.html#a9148ae4d008c4d46e3fda91945bd0b30">fpr_slot</a>[i] != 0)
<a name="l01948"></a>01948       info-&gt;<a class="code" href="structs390__unwind__cache.html#a46c98f3e6cbf1d5b390d13f979e37184">saved_regs</a>[<a class="code" href="s390-tdep_8h.html#a49c471b21ebc6e58b3db78912901bbfc">S390_F0_REGNUM</a> + i].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = cfa - data.<a class="code" href="structs390__prologue__data.html#a9148ae4d008c4d46e3fda91945bd0b30">fpr_slot</a>[i];
<a name="l01949"></a>01949 
<a name="l01950"></a>01950   <span class="comment">/* Function return will set PC to %r14.  */</span>
<a name="l01951"></a>01951   info-&gt;<a class="code" href="structs390__unwind__cache.html#a46c98f3e6cbf1d5b390d13f979e37184">saved_regs</a>[<a class="code" href="s390-tdep_8h.html#a0ce4efe91c3fcbfe21e8a67f77057258">S390_PSWA_REGNUM</a>] = info-&gt;<a class="code" href="structs390__unwind__cache.html#a46c98f3e6cbf1d5b390d13f979e37184">saved_regs</a>[<a class="code" href="s390-tdep_8h.html#a44cef8aee0f141dafb5f5e48a5d911be">S390_RETADDR_REGNUM</a>];
<a name="l01952"></a>01952 
<a name="l01953"></a>01953   <span class="comment">/* In frameless functions, we unwind simply by moving the return</span>
<a name="l01954"></a>01954 <span class="comment">     address to the PC.  However, if we actually stored to the</span>
<a name="l01955"></a>01955 <span class="comment">     save area, use that -- we might only think the function frameless</span>
<a name="l01956"></a>01956 <span class="comment">     because we&#39;re in the middle of the prologue ...  */</span>
<a name="l01957"></a>01957   <span class="keywordflow">if</span> (size == 0
<a name="l01958"></a>01958       &amp;&amp; !<a class="code" href="trad-frame_8c.html#aa3a0e933330792e061147f62a08b7a32">trad_frame_addr_p</a> (info-&gt;<a class="code" href="structs390__unwind__cache.html#a46c98f3e6cbf1d5b390d13f979e37184">saved_regs</a>, <a class="code" href="s390-tdep_8h.html#a0ce4efe91c3fcbfe21e8a67f77057258">S390_PSWA_REGNUM</a>))
<a name="l01959"></a>01959     {
<a name="l01960"></a>01960       info-&gt;<a class="code" href="structs390__unwind__cache.html#a46c98f3e6cbf1d5b390d13f979e37184">saved_regs</a>[<a class="code" href="s390-tdep_8h.html#a0ce4efe91c3fcbfe21e8a67f77057258">S390_PSWA_REGNUM</a>].<a class="code" href="structtrad__frame__saved__reg.html#a6f71f69ef3a3fe36541e5a47a692889f">realreg</a> = <a class="code" href="s390-tdep_8h.html#a44cef8aee0f141dafb5f5e48a5d911be">S390_RETADDR_REGNUM</a>;
<a name="l01961"></a>01961     }
<a name="l01962"></a>01962 
<a name="l01963"></a>01963   <span class="comment">/* Another sanity check: unless this is a frameless function,</span>
<a name="l01964"></a>01964 <span class="comment">     we should have found spill slots for SP and PC.</span>
<a name="l01965"></a>01965 <span class="comment">     If not, we cannot unwind further -- this happens e.g. in</span>
<a name="l01966"></a>01966 <span class="comment">     libc&#39;s thread_start routine.  */</span>
<a name="l01967"></a>01967   <span class="keywordflow">if</span> (size &gt; 0)
<a name="l01968"></a>01968     {
<a name="l01969"></a>01969       <span class="keywordflow">if</span> (!<a class="code" href="trad-frame_8c.html#aa3a0e933330792e061147f62a08b7a32">trad_frame_addr_p</a> (info-&gt;<a class="code" href="structs390__unwind__cache.html#a46c98f3e6cbf1d5b390d13f979e37184">saved_regs</a>, <a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a>)
<a name="l01970"></a>01970           || !<a class="code" href="trad-frame_8c.html#aa3a0e933330792e061147f62a08b7a32">trad_frame_addr_p</a> (info-&gt;<a class="code" href="structs390__unwind__cache.html#a46c98f3e6cbf1d5b390d13f979e37184">saved_regs</a>, <a class="code" href="s390-tdep_8h.html#a0ce4efe91c3fcbfe21e8a67f77057258">S390_PSWA_REGNUM</a>))
<a name="l01971"></a>01971         prev_sp = -1;
<a name="l01972"></a>01972     }
<a name="l01973"></a>01973 
<a name="l01974"></a>01974   <span class="comment">/* We use the current value of the frame register as local_base,</span>
<a name="l01975"></a>01975 <span class="comment">     and the top of the register save area as frame_base.  */</span>
<a name="l01976"></a>01976   <span class="keywordflow">if</span> (prev_sp != -1)
<a name="l01977"></a>01977     {
<a name="l01978"></a>01978       info-&gt;<a class="code" href="structs390__unwind__cache.html#aa45a49770c6f39cd67928fc2a9ed153f">frame_base</a> = prev_sp + 16*word_size + 32;
<a name="l01979"></a>01979       info-&gt;<a class="code" href="structs390__unwind__cache.html#a377ddb6dc71957d5753253ffc5888b6d">local_base</a> = prev_sp - <a class="code" href="go32-nat_8c.html#a854352f53b148adc24983a58a1866d66">size</a>;
<a name="l01980"></a>01980     }
<a name="l01981"></a>01981 
<a name="l01982"></a>01982   info-&gt;<a class="code" href="structs390__unwind__cache.html#a04a7b6808a1cfbcf9e55dc83c6ea9b76">func</a> = <a class="code" href="remote-fileio_8c.html#a7e97efb32ba66c3f1141bdbb82529d20">func</a>;
<a name="l01983"></a>01983   <span class="keywordflow">return</span> 1;
<a name="l01984"></a>01984 }
<a name="l01985"></a>01985 
<a name="l01986"></a>01986 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l01987"></a><a class="code" href="s390-tdep_8c.html#a5d1b065f01ea96b058afdff40f2fac06">01987</a> <a class="code" href="s390-tdep_8c.html#a5d1b065f01ea96b058afdff40f2fac06">s390_backchain_frame_unwind_cache</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame,
<a name="l01988"></a>01988                                    <span class="keyword">struct</span> <a class="code" href="structs390__unwind__cache.html">s390_unwind_cache</a> *info)
<a name="l01989"></a>01989 {
<a name="l01990"></a>01990   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (this_frame);
<a name="l01991"></a>01991   <span class="keywordtype">int</span> word_size = <a class="code" href="gdbarch_8c.html#ae356193e481873e4377ff922d984f13f">gdbarch_ptr_bit</a> (gdbarch) / 8;
<a name="l01992"></a>01992   <span class="keyword">enum</span> bfd_endian <a class="code" href="structgdbarch.html#a7a9dd6544406e9cbb574dae9d531346e">byte_order</a> = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l01993"></a>01993   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> backchain;
<a name="l01994"></a>01994   <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> <a class="code" href="structreg.html">reg</a>;
<a name="l01995"></a>01995   <a class="code" href="defs_8h.html#ac7647a3f71533007c9e128f3ddda1987">LONGEST</a> <a class="code" href="windows-nat_8c.html#a8d40798874dab99986478ef00ff3e297">sp</a>;
<a name="l01996"></a>01996   <span class="keywordtype">int</span> i;
<a name="l01997"></a>01997 
<a name="l01998"></a>01998   <span class="comment">/* Set up ABI call-saved/call-clobbered registers.  */</span>
<a name="l01999"></a>01999   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="s390-tdep_8h.html#a8742e6e8c0d755dc761f9da2e92cff80">S390_NUM_REGS</a>; i++)
<a name="l02000"></a>02000     <span class="keywordflow">if</span> (!<a class="code" href="s390-tdep_8c.html#a2d670a8ae3df41270eac79e8c6123893">s390_register_call_saved</a> (gdbarch, i))
<a name="l02001"></a>02001       <a class="code" href="trad-frame_8c.html#ac9092e09ed7be8570b101030c499d197">trad_frame_set_unknown</a> (info-&gt;<a class="code" href="structs390__unwind__cache.html#a46c98f3e6cbf1d5b390d13f979e37184">saved_regs</a>, i);
<a name="l02002"></a>02002 
<a name="l02003"></a>02003   <span class="comment">/* CC is always call-clobbered.  */</span>
<a name="l02004"></a>02004   <a class="code" href="trad-frame_8c.html#ac9092e09ed7be8570b101030c499d197">trad_frame_set_unknown</a> (info-&gt;<a class="code" href="structs390__unwind__cache.html#a46c98f3e6cbf1d5b390d13f979e37184">saved_regs</a>, <a class="code" href="s390-tdep_8h.html#a2e5117a5450cef1e8280cb8f68c64145">S390_PSWM_REGNUM</a>);
<a name="l02005"></a>02005 
<a name="l02006"></a>02006   <span class="comment">/* Get the backchain.  */</span>
<a name="l02007"></a>02007   reg = <a class="code" href="frame_8c.html#affa785e8937e96fd727e46a2cfec94c4">get_frame_register_unsigned</a> (this_frame, <a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a>);
<a name="l02008"></a>02008   backchain = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (reg, word_size, byte_order);
<a name="l02009"></a>02009 
<a name="l02010"></a>02010   <span class="comment">/* A zero backchain terminates the frame chain.  As additional</span>
<a name="l02011"></a>02011 <span class="comment">     sanity check, let&#39;s verify that the spill slot for SP in the</span>
<a name="l02012"></a>02012 <span class="comment">     save area pointed to by the backchain in fact links back to</span>
<a name="l02013"></a>02013 <span class="comment">     the save area.  */</span>
<a name="l02014"></a>02014   <span class="keywordflow">if</span> (backchain != 0
<a name="l02015"></a>02015       &amp;&amp; <a class="code" href="corefile_8c.html#a699566bc75ae8b1b9a3a9963236845a8">safe_read_memory_integer</a> (backchain + 15*word_size,
<a name="l02016"></a>02016                                    word_size, byte_order, &amp;sp)
<a name="l02017"></a>02017       &amp;&amp; (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>)sp == backchain)
<a name="l02018"></a>02018     {
<a name="l02019"></a>02019       <span class="comment">/* We don&#39;t know which registers were saved, but it will have</span>
<a name="l02020"></a>02020 <span class="comment">         to be at least %r14 and %r15.  This will allow us to continue</span>
<a name="l02021"></a>02021 <span class="comment">         unwinding, but other prev-frame registers may be incorrect ...  */</span>
<a name="l02022"></a>02022       info-&gt;<a class="code" href="structs390__unwind__cache.html#a46c98f3e6cbf1d5b390d13f979e37184">saved_regs</a>[<a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a>].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = backchain + 15*word_size;
<a name="l02023"></a>02023       info-&gt;<a class="code" href="structs390__unwind__cache.html#a46c98f3e6cbf1d5b390d13f979e37184">saved_regs</a>[<a class="code" href="s390-tdep_8h.html#a44cef8aee0f141dafb5f5e48a5d911be">S390_RETADDR_REGNUM</a>].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = backchain + 14*word_size;
<a name="l02024"></a>02024 
<a name="l02025"></a>02025       <span class="comment">/* Function return will set PC to %r14.  */</span>
<a name="l02026"></a>02026       info-&gt;<a class="code" href="structs390__unwind__cache.html#a46c98f3e6cbf1d5b390d13f979e37184">saved_regs</a>[<a class="code" href="s390-tdep_8h.html#a0ce4efe91c3fcbfe21e8a67f77057258">S390_PSWA_REGNUM</a>]
<a name="l02027"></a>02027         = info-&gt;<a class="code" href="structs390__unwind__cache.html#a46c98f3e6cbf1d5b390d13f979e37184">saved_regs</a>[<a class="code" href="s390-tdep_8h.html#a44cef8aee0f141dafb5f5e48a5d911be">S390_RETADDR_REGNUM</a>];
<a name="l02028"></a>02028 
<a name="l02029"></a>02029       <span class="comment">/* We use the current value of the frame register as local_base,</span>
<a name="l02030"></a>02030 <span class="comment">         and the top of the register save area as frame_base.  */</span>
<a name="l02031"></a>02031       info-&gt;<a class="code" href="structs390__unwind__cache.html#aa45a49770c6f39cd67928fc2a9ed153f">frame_base</a> = backchain + 16*word_size + 32;
<a name="l02032"></a>02032       info-&gt;<a class="code" href="structs390__unwind__cache.html#a377ddb6dc71957d5753253ffc5888b6d">local_base</a> = reg;
<a name="l02033"></a>02033     }
<a name="l02034"></a>02034 
<a name="l02035"></a>02035   info-&gt;<a class="code" href="structs390__unwind__cache.html#a04a7b6808a1cfbcf9e55dc83c6ea9b76">func</a> = <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (this_frame);
<a name="l02036"></a>02036 }
<a name="l02037"></a>02037 
<a name="l02038"></a>02038 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structs390__unwind__cache.html">s390_unwind_cache</a> *
<a name="l02039"></a><a class="code" href="s390-tdep_8c.html#acb749865e8c1a61be0f4ea9e0c170aee">02039</a> <a class="code" href="s390-tdep_8c.html#acb749865e8c1a61be0f4ea9e0c170aee">s390_frame_unwind_cache</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame,
<a name="l02040"></a>02040                          <span class="keywordtype">void</span> **this_prologue_cache)
<a name="l02041"></a>02041 {
<a name="l02042"></a>02042   <span class="keyword">struct </span><a class="code" href="structs390__unwind__cache.html">s390_unwind_cache</a> *info;
<a name="l02043"></a>02043   <span class="keywordflow">if</span> (*this_prologue_cache)
<a name="l02044"></a>02044     <span class="keywordflow">return</span> *this_prologue_cache;
<a name="l02045"></a>02045 
<a name="l02046"></a>02046   info = <a class="code" href="frame_8h.html#af9f5c3008a0d58374aa310c5c63af552">FRAME_OBSTACK_ZALLOC</a> (<span class="keyword">struct</span> <a class="code" href="structs390__unwind__cache.html">s390_unwind_cache</a>);
<a name="l02047"></a>02047   *this_prologue_cache = info;
<a name="l02048"></a>02048   info-&gt;<a class="code" href="structs390__unwind__cache.html#a46c98f3e6cbf1d5b390d13f979e37184">saved_regs</a> = <a class="code" href="trad-frame_8c.html#a6b21318e80642c2b5e38b983f27cecec">trad_frame_alloc_saved_regs</a> (this_frame);
<a name="l02049"></a>02049   info-&gt;<a class="code" href="structs390__unwind__cache.html#a04a7b6808a1cfbcf9e55dc83c6ea9b76">func</a> = -1;
<a name="l02050"></a>02050   info-&gt;<a class="code" href="structs390__unwind__cache.html#aa45a49770c6f39cd67928fc2a9ed153f">frame_base</a> = -1;
<a name="l02051"></a>02051   info-&gt;<a class="code" href="structs390__unwind__cache.html#a377ddb6dc71957d5753253ffc5888b6d">local_base</a> = -1;
<a name="l02052"></a>02052 
<a name="l02053"></a>02053   <span class="comment">/* Try to use prologue analysis to fill the unwind cache.</span>
<a name="l02054"></a>02054 <span class="comment">     If this fails, fall back to reading the stack backchain.  */</span>
<a name="l02055"></a>02055   <span class="keywordflow">if</span> (!<a class="code" href="s390-tdep_8c.html#a10997d1c60e43227affbfd76933116f2">s390_prologue_frame_unwind_cache</a> (this_frame, info))
<a name="l02056"></a>02056     <a class="code" href="s390-tdep_8c.html#a5d1b065f01ea96b058afdff40f2fac06">s390_backchain_frame_unwind_cache</a> (this_frame, info);
<a name="l02057"></a>02057 
<a name="l02058"></a>02058   <span class="keywordflow">return</span> info;
<a name="l02059"></a>02059 }
<a name="l02060"></a>02060 
<a name="l02061"></a>02061 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02062"></a><a class="code" href="s390-tdep_8c.html#a883440d08cade868e193b5cba0ff59b3">02062</a> <a class="code" href="s390-tdep_8c.html#a883440d08cade868e193b5cba0ff59b3">s390_frame_this_id</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame,
<a name="l02063"></a>02063                     <span class="keywordtype">void</span> **this_prologue_cache,
<a name="l02064"></a>02064                     <span class="keyword">struct</span> <a class="code" href="structframe__id.html">frame_id</a> *this_id)
<a name="l02065"></a>02065 {
<a name="l02066"></a>02066   <span class="keyword">struct </span><a class="code" href="structs390__unwind__cache.html">s390_unwind_cache</a> *info
<a name="l02067"></a>02067     = <a class="code" href="s390-tdep_8c.html#acb749865e8c1a61be0f4ea9e0c170aee">s390_frame_unwind_cache</a> (this_frame, this_prologue_cache);
<a name="l02068"></a>02068 
<a name="l02069"></a>02069   <span class="keywordflow">if</span> (info-&gt;<a class="code" href="structs390__unwind__cache.html#aa45a49770c6f39cd67928fc2a9ed153f">frame_base</a> == -1)
<a name="l02070"></a>02070     <span class="keywordflow">return</span>;
<a name="l02071"></a>02071 
<a name="l02072"></a>02072   *this_id = <a class="code" href="frame_8c.html#a7f32da6ddc275b4684c301448d891f5b">frame_id_build</a> (info-&gt;<a class="code" href="structs390__unwind__cache.html#aa45a49770c6f39cd67928fc2a9ed153f">frame_base</a>, info-&gt;<a class="code" href="structs390__unwind__cache.html#a04a7b6808a1cfbcf9e55dc83c6ea9b76">func</a>);
<a name="l02073"></a>02073 }
<a name="l02074"></a>02074 
<a name="l02075"></a>02075 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structvalue.html">value</a> *
<a name="l02076"></a><a class="code" href="s390-tdep_8c.html#ade50e4247962e48574b5afb3c3838940">02076</a> <a class="code" href="s390-tdep_8c.html#ade50e4247962e48574b5afb3c3838940">s390_frame_prev_register</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame,
<a name="l02077"></a>02077                           <span class="keywordtype">void</span> **this_prologue_cache, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>)
<a name="l02078"></a>02078 {
<a name="l02079"></a>02079   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (this_frame);
<a name="l02080"></a>02080   <span class="keyword">struct </span><a class="code" href="structs390__unwind__cache.html">s390_unwind_cache</a> *info
<a name="l02081"></a>02081     = <a class="code" href="s390-tdep_8c.html#acb749865e8c1a61be0f4ea9e0c170aee">s390_frame_unwind_cache</a> (this_frame, this_prologue_cache);
<a name="l02082"></a>02082 
<a name="l02083"></a>02083   <span class="keywordflow">return</span> <a class="code" href="s390-tdep_8c.html#af4b53748742680f5578f77829e9118c2">s390_trad_frame_prev_register</a> (this_frame, info-&gt;<a class="code" href="structs390__unwind__cache.html#a46c98f3e6cbf1d5b390d13f979e37184">saved_regs</a>, regnum);
<a name="l02084"></a>02084 }
<a name="l02085"></a>02085 
<a name="l02086"></a><a class="code" href="s390-tdep_8c.html#a84d03dfaa4ce9efee318756971965ed8">02086</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structframe__unwind.html">frame_unwind</a> <a class="code" href="s390-tdep_8c.html#a84d03dfaa4ce9efee318756971965ed8">s390_frame_unwind</a> = {
<a name="l02087"></a>02087   <a class="code" href="frame_8h.html#a3ca2c0bc7578bf3d337e34b2c08a6c5faeb4f7fd6d9e397d1141feb133746637a">NORMAL_FRAME</a>,
<a name="l02088"></a>02088   <a class="code" href="frame-unwind_8c.html#aa950afe60921514574c6150f0821f05c">default_frame_unwind_stop_reason</a>,
<a name="l02089"></a>02089   <a class="code" href="s390-tdep_8c.html#a883440d08cade868e193b5cba0ff59b3">s390_frame_this_id</a>,
<a name="l02090"></a>02090   <a class="code" href="s390-tdep_8c.html#ade50e4247962e48574b5afb3c3838940">s390_frame_prev_register</a>,
<a name="l02091"></a>02091   NULL,
<a name="l02092"></a>02092   <a class="code" href="frame-unwind_8c.html#ade64a9807fa508622581cc779b10ff9c">default_frame_sniffer</a>
<a name="l02093"></a>02093 };
<a name="l02094"></a>02094 
<a name="l02095"></a>02095 
<a name="l02096"></a>02096 <span class="comment">/* Code stubs and their stack frames.  For things like PLTs and NULL</span>
<a name="l02097"></a>02097 <span class="comment">   function calls (where there is no true frame and the return address</span>
<a name="l02098"></a>02098 <span class="comment">   is in the RETADDR register).  */</span>
<a name="l02099"></a>02099 
<a name="l02100"></a><a class="code" href="structs390__stub__unwind__cache.html">02100</a> <span class="keyword">struct </span><a class="code" href="structs390__stub__unwind__cache.html">s390_stub_unwind_cache</a>
<a name="l02101"></a>02101 {
<a name="l02102"></a><a class="code" href="structs390__stub__unwind__cache.html#aeca575f0ed5da10adb609eb8b3737050">02102</a>   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="structs390__stub__unwind__cache.html#aeca575f0ed5da10adb609eb8b3737050">frame_base</a>;
<a name="l02103"></a><a class="code" href="structs390__stub__unwind__cache.html#acc9addba911df1f4dc38a121e211494a">02103</a>   <span class="keyword">struct </span><a class="code" href="structtrad__frame__saved__reg.html">trad_frame_saved_reg</a> *<a class="code" href="structs390__stub__unwind__cache.html#acc9addba911df1f4dc38a121e211494a">saved_regs</a>;
<a name="l02104"></a>02104 };
<a name="l02105"></a>02105 
<a name="l02106"></a>02106 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structs390__stub__unwind__cache.html">s390_stub_unwind_cache</a> *
<a name="l02107"></a><a class="code" href="s390-tdep_8c.html#a7746ea80f422a8bd831b41c78c5baa73">02107</a> <a class="code" href="s390-tdep_8c.html#a7746ea80f422a8bd831b41c78c5baa73">s390_stub_frame_unwind_cache</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame,
<a name="l02108"></a>02108                               <span class="keywordtype">void</span> **this_prologue_cache)
<a name="l02109"></a>02109 {
<a name="l02110"></a>02110   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (this_frame);
<a name="l02111"></a>02111   <span class="keywordtype">int</span> word_size = <a class="code" href="gdbarch_8c.html#ae356193e481873e4377ff922d984f13f">gdbarch_ptr_bit</a> (gdbarch) / 8;
<a name="l02112"></a>02112   <span class="keyword">struct </span><a class="code" href="structs390__stub__unwind__cache.html">s390_stub_unwind_cache</a> *info;
<a name="l02113"></a>02113   <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> <a class="code" href="structreg.html">reg</a>;
<a name="l02114"></a>02114 
<a name="l02115"></a>02115   <span class="keywordflow">if</span> (*this_prologue_cache)
<a name="l02116"></a>02116     <span class="keywordflow">return</span> *this_prologue_cache;
<a name="l02117"></a>02117 
<a name="l02118"></a>02118   info = <a class="code" href="frame_8h.html#af9f5c3008a0d58374aa310c5c63af552">FRAME_OBSTACK_ZALLOC</a> (<span class="keyword">struct</span> <a class="code" href="structs390__stub__unwind__cache.html">s390_stub_unwind_cache</a>);
<a name="l02119"></a>02119   *this_prologue_cache = info;
<a name="l02120"></a>02120   info-&gt;<a class="code" href="structs390__stub__unwind__cache.html#acc9addba911df1f4dc38a121e211494a">saved_regs</a> = <a class="code" href="trad-frame_8c.html#a6b21318e80642c2b5e38b983f27cecec">trad_frame_alloc_saved_regs</a> (this_frame);
<a name="l02121"></a>02121 
<a name="l02122"></a>02122   <span class="comment">/* The return address is in register %r14.  */</span>
<a name="l02123"></a>02123   info-&gt;<a class="code" href="structs390__stub__unwind__cache.html#acc9addba911df1f4dc38a121e211494a">saved_regs</a>[<a class="code" href="s390-tdep_8h.html#a0ce4efe91c3fcbfe21e8a67f77057258">S390_PSWA_REGNUM</a>].<a class="code" href="structtrad__frame__saved__reg.html#a6f71f69ef3a3fe36541e5a47a692889f">realreg</a> = <a class="code" href="s390-tdep_8h.html#a44cef8aee0f141dafb5f5e48a5d911be">S390_RETADDR_REGNUM</a>;
<a name="l02124"></a>02124 
<a name="l02125"></a>02125   <span class="comment">/* Retrieve stack pointer and determine our frame base.  */</span>
<a name="l02126"></a>02126   reg = <a class="code" href="frame_8c.html#affa785e8937e96fd727e46a2cfec94c4">get_frame_register_unsigned</a> (this_frame, <a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a>);
<a name="l02127"></a>02127   info-&gt;<a class="code" href="structs390__stub__unwind__cache.html#aeca575f0ed5da10adb609eb8b3737050">frame_base</a> = reg + 16*word_size + 32;
<a name="l02128"></a>02128 
<a name="l02129"></a>02129   <span class="keywordflow">return</span> info;
<a name="l02130"></a>02130 }
<a name="l02131"></a>02131 
<a name="l02132"></a>02132 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02133"></a><a class="code" href="s390-tdep_8c.html#a3e97ead0bc79f054b0289f234cc8dbab">02133</a> <a class="code" href="s390-tdep_8c.html#a3e97ead0bc79f054b0289f234cc8dbab">s390_stub_frame_this_id</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame,
<a name="l02134"></a>02134                          <span class="keywordtype">void</span> **this_prologue_cache,
<a name="l02135"></a>02135                          <span class="keyword">struct</span> <a class="code" href="structframe__id.html">frame_id</a> *this_id)
<a name="l02136"></a>02136 {
<a name="l02137"></a>02137   <span class="keyword">struct </span><a class="code" href="structs390__stub__unwind__cache.html">s390_stub_unwind_cache</a> *info
<a name="l02138"></a>02138     = <a class="code" href="s390-tdep_8c.html#a7746ea80f422a8bd831b41c78c5baa73">s390_stub_frame_unwind_cache</a> (this_frame, this_prologue_cache);
<a name="l02139"></a>02139   *this_id = <a class="code" href="frame_8c.html#a7f32da6ddc275b4684c301448d891f5b">frame_id_build</a> (info-&gt;<a class="code" href="structs390__stub__unwind__cache.html#aeca575f0ed5da10adb609eb8b3737050">frame_base</a>, <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (this_frame));
<a name="l02140"></a>02140 }
<a name="l02141"></a>02141 
<a name="l02142"></a>02142 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structvalue.html">value</a> *
<a name="l02143"></a><a class="code" href="s390-tdep_8c.html#a38631035233df2a645bc0367bd77700f">02143</a> <a class="code" href="s390-tdep_8c.html#a38631035233df2a645bc0367bd77700f">s390_stub_frame_prev_register</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame,
<a name="l02144"></a>02144                                <span class="keywordtype">void</span> **this_prologue_cache, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>)
<a name="l02145"></a>02145 {
<a name="l02146"></a>02146   <span class="keyword">struct </span><a class="code" href="structs390__stub__unwind__cache.html">s390_stub_unwind_cache</a> *info
<a name="l02147"></a>02147     = <a class="code" href="s390-tdep_8c.html#a7746ea80f422a8bd831b41c78c5baa73">s390_stub_frame_unwind_cache</a> (this_frame, this_prologue_cache);
<a name="l02148"></a>02148   <span class="keywordflow">return</span> <a class="code" href="s390-tdep_8c.html#af4b53748742680f5578f77829e9118c2">s390_trad_frame_prev_register</a> (this_frame, info-&gt;<a class="code" href="structs390__stub__unwind__cache.html#acc9addba911df1f4dc38a121e211494a">saved_regs</a>, regnum);
<a name="l02149"></a>02149 }
<a name="l02150"></a>02150 
<a name="l02151"></a>02151 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02152"></a><a class="code" href="s390-tdep_8c.html#a88170d574a847c6e1bc6cc4d7a87ed1a">02152</a> <a class="code" href="s390-tdep_8c.html#a88170d574a847c6e1bc6cc4d7a87ed1a">s390_stub_frame_sniffer</a> (<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structframe__unwind.html">frame_unwind</a> *<span class="keyword">self</span>,
<a name="l02153"></a>02153                          <span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame,
<a name="l02154"></a>02154                          <span class="keywordtype">void</span> **this_prologue_cache)
<a name="l02155"></a>02155 {
<a name="l02156"></a>02156   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> addr_in_block;
<a name="l02157"></a>02157   bfd_byte insn[<a class="code" href="s390-tdep_8c.html#a4c66fa932b211ca014f7b83f66b871e3">S390_MAX_INSTR_SIZE</a>];
<a name="l02158"></a>02158 
<a name="l02159"></a>02159   <span class="comment">/* If the current PC points to non-readable memory, we assume we</span>
<a name="l02160"></a>02160 <span class="comment">     have trapped due to an invalid function pointer call.  We handle</span>
<a name="l02161"></a>02161 <span class="comment">     the non-existing current function like a PLT stub.  */</span>
<a name="l02162"></a>02162   addr_in_block = <a class="code" href="frame_8c.html#a9035a35b7470b669f9bafee9c3961559">get_frame_address_in_block</a> (this_frame);
<a name="l02163"></a>02163   <span class="keywordflow">if</span> (<a class="code" href="objfiles_8h.html#ae5c371da14d8439fd4022314676d9783">in_plt_section</a> (addr_in_block)
<a name="l02164"></a>02164       || <a class="code" href="s390-tdep_8c.html#a931ae969aed0641258c45afcb1410b2f">s390_readinstruction</a> (insn, <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (this_frame)) &lt; 0)
<a name="l02165"></a>02165     <span class="keywordflow">return</span> 1;
<a name="l02166"></a>02166   <span class="keywordflow">return</span> 0;
<a name="l02167"></a>02167 }
<a name="l02168"></a>02168 
<a name="l02169"></a><a class="code" href="s390-tdep_8c.html#a6aec98a6575e09dec7f63c3b6d39c550">02169</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structframe__unwind.html">frame_unwind</a> <a class="code" href="s390-tdep_8c.html#a6aec98a6575e09dec7f63c3b6d39c550">s390_stub_frame_unwind</a> = {
<a name="l02170"></a>02170   <a class="code" href="frame_8h.html#a3ca2c0bc7578bf3d337e34b2c08a6c5faeb4f7fd6d9e397d1141feb133746637a">NORMAL_FRAME</a>,
<a name="l02171"></a>02171   <a class="code" href="frame-unwind_8c.html#aa950afe60921514574c6150f0821f05c">default_frame_unwind_stop_reason</a>,
<a name="l02172"></a>02172   <a class="code" href="s390-tdep_8c.html#a3e97ead0bc79f054b0289f234cc8dbab">s390_stub_frame_this_id</a>,
<a name="l02173"></a>02173   <a class="code" href="s390-tdep_8c.html#a38631035233df2a645bc0367bd77700f">s390_stub_frame_prev_register</a>,
<a name="l02174"></a>02174   NULL,
<a name="l02175"></a>02175   <a class="code" href="s390-tdep_8c.html#a88170d574a847c6e1bc6cc4d7a87ed1a">s390_stub_frame_sniffer</a>
<a name="l02176"></a>02176 };
<a name="l02177"></a>02177 
<a name="l02178"></a>02178 
<a name="l02179"></a>02179 <span class="comment">/* Signal trampoline stack frames.  */</span>
<a name="l02180"></a>02180 
<a name="l02181"></a><a class="code" href="structs390__sigtramp__unwind__cache.html">02181</a> <span class="keyword">struct </span><a class="code" href="structs390__sigtramp__unwind__cache.html">s390_sigtramp_unwind_cache</a> {
<a name="l02182"></a><a class="code" href="structs390__sigtramp__unwind__cache.html#a0067c8b121f5495f9257c9dadfc4dc0e">02182</a>   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="structs390__sigtramp__unwind__cache.html#a0067c8b121f5495f9257c9dadfc4dc0e">frame_base</a>;
<a name="l02183"></a><a class="code" href="structs390__sigtramp__unwind__cache.html#a83180a965ec50c13901c9c2ef0ee69c1">02183</a>   <span class="keyword">struct </span><a class="code" href="structtrad__frame__saved__reg.html">trad_frame_saved_reg</a> *<a class="code" href="structs390__sigtramp__unwind__cache.html#a83180a965ec50c13901c9c2ef0ee69c1">saved_regs</a>;
<a name="l02184"></a>02184 };
<a name="l02185"></a>02185 
<a name="l02186"></a>02186 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structs390__sigtramp__unwind__cache.html">s390_sigtramp_unwind_cache</a> *
<a name="l02187"></a><a class="code" href="s390-tdep_8c.html#a73d5386776d5fd3351e83437532f4271">02187</a> <a class="code" href="s390-tdep_8c.html#a73d5386776d5fd3351e83437532f4271">s390_sigtramp_frame_unwind_cache</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame,
<a name="l02188"></a>02188                                   <span class="keywordtype">void</span> **this_prologue_cache)
<a name="l02189"></a>02189 {
<a name="l02190"></a>02190   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (this_frame);
<a name="l02191"></a>02191   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l02192"></a>02192   <span class="keywordtype">int</span> word_size = <a class="code" href="gdbarch_8c.html#ae356193e481873e4377ff922d984f13f">gdbarch_ptr_bit</a> (gdbarch) / 8;
<a name="l02193"></a>02193   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l02194"></a>02194   <span class="keyword">struct </span><a class="code" href="structs390__sigtramp__unwind__cache.html">s390_sigtramp_unwind_cache</a> *info;
<a name="l02195"></a>02195   <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> this_sp, prev_sp;
<a name="l02196"></a>02196   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> next_ra, next_cfa, sigreg_ptr, sigreg_high_off;
<a name="l02197"></a>02197   <span class="keywordtype">int</span> i;
<a name="l02198"></a>02198 
<a name="l02199"></a>02199   <span class="keywordflow">if</span> (*this_prologue_cache)
<a name="l02200"></a>02200     <span class="keywordflow">return</span> *this_prologue_cache;
<a name="l02201"></a>02201 
<a name="l02202"></a>02202   info = <a class="code" href="frame_8h.html#af9f5c3008a0d58374aa310c5c63af552">FRAME_OBSTACK_ZALLOC</a> (<span class="keyword">struct</span> <a class="code" href="structs390__sigtramp__unwind__cache.html">s390_sigtramp_unwind_cache</a>);
<a name="l02203"></a>02203   *this_prologue_cache = info;
<a name="l02204"></a>02204   info-&gt;<a class="code" href="structs390__sigtramp__unwind__cache.html#a83180a965ec50c13901c9c2ef0ee69c1">saved_regs</a> = <a class="code" href="trad-frame_8c.html#a6b21318e80642c2b5e38b983f27cecec">trad_frame_alloc_saved_regs</a> (this_frame);
<a name="l02205"></a>02205 
<a name="l02206"></a>02206   this_sp = <a class="code" href="frame_8c.html#affa785e8937e96fd727e46a2cfec94c4">get_frame_register_unsigned</a> (this_frame, <a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a>);
<a name="l02207"></a>02207   next_ra = <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (this_frame);
<a name="l02208"></a>02208   next_cfa = this_sp + 16*word_size + 32;
<a name="l02209"></a>02209 
<a name="l02210"></a>02210   <span class="comment">/* New-style RT frame:</span>
<a name="l02211"></a>02211 <span class="comment">        retcode + alignment (8 bytes)</span>
<a name="l02212"></a>02212 <span class="comment">        siginfo (128 bytes)</span>
<a name="l02213"></a>02213 <span class="comment">        ucontext (contains sigregs at offset 5 words).  */</span>
<a name="l02214"></a>02214   <span class="keywordflow">if</span> (next_ra == next_cfa)
<a name="l02215"></a>02215     {
<a name="l02216"></a>02216       sigreg_ptr = next_cfa + 8 + 128 + <a class="code" href="utils_8c.html#a1597f2e569978430feec3d64b5e4caa6">align_up</a> (5*word_size, 8);
<a name="l02217"></a>02217       <span class="comment">/* sigregs are followed by uc_sigmask (8 bytes), then by the</span>
<a name="l02218"></a>02218 <span class="comment">         upper GPR halves if present.  */</span>
<a name="l02219"></a>02219       sigreg_high_off = 8;
<a name="l02220"></a>02220     }
<a name="l02221"></a>02221 
<a name="l02222"></a>02222   <span class="comment">/* Old-style RT frame and all non-RT frames:</span>
<a name="l02223"></a>02223 <span class="comment">        old signal mask (8 bytes)</span>
<a name="l02224"></a>02224 <span class="comment">        pointer to sigregs.  */</span>
<a name="l02225"></a>02225   <span class="keywordflow">else</span>
<a name="l02226"></a>02226     {
<a name="l02227"></a>02227       sigreg_ptr = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (next_cfa + 8,
<a name="l02228"></a>02228                                                  word_size, byte_order);
<a name="l02229"></a>02229       <span class="comment">/* sigregs are followed by signo (4 bytes), then by the</span>
<a name="l02230"></a>02230 <span class="comment">         upper GPR halves if present.  */</span>
<a name="l02231"></a>02231       sigreg_high_off = 4;
<a name="l02232"></a>02232     }
<a name="l02233"></a>02233 
<a name="l02234"></a>02234   <span class="comment">/* The sigregs structure looks like this:</span>
<a name="l02235"></a>02235 <span class="comment">            long   psw_mask;</span>
<a name="l02236"></a>02236 <span class="comment">            long   psw_addr;</span>
<a name="l02237"></a>02237 <span class="comment">            long   gprs[16];</span>
<a name="l02238"></a>02238 <span class="comment">            int    acrs[16];</span>
<a name="l02239"></a>02239 <span class="comment">            int    fpc;</span>
<a name="l02240"></a>02240 <span class="comment">            int    __pad;</span>
<a name="l02241"></a>02241 <span class="comment">            double fprs[16];  */</span>
<a name="l02242"></a>02242 
<a name="l02243"></a>02243   <span class="comment">/* PSW mask and address.  */</span>
<a name="l02244"></a>02244   info-&gt;<a class="code" href="structs390__sigtramp__unwind__cache.html#a83180a965ec50c13901c9c2ef0ee69c1">saved_regs</a>[<a class="code" href="s390-tdep_8h.html#a2e5117a5450cef1e8280cb8f68c64145">S390_PSWM_REGNUM</a>].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = sigreg_ptr;
<a name="l02245"></a>02245   sigreg_ptr += word_size;
<a name="l02246"></a>02246   info-&gt;<a class="code" href="structs390__sigtramp__unwind__cache.html#a83180a965ec50c13901c9c2ef0ee69c1">saved_regs</a>[<a class="code" href="s390-tdep_8h.html#a0ce4efe91c3fcbfe21e8a67f77057258">S390_PSWA_REGNUM</a>].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = sigreg_ptr;
<a name="l02247"></a>02247   sigreg_ptr += word_size;
<a name="l02248"></a>02248 
<a name="l02249"></a>02249   <span class="comment">/* Then the GPRs.  */</span>
<a name="l02250"></a>02250   <span class="keywordflow">for</span> (i = 0; i &lt; 16; i++)
<a name="l02251"></a>02251     {
<a name="l02252"></a>02252       info-&gt;<a class="code" href="structs390__sigtramp__unwind__cache.html#a83180a965ec50c13901c9c2ef0ee69c1">saved_regs</a>[<a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a> + i].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = sigreg_ptr;
<a name="l02253"></a>02253       sigreg_ptr += word_size;
<a name="l02254"></a>02254     }
<a name="l02255"></a>02255 
<a name="l02256"></a>02256   <span class="comment">/* Then the ACRs.  */</span>
<a name="l02257"></a>02257   <span class="keywordflow">for</span> (i = 0; i &lt; 16; i++)
<a name="l02258"></a>02258     {
<a name="l02259"></a>02259       info-&gt;<a class="code" href="structs390__sigtramp__unwind__cache.html#a83180a965ec50c13901c9c2ef0ee69c1">saved_regs</a>[<a class="code" href="s390-tdep_8h.html#ac07fc6e371b3155e859a66c1d7f6a770">S390_A0_REGNUM</a> + i].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = sigreg_ptr;
<a name="l02260"></a>02260       sigreg_ptr += 4;
<a name="l02261"></a>02261     }
<a name="l02262"></a>02262 
<a name="l02263"></a>02263   <span class="comment">/* The floating-point control word.  */</span>
<a name="l02264"></a>02264   info-&gt;<a class="code" href="structs390__sigtramp__unwind__cache.html#a83180a965ec50c13901c9c2ef0ee69c1">saved_regs</a>[<a class="code" href="s390-tdep_8h.html#ac9d653aef87ad7c8c68547566a40f654">S390_FPC_REGNUM</a>].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = sigreg_ptr;
<a name="l02265"></a>02265   sigreg_ptr += 8;
<a name="l02266"></a>02266 
<a name="l02267"></a>02267   <span class="comment">/* And finally the FPRs.  */</span>
<a name="l02268"></a>02268   <span class="keywordflow">for</span> (i = 0; i &lt; 16; i++)
<a name="l02269"></a>02269     {
<a name="l02270"></a>02270       info-&gt;<a class="code" href="structs390__sigtramp__unwind__cache.html#a83180a965ec50c13901c9c2ef0ee69c1">saved_regs</a>[<a class="code" href="s390-tdep_8h.html#a49c471b21ebc6e58b3db78912901bbfc">S390_F0_REGNUM</a> + i].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = sigreg_ptr;
<a name="l02271"></a>02271       sigreg_ptr += 8;
<a name="l02272"></a>02272     }
<a name="l02273"></a>02273 
<a name="l02274"></a>02274   <span class="comment">/* If we have them, the GPR upper halves are appended at the end.  */</span>
<a name="l02275"></a>02275   sigreg_ptr += sigreg_high_off;
<a name="l02276"></a>02276   <span class="keywordflow">if</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a68c8669a924fc7e5703c7aefcdb78ed0">gpr_full_regnum</a> != -1)
<a name="l02277"></a>02277     <span class="keywordflow">for</span> (i = 0; i &lt; 16; i++)
<a name="l02278"></a>02278       {
<a name="l02279"></a>02279         info-&gt;<a class="code" href="structs390__sigtramp__unwind__cache.html#a83180a965ec50c13901c9c2ef0ee69c1">saved_regs</a>[<a class="code" href="s390-tdep_8h.html#a1456fa06846f2c14417759e95ab5c493">S390_R0_UPPER_REGNUM</a> + i].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = sigreg_ptr;
<a name="l02280"></a>02280         sigreg_ptr += 4;
<a name="l02281"></a>02281       }
<a name="l02282"></a>02282 
<a name="l02283"></a>02283   <span class="comment">/* Restore the previous frame&#39;s SP.  */</span>
<a name="l02284"></a>02284   prev_sp = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (
<a name="l02285"></a>02285                         info-&gt;<a class="code" href="structs390__sigtramp__unwind__cache.html#a83180a965ec50c13901c9c2ef0ee69c1">saved_regs</a>[<a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a>].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a>,
<a name="l02286"></a>02286                         word_size, byte_order);
<a name="l02287"></a>02287 
<a name="l02288"></a>02288   <span class="comment">/* Determine our frame base.  */</span>
<a name="l02289"></a>02289   info-&gt;<a class="code" href="structs390__sigtramp__unwind__cache.html#a0067c8b121f5495f9257c9dadfc4dc0e">frame_base</a> = prev_sp + 16*word_size + 32;
<a name="l02290"></a>02290 
<a name="l02291"></a>02291   <span class="keywordflow">return</span> info;
<a name="l02292"></a>02292 }
<a name="l02293"></a>02293 
<a name="l02294"></a>02294 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02295"></a><a class="code" href="s390-tdep_8c.html#a7dd648305b0d326582f949b8e510dfa9">02295</a> <a class="code" href="s390-tdep_8c.html#a7dd648305b0d326582f949b8e510dfa9">s390_sigtramp_frame_this_id</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame,
<a name="l02296"></a>02296                              <span class="keywordtype">void</span> **this_prologue_cache,
<a name="l02297"></a>02297                              <span class="keyword">struct</span> <a class="code" href="structframe__id.html">frame_id</a> *this_id)
<a name="l02298"></a>02298 {
<a name="l02299"></a>02299   <span class="keyword">struct </span><a class="code" href="structs390__sigtramp__unwind__cache.html">s390_sigtramp_unwind_cache</a> *info
<a name="l02300"></a>02300     = <a class="code" href="s390-tdep_8c.html#a73d5386776d5fd3351e83437532f4271">s390_sigtramp_frame_unwind_cache</a> (this_frame, this_prologue_cache);
<a name="l02301"></a>02301   *this_id = <a class="code" href="frame_8c.html#a7f32da6ddc275b4684c301448d891f5b">frame_id_build</a> (info-&gt;<a class="code" href="structs390__sigtramp__unwind__cache.html#a0067c8b121f5495f9257c9dadfc4dc0e">frame_base</a>, <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (this_frame));
<a name="l02302"></a>02302 }
<a name="l02303"></a>02303 
<a name="l02304"></a>02304 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structvalue.html">value</a> *
<a name="l02305"></a><a class="code" href="s390-tdep_8c.html#aa766fc89750a231dde1e7e67533ba31d">02305</a> <a class="code" href="s390-tdep_8c.html#aa766fc89750a231dde1e7e67533ba31d">s390_sigtramp_frame_prev_register</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame,
<a name="l02306"></a>02306                                    <span class="keywordtype">void</span> **this_prologue_cache, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>)
<a name="l02307"></a>02307 {
<a name="l02308"></a>02308   <span class="keyword">struct </span><a class="code" href="structs390__sigtramp__unwind__cache.html">s390_sigtramp_unwind_cache</a> *info
<a name="l02309"></a>02309     = <a class="code" href="s390-tdep_8c.html#a73d5386776d5fd3351e83437532f4271">s390_sigtramp_frame_unwind_cache</a> (this_frame, this_prologue_cache);
<a name="l02310"></a>02310   <span class="keywordflow">return</span> <a class="code" href="s390-tdep_8c.html#af4b53748742680f5578f77829e9118c2">s390_trad_frame_prev_register</a> (this_frame, info-&gt;<a class="code" href="structs390__sigtramp__unwind__cache.html#a83180a965ec50c13901c9c2ef0ee69c1">saved_regs</a>, regnum);
<a name="l02311"></a>02311 }
<a name="l02312"></a>02312 
<a name="l02313"></a>02313 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02314"></a><a class="code" href="s390-tdep_8c.html#a2f51cbbdfa754e123d06ce4a9ed6c34a">02314</a> <a class="code" href="s390-tdep_8c.html#a2f51cbbdfa754e123d06ce4a9ed6c34a">s390_sigtramp_frame_sniffer</a> (<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structframe__unwind.html">frame_unwind</a> *<span class="keyword">self</span>,
<a name="l02315"></a>02315                              <span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame,
<a name="l02316"></a>02316                              <span class="keywordtype">void</span> **this_prologue_cache)
<a name="l02317"></a>02317 {
<a name="l02318"></a>02318   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc = <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (this_frame);
<a name="l02319"></a>02319   bfd_byte sigreturn[2];
<a name="l02320"></a>02320 
<a name="l02321"></a>02321   <span class="keywordflow">if</span> (<a class="code" href="target_8c.html#ac579515fbccfb9e6b1a45766a71c1d4f">target_read_memory</a> (pc, sigreturn, 2))
<a name="l02322"></a>02322     <span class="keywordflow">return</span> 0;
<a name="l02323"></a>02323 
<a name="l02324"></a>02324   <span class="keywordflow">if</span> (sigreturn[0] != 0x0a <span class="comment">/* svc */</span>)
<a name="l02325"></a>02325     <span class="keywordflow">return</span> 0;
<a name="l02326"></a>02326 
<a name="l02327"></a>02327   <span class="keywordflow">if</span> (sigreturn[1] != 119 <span class="comment">/* sigreturn */</span>
<a name="l02328"></a>02328       &amp;&amp; sigreturn[1] != 173 <span class="comment">/* rt_sigreturn */</span>)
<a name="l02329"></a>02329     <span class="keywordflow">return</span> 0;
<a name="l02330"></a>02330   
<a name="l02331"></a>02331   <span class="keywordflow">return</span> 1;
<a name="l02332"></a>02332 }
<a name="l02333"></a>02333 
<a name="l02334"></a><a class="code" href="s390-tdep_8c.html#a6718f733764624549c63eacad28092b4">02334</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structframe__unwind.html">frame_unwind</a> <a class="code" href="s390-tdep_8c.html#a6718f733764624549c63eacad28092b4">s390_sigtramp_frame_unwind</a> = {
<a name="l02335"></a>02335   <a class="code" href="frame_8h.html#a3ca2c0bc7578bf3d337e34b2c08a6c5fab5e81cbdc78e85afc7451a04b596914e">SIGTRAMP_FRAME</a>,
<a name="l02336"></a>02336   <a class="code" href="frame-unwind_8c.html#aa950afe60921514574c6150f0821f05c">default_frame_unwind_stop_reason</a>,
<a name="l02337"></a>02337   <a class="code" href="s390-tdep_8c.html#a7dd648305b0d326582f949b8e510dfa9">s390_sigtramp_frame_this_id</a>,
<a name="l02338"></a>02338   <a class="code" href="s390-tdep_8c.html#aa766fc89750a231dde1e7e67533ba31d">s390_sigtramp_frame_prev_register</a>,
<a name="l02339"></a>02339   NULL,
<a name="l02340"></a>02340   <a class="code" href="s390-tdep_8c.html#a2f51cbbdfa754e123d06ce4a9ed6c34a">s390_sigtramp_frame_sniffer</a>
<a name="l02341"></a>02341 };
<a name="l02342"></a>02342 
<a name="l02343"></a>02343 
<a name="l02344"></a>02344 <span class="comment">/* Frame base handling.  */</span>
<a name="l02345"></a>02345 
<a name="l02346"></a>02346 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l02347"></a><a class="code" href="s390-tdep_8c.html#a0aed08339504be001308ee1dac2a74f5">02347</a> <a class="code" href="s390-tdep_8c.html#a0aed08339504be001308ee1dac2a74f5">s390_frame_base_address</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame, <span class="keywordtype">void</span> **this_cache)
<a name="l02348"></a>02348 {
<a name="l02349"></a>02349   <span class="keyword">struct </span><a class="code" href="structs390__unwind__cache.html">s390_unwind_cache</a> *info
<a name="l02350"></a>02350     = <a class="code" href="s390-tdep_8c.html#acb749865e8c1a61be0f4ea9e0c170aee">s390_frame_unwind_cache</a> (this_frame, this_cache);
<a name="l02351"></a>02351   <span class="keywordflow">return</span> info-&gt;<a class="code" href="structs390__unwind__cache.html#aa45a49770c6f39cd67928fc2a9ed153f">frame_base</a>;
<a name="l02352"></a>02352 }
<a name="l02353"></a>02353 
<a name="l02354"></a>02354 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l02355"></a><a class="code" href="s390-tdep_8c.html#a73d22e1c78b5100e7db466ff057934d2">02355</a> <a class="code" href="s390-tdep_8c.html#a73d22e1c78b5100e7db466ff057934d2">s390_local_base_address</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame, <span class="keywordtype">void</span> **this_cache)
<a name="l02356"></a>02356 {
<a name="l02357"></a>02357   <span class="keyword">struct </span><a class="code" href="structs390__unwind__cache.html">s390_unwind_cache</a> *info
<a name="l02358"></a>02358     = <a class="code" href="s390-tdep_8c.html#acb749865e8c1a61be0f4ea9e0c170aee">s390_frame_unwind_cache</a> (this_frame, this_cache);
<a name="l02359"></a>02359   <span class="keywordflow">return</span> info-&gt;<a class="code" href="structs390__unwind__cache.html#a377ddb6dc71957d5753253ffc5888b6d">local_base</a>;
<a name="l02360"></a>02360 }
<a name="l02361"></a>02361 
<a name="l02362"></a><a class="code" href="s390-tdep_8c.html#a2e5ea4cbea11feab8f2bd4dfca090441">02362</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structframe__base.html">frame_base</a> <a class="code" href="s390-tdep_8c.html#a2e5ea4cbea11feab8f2bd4dfca090441">s390_frame_base</a> = {
<a name="l02363"></a>02363   &amp;<a class="code" href="s390-tdep_8c.html#a84d03dfaa4ce9efee318756971965ed8">s390_frame_unwind</a>,
<a name="l02364"></a>02364   <a class="code" href="s390-tdep_8c.html#a0aed08339504be001308ee1dac2a74f5">s390_frame_base_address</a>,
<a name="l02365"></a>02365   <a class="code" href="s390-tdep_8c.html#a73d22e1c78b5100e7db466ff057934d2">s390_local_base_address</a>,
<a name="l02366"></a>02366   s390_local_base_address
<a name="l02367"></a>02367 };
<a name="l02368"></a>02368 
<a name="l02369"></a>02369 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l02370"></a><a class="code" href="s390-tdep_8c.html#acda858b5a2aee2325b35d5254973c879">02370</a> <a class="code" href="s390-tdep_8c.html#acda858b5a2aee2325b35d5254973c879">s390_unwind_pc</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *next_frame)
<a name="l02371"></a>02371 {
<a name="l02372"></a>02372   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l02373"></a>02373   <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> <a class="code" href="structgdbarch__tdep.html#ab7a207d4e85b564c48238283745247b8">pc</a>;
<a name="l02374"></a>02374   pc = <a class="code" href="frame_8c.html#a294f6912118884550787fd59f2a08ff6">frame_unwind_register_unsigned</a> (next_frame, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aaf14dc59eceddbc9a4512ae0ca551cb4">pc_regnum</a>);
<a name="l02375"></a>02375   <span class="keywordflow">return</span> <a class="code" href="gdbarch_8c.html#abee635dc7cb9e9793c6100971df1a859">gdbarch_addr_bits_remove</a> (gdbarch, pc);
<a name="l02376"></a>02376 }
<a name="l02377"></a>02377 
<a name="l02378"></a>02378 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l02379"></a><a class="code" href="s390-tdep_8c.html#a738bb2d49a8c633ae62d09da14b1f932">02379</a> <a class="code" href="s390-tdep_8c.html#a738bb2d49a8c633ae62d09da14b1f932">s390_unwind_sp</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *next_frame)
<a name="l02380"></a>02380 {
<a name="l02381"></a>02381   <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> <a class="code" href="structgdbarch__tdep.html#a6c9a3fc3be4039b5ccd626c50ebcb2fd">sp</a>;
<a name="l02382"></a>02382   sp = <a class="code" href="frame_8c.html#a294f6912118884550787fd59f2a08ff6">frame_unwind_register_unsigned</a> (next_frame, <a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a>);
<a name="l02383"></a>02383   <span class="keywordflow">return</span> <a class="code" href="gdbarch_8c.html#abee635dc7cb9e9793c6100971df1a859">gdbarch_addr_bits_remove</a> (gdbarch, sp);
<a name="l02384"></a>02384 }
<a name="l02385"></a>02385 
<a name="l02386"></a>02386 
<a name="l02387"></a>02387 <span class="comment">/* DWARF-2 frame support.  */</span>
<a name="l02388"></a>02388 
<a name="l02389"></a>02389 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structvalue.html">value</a> *
<a name="l02390"></a><a class="code" href="s390-tdep_8c.html#a97b64a4cc896ff6f70008903b230c32d">02390</a> <a class="code" href="s390-tdep_8c.html#a97b64a4cc896ff6f70008903b230c32d">s390_dwarf2_prev_register</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame, <span class="keywordtype">void</span> **this_cache,
<a name="l02391"></a>02391                            <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>)
<a name="l02392"></a>02392 {
<a name="l02393"></a>02393   <span class="keywordflow">return</span> <a class="code" href="s390-tdep_8c.html#a0b43770de70fb30567a3dfb5b597ee74">s390_unwind_pseudo_register</a> (this_frame, regnum);
<a name="l02394"></a>02394 }
<a name="l02395"></a>02395 
<a name="l02396"></a>02396 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02397"></a><a class="code" href="s390-tdep_8c.html#a90cdcaab6282495e7f246601fa08826c">02397</a> <a class="code" href="s390-tdep_8c.html#a90cdcaab6282495e7f246601fa08826c">s390_dwarf2_frame_init_reg</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>,
<a name="l02398"></a>02398                             <span class="keyword">struct</span> <a class="code" href="structdwarf2__frame__state__reg.html">dwarf2_frame_state_reg</a> *<a class="code" href="structreg.html">reg</a>,
<a name="l02399"></a>02399                             <span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame)
<a name="l02400"></a>02400 {
<a name="l02401"></a>02401   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l02402"></a>02402 
<a name="l02403"></a>02403   <span class="comment">/* The condition code (and thus PSW mask) is call-clobbered.  */</span>
<a name="l02404"></a>02404   <span class="keywordflow">if</span> (regnum == <a class="code" href="s390-tdep_8h.html#a2e5117a5450cef1e8280cb8f68c64145">S390_PSWM_REGNUM</a>)
<a name="l02405"></a>02405     reg-&gt;<a class="code" href="structdwarf2__frame__state__reg.html#a7e41a3dc58552db7d15a52d1c8d896e6">how</a> = <a class="code" href="dwarf2-frame_8h.html#af4ee6f839eb1316c9d6b1d4ef2b171c9ae453ac257eeb298001c4929f4762c2b2">DWARF2_FRAME_REG_UNDEFINED</a>;
<a name="l02406"></a>02406 
<a name="l02407"></a>02407   <span class="comment">/* The PSW address unwinds to the return address.  */</span>
<a name="l02408"></a>02408   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (regnum == <a class="code" href="s390-tdep_8h.html#a0ce4efe91c3fcbfe21e8a67f77057258">S390_PSWA_REGNUM</a>)
<a name="l02409"></a>02409     reg-&gt;<a class="code" href="structdwarf2__frame__state__reg.html#a7e41a3dc58552db7d15a52d1c8d896e6">how</a> = <a class="code" href="dwarf2-frame_8h.html#af4ee6f839eb1316c9d6b1d4ef2b171c9a1b032cd6ccb1f0d62eaf38995d6f828a">DWARF2_FRAME_REG_RA</a>;
<a name="l02410"></a>02410 
<a name="l02411"></a>02411   <span class="comment">/* Fixed registers are call-saved or call-clobbered</span>
<a name="l02412"></a>02412 <span class="comment">     depending on the ABI in use.  */</span>
<a name="l02413"></a>02413   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (regnum &lt; <a class="code" href="s390-tdep_8h.html#a8742e6e8c0d755dc761f9da2e92cff80">S390_NUM_REGS</a>)
<a name="l02414"></a>02414     {
<a name="l02415"></a>02415       <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a2d670a8ae3df41270eac79e8c6123893">s390_register_call_saved</a> (gdbarch, regnum))
<a name="l02416"></a>02416         reg-&gt;<a class="code" href="structdwarf2__frame__state__reg.html#a7e41a3dc58552db7d15a52d1c8d896e6">how</a> = <a class="code" href="dwarf2-frame_8h.html#af4ee6f839eb1316c9d6b1d4ef2b171c9ac4036b95d8f2db6a6d51f184517d8921">DWARF2_FRAME_REG_SAME_VALUE</a>;
<a name="l02417"></a>02417       <span class="keywordflow">else</span>
<a name="l02418"></a>02418         reg-&gt;<a class="code" href="structdwarf2__frame__state__reg.html#a7e41a3dc58552db7d15a52d1c8d896e6">how</a> = <a class="code" href="dwarf2-frame_8h.html#af4ee6f839eb1316c9d6b1d4ef2b171c9ae453ac257eeb298001c4929f4762c2b2">DWARF2_FRAME_REG_UNDEFINED</a>;
<a name="l02419"></a>02419     }
<a name="l02420"></a>02420 
<a name="l02421"></a>02421   <span class="comment">/* We install a special function to unwind pseudos.  */</span>
<a name="l02422"></a>02422   <span class="keywordflow">else</span>
<a name="l02423"></a>02423     {
<a name="l02424"></a>02424       reg-&gt;<a class="code" href="structdwarf2__frame__state__reg.html#a7e41a3dc58552db7d15a52d1c8d896e6">how</a> = <a class="code" href="dwarf2-frame_8h.html#af4ee6f839eb1316c9d6b1d4ef2b171c9a963499177d62710f5a6307b38919f95d">DWARF2_FRAME_REG_FN</a>;
<a name="l02425"></a>02425       reg-&gt;<a class="code" href="structdwarf2__frame__state__reg.html#af642156668824cfed6073750ee0cc19e">loc</a>.<a class="code" href="structdwarf2__frame__state__reg.html#a31378e679497efd7d8a83fabf9d57fa6">fn</a> = <a class="code" href="s390-tdep_8c.html#a97b64a4cc896ff6f70008903b230c32d">s390_dwarf2_prev_register</a>;
<a name="l02426"></a>02426     }
<a name="l02427"></a>02427 }
<a name="l02428"></a>02428 
<a name="l02429"></a>02429 
<a name="l02430"></a>02430 <span class="comment">/* Dummy function calls.  */</span>
<a name="l02431"></a>02431 
<a name="l02432"></a>02432 <span class="comment">/* Return non-zero if TYPE is an integer-like type, zero otherwise.</span>
<a name="l02433"></a>02433 <span class="comment">   &quot;Integer-like&quot; types are those that should be passed the way</span>
<a name="l02434"></a>02434 <span class="comment">   integers are: integers, enums, ranges, characters, and booleans.  */</span>
<a name="l02435"></a>02435 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02436"></a><a class="code" href="s390-tdep_8c.html#a57001d9f2f51489cbaf34f82d0f862fc">02436</a> <a class="code" href="s390-tdep_8c.html#a57001d9f2f51489cbaf34f82d0f862fc">is_integer_like</a> (<span class="keyword">struct</span> <a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a>)
<a name="l02437"></a>02437 {
<a name="l02438"></a>02438   <span class="keyword">enum</span> <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462">type_code</a> <a class="code" href="ser-unix_8c.html#a45a5b7c00a796a23f01673cef1dbe0a9">code</a> = <a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (type);
<a name="l02439"></a>02439 
<a name="l02440"></a>02440   <span class="keywordflow">return</span> (code == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462a7071a71840688811b992838bb09d0ddd">TYPE_CODE_INT</a>
<a name="l02441"></a>02441           || code == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462a1afbc1e8f69012b205070a3b5eac7217">TYPE_CODE_ENUM</a>
<a name="l02442"></a>02442           || code == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462a31cf8189b076711e63dea04c1136bafe">TYPE_CODE_RANGE</a>
<a name="l02443"></a>02443           || code == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462ae991dd7ea70631f3e1b67a1a75020b5f">TYPE_CODE_CHAR</a>
<a name="l02444"></a>02444           || code == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462afbf0aa0241df408e1017ae7ff8e6798c">TYPE_CODE_BOOL</a>);
<a name="l02445"></a>02445 }
<a name="l02446"></a>02446 
<a name="l02447"></a>02447 <span class="comment">/* Return non-zero if TYPE is a pointer-like type, zero otherwise.</span>
<a name="l02448"></a>02448 <span class="comment">   &quot;Pointer-like&quot; types are those that should be passed the way</span>
<a name="l02449"></a>02449 <span class="comment">   pointers are: pointers and references.  */</span>
<a name="l02450"></a>02450 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02451"></a><a class="code" href="s390-tdep_8c.html#ae585a0a6c9429932dd78936057d6c08d">02451</a> <a class="code" href="s390-tdep_8c.html#ae585a0a6c9429932dd78936057d6c08d">is_pointer_like</a> (<span class="keyword">struct</span> <a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a>)
<a name="l02452"></a>02452 {
<a name="l02453"></a>02453   <span class="keyword">enum</span> <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462">type_code</a> <a class="code" href="ser-unix_8c.html#a45a5b7c00a796a23f01673cef1dbe0a9">code</a> = <a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (type);
<a name="l02454"></a>02454 
<a name="l02455"></a>02455   <span class="keywordflow">return</span> (code == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462a1a639160f3e3a2f9f7ac55255942c581">TYPE_CODE_PTR</a>
<a name="l02456"></a>02456           || code == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462a476430709e5a251f7e0f8e3fb48a713f">TYPE_CODE_REF</a>);
<a name="l02457"></a>02457 }
<a name="l02458"></a>02458 
<a name="l02459"></a>02459 
<a name="l02460"></a>02460 <span class="comment">/* Return non-zero if TYPE is a `float singleton&#39; or `double</span>
<a name="l02461"></a>02461 <span class="comment">   singleton&#39;, zero otherwise.</span>
<a name="l02462"></a>02462 <span class="comment"></span>
<a name="l02463"></a>02463 <span class="comment">   A `T singleton&#39; is a struct type with one member, whose type is</span>
<a name="l02464"></a>02464 <span class="comment">   either T or a `T singleton&#39;.  So, the following are all float</span>
<a name="l02465"></a>02465 <span class="comment">   singletons:</span>
<a name="l02466"></a>02466 <span class="comment"></span>
<a name="l02467"></a>02467 <span class="comment">   struct { float x };</span>
<a name="l02468"></a>02468 <span class="comment">   struct { struct { float x; } x; };</span>
<a name="l02469"></a>02469 <span class="comment">   struct { struct { struct { float x; } x; } x; };</span>
<a name="l02470"></a>02470 <span class="comment"></span>
<a name="l02471"></a>02471 <span class="comment">   ... and so on.</span>
<a name="l02472"></a>02472 <span class="comment"></span>
<a name="l02473"></a>02473 <span class="comment">   All such structures are passed as if they were floats or doubles,</span>
<a name="l02474"></a>02474 <span class="comment">   as the (revised) ABI says.  */</span>
<a name="l02475"></a>02475 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02476"></a><a class="code" href="s390-tdep_8c.html#af832655d101bd44574b49db8c134f200">02476</a> <a class="code" href="s390-tdep_8c.html#af832655d101bd44574b49db8c134f200">is_float_singleton</a> (<span class="keyword">struct</span> <a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a>)
<a name="l02477"></a>02477 {
<a name="l02478"></a>02478   <span class="keywordflow">if</span> (<a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (type) == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462af3b3fc76f66c95e12946c0ef84409365">TYPE_CODE_STRUCT</a> &amp;&amp; <a class="code" href="gdbtypes_8h.html#a2872fd7f60b18f9cf1ed3227fc4441cd">TYPE_NFIELDS</a> (type) == 1)
<a name="l02479"></a>02479     {
<a name="l02480"></a>02480       <span class="keyword">struct </span>type *singleton_type = <a class="code" href="gdbtypes_8h.html#a57f5958d4f2803d1e17748bcfa9c23c3">TYPE_FIELD_TYPE</a> (type, 0);
<a name="l02481"></a>02481       <a class="code" href="gdbtypes_8h.html#ae2f9348c644babaa9038b4dc18bffaac">CHECK_TYPEDEF</a> (singleton_type);
<a name="l02482"></a>02482 
<a name="l02483"></a>02483       <span class="keywordflow">return</span> (<a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (singleton_type) == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462a98f3aa25f923ee0cd1d009e77b0a551a">TYPE_CODE_FLT</a>
<a name="l02484"></a>02484               || <a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (singleton_type) == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462ace4e1a5aff0ea601f04c6f25eb8ed47b">TYPE_CODE_DECFLOAT</a>
<a name="l02485"></a>02485               || <a class="code" href="s390-tdep_8c.html#af832655d101bd44574b49db8c134f200">is_float_singleton</a> (singleton_type));
<a name="l02486"></a>02486     }
<a name="l02487"></a>02487 
<a name="l02488"></a>02488   <span class="keywordflow">return</span> 0;
<a name="l02489"></a>02489 }
<a name="l02490"></a>02490 
<a name="l02491"></a>02491 
<a name="l02492"></a>02492 <span class="comment">/* Return non-zero if TYPE is a struct-like type, zero otherwise.</span>
<a name="l02493"></a>02493 <span class="comment">   &quot;Struct-like&quot; types are those that should be passed as structs are:</span>
<a name="l02494"></a>02494 <span class="comment">   structs and unions.</span>
<a name="l02495"></a>02495 <span class="comment"></span>
<a name="l02496"></a>02496 <span class="comment">   As an odd quirk, not mentioned in the ABI, GCC passes float and</span>
<a name="l02497"></a>02497 <span class="comment">   double singletons as if they were a plain float, double, etc.  (The</span>
<a name="l02498"></a>02498 <span class="comment">   corresponding union types are handled normally.)  So we exclude</span>
<a name="l02499"></a>02499 <span class="comment">   those types here.  *shrug* */</span>
<a name="l02500"></a>02500 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02501"></a><a class="code" href="s390-tdep_8c.html#a6a4b828443423bf7e488ecf914b4438b">02501</a> <a class="code" href="s390-tdep_8c.html#a6a4b828443423bf7e488ecf914b4438b">is_struct_like</a> (<span class="keyword">struct</span> <a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a>)
<a name="l02502"></a>02502 {
<a name="l02503"></a>02503   <span class="keyword">enum</span> <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462">type_code</a> <a class="code" href="ser-unix_8c.html#a45a5b7c00a796a23f01673cef1dbe0a9">code</a> = <a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (type);
<a name="l02504"></a>02504 
<a name="l02505"></a>02505   <span class="keywordflow">return</span> (code == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462a8c3218d2f780665395d57dcd4d909191">TYPE_CODE_UNION</a>
<a name="l02506"></a>02506           || (code == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462af3b3fc76f66c95e12946c0ef84409365">TYPE_CODE_STRUCT</a> &amp;&amp; ! <a class="code" href="s390-tdep_8c.html#af832655d101bd44574b49db8c134f200">is_float_singleton</a> (type)));
<a name="l02507"></a>02507 }
<a name="l02508"></a>02508 
<a name="l02509"></a>02509 
<a name="l02510"></a>02510 <span class="comment">/* Return non-zero if TYPE is a float-like type, zero otherwise.</span>
<a name="l02511"></a>02511 <span class="comment">   &quot;Float-like&quot; types are those that should be passed as</span>
<a name="l02512"></a>02512 <span class="comment">   floating-point values are.</span>
<a name="l02513"></a>02513 <span class="comment"></span>
<a name="l02514"></a>02514 <span class="comment">   You&#39;d think this would just be floats, doubles, long doubles, etc.</span>
<a name="l02515"></a>02515 <span class="comment">   But as an odd quirk, not mentioned in the ABI, GCC passes float and</span>
<a name="l02516"></a>02516 <span class="comment">   double singletons as if they were a plain float, double, etc.  (The</span>
<a name="l02517"></a>02517 <span class="comment">   corresponding union types are handled normally.)  So we include</span>
<a name="l02518"></a>02518 <span class="comment">   those types here.  *shrug* */</span>
<a name="l02519"></a>02519 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02520"></a><a class="code" href="s390-tdep_8c.html#a58a0cc9feb6596c3f240f5517284b03e">02520</a> <a class="code" href="s390-tdep_8c.html#a58a0cc9feb6596c3f240f5517284b03e">is_float_like</a> (<span class="keyword">struct</span> <a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a>)
<a name="l02521"></a>02521 {
<a name="l02522"></a>02522   <span class="keywordflow">return</span> (<a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (type) == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462a98f3aa25f923ee0cd1d009e77b0a551a">TYPE_CODE_FLT</a>
<a name="l02523"></a>02523           || <a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (type) == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462ace4e1a5aff0ea601f04c6f25eb8ed47b">TYPE_CODE_DECFLOAT</a>
<a name="l02524"></a>02524           || <a class="code" href="s390-tdep_8c.html#af832655d101bd44574b49db8c134f200">is_float_singleton</a> (type));
<a name="l02525"></a>02525 }
<a name="l02526"></a>02526 
<a name="l02527"></a>02527 
<a name="l02528"></a>02528 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02529"></a><a class="code" href="s390-tdep_8c.html#a0dc251176cc0f7b050eede2292bf08ec">02529</a> <a class="code" href="s390-tdep_8c.html#a0dc251176cc0f7b050eede2292bf08ec">is_power_of_two</a> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n)
<a name="l02530"></a>02530 {
<a name="l02531"></a>02531   <span class="keywordflow">return</span> ((n &amp; (n - 1)) == 0);
<a name="l02532"></a>02532 }
<a name="l02533"></a>02533 
<a name="l02534"></a>02534 <span class="comment">/* Return non-zero if TYPE should be passed as a pointer to a copy,</span>
<a name="l02535"></a>02535 <span class="comment">   zero otherwise.  */</span>
<a name="l02536"></a>02536 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02537"></a><a class="code" href="s390-tdep_8c.html#a9e194f131a2c1d773ffe0bf0ff144ae2">02537</a> <a class="code" href="s390-tdep_8c.html#a9e194f131a2c1d773ffe0bf0ff144ae2">s390_function_arg_pass_by_reference</a> (<span class="keyword">struct</span> <a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a>)
<a name="l02538"></a>02538 {
<a name="l02539"></a>02539   <span class="keywordflow">if</span> (<a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type) &gt; 8)
<a name="l02540"></a>02540     <span class="keywordflow">return</span> 1;
<a name="l02541"></a>02541 
<a name="l02542"></a>02542   <span class="keywordflow">return</span> (<a class="code" href="s390-tdep_8c.html#a6a4b828443423bf7e488ecf914b4438b">is_struct_like</a> (type) &amp;&amp; !<a class="code" href="s390-tdep_8c.html#a0dc251176cc0f7b050eede2292bf08ec">is_power_of_two</a> (<a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type)))
<a name="l02543"></a>02543           || <a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (type) == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462ad8de4d143b624cd2bcab740a51a04658">TYPE_CODE_COMPLEX</a>
<a name="l02544"></a>02544           || (<a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (type) == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462a00c795b43d1a39f57d3e222385f14fc0">TYPE_CODE_ARRAY</a> &amp;&amp; <a class="code" href="gdbtypes_8h.html#a68a23253bcb233221400208f4c21c406">TYPE_VECTOR</a> (type));
<a name="l02545"></a>02545 }
<a name="l02546"></a>02546 
<a name="l02547"></a>02547 <span class="comment">/* Return non-zero if TYPE should be passed in a float register</span>
<a name="l02548"></a>02548 <span class="comment">   if possible.  */</span>
<a name="l02549"></a>02549 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02550"></a><a class="code" href="s390-tdep_8c.html#af3eeb584e4ac996203d9c2d44f250df0">02550</a> <a class="code" href="s390-tdep_8c.html#af3eeb584e4ac996203d9c2d44f250df0">s390_function_arg_float</a> (<span class="keyword">struct</span> <a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a>)
<a name="l02551"></a>02551 {
<a name="l02552"></a>02552   <span class="keywordflow">if</span> (<a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type) &gt; 8)
<a name="l02553"></a>02553     <span class="keywordflow">return</span> 0;
<a name="l02554"></a>02554 
<a name="l02555"></a>02555   <span class="keywordflow">return</span> <a class="code" href="s390-tdep_8c.html#a58a0cc9feb6596c3f240f5517284b03e">is_float_like</a> (type);
<a name="l02556"></a>02556 }
<a name="l02557"></a>02557 
<a name="l02558"></a>02558 <span class="comment">/* Return non-zero if TYPE should be passed in an integer register</span>
<a name="l02559"></a>02559 <span class="comment">   (or a pair of integer registers) if possible.  */</span>
<a name="l02560"></a>02560 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02561"></a><a class="code" href="s390-tdep_8c.html#aee89a7837ac6ae5abbd76a797584559b">02561</a> <a class="code" href="s390-tdep_8c.html#aee89a7837ac6ae5abbd76a797584559b">s390_function_arg_integer</a> (<span class="keyword">struct</span> <a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a>)
<a name="l02562"></a>02562 {
<a name="l02563"></a>02563   <span class="keywordflow">if</span> (<a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type) &gt; 8)
<a name="l02564"></a>02564     <span class="keywordflow">return</span> 0;
<a name="l02565"></a>02565 
<a name="l02566"></a>02566    <span class="keywordflow">return</span> <a class="code" href="s390-tdep_8c.html#a57001d9f2f51489cbaf34f82d0f862fc">is_integer_like</a> (type)
<a name="l02567"></a>02567           || <a class="code" href="s390-tdep_8c.html#ae585a0a6c9429932dd78936057d6c08d">is_pointer_like</a> (type)
<a name="l02568"></a>02568           || (<a class="code" href="s390-tdep_8c.html#a6a4b828443423bf7e488ecf914b4438b">is_struct_like</a> (type) &amp;&amp; <a class="code" href="s390-tdep_8c.html#a0dc251176cc0f7b050eede2292bf08ec">is_power_of_two</a> (<a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type)));
<a name="l02569"></a>02569 }
<a name="l02570"></a>02570 
<a name="l02571"></a>02571 <span class="comment">/* Return ARG, a `SIMPLE_ARG&#39;, sign-extended or zero-extended to a full</span>
<a name="l02572"></a>02572 <span class="comment">   word as required for the ABI.  */</span>
<a name="l02573"></a>02573 <span class="keyword">static</span> <a class="code" href="defs_8h.html#ac7647a3f71533007c9e128f3ddda1987">LONGEST</a>
<a name="l02574"></a><a class="code" href="s390-tdep_8c.html#a4b1966405fc807ba5183bb5e39b54ea7">02574</a> <a class="code" href="s390-tdep_8c.html#a4b1966405fc807ba5183bb5e39b54ea7">extend_simple_arg</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keyword">struct</span> <a class="code" href="structvalue.html">value</a> *arg)
<a name="l02575"></a>02575 {
<a name="l02576"></a>02576   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l02577"></a>02577   <span class="keyword">struct </span><a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a> = <a class="code" href="gdbtypes_8c.html#a0bf29d7521d8a8b8735b9a259e380386">check_typedef</a> (<a class="code" href="value_8c.html#a263a4c0bee0b0df41074b952d3c121d0">value_type</a> (arg));
<a name="l02578"></a>02578 
<a name="l02579"></a>02579   <span class="comment">/* Even structs get passed in the least significant bits of the</span>
<a name="l02580"></a>02580 <span class="comment">     register / memory word.  It&#39;s not really right to extract them as</span>
<a name="l02581"></a>02581 <span class="comment">     an integer, but it does take care of the extension.  */</span>
<a name="l02582"></a>02582   <span class="keywordflow">if</span> (<a class="code" href="gdbtypes_8h.html#a124c6ba3c6519f8a6ea57495d2f5f7f7">TYPE_UNSIGNED</a> (type))
<a name="l02583"></a>02583     <span class="keywordflow">return</span> <a class="code" href="defs_8h.html#a99aec65329508b4d449a4f881026f844">extract_unsigned_integer</a> (<a class="code" href="value_8c.html#ad41a6de8fde15c01e1ffabb603c4f108">value_contents</a> (arg),
<a name="l02584"></a>02584                                      <a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type), byte_order);
<a name="l02585"></a>02585   <span class="keywordflow">else</span>
<a name="l02586"></a>02586     <span class="keywordflow">return</span> <a class="code" href="defs_8h.html#afae519602ea9737f24bfa0e24b507faf">extract_signed_integer</a> (<a class="code" href="value_8c.html#ad41a6de8fde15c01e1ffabb603c4f108">value_contents</a> (arg),
<a name="l02587"></a>02587                                    <a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type), byte_order);
<a name="l02588"></a>02588 }
<a name="l02589"></a>02589 
<a name="l02590"></a>02590 
<a name="l02591"></a>02591 <span class="comment">/* Return the alignment required by TYPE.  */</span>
<a name="l02592"></a>02592 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02593"></a><a class="code" href="s390-tdep_8c.html#a4ccbfb1557f62b9d2f2e6068ffd6b2e5">02593</a> <a class="code" href="s390-tdep_8c.html#a4ccbfb1557f62b9d2f2e6068ffd6b2e5">alignment_of</a> (<span class="keyword">struct</span> <a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a>)
<a name="l02594"></a>02594 {
<a name="l02595"></a>02595   <span class="keywordtype">int</span> alignment;
<a name="l02596"></a>02596 
<a name="l02597"></a>02597   <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a57001d9f2f51489cbaf34f82d0f862fc">is_integer_like</a> (type)
<a name="l02598"></a>02598       || <a class="code" href="s390-tdep_8c.html#ae585a0a6c9429932dd78936057d6c08d">is_pointer_like</a> (type)
<a name="l02599"></a>02599       || <a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (type) == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462a98f3aa25f923ee0cd1d009e77b0a551a">TYPE_CODE_FLT</a>
<a name="l02600"></a>02600       || <a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (type) == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462ace4e1a5aff0ea601f04c6f25eb8ed47b">TYPE_CODE_DECFLOAT</a>)
<a name="l02601"></a>02601     alignment = <a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type);
<a name="l02602"></a>02602   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (type) == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462af3b3fc76f66c95e12946c0ef84409365">TYPE_CODE_STRUCT</a>
<a name="l02603"></a>02603            || <a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (type) == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462a8c3218d2f780665395d57dcd4d909191">TYPE_CODE_UNION</a>)
<a name="l02604"></a>02604     {
<a name="l02605"></a>02605       <span class="keywordtype">int</span> i;
<a name="l02606"></a>02606 
<a name="l02607"></a>02607       alignment = 1;
<a name="l02608"></a>02608       <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="gdbtypes_8h.html#a2872fd7f60b18f9cf1ed3227fc4441cd">TYPE_NFIELDS</a> (type); i++)
<a name="l02609"></a>02609         {
<a name="l02610"></a>02610           <span class="keywordtype">int</span> <a class="code" href="ada-lang_8c.html#abb7a108aa99673ab47d6060983f29109">field_alignment</a>
<a name="l02611"></a>02611             = <a class="code" href="s390-tdep_8c.html#a4ccbfb1557f62b9d2f2e6068ffd6b2e5">alignment_of</a> (<a class="code" href="gdbtypes_8c.html#a0bf29d7521d8a8b8735b9a259e380386">check_typedef</a> (<a class="code" href="gdbtypes_8h.html#a57f5958d4f2803d1e17748bcfa9c23c3">TYPE_FIELD_TYPE</a> (type, i)));
<a name="l02612"></a>02612 
<a name="l02613"></a>02613           <span class="keywordflow">if</span> (field_alignment &gt; alignment)
<a name="l02614"></a>02614             alignment = <a class="code" href="ada-lang_8c.html#abb7a108aa99673ab47d6060983f29109">field_alignment</a>;
<a name="l02615"></a>02615         }
<a name="l02616"></a>02616     }
<a name="l02617"></a>02617   <span class="keywordflow">else</span>
<a name="l02618"></a>02618     alignment = 1;
<a name="l02619"></a>02619 
<a name="l02620"></a>02620   <span class="comment">/* Check that everything we ever return is a power of two.  Lots of</span>
<a name="l02621"></a>02621 <span class="comment">     code doesn&#39;t want to deal with aligning things to arbitrary</span>
<a name="l02622"></a>02622 <span class="comment">     boundaries.  */</span>
<a name="l02623"></a>02623   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> ((alignment &amp; (alignment - 1)) == 0);
<a name="l02624"></a>02624 
<a name="l02625"></a>02625   <span class="keywordflow">return</span> alignment;
<a name="l02626"></a>02626 }
<a name="l02627"></a>02627 
<a name="l02628"></a>02628 
<a name="l02629"></a>02629 <span class="comment">/* Put the actual parameter values pointed to by ARGS[0..NARGS-1] in</span>
<a name="l02630"></a>02630 <span class="comment">   place to be passed to a function, as specified by the &quot;GNU/Linux</span>
<a name="l02631"></a>02631 <span class="comment">   for S/390 ELF Application Binary Interface Supplement&quot;.</span>
<a name="l02632"></a>02632 <span class="comment"></span>
<a name="l02633"></a>02633 <span class="comment">   SP is the current stack pointer.  We must put arguments, links,</span>
<a name="l02634"></a>02634 <span class="comment">   padding, etc. whereever they belong, and return the new stack</span>
<a name="l02635"></a>02635 <span class="comment">   pointer value.</span>
<a name="l02636"></a>02636 <span class="comment">   </span>
<a name="l02637"></a>02637 <span class="comment">   If STRUCT_RETURN is non-zero, then the function we&#39;re calling is</span>
<a name="l02638"></a>02638 <span class="comment">   going to return a structure by value; STRUCT_ADDR is the address of</span>
<a name="l02639"></a>02639 <span class="comment">   a block we&#39;ve allocated for it on the stack.</span>
<a name="l02640"></a>02640 <span class="comment"></span>
<a name="l02641"></a>02641 <span class="comment">   Our caller has taken care of any type promotions needed to satisfy</span>
<a name="l02642"></a>02642 <span class="comment">   prototypes or the old K&amp;R argument-passing rules.  */</span>
<a name="l02643"></a>02643 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l02644"></a><a class="code" href="s390-tdep_8c.html#a0a65259a92b152fd8b540e98cfcbbdd7">02644</a> <a class="code" href="s390-tdep_8c.html#a0a65259a92b152fd8b540e98cfcbbdd7">s390_push_dummy_call</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keyword">struct</span> <a class="code" href="structvalue.html">value</a> *<span class="keyword">function</span>,
<a name="l02645"></a>02645                       <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> bp_addr,
<a name="l02646"></a>02646                       <span class="keywordtype">int</span> nargs, <span class="keyword">struct</span> <a class="code" href="structvalue.html">value</a> **args, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> sp,
<a name="l02647"></a>02647                       <span class="keywordtype">int</span> <a class="code" href="arm-tdep_8h.html#aabb639d85dec2f973451bb1e7b6d1be8">struct_return</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> struct_addr)
<a name="l02648"></a>02648 {
<a name="l02649"></a>02649   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l02650"></a>02650   <span class="keywordtype">int</span> word_size = <a class="code" href="gdbarch_8c.html#ae356193e481873e4377ff922d984f13f">gdbarch_ptr_bit</a> (gdbarch) / 8;
<a name="l02651"></a>02651   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l02652"></a>02652   <span class="keywordtype">int</span> i;
<a name="l02653"></a>02653 
<a name="l02654"></a>02654   <span class="comment">/* If the i&#39;th argument is passed as a reference to a copy, then</span>
<a name="l02655"></a>02655 <span class="comment">     copy_addr[i] is the address of the copy we made.  */</span>
<a name="l02656"></a>02656   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> *copy_addr = alloca (nargs * <span class="keyword">sizeof</span> (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>));
<a name="l02657"></a>02657 
<a name="l02658"></a>02658   <span class="comment">/* Reserve space for the reference-to-copy area.  */</span>
<a name="l02659"></a>02659   <span class="keywordflow">for</span> (i = 0; i &lt; nargs; i++)
<a name="l02660"></a>02660     {
<a name="l02661"></a>02661       <span class="keyword">struct </span><a class="code" href="structvalue.html">value</a> *arg = args[i];
<a name="l02662"></a>02662       <span class="keyword">struct </span><a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a> = <a class="code" href="gdbtypes_8c.html#a0bf29d7521d8a8b8735b9a259e380386">check_typedef</a> (<a class="code" href="value_8c.html#a263a4c0bee0b0df41074b952d3c121d0">value_type</a> (arg));
<a name="l02663"></a>02663 
<a name="l02664"></a>02664       <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a9e194f131a2c1d773ffe0bf0ff144ae2">s390_function_arg_pass_by_reference</a> (type))
<a name="l02665"></a>02665         {
<a name="l02666"></a>02666           sp -= <a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type);
<a name="l02667"></a>02667           sp = <a class="code" href="utils_8c.html#a2333cae8a4809e09f8e851c83838ecaf">align_down</a> (sp, <a class="code" href="s390-tdep_8c.html#a4ccbfb1557f62b9d2f2e6068ffd6b2e5">alignment_of</a> (type));
<a name="l02668"></a>02668           copy_addr[i] = sp;
<a name="l02669"></a>02669         }
<a name="l02670"></a>02670     }
<a name="l02671"></a>02671 
<a name="l02672"></a>02672   <span class="comment">/* Reserve space for the parameter area.  As a conservative</span>
<a name="l02673"></a>02673 <span class="comment">     simplification, we assume that everything will be passed on the</span>
<a name="l02674"></a>02674 <span class="comment">     stack.  Since every argument larger than 8 bytes will be </span>
<a name="l02675"></a>02675 <span class="comment">     passed by reference, we use this simple upper bound.  */</span>
<a name="l02676"></a>02676   sp -= nargs * 8;
<a name="l02677"></a>02677 
<a name="l02678"></a>02678   <span class="comment">/* After all that, make sure it&#39;s still aligned on an eight-byte</span>
<a name="l02679"></a>02679 <span class="comment">     boundary.  */</span>
<a name="l02680"></a>02680   sp = <a class="code" href="utils_8c.html#a2333cae8a4809e09f8e851c83838ecaf">align_down</a> (sp, 8);
<a name="l02681"></a>02681 
<a name="l02682"></a>02682   <span class="comment">/* Allocate the standard frame areas: the register save area, the</span>
<a name="l02683"></a>02683 <span class="comment">     word reserved for the compiler (which seems kind of meaningless),</span>
<a name="l02684"></a>02684 <span class="comment">     and the back chain pointer.  */</span>
<a name="l02685"></a>02685   sp -= 16*word_size + 32;
<a name="l02686"></a>02686 
<a name="l02687"></a>02687   <span class="comment">/* Now we have the final SP value.  Make sure we didn&#39;t underflow;</span>
<a name="l02688"></a>02688 <span class="comment">     on 31-bit, this would result in addresses with the high bit set,</span>
<a name="l02689"></a>02689 <span class="comment">     which causes confusion elsewhere.  Note that if we error out</span>
<a name="l02690"></a>02690 <span class="comment">     here, stack and registers remain untouched.  */</span>
<a name="l02691"></a>02691   <span class="keywordflow">if</span> (<a class="code" href="gdbarch_8c.html#abee635dc7cb9e9793c6100971df1a859">gdbarch_addr_bits_remove</a> (gdbarch, sp) != sp)
<a name="l02692"></a>02692     <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Stack overflow&quot;</span>));
<a name="l02693"></a>02693 
<a name="l02694"></a>02694 
<a name="l02695"></a>02695   <span class="comment">/* Finally, place the actual parameters, working from SP towards</span>
<a name="l02696"></a>02696 <span class="comment">     higher addresses.  The code above is supposed to reserve enough</span>
<a name="l02697"></a>02697 <span class="comment">     space for this.  */</span>
<a name="l02698"></a>02698   {
<a name="l02699"></a>02699     <span class="keywordtype">int</span> fr = 0;
<a name="l02700"></a>02700     <span class="keywordtype">int</span> gr = 2;
<a name="l02701"></a>02701     <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> starg = sp + 16*word_size + 32;
<a name="l02702"></a>02702 
<a name="l02703"></a>02703     <span class="comment">/* A struct is returned using general register 2.  */</span>
<a name="l02704"></a>02704     <span class="keywordflow">if</span> (struct_return)
<a name="l02705"></a>02705       {
<a name="l02706"></a>02706         <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regcache, <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a> + gr,
<a name="l02707"></a>02707                                         struct_addr);
<a name="l02708"></a>02708         gr++;
<a name="l02709"></a>02709       }
<a name="l02710"></a>02710 
<a name="l02711"></a>02711     <span class="keywordflow">for</span> (i = 0; i &lt; nargs; i++)
<a name="l02712"></a>02712       {
<a name="l02713"></a>02713         <span class="keyword">struct </span><a class="code" href="structvalue.html">value</a> *arg = args[i];
<a name="l02714"></a>02714         <span class="keyword">struct </span><a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a> = <a class="code" href="gdbtypes_8c.html#a0bf29d7521d8a8b8735b9a259e380386">check_typedef</a> (<a class="code" href="value_8c.html#a263a4c0bee0b0df41074b952d3c121d0">value_type</a> (arg));
<a name="l02715"></a>02715         <span class="keywordtype">unsigned</span> <a class="code" href="structtype.html#a73598608f0395a10828a7f69cb843d70">length</a> = <a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type);
<a name="l02716"></a>02716 
<a name="l02717"></a>02717         <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#a9e194f131a2c1d773ffe0bf0ff144ae2">s390_function_arg_pass_by_reference</a> (type))
<a name="l02718"></a>02718           {
<a name="l02719"></a>02719             <span class="comment">/* Actually copy the argument contents to the stack slot</span>
<a name="l02720"></a>02720 <span class="comment">               that was reserved above.  */</span>
<a name="l02721"></a>02721             <a class="code" href="corefile_8c.html#a05c568c157071d9349667fab589228e5">write_memory</a> (copy_addr[i], <a class="code" href="value_8c.html#ad41a6de8fde15c01e1ffabb603c4f108">value_contents</a> (arg), length);
<a name="l02722"></a>02722 
<a name="l02723"></a>02723             <span class="keywordflow">if</span> (gr &lt;= 6)
<a name="l02724"></a>02724               {
<a name="l02725"></a>02725                 <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regcache, <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a> + gr,
<a name="l02726"></a>02726                                                 copy_addr[i]);
<a name="l02727"></a>02727                 gr++;
<a name="l02728"></a>02728               }
<a name="l02729"></a>02729             <span class="keywordflow">else</span>
<a name="l02730"></a>02730               {
<a name="l02731"></a>02731                 <a class="code" href="corefile_8c.html#a5d984a6b6854bdefc717e88447000790">write_memory_unsigned_integer</a> (starg, word_size, byte_order,
<a name="l02732"></a>02732                                                copy_addr[i]);
<a name="l02733"></a>02733                 starg += word_size;
<a name="l02734"></a>02734               }
<a name="l02735"></a>02735           }
<a name="l02736"></a>02736         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#af3eeb584e4ac996203d9c2d44f250df0">s390_function_arg_float</a> (type))
<a name="l02737"></a>02737           {
<a name="l02738"></a>02738             <span class="comment">/* The GNU/Linux for S/390 ABI uses FPRs 0 and 2 to pass arguments,</span>
<a name="l02739"></a>02739 <span class="comment">               the GNU/Linux for zSeries ABI uses 0, 2, 4, and 6.  */</span>
<a name="l02740"></a>02740             <span class="keywordflow">if</span> (fr &lt;= (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af1e7479196010341d589e5d793b4c7b1">abi</a> == ABI_LINUX_S390 ? 2 : 6))
<a name="l02741"></a>02741               {
<a name="l02742"></a>02742                 <span class="comment">/* When we store a single-precision value in an FP register,</span>
<a name="l02743"></a>02743 <span class="comment">                   it occupies the leftmost bits.  */</span>
<a name="l02744"></a>02744                 <a class="code" href="regcache_8c.html#a722867e06f34f859c10d2c3e175f4519">regcache_cooked_write_part</a> (regcache, <a class="code" href="s390-tdep_8h.html#a49c471b21ebc6e58b3db78912901bbfc">S390_F0_REGNUM</a> + fr,
<a name="l02745"></a>02745                                             0, length, <a class="code" href="value_8c.html#ad41a6de8fde15c01e1ffabb603c4f108">value_contents</a> (arg));
<a name="l02746"></a>02746                 fr += 2;
<a name="l02747"></a>02747               }
<a name="l02748"></a>02748             <span class="keywordflow">else</span>
<a name="l02749"></a>02749               {
<a name="l02750"></a>02750                 <span class="comment">/* When we store a single-precision value in a stack slot,</span>
<a name="l02751"></a>02751 <span class="comment">                   it occupies the rightmost bits.  */</span>
<a name="l02752"></a>02752                 starg = <a class="code" href="utils_8c.html#a1597f2e569978430feec3d64b5e4caa6">align_up</a> (starg + length, word_size);
<a name="l02753"></a>02753                 <a class="code" href="corefile_8c.html#a05c568c157071d9349667fab589228e5">write_memory</a> (starg - length, <a class="code" href="value_8c.html#ad41a6de8fde15c01e1ffabb603c4f108">value_contents</a> (arg), length);
<a name="l02754"></a>02754               }
<a name="l02755"></a>02755           }
<a name="l02756"></a>02756         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#aee89a7837ac6ae5abbd76a797584559b">s390_function_arg_integer</a> (type) &amp;&amp; length &lt;= word_size)
<a name="l02757"></a>02757           {
<a name="l02758"></a>02758             <span class="keywordflow">if</span> (gr &lt;= 6)
<a name="l02759"></a>02759               {
<a name="l02760"></a>02760                 <span class="comment">/* Integer arguments are always extended to word size.  */</span>
<a name="l02761"></a>02761                 <a class="code" href="regcache_8c.html#a81b7aed5cdcbde3896b0522e932d251a">regcache_cooked_write_signed</a> (regcache, <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a> + gr,
<a name="l02762"></a>02762                                               <a class="code" href="s390-tdep_8c.html#a4b1966405fc807ba5183bb5e39b54ea7">extend_simple_arg</a> (gdbarch,
<a name="l02763"></a>02763                                                                  arg));
<a name="l02764"></a>02764                 gr++;
<a name="l02765"></a>02765               }
<a name="l02766"></a>02766             <span class="keywordflow">else</span>
<a name="l02767"></a>02767               {
<a name="l02768"></a>02768                 <span class="comment">/* Integer arguments are always extended to word size.  */</span>
<a name="l02769"></a>02769                 <a class="code" href="corefile_8c.html#aa05793bdb376437b6e0c6e9fd81fff72">write_memory_signed_integer</a> (starg, word_size, byte_order,
<a name="l02770"></a>02770                                              <a class="code" href="s390-tdep_8c.html#a4b1966405fc807ba5183bb5e39b54ea7">extend_simple_arg</a> (gdbarch, arg));
<a name="l02771"></a>02771                 starg += word_size;
<a name="l02772"></a>02772               }
<a name="l02773"></a>02773           }
<a name="l02774"></a>02774         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="s390-tdep_8c.html#aee89a7837ac6ae5abbd76a797584559b">s390_function_arg_integer</a> (type) &amp;&amp; length == 2*word_size)
<a name="l02775"></a>02775           {
<a name="l02776"></a>02776             <span class="keywordflow">if</span> (gr &lt;= 5)
<a name="l02777"></a>02777               {
<a name="l02778"></a>02778                 <a class="code" href="regcache_8c.html#a25a43a21da95fa740c8efca31cf61d56">regcache_cooked_write</a> (regcache, <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a> + gr,
<a name="l02779"></a>02779                                        <a class="code" href="value_8c.html#ad41a6de8fde15c01e1ffabb603c4f108">value_contents</a> (arg));
<a name="l02780"></a>02780                 <a class="code" href="regcache_8c.html#a25a43a21da95fa740c8efca31cf61d56">regcache_cooked_write</a> (regcache, <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a> + gr + 1,
<a name="l02781"></a>02781                                        <a class="code" href="value_8c.html#ad41a6de8fde15c01e1ffabb603c4f108">value_contents</a> (arg) + word_size);
<a name="l02782"></a>02782                 gr += 2;
<a name="l02783"></a>02783               }
<a name="l02784"></a>02784             <span class="keywordflow">else</span>
<a name="l02785"></a>02785               {
<a name="l02786"></a>02786                 <span class="comment">/* If we skipped r6 because we couldn&#39;t fit a DOUBLE_ARG</span>
<a name="l02787"></a>02787 <span class="comment">                   in it, then don&#39;t go back and use it again later.  */</span>
<a name="l02788"></a>02788                 gr = 7;
<a name="l02789"></a>02789 
<a name="l02790"></a>02790                 <a class="code" href="corefile_8c.html#a05c568c157071d9349667fab589228e5">write_memory</a> (starg, <a class="code" href="value_8c.html#ad41a6de8fde15c01e1ffabb603c4f108">value_contents</a> (arg), length);
<a name="l02791"></a>02791                 starg += <a class="code" href="structtype.html#a73598608f0395a10828a7f69cb843d70">length</a>;
<a name="l02792"></a>02792               }
<a name="l02793"></a>02793           }
<a name="l02794"></a>02794         <span class="keywordflow">else</span>
<a name="l02795"></a>02795           <a class="code" href="common-utils_8h.html#aa14285d9d3d4171016ef9cf09447e8bb">internal_error</a> (__FILE__, __LINE__, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;unknown argument type&quot;</span>));
<a name="l02796"></a>02796       }
<a name="l02797"></a>02797   }
<a name="l02798"></a>02798 
<a name="l02799"></a>02799   <span class="comment">/* Store return PSWA.  In 31-bit mode, keep addressing mode bit.  */</span>
<a name="l02800"></a>02800   <span class="keywordflow">if</span> (word_size == 4)
<a name="l02801"></a>02801     {
<a name="l02802"></a>02802       <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> pswa;
<a name="l02803"></a>02803       <a class="code" href="regcache_8c.html#a959a077d769de1641d4f9754cc7b4a1f">regcache_cooked_read_unsigned</a> (regcache, <a class="code" href="s390-tdep_8h.html#a0ce4efe91c3fcbfe21e8a67f77057258">S390_PSWA_REGNUM</a>, &amp;pswa);
<a name="l02804"></a>02804       bp_addr = (bp_addr &amp; 0x7fffffff) | (pswa &amp; 0x80000000);
<a name="l02805"></a>02805     }
<a name="l02806"></a>02806   <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regcache, <a class="code" href="s390-tdep_8h.html#a44cef8aee0f141dafb5f5e48a5d911be">S390_RETADDR_REGNUM</a>, bp_addr);
<a name="l02807"></a>02807 
<a name="l02808"></a>02808   <span class="comment">/* Store updated stack pointer.  */</span>
<a name="l02809"></a>02809   <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regcache, <a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a>, sp);
<a name="l02810"></a>02810 
<a name="l02811"></a>02811   <span class="comment">/* We need to return the &#39;stack part&#39; of the frame ID,</span>
<a name="l02812"></a>02812 <span class="comment">     which is actually the top of the register save area.  */</span>
<a name="l02813"></a>02813   <span class="keywordflow">return</span> sp + 16*word_size + 32;
<a name="l02814"></a>02814 }
<a name="l02815"></a>02815 
<a name="l02816"></a>02816 <span class="comment">/* Assuming THIS_FRAME is a dummy, return the frame ID of that</span>
<a name="l02817"></a>02817 <span class="comment">   dummy frame.  The frame ID&#39;s base needs to match the TOS value</span>
<a name="l02818"></a>02818 <span class="comment">   returned by push_dummy_call, and the PC match the dummy frame&#39;s</span>
<a name="l02819"></a>02819 <span class="comment">   breakpoint.  */</span>
<a name="l02820"></a>02820 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structframe__id.html">frame_id</a>
<a name="l02821"></a><a class="code" href="s390-tdep_8c.html#afc1d6e358b140523b03da4dc15d16a08">02821</a> <a class="code" href="s390-tdep_8c.html#afc1d6e358b140523b03da4dc15d16a08">s390_dummy_id</a> (struct <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *this_frame)
<a name="l02822"></a>02822 {
<a name="l02823"></a>02823   <span class="keywordtype">int</span> word_size = <a class="code" href="gdbarch_8c.html#ae356193e481873e4377ff922d984f13f">gdbarch_ptr_bit</a> (gdbarch) / 8;
<a name="l02824"></a>02824   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="windows-nat_8c.html#a8d40798874dab99986478ef00ff3e297">sp</a> = <a class="code" href="frame_8c.html#affa785e8937e96fd727e46a2cfec94c4">get_frame_register_unsigned</a> (this_frame, <a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a>);
<a name="l02825"></a>02825   sp = <a class="code" href="gdbarch_8c.html#abee635dc7cb9e9793c6100971df1a859">gdbarch_addr_bits_remove</a> (gdbarch, sp);
<a name="l02826"></a>02826 
<a name="l02827"></a>02827   <span class="keywordflow">return</span> <a class="code" href="frame_8c.html#a7f32da6ddc275b4684c301448d891f5b">frame_id_build</a> (sp + 16*word_size + 32,
<a name="l02828"></a>02828                          <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (this_frame));
<a name="l02829"></a>02829 }
<a name="l02830"></a>02830 
<a name="l02831"></a>02831 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l02832"></a><a class="code" href="s390-tdep_8c.html#af8f97e77ab0696838e6fd8906823612f">02832</a> <a class="code" href="s390-tdep_8c.html#af8f97e77ab0696838e6fd8906823612f">s390_frame_align</a> (<span class="keyword">struct</span> gdbarch *gdbarch, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="structframe__info.html#a2467bb732908d95c5632a45cf1d4439a">addr</a>)
<a name="l02833"></a>02833 {
<a name="l02834"></a>02834   <span class="comment">/* Both the 32- and 64-bit ABI&#39;s say that the stack pointer should</span>
<a name="l02835"></a>02835 <span class="comment">     always be aligned on an eight-byte boundary.  */</span>
<a name="l02836"></a>02836   <span class="keywordflow">return</span> (addr &amp; -8);
<a name="l02837"></a>02837 }
<a name="l02838"></a>02838 
<a name="l02839"></a>02839 
<a name="l02840"></a>02840 <span class="comment">/* Function return value access.  */</span>
<a name="l02841"></a>02841 
<a name="l02842"></a>02842 <span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="defs_8h.html#ad73ff2db888df8f297b907f7093082a5">return_value_convention</a>
<a name="l02843"></a><a class="code" href="s390-tdep_8c.html#a1f28300d62ee8030802aaaf826d68fd8">02843</a> <a class="code" href="s390-tdep_8c.html#a1f28300d62ee8030802aaaf826d68fd8">s390_return_value_convention</a> (<span class="keyword">struct</span> gdbarch *gdbarch, <span class="keyword">struct</span> <a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a>)
<a name="l02844"></a>02844 {
<a name="l02845"></a>02845   <span class="keywordflow">if</span> (<a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type) &gt; 8)
<a name="l02846"></a>02846     <span class="keywordflow">return</span> <a class="code" href="defs_8h.html#ad73ff2db888df8f297b907f7093082a5a1fab6a0bfd44af88ba17a143673dc937">RETURN_VALUE_STRUCT_CONVENTION</a>;
<a name="l02847"></a>02847 
<a name="l02848"></a>02848   <span class="keywordflow">switch</span> (<a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (type))
<a name="l02849"></a>02849     {
<a name="l02850"></a>02850     <span class="keywordflow">case</span> <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462af3b3fc76f66c95e12946c0ef84409365">TYPE_CODE_STRUCT</a>:
<a name="l02851"></a>02851     <span class="keywordflow">case</span> <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462a8c3218d2f780665395d57dcd4d909191">TYPE_CODE_UNION</a>:
<a name="l02852"></a>02852     <span class="keywordflow">case</span> <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462a00c795b43d1a39f57d3e222385f14fc0">TYPE_CODE_ARRAY</a>:
<a name="l02853"></a>02853     <span class="keywordflow">case</span> <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462ad8de4d143b624cd2bcab740a51a04658">TYPE_CODE_COMPLEX</a>:
<a name="l02854"></a>02854       <span class="keywordflow">return</span> <a class="code" href="defs_8h.html#ad73ff2db888df8f297b907f7093082a5a1fab6a0bfd44af88ba17a143673dc937">RETURN_VALUE_STRUCT_CONVENTION</a>;
<a name="l02855"></a>02855 
<a name="l02856"></a>02856     <span class="keywordflow">default</span>:
<a name="l02857"></a>02857       <span class="keywordflow">return</span> <a class="code" href="defs_8h.html#ad73ff2db888df8f297b907f7093082a5a0cd14b7546740080384acc0c7e5caf3b">RETURN_VALUE_REGISTER_CONVENTION</a>;
<a name="l02858"></a>02858     }
<a name="l02859"></a>02859 }
<a name="l02860"></a>02860 
<a name="l02861"></a>02861 <span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="defs_8h.html#ad73ff2db888df8f297b907f7093082a5">return_value_convention</a>
<a name="l02862"></a><a class="code" href="s390-tdep_8c.html#a34f9cabec7625d8026a8306a64c7105e">02862</a> <a class="code" href="s390-tdep_8c.html#a34f9cabec7625d8026a8306a64c7105e">s390_return_value</a> (<span class="keyword">struct</span> gdbarch *gdbarch, <span class="keyword">struct</span> <a class="code" href="structvalue.html">value</a> *<span class="keyword">function</span>,
<a name="l02863"></a>02863                    <span class="keyword">struct</span> <a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a>, <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l02864"></a>02864                    <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *out, <span class="keyword">const</span> <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *in)
<a name="l02865"></a>02865 {
<a name="l02866"></a>02866   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l02867"></a>02867   <span class="keywordtype">int</span> word_size = <a class="code" href="gdbarch_8c.html#ae356193e481873e4377ff922d984f13f">gdbarch_ptr_bit</a> (gdbarch) / 8;
<a name="l02868"></a>02868   <span class="keyword">enum</span> <a class="code" href="defs_8h.html#ad73ff2db888df8f297b907f7093082a5">return_value_convention</a> rvc;
<a name="l02869"></a>02869   <span class="keywordtype">int</span> length;
<a name="l02870"></a>02870 
<a name="l02871"></a>02871   type = <a class="code" href="gdbtypes_8c.html#a0bf29d7521d8a8b8735b9a259e380386">check_typedef</a> (type);
<a name="l02872"></a>02872   rvc = <a class="code" href="s390-tdep_8c.html#a1f28300d62ee8030802aaaf826d68fd8">s390_return_value_convention</a> (gdbarch, type);
<a name="l02873"></a>02873   length = <a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type);
<a name="l02874"></a>02874 
<a name="l02875"></a>02875   <span class="keywordflow">if</span> (in)
<a name="l02876"></a>02876     {
<a name="l02877"></a>02877       <span class="keywordflow">switch</span> (rvc)
<a name="l02878"></a>02878         {
<a name="l02879"></a>02879         <span class="keywordflow">case</span> <a class="code" href="defs_8h.html#ad73ff2db888df8f297b907f7093082a5a0cd14b7546740080384acc0c7e5caf3b">RETURN_VALUE_REGISTER_CONVENTION</a>:
<a name="l02880"></a>02880           <span class="keywordflow">if</span> (<a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (type) == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462a98f3aa25f923ee0cd1d009e77b0a551a">TYPE_CODE_FLT</a>
<a name="l02881"></a>02881               || <a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (type) == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462ace4e1a5aff0ea601f04c6f25eb8ed47b">TYPE_CODE_DECFLOAT</a>)
<a name="l02882"></a>02882             {
<a name="l02883"></a>02883               <span class="comment">/* When we store a single-precision value in an FP register,</span>
<a name="l02884"></a>02884 <span class="comment">                 it occupies the leftmost bits.  */</span>
<a name="l02885"></a>02885               <a class="code" href="regcache_8c.html#a722867e06f34f859c10d2c3e175f4519">regcache_cooked_write_part</a> (regcache, <a class="code" href="s390-tdep_8h.html#a49c471b21ebc6e58b3db78912901bbfc">S390_F0_REGNUM</a>, 
<a name="l02886"></a>02886                                           0, length, in);
<a name="l02887"></a>02887             }
<a name="l02888"></a>02888           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (length &lt;= word_size)
<a name="l02889"></a>02889             {
<a name="l02890"></a>02890               <span class="comment">/* Integer arguments are always extended to word size.  */</span>
<a name="l02891"></a>02891               <span class="keywordflow">if</span> (<a class="code" href="gdbtypes_8h.html#a124c6ba3c6519f8a6ea57495d2f5f7f7">TYPE_UNSIGNED</a> (type))
<a name="l02892"></a>02892                 <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regcache, <a class="code" href="s390-tdep_8h.html#a2ba9018e7c0f7f8fc683427061fad546">S390_R2_REGNUM</a>,
<a name="l02893"></a>02893                         <a class="code" href="defs_8h.html#a99aec65329508b4d449a4f881026f844">extract_unsigned_integer</a> (in, length, byte_order));
<a name="l02894"></a>02894               <span class="keywordflow">else</span>
<a name="l02895"></a>02895                 <a class="code" href="regcache_8c.html#a81b7aed5cdcbde3896b0522e932d251a">regcache_cooked_write_signed</a> (regcache, <a class="code" href="s390-tdep_8h.html#a2ba9018e7c0f7f8fc683427061fad546">S390_R2_REGNUM</a>,
<a name="l02896"></a>02896                         <a class="code" href="defs_8h.html#afae519602ea9737f24bfa0e24b507faf">extract_signed_integer</a> (in, length, byte_order));
<a name="l02897"></a>02897             }
<a name="l02898"></a>02898           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (length == 2*word_size)
<a name="l02899"></a>02899             {
<a name="l02900"></a>02900               <a class="code" href="regcache_8c.html#a25a43a21da95fa740c8efca31cf61d56">regcache_cooked_write</a> (regcache, <a class="code" href="s390-tdep_8h.html#a2ba9018e7c0f7f8fc683427061fad546">S390_R2_REGNUM</a>, in);
<a name="l02901"></a>02901               <a class="code" href="regcache_8c.html#a25a43a21da95fa740c8efca31cf61d56">regcache_cooked_write</a> (regcache, <a class="code" href="s390-tdep_8h.html#ab3e5162af7f59bfec8e024377852a323">S390_R3_REGNUM</a>, in + word_size);
<a name="l02902"></a>02902             }
<a name="l02903"></a>02903           <span class="keywordflow">else</span>
<a name="l02904"></a>02904             <a class="code" href="common-utils_8h.html#aa14285d9d3d4171016ef9cf09447e8bb">internal_error</a> (__FILE__, __LINE__, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;invalid return type&quot;</span>));
<a name="l02905"></a>02905           <span class="keywordflow">break</span>;
<a name="l02906"></a>02906 
<a name="l02907"></a>02907         <span class="keywordflow">case</span> <a class="code" href="defs_8h.html#ad73ff2db888df8f297b907f7093082a5a1fab6a0bfd44af88ba17a143673dc937">RETURN_VALUE_STRUCT_CONVENTION</a>:
<a name="l02908"></a>02908           <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Cannot set function return value.&quot;</span>));
<a name="l02909"></a>02909           <span class="keywordflow">break</span>;
<a name="l02910"></a>02910         }
<a name="l02911"></a>02911     }
<a name="l02912"></a>02912   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (out)
<a name="l02913"></a>02913     {
<a name="l02914"></a>02914       <span class="keywordflow">switch</span> (rvc)
<a name="l02915"></a>02915         {
<a name="l02916"></a>02916         <span class="keywordflow">case</span> <a class="code" href="defs_8h.html#ad73ff2db888df8f297b907f7093082a5a0cd14b7546740080384acc0c7e5caf3b">RETURN_VALUE_REGISTER_CONVENTION</a>:
<a name="l02917"></a>02917           <span class="keywordflow">if</span> (<a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (type) == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462a98f3aa25f923ee0cd1d009e77b0a551a">TYPE_CODE_FLT</a>
<a name="l02918"></a>02918               || <a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (type) == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462ace4e1a5aff0ea601f04c6f25eb8ed47b">TYPE_CODE_DECFLOAT</a>)
<a name="l02919"></a>02919             {
<a name="l02920"></a>02920               <span class="comment">/* When we store a single-precision value in an FP register,</span>
<a name="l02921"></a>02921 <span class="comment">                 it occupies the leftmost bits.  */</span>
<a name="l02922"></a>02922               <a class="code" href="regcache_8c.html#a0df90ba73f76a25dbbd99903a5b57a27">regcache_cooked_read_part</a> (regcache, <a class="code" href="s390-tdep_8h.html#a49c471b21ebc6e58b3db78912901bbfc">S390_F0_REGNUM</a>, 
<a name="l02923"></a>02923                                          0, length, out);
<a name="l02924"></a>02924             }
<a name="l02925"></a>02925           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (length &lt;= word_size)
<a name="l02926"></a>02926             {
<a name="l02927"></a>02927               <span class="comment">/* Integer arguments occupy the rightmost bits.  */</span>
<a name="l02928"></a>02928               <a class="code" href="regcache_8c.html#a0df90ba73f76a25dbbd99903a5b57a27">regcache_cooked_read_part</a> (regcache, <a class="code" href="s390-tdep_8h.html#a2ba9018e7c0f7f8fc683427061fad546">S390_R2_REGNUM</a>, 
<a name="l02929"></a>02929                                          word_size - length, length, out);
<a name="l02930"></a>02930             }
<a name="l02931"></a>02931           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (length == 2*word_size)
<a name="l02932"></a>02932             {
<a name="l02933"></a>02933               <a class="code" href="regcache_8c.html#a7056a5ea585aa0938893952f52d95e2e">regcache_cooked_read</a> (regcache, <a class="code" href="s390-tdep_8h.html#a2ba9018e7c0f7f8fc683427061fad546">S390_R2_REGNUM</a>, out);
<a name="l02934"></a>02934               <a class="code" href="regcache_8c.html#a7056a5ea585aa0938893952f52d95e2e">regcache_cooked_read</a> (regcache, <a class="code" href="s390-tdep_8h.html#ab3e5162af7f59bfec8e024377852a323">S390_R3_REGNUM</a>, out + word_size);
<a name="l02935"></a>02935             }
<a name="l02936"></a>02936           <span class="keywordflow">else</span>
<a name="l02937"></a>02937             <a class="code" href="common-utils_8h.html#aa14285d9d3d4171016ef9cf09447e8bb">internal_error</a> (__FILE__, __LINE__, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;invalid return type&quot;</span>));
<a name="l02938"></a>02938           <span class="keywordflow">break</span>;
<a name="l02939"></a>02939 
<a name="l02940"></a>02940         <span class="keywordflow">case</span> <a class="code" href="defs_8h.html#ad73ff2db888df8f297b907f7093082a5a1fab6a0bfd44af88ba17a143673dc937">RETURN_VALUE_STRUCT_CONVENTION</a>:
<a name="l02941"></a>02941           <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Function return value unknown.&quot;</span>));
<a name="l02942"></a>02942           <span class="keywordflow">break</span>;
<a name="l02943"></a>02943         }
<a name="l02944"></a>02944     }
<a name="l02945"></a>02945 
<a name="l02946"></a>02946   <span class="keywordflow">return</span> rvc;
<a name="l02947"></a>02947 }
<a name="l02948"></a>02948 
<a name="l02949"></a>02949 
<a name="l02950"></a>02950 <span class="comment">/* Breakpoints.  */</span>
<a name="l02951"></a>02951 
<a name="l02952"></a>02952 <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *
<a name="l02953"></a><a class="code" href="s390-tdep_8c.html#ac10a1bdf108711d222ccd6ec49b7813b">02953</a> <a class="code" href="s390-tdep_8c.html#ac10a1bdf108711d222ccd6ec49b7813b">s390_breakpoint_from_pc</a> (<span class="keyword">struct</span> gdbarch *gdbarch,
<a name="l02954"></a>02954                          <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> *pcptr, <span class="keywordtype">int</span> *lenptr)
<a name="l02955"></a>02955 {
<a name="l02956"></a>02956   <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> <a class="code" href="structbreakpoint.html">breakpoint</a>[] = { 0x0, 0x1 };
<a name="l02957"></a>02957 
<a name="l02958"></a>02958   *lenptr = <span class="keyword">sizeof</span> (breakpoint);
<a name="l02959"></a>02959   <span class="keywordflow">return</span> breakpoint;
<a name="l02960"></a>02960 }
<a name="l02961"></a>02961 
<a name="l02962"></a>02962 
<a name="l02963"></a>02963 <span class="comment">/* Address handling.  */</span>
<a name="l02964"></a>02964 
<a name="l02965"></a>02965 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l02966"></a><a class="code" href="s390-tdep_8c.html#a368e611864a8c2de77d437c2b7b6b5dd">02966</a> <a class="code" href="s390-tdep_8c.html#a368e611864a8c2de77d437c2b7b6b5dd">s390_addr_bits_remove</a> (<span class="keyword">struct</span> gdbarch *gdbarch, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="structframe__info.html#a2467bb732908d95c5632a45cf1d4439a">addr</a>)
<a name="l02967"></a>02967 {
<a name="l02968"></a>02968   <span class="keywordflow">return</span> addr &amp; 0x7fffffff;
<a name="l02969"></a>02969 }
<a name="l02970"></a>02970 
<a name="l02971"></a>02971 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02972"></a><a class="code" href="s390-tdep_8c.html#ae3f5ce641a867dab0e77b57c63f6242d">02972</a> <a class="code" href="s390-tdep_8c.html#ae3f5ce641a867dab0e77b57c63f6242d">s390_address_class_type_flags</a> (<span class="keywordtype">int</span> byte_size, <span class="keywordtype">int</span> dwarf2_addr_class)
<a name="l02973"></a>02973 {
<a name="l02974"></a>02974   <span class="keywordflow">if</span> (byte_size == 4)
<a name="l02975"></a>02975     <span class="keywordflow">return</span> <a class="code" href="gdbtypes_8h.html#a390c31e15117ac7eda1a5d1341967029ae85ffd953771426c2ad732e51d8d0e84">TYPE_INSTANCE_FLAG_ADDRESS_CLASS_1</a>;
<a name="l02976"></a>02976   <span class="keywordflow">else</span>
<a name="l02977"></a>02977     <span class="keywordflow">return</span> 0;
<a name="l02978"></a>02978 }
<a name="l02979"></a>02979 
<a name="l02980"></a>02980 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l02981"></a><a class="code" href="s390-tdep_8c.html#a428f4e5adae77bb4c3764a45d11f9214">02981</a> <a class="code" href="s390-tdep_8c.html#a428f4e5adae77bb4c3764a45d11f9214">s390_address_class_type_flags_to_name</a> (<span class="keyword">struct</span> gdbarch *gdbarch, <span class="keywordtype">int</span> type_flags)
<a name="l02982"></a>02982 {
<a name="l02983"></a>02983   <span class="keywordflow">if</span> (type_flags &amp; <a class="code" href="gdbtypes_8h.html#a390c31e15117ac7eda1a5d1341967029ae85ffd953771426c2ad732e51d8d0e84">TYPE_INSTANCE_FLAG_ADDRESS_CLASS_1</a>)
<a name="l02984"></a>02984     <span class="keywordflow">return</span> <span class="stringliteral">&quot;mode32&quot;</span>;
<a name="l02985"></a>02985   <span class="keywordflow">else</span>
<a name="l02986"></a>02986     <span class="keywordflow">return</span> NULL;
<a name="l02987"></a>02987 }
<a name="l02988"></a>02988 
<a name="l02989"></a>02989 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02990"></a><a class="code" href="s390-tdep_8c.html#a6fa9d13c3f011d2a5ead83466ff77048">02990</a> <a class="code" href="s390-tdep_8c.html#a6fa9d13c3f011d2a5ead83466ff77048">s390_address_class_name_to_type_flags</a> (<span class="keyword">struct</span> gdbarch *gdbarch,
<a name="l02991"></a>02991                                        <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="aarch64-tdep_8c.html#acc128f98d9ceca227038c771308eff39">name</a>,
<a name="l02992"></a>02992                                        <span class="keywordtype">int</span> *type_flags_ptr)
<a name="l02993"></a>02993 {
<a name="l02994"></a>02994   <span class="keywordflow">if</span> (strcmp (name, <span class="stringliteral">&quot;mode32&quot;</span>) == 0)
<a name="l02995"></a>02995     {
<a name="l02996"></a>02996       *type_flags_ptr = <a class="code" href="gdbtypes_8h.html#a390c31e15117ac7eda1a5d1341967029ae85ffd953771426c2ad732e51d8d0e84">TYPE_INSTANCE_FLAG_ADDRESS_CLASS_1</a>;
<a name="l02997"></a>02997       <span class="keywordflow">return</span> 1;
<a name="l02998"></a>02998     }
<a name="l02999"></a>02999   <span class="keywordflow">else</span>
<a name="l03000"></a>03000     <span class="keywordflow">return</span> 0;
<a name="l03001"></a>03001 }
<a name="l03002"></a>03002 
<a name="l03003"></a>03003 <span class="comment">/* Implementation of `gdbarch_stap_is_single_operand&#39;, as defined in</span>
<a name="l03004"></a>03004 <span class="comment">   gdbarch.h.  */</span>
<a name="l03005"></a>03005 
<a name="l03006"></a>03006 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l03007"></a><a class="code" href="s390-tdep_8c.html#a4f2b59df3f3b8e1127083287d525325b">03007</a> <a class="code" href="s390-tdep_8c.html#a4f2b59df3f3b8e1127083287d525325b">s390_stap_is_single_operand</a> (<span class="keyword">struct</span> gdbarch *gdbarch, <span class="keyword">const</span> <span class="keywordtype">char</span> *s)
<a name="l03008"></a>03008 {
<a name="l03009"></a>03009   <span class="keywordflow">return</span> ((isdigit (*s) &amp;&amp; s[1] == <span class="charliteral">&#39;(&#39;</span> &amp;&amp; s[2] == <span class="charliteral">&#39;%&#39;</span>) <span class="comment">/* Displacement</span>
<a name="l03010"></a>03010 <span class="comment">                                                          or indirection.  */</span>
<a name="l03011"></a>03011           || *s == <span class="charliteral">&#39;%&#39;</span> <span class="comment">/* Register access.  */</span>
<a name="l03012"></a>03012           || isdigit (*s)); <span class="comment">/* Literal number.  */</span>
<a name="l03013"></a>03013 }
<a name="l03014"></a>03014 
<a name="l03015"></a>03015 <span class="comment">/* Set up gdbarch struct.  */</span>
<a name="l03016"></a>03016 
<a name="l03017"></a>03017 <span class="keyword">static</span> <span class="keyword">struct </span>gdbarch *
<a name="l03018"></a><a class="code" href="s390-tdep_8c.html#a311f689c9de9c1d2def221f443a03d19">03018</a> <a class="code" href="s390-tdep_8c.html#a311f689c9de9c1d2def221f443a03d19">s390_gdbarch_init</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch__info.html">gdbarch_info</a> info, <span class="keyword">struct</span> <a class="code" href="structgdbarch__list.html">gdbarch_list</a> *arches)
<a name="l03019"></a>03019 {
<a name="l03020"></a>03020   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structtarget__desc.html">target_desc</a> *tdesc = info.<a class="code" href="structgdbarch__info.html#ac92a2218499c8147be64826e303d688e">target_desc</a>;
<a name="l03021"></a>03021   <span class="keyword">struct </span><a class="code" href="structtdesc__arch__data.html">tdesc_arch_data</a> *<a class="code" href="target-descriptions_8c.html#aaa20fcb5e0c18b68c23e48d158440bb8">tdesc_data</a> = NULL;
<a name="l03022"></a>03022   <span class="keyword">struct </span>gdbarch *gdbarch;
<a name="l03023"></a>03023   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep;
<a name="l03024"></a>03024   <span class="keywordtype">int</span> tdep_abi;
<a name="l03025"></a>03025   <span class="keywordtype">int</span> have_upper = 0;
<a name="l03026"></a>03026   <span class="keywordtype">int</span> have_linux_v1 = 0;
<a name="l03027"></a>03027   <span class="keywordtype">int</span> have_linux_v2 = 0;
<a name="l03028"></a>03028   <span class="keywordtype">int</span> first_pseudo_reg, last_pseudo_reg;
<a name="l03029"></a>03029 
<a name="l03030"></a>03030   <span class="comment">/* Default ABI and register size.  */</span>
<a name="l03031"></a>03031   <span class="keywordflow">switch</span> (info.<a class="code" href="structgdbarch__info.html#ad42b7b45e0927c2482ba178db64b2fa7">bfd_arch_info</a>-&gt;mach)
<a name="l03032"></a>03032     {
<a name="l03033"></a>03033     <span class="keywordflow">case</span> bfd_mach_s390_31:
<a name="l03034"></a>03034       tdep_abi = <a class="code" href="structgdbarch__tdep.html#a4a7b38aa57a0b6f6b0568804ce76aed2accc799a01df359add5c661b6e78cb2d6">ABI_LINUX_S390</a>;
<a name="l03035"></a>03035       <span class="keywordflow">break</span>;
<a name="l03036"></a>03036 
<a name="l03037"></a>03037     <span class="keywordflow">case</span> bfd_mach_s390_64:
<a name="l03038"></a>03038       tdep_abi = <a class="code" href="structgdbarch__tdep.html#a4a7b38aa57a0b6f6b0568804ce76aed2a755c4da50d780771b5a0b5ee11b7f8b8">ABI_LINUX_ZSERIES</a>;
<a name="l03039"></a>03039       <span class="keywordflow">break</span>;
<a name="l03040"></a>03040 
<a name="l03041"></a>03041     <span class="keywordflow">default</span>:
<a name="l03042"></a>03042       <span class="keywordflow">return</span> NULL;
<a name="l03043"></a>03043     }
<a name="l03044"></a>03044 
<a name="l03045"></a>03045   <span class="comment">/* Use default target description if none provided by the target.  */</span>
<a name="l03046"></a>03046   <span class="keywordflow">if</span> (!<a class="code" href="target-descriptions_8c.html#a54a8994f193cc0a0cf6dbb6d771becf2">tdesc_has_registers</a> (tdesc))
<a name="l03047"></a>03047     {
<a name="l03048"></a>03048       <span class="keywordflow">if</span> (tdep_abi == <a class="code" href="structgdbarch__tdep.html#a4a7b38aa57a0b6f6b0568804ce76aed2accc799a01df359add5c661b6e78cb2d6">ABI_LINUX_S390</a>)
<a name="l03049"></a>03049         tdesc = <a class="code" href="s390-linux32_8c.html#acc9636fce7346511b7d66ed484f320e9">tdesc_s390_linux32</a>;
<a name="l03050"></a>03050       <span class="keywordflow">else</span>
<a name="l03051"></a>03051         tdesc = <a class="code" href="s390x-linux64_8c.html#afedc508403edafc835651211b8129da6">tdesc_s390x_linux64</a>;
<a name="l03052"></a>03052     }
<a name="l03053"></a>03053 
<a name="l03054"></a>03054   <span class="comment">/* Check any target description for validity.  */</span>
<a name="l03055"></a>03055   <span class="keywordflow">if</span> (<a class="code" href="target-descriptions_8c.html#a54a8994f193cc0a0cf6dbb6d771becf2">tdesc_has_registers</a> (tdesc))
<a name="l03056"></a>03056     {
<a name="l03057"></a>03057       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> gprs[] = {
<a name="l03058"></a>03058         <span class="stringliteral">&quot;r0&quot;</span>, <span class="stringliteral">&quot;r1&quot;</span>, <span class="stringliteral">&quot;r2&quot;</span>, <span class="stringliteral">&quot;r3&quot;</span>, <span class="stringliteral">&quot;r4&quot;</span>, <span class="stringliteral">&quot;r5&quot;</span>, <span class="stringliteral">&quot;r6&quot;</span>, <span class="stringliteral">&quot;r7&quot;</span>,
<a name="l03059"></a>03059         <span class="stringliteral">&quot;r8&quot;</span>, <span class="stringliteral">&quot;r9&quot;</span>, <span class="stringliteral">&quot;r10&quot;</span>, <span class="stringliteral">&quot;r11&quot;</span>, <span class="stringliteral">&quot;r12&quot;</span>, <span class="stringliteral">&quot;r13&quot;</span>, <span class="stringliteral">&quot;r14&quot;</span>, <span class="stringliteral">&quot;r15&quot;</span>
<a name="l03060"></a>03060       };
<a name="l03061"></a>03061       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> fprs[] = {
<a name="l03062"></a>03062         <span class="stringliteral">&quot;f0&quot;</span>, <span class="stringliteral">&quot;f1&quot;</span>, <span class="stringliteral">&quot;f2&quot;</span>, <span class="stringliteral">&quot;f3&quot;</span>, <span class="stringliteral">&quot;f4&quot;</span>, <span class="stringliteral">&quot;f5&quot;</span>, <span class="stringliteral">&quot;f6&quot;</span>, <span class="stringliteral">&quot;f7&quot;</span>,
<a name="l03063"></a>03063         <span class="stringliteral">&quot;f8&quot;</span>, <span class="stringliteral">&quot;f9&quot;</span>, <span class="stringliteral">&quot;f10&quot;</span>, <span class="stringliteral">&quot;f11&quot;</span>, <span class="stringliteral">&quot;f12&quot;</span>, <span class="stringliteral">&quot;f13&quot;</span>, <span class="stringliteral">&quot;f14&quot;</span>, <span class="stringliteral">&quot;f15&quot;</span>
<a name="l03064"></a>03064       };
<a name="l03065"></a>03065       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> acrs[] = {
<a name="l03066"></a>03066         <span class="stringliteral">&quot;acr0&quot;</span>, <span class="stringliteral">&quot;acr1&quot;</span>, <span class="stringliteral">&quot;acr2&quot;</span>, <span class="stringliteral">&quot;acr3&quot;</span>, <span class="stringliteral">&quot;acr4&quot;</span>, <span class="stringliteral">&quot;acr5&quot;</span>, <span class="stringliteral">&quot;acr6&quot;</span>, <span class="stringliteral">&quot;acr7&quot;</span>,
<a name="l03067"></a>03067         <span class="stringliteral">&quot;acr8&quot;</span>, <span class="stringliteral">&quot;acr9&quot;</span>, <span class="stringliteral">&quot;acr10&quot;</span>, <span class="stringliteral">&quot;acr11&quot;</span>, <span class="stringliteral">&quot;acr12&quot;</span>, <span class="stringliteral">&quot;acr13&quot;</span>, <span class="stringliteral">&quot;acr14&quot;</span>, <span class="stringliteral">&quot;acr15&quot;</span>
<a name="l03068"></a>03068       };
<a name="l03069"></a>03069       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> gprs_lower[] = {
<a name="l03070"></a>03070         <span class="stringliteral">&quot;r0l&quot;</span>, <span class="stringliteral">&quot;r1l&quot;</span>, <span class="stringliteral">&quot;r2l&quot;</span>, <span class="stringliteral">&quot;r3l&quot;</span>, <span class="stringliteral">&quot;r4l&quot;</span>, <span class="stringliteral">&quot;r5l&quot;</span>, <span class="stringliteral">&quot;r6l&quot;</span>, <span class="stringliteral">&quot;r7l&quot;</span>,
<a name="l03071"></a>03071         <span class="stringliteral">&quot;r8l&quot;</span>, <span class="stringliteral">&quot;r9l&quot;</span>, <span class="stringliteral">&quot;r10l&quot;</span>, <span class="stringliteral">&quot;r11l&quot;</span>, <span class="stringliteral">&quot;r12l&quot;</span>, <span class="stringliteral">&quot;r13l&quot;</span>, <span class="stringliteral">&quot;r14l&quot;</span>, <span class="stringliteral">&quot;r15l&quot;</span>
<a name="l03072"></a>03072       };
<a name="l03073"></a>03073       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> gprs_upper[] = {
<a name="l03074"></a>03074         <span class="stringliteral">&quot;r0h&quot;</span>, <span class="stringliteral">&quot;r1h&quot;</span>, <span class="stringliteral">&quot;r2h&quot;</span>, <span class="stringliteral">&quot;r3h&quot;</span>, <span class="stringliteral">&quot;r4h&quot;</span>, <span class="stringliteral">&quot;r5h&quot;</span>, <span class="stringliteral">&quot;r6h&quot;</span>, <span class="stringliteral">&quot;r7h&quot;</span>,
<a name="l03075"></a>03075         <span class="stringliteral">&quot;r8h&quot;</span>, <span class="stringliteral">&quot;r9h&quot;</span>, <span class="stringliteral">&quot;r10h&quot;</span>, <span class="stringliteral">&quot;r11h&quot;</span>, <span class="stringliteral">&quot;r12h&quot;</span>, <span class="stringliteral">&quot;r13h&quot;</span>, <span class="stringliteral">&quot;r14h&quot;</span>, <span class="stringliteral">&quot;r15h&quot;</span>
<a name="l03076"></a>03076       };
<a name="l03077"></a>03077       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> tdb_regs[] = {
<a name="l03078"></a>03078         <span class="stringliteral">&quot;tdb0&quot;</span>, <span class="stringliteral">&quot;tac&quot;</span>, <span class="stringliteral">&quot;tct&quot;</span>, <span class="stringliteral">&quot;atia&quot;</span>,
<a name="l03079"></a>03079         <span class="stringliteral">&quot;tr0&quot;</span>, <span class="stringliteral">&quot;tr1&quot;</span>, <span class="stringliteral">&quot;tr2&quot;</span>, <span class="stringliteral">&quot;tr3&quot;</span>, <span class="stringliteral">&quot;tr4&quot;</span>, <span class="stringliteral">&quot;tr5&quot;</span>, <span class="stringliteral">&quot;tr6&quot;</span>, <span class="stringliteral">&quot;tr7&quot;</span>,
<a name="l03080"></a>03080         <span class="stringliteral">&quot;tr8&quot;</span>, <span class="stringliteral">&quot;tr9&quot;</span>, <span class="stringliteral">&quot;tr10&quot;</span>, <span class="stringliteral">&quot;tr11&quot;</span>, <span class="stringliteral">&quot;tr12&quot;</span>, <span class="stringliteral">&quot;tr13&quot;</span>, <span class="stringliteral">&quot;tr14&quot;</span>, <span class="stringliteral">&quot;tr15&quot;</span>
<a name="l03081"></a>03081       };
<a name="l03082"></a>03082       <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structtdesc__feature.html">tdesc_feature</a> *feature;
<a name="l03083"></a>03083       <span class="keywordtype">int</span> i, valid_p = 1;
<a name="l03084"></a>03084 
<a name="l03085"></a>03085       feature = <a class="code" href="target-descriptions_8c.html#abc4d5a3eeb4bfc94bd14ac763516e938">tdesc_find_feature</a> (tdesc, <span class="stringliteral">&quot;org.gnu.gdb.s390.core&quot;</span>);
<a name="l03086"></a>03086       <span class="keywordflow">if</span> (feature == NULL)
<a name="l03087"></a>03087         <span class="keywordflow">return</span> NULL;
<a name="l03088"></a>03088 
<a name="l03089"></a>03089       tdesc_data = <a class="code" href="target-descriptions_8c.html#ae51f8476cf65c9be4b3ed6a83aff1671">tdesc_data_alloc</a> ();
<a name="l03090"></a>03090 
<a name="l03091"></a>03091       valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data,
<a name="l03092"></a>03092                                           <a class="code" href="s390-tdep_8h.html#a2e5117a5450cef1e8280cb8f68c64145">S390_PSWM_REGNUM</a>, <span class="stringliteral">&quot;pswm&quot;</span>);
<a name="l03093"></a>03093       valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data,
<a name="l03094"></a>03094                                           <a class="code" href="s390-tdep_8h.html#a0ce4efe91c3fcbfe21e8a67f77057258">S390_PSWA_REGNUM</a>, <span class="stringliteral">&quot;pswa&quot;</span>);
<a name="l03095"></a>03095 
<a name="l03096"></a>03096       <span class="keywordflow">if</span> (<a class="code" href="target-descriptions_8c.html#aa786fd075f843e8cdaf2f482685fc47c">tdesc_unnumbered_register</a> (feature, <span class="stringliteral">&quot;r0&quot;</span>))
<a name="l03097"></a>03097         {
<a name="l03098"></a>03098           <span class="keywordflow">for</span> (i = 0; i &lt; 16; i++)
<a name="l03099"></a>03099             valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data,
<a name="l03100"></a>03100                                                 <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a> + i, gprs[i]);
<a name="l03101"></a>03101         }
<a name="l03102"></a>03102       <span class="keywordflow">else</span>
<a name="l03103"></a>03103         {
<a name="l03104"></a>03104           have_upper = 1;
<a name="l03105"></a>03105 
<a name="l03106"></a>03106           <span class="keywordflow">for</span> (i = 0; i &lt; 16; i++)
<a name="l03107"></a>03107             valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data,
<a name="l03108"></a>03108                                                 <a class="code" href="s390-tdep_8h.html#ac54ba068884c3897bfeda083e3bd1257">S390_R0_REGNUM</a> + i,
<a name="l03109"></a>03109                                                 gprs_lower[i]);
<a name="l03110"></a>03110           <span class="keywordflow">for</span> (i = 0; i &lt; 16; i++)
<a name="l03111"></a>03111             valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data,
<a name="l03112"></a>03112                                                 <a class="code" href="s390-tdep_8h.html#a1456fa06846f2c14417759e95ab5c493">S390_R0_UPPER_REGNUM</a> + i,
<a name="l03113"></a>03113                                                 gprs_upper[i]);
<a name="l03114"></a>03114         }
<a name="l03115"></a>03115 
<a name="l03116"></a>03116       feature = <a class="code" href="target-descriptions_8c.html#abc4d5a3eeb4bfc94bd14ac763516e938">tdesc_find_feature</a> (tdesc, <span class="stringliteral">&quot;org.gnu.gdb.s390.fpr&quot;</span>);
<a name="l03117"></a>03117       <span class="keywordflow">if</span> (feature == NULL)
<a name="l03118"></a>03118         {
<a name="l03119"></a>03119           <a class="code" href="target-descriptions_8c.html#a873586b621fb2a8ab911f5506cfd9bc7">tdesc_data_cleanup</a> (tdesc_data);
<a name="l03120"></a>03120           <span class="keywordflow">return</span> NULL;
<a name="l03121"></a>03121         }
<a name="l03122"></a>03122 
<a name="l03123"></a>03123       valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data,
<a name="l03124"></a>03124                                           <a class="code" href="s390-tdep_8h.html#ac9d653aef87ad7c8c68547566a40f654">S390_FPC_REGNUM</a>, <span class="stringliteral">&quot;fpc&quot;</span>);
<a name="l03125"></a>03125       <span class="keywordflow">for</span> (i = 0; i &lt; 16; i++)
<a name="l03126"></a>03126         valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data,
<a name="l03127"></a>03127                                             <a class="code" href="s390-tdep_8h.html#a49c471b21ebc6e58b3db78912901bbfc">S390_F0_REGNUM</a> + i, fprs[i]);
<a name="l03128"></a>03128 
<a name="l03129"></a>03129       feature = <a class="code" href="target-descriptions_8c.html#abc4d5a3eeb4bfc94bd14ac763516e938">tdesc_find_feature</a> (tdesc, <span class="stringliteral">&quot;org.gnu.gdb.s390.acr&quot;</span>);
<a name="l03130"></a>03130       <span class="keywordflow">if</span> (feature == NULL)
<a name="l03131"></a>03131         {
<a name="l03132"></a>03132           <a class="code" href="target-descriptions_8c.html#a873586b621fb2a8ab911f5506cfd9bc7">tdesc_data_cleanup</a> (tdesc_data);
<a name="l03133"></a>03133           <span class="keywordflow">return</span> NULL;
<a name="l03134"></a>03134         }
<a name="l03135"></a>03135 
<a name="l03136"></a>03136       <span class="keywordflow">for</span> (i = 0; i &lt; 16; i++)
<a name="l03137"></a>03137         valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data,
<a name="l03138"></a>03138                                             <a class="code" href="s390-tdep_8h.html#ac07fc6e371b3155e859a66c1d7f6a770">S390_A0_REGNUM</a> + i, acrs[i]);
<a name="l03139"></a>03139 
<a name="l03140"></a>03140       <span class="comment">/* Optional GNU/Linux-specific &quot;registers&quot;.  */</span>
<a name="l03141"></a>03141       feature = <a class="code" href="target-descriptions_8c.html#abc4d5a3eeb4bfc94bd14ac763516e938">tdesc_find_feature</a> (tdesc, <span class="stringliteral">&quot;org.gnu.gdb.s390.linux&quot;</span>);
<a name="l03142"></a>03142       <span class="keywordflow">if</span> (feature)
<a name="l03143"></a>03143         {
<a name="l03144"></a>03144           <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data,
<a name="l03145"></a>03145                                    <a class="code" href="s390-tdep_8h.html#ad40a364ec9499804a5fc5f0c3e25a86a">S390_ORIG_R2_REGNUM</a>, <span class="stringliteral">&quot;orig_r2&quot;</span>);
<a name="l03146"></a>03146 
<a name="l03147"></a>03147           <span class="keywordflow">if</span> (<a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data,
<a name="l03148"></a>03148                                        <a class="code" href="s390-tdep_8h.html#a0b8a8d82744c2380c0c451f4672efdb9">S390_LAST_BREAK_REGNUM</a>, <span class="stringliteral">&quot;last_break&quot;</span>))
<a name="l03149"></a>03149             have_linux_v1 = 1;
<a name="l03150"></a>03150 
<a name="l03151"></a>03151           <span class="keywordflow">if</span> (<a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data,
<a name="l03152"></a>03152                                        <a class="code" href="s390-tdep_8h.html#a9486315bcc2b637872c7ffddd7c0eb01">S390_SYSTEM_CALL_REGNUM</a>, <span class="stringliteral">&quot;system_call&quot;</span>))
<a name="l03153"></a>03153             have_linux_v2 = 1;
<a name="l03154"></a>03154 
<a name="l03155"></a>03155           <span class="keywordflow">if</span> (have_linux_v2 &gt; have_linux_v1)
<a name="l03156"></a>03156             valid_p = 0;
<a name="l03157"></a>03157         }
<a name="l03158"></a>03158 
<a name="l03159"></a>03159       <span class="comment">/* Transaction diagnostic block.  */</span>
<a name="l03160"></a>03160       feature = <a class="code" href="target-descriptions_8c.html#abc4d5a3eeb4bfc94bd14ac763516e938">tdesc_find_feature</a> (tdesc, <span class="stringliteral">&quot;org.gnu.gdb.s390.tdb&quot;</span>);
<a name="l03161"></a>03161       <span class="keywordflow">if</span> (feature)
<a name="l03162"></a>03162         {
<a name="l03163"></a>03163           <span class="keywordflow">for</span> (i = 0; i &lt; ARRAY_SIZE (tdb_regs); i++)
<a name="l03164"></a>03164             valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data,
<a name="l03165"></a>03165                                                 <a class="code" href="s390-tdep_8h.html#ae021c40f8b76519f4274b94f6e84d250">S390_TDB_DWORD0_REGNUM</a> + i,
<a name="l03166"></a>03166                                                 tdb_regs[i]);
<a name="l03167"></a>03167         }
<a name="l03168"></a>03168 
<a name="l03169"></a>03169       <span class="keywordflow">if</span> (!valid_p)
<a name="l03170"></a>03170         {
<a name="l03171"></a>03171           <a class="code" href="target-descriptions_8c.html#a873586b621fb2a8ab911f5506cfd9bc7">tdesc_data_cleanup</a> (tdesc_data);
<a name="l03172"></a>03172           <span class="keywordflow">return</span> NULL;
<a name="l03173"></a>03173         }
<a name="l03174"></a>03174     }
<a name="l03175"></a>03175 
<a name="l03176"></a>03176   <span class="comment">/* Find a candidate among extant architectures.  */</span>
<a name="l03177"></a>03177   <span class="keywordflow">for</span> (arches = <a class="code" href="gdbarch_8c.html#aa3ea1c25a21a533dfd0d924a7d9778e4">gdbarch_list_lookup_by_info</a> (arches, &amp;info);
<a name="l03178"></a>03178        arches != NULL;
<a name="l03179"></a>03179        arches = <a class="code" href="gdbarch_8c.html#aa3ea1c25a21a533dfd0d924a7d9778e4">gdbarch_list_lookup_by_info</a> (arches-&gt;<a class="code" href="structgdbarch__list.html#a9da6f84112797b67d5d8e7b8d4e26b14">next</a>, &amp;info))
<a name="l03180"></a>03180     {
<a name="l03181"></a>03181       tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (arches-&gt;<a class="code" href="structgdbarch__list.html#a6c51da8c4c95249704dfe18394fd08f9">gdbarch</a>);
<a name="l03182"></a>03182       <span class="keywordflow">if</span> (!tdep)
<a name="l03183"></a>03183         <span class="keywordflow">continue</span>;
<a name="l03184"></a>03184       <span class="keywordflow">if</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af1e7479196010341d589e5d793b4c7b1">abi</a> != tdep_abi)
<a name="l03185"></a>03185         <span class="keywordflow">continue</span>;
<a name="l03186"></a>03186       <span class="keywordflow">if</span> ((tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a68c8669a924fc7e5703c7aefcdb78ed0">gpr_full_regnum</a> != -1) != have_upper)
<a name="l03187"></a>03187         <span class="keywordflow">continue</span>;
<a name="l03188"></a>03188       <span class="keywordflow">if</span> (tdesc_data != NULL)
<a name="l03189"></a>03189         <a class="code" href="target-descriptions_8c.html#a873586b621fb2a8ab911f5506cfd9bc7">tdesc_data_cleanup</a> (tdesc_data);
<a name="l03190"></a>03190       <span class="keywordflow">return</span> arches-&gt;<a class="code" href="structgdbarch__list.html#a6c51da8c4c95249704dfe18394fd08f9">gdbarch</a>;
<a name="l03191"></a>03191     }
<a name="l03192"></a>03192 
<a name="l03193"></a>03193   <span class="comment">/* Otherwise create a new gdbarch for the specified machine type.  */</span>
<a name="l03194"></a>03194   tdep = <a class="code" href="defs_8h.html#a4c67016fda510e35550be38ad53c44d1">XCALLOC</a> (1, <span class="keyword">struct</span> <a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a>);
<a name="l03195"></a>03195   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af1e7479196010341d589e5d793b4c7b1">abi</a> = tdep_abi;
<a name="l03196"></a>03196   gdbarch = <a class="code" href="gdbarch_8c.html#a9e0b0979fa2cb7439f41f66deda8dec5">gdbarch_alloc</a> (&amp;info, tdep);
<a name="l03197"></a>03197 
<a name="l03198"></a>03198   <a class="code" href="gdbarch_8c.html#a5fad1810477fcfdccf7604c41fe299b8">set_gdbarch_believe_pcc_promotion</a> (gdbarch, 0);
<a name="l03199"></a>03199   <a class="code" href="gdbarch_8c.html#a0863fa86a9cb752711cca456e3f829b7">set_gdbarch_char_signed</a> (gdbarch, 0);
<a name="l03200"></a>03200 
<a name="l03201"></a>03201   <span class="comment">/* S/390 GNU/Linux uses either 64-bit or 128-bit long doubles.</span>
<a name="l03202"></a>03202 <span class="comment">     We can safely let them default to 128-bit, since the debug info</span>
<a name="l03203"></a>03203 <span class="comment">     will give the size of type actually used in each case.  */</span>
<a name="l03204"></a>03204   <a class="code" href="gdbarch_8c.html#ada51ef491e1e7d747c9a974639adf84d">set_gdbarch_long_double_bit</a> (gdbarch, 128);
<a name="l03205"></a>03205   <a class="code" href="gdbarch_8c.html#a882287a38d1557dce54fdb2172756b2f">set_gdbarch_long_double_format</a> (gdbarch, <a class="code" href="gdbtypes_8c.html#a1ea1201b05023ea2babf75d55406e9c4">floatformats_ia64_quad</a>);
<a name="l03206"></a>03206 
<a name="l03207"></a>03207   <span class="comment">/* Amount PC must be decremented by after a breakpoint.  This is</span>
<a name="l03208"></a>03208 <span class="comment">     often the number of bytes returned by gdbarch_breakpoint_from_pc but not</span>
<a name="l03209"></a>03209 <span class="comment">     always.  */</span>
<a name="l03210"></a>03210   <a class="code" href="gdbarch_8c.html#a59e0f429a0c89806415bb5e1b7367bb8">set_gdbarch_decr_pc_after_break</a> (gdbarch, 2);
<a name="l03211"></a>03211   <span class="comment">/* Stack grows downward.  */</span>
<a name="l03212"></a>03212   <a class="code" href="gdbarch_8c.html#ad66381ed135b13aa5635f0485211ca71">set_gdbarch_inner_than</a> (gdbarch, <a class="code" href="arch-utils_8c.html#aaceae1c07203f3091df647f813b9f20e">core_addr_lessthan</a>);
<a name="l03213"></a>03213   <a class="code" href="gdbarch_8c.html#ad738cdf37fa27f4cf3642107cadf61d3">set_gdbarch_breakpoint_from_pc</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#ac10a1bdf108711d222ccd6ec49b7813b">s390_breakpoint_from_pc</a>);
<a name="l03214"></a>03214   <a class="code" href="gdbarch_8c.html#a841509ae0070f2f12aa9b3b7fd52b92f">set_gdbarch_skip_prologue</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#ab1be58734527952a9b9cab40f1dc5db5">s390_skip_prologue</a>);
<a name="l03215"></a>03215   <a class="code" href="gdbarch_8c.html#ab1ffbc0d23252e88823c50139b8464fb">set_gdbarch_in_function_epilogue_p</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#a5b6967cea54d26e5d33a862df5d12cb9">s390_in_function_epilogue_p</a>);
<a name="l03216"></a>03216 
<a name="l03217"></a>03217   <a class="code" href="gdbarch_8c.html#ad8417c5d66cf04d0587f58f82de94c48">set_gdbarch_num_regs</a> (gdbarch, <a class="code" href="s390-tdep_8h.html#a8742e6e8c0d755dc761f9da2e92cff80">S390_NUM_REGS</a>);
<a name="l03218"></a>03218   <a class="code" href="gdbarch_8c.html#a81a92a88a67093d18e59fd5650fda352">set_gdbarch_sp_regnum</a> (gdbarch, <a class="code" href="s390-tdep_8h.html#a854b3d5c812c59b736f40c1210d4bf8a">S390_SP_REGNUM</a>);
<a name="l03219"></a>03219   <a class="code" href="gdbarch_8c.html#a6d14588097c52c3129cab85a5d9c0eab">set_gdbarch_fp0_regnum</a> (gdbarch, <a class="code" href="s390-tdep_8h.html#a49c471b21ebc6e58b3db78912901bbfc">S390_F0_REGNUM</a>);
<a name="l03220"></a>03220   <a class="code" href="gdbarch_8c.html#abeb6b220ed850a9f2b4a992dfcae9a2b">set_gdbarch_stab_reg_to_regnum</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#aaaf1e18319754b4a4d9f656cc8eb6382">s390_dwarf_reg_to_regnum</a>);
<a name="l03221"></a>03221   <a class="code" href="gdbarch_8c.html#a43ca55f05fcf599681eb376bbc6c8ece">set_gdbarch_dwarf2_reg_to_regnum</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#aaaf1e18319754b4a4d9f656cc8eb6382">s390_dwarf_reg_to_regnum</a>);
<a name="l03222"></a>03222   <a class="code" href="gdbarch_8c.html#a4ac341cc36d8a6d7600408cc4c1443ad">set_gdbarch_value_from_register</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#a47e11bdd150965e64ea0c0c5d853f826">s390_value_from_register</a>);
<a name="l03223"></a>03223   <a class="code" href="gdbarch_8c.html#ab33881224f11fe054d4f4dee5b0d6844">set_gdbarch_regset_from_core_section</a> (gdbarch,
<a name="l03224"></a>03224                                         <a class="code" href="s390-tdep_8c.html#a0af1e7b1edf1d1fe34c026e36c225fb3">s390_regset_from_core_section</a>);
<a name="l03225"></a>03225   <a class="code" href="gdbarch_8c.html#a7a8fc3967566edade385e8c275c6eac0">set_gdbarch_core_read_description</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#aaa5702a56c86c5343d8dc67e50129e05">s390_core_read_description</a>);
<a name="l03226"></a>03226   <a class="code" href="gdbarch_8c.html#acfa939c2dc0a12bbc344cc226a19fa9c">set_gdbarch_cannot_store_register</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#a8471b6dd4ee6980152c103c5093a4f8c">s390_cannot_store_register</a>);
<a name="l03227"></a>03227   <a class="code" href="gdbarch_8c.html#a3209bbcdaee096f4977ef11291f0be48">set_gdbarch_write_pc</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#af7664446969eaaf7cf6ccd920b76e8dd">s390_write_pc</a>);
<a name="l03228"></a>03228   <a class="code" href="gdbarch_8c.html#a99fd57c1a882cf61c413e64028937a1b">set_gdbarch_pseudo_register_read</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#a8b33ab7cebcc3193f7701457daf1b747">s390_pseudo_register_read</a>);
<a name="l03229"></a>03229   <a class="code" href="gdbarch_8c.html#ae463eca1992acf69ff1bc28ed8ca3aea">set_gdbarch_pseudo_register_write</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#ad2e14c4da066c5d446c4ecb0241b426b">s390_pseudo_register_write</a>);
<a name="l03230"></a>03230   <a class="code" href="target-descriptions_8c.html#a48762ce6e7501227a51eebe0b806d711">set_tdesc_pseudo_register_name</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#a2141e5f4af316d7936e363c535ea043f">s390_pseudo_register_name</a>);
<a name="l03231"></a>03231   <a class="code" href="target-descriptions_8c.html#a7adea07f51454b6143e1c49e1baec3bf">set_tdesc_pseudo_register_type</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#a6eb51cc584a966b832c8efe28289e827">s390_pseudo_register_type</a>);
<a name="l03232"></a>03232   <a class="code" href="target-descriptions_8c.html#ae10709c8784206bf8199ca4aefe91fd1">set_tdesc_pseudo_register_reggroup_p</a> (gdbarch,
<a name="l03233"></a>03233                                         <a class="code" href="s390-tdep_8c.html#a478a5eb871a09da97f425ba4ad156301">s390_pseudo_register_reggroup_p</a>);
<a name="l03234"></a>03234   <a class="code" href="target-descriptions_8c.html#a6e7158d012f081cc038d2b5b1b0830ee">tdesc_use_registers</a> (gdbarch, tdesc, tdesc_data);
<a name="l03235"></a>03235 
<a name="l03236"></a>03236   <span class="comment">/* Assign pseudo register numbers.  */</span>
<a name="l03237"></a>03237   first_pseudo_reg = <a class="code" href="gdbarch_8c.html#a69069435754d0b434c7043a21d247325">gdbarch_num_regs</a> (gdbarch);
<a name="l03238"></a>03238   last_pseudo_reg = first_pseudo_reg;
<a name="l03239"></a>03239   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a68c8669a924fc7e5703c7aefcdb78ed0">gpr_full_regnum</a> = -1;
<a name="l03240"></a>03240   <span class="keywordflow">if</span> (have_upper)
<a name="l03241"></a>03241     {
<a name="l03242"></a>03242       tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a68c8669a924fc7e5703c7aefcdb78ed0">gpr_full_regnum</a> = last_pseudo_reg;
<a name="l03243"></a>03243       last_pseudo_reg += 16;
<a name="l03244"></a>03244     }
<a name="l03245"></a>03245   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aaf14dc59eceddbc9a4512ae0ca551cb4">pc_regnum</a> = last_pseudo_reg++;
<a name="l03246"></a>03246   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a2431ca4c0c48ea776a4f55f2d3ecb180">cc_regnum</a> = last_pseudo_reg++;
<a name="l03247"></a>03247   <a class="code" href="gdbarch_8c.html#a8852f70e2afc74953a57521ed08a3381">set_gdbarch_pc_regnum</a> (gdbarch, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aaf14dc59eceddbc9a4512ae0ca551cb4">pc_regnum</a>);
<a name="l03248"></a>03248   <a class="code" href="gdbarch_8c.html#aaf72e08f972ba348d5d28f6b6b8db638">set_gdbarch_num_pseudo_regs</a> (gdbarch, last_pseudo_reg - first_pseudo_reg);
<a name="l03249"></a>03249 
<a name="l03250"></a>03250   <span class="comment">/* Inferior function calls.  */</span>
<a name="l03251"></a>03251   <a class="code" href="gdbarch_8c.html#a853528dceff46211c1bb8c57b77dca31">set_gdbarch_push_dummy_call</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#a0a65259a92b152fd8b540e98cfcbbdd7">s390_push_dummy_call</a>);
<a name="l03252"></a>03252   <a class="code" href="gdbarch_8c.html#a23da982924f904d22d0b58639a48bccf">set_gdbarch_dummy_id</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#afc1d6e358b140523b03da4dc15d16a08">s390_dummy_id</a>);
<a name="l03253"></a>03253   <a class="code" href="gdbarch_8c.html#aff48f6a8b2982831522fc7b3af596654">set_gdbarch_frame_align</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#af8f97e77ab0696838e6fd8906823612f">s390_frame_align</a>);
<a name="l03254"></a>03254   <a class="code" href="gdbarch_8c.html#ad9b13a9323cac027c4b805953b4fff63">set_gdbarch_return_value</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#a34f9cabec7625d8026a8306a64c7105e">s390_return_value</a>);
<a name="l03255"></a>03255 
<a name="l03256"></a>03256   <span class="comment">/* Frame handling.  */</span>
<a name="l03257"></a>03257   <a class="code" href="dwarf2-frame_8c.html#ad49836c98fc45f9fde8518a0f599aff0">dwarf2_frame_set_init_reg</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#a90cdcaab6282495e7f246601fa08826c">s390_dwarf2_frame_init_reg</a>);
<a name="l03258"></a>03258   <a class="code" href="dwarf2-frame_8c.html#a679cc3ed4d7fe7f7ef8558322dbf0214">dwarf2_frame_set_adjust_regnum</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#ab3def1ae926302fa6d3da174f600995b">s390_adjust_frame_regnum</a>);
<a name="l03259"></a>03259   <a class="code" href="dwarf2-frame_8c.html#ab2a0a14bba7f1db72907039eb3356975">dwarf2_append_unwinders</a> (gdbarch);
<a name="l03260"></a>03260   <a class="code" href="frame-base_8c.html#a7a0e0eec5753f66f538b6faca2547fd0">frame_base_append_sniffer</a> (gdbarch, <a class="code" href="dwarf2-frame_8c.html#a56b2c77586117bd2eb7c502262db68ac">dwarf2_frame_base_sniffer</a>);
<a name="l03261"></a>03261   <a class="code" href="frame-unwind_8c.html#afa4de8a130514bfd524d46f32e35a534">frame_unwind_append_unwinder</a> (gdbarch, &amp;s390_stub_frame_unwind);
<a name="l03262"></a>03262   <a class="code" href="frame-unwind_8c.html#afa4de8a130514bfd524d46f32e35a534">frame_unwind_append_unwinder</a> (gdbarch, &amp;s390_sigtramp_frame_unwind);
<a name="l03263"></a>03263   <a class="code" href="frame-unwind_8c.html#afa4de8a130514bfd524d46f32e35a534">frame_unwind_append_unwinder</a> (gdbarch, &amp;s390_frame_unwind);
<a name="l03264"></a>03264   <a class="code" href="frame-base_8c.html#afc9e209b41e14278fb1ab72c1d3c6e5d">frame_base_set_default</a> (gdbarch, &amp;s390_frame_base);
<a name="l03265"></a>03265   <a class="code" href="gdbarch_8c.html#a1974f5f26c09a4cd32165286c3769621">set_gdbarch_unwind_pc</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#acda858b5a2aee2325b35d5254973c879">s390_unwind_pc</a>);
<a name="l03266"></a>03266   <a class="code" href="gdbarch_8c.html#ababd871cc4b5fac1831e52f7331d7572">set_gdbarch_unwind_sp</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#a738bb2d49a8c633ae62d09da14b1f932">s390_unwind_sp</a>);
<a name="l03267"></a>03267 
<a name="l03268"></a>03268   <span class="comment">/* Displaced stepping.  */</span>
<a name="l03269"></a>03269   <a class="code" href="gdbarch_8c.html#a377f439d7b2cc15ed58b05a954cd5984">set_gdbarch_displaced_step_copy_insn</a> (gdbarch,
<a name="l03270"></a>03270                                         <a class="code" href="arch-utils_8c.html#a5fe7425883d9946d1a4b62741158f887">simple_displaced_step_copy_insn</a>);
<a name="l03271"></a>03271   <a class="code" href="gdbarch_8c.html#a172d36c9ff7fbc6903ebbc57971dfb74">set_gdbarch_displaced_step_fixup</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#a2a27e5c9702568cf5a228a22583df1fd">s390_displaced_step_fixup</a>);
<a name="l03272"></a>03272   <a class="code" href="gdbarch_8c.html#a906aad6d29da88f8574e000d1048bc18">set_gdbarch_displaced_step_free_closure</a> (gdbarch,
<a name="l03273"></a>03273                                            <a class="code" href="arch-utils_8c.html#a229f932ac79dc6a79b04970a66c1828f">simple_displaced_step_free_closure</a>);
<a name="l03274"></a>03274   <a class="code" href="gdbarch_8c.html#a58d22760111bd279c9bec892edaae693">set_gdbarch_displaced_step_location</a> (gdbarch,
<a name="l03275"></a>03275                                        <a class="code" href="arch-utils_8c.html#a37f304c4df681be4d0c63afb90e2724c">displaced_step_at_entry_point</a>);
<a name="l03276"></a>03276   <a class="code" href="gdbarch_8c.html#a2bc6e109dc44de5a8ecf843b8304bb90">set_gdbarch_max_insn_length</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#a4c66fa932b211ca014f7b83f66b871e3">S390_MAX_INSTR_SIZE</a>);
<a name="l03277"></a>03277 
<a name="l03278"></a>03278   <span class="comment">/* Note that GNU/Linux is the only OS supported on this</span>
<a name="l03279"></a>03279 <span class="comment">     platform.  */</span>
<a name="l03280"></a>03280   <a class="code" href="linux-tdep_8c.html#a4f8fc8d423c3cbbab4d15bd33388b3e4">linux_init_abi</a> (info, gdbarch);
<a name="l03281"></a>03281 
<a name="l03282"></a>03282   <span class="keywordflow">switch</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af1e7479196010341d589e5d793b4c7b1">abi</a>)
<a name="l03283"></a>03283     {
<a name="l03284"></a>03284     <span class="keywordflow">case</span> ABI_LINUX_S390:
<a name="l03285"></a>03285       tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a0292e4e45fc2986b86c92cd4a66733fd">gregset</a> = &amp;<a class="code" href="s390-tdep_8c.html#a31d5287c45035ac626a1e00354417969">s390_gregset</a>;
<a name="l03286"></a>03286       tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a4e535ed4edd0491e3897078d2fb1bd9e">sizeof_gregset</a> = <a class="code" href="s390-tdep_8h.html#aeae5b306500c9fc3af1c7d3a1e7e75b4">s390_sizeof_gregset</a>;
<a name="l03287"></a>03287       tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af3f6e6595d74dfa5142187feb895bfd5">fpregset</a> = &amp;<a class="code" href="s390-tdep_8c.html#afb6e46d3b70aecef29c1ff2bef40c1b3">s390_fpregset</a>;
<a name="l03288"></a>03288       tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a1914a0a96ba18e752e1f051eaceb903b">sizeof_fpregset</a> = <a class="code" href="s390-tdep_8h.html#a48c8b902b3848eb02f9fa9ec4a93b13f">s390_sizeof_fpregset</a>;
<a name="l03289"></a>03289 
<a name="l03290"></a>03290       <a class="code" href="gdbarch_8c.html#a1e314a0b4b604768d8e16730dd201820">set_gdbarch_addr_bits_remove</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#a368e611864a8c2de77d437c2b7b6b5dd">s390_addr_bits_remove</a>);
<a name="l03291"></a>03291       <a class="code" href="solib-svr4_8c.html#a10d31439da2b63753298b3b83865465e">set_solib_svr4_fetch_link_map_offsets</a>
<a name="l03292"></a>03292         (gdbarch, <a class="code" href="solib-svr4_8c.html#aa94176d616f07f4d2fe239a370103c9f">svr4_ilp32_fetch_link_map_offsets</a>);
<a name="l03293"></a>03293 
<a name="l03294"></a>03294       <span class="keywordflow">if</span> (have_upper)
<a name="l03295"></a>03295         {
<a name="l03296"></a>03296           <span class="keywordflow">if</span> (have_linux_v2)
<a name="l03297"></a>03297             <a class="code" href="gdbarch_8c.html#acfac313b16e13b07a6f1d339cc7a12b3">set_gdbarch_core_regset_sections</a> (gdbarch,
<a name="l03298"></a>03298                                               s390_linux64v2_regset_sections);
<a name="l03299"></a>03299           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (have_linux_v1)
<a name="l03300"></a>03300             <a class="code" href="gdbarch_8c.html#acfac313b16e13b07a6f1d339cc7a12b3">set_gdbarch_core_regset_sections</a> (gdbarch,
<a name="l03301"></a>03301                                               s390_linux64v1_regset_sections);
<a name="l03302"></a>03302           <span class="keywordflow">else</span>
<a name="l03303"></a>03303             <a class="code" href="gdbarch_8c.html#acfac313b16e13b07a6f1d339cc7a12b3">set_gdbarch_core_regset_sections</a> (gdbarch,
<a name="l03304"></a>03304                                               s390_linux64_regset_sections);
<a name="l03305"></a>03305         }
<a name="l03306"></a>03306       <span class="keywordflow">else</span>
<a name="l03307"></a>03307         {
<a name="l03308"></a>03308           <span class="keywordflow">if</span> (have_linux_v2)
<a name="l03309"></a>03309             <a class="code" href="gdbarch_8c.html#acfac313b16e13b07a6f1d339cc7a12b3">set_gdbarch_core_regset_sections</a> (gdbarch,
<a name="l03310"></a>03310                                               s390_linux32v2_regset_sections);
<a name="l03311"></a>03311           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (have_linux_v1)
<a name="l03312"></a>03312             <a class="code" href="gdbarch_8c.html#acfac313b16e13b07a6f1d339cc7a12b3">set_gdbarch_core_regset_sections</a> (gdbarch,
<a name="l03313"></a>03313                                               s390_linux32v1_regset_sections);
<a name="l03314"></a>03314           <span class="keywordflow">else</span>
<a name="l03315"></a>03315             <a class="code" href="gdbarch_8c.html#acfac313b16e13b07a6f1d339cc7a12b3">set_gdbarch_core_regset_sections</a> (gdbarch,
<a name="l03316"></a>03316                                               s390_linux32_regset_sections);
<a name="l03317"></a>03317         }
<a name="l03318"></a>03318       <span class="keywordflow">break</span>;
<a name="l03319"></a>03319 
<a name="l03320"></a>03320     <span class="keywordflow">case</span> ABI_LINUX_ZSERIES:
<a name="l03321"></a>03321       tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a0292e4e45fc2986b86c92cd4a66733fd">gregset</a> = &amp;<a class="code" href="s390-tdep_8c.html#ae7a9b3f6ac266335cfb2b236cccdd0dd">s390x_gregset</a>;
<a name="l03322"></a>03322       tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a4e535ed4edd0491e3897078d2fb1bd9e">sizeof_gregset</a> = <a class="code" href="s390-tdep_8h.html#a5e567d77c9ae80d506debdff8889a482">s390x_sizeof_gregset</a>;
<a name="l03323"></a>03323       tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af3f6e6595d74dfa5142187feb895bfd5">fpregset</a> = &amp;<a class="code" href="s390-tdep_8c.html#afb6e46d3b70aecef29c1ff2bef40c1b3">s390_fpregset</a>;
<a name="l03324"></a>03324       tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a1914a0a96ba18e752e1f051eaceb903b">sizeof_fpregset</a> = <a class="code" href="s390-tdep_8h.html#a48c8b902b3848eb02f9fa9ec4a93b13f">s390_sizeof_fpregset</a>;
<a name="l03325"></a>03325 
<a name="l03326"></a>03326       <a class="code" href="gdbarch_8c.html#ab661d4332c2357c6242d5f3f57f1bc44">set_gdbarch_long_bit</a> (gdbarch, 64);
<a name="l03327"></a>03327       <a class="code" href="gdbarch_8c.html#a00b33f93ffedea6960d0ed4a9d7e1fba">set_gdbarch_long_long_bit</a> (gdbarch, 64);
<a name="l03328"></a>03328       <a class="code" href="gdbarch_8c.html#abaaa21a756f3f8a689513c6df8b47ced">set_gdbarch_ptr_bit</a> (gdbarch, 64);
<a name="l03329"></a>03329       <a class="code" href="solib-svr4_8c.html#a10d31439da2b63753298b3b83865465e">set_solib_svr4_fetch_link_map_offsets</a>
<a name="l03330"></a>03330         (gdbarch, <a class="code" href="solib-svr4_8c.html#afa73bd399745509f874714a9a69a0782">svr4_lp64_fetch_link_map_offsets</a>);
<a name="l03331"></a>03331       <a class="code" href="gdbarch_8c.html#a898dbfb9db4c1761f5d079c2cfd37bec">set_gdbarch_address_class_type_flags</a> (gdbarch,
<a name="l03332"></a>03332                                             <a class="code" href="s390-tdep_8c.html#ae3f5ce641a867dab0e77b57c63f6242d">s390_address_class_type_flags</a>);
<a name="l03333"></a>03333       <a class="code" href="gdbarch_8c.html#a608c51ee7051b7cc9d9b48c1c279590d">set_gdbarch_address_class_type_flags_to_name</a> (gdbarch,
<a name="l03334"></a>03334                                                     <a class="code" href="s390-tdep_8c.html#a428f4e5adae77bb4c3764a45d11f9214">s390_address_class_type_flags_to_name</a>);
<a name="l03335"></a>03335       <a class="code" href="gdbarch_8c.html#a8bdb5c60355bafb9facebaec35809aff">set_gdbarch_address_class_name_to_type_flags</a> (gdbarch,
<a name="l03336"></a>03336                                                     <a class="code" href="s390-tdep_8c.html#a6fa9d13c3f011d2a5ead83466ff77048">s390_address_class_name_to_type_flags</a>);
<a name="l03337"></a>03337 
<a name="l03338"></a>03338       <span class="keywordflow">if</span> (have_linux_v2)
<a name="l03339"></a>03339         <a class="code" href="gdbarch_8c.html#acfac313b16e13b07a6f1d339cc7a12b3">set_gdbarch_core_regset_sections</a> (gdbarch,
<a name="l03340"></a>03340                                           s390x_linux64v2_regset_sections);
<a name="l03341"></a>03341       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (have_linux_v1)
<a name="l03342"></a>03342         <a class="code" href="gdbarch_8c.html#acfac313b16e13b07a6f1d339cc7a12b3">set_gdbarch_core_regset_sections</a> (gdbarch,
<a name="l03343"></a>03343                                           s390x_linux64v1_regset_sections);
<a name="l03344"></a>03344       <span class="keywordflow">else</span>
<a name="l03345"></a>03345         <a class="code" href="gdbarch_8c.html#acfac313b16e13b07a6f1d339cc7a12b3">set_gdbarch_core_regset_sections</a> (gdbarch,
<a name="l03346"></a>03346                                           s390x_linux64_regset_sections);
<a name="l03347"></a>03347       <span class="keywordflow">break</span>;
<a name="l03348"></a>03348     }
<a name="l03349"></a>03349 
<a name="l03350"></a>03350   <a class="code" href="gdbarch_8c.html#a0c9e9e391e44d476b74debefc407e9bb">set_gdbarch_print_insn</a> (gdbarch, print_insn_s390);
<a name="l03351"></a>03351 
<a name="l03352"></a>03352   <a class="code" href="gdbarch_8c.html#a07ccbd7ea452da3be3982cf93d7976c7">set_gdbarch_skip_trampoline_code</a> (gdbarch, <a class="code" href="minsyms_8c.html#a242ce2adf8d22461827406bb8ca63924">find_solib_trampoline_target</a>);
<a name="l03353"></a>03353 
<a name="l03354"></a>03354   <span class="comment">/* Enable TLS support.  */</span>
<a name="l03355"></a>03355   <a class="code" href="gdbarch_8c.html#a5a2e2806f4e83f8090c0d1b459e4e389">set_gdbarch_fetch_tls_load_module_address</a> (gdbarch,
<a name="l03356"></a>03356                                              <a class="code" href="solib-svr4_8c.html#a783de7f3513032bc52a0cd449abea4d7">svr4_fetch_objfile_link_map</a>);
<a name="l03357"></a>03357 
<a name="l03358"></a>03358   <a class="code" href="gdbarch_8c.html#a86560ca20a273a290b06f347fa05a6f5">set_gdbarch_get_siginfo_type</a> (gdbarch, <a class="code" href="linux-tdep_8c.html#a99c37d02167cddd375f53a64ad6e4459">linux_get_siginfo_type</a>);
<a name="l03359"></a>03359 
<a name="l03360"></a>03360   <span class="comment">/* SystemTap functions.  */</span>
<a name="l03361"></a>03361   <a class="code" href="gdbarch_8c.html#a1a53c9a086dcf8704a7d5b257f1500f2">set_gdbarch_stap_register_prefix</a> (gdbarch, <span class="stringliteral">&quot;%&quot;</span>);
<a name="l03362"></a>03362   <a class="code" href="gdbarch_8c.html#a614b8e9eb7a857632c27e70cb23cf022">set_gdbarch_stap_register_indirection_prefix</a> (gdbarch, <span class="stringliteral">&quot;(&quot;</span>);
<a name="l03363"></a>03363   <a class="code" href="gdbarch_8c.html#ae6e19d66c76788698add3f1326822789">set_gdbarch_stap_register_indirection_suffix</a> (gdbarch, <span class="stringliteral">&quot;)&quot;</span>);
<a name="l03364"></a>03364   <a class="code" href="gdbarch_8c.html#ad0a074d541b9af3fe54cf453016d6bfc">set_gdbarch_stap_is_single_operand</a> (gdbarch, <a class="code" href="s390-tdep_8c.html#a4f2b59df3f3b8e1127083287d525325b">s390_stap_is_single_operand</a>);
<a name="l03365"></a>03365 
<a name="l03366"></a>03366   <span class="keywordflow">return</span> gdbarch;
<a name="l03367"></a>03367 }
<a name="l03368"></a>03368 
<a name="l03369"></a>03369 
<a name="l03370"></a>03370 <span class="keyword">extern</span> <a class="code" href="defs_8h.html#a686ed07d4fdcdc366f2bc677216ca08d">initialize_file_ftype</a> <a class="code" href="s390-tdep_8c.html#a1d1b3d98fc6f83e81e6d5b4a3448cfeb">_initialize_s390_tdep</a>; <span class="comment">/* -Wmissing-prototypes */</span>
<a name="l03371"></a>03371 
<a name="l03372"></a>03372 <span class="keywordtype">void</span>
<a name="l03373"></a><a class="code" href="s390-tdep_8c.html#a3c7d5259e23ccafc7e73fe7065f226a3">03373</a> <a class="code" href="s390-tdep_8c.html#a1d1b3d98fc6f83e81e6d5b4a3448cfeb">_initialize_s390_tdep</a> (<span class="keywordtype">void</span>)
<a name="l03374"></a>03374 {
<a name="l03375"></a>03375   <span class="comment">/* Hook us into the gdbarch mechanism.  */</span>
<a name="l03376"></a>03376   <a class="code" href="gdbarch_8c.html#adb96505b62850783929ff38de0c39062">register_gdbarch_init</a> (bfd_arch_s390, <a class="code" href="s390-tdep_8c.html#a311f689c9de9c1d2def221f443a03d19">s390_gdbarch_init</a>);
<a name="l03377"></a>03377 
<a name="l03378"></a>03378   <span class="comment">/* Initialize the GNU/Linux target descriptions.  */</span>
<a name="l03379"></a>03379   <a class="code" href="s390-linux32_8c.html#a19bec4f140b1306f474c6eb65a8732e9">initialize_tdesc_s390_linux32</a> ();
<a name="l03380"></a>03380   <a class="code" href="s390-linux32v1_8c.html#a0eacefeaca3dd9a27190d7b04a29e443">initialize_tdesc_s390_linux32v1</a> ();
<a name="l03381"></a>03381   <a class="code" href="s390-linux32v2_8c.html#a90e0732bd59912f14a0b6676cfc1d267">initialize_tdesc_s390_linux32v2</a> ();
<a name="l03382"></a>03382   <a class="code" href="s390-linux64_8c.html#a8b50f898a8e480904815f4983738ad0d">initialize_tdesc_s390_linux64</a> ();
<a name="l03383"></a>03383   <a class="code" href="s390-linux64v1_8c.html#a3556399bbd1d6b765e8e6c955605fbfd">initialize_tdesc_s390_linux64v1</a> ();
<a name="l03384"></a>03384   <a class="code" href="s390-linux64v2_8c.html#a2a77a6ccefc01b0b5c472a377ab782bf">initialize_tdesc_s390_linux64v2</a> ();
<a name="l03385"></a>03385   <a class="code" href="s390-te-linux64_8c.html#a00f0c858fab00312b4c865f96237884e">initialize_tdesc_s390_te_linux64</a> ();
<a name="l03386"></a>03386   <a class="code" href="s390x-linux64_8c.html#aeeb58bf9d3a099364417c0e6b9275a2b">initialize_tdesc_s390x_linux64</a> ();
<a name="l03387"></a>03387   <a class="code" href="s390x-linux64v1_8c.html#a12275f6c7923c45eb4e6af34b72a1d7f">initialize_tdesc_s390x_linux64v1</a> ();
<a name="l03388"></a>03388   <a class="code" href="s390x-linux64v2_8c.html#a5eb54c28f62f48b3db238ca6cac5429a">initialize_tdesc_s390x_linux64v2</a> ();
<a name="l03389"></a>03389   <a class="code" href="s390x-te-linux64_8c.html#ab260d7e406b4c8a5a7edfb5d26711525">initialize_tdesc_s390x_te_linux64</a> ();
<a name="l03390"></a>03390 }
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 11 2013 14:13:33 for GDB (xrefs) by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
