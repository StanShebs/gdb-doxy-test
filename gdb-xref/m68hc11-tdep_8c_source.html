<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>GDB (xrefs): /home/stan/gdb/src/gdb/m68hc11-tdep.c Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">GDB (xrefs)
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">/home/stan/gdb/src/gdb/m68hc11-tdep.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="m68hc11-tdep_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* Target-dependent code for Motorola 68HC11 &amp; 68HC12</span>
<a name="l00002"></a>00002 <span class="comment"></span>
<a name="l00003"></a>00003 <span class="comment">   Copyright (C) 1999-2013 Free Software Foundation, Inc.</span>
<a name="l00004"></a>00004 <span class="comment"></span>
<a name="l00005"></a>00005 <span class="comment">   Contributed by Stephane Carrez, stcarrez@nerim.fr</span>
<a name="l00006"></a>00006 <span class="comment"></span>
<a name="l00007"></a>00007 <span class="comment">   This file is part of GDB.</span>
<a name="l00008"></a>00008 <span class="comment"></span>
<a name="l00009"></a>00009 <span class="comment">   This program is free software; you can redistribute it and/or modify</span>
<a name="l00010"></a>00010 <span class="comment">   it under the terms of the GNU General Public License as published by</span>
<a name="l00011"></a>00011 <span class="comment">   the Free Software Foundation; either version 3 of the License, or</span>
<a name="l00012"></a>00012 <span class="comment">   (at your option) any later version.</span>
<a name="l00013"></a>00013 <span class="comment"></span>
<a name="l00014"></a>00014 <span class="comment">   This program is distributed in the hope that it will be useful,</span>
<a name="l00015"></a>00015 <span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00016"></a>00016 <span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00017"></a>00017 <span class="comment">   GNU General Public License for more details.</span>
<a name="l00018"></a>00018 <span class="comment"></span>
<a name="l00019"></a>00019 <span class="comment">   You should have received a copy of the GNU General Public License</span>
<a name="l00020"></a>00020 <span class="comment">   along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.  */</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;<a class="code" href="defs_8h.html">defs.h</a>&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="frame_8h.html">frame.h</a>&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="frame-unwind_8h.html">frame-unwind.h</a>&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="frame-base_8h.html">frame-base.h</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="dwarf2-frame_8h.html">dwarf2-frame.h</a>&quot;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="trad-frame_8h.html">trad-frame.h</a>&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="symtab_8h.html">symtab.h</a>&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="gdbtypes_8h.html">gdbtypes.h</a>&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="gdbcmd_8h.html">gdbcmd.h</a>&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="gdbcore_8h.html">gdbcore.h</a>&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;<a class="code" href="gdb__string_8h.html">gdb_string.h</a>&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="value_8h.html">value.h</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="inferior_8h.html">inferior.h</a>&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;dis-asm.h&quot;</span>  
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="symfile_8h.html">symfile.h</a>&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="objfiles_8h.html">objfiles.h</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="arch-utils_8h.html">arch-utils.h</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="regcache_8h.html">regcache.h</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="reggroups_8h.html">reggroups.h</a>&quot;</span>
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="target_8h.html">target.h</a>&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;opcode/m68hc11.h&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;elf/m68hc11.h&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;elf-bfd.h&quot;</span>
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 <span class="comment">/* Macros for setting and testing a bit in a minimal symbol.</span>
<a name="l00049"></a>00049 <span class="comment">   For 68HC11/68HC12 we have two flags that tell which return</span>
<a name="l00050"></a>00050 <span class="comment">   type the function is using.  This is used for prologue and frame</span>
<a name="l00051"></a>00051 <span class="comment">   analysis to compute correct stack frame layout.</span>
<a name="l00052"></a>00052 <span class="comment">   </span>
<a name="l00053"></a>00053 <span class="comment">   The MSB of the minimal symbol&#39;s &quot;info&quot; field is used for this purpose.</span>
<a name="l00054"></a>00054 <span class="comment"></span>
<a name="l00055"></a>00055 <span class="comment">   MSYMBOL_SET_RTC      Actually sets the &quot;RTC&quot; bit.</span>
<a name="l00056"></a>00056 <span class="comment">   MSYMBOL_SET_RTI      Actually sets the &quot;RTI&quot; bit.</span>
<a name="l00057"></a>00057 <span class="comment">   MSYMBOL_IS_RTC       Tests the &quot;RTC&quot; bit in a minimal symbol.</span>
<a name="l00058"></a>00058 <span class="comment">   MSYMBOL_IS_RTI       Tests the &quot;RTC&quot; bit in a minimal symbol.  */</span>
<a name="l00059"></a>00059 
<a name="l00060"></a><a class="code" href="m68hc11-tdep_8c.html#aadb1718243b84d3af8f93190081a5aa5">00060</a> <span class="preprocessor">#define MSYMBOL_SET_RTC(msym)                           \</span>
<a name="l00061"></a>00061 <span class="preprocessor">        MSYMBOL_TARGET_FLAG_1 (msym) = 1</span>
<a name="l00062"></a>00062 <span class="preprocessor"></span>
<a name="l00063"></a><a class="code" href="m68hc11-tdep_8c.html#a4d65dfd3a44ebfcffdac5140592326cd">00063</a> <span class="preprocessor">#define MSYMBOL_SET_RTI(msym)                           \</span>
<a name="l00064"></a>00064 <span class="preprocessor">        MSYMBOL_TARGET_FLAG_2 (msym) = 1</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span>
<a name="l00066"></a><a class="code" href="m68hc11-tdep_8c.html#a7d201705a2c8a239e8743437c654970d">00066</a> <span class="preprocessor">#define MSYMBOL_IS_RTC(msym)                            \</span>
<a name="l00067"></a>00067 <span class="preprocessor">        MSYMBOL_TARGET_FLAG_1 (msym)</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span>
<a name="l00069"></a><a class="code" href="m68hc11-tdep_8c.html#a6567d059204a77e1f066db3b131e05bb">00069</a> <span class="preprocessor">#define MSYMBOL_IS_RTI(msym)                            \</span>
<a name="l00070"></a>00070 <span class="preprocessor">        MSYMBOL_TARGET_FLAG_2 (msym)</span>
<a name="l00071"></a>00071 <span class="preprocessor"></span>
<a name="l00072"></a><a class="code" href="m68hc11-tdep_8c.html#a45c70eecdda974c7933a01918af12ade">00072</a> <span class="keyword">enum</span> <a class="code" href="m68hc11-tdep_8c.html#a45c70eecdda974c7933a01918af12ade">insn_return_kind</a> {
<a name="l00073"></a><a class="code" href="m68hc11-tdep_8c.html#a45c70eecdda974c7933a01918af12adea4493f97431450828eeb9e66dbe2012ae">00073</a>   <a class="code" href="m68hc11-tdep_8c.html#a45c70eecdda974c7933a01918af12adea4493f97431450828eeb9e66dbe2012ae">RETURN_RTS</a>,
<a name="l00074"></a><a class="code" href="m68hc11-tdep_8c.html#a45c70eecdda974c7933a01918af12adea55325867141f6dd80262dfe5bbf4bb45">00074</a>   <a class="code" href="m68hc11-tdep_8c.html#a45c70eecdda974c7933a01918af12adea55325867141f6dd80262dfe5bbf4bb45">RETURN_RTC</a>,
<a name="l00075"></a><a class="code" href="m68hc11-tdep_8c.html#a45c70eecdda974c7933a01918af12adea9196c903e6643c72a678ccc792500f67">00075</a>   <a class="code" href="m68hc11-tdep_8c.html#a45c70eecdda974c7933a01918af12adea9196c903e6643c72a678ccc792500f67">RETURN_RTI</a>
<a name="l00076"></a>00076 };
<a name="l00077"></a>00077 
<a name="l00078"></a>00078   
<a name="l00079"></a>00079 <span class="comment">/* Register numbers of various important registers.  */</span>
<a name="l00080"></a>00080 
<a name="l00081"></a><a class="code" href="m68hc11-tdep_8c.html#a1ac9cc9d2ef331d2f36711f3ac184601">00081</a> <span class="preprocessor">#define HARD_X_REGNUM   0</span>
<a name="l00082"></a><a class="code" href="m68hc11-tdep_8c.html#ac49ac61c96e7bacb2c456e663281977f">00082</a> <span class="preprocessor"></span><span class="preprocessor">#define HARD_D_REGNUM   1</span>
<a name="l00083"></a><a class="code" href="m68hc11-tdep_8c.html#acb7f22f67b1118058f52c32aecc2c7b4">00083</a> <span class="preprocessor"></span><span class="preprocessor">#define HARD_Y_REGNUM   2</span>
<a name="l00084"></a><a class="code" href="m68hc11-tdep_8c.html#ae952b6a248316415bd51f1eb9a76e2c5">00084</a> <span class="preprocessor"></span><span class="preprocessor">#define HARD_SP_REGNUM  3</span>
<a name="l00085"></a><a class="code" href="m68hc11-tdep_8c.html#ab0b21dc196c2ba07c9351f43666cba9b">00085</a> <span class="preprocessor"></span><span class="preprocessor">#define HARD_PC_REGNUM  4</span>
<a name="l00086"></a>00086 <span class="preprocessor"></span>
<a name="l00087"></a><a class="code" href="m68hc11-tdep_8c.html#a81c42e008f89dd32af46286aeeabb7fc">00087</a> <span class="preprocessor">#define HARD_A_REGNUM   5</span>
<a name="l00088"></a><a class="code" href="m68hc11-tdep_8c.html#a31cd18f71cbd2de68d551c5d90655bf6">00088</a> <span class="preprocessor"></span><span class="preprocessor">#define HARD_B_REGNUM   6</span>
<a name="l00089"></a><a class="code" href="m68hc11-tdep_8c.html#a4f139385698f68a63a27a538f93501db">00089</a> <span class="preprocessor"></span><span class="preprocessor">#define HARD_CCR_REGNUM 7</span>
<a name="l00090"></a>00090 <span class="preprocessor"></span>
<a name="l00091"></a>00091 <span class="comment">/* 68HC12 page number register.</span>
<a name="l00092"></a>00092 <span class="comment">   Note: to keep a compatibility with gcc register naming, we must</span>
<a name="l00093"></a>00093 <span class="comment">   not have to rename FP and other soft registers.  The page register</span>
<a name="l00094"></a>00094 <span class="comment">   is a real hard register and must therefore be counted by gdbarch_num_regs.</span>
<a name="l00095"></a>00095 <span class="comment">   For this it has the same number as Z register (which is not used).  */</span>
<a name="l00096"></a><a class="code" href="m68hc11-tdep_8c.html#acf6cdbbab3f18fd0d80942eb399eab30">00096</a> <span class="preprocessor">#define HARD_PAGE_REGNUM 8</span>
<a name="l00097"></a><a class="code" href="m68hc11-tdep_8c.html#a22b3f7c98c352e1f276bf3e5720ed08c">00097</a> <span class="preprocessor"></span><span class="preprocessor">#define M68HC11_LAST_HARD_REG (HARD_PAGE_REGNUM)</span>
<a name="l00098"></a>00098 <span class="preprocessor"></span>
<a name="l00099"></a>00099 <span class="comment">/* Z is replaced by X or Y by gcc during machine reorg.</span>
<a name="l00100"></a>00100 <span class="comment">   ??? There is no way to get it and even know whether</span>
<a name="l00101"></a>00101 <span class="comment">   it&#39;s in X or Y or in ZS.  */</span>
<a name="l00102"></a><a class="code" href="m68hc11-tdep_8c.html#a9b08c660c6d3361edf82017210aa7ce9">00102</a> <span class="preprocessor">#define SOFT_Z_REGNUM        8</span>
<a name="l00103"></a>00103 <span class="preprocessor"></span>
<a name="l00104"></a>00104 <span class="comment">/* Soft registers.  These registers are special.  There are treated</span>
<a name="l00105"></a>00105 <span class="comment">   like normal hard registers by gcc and gdb (ie, within dwarf2 info).</span>
<a name="l00106"></a>00106 <span class="comment">   They are physically located in memory.  */</span>
<a name="l00107"></a><a class="code" href="m68hc11-tdep_8c.html#a19c7f6e43e46cbf32393ffe9834c8430">00107</a> <span class="preprocessor">#define SOFT_FP_REGNUM       9</span>
<a name="l00108"></a><a class="code" href="m68hc11-tdep_8c.html#a564566b1e9a11ce9dddc442b19f12a01">00108</a> <span class="preprocessor"></span><span class="preprocessor">#define SOFT_TMP_REGNUM     10</span>
<a name="l00109"></a><a class="code" href="m68hc11-tdep_8c.html#a39149a1ce3726adb550fdf1816f5c827">00109</a> <span class="preprocessor"></span><span class="preprocessor">#define SOFT_ZS_REGNUM      11</span>
<a name="l00110"></a><a class="code" href="m68hc11-tdep_8c.html#a278b6c0259d4a9e0e5c84ed6527d447b">00110</a> <span class="preprocessor"></span><span class="preprocessor">#define SOFT_XY_REGNUM      12</span>
<a name="l00111"></a><a class="code" href="m68hc11-tdep_8c.html#a49ec8b231b3768d58d0a7fbec088c7fe">00111</a> <span class="preprocessor"></span><span class="preprocessor">#define SOFT_UNUSED_REGNUM  13</span>
<a name="l00112"></a><a class="code" href="m68hc11-tdep_8c.html#ab41365e4eaa3515d5196e51de08638a3">00112</a> <span class="preprocessor"></span><span class="preprocessor">#define SOFT_D1_REGNUM      14</span>
<a name="l00113"></a><a class="code" href="m68hc11-tdep_8c.html#a04718b4fb12d24b6c1ee9540646d35b6">00113</a> <span class="preprocessor"></span><span class="preprocessor">#define SOFT_D32_REGNUM     (SOFT_D1_REGNUM+31)</span>
<a name="l00114"></a><a class="code" href="m68hc11-tdep_8c.html#a2391cf96ec90f9f2d189038d0c941402">00114</a> <span class="preprocessor"></span><span class="preprocessor">#define M68HC11_MAX_SOFT_REGS 32</span>
<a name="l00115"></a>00115 <span class="preprocessor"></span>
<a name="l00116"></a><a class="code" href="m68hc11-tdep_8c.html#a76cc940b04feb28abc6c581ce23f3dff">00116</a> <span class="preprocessor">#define M68HC11_NUM_REGS        (8)</span>
<a name="l00117"></a><a class="code" href="m68hc11-tdep_8c.html#af32afab0375f60931345b6f2383b936c">00117</a> <span class="preprocessor"></span><span class="preprocessor">#define M68HC11_NUM_PSEUDO_REGS (M68HC11_MAX_SOFT_REGS+5)</span>
<a name="l00118"></a><a class="code" href="m68hc11-tdep_8c.html#a0c6d474a64fa32b385b883990e36cb87">00118</a> <span class="preprocessor"></span><span class="preprocessor">#define M68HC11_ALL_REGS        (M68HC11_NUM_REGS+M68HC11_NUM_PSEUDO_REGS)</span>
<a name="l00119"></a>00119 <span class="preprocessor"></span>
<a name="l00120"></a><a class="code" href="m68hc11-tdep_8c.html#adf8f8d57e8051520e583542b9f9dcf91">00120</a> <span class="preprocessor">#define M68HC11_REG_SIZE    (2)</span>
<a name="l00121"></a>00121 <span class="preprocessor"></span>
<a name="l00122"></a><a class="code" href="m68hc11-tdep_8c.html#a18d38827c7eb2453f9981cbf12cdc8d0">00122</a> <span class="preprocessor">#define M68HC12_NUM_REGS        (9)</span>
<a name="l00123"></a><a class="code" href="m68hc11-tdep_8c.html#ac350403651c9825909eea3495f135414">00123</a> <span class="preprocessor"></span><span class="preprocessor">#define M68HC12_NUM_PSEUDO_REGS ((M68HC11_MAX_SOFT_REGS+5)+1-1)</span>
<a name="l00124"></a><a class="code" href="m68hc11-tdep_8c.html#ade8c25b3f7f7826ab6a52a1cfc4a3342">00124</a> <span class="preprocessor"></span><span class="preprocessor">#define M68HC12_HARD_PC_REGNUM  (SOFT_D32_REGNUM+1)</span>
<a name="l00125"></a>00125 <span class="preprocessor"></span>
<a name="l00126"></a>00126 <span class="keyword">struct </span><a class="code" href="structinsn__sequence.html">insn_sequence</a>;
<a name="l00127"></a>00127 <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a>
<a name="l00128"></a>00128   {
<a name="l00129"></a>00129     <span class="comment">/* Stack pointer correction value.  For 68hc11, the stack pointer points</span>
<a name="l00130"></a>00130 <span class="comment">       to the next push location.  An offset of 1 must be applied to obtain</span>
<a name="l00131"></a>00131 <span class="comment">       the address where the last value is saved.  For 68hc12, the stack</span>
<a name="l00132"></a>00132 <span class="comment">       pointer points to the last value pushed.  No offset is necessary.  */</span>
<a name="l00133"></a><a class="code" href="structgdbarch__tdep.html#afe32878cf6d057b68592ff9a02b11d3a">00133</a>     <span class="keywordtype">int</span> <a class="code" href="structgdbarch__tdep.html#afe32878cf6d057b68592ff9a02b11d3a">stack_correction</a>;
<a name="l00134"></a>00134 
<a name="l00135"></a>00135     <span class="comment">/* Description of instructions in the prologue.  */</span>
<a name="l00136"></a><a class="code" href="structgdbarch__tdep.html#af30c019ad5ee85ed87a69a6496881be1">00136</a>     <span class="keyword">struct </span><a class="code" href="structinsn__sequence.html">insn_sequence</a> *<a class="code" href="structgdbarch__tdep.html#af30c019ad5ee85ed87a69a6496881be1">prologue</a>;
<a name="l00137"></a>00137 
<a name="l00138"></a>00138     <span class="comment">/* True if the page memory bank register is available</span>
<a name="l00139"></a>00139 <span class="comment">       and must be used.  */</span>
<a name="l00140"></a><a class="code" href="structgdbarch__tdep.html#a8b7ee2cdbd45c96c87312b659c3f834c">00140</a>     <span class="keywordtype">int</span> <a class="code" href="structgdbarch__tdep.html#a8b7ee2cdbd45c96c87312b659c3f834c">use_page_register</a>;
<a name="l00141"></a>00141 
<a name="l00142"></a>00142     <span class="comment">/* ELF flags for ABI.  */</span>
<a name="l00143"></a><a class="code" href="structgdbarch__tdep.html#ab3a07d3bcd797401bcae9e87dd3dddbb">00143</a>     <span class="keywordtype">int</span> <a class="code" href="structgdbarch__tdep.html#ab3a07d3bcd797401bcae9e87dd3dddbb">elf_flags</a>;
<a name="l00144"></a>00144   };
<a name="l00145"></a>00145 
<a name="l00146"></a><a class="code" href="m68hc11-tdep_8c.html#a8cbed36a51641e8809c1a66771e9074b">00146</a> <span class="preprocessor">#define STACK_CORRECTION(gdbarch) (gdbarch_tdep (gdbarch)-&gt;stack_correction)</span>
<a name="l00147"></a><a class="code" href="m68hc11-tdep_8c.html#a2409ab54089701cda79ca91dc9174cd3">00147</a> <span class="preprocessor"></span><span class="preprocessor">#define USE_PAGE_REGISTER(gdbarch) (gdbarch_tdep (gdbarch)-&gt;use_page_register)</span>
<a name="l00148"></a>00148 <span class="preprocessor"></span>
<a name="l00149"></a><a class="code" href="structm68hc11__unwind__cache.html">00149</a> <span class="keyword">struct </span><a class="code" href="structm68hc11__unwind__cache.html">m68hc11_unwind_cache</a>
<a name="l00150"></a>00150 {
<a name="l00151"></a>00151   <span class="comment">/* The previous frame&#39;s inner most stack address.  Used as this</span>
<a name="l00152"></a>00152 <span class="comment">     frame ID&#39;s stack_addr.  */</span>
<a name="l00153"></a><a class="code" href="structm68hc11__unwind__cache.html#abc2f221763776620752c5e2e035eb676">00153</a>   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="structm68hc11__unwind__cache.html#abc2f221763776620752c5e2e035eb676">prev_sp</a>;
<a name="l00154"></a>00154   <span class="comment">/* The frame&#39;s base, optionally used by the high-level debug info.  */</span>
<a name="l00155"></a><a class="code" href="structm68hc11__unwind__cache.html#a85726b6e8e2ff92dcafbbc9233e46f89">00155</a>   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="structm68hc11__unwind__cache.html#a85726b6e8e2ff92dcafbbc9233e46f89">base</a>;
<a name="l00156"></a><a class="code" href="structm68hc11__unwind__cache.html#a3053b2e23e75b8981e83b0086e093ab2">00156</a>   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="structm68hc11__unwind__cache.html#a3053b2e23e75b8981e83b0086e093ab2">pc</a>;
<a name="l00157"></a><a class="code" href="structm68hc11__unwind__cache.html#a6589ad6a64815bbc5a5adf168fa630f6">00157</a>   <span class="keywordtype">int</span> <a class="code" href="structm68hc11__unwind__cache.html#a6589ad6a64815bbc5a5adf168fa630f6">size</a>;
<a name="l00158"></a><a class="code" href="structm68hc11__unwind__cache.html#a5a51673faedba1563bdebcbfe70970c7">00158</a>   <span class="keywordtype">int</span> <a class="code" href="structm68hc11__unwind__cache.html#a5a51673faedba1563bdebcbfe70970c7">prologue_type</a>;
<a name="l00159"></a><a class="code" href="structm68hc11__unwind__cache.html#a839ab51585b1c732d476dfe21b0fe134">00159</a>   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="structm68hc11__unwind__cache.html#a839ab51585b1c732d476dfe21b0fe134">return_pc</a>;
<a name="l00160"></a><a class="code" href="structm68hc11__unwind__cache.html#ad4e3d6b4d5a401a9735bfe061b7b6221">00160</a>   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="structm68hc11__unwind__cache.html#ad4e3d6b4d5a401a9735bfe061b7b6221">sp_offset</a>;
<a name="l00161"></a><a class="code" href="structm68hc11__unwind__cache.html#a9c2e66c0dc311f6ab635174f5640aa7d">00161</a>   <span class="keywordtype">int</span> <a class="code" href="structm68hc11__unwind__cache.html#a9c2e66c0dc311f6ab635174f5640aa7d">frameless</a>;
<a name="l00162"></a><a class="code" href="structm68hc11__unwind__cache.html#a5eebb3373656c19f52956302a1a20290">00162</a>   <span class="keyword">enum</span> <a class="code" href="m68hc11-tdep_8c.html#a45c70eecdda974c7933a01918af12ade">insn_return_kind</a> <a class="code" href="structm68hc11__unwind__cache.html#a5eebb3373656c19f52956302a1a20290">return_kind</a>;
<a name="l00163"></a>00163 
<a name="l00164"></a>00164   <span class="comment">/* Table indicating the location of each and every register.  */</span>
<a name="l00165"></a><a class="code" href="structm68hc11__unwind__cache.html#a5e54634f5355019f147da6aebb5a8ffd">00165</a>   <span class="keyword">struct </span><a class="code" href="structtrad__frame__saved__reg.html">trad_frame_saved_reg</a> *<a class="code" href="structm68hc11__unwind__cache.html#a5e54634f5355019f147da6aebb5a8ffd">saved_regs</a>;
<a name="l00166"></a>00166 };
<a name="l00167"></a>00167 
<a name="l00168"></a>00168 <span class="comment">/* Table of registers for 68HC11.  This includes the hard registers</span>
<a name="l00169"></a>00169 <span class="comment">   and the soft registers used by GCC.  */</span>
<a name="l00170"></a>00170 <span class="keyword">static</span> <span class="keywordtype">char</span> *
<a name="l00171"></a><a class="code" href="m68hc11-tdep_8c.html#ac59679023dab5abadd72737b146e9c6c">00171</a> <a class="code" href="m68hc11-tdep_8c.html#ac59679023dab5abadd72737b146e9c6c">m68hc11_register_names</a>[] =
<a name="l00172"></a>00172 {
<a name="l00173"></a>00173   <span class="stringliteral">&quot;x&quot;</span>,    <span class="stringliteral">&quot;d&quot;</span>,    <span class="stringliteral">&quot;y&quot;</span>,    <span class="stringliteral">&quot;sp&quot;</span>,   <span class="stringliteral">&quot;pc&quot;</span>,   <span class="stringliteral">&quot;a&quot;</span>,    <span class="stringliteral">&quot;b&quot;</span>,
<a name="l00174"></a>00174   <span class="stringliteral">&quot;ccr&quot;</span>,  <span class="stringliteral">&quot;page&quot;</span>, <span class="stringliteral">&quot;frame&quot;</span>,<span class="stringliteral">&quot;tmp&quot;</span>,  <span class="stringliteral">&quot;zs&quot;</span>,   <span class="stringliteral">&quot;xy&quot;</span>,   0,
<a name="l00175"></a>00175   <span class="stringliteral">&quot;d1&quot;</span>,   <span class="stringliteral">&quot;d2&quot;</span>,   <span class="stringliteral">&quot;d3&quot;</span>,   <span class="stringliteral">&quot;d4&quot;</span>,   <span class="stringliteral">&quot;d5&quot;</span>,   <span class="stringliteral">&quot;d6&quot;</span>,   <span class="stringliteral">&quot;d7&quot;</span>,
<a name="l00176"></a>00176   <span class="stringliteral">&quot;d8&quot;</span>,   <span class="stringliteral">&quot;d9&quot;</span>,   <span class="stringliteral">&quot;d10&quot;</span>,  <span class="stringliteral">&quot;d11&quot;</span>,  <span class="stringliteral">&quot;d12&quot;</span>,  <span class="stringliteral">&quot;d13&quot;</span>,  <span class="stringliteral">&quot;d14&quot;</span>,
<a name="l00177"></a>00177   <span class="stringliteral">&quot;d15&quot;</span>,  <span class="stringliteral">&quot;d16&quot;</span>,  <span class="stringliteral">&quot;d17&quot;</span>,  <span class="stringliteral">&quot;d18&quot;</span>,  <span class="stringliteral">&quot;d19&quot;</span>,  <span class="stringliteral">&quot;d20&quot;</span>,  <span class="stringliteral">&quot;d21&quot;</span>,
<a name="l00178"></a>00178   <span class="stringliteral">&quot;d22&quot;</span>,  <span class="stringliteral">&quot;d23&quot;</span>,  <span class="stringliteral">&quot;d24&quot;</span>,  <span class="stringliteral">&quot;d25&quot;</span>,  <span class="stringliteral">&quot;d26&quot;</span>,  <span class="stringliteral">&quot;d27&quot;</span>,  <span class="stringliteral">&quot;d28&quot;</span>,
<a name="l00179"></a>00179   <span class="stringliteral">&quot;d29&quot;</span>,  <span class="stringliteral">&quot;d30&quot;</span>,  <span class="stringliteral">&quot;d31&quot;</span>,  <span class="stringliteral">&quot;d32&quot;</span>
<a name="l00180"></a>00180 };
<a name="l00181"></a>00181 
<a name="l00182"></a><a class="code" href="structm68hc11__soft__reg.html">00182</a> <span class="keyword">struct </span><a class="code" href="structm68hc11__soft__reg.html">m68hc11_soft_reg</a> 
<a name="l00183"></a>00183 {
<a name="l00184"></a><a class="code" href="structm68hc11__soft__reg.html#a387768d30278354b8ff0d3865249b7f8">00184</a>   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structm68hc11__soft__reg.html#a387768d30278354b8ff0d3865249b7f8">name</a>;
<a name="l00185"></a><a class="code" href="structm68hc11__soft__reg.html#afa16ad93e2acd04554b504777c4eee31">00185</a>   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>   <a class="code" href="structm68hc11__soft__reg.html#afa16ad93e2acd04554b504777c4eee31">addr</a>;
<a name="l00186"></a>00186 };
<a name="l00187"></a>00187 
<a name="l00188"></a><a class="code" href="m68hc11-tdep_8c.html#ab90df2e17bbb1297c43807fbc12bbc40">00188</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structm68hc11__soft__reg.html">m68hc11_soft_reg</a> <a class="code" href="m68hc11-tdep_8c.html#ab90df2e17bbb1297c43807fbc12bbc40">soft_regs</a>[<a class="code" href="m68hc11-tdep_8c.html#a0c6d474a64fa32b385b883990e36cb87">M68HC11_ALL_REGS</a>];
<a name="l00189"></a>00189 
<a name="l00190"></a><a class="code" href="m68hc11-tdep_8c.html#a4092e1a31c6505470b1ec46f711fb2b1">00190</a> <span class="preprocessor">#define M68HC11_FP_ADDR soft_regs[SOFT_FP_REGNUM].addr</span>
<a name="l00191"></a>00191 <span class="preprocessor"></span>
<a name="l00192"></a><a class="code" href="m68hc11-tdep_8c.html#a830a53d617059a002814f9226cce4e3b">00192</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="m68hc11-tdep_8c.html#a830a53d617059a002814f9226cce4e3b">soft_min_addr</a>;
<a name="l00193"></a><a class="code" href="m68hc11-tdep_8c.html#a98e0d62211114383f4a200de0710166a">00193</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="m68hc11-tdep_8c.html#a98e0d62211114383f4a200de0710166a">soft_max_addr</a>;
<a name="l00194"></a><a class="code" href="m68hc11-tdep_8c.html#a01837626bd78b95ebd8dac8f94fd5f8c">00194</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="m68hc11-tdep_8c.html#a01837626bd78b95ebd8dac8f94fd5f8c">soft_reg_initialized</a> = 0;
<a name="l00195"></a>00195 
<a name="l00196"></a>00196 <span class="comment">/* Look in the symbol table for the address of a pseudo register</span>
<a name="l00197"></a>00197 <span class="comment">   in memory.  If we don&#39;t find it, pretend the register is not used</span>
<a name="l00198"></a>00198 <span class="comment">   and not available.  */</span>
<a name="l00199"></a>00199 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00200"></a><a class="code" href="m68hc11-tdep_8c.html#a55fb6a00641ec625c5eae91f041422c9">00200</a> <a class="code" href="m68hc11-tdep_8c.html#a55fb6a00641ec625c5eae91f041422c9">m68hc11_get_register_info</a> (<span class="keyword">struct</span> <a class="code" href="structm68hc11__soft__reg.html">m68hc11_soft_reg</a> *<a class="code" href="structreg.html">reg</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="aarch64-tdep_8c.html#acc128f98d9ceca227038c771308eff39">name</a>)
<a name="l00201"></a>00201 {
<a name="l00202"></a>00202   <span class="keyword">struct </span><a class="code" href="structminimal__symbol.html">minimal_symbol</a> *msymbol;
<a name="l00203"></a>00203 
<a name="l00204"></a>00204   msymbol = <a class="code" href="minsyms_8c.html#af87f7a894386515074ddd71365bc09b8">lookup_minimal_symbol</a> (name, NULL, NULL);
<a name="l00205"></a>00205   <span class="keywordflow">if</span> (msymbol)
<a name="l00206"></a>00206     {
<a name="l00207"></a>00207       reg-&gt;<a class="code" href="structm68hc11__soft__reg.html#afa16ad93e2acd04554b504777c4eee31">addr</a> = <a class="code" href="symtab_8h.html#abee697b9e3bb4f4d164ad920a87ab854">SYMBOL_VALUE_ADDRESS</a> (msymbol);
<a name="l00208"></a>00208       reg-&gt;<a class="code" href="structm68hc11__soft__reg.html#a387768d30278354b8ff0d3865249b7f8">name</a> = xstrdup (name);
<a name="l00209"></a>00209 
<a name="l00210"></a>00210       <span class="comment">/* Keep track of the address range for soft registers.  */</span>
<a name="l00211"></a>00211       <span class="keywordflow">if</span> (reg-&gt;<a class="code" href="structm68hc11__soft__reg.html#afa16ad93e2acd04554b504777c4eee31">addr</a> &lt; (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>) <a class="code" href="m68hc11-tdep_8c.html#a830a53d617059a002814f9226cce4e3b">soft_min_addr</a>)
<a name="l00212"></a>00212         soft_min_addr = reg-&gt;<a class="code" href="structm68hc11__soft__reg.html#afa16ad93e2acd04554b504777c4eee31">addr</a>;
<a name="l00213"></a>00213       <span class="keywordflow">if</span> (reg-&gt;<a class="code" href="structm68hc11__soft__reg.html#afa16ad93e2acd04554b504777c4eee31">addr</a> &gt; (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>) <a class="code" href="m68hc11-tdep_8c.html#a98e0d62211114383f4a200de0710166a">soft_max_addr</a>)
<a name="l00214"></a>00214         soft_max_addr = reg-&gt;<a class="code" href="structm68hc11__soft__reg.html#afa16ad93e2acd04554b504777c4eee31">addr</a>;
<a name="l00215"></a>00215     }
<a name="l00216"></a>00216   <span class="keywordflow">else</span>
<a name="l00217"></a>00217     {
<a name="l00218"></a>00218       reg-&gt;<a class="code" href="structm68hc11__soft__reg.html#a387768d30278354b8ff0d3865249b7f8">name</a> = 0;
<a name="l00219"></a>00219       reg-&gt;<a class="code" href="structm68hc11__soft__reg.html#afa16ad93e2acd04554b504777c4eee31">addr</a> = 0;
<a name="l00220"></a>00220     }
<a name="l00221"></a>00221 }
<a name="l00222"></a>00222 
<a name="l00223"></a>00223 <span class="comment">/* Initialize the table of soft register addresses according</span>
<a name="l00224"></a>00224 <span class="comment">   to the symbol table.  */</span>
<a name="l00225"></a>00225   <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00226"></a><a class="code" href="m68hc11-tdep_8c.html#ad8a05ec17741d63ea6bb2cb44df4920f">00226</a> <a class="code" href="m68hc11-tdep_8c.html#ad8a05ec17741d63ea6bb2cb44df4920f">m68hc11_initialize_register_info</a> (<span class="keywordtype">void</span>)
<a name="l00227"></a>00227 {
<a name="l00228"></a>00228   <span class="keywordtype">int</span> i;
<a name="l00229"></a>00229 
<a name="l00230"></a>00230   <span class="keywordflow">if</span> (<a class="code" href="m68hc11-tdep_8c.html#a01837626bd78b95ebd8dac8f94fd5f8c">soft_reg_initialized</a>)
<a name="l00231"></a>00231     <span class="keywordflow">return</span>;
<a name="l00232"></a>00232   
<a name="l00233"></a>00233   <a class="code" href="m68hc11-tdep_8c.html#a830a53d617059a002814f9226cce4e3b">soft_min_addr</a> = INT_MAX;
<a name="l00234"></a>00234   <a class="code" href="m68hc11-tdep_8c.html#a98e0d62211114383f4a200de0710166a">soft_max_addr</a> = 0;
<a name="l00235"></a>00235   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="m68hc11-tdep_8c.html#a0c6d474a64fa32b385b883990e36cb87">M68HC11_ALL_REGS</a>; i++)
<a name="l00236"></a>00236     {
<a name="l00237"></a>00237       <a class="code" href="m68hc11-tdep_8c.html#ab90df2e17bbb1297c43807fbc12bbc40">soft_regs</a>[i].<a class="code" href="structm68hc11__soft__reg.html#a387768d30278354b8ff0d3865249b7f8">name</a> = 0;
<a name="l00238"></a>00238     }
<a name="l00239"></a>00239   
<a name="l00240"></a>00240   <a class="code" href="m68hc11-tdep_8c.html#a55fb6a00641ec625c5eae91f041422c9">m68hc11_get_register_info</a> (&amp;<a class="code" href="m68hc11-tdep_8c.html#ab90df2e17bbb1297c43807fbc12bbc40">soft_regs</a>[<a class="code" href="m68hc11-tdep_8c.html#a19c7f6e43e46cbf32393ffe9834c8430">SOFT_FP_REGNUM</a>], <span class="stringliteral">&quot;_.frame&quot;</span>);
<a name="l00241"></a>00241   <a class="code" href="m68hc11-tdep_8c.html#a55fb6a00641ec625c5eae91f041422c9">m68hc11_get_register_info</a> (&amp;<a class="code" href="m68hc11-tdep_8c.html#ab90df2e17bbb1297c43807fbc12bbc40">soft_regs</a>[<a class="code" href="m68hc11-tdep_8c.html#a564566b1e9a11ce9dddc442b19f12a01">SOFT_TMP_REGNUM</a>], <span class="stringliteral">&quot;_.tmp&quot;</span>);
<a name="l00242"></a>00242   <a class="code" href="m68hc11-tdep_8c.html#a55fb6a00641ec625c5eae91f041422c9">m68hc11_get_register_info</a> (&amp;<a class="code" href="m68hc11-tdep_8c.html#ab90df2e17bbb1297c43807fbc12bbc40">soft_regs</a>[<a class="code" href="m68hc11-tdep_8c.html#a39149a1ce3726adb550fdf1816f5c827">SOFT_ZS_REGNUM</a>], <span class="stringliteral">&quot;_.z&quot;</span>);
<a name="l00243"></a>00243   <a class="code" href="m68hc11-tdep_8c.html#ab90df2e17bbb1297c43807fbc12bbc40">soft_regs</a>[<a class="code" href="m68hc11-tdep_8c.html#a9b08c660c6d3361edf82017210aa7ce9">SOFT_Z_REGNUM</a>] = <a class="code" href="m68hc11-tdep_8c.html#ab90df2e17bbb1297c43807fbc12bbc40">soft_regs</a>[<a class="code" href="m68hc11-tdep_8c.html#a39149a1ce3726adb550fdf1816f5c827">SOFT_ZS_REGNUM</a>];
<a name="l00244"></a>00244   <a class="code" href="m68hc11-tdep_8c.html#a55fb6a00641ec625c5eae91f041422c9">m68hc11_get_register_info</a> (&amp;<a class="code" href="m68hc11-tdep_8c.html#ab90df2e17bbb1297c43807fbc12bbc40">soft_regs</a>[<a class="code" href="m68hc11-tdep_8c.html#a278b6c0259d4a9e0e5c84ed6527d447b">SOFT_XY_REGNUM</a>], <span class="stringliteral">&quot;_.xy&quot;</span>);
<a name="l00245"></a>00245 
<a name="l00246"></a>00246   <span class="keywordflow">for</span> (i = <a class="code" href="m68hc11-tdep_8c.html#ab41365e4eaa3515d5196e51de08638a3">SOFT_D1_REGNUM</a>; i &lt; <a class="code" href="m68hc11-tdep_8c.html#a2391cf96ec90f9f2d189038d0c941402">M68HC11_MAX_SOFT_REGS</a>; i++)
<a name="l00247"></a>00247     {
<a name="l00248"></a>00248       <span class="keywordtype">char</span> buf[10];
<a name="l00249"></a>00249 
<a name="l00250"></a>00250       <a class="code" href="common-utils_8c.html#ad9940337ec98983dae9951c947879fc8">xsnprintf</a> (buf, <span class="keyword">sizeof</span> (buf), <span class="stringliteral">&quot;_.d%d&quot;</span>, i - <a class="code" href="m68hc11-tdep_8c.html#ab41365e4eaa3515d5196e51de08638a3">SOFT_D1_REGNUM</a> + 1);
<a name="l00251"></a>00251       <a class="code" href="m68hc11-tdep_8c.html#a55fb6a00641ec625c5eae91f041422c9">m68hc11_get_register_info</a> (&amp;<a class="code" href="m68hc11-tdep_8c.html#ab90df2e17bbb1297c43807fbc12bbc40">soft_regs</a>[i], buf);
<a name="l00252"></a>00252     }
<a name="l00253"></a>00253 
<a name="l00254"></a>00254   <span class="keywordflow">if</span> (<a class="code" href="m68hc11-tdep_8c.html#ab90df2e17bbb1297c43807fbc12bbc40">soft_regs</a>[SOFT_FP_REGNUM].<a class="code" href="aarch64-tdep_8c.html#acc128f98d9ceca227038c771308eff39">name</a> == 0)
<a name="l00255"></a>00255     <a class="code" href="utils_8c.html#a5fc201a4181499a6b4057a6caa15b5e2">warning</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;No frame soft register found in the symbol table.\n&quot;</span>
<a name="l00256"></a>00256                <span class="stringliteral">&quot;Stack backtrace will not work.&quot;</span>));
<a name="l00257"></a>00257   <a class="code" href="m68hc11-tdep_8c.html#a01837626bd78b95ebd8dac8f94fd5f8c">soft_reg_initialized</a> = 1;
<a name="l00258"></a>00258 }
<a name="l00259"></a>00259 
<a name="l00260"></a>00260 <span class="comment">/* Given an address in memory, return the soft register number if</span>
<a name="l00261"></a>00261 <span class="comment">   that address corresponds to a soft register.  Returns -1 if not.  */</span>
<a name="l00262"></a>00262 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00263"></a><a class="code" href="m68hc11-tdep_8c.html#aa820d8e4b5b2e12a938a735932a19b5a">00263</a> <a class="code" href="m68hc11-tdep_8c.html#aa820d8e4b5b2e12a938a735932a19b5a">m68hc11_which_soft_register</a> (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> addr)
<a name="l00264"></a>00264 {
<a name="l00265"></a>00265   <span class="keywordtype">int</span> i;
<a name="l00266"></a>00266   
<a name="l00267"></a>00267   <span class="keywordflow">if</span> (addr &lt; soft_min_addr || addr &gt; <a class="code" href="m68hc11-tdep_8c.html#a98e0d62211114383f4a200de0710166a">soft_max_addr</a>)
<a name="l00268"></a>00268     <span class="keywordflow">return</span> -1;
<a name="l00269"></a>00269   
<a name="l00270"></a>00270   <span class="keywordflow">for</span> (i = <a class="code" href="m68hc11-tdep_8c.html#a19c7f6e43e46cbf32393ffe9834c8430">SOFT_FP_REGNUM</a>; i &lt; <a class="code" href="m68hc11-tdep_8c.html#a0c6d474a64fa32b385b883990e36cb87">M68HC11_ALL_REGS</a>; i++)
<a name="l00271"></a>00271     {
<a name="l00272"></a>00272       <span class="keywordflow">if</span> (<a class="code" href="m68hc11-tdep_8c.html#ab90df2e17bbb1297c43807fbc12bbc40">soft_regs</a>[i].<a class="code" href="aarch64-tdep_8c.html#acc128f98d9ceca227038c771308eff39">name</a> &amp;&amp; <a class="code" href="m68hc11-tdep_8c.html#ab90df2e17bbb1297c43807fbc12bbc40">soft_regs</a>[i].addr == addr)
<a name="l00273"></a>00273         <span class="keywordflow">return</span> i;
<a name="l00274"></a>00274     }
<a name="l00275"></a>00275   <span class="keywordflow">return</span> -1;
<a name="l00276"></a>00276 }
<a name="l00277"></a>00277 
<a name="l00278"></a>00278 <span class="comment">/* Fetch a pseudo register.  The 68hc11 soft registers are treated like</span>
<a name="l00279"></a>00279 <span class="comment">   pseudo registers.  They are located in memory.  Translate the register</span>
<a name="l00280"></a>00280 <span class="comment">   fetch into a memory read.  */</span>
<a name="l00281"></a>00281 <span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7">register_status</a>
<a name="l00282"></a><a class="code" href="m68hc11-tdep_8c.html#a003a91b7b05a2f9b77f8e2ec99e966c4">00282</a> <a class="code" href="m68hc11-tdep_8c.html#a003a91b7b05a2f9b77f8e2ec99e966c4">m68hc11_pseudo_register_read</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>,
<a name="l00283"></a>00283                               <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l00284"></a>00284                               <span class="keywordtype">int</span> regno, <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *buf)
<a name="l00285"></a>00285 {
<a name="l00286"></a>00286   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l00287"></a>00287 
<a name="l00288"></a>00288   <span class="comment">/* The PC is a pseudo reg only for 68HC12 with the memory bank</span>
<a name="l00289"></a>00289 <span class="comment">     addressing mode.  */</span>
<a name="l00290"></a>00290   <span class="keywordflow">if</span> (regno == <a class="code" href="m68hc11-tdep_8c.html#ade8c25b3f7f7826ab6a52a1cfc4a3342">M68HC12_HARD_PC_REGNUM</a>)
<a name="l00291"></a>00291     {
<a name="l00292"></a>00292       <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> pc;
<a name="l00293"></a>00293       <span class="keyword">const</span> <span class="keywordtype">int</span> regsize = 4;
<a name="l00294"></a>00294       <span class="keyword">enum</span> <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7">register_status</a> <a class="code" href="namespaceexsummary.html#aa4a2eed06e51a1f73ff9053ec9f2591e">status</a>;
<a name="l00295"></a>00295 
<a name="l00296"></a>00296       status = <a class="code" href="regcache_8c.html#a959a077d769de1641d4f9754cc7b4a1f">regcache_cooked_read_unsigned</a> (regcache, <a class="code" href="m68hc11-tdep_8c.html#ab0b21dc196c2ba07c9351f43666cba9b">HARD_PC_REGNUM</a>, &amp;pc);
<a name="l00297"></a>00297       <span class="keywordflow">if</span> (status != <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7a0155a2fd1e7e3b53cf1d75cf675d2ea2">REG_VALID</a>)
<a name="l00298"></a>00298         <span class="keywordflow">return</span> <a class="code" href="namespaceexsummary.html#aa4a2eed06e51a1f73ff9053ec9f2591e">status</a>;
<a name="l00299"></a>00299       <span class="keywordflow">if</span> (pc &gt;= 0x8000 &amp;&amp; pc &lt; 0xc000)
<a name="l00300"></a>00300         {
<a name="l00301"></a>00301           <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> page;
<a name="l00302"></a>00302 
<a name="l00303"></a>00303           <a class="code" href="regcache_8c.html#a959a077d769de1641d4f9754cc7b4a1f">regcache_cooked_read_unsigned</a> (regcache, <a class="code" href="m68hc11-tdep_8c.html#acf6cdbbab3f18fd0d80942eb399eab30">HARD_PAGE_REGNUM</a>, &amp;page);
<a name="l00304"></a>00304           pc -= 0x8000;
<a name="l00305"></a>00305           pc += (page &lt;&lt; 14);
<a name="l00306"></a>00306           pc += 0x1000000;
<a name="l00307"></a>00307         }
<a name="l00308"></a>00308       <a class="code" href="defs_8h.html#ad11c013c83c64d9d0ee2e4bdeb1fb62d">store_unsigned_integer</a> (buf, regsize, byte_order, pc);
<a name="l00309"></a>00309       <span class="keywordflow">return</span> <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7a0155a2fd1e7e3b53cf1d75cf675d2ea2">REG_VALID</a>;
<a name="l00310"></a>00310     }
<a name="l00311"></a>00311 
<a name="l00312"></a>00312   <a class="code" href="m68hc11-tdep_8c.html#ad8a05ec17741d63ea6bb2cb44df4920f">m68hc11_initialize_register_info</a> ();
<a name="l00313"></a>00313   
<a name="l00314"></a>00314   <span class="comment">/* Fetch a soft register: translate into a memory read.  */</span>
<a name="l00315"></a>00315   <span class="keywordflow">if</span> (<a class="code" href="m68hc11-tdep_8c.html#ab90df2e17bbb1297c43807fbc12bbc40">soft_regs</a>[regno].<a class="code" href="aarch64-tdep_8c.html#acc128f98d9ceca227038c771308eff39">name</a>)
<a name="l00316"></a>00316     {
<a name="l00317"></a>00317       <a class="code" href="target_8c.html#ac579515fbccfb9e6b1a45766a71c1d4f">target_read_memory</a> (<a class="code" href="m68hc11-tdep_8c.html#ab90df2e17bbb1297c43807fbc12bbc40">soft_regs</a>[regno].addr, buf, 2);
<a name="l00318"></a>00318     }
<a name="l00319"></a>00319   <span class="keywordflow">else</span>
<a name="l00320"></a>00320     {
<a name="l00321"></a>00321       <a class="code" href="gdb__string_8h.html#adb03df3679ce1445e801310614624ccb">memset</a> (buf, 0, 2);
<a name="l00322"></a>00322     }
<a name="l00323"></a>00323 
<a name="l00324"></a>00324   <span class="keywordflow">return</span> <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7a0155a2fd1e7e3b53cf1d75cf675d2ea2">REG_VALID</a>;
<a name="l00325"></a>00325 }
<a name="l00326"></a>00326 
<a name="l00327"></a>00327 <span class="comment">/* Store a pseudo register.  Translate the register store</span>
<a name="l00328"></a>00328 <span class="comment">   into a memory write.  */</span>
<a name="l00329"></a>00329 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00330"></a><a class="code" href="m68hc11-tdep_8c.html#aff017aaea00d7c6e8cd7f2c1cef030e4">00330</a> <a class="code" href="m68hc11-tdep_8c.html#aff017aaea00d7c6e8cd7f2c1cef030e4">m68hc11_pseudo_register_write</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>,
<a name="l00331"></a>00331                                <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l00332"></a>00332                                <span class="keywordtype">int</span> regno, <span class="keyword">const</span> <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *buf)
<a name="l00333"></a>00333 {
<a name="l00334"></a>00334   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l00335"></a>00335 
<a name="l00336"></a>00336   <span class="comment">/* The PC is a pseudo reg only for 68HC12 with the memory bank</span>
<a name="l00337"></a>00337 <span class="comment">     addressing mode.  */</span>
<a name="l00338"></a>00338   <span class="keywordflow">if</span> (regno == <a class="code" href="m68hc11-tdep_8c.html#ade8c25b3f7f7826ab6a52a1cfc4a3342">M68HC12_HARD_PC_REGNUM</a>)
<a name="l00339"></a>00339     {
<a name="l00340"></a>00340       <span class="keyword">const</span> <span class="keywordtype">int</span> regsize = 4;
<a name="l00341"></a>00341       <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *tmp = alloca (regsize);
<a name="l00342"></a>00342       <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc;
<a name="l00343"></a>00343 
<a name="l00344"></a>00344       <a class="code" href="gdb__string_8h.html#a39ebe6a4e122707997e78b549a1e8c5e">memcpy</a> (tmp, buf, regsize);
<a name="l00345"></a>00345       pc = <a class="code" href="defs_8h.html#a99aec65329508b4d449a4f881026f844">extract_unsigned_integer</a> (tmp, regsize, byte_order);
<a name="l00346"></a>00346       <span class="keywordflow">if</span> (pc &gt;= 0x1000000)
<a name="l00347"></a>00347         {
<a name="l00348"></a>00348           pc -= 0x1000000;
<a name="l00349"></a>00349           <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regcache, <a class="code" href="m68hc11-tdep_8c.html#acf6cdbbab3f18fd0d80942eb399eab30">HARD_PAGE_REGNUM</a>,
<a name="l00350"></a>00350                                           (pc &gt;&gt; 14) &amp; 0x0ff);
<a name="l00351"></a>00351           pc &amp;= 0x03fff;
<a name="l00352"></a>00352           <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regcache, <a class="code" href="m68hc11-tdep_8c.html#ab0b21dc196c2ba07c9351f43666cba9b">HARD_PC_REGNUM</a>,
<a name="l00353"></a>00353                                           pc + 0x8000);
<a name="l00354"></a>00354         }
<a name="l00355"></a>00355       <span class="keywordflow">else</span>
<a name="l00356"></a>00356         <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regcache, <a class="code" href="m68hc11-tdep_8c.html#ab0b21dc196c2ba07c9351f43666cba9b">HARD_PC_REGNUM</a>, pc);
<a name="l00357"></a>00357       <span class="keywordflow">return</span>;
<a name="l00358"></a>00358     }
<a name="l00359"></a>00359   
<a name="l00360"></a>00360   <a class="code" href="m68hc11-tdep_8c.html#ad8a05ec17741d63ea6bb2cb44df4920f">m68hc11_initialize_register_info</a> ();
<a name="l00361"></a>00361 
<a name="l00362"></a>00362   <span class="comment">/* Store a soft register: translate into a memory write.  */</span>
<a name="l00363"></a>00363   <span class="keywordflow">if</span> (<a class="code" href="m68hc11-tdep_8c.html#ab90df2e17bbb1297c43807fbc12bbc40">soft_regs</a>[regno].<a class="code" href="aarch64-tdep_8c.html#acc128f98d9ceca227038c771308eff39">name</a>)
<a name="l00364"></a>00364     {
<a name="l00365"></a>00365       <span class="keyword">const</span> <span class="keywordtype">int</span> regsize = 2;
<a name="l00366"></a>00366       <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *tmp = alloca (regsize);
<a name="l00367"></a>00367       <a class="code" href="gdb__string_8h.html#a39ebe6a4e122707997e78b549a1e8c5e">memcpy</a> (tmp, buf, regsize);
<a name="l00368"></a>00368       <a class="code" href="target_8c.html#a7bd38b77fbf87c003396742f775dd2d4">target_write_memory</a> (<a class="code" href="m68hc11-tdep_8c.html#ab90df2e17bbb1297c43807fbc12bbc40">soft_regs</a>[regno].addr, tmp, regsize);
<a name="l00369"></a>00369     }
<a name="l00370"></a>00370 }
<a name="l00371"></a>00371 
<a name="l00372"></a>00372 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00373"></a><a class="code" href="m68hc11-tdep_8c.html#a6e5fb40d15e092d3968f93db8317e88b">00373</a> <a class="code" href="m68hc11-tdep_8c.html#a6e5fb40d15e092d3968f93db8317e88b">m68hc11_register_name</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keywordtype">int</span> reg_nr)
<a name="l00374"></a>00374 {
<a name="l00375"></a>00375   <span class="keywordflow">if</span> (reg_nr == <a class="code" href="m68hc11-tdep_8c.html#ade8c25b3f7f7826ab6a52a1cfc4a3342">M68HC12_HARD_PC_REGNUM</a> &amp;&amp; <a class="code" href="m68hc11-tdep_8c.html#a2409ab54089701cda79ca91dc9174cd3">USE_PAGE_REGISTER</a> (gdbarch))
<a name="l00376"></a>00376     <span class="keywordflow">return</span> <span class="stringliteral">&quot;pc&quot;</span>;
<a name="l00377"></a>00377   <span class="keywordflow">if</span> (reg_nr == <a class="code" href="m68hc11-tdep_8c.html#ab0b21dc196c2ba07c9351f43666cba9b">HARD_PC_REGNUM</a> &amp;&amp; <a class="code" href="m68hc11-tdep_8c.html#a2409ab54089701cda79ca91dc9174cd3">USE_PAGE_REGISTER</a> (gdbarch))
<a name="l00378"></a>00378     <span class="keywordflow">return</span> <span class="stringliteral">&quot;ppc&quot;</span>;
<a name="l00379"></a>00379   
<a name="l00380"></a>00380   <span class="keywordflow">if</span> (reg_nr &lt; 0)
<a name="l00381"></a>00381     <span class="keywordflow">return</span> NULL;
<a name="l00382"></a>00382   <span class="keywordflow">if</span> (reg_nr &gt;= <a class="code" href="m68hc11-tdep_8c.html#a0c6d474a64fa32b385b883990e36cb87">M68HC11_ALL_REGS</a>)
<a name="l00383"></a>00383     <span class="keywordflow">return</span> NULL;
<a name="l00384"></a>00384 
<a name="l00385"></a>00385   <a class="code" href="m68hc11-tdep_8c.html#ad8a05ec17741d63ea6bb2cb44df4920f">m68hc11_initialize_register_info</a> ();
<a name="l00386"></a>00386 
<a name="l00387"></a>00387   <span class="comment">/* If we don&#39;t know the address of a soft register, pretend it</span>
<a name="l00388"></a>00388 <span class="comment">     does not exist.  */</span>
<a name="l00389"></a>00389   <span class="keywordflow">if</span> (reg_nr &gt; <a class="code" href="m68hc11-tdep_8c.html#a22b3f7c98c352e1f276bf3e5720ed08c">M68HC11_LAST_HARD_REG</a> &amp;&amp; <a class="code" href="m68hc11-tdep_8c.html#ab90df2e17bbb1297c43807fbc12bbc40">soft_regs</a>[reg_nr].<a class="code" href="aarch64-tdep_8c.html#acc128f98d9ceca227038c771308eff39">name</a> == 0)
<a name="l00390"></a>00390     <span class="keywordflow">return</span> NULL;
<a name="l00391"></a>00391   <span class="keywordflow">return</span> <a class="code" href="m68hc11-tdep_8c.html#ac59679023dab5abadd72737b146e9c6c">m68hc11_register_names</a>[reg_nr];
<a name="l00392"></a>00392 }
<a name="l00393"></a>00393 
<a name="l00394"></a>00394 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *
<a name="l00395"></a><a class="code" href="m68hc11-tdep_8c.html#ab318bea782f7a9f6273b32627af649a3">00395</a> <a class="code" href="m68hc11-tdep_8c.html#ab318bea782f7a9f6273b32627af649a3">m68hc11_breakpoint_from_pc</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> *pcptr,
<a name="l00396"></a>00396                             <span class="keywordtype">int</span> *lenptr)
<a name="l00397"></a>00397 {
<a name="l00398"></a>00398   <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structbreakpoint.html">breakpoint</a>[] = {0x0};
<a name="l00399"></a>00399 
<a name="l00400"></a>00400   *lenptr = <span class="keyword">sizeof</span> (breakpoint);
<a name="l00401"></a>00401   <span class="keywordflow">return</span> breakpoint;
<a name="l00402"></a>00402 }
<a name="l00403"></a>00403 
<a name="l00404"></a>00404 
<a name="l00405"></a>00405 <span class="comment">/* 68HC11 &amp; 68HC12 prologue analysis.  */</span>
<a name="l00406"></a>00406 
<a name="l00407"></a><a class="code" href="m68hc11-tdep_8c.html#a1513747aab998c6ff21275e62f089ad3">00407</a> <span class="preprocessor">#define MAX_CODES 12</span>
<a name="l00408"></a>00408 <span class="preprocessor"></span>
<a name="l00409"></a>00409 <span class="comment">/* 68HC11 opcodes.  */</span>
<a name="l00410"></a>00410 <span class="preprocessor">#undef M6811_OP_PAGE2</span>
<a name="l00411"></a><a class="code" href="m68hc11-tdep_8c.html#af34218318342a632d36d577d9ed8120d">00411</a> <span class="preprocessor"></span><span class="preprocessor">#define M6811_OP_PAGE2   (0x18)</span>
<a name="l00412"></a><a class="code" href="m68hc11-tdep_8c.html#a6c61f1849d6a6c0add780066c71755ca">00412</a> <span class="preprocessor"></span><span class="preprocessor">#define M6811_OP_LDX     (0xde)</span>
<a name="l00413"></a><a class="code" href="m68hc11-tdep_8c.html#a5b4123d02300d12263694eb2ff407a4d">00413</a> <span class="preprocessor"></span><span class="preprocessor">#define M6811_OP_LDX_EXT (0xfe)</span>
<a name="l00414"></a><a class="code" href="m68hc11-tdep_8c.html#a31b874af33bfa17c7319a839adafbe5f">00414</a> <span class="preprocessor"></span><span class="preprocessor">#define M6811_OP_PSHX    (0x3c)</span>
<a name="l00415"></a><a class="code" href="m68hc11-tdep_8c.html#a389677ee00b44e565aae3c1dca2e8677">00415</a> <span class="preprocessor"></span><span class="preprocessor">#define M6811_OP_STS     (0x9f)</span>
<a name="l00416"></a><a class="code" href="m68hc11-tdep_8c.html#afd04f0a13cd88e668bef4343ac2ed0e0">00416</a> <span class="preprocessor"></span><span class="preprocessor">#define M6811_OP_STS_EXT (0xbf)</span>
<a name="l00417"></a><a class="code" href="m68hc11-tdep_8c.html#a5af463566b62e4bd385f0651b1de99c5">00417</a> <span class="preprocessor"></span><span class="preprocessor">#define M6811_OP_TSX     (0x30)</span>
<a name="l00418"></a><a class="code" href="m68hc11-tdep_8c.html#ae16aa183b82af55b017b711e32843f0c">00418</a> <span class="preprocessor"></span><span class="preprocessor">#define M6811_OP_XGDX    (0x8f)</span>
<a name="l00419"></a><a class="code" href="m68hc11-tdep_8c.html#aba0421d2f94fac38c59a9291325ba961">00419</a> <span class="preprocessor"></span><span class="preprocessor">#define M6811_OP_ADDD    (0xc3)</span>
<a name="l00420"></a><a class="code" href="m68hc11-tdep_8c.html#a4b4d88c018f2d7533ab0bf77b8cd1a9e">00420</a> <span class="preprocessor"></span><span class="preprocessor">#define M6811_OP_TXS     (0x35)</span>
<a name="l00421"></a><a class="code" href="m68hc11-tdep_8c.html#af337b476d8013163a45a0457f56ed98c">00421</a> <span class="preprocessor"></span><span class="preprocessor">#define M6811_OP_DES     (0x34)</span>
<a name="l00422"></a>00422 <span class="preprocessor"></span>
<a name="l00423"></a>00423 <span class="comment">/* 68HC12 opcodes.  */</span>
<a name="l00424"></a><a class="code" href="m68hc11-tdep_8c.html#a0253bd13daa86bc758d9cd3dd009501f">00424</a> <span class="preprocessor">#define M6812_OP_PAGE2   (0x18)</span>
<a name="l00425"></a><a class="code" href="m68hc11-tdep_8c.html#a56568f94cfc93df8b26b1c89abe9cec1">00425</a> <span class="preprocessor"></span><span class="preprocessor">#define M6812_OP_MOVW    (0x01)</span>
<a name="l00426"></a><a class="code" href="m68hc11-tdep_8c.html#aa1d95aab4dc9eb517a2df79760e5edf2">00426</a> <span class="preprocessor"></span><span class="preprocessor">#define M6812_PB_PSHW    (0xae)</span>
<a name="l00427"></a><a class="code" href="m68hc11-tdep_8c.html#a96a689c08e72e1905d060bec4b0de663">00427</a> <span class="preprocessor"></span><span class="preprocessor">#define M6812_OP_STS     (0x5f)</span>
<a name="l00428"></a><a class="code" href="m68hc11-tdep_8c.html#ab638221a370a094a1b8e0cb03c42ae94">00428</a> <span class="preprocessor"></span><span class="preprocessor">#define M6812_OP_STS_EXT (0x7f)</span>
<a name="l00429"></a><a class="code" href="m68hc11-tdep_8c.html#a62473e4928fc25de274f4128ca9ff9e1">00429</a> <span class="preprocessor"></span><span class="preprocessor">#define M6812_OP_LEAS    (0x1b)</span>
<a name="l00430"></a><a class="code" href="m68hc11-tdep_8c.html#af7b1300acf60e5e19ef419e6f3ad698b">00430</a> <span class="preprocessor"></span><span class="preprocessor">#define M6812_OP_PSHX    (0x34)</span>
<a name="l00431"></a><a class="code" href="m68hc11-tdep_8c.html#a81380eb62d4f453d680b38ab798c9b0b">00431</a> <span class="preprocessor"></span><span class="preprocessor">#define M6812_OP_PSHY    (0x35)</span>
<a name="l00432"></a>00432 <span class="preprocessor"></span>
<a name="l00433"></a>00433 <span class="comment">/* Operand extraction.  */</span>
<a name="l00434"></a><a class="code" href="m68hc11-tdep_8c.html#a608169629f172d347fc567d9520ece63">00434</a> <span class="preprocessor">#define OP_DIRECT      (0x100) </span><span class="comment">/* 8-byte direct addressing.  */</span>
<a name="l00435"></a><a class="code" href="m68hc11-tdep_8c.html#a7d70fa35d80e0ccaa3ff831ced9aeeec">00435</a> <span class="preprocessor">#define OP_IMM_LOW     (0x200) </span><span class="comment">/* Low part of 16-bit constant/address.  */</span>
<a name="l00436"></a><a class="code" href="m68hc11-tdep_8c.html#a77092098bc5cc78c95b99b1e45ce97f7">00436</a> <span class="preprocessor">#define OP_IMM_HIGH    (0x300) </span><span class="comment">/* High part of 16-bit constant/address.  */</span>
<a name="l00437"></a><a class="code" href="m68hc11-tdep_8c.html#a98a11eeef7637a08c62fb959b00fd968">00437</a> <span class="preprocessor">#define OP_PBYTE       (0x400) </span><span class="comment">/* 68HC12 indexed operand.  */</span>
<a name="l00438"></a>00438 
<a name="l00439"></a>00439 <span class="comment">/* Identification of the sequence.  */</span>
<a name="l00440"></a><a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefe">00440</a> <span class="keyword">enum</span> <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefe">m6811_seq_type</a>
<a name="l00441"></a>00441 {
<a name="l00442"></a><a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefeae6016f9a291e09b92b58594c00bf85cd">00442</a>   <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefeae6016f9a291e09b92b58594c00bf85cd">P_LAST</a> = 0,
<a name="l00443"></a><a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefeac6d36b5355cefed414289d3b8c0ca649">00443</a>   <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefeac6d36b5355cefed414289d3b8c0ca649">P_SAVE_REG</a>,  <span class="comment">/* Save a register on the stack.  */</span>
<a name="l00444"></a><a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefead6d124d6e22f1d89757bd209e9cc99af">00444</a>   <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefead6d124d6e22f1d89757bd209e9cc99af">P_SET_FRAME</a>, <span class="comment">/* Setup the frame pointer.  */</span>
<a name="l00445"></a><a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefeaca0016c0d3c291ee66f6349caa66d05d">00445</a>   <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefeaca0016c0d3c291ee66f6349caa66d05d">P_LOCAL_1</a>,   <span class="comment">/* Allocate 1 byte for locals.  */</span>
<a name="l00446"></a><a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefea8226eaed2f3ec3227e1381fb2bd8cf77">00446</a>   <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefea8226eaed2f3ec3227e1381fb2bd8cf77">P_LOCAL_2</a>,   <span class="comment">/* Allocate 2 bytes for locals.  */</span>
<a name="l00447"></a><a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefeaa8d4d48f35e1acab3a8c4553fd2ebb0f">00447</a>   <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefeaa8d4d48f35e1acab3a8c4553fd2ebb0f">P_LOCAL_N</a>    <span class="comment">/* Allocate N bytes for locals.  */</span>
<a name="l00448"></a>00448 };
<a name="l00449"></a>00449 
<a name="l00450"></a><a class="code" href="structinsn__sequence.html">00450</a> <span class="keyword">struct </span><a class="code" href="structinsn__sequence.html">insn_sequence</a> {
<a name="l00451"></a><a class="code" href="structinsn__sequence.html#a212b7dd2b90d0df1aa74774b4dfbdedc">00451</a>   <span class="keyword">enum</span> <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefe">m6811_seq_type</a> <a class="code" href="structinsn__sequence.html#a212b7dd2b90d0df1aa74774b4dfbdedc">type</a>;
<a name="l00452"></a><a class="code" href="structinsn__sequence.html#a9d4988af00764f27900d9714c4ad70f0">00452</a>   <span class="keywordtype">unsigned</span> <a class="code" href="structinsn__sequence.html#a9d4988af00764f27900d9714c4ad70f0">length</a>;
<a name="l00453"></a><a class="code" href="structinsn__sequence.html#a91facc8c850c598eaf747c85fac22c42">00453</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="structinsn__sequence.html#a91facc8c850c598eaf747c85fac22c42">code</a>[<a class="code" href="m68hc11-tdep_8c.html#a1513747aab998c6ff21275e62f089ad3">MAX_CODES</a>];
<a name="l00454"></a>00454 };
<a name="l00455"></a>00455 
<a name="l00456"></a>00456 <span class="comment">/* Sequence of instructions in the 68HC11 function prologue.  */</span>
<a name="l00457"></a><a class="code" href="m68hc11-tdep_8c.html#acb3bd9b917ff78269ae65cd4fbd91172">00457</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structinsn__sequence.html">insn_sequence</a> <a class="code" href="m68hc11-tdep_8c.html#acb3bd9b917ff78269ae65cd4fbd91172">m6811_prologue</a>[] = {
<a name="l00458"></a>00458   <span class="comment">/* Sequences to save a soft-register.  */</span>
<a name="l00459"></a>00459   { <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefeac6d36b5355cefed414289d3b8c0ca649">P_SAVE_REG</a>, 3, { <a class="code" href="m68hc11-tdep_8c.html#a6c61f1849d6a6c0add780066c71755ca">M6811_OP_LDX</a>, <a class="code" href="m68hc11-tdep_8c.html#a608169629f172d347fc567d9520ece63">OP_DIRECT</a>,
<a name="l00460"></a>00460                      <a class="code" href="m68hc11-tdep_8c.html#a31b874af33bfa17c7319a839adafbe5f">M6811_OP_PSHX</a> } },
<a name="l00461"></a>00461   { <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefeac6d36b5355cefed414289d3b8c0ca649">P_SAVE_REG</a>, 5, { <a class="code" href="m68hc11-tdep_8c.html#af34218318342a632d36d577d9ed8120d">M6811_OP_PAGE2</a>, <a class="code" href="m68hc11-tdep_8c.html#a6c61f1849d6a6c0add780066c71755ca">M6811_OP_LDX</a>, <a class="code" href="m68hc11-tdep_8c.html#a608169629f172d347fc567d9520ece63">OP_DIRECT</a>,
<a name="l00462"></a>00462                      <a class="code" href="m68hc11-tdep_8c.html#af34218318342a632d36d577d9ed8120d">M6811_OP_PAGE2</a>, <a class="code" href="m68hc11-tdep_8c.html#a31b874af33bfa17c7319a839adafbe5f">M6811_OP_PSHX</a> } },
<a name="l00463"></a>00463   { <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefeac6d36b5355cefed414289d3b8c0ca649">P_SAVE_REG</a>, 4, { <a class="code" href="m68hc11-tdep_8c.html#a5b4123d02300d12263694eb2ff407a4d">M6811_OP_LDX_EXT</a>, <a class="code" href="m68hc11-tdep_8c.html#a77092098bc5cc78c95b99b1e45ce97f7">OP_IMM_HIGH</a>, <a class="code" href="m68hc11-tdep_8c.html#a7d70fa35d80e0ccaa3ff831ced9aeeec">OP_IMM_LOW</a>,
<a name="l00464"></a>00464                      <a class="code" href="m68hc11-tdep_8c.html#a31b874af33bfa17c7319a839adafbe5f">M6811_OP_PSHX</a> } },
<a name="l00465"></a>00465   { <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefeac6d36b5355cefed414289d3b8c0ca649">P_SAVE_REG</a>, 6, { <a class="code" href="m68hc11-tdep_8c.html#af34218318342a632d36d577d9ed8120d">M6811_OP_PAGE2</a>, <a class="code" href="m68hc11-tdep_8c.html#a5b4123d02300d12263694eb2ff407a4d">M6811_OP_LDX_EXT</a>, <a class="code" href="m68hc11-tdep_8c.html#a77092098bc5cc78c95b99b1e45ce97f7">OP_IMM_HIGH</a>, <a class="code" href="m68hc11-tdep_8c.html#a7d70fa35d80e0ccaa3ff831ced9aeeec">OP_IMM_LOW</a>,
<a name="l00466"></a>00466                      <a class="code" href="m68hc11-tdep_8c.html#af34218318342a632d36d577d9ed8120d">M6811_OP_PAGE2</a>, <a class="code" href="m68hc11-tdep_8c.html#a31b874af33bfa17c7319a839adafbe5f">M6811_OP_PSHX</a> } },
<a name="l00467"></a>00467 
<a name="l00468"></a>00468   <span class="comment">/* Sequences to allocate local variables.  */</span>
<a name="l00469"></a>00469   { <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefeaa8d4d48f35e1acab3a8c4553fd2ebb0f">P_LOCAL_N</a>,  7, { <a class="code" href="m68hc11-tdep_8c.html#a5af463566b62e4bd385f0651b1de99c5">M6811_OP_TSX</a>,
<a name="l00470"></a>00470                      <a class="code" href="m68hc11-tdep_8c.html#ae16aa183b82af55b017b711e32843f0c">M6811_OP_XGDX</a>,
<a name="l00471"></a>00471                      <a class="code" href="m68hc11-tdep_8c.html#aba0421d2f94fac38c59a9291325ba961">M6811_OP_ADDD</a>, <a class="code" href="m68hc11-tdep_8c.html#a77092098bc5cc78c95b99b1e45ce97f7">OP_IMM_HIGH</a>, <a class="code" href="m68hc11-tdep_8c.html#a7d70fa35d80e0ccaa3ff831ced9aeeec">OP_IMM_LOW</a>,
<a name="l00472"></a>00472                      <a class="code" href="m68hc11-tdep_8c.html#ae16aa183b82af55b017b711e32843f0c">M6811_OP_XGDX</a>,
<a name="l00473"></a>00473                      <a class="code" href="m68hc11-tdep_8c.html#a4b4d88c018f2d7533ab0bf77b8cd1a9e">M6811_OP_TXS</a> } },
<a name="l00474"></a>00474   { <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefeaa8d4d48f35e1acab3a8c4553fd2ebb0f">P_LOCAL_N</a>, 11, { <a class="code" href="m68hc11-tdep_8c.html#af34218318342a632d36d577d9ed8120d">M6811_OP_PAGE2</a>, <a class="code" href="m68hc11-tdep_8c.html#a5af463566b62e4bd385f0651b1de99c5">M6811_OP_TSX</a>,
<a name="l00475"></a>00475                      <a class="code" href="m68hc11-tdep_8c.html#af34218318342a632d36d577d9ed8120d">M6811_OP_PAGE2</a>, <a class="code" href="m68hc11-tdep_8c.html#ae16aa183b82af55b017b711e32843f0c">M6811_OP_XGDX</a>,
<a name="l00476"></a>00476                      <a class="code" href="m68hc11-tdep_8c.html#aba0421d2f94fac38c59a9291325ba961">M6811_OP_ADDD</a>, <a class="code" href="m68hc11-tdep_8c.html#a77092098bc5cc78c95b99b1e45ce97f7">OP_IMM_HIGH</a>, <a class="code" href="m68hc11-tdep_8c.html#a7d70fa35d80e0ccaa3ff831ced9aeeec">OP_IMM_LOW</a>,
<a name="l00477"></a>00477                      <a class="code" href="m68hc11-tdep_8c.html#af34218318342a632d36d577d9ed8120d">M6811_OP_PAGE2</a>, <a class="code" href="m68hc11-tdep_8c.html#ae16aa183b82af55b017b711e32843f0c">M6811_OP_XGDX</a>,
<a name="l00478"></a>00478                      <a class="code" href="m68hc11-tdep_8c.html#af34218318342a632d36d577d9ed8120d">M6811_OP_PAGE2</a>, <a class="code" href="m68hc11-tdep_8c.html#a4b4d88c018f2d7533ab0bf77b8cd1a9e">M6811_OP_TXS</a> } },
<a name="l00479"></a>00479   { <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefeaca0016c0d3c291ee66f6349caa66d05d">P_LOCAL_1</a>,  1, { <a class="code" href="m68hc11-tdep_8c.html#af337b476d8013163a45a0457f56ed98c">M6811_OP_DES</a> } },
<a name="l00480"></a>00480   { <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefea8226eaed2f3ec3227e1381fb2bd8cf77">P_LOCAL_2</a>,  1, { <a class="code" href="m68hc11-tdep_8c.html#a31b874af33bfa17c7319a839adafbe5f">M6811_OP_PSHX</a> } },
<a name="l00481"></a>00481   { <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefea8226eaed2f3ec3227e1381fb2bd8cf77">P_LOCAL_2</a>,  2, { <a class="code" href="m68hc11-tdep_8c.html#af34218318342a632d36d577d9ed8120d">M6811_OP_PAGE2</a>, <a class="code" href="m68hc11-tdep_8c.html#a31b874af33bfa17c7319a839adafbe5f">M6811_OP_PSHX</a> } },
<a name="l00482"></a>00482 
<a name="l00483"></a>00483   <span class="comment">/* Initialize the frame pointer.  */</span>
<a name="l00484"></a>00484   { <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefead6d124d6e22f1d89757bd209e9cc99af">P_SET_FRAME</a>, 2, { <a class="code" href="m68hc11-tdep_8c.html#a389677ee00b44e565aae3c1dca2e8677">M6811_OP_STS</a>, <a class="code" href="m68hc11-tdep_8c.html#a608169629f172d347fc567d9520ece63">OP_DIRECT</a> } },
<a name="l00485"></a>00485   { <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefead6d124d6e22f1d89757bd209e9cc99af">P_SET_FRAME</a>, 3, { <a class="code" href="m68hc11-tdep_8c.html#afd04f0a13cd88e668bef4343ac2ed0e0">M6811_OP_STS_EXT</a>, <a class="code" href="m68hc11-tdep_8c.html#a77092098bc5cc78c95b99b1e45ce97f7">OP_IMM_HIGH</a>, <a class="code" href="m68hc11-tdep_8c.html#a7d70fa35d80e0ccaa3ff831ced9aeeec">OP_IMM_LOW</a> } },
<a name="l00486"></a>00486   { <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefeae6016f9a291e09b92b58594c00bf85cd">P_LAST</a>, 0, { 0 } }
<a name="l00487"></a>00487 };
<a name="l00488"></a>00488 
<a name="l00489"></a>00489 
<a name="l00490"></a>00490 <span class="comment">/* Sequence of instructions in the 68HC12 function prologue.  */</span>
<a name="l00491"></a><a class="code" href="m68hc11-tdep_8c.html#ab463f079985eed834a5b7a5b3faf56c8">00491</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structinsn__sequence.html">insn_sequence</a> <a class="code" href="m68hc11-tdep_8c.html#ab463f079985eed834a5b7a5b3faf56c8">m6812_prologue</a>[] = {  
<a name="l00492"></a>00492   { <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefeac6d36b5355cefed414289d3b8c0ca649">P_SAVE_REG</a>,  5, { <a class="code" href="m68hc11-tdep_8c.html#a0253bd13daa86bc758d9cd3dd009501f">M6812_OP_PAGE2</a>, <a class="code" href="m68hc11-tdep_8c.html#a56568f94cfc93df8b26b1c89abe9cec1">M6812_OP_MOVW</a>, <a class="code" href="m68hc11-tdep_8c.html#aa1d95aab4dc9eb517a2df79760e5edf2">M6812_PB_PSHW</a>,
<a name="l00493"></a>00493                       <a class="code" href="m68hc11-tdep_8c.html#a77092098bc5cc78c95b99b1e45ce97f7">OP_IMM_HIGH</a>, <a class="code" href="m68hc11-tdep_8c.html#a7d70fa35d80e0ccaa3ff831ced9aeeec">OP_IMM_LOW</a> } },
<a name="l00494"></a>00494   { <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefead6d124d6e22f1d89757bd209e9cc99af">P_SET_FRAME</a>, 2, { <a class="code" href="m68hc11-tdep_8c.html#a96a689c08e72e1905d060bec4b0de663">M6812_OP_STS</a>, <a class="code" href="m68hc11-tdep_8c.html#a608169629f172d347fc567d9520ece63">OP_DIRECT</a> } },
<a name="l00495"></a>00495   { <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefead6d124d6e22f1d89757bd209e9cc99af">P_SET_FRAME</a>, 3, { <a class="code" href="m68hc11-tdep_8c.html#ab638221a370a094a1b8e0cb03c42ae94">M6812_OP_STS_EXT</a>, <a class="code" href="m68hc11-tdep_8c.html#a77092098bc5cc78c95b99b1e45ce97f7">OP_IMM_HIGH</a>, <a class="code" href="m68hc11-tdep_8c.html#a7d70fa35d80e0ccaa3ff831ced9aeeec">OP_IMM_LOW</a> } },
<a name="l00496"></a>00496   { <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefeaa8d4d48f35e1acab3a8c4553fd2ebb0f">P_LOCAL_N</a>,   2, { <a class="code" href="m68hc11-tdep_8c.html#a62473e4928fc25de274f4128ca9ff9e1">M6812_OP_LEAS</a>, <a class="code" href="m68hc11-tdep_8c.html#a98a11eeef7637a08c62fb959b00fd968">OP_PBYTE</a> } },
<a name="l00497"></a>00497   { <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefea8226eaed2f3ec3227e1381fb2bd8cf77">P_LOCAL_2</a>,   1, { <a class="code" href="m68hc11-tdep_8c.html#af7b1300acf60e5e19ef419e6f3ad698b">M6812_OP_PSHX</a> } },
<a name="l00498"></a>00498   { <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefea8226eaed2f3ec3227e1381fb2bd8cf77">P_LOCAL_2</a>,   1, { <a class="code" href="m68hc11-tdep_8c.html#a81380eb62d4f453d680b38ab798c9b0b">M6812_OP_PSHY</a> } },
<a name="l00499"></a>00499   { <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefeae6016f9a291e09b92b58594c00bf85cd">P_LAST</a>, 0 }
<a name="l00500"></a>00500 };
<a name="l00501"></a>00501 
<a name="l00502"></a>00502 
<a name="l00503"></a>00503 <span class="comment">/* Analyze the sequence of instructions starting at the given address.</span>
<a name="l00504"></a>00504 <span class="comment">   Returns a pointer to the sequence when it is recognized and</span>
<a name="l00505"></a>00505 <span class="comment">   the optional value (constant/address) associated with it.  */</span>
<a name="l00506"></a>00506 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structinsn__sequence.html">insn_sequence</a> *
<a name="l00507"></a><a class="code" href="m68hc11-tdep_8c.html#aa92f2ff26f28e0bdd2d626f1fb812908">00507</a> <a class="code" href="m68hc11-tdep_8c.html#aa92f2ff26f28e0bdd2d626f1fb812908">m68hc11_analyze_instruction</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>,
<a name="l00508"></a>00508                              <span class="keyword">struct</span> <a class="code" href="structinsn__sequence.html">insn_sequence</a> *seq, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc,
<a name="l00509"></a>00509                              <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> *val)
<a name="l00510"></a>00510 {
<a name="l00511"></a>00511   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l00512"></a>00512   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="structbuffer.html">buffer</a>[<a class="code" href="m68hc11-tdep_8c.html#a1513747aab998c6ff21275e62f089ad3">MAX_CODES</a>];
<a name="l00513"></a>00513   <span class="keywordtype">unsigned</span> bufsize;
<a name="l00514"></a>00514   <span class="keywordtype">unsigned</span> j;
<a name="l00515"></a>00515   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> cur_val;
<a name="l00516"></a>00516   <span class="keywordtype">short</span> v = 0;
<a name="l00517"></a>00517 
<a name="l00518"></a>00518   bufsize = 0;
<a name="l00519"></a>00519   <span class="keywordflow">for</span> (; seq-&gt;<a class="code" href="structinsn__sequence.html#a212b7dd2b90d0df1aa74774b4dfbdedc">type</a> != <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefeae6016f9a291e09b92b58594c00bf85cd">P_LAST</a>; seq++)
<a name="l00520"></a>00520     {
<a name="l00521"></a>00521       cur_val = 0;
<a name="l00522"></a>00522       <span class="keywordflow">for</span> (j = 0; j &lt; seq-&gt;<a class="code" href="structinsn__sequence.html#a9d4988af00764f27900d9714c4ad70f0">length</a>; j++)
<a name="l00523"></a>00523         {
<a name="l00524"></a>00524           <span class="keywordflow">if</span> (bufsize &lt; j + 1)
<a name="l00525"></a>00525             {
<a name="l00526"></a>00526               buffer[bufsize] = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (pc + bufsize,
<a name="l00527"></a>00527                                                               1, byte_order);
<a name="l00528"></a>00528               bufsize++;
<a name="l00529"></a>00529             }
<a name="l00530"></a>00530           <span class="comment">/* Continue while we match the opcode.  */</span>
<a name="l00531"></a>00531           <span class="keywordflow">if</span> (seq-&gt;<a class="code" href="structinsn__sequence.html#a91facc8c850c598eaf747c85fac22c42">code</a>[j] == buffer[j])
<a name="l00532"></a>00532             <span class="keywordflow">continue</span>;
<a name="l00533"></a>00533           
<a name="l00534"></a>00534           <span class="keywordflow">if</span> ((seq-&gt;<a class="code" href="structinsn__sequence.html#a91facc8c850c598eaf747c85fac22c42">code</a>[j] &amp; 0xf00) == 0)
<a name="l00535"></a>00535             <span class="keywordflow">break</span>;
<a name="l00536"></a>00536           
<a name="l00537"></a>00537           <span class="comment">/* Extract a sequence parameter (address or constant).  */</span>
<a name="l00538"></a>00538           <span class="keywordflow">switch</span> (seq-&gt;<a class="code" href="structinsn__sequence.html#a91facc8c850c598eaf747c85fac22c42">code</a>[j])
<a name="l00539"></a>00539             {
<a name="l00540"></a>00540             <span class="keywordflow">case</span> <a class="code" href="m68hc11-tdep_8c.html#a608169629f172d347fc567d9520ece63">OP_DIRECT</a>:
<a name="l00541"></a>00541               cur_val = (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>) buffer[j];
<a name="l00542"></a>00542               <span class="keywordflow">break</span>;
<a name="l00543"></a>00543 
<a name="l00544"></a>00544             <span class="keywordflow">case</span> <a class="code" href="m68hc11-tdep_8c.html#a77092098bc5cc78c95b99b1e45ce97f7">OP_IMM_HIGH</a>:
<a name="l00545"></a>00545               cur_val = cur_val &amp; 0x0ff;
<a name="l00546"></a>00546               cur_val |= (buffer[j] &lt;&lt; 8);
<a name="l00547"></a>00547               <span class="keywordflow">break</span>;
<a name="l00548"></a>00548 
<a name="l00549"></a>00549             <span class="keywordflow">case</span> <a class="code" href="m68hc11-tdep_8c.html#a7d70fa35d80e0ccaa3ff831ced9aeeec">OP_IMM_LOW</a>:
<a name="l00550"></a>00550               cur_val &amp;= 0x0ff00;
<a name="l00551"></a>00551               cur_val |= buffer[j];
<a name="l00552"></a>00552               <span class="keywordflow">break</span>;
<a name="l00553"></a>00553 
<a name="l00554"></a>00554             <span class="keywordflow">case</span> <a class="code" href="m68hc11-tdep_8c.html#a98a11eeef7637a08c62fb959b00fd968">OP_PBYTE</a>:
<a name="l00555"></a>00555               <span class="keywordflow">if</span> ((buffer[j] &amp; 0xE0) == 0x80)
<a name="l00556"></a>00556                 {
<a name="l00557"></a>00557                   v = buffer[j] &amp; 0x1f;
<a name="l00558"></a>00558                   <span class="keywordflow">if</span> (v &amp; 0x10)
<a name="l00559"></a>00559                     v |= 0xfff0;
<a name="l00560"></a>00560                 }
<a name="l00561"></a>00561               <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((buffer[j] &amp; 0xfe) == 0xf0)
<a name="l00562"></a>00562                 {
<a name="l00563"></a>00563                   v = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (pc + j + 1, 1, byte_order);
<a name="l00564"></a>00564                   <span class="keywordflow">if</span> (buffer[j] &amp; 1)
<a name="l00565"></a>00565                     v |= 0xff00;
<a name="l00566"></a>00566                 }
<a name="l00567"></a>00567               <span class="keywordflow">else</span> <span class="keywordflow">if</span> (buffer[j] == 0xf2)
<a name="l00568"></a>00568                 {
<a name="l00569"></a>00569                   v = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (pc + j + 1, 2, byte_order);
<a name="l00570"></a>00570                 }
<a name="l00571"></a>00571               cur_val = v;
<a name="l00572"></a>00572               <span class="keywordflow">break</span>;
<a name="l00573"></a>00573             }
<a name="l00574"></a>00574         }
<a name="l00575"></a>00575 
<a name="l00576"></a>00576       <span class="comment">/* We have a full match.  */</span>
<a name="l00577"></a>00577       <span class="keywordflow">if</span> (j == seq-&gt;<a class="code" href="structinsn__sequence.html#a9d4988af00764f27900d9714c4ad70f0">length</a>)
<a name="l00578"></a>00578         {
<a name="l00579"></a>00579           *val = cur_val;
<a name="l00580"></a>00580           <span class="keywordflow">return</span> seq;
<a name="l00581"></a>00581         }
<a name="l00582"></a>00582     }
<a name="l00583"></a>00583   <span class="keywordflow">return</span> 0;
<a name="l00584"></a>00584 }
<a name="l00585"></a>00585 
<a name="l00586"></a>00586 <span class="comment">/* Return the instruction that the function at the PC is using.  */</span>
<a name="l00587"></a>00587 <span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="m68hc11-tdep_8c.html#a45c70eecdda974c7933a01918af12ade">insn_return_kind</a>
<a name="l00588"></a><a class="code" href="m68hc11-tdep_8c.html#a6d4bdfae267014167e5ca82138e505e9">00588</a> <a class="code" href="m68hc11-tdep_8c.html#a6d4bdfae267014167e5ca82138e505e9">m68hc11_get_return_insn</a> (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc)
<a name="l00589"></a>00589 {
<a name="l00590"></a>00590   <span class="keyword">struct </span><a class="code" href="structbound__minimal__symbol.html">bound_minimal_symbol</a> sym;
<a name="l00591"></a>00591 
<a name="l00592"></a>00592   <span class="comment">/* A flag indicating that this is a STO_M68HC12_FAR or STO_M68HC12_INTERRUPT</span>
<a name="l00593"></a>00593 <span class="comment">     function is stored by elfread.c in the high bit of the info field.</span>
<a name="l00594"></a>00594 <span class="comment">     Use this to decide which instruction the function uses to return.  */</span>
<a name="l00595"></a>00595   sym = <a class="code" href="minsyms_8c.html#ad4b48b6ef6c913138a8ac33f8c3cfeb2">lookup_minimal_symbol_by_pc</a> (pc);
<a name="l00596"></a>00596   <span class="keywordflow">if</span> (sym.minsym == 0)
<a name="l00597"></a>00597     <span class="keywordflow">return</span> <a class="code" href="m68hc11-tdep_8c.html#a45c70eecdda974c7933a01918af12adea4493f97431450828eeb9e66dbe2012ae">RETURN_RTS</a>;
<a name="l00598"></a>00598 
<a name="l00599"></a>00599   <span class="keywordflow">if</span> (<a class="code" href="m68hc11-tdep_8c.html#a7d201705a2c8a239e8743437c654970d">MSYMBOL_IS_RTC</a> (sym.minsym))
<a name="l00600"></a>00600     <span class="keywordflow">return</span> <a class="code" href="m68hc11-tdep_8c.html#a45c70eecdda974c7933a01918af12adea55325867141f6dd80262dfe5bbf4bb45">RETURN_RTC</a>;
<a name="l00601"></a>00601   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="m68hc11-tdep_8c.html#a6567d059204a77e1f066db3b131e05bb">MSYMBOL_IS_RTI</a> (sym.minsym))
<a name="l00602"></a>00602     <span class="keywordflow">return</span> <a class="code" href="m68hc11-tdep_8c.html#a45c70eecdda974c7933a01918af12adea9196c903e6643c72a678ccc792500f67">RETURN_RTI</a>;
<a name="l00603"></a>00603   <span class="keywordflow">else</span>
<a name="l00604"></a>00604     <span class="keywordflow">return</span> <a class="code" href="m68hc11-tdep_8c.html#a45c70eecdda974c7933a01918af12adea4493f97431450828eeb9e66dbe2012ae">RETURN_RTS</a>;
<a name="l00605"></a>00605 }
<a name="l00606"></a>00606 
<a name="l00607"></a>00607 <span class="comment">/* Analyze the function prologue to find some information</span>
<a name="l00608"></a>00608 <span class="comment">   about the function:</span>
<a name="l00609"></a>00609 <span class="comment">    - the PC of the first line (for m68hc11_skip_prologue)</span>
<a name="l00610"></a>00610 <span class="comment">    - the offset of the previous frame saved address (from current frame)</span>
<a name="l00611"></a>00611 <span class="comment">    - the soft registers which are pushed.  */</span>
<a name="l00612"></a>00612 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l00613"></a><a class="code" href="m68hc11-tdep_8c.html#afe28a6f6d724c8ad71b0dfd6eee0694d">00613</a> <a class="code" href="m68hc11-tdep_8c.html#afe28a6f6d724c8ad71b0dfd6eee0694d">m68hc11_scan_prologue</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc,
<a name="l00614"></a>00614                        <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> current_pc, <span class="keyword">struct</span> <a class="code" href="structm68hc11__unwind__cache.html">m68hc11_unwind_cache</a> *info)
<a name="l00615"></a>00615 {
<a name="l00616"></a>00616   <a class="code" href="defs_8h.html#ac7647a3f71533007c9e128f3ddda1987">LONGEST</a> save_addr;
<a name="l00617"></a>00617   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> func_end;
<a name="l00618"></a>00618   <span class="keywordtype">int</span> <a class="code" href="go32-nat_8c.html#a854352f53b148adc24983a58a1866d66">size</a>;
<a name="l00619"></a>00619   <span class="keywordtype">int</span> found_frame_point;
<a name="l00620"></a>00620   <span class="keywordtype">int</span> saved_reg;
<a name="l00621"></a>00621   <span class="keywordtype">int</span> done = 0;
<a name="l00622"></a>00622   <span class="keyword">struct </span><a class="code" href="structinsn__sequence.html">insn_sequence</a> *seq_table;
<a name="l00623"></a>00623 
<a name="l00624"></a>00624   info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a6589ad6a64815bbc5a5adf168fa630f6">size</a> = 0;
<a name="l00625"></a>00625   info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#ad4e3d6b4d5a401a9735bfe061b7b6221">sp_offset</a> = 0;
<a name="l00626"></a>00626   <span class="keywordflow">if</span> (pc &gt;= current_pc)
<a name="l00627"></a>00627     <span class="keywordflow">return</span> current_pc;
<a name="l00628"></a>00628 
<a name="l00629"></a>00629   size = 0;
<a name="l00630"></a>00630 
<a name="l00631"></a>00631   <a class="code" href="m68hc11-tdep_8c.html#ad8a05ec17741d63ea6bb2cb44df4920f">m68hc11_initialize_register_info</a> ();
<a name="l00632"></a>00632   <span class="keywordflow">if</span> (pc == 0)
<a name="l00633"></a>00633     {
<a name="l00634"></a>00634       info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a6589ad6a64815bbc5a5adf168fa630f6">size</a> = 0;
<a name="l00635"></a>00635       <span class="keywordflow">return</span> pc;
<a name="l00636"></a>00636     }
<a name="l00637"></a>00637 
<a name="l00638"></a>00638   seq_table = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch)-&gt;<a class="code" href="structgdbarch__tdep.html#af30c019ad5ee85ed87a69a6496881be1">prologue</a>;
<a name="l00639"></a>00639   
<a name="l00640"></a>00640   <span class="comment">/* The 68hc11 stack is as follows:</span>
<a name="l00641"></a>00641 <span class="comment"></span>
<a name="l00642"></a>00642 <span class="comment"></span>
<a name="l00643"></a>00643 <span class="comment">     |           |</span>
<a name="l00644"></a>00644 <span class="comment">     +-----------+</span>
<a name="l00645"></a>00645 <span class="comment">     |           |</span>
<a name="l00646"></a>00646 <span class="comment">     | args      |</span>
<a name="l00647"></a>00647 <span class="comment">     |           |</span>
<a name="l00648"></a>00648 <span class="comment">     +-----------+</span>
<a name="l00649"></a>00649 <span class="comment">     | PC-return |</span>
<a name="l00650"></a>00650 <span class="comment">     +-----------+</span>
<a name="l00651"></a>00651 <span class="comment">     | Old frame |</span>
<a name="l00652"></a>00652 <span class="comment">     +-----------+</span>
<a name="l00653"></a>00653 <span class="comment">     |           |</span>
<a name="l00654"></a>00654 <span class="comment">     | Locals    |</span>
<a name="l00655"></a>00655 <span class="comment">     |           |</span>
<a name="l00656"></a>00656 <span class="comment">     +-----------+ &lt;--- current frame</span>
<a name="l00657"></a>00657 <span class="comment">     |           |</span>
<a name="l00658"></a>00658 <span class="comment"></span>
<a name="l00659"></a>00659 <span class="comment">     With most processors (like 68K) the previous frame can be computed</span>
<a name="l00660"></a>00660 <span class="comment">     easily because it is always at a fixed offset (see link/unlink).</span>
<a name="l00661"></a>00661 <span class="comment">     That is, locals are accessed with negative offsets, arguments are</span>
<a name="l00662"></a>00662 <span class="comment">     accessed with positive ones.  Since 68hc11 only supports offsets</span>
<a name="l00663"></a>00663 <span class="comment">     in the range [0..255], the frame is defined at the bottom of</span>
<a name="l00664"></a>00664 <span class="comment">     locals (see picture).</span>
<a name="l00665"></a>00665 <span class="comment"></span>
<a name="l00666"></a>00666 <span class="comment">     The purpose of the analysis made here is to find out the size</span>
<a name="l00667"></a>00667 <span class="comment">     of locals in this function.  An alternative to this is to use</span>
<a name="l00668"></a>00668 <span class="comment">     DWARF2 info.  This would be better but I don&#39;t know how to</span>
<a name="l00669"></a>00669 <span class="comment">     access dwarf2 debug from this function.</span>
<a name="l00670"></a>00670 <span class="comment">     </span>
<a name="l00671"></a>00671 <span class="comment">     Walk from the function entry point to the point where we save</span>
<a name="l00672"></a>00672 <span class="comment">     the frame.  While walking instructions, compute the size of bytes</span>
<a name="l00673"></a>00673 <span class="comment">     which are pushed.  This gives us the index to access the previous</span>
<a name="l00674"></a>00674 <span class="comment">     frame.</span>
<a name="l00675"></a>00675 <span class="comment"></span>
<a name="l00676"></a>00676 <span class="comment">     We limit the search to 128 bytes so that the algorithm is bounded</span>
<a name="l00677"></a>00677 <span class="comment">     in case of random and wrong code.  We also stop and abort if</span>
<a name="l00678"></a>00678 <span class="comment">     we find an instruction which is not supposed to appear in the</span>
<a name="l00679"></a>00679 <span class="comment">     prologue (as generated by gcc 2.95, 2.96).  */</span>
<a name="l00680"></a>00680 
<a name="l00681"></a>00681   func_end = pc + 128;
<a name="l00682"></a>00682   found_frame_point = 0;
<a name="l00683"></a>00683   info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a6589ad6a64815bbc5a5adf168fa630f6">size</a> = 0;
<a name="l00684"></a>00684   save_addr = 0;
<a name="l00685"></a>00685   <span class="keywordflow">while</span> (!done &amp;&amp; pc + 2 &lt; func_end)
<a name="l00686"></a>00686     {
<a name="l00687"></a>00687       <span class="keyword">struct </span><a class="code" href="structinsn__sequence.html">insn_sequence</a> *seq;
<a name="l00688"></a>00688       <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> val;
<a name="l00689"></a>00689 
<a name="l00690"></a>00690       seq = <a class="code" href="m68hc11-tdep_8c.html#aa92f2ff26f28e0bdd2d626f1fb812908">m68hc11_analyze_instruction</a> (gdbarch, seq_table, pc, &amp;val);
<a name="l00691"></a>00691       <span class="keywordflow">if</span> (seq == 0)
<a name="l00692"></a>00692         <span class="keywordflow">break</span>;
<a name="l00693"></a>00693 
<a name="l00694"></a>00694       <span class="comment">/* If we are within the instruction group, we can&#39;t advance the</span>
<a name="l00695"></a>00695 <span class="comment">         pc nor the stack offset.  Otherwise the caller&#39;s stack computed</span>
<a name="l00696"></a>00696 <span class="comment">         from the current stack can be wrong.  */</span>
<a name="l00697"></a>00697       <span class="keywordflow">if</span> (pc + seq-&gt;<a class="code" href="structinsn__sequence.html#a9d4988af00764f27900d9714c4ad70f0">length</a> &gt; current_pc)
<a name="l00698"></a>00698         <span class="keywordflow">break</span>;
<a name="l00699"></a>00699 
<a name="l00700"></a>00700       pc = pc + seq-&gt;<a class="code" href="structinsn__sequence.html#a9d4988af00764f27900d9714c4ad70f0">length</a>;
<a name="l00701"></a>00701       <span class="keywordflow">if</span> (seq-&gt;<a class="code" href="structinsn__sequence.html#a212b7dd2b90d0df1aa74774b4dfbdedc">type</a> == <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefeac6d36b5355cefed414289d3b8c0ca649">P_SAVE_REG</a>)
<a name="l00702"></a>00702         {
<a name="l00703"></a>00703           <span class="keywordflow">if</span> (found_frame_point)
<a name="l00704"></a>00704             {
<a name="l00705"></a>00705               saved_reg = <a class="code" href="m68hc11-tdep_8c.html#aa820d8e4b5b2e12a938a735932a19b5a">m68hc11_which_soft_register</a> (val);
<a name="l00706"></a>00706               <span class="keywordflow">if</span> (saved_reg &lt; 0)
<a name="l00707"></a>00707                 <span class="keywordflow">break</span>;
<a name="l00708"></a>00708 
<a name="l00709"></a>00709               save_addr -= 2;
<a name="l00710"></a>00710               <span class="keywordflow">if</span> (info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5e54634f5355019f147da6aebb5a8ffd">saved_regs</a>)
<a name="l00711"></a>00711                 info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5e54634f5355019f147da6aebb5a8ffd">saved_regs</a>[saved_reg].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = save_addr;
<a name="l00712"></a>00712             }
<a name="l00713"></a>00713           <span class="keywordflow">else</span>
<a name="l00714"></a>00714             {
<a name="l00715"></a>00715               size += 2;
<a name="l00716"></a>00716             }
<a name="l00717"></a>00717         }
<a name="l00718"></a>00718       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (seq-&gt;<a class="code" href="structinsn__sequence.html#a212b7dd2b90d0df1aa74774b4dfbdedc">type</a> == <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefead6d124d6e22f1d89757bd209e9cc99af">P_SET_FRAME</a>)
<a name="l00719"></a>00719         {
<a name="l00720"></a>00720           found_frame_point = 1;
<a name="l00721"></a>00721           info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a6589ad6a64815bbc5a5adf168fa630f6">size</a> = <a class="code" href="go32-nat_8c.html#a854352f53b148adc24983a58a1866d66">size</a>;
<a name="l00722"></a>00722         }
<a name="l00723"></a>00723       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (seq-&gt;<a class="code" href="structinsn__sequence.html#a212b7dd2b90d0df1aa74774b4dfbdedc">type</a> == <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefeaca0016c0d3c291ee66f6349caa66d05d">P_LOCAL_1</a>)
<a name="l00724"></a>00724         {
<a name="l00725"></a>00725           size += 1;
<a name="l00726"></a>00726         }
<a name="l00727"></a>00727       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (seq-&gt;<a class="code" href="structinsn__sequence.html#a212b7dd2b90d0df1aa74774b4dfbdedc">type</a> == <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefea8226eaed2f3ec3227e1381fb2bd8cf77">P_LOCAL_2</a>)
<a name="l00728"></a>00728         {
<a name="l00729"></a>00729           size += 2;
<a name="l00730"></a>00730         }
<a name="l00731"></a>00731       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (seq-&gt;<a class="code" href="structinsn__sequence.html#a212b7dd2b90d0df1aa74774b4dfbdedc">type</a> == <a class="code" href="m68hc11-tdep_8c.html#a741d49adf26f7cf5af6771b51478cefeaa8d4d48f35e1acab3a8c4553fd2ebb0f">P_LOCAL_N</a>)
<a name="l00732"></a>00732         {
<a name="l00733"></a>00733           <span class="comment">/* Stack pointer is decremented for the allocation.  */</span>
<a name="l00734"></a>00734           <span class="keywordflow">if</span> (val &amp; 0x8000)
<a name="l00735"></a>00735             size -= (<a class="code" href="command_8h.html#a74f207b5aa4ba51c3a2ad59b219a423b">int</a>) (val) | 0xffff0000;
<a name="l00736"></a>00736           <span class="keywordflow">else</span>
<a name="l00737"></a>00737             size -= val;
<a name="l00738"></a>00738         }
<a name="l00739"></a>00739     }
<a name="l00740"></a>00740   <span class="keywordflow">if</span> (found_frame_point == 0)
<a name="l00741"></a>00741     info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#ad4e3d6b4d5a401a9735bfe061b7b6221">sp_offset</a> = <a class="code" href="go32-nat_8c.html#a854352f53b148adc24983a58a1866d66">size</a>;
<a name="l00742"></a>00742   <span class="keywordflow">else</span>
<a name="l00743"></a>00743     info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#ad4e3d6b4d5a401a9735bfe061b7b6221">sp_offset</a> = -1;
<a name="l00744"></a>00744   <span class="keywordflow">return</span> pc;
<a name="l00745"></a>00745 }
<a name="l00746"></a>00746 
<a name="l00747"></a>00747 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l00748"></a><a class="code" href="m68hc11-tdep_8c.html#a32a9610d10ea241d7aa2413e7547520d">00748</a> <a class="code" href="m68hc11-tdep_8c.html#a32a9610d10ea241d7aa2413e7547520d">m68hc11_skip_prologue</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc)
<a name="l00749"></a>00749 {
<a name="l00750"></a>00750   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> func_addr, func_end;
<a name="l00751"></a>00751   <span class="keyword">struct </span><a class="code" href="structsymtab__and__line.html">symtab_and_line</a> sal;
<a name="l00752"></a>00752   <span class="keyword">struct </span><a class="code" href="structm68hc11__unwind__cache.html">m68hc11_unwind_cache</a> tmp_cache = { 0 };
<a name="l00753"></a>00753 
<a name="l00754"></a>00754   <span class="comment">/* If we have line debugging information, then the end of the</span>
<a name="l00755"></a>00755 <span class="comment">     prologue should be the first assembly instruction of the</span>
<a name="l00756"></a>00756 <span class="comment">     first source line.  */</span>
<a name="l00757"></a>00757   <span class="keywordflow">if</span> (<a class="code" href="blockframe_8c.html#a2dae2257ad1417604d2c26f8b9071ca9">find_pc_partial_function</a> (pc, NULL, &amp;func_addr, &amp;func_end))
<a name="l00758"></a>00758     {
<a name="l00759"></a>00759       sal = <a class="code" href="symtab_8c.html#ad9bbd85700e3d7fa50e7ba0e32f37846">find_pc_line</a> (func_addr, 0);
<a name="l00760"></a>00760       <span class="keywordflow">if</span> (sal.<a class="code" href="structsymtab__and__line.html#ab4a806871b9f98729ab7c9c2c345b602">end</a> &amp;&amp; sal.<a class="code" href="structsymtab__and__line.html#ab4a806871b9f98729ab7c9c2c345b602">end</a> &lt; func_end)
<a name="l00761"></a>00761         <span class="keywordflow">return</span> sal.<a class="code" href="structsymtab__and__line.html#ab4a806871b9f98729ab7c9c2c345b602">end</a>;
<a name="l00762"></a>00762     }
<a name="l00763"></a>00763 
<a name="l00764"></a>00764   pc = <a class="code" href="m68hc11-tdep_8c.html#afe28a6f6d724c8ad71b0dfd6eee0694d">m68hc11_scan_prologue</a> (gdbarch, pc, (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>) -1, &amp;tmp_cache);
<a name="l00765"></a>00765   <span class="keywordflow">return</span> <a class="code" href="structm68hc11__unwind__cache.html#a3053b2e23e75b8981e83b0086e093ab2">pc</a>;
<a name="l00766"></a>00766 }
<a name="l00767"></a>00767 
<a name="l00768"></a>00768 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l00769"></a><a class="code" href="m68hc11-tdep_8c.html#addd9af0eb389d438d990c86dd5fb0a50">00769</a> <a class="code" href="m68hc11-tdep_8c.html#addd9af0eb389d438d990c86dd5fb0a50">m68hc11_unwind_pc</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *next_frame)
<a name="l00770"></a>00770 {
<a name="l00771"></a>00771   <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> <a class="code" href="structm68hc11__unwind__cache.html#a3053b2e23e75b8981e83b0086e093ab2">pc</a>;
<a name="l00772"></a>00772 
<a name="l00773"></a>00773   pc = <a class="code" href="frame_8c.html#a294f6912118884550787fd59f2a08ff6">frame_unwind_register_unsigned</a> (next_frame,
<a name="l00774"></a>00774                                        <a class="code" href="gdbarch_8c.html#a07a162ebafea1269eb8f341db44e53e7">gdbarch_pc_regnum</a> (gdbarch));
<a name="l00775"></a>00775   <span class="keywordflow">return</span> <a class="code" href="structm68hc11__unwind__cache.html#a3053b2e23e75b8981e83b0086e093ab2">pc</a>;
<a name="l00776"></a>00776 }
<a name="l00777"></a>00777 
<a name="l00778"></a>00778 <span class="comment">/* Put here the code to store, into fi-&gt;saved_regs, the addresses of</span>
<a name="l00779"></a>00779 <span class="comment">   the saved registers of frame described by FRAME_INFO.  This</span>
<a name="l00780"></a>00780 <span class="comment">   includes special registers such as pc and fp saved in special ways</span>
<a name="l00781"></a>00781 <span class="comment">   in the stack frame.  sp is even more special: the address we return</span>
<a name="l00782"></a>00782 <span class="comment">   for it IS the sp for the next frame.  */</span>
<a name="l00783"></a>00783 
<a name="l00784"></a>00784 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structm68hc11__unwind__cache.html">m68hc11_unwind_cache</a> *
<a name="l00785"></a><a class="code" href="m68hc11-tdep_8c.html#a87c8a1ba4a755015e7c7277d52a2380e">00785</a> <a class="code" href="m68hc11-tdep_8c.html#a87c8a1ba4a755015e7c7277d52a2380e">m68hc11_frame_unwind_cache</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame,
<a name="l00786"></a>00786                             <span class="keywordtype">void</span> **this_prologue_cache)
<a name="l00787"></a>00787 {
<a name="l00788"></a>00788   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (this_frame);
<a name="l00789"></a>00789   <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> prev_sp;
<a name="l00790"></a>00790   <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> this_base;
<a name="l00791"></a>00791   <span class="keyword">struct </span><a class="code" href="structm68hc11__unwind__cache.html">m68hc11_unwind_cache</a> *info;
<a name="l00792"></a>00792   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> current_pc;
<a name="l00793"></a>00793   <span class="keywordtype">int</span> i;
<a name="l00794"></a>00794 
<a name="l00795"></a>00795   <span class="keywordflow">if</span> ((*this_prologue_cache))
<a name="l00796"></a>00796     <span class="keywordflow">return</span> (*this_prologue_cache);
<a name="l00797"></a>00797 
<a name="l00798"></a>00798   info = <a class="code" href="frame_8h.html#af9f5c3008a0d58374aa310c5c63af552">FRAME_OBSTACK_ZALLOC</a> (<span class="keyword">struct</span> <a class="code" href="structm68hc11__unwind__cache.html">m68hc11_unwind_cache</a>);
<a name="l00799"></a>00799   (*this_prologue_cache) = info;
<a name="l00800"></a>00800   info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5e54634f5355019f147da6aebb5a8ffd">saved_regs</a> = <a class="code" href="trad-frame_8c.html#a6b21318e80642c2b5e38b983f27cecec">trad_frame_alloc_saved_regs</a> (this_frame);
<a name="l00801"></a>00801 
<a name="l00802"></a>00802   info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a3053b2e23e75b8981e83b0086e093ab2">pc</a> = <a class="code" href="frame_8c.html#ac64c0ce600cc134b2256c0d507f57cde">get_frame_func</a> (this_frame);
<a name="l00803"></a>00803 
<a name="l00804"></a>00804   info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a6589ad6a64815bbc5a5adf168fa630f6">size</a> = 0;
<a name="l00805"></a>00805   info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5eebb3373656c19f52956302a1a20290">return_kind</a> = <a class="code" href="m68hc11-tdep_8c.html#a6d4bdfae267014167e5ca82138e505e9">m68hc11_get_return_insn</a> (info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a3053b2e23e75b8981e83b0086e093ab2">pc</a>);
<a name="l00806"></a>00806 
<a name="l00807"></a>00807   <span class="comment">/* The SP was moved to the FP.  This indicates that a new frame</span>
<a name="l00808"></a>00808 <span class="comment">     was created.  Get THIS frame&#39;s FP value by unwinding it from</span>
<a name="l00809"></a>00809 <span class="comment">     the next frame.  */</span>
<a name="l00810"></a>00810   this_base = <a class="code" href="frame_8c.html#affa785e8937e96fd727e46a2cfec94c4">get_frame_register_unsigned</a> (this_frame, <a class="code" href="m68hc11-tdep_8c.html#a19c7f6e43e46cbf32393ffe9834c8430">SOFT_FP_REGNUM</a>);
<a name="l00811"></a>00811   <span class="keywordflow">if</span> (this_base == 0)
<a name="l00812"></a>00812     {
<a name="l00813"></a>00813       info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a85726b6e8e2ff92dcafbbc9233e46f89">base</a> = 0;
<a name="l00814"></a>00814       <span class="keywordflow">return</span> info;
<a name="l00815"></a>00815     }
<a name="l00816"></a>00816 
<a name="l00817"></a>00817   current_pc = <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (this_frame);
<a name="l00818"></a>00818   <span class="keywordflow">if</span> (info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a3053b2e23e75b8981e83b0086e093ab2">pc</a> != 0)
<a name="l00819"></a>00819     <a class="code" href="m68hc11-tdep_8c.html#afe28a6f6d724c8ad71b0dfd6eee0694d">m68hc11_scan_prologue</a> (gdbarch, info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a3053b2e23e75b8981e83b0086e093ab2">pc</a>, current_pc, info);
<a name="l00820"></a>00820 
<a name="l00821"></a>00821   info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5e54634f5355019f147da6aebb5a8ffd">saved_regs</a>[<a class="code" href="m68hc11-tdep_8c.html#ab0b21dc196c2ba07c9351f43666cba9b">HARD_PC_REGNUM</a>].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a6589ad6a64815bbc5a5adf168fa630f6">size</a>;
<a name="l00822"></a>00822 
<a name="l00823"></a>00823   <span class="keywordflow">if</span> (info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#ad4e3d6b4d5a401a9735bfe061b7b6221">sp_offset</a> != (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>) -1)
<a name="l00824"></a>00824     {
<a name="l00825"></a>00825       info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5e54634f5355019f147da6aebb5a8ffd">saved_regs</a>[<a class="code" href="m68hc11-tdep_8c.html#ab0b21dc196c2ba07c9351f43666cba9b">HARD_PC_REGNUM</a>].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#ad4e3d6b4d5a401a9735bfe061b7b6221">sp_offset</a>;
<a name="l00826"></a>00826       this_base = <a class="code" href="frame_8c.html#affa785e8937e96fd727e46a2cfec94c4">get_frame_register_unsigned</a> (this_frame, <a class="code" href="m68hc11-tdep_8c.html#ae952b6a248316415bd51f1eb9a76e2c5">HARD_SP_REGNUM</a>);
<a name="l00827"></a>00827       prev_sp = this_base + info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#ad4e3d6b4d5a401a9735bfe061b7b6221">sp_offset</a> + 2;
<a name="l00828"></a>00828       this_base += <a class="code" href="m68hc11-tdep_8c.html#a8cbed36a51641e8809c1a66771e9074b">STACK_CORRECTION</a> (gdbarch);
<a name="l00829"></a>00829     }
<a name="l00830"></a>00830   <span class="keywordflow">else</span>
<a name="l00831"></a>00831     {
<a name="l00832"></a>00832       <span class="comment">/* The FP points at the last saved register.  Adjust the FP back</span>
<a name="l00833"></a>00833 <span class="comment">         to before the first saved register giving the SP.  */</span>
<a name="l00834"></a>00834       prev_sp = this_base + info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a6589ad6a64815bbc5a5adf168fa630f6">size</a> + 2;
<a name="l00835"></a>00835 
<a name="l00836"></a>00836       this_base += <a class="code" href="m68hc11-tdep_8c.html#a8cbed36a51641e8809c1a66771e9074b">STACK_CORRECTION</a> (gdbarch);
<a name="l00837"></a>00837       <span class="keywordflow">if</span> (<a class="code" href="m68hc11-tdep_8c.html#ab90df2e17bbb1297c43807fbc12bbc40">soft_regs</a>[<a class="code" href="m68hc11-tdep_8c.html#a19c7f6e43e46cbf32393ffe9834c8430">SOFT_FP_REGNUM</a>].<a class="code" href="aarch64-tdep_8c.html#acc128f98d9ceca227038c771308eff39">name</a>)
<a name="l00838"></a>00838         info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5e54634f5355019f147da6aebb5a8ffd">saved_regs</a>[<a class="code" href="m68hc11-tdep_8c.html#a19c7f6e43e46cbf32393ffe9834c8430">SOFT_FP_REGNUM</a>].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a6589ad6a64815bbc5a5adf168fa630f6">size</a> - 2;
<a name="l00839"></a>00839    }
<a name="l00840"></a>00840 
<a name="l00841"></a>00841   <span class="keywordflow">if</span> (info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5eebb3373656c19f52956302a1a20290">return_kind</a> == <a class="code" href="m68hc11-tdep_8c.html#a45c70eecdda974c7933a01918af12adea55325867141f6dd80262dfe5bbf4bb45">RETURN_RTC</a>)
<a name="l00842"></a>00842     {
<a name="l00843"></a>00843       prev_sp += 1;
<a name="l00844"></a>00844       info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5e54634f5355019f147da6aebb5a8ffd">saved_regs</a>[<a class="code" href="m68hc11-tdep_8c.html#acf6cdbbab3f18fd0d80942eb399eab30">HARD_PAGE_REGNUM</a>].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a6589ad6a64815bbc5a5adf168fa630f6">size</a>;
<a name="l00845"></a>00845       info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5e54634f5355019f147da6aebb5a8ffd">saved_regs</a>[<a class="code" href="m68hc11-tdep_8c.html#ab0b21dc196c2ba07c9351f43666cba9b">HARD_PC_REGNUM</a>].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a6589ad6a64815bbc5a5adf168fa630f6">size</a> + 1;
<a name="l00846"></a>00846     }
<a name="l00847"></a>00847   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5eebb3373656c19f52956302a1a20290">return_kind</a> == <a class="code" href="m68hc11-tdep_8c.html#a45c70eecdda974c7933a01918af12adea9196c903e6643c72a678ccc792500f67">RETURN_RTI</a>)
<a name="l00848"></a>00848     {
<a name="l00849"></a>00849       prev_sp += 7;
<a name="l00850"></a>00850       info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5e54634f5355019f147da6aebb5a8ffd">saved_regs</a>[<a class="code" href="m68hc11-tdep_8c.html#a4f139385698f68a63a27a538f93501db">HARD_CCR_REGNUM</a>].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a6589ad6a64815bbc5a5adf168fa630f6">size</a>;
<a name="l00851"></a>00851       info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5e54634f5355019f147da6aebb5a8ffd">saved_regs</a>[<a class="code" href="m68hc11-tdep_8c.html#ac49ac61c96e7bacb2c456e663281977f">HARD_D_REGNUM</a>].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a6589ad6a64815bbc5a5adf168fa630f6">size</a> + 1;
<a name="l00852"></a>00852       info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5e54634f5355019f147da6aebb5a8ffd">saved_regs</a>[<a class="code" href="m68hc11-tdep_8c.html#a1ac9cc9d2ef331d2f36711f3ac184601">HARD_X_REGNUM</a>].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a6589ad6a64815bbc5a5adf168fa630f6">size</a> + 3;
<a name="l00853"></a>00853       info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5e54634f5355019f147da6aebb5a8ffd">saved_regs</a>[<a class="code" href="m68hc11-tdep_8c.html#acb7f22f67b1118058f52c32aecc2c7b4">HARD_Y_REGNUM</a>].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a6589ad6a64815bbc5a5adf168fa630f6">size</a> + 5;
<a name="l00854"></a>00854       info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5e54634f5355019f147da6aebb5a8ffd">saved_regs</a>[<a class="code" href="m68hc11-tdep_8c.html#ab0b21dc196c2ba07c9351f43666cba9b">HARD_PC_REGNUM</a>].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a6589ad6a64815bbc5a5adf168fa630f6">size</a> + 7;
<a name="l00855"></a>00855     }
<a name="l00856"></a>00856 
<a name="l00857"></a>00857   <span class="comment">/* Add 1 here to adjust for the post-decrement nature of the push</span>
<a name="l00858"></a>00858 <span class="comment">     instruction.  */</span>
<a name="l00859"></a>00859   info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#abc2f221763776620752c5e2e035eb676">prev_sp</a> = <a class="code" href="structm68hc11__unwind__cache.html#abc2f221763776620752c5e2e035eb676">prev_sp</a>;
<a name="l00860"></a>00860 
<a name="l00861"></a>00861   info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a85726b6e8e2ff92dcafbbc9233e46f89">base</a> = this_base;
<a name="l00862"></a>00862 
<a name="l00863"></a>00863   <span class="comment">/* Adjust all the saved registers so that they contain addresses and not</span>
<a name="l00864"></a>00864 <span class="comment">     offsets.  */</span>
<a name="l00865"></a>00865   <span class="keywordflow">for</span> (i = 0;
<a name="l00866"></a>00866        i &lt; <a class="code" href="gdbarch_8c.html#a69069435754d0b434c7043a21d247325">gdbarch_num_regs</a> (gdbarch)
<a name="l00867"></a>00867            + <a class="code" href="gdbarch_8c.html#a8e0e40f42e5969ee4559ee47717aa9f3">gdbarch_num_pseudo_regs</a> (gdbarch) - 1;
<a name="l00868"></a>00868        i++)
<a name="l00869"></a>00869     <span class="keywordflow">if</span> (<a class="code" href="trad-frame_8c.html#aa3a0e933330792e061147f62a08b7a32">trad_frame_addr_p</a> (info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5e54634f5355019f147da6aebb5a8ffd">saved_regs</a>, i))
<a name="l00870"></a>00870       {
<a name="l00871"></a>00871         info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5e54634f5355019f147da6aebb5a8ffd">saved_regs</a>[i].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> += this_base;
<a name="l00872"></a>00872       }
<a name="l00873"></a>00873 
<a name="l00874"></a>00874   <span class="comment">/* The previous frame&#39;s SP needed to be computed.  Save the computed</span>
<a name="l00875"></a>00875 <span class="comment">     value.  */</span>
<a name="l00876"></a>00876   <a class="code" href="trad-frame_8c.html#aba845c5704e0bebe84b2a84eb8c9e962">trad_frame_set_value</a> (info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5e54634f5355019f147da6aebb5a8ffd">saved_regs</a>, <a class="code" href="m68hc11-tdep_8c.html#ae952b6a248316415bd51f1eb9a76e2c5">HARD_SP_REGNUM</a>, info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#abc2f221763776620752c5e2e035eb676">prev_sp</a>);
<a name="l00877"></a>00877 
<a name="l00878"></a>00878   <span class="keywordflow">return</span> info;
<a name="l00879"></a>00879 }
<a name="l00880"></a>00880 
<a name="l00881"></a>00881 <span class="comment">/* Given a GDB frame, determine the address of the calling function&#39;s</span>
<a name="l00882"></a>00882 <span class="comment">   frame.  This will be used to create a new GDB frame struct.  */</span>
<a name="l00883"></a>00883 
<a name="l00884"></a>00884 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00885"></a><a class="code" href="m68hc11-tdep_8c.html#a458be2bcf70d43c0d5e50d26b8e17b5d">00885</a> <a class="code" href="m68hc11-tdep_8c.html#a458be2bcf70d43c0d5e50d26b8e17b5d">m68hc11_frame_this_id</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame,
<a name="l00886"></a>00886                        <span class="keywordtype">void</span> **this_prologue_cache,
<a name="l00887"></a>00887                        <span class="keyword">struct</span> <a class="code" href="structframe__id.html">frame_id</a> *this_id)
<a name="l00888"></a>00888 {
<a name="l00889"></a>00889   <span class="keyword">struct </span><a class="code" href="structm68hc11__unwind__cache.html">m68hc11_unwind_cache</a> *info
<a name="l00890"></a>00890     = <a class="code" href="m68hc11-tdep_8c.html#a87c8a1ba4a755015e7c7277d52a2380e">m68hc11_frame_unwind_cache</a> (this_frame, this_prologue_cache);
<a name="l00891"></a>00891   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="structm68hc11__unwind__cache.html#a85726b6e8e2ff92dcafbbc9233e46f89">base</a>;
<a name="l00892"></a>00892   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="remote-fileio_8c.html#a7e97efb32ba66c3f1141bdbb82529d20">func</a>;
<a name="l00893"></a>00893   <span class="keyword">struct </span><a class="code" href="structframe__id.html">frame_id</a> id;
<a name="l00894"></a>00894 
<a name="l00895"></a>00895   <span class="comment">/* The FUNC is easy.  */</span>
<a name="l00896"></a>00896   func = <a class="code" href="frame_8c.html#ac64c0ce600cc134b2256c0d507f57cde">get_frame_func</a> (this_frame);
<a name="l00897"></a>00897 
<a name="l00898"></a>00898   <span class="comment">/* Hopefully the prologue analysis either correctly determined the</span>
<a name="l00899"></a>00899 <span class="comment">     frame&#39;s base (which is the SP from the previous frame), or set</span>
<a name="l00900"></a>00900 <span class="comment">     that base to &quot;NULL&quot;.  */</span>
<a name="l00901"></a>00901   base = info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#abc2f221763776620752c5e2e035eb676">prev_sp</a>;
<a name="l00902"></a>00902   <span class="keywordflow">if</span> (base == 0)
<a name="l00903"></a>00903     <span class="keywordflow">return</span>;
<a name="l00904"></a>00904 
<a name="l00905"></a>00905   <span class="keywordtype">id</span> = <a class="code" href="frame_8c.html#a7f32da6ddc275b4684c301448d891f5b">frame_id_build</a> (base, func);
<a name="l00906"></a>00906   (*this_id) = id;
<a name="l00907"></a>00907 }
<a name="l00908"></a>00908 
<a name="l00909"></a>00909 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structvalue.html">value</a> *
<a name="l00910"></a><a class="code" href="m68hc11-tdep_8c.html#a60e9fcd41d3c3fac705d3cc5c9d745c4">00910</a> <a class="code" href="m68hc11-tdep_8c.html#a60e9fcd41d3c3fac705d3cc5c9d745c4">m68hc11_frame_prev_register</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame,
<a name="l00911"></a>00911                              <span class="keywordtype">void</span> **this_prologue_cache, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>)
<a name="l00912"></a>00912 {
<a name="l00913"></a>00913   <span class="keyword">struct </span><a class="code" href="structvalue.html">value</a> *<a class="code" href="structvalue.html">value</a>;
<a name="l00914"></a>00914   <span class="keyword">struct </span><a class="code" href="structm68hc11__unwind__cache.html">m68hc11_unwind_cache</a> *info
<a name="l00915"></a>00915     = <a class="code" href="m68hc11-tdep_8c.html#a87c8a1ba4a755015e7c7277d52a2380e">m68hc11_frame_unwind_cache</a> (this_frame, this_prologue_cache);
<a name="l00916"></a>00916 
<a name="l00917"></a>00917   value = <a class="code" href="trad-frame_8c.html#a942094830577eeb218e28c3c84452d59">trad_frame_get_prev_register</a> (this_frame, info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5e54634f5355019f147da6aebb5a8ffd">saved_regs</a>, regnum);
<a name="l00918"></a>00918 
<a name="l00919"></a>00919   <span class="comment">/* Take into account the 68HC12 specific call (PC + page).  */</span>
<a name="l00920"></a>00920   <span class="keywordflow">if</span> (regnum == <a class="code" href="m68hc11-tdep_8c.html#ab0b21dc196c2ba07c9351f43666cba9b">HARD_PC_REGNUM</a>
<a name="l00921"></a>00921       &amp;&amp; info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5eebb3373656c19f52956302a1a20290">return_kind</a> == <a class="code" href="m68hc11-tdep_8c.html#a45c70eecdda974c7933a01918af12adea55325867141f6dd80262dfe5bbf4bb45">RETURN_RTC</a>
<a name="l00922"></a>00922       &amp;&amp; <a class="code" href="m68hc11-tdep_8c.html#a2409ab54089701cda79ca91dc9174cd3">USE_PAGE_REGISTER</a> (<a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (this_frame)))
<a name="l00923"></a>00923     {
<a name="l00924"></a>00924       <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="structm68hc11__unwind__cache.html#a3053b2e23e75b8981e83b0086e093ab2">pc</a> = <a class="code" href="value_8c.html#aa95e2692a6e5338edb5db75909064bc1">value_as_long</a> (value);
<a name="l00925"></a>00925       <span class="keywordflow">if</span> (pc &gt;= 0x08000 &amp;&amp; pc &lt; 0x0c000)
<a name="l00926"></a>00926         {
<a name="l00927"></a>00927           <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> page;
<a name="l00928"></a>00928 
<a name="l00929"></a>00929           <a class="code" href="value_8c.html#a5a9662fcdbefec2edef0b912ba593914">release_value</a> (value);
<a name="l00930"></a>00930           <a class="code" href="value_8c.html#a1f9b3ee232ece65ddc75c2407b97a50d">value_free</a> (value);
<a name="l00931"></a>00931 
<a name="l00932"></a>00932           value = <a class="code" href="trad-frame_8c.html#a942094830577eeb218e28c3c84452d59">trad_frame_get_prev_register</a> (this_frame, info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5e54634f5355019f147da6aebb5a8ffd">saved_regs</a>,
<a name="l00933"></a>00933                                                 <a class="code" href="m68hc11-tdep_8c.html#acf6cdbbab3f18fd0d80942eb399eab30">HARD_PAGE_REGNUM</a>);
<a name="l00934"></a>00934           page = <a class="code" href="value_8c.html#aa95e2692a6e5338edb5db75909064bc1">value_as_long</a> (value);
<a name="l00935"></a>00935           <a class="code" href="value_8c.html#a5a9662fcdbefec2edef0b912ba593914">release_value</a> (value);
<a name="l00936"></a>00936           <a class="code" href="value_8c.html#a1f9b3ee232ece65ddc75c2407b97a50d">value_free</a> (value);
<a name="l00937"></a>00937 
<a name="l00938"></a>00938           pc -= 0x08000;
<a name="l00939"></a>00939           pc += ((page &amp; 0x0ff) &lt;&lt; 14);
<a name="l00940"></a>00940           pc += 0x1000000;
<a name="l00941"></a>00941 
<a name="l00942"></a>00942           <span class="keywordflow">return</span> <a class="code" href="frame-unwind_8c.html#ac7df103c9cdd8847accaa5752e4f52ea">frame_unwind_got_constant</a> (this_frame, regnum, pc);
<a name="l00943"></a>00943         }
<a name="l00944"></a>00944     }
<a name="l00945"></a>00945 
<a name="l00946"></a>00946   <span class="keywordflow">return</span> value;
<a name="l00947"></a>00947 }
<a name="l00948"></a>00948 
<a name="l00949"></a><a class="code" href="m68hc11-tdep_8c.html#a3c208a59b811802a5a622c6f19e064bd">00949</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structframe__unwind.html">frame_unwind</a> <a class="code" href="m68hc11-tdep_8c.html#a3c208a59b811802a5a622c6f19e064bd">m68hc11_frame_unwind</a> = {
<a name="l00950"></a>00950   <a class="code" href="frame_8h.html#a3ca2c0bc7578bf3d337e34b2c08a6c5faeb4f7fd6d9e397d1141feb133746637a">NORMAL_FRAME</a>,
<a name="l00951"></a>00951   <a class="code" href="frame-unwind_8c.html#aa950afe60921514574c6150f0821f05c">default_frame_unwind_stop_reason</a>,
<a name="l00952"></a>00952   <a class="code" href="m68hc11-tdep_8c.html#a458be2bcf70d43c0d5e50d26b8e17b5d">m68hc11_frame_this_id</a>,
<a name="l00953"></a>00953   <a class="code" href="m68hc11-tdep_8c.html#a60e9fcd41d3c3fac705d3cc5c9d745c4">m68hc11_frame_prev_register</a>,
<a name="l00954"></a>00954   NULL,
<a name="l00955"></a>00955   <a class="code" href="frame-unwind_8c.html#ade64a9807fa508622581cc779b10ff9c">default_frame_sniffer</a>
<a name="l00956"></a>00956 };
<a name="l00957"></a>00957 
<a name="l00958"></a>00958 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l00959"></a><a class="code" href="m68hc11-tdep_8c.html#a1313a8a36c7d3e747ae5b927526bec32">00959</a> <a class="code" href="m68hc11-tdep_8c.html#a1313a8a36c7d3e747ae5b927526bec32">m68hc11_frame_base_address</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame, <span class="keywordtype">void</span> **this_cache)
<a name="l00960"></a>00960 {
<a name="l00961"></a>00961   <span class="keyword">struct </span><a class="code" href="structm68hc11__unwind__cache.html">m68hc11_unwind_cache</a> *info
<a name="l00962"></a>00962     = <a class="code" href="m68hc11-tdep_8c.html#a87c8a1ba4a755015e7c7277d52a2380e">m68hc11_frame_unwind_cache</a> (this_frame, this_cache);
<a name="l00963"></a>00963 
<a name="l00964"></a>00964   <span class="keywordflow">return</span> info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a85726b6e8e2ff92dcafbbc9233e46f89">base</a>;
<a name="l00965"></a>00965 }
<a name="l00966"></a>00966 
<a name="l00967"></a>00967 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l00968"></a><a class="code" href="m68hc11-tdep_8c.html#a1f4c3af5aa17e21713c4e00ab6f9dc27">00968</a> <a class="code" href="m68hc11-tdep_8c.html#a1f4c3af5aa17e21713c4e00ab6f9dc27">m68hc11_frame_args_address</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame, <span class="keywordtype">void</span> **this_cache)
<a name="l00969"></a>00969 {
<a name="l00970"></a>00970   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> addr;
<a name="l00971"></a>00971   <span class="keyword">struct </span><a class="code" href="structm68hc11__unwind__cache.html">m68hc11_unwind_cache</a> *info
<a name="l00972"></a>00972     = <a class="code" href="m68hc11-tdep_8c.html#a87c8a1ba4a755015e7c7277d52a2380e">m68hc11_frame_unwind_cache</a> (this_frame, this_cache);
<a name="l00973"></a>00973 
<a name="l00974"></a>00974   addr = info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a85726b6e8e2ff92dcafbbc9233e46f89">base</a> + info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a6589ad6a64815bbc5a5adf168fa630f6">size</a>;
<a name="l00975"></a>00975   <span class="keywordflow">if</span> (info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5eebb3373656c19f52956302a1a20290">return_kind</a> == <a class="code" href="m68hc11-tdep_8c.html#a45c70eecdda974c7933a01918af12adea55325867141f6dd80262dfe5bbf4bb45">RETURN_RTC</a>)
<a name="l00976"></a>00976     addr += 1;
<a name="l00977"></a>00977   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (info-&gt;<a class="code" href="structm68hc11__unwind__cache.html#a5eebb3373656c19f52956302a1a20290">return_kind</a> == <a class="code" href="m68hc11-tdep_8c.html#a45c70eecdda974c7933a01918af12adea9196c903e6643c72a678ccc792500f67">RETURN_RTI</a>)
<a name="l00978"></a>00978     addr += 7;
<a name="l00979"></a>00979 
<a name="l00980"></a>00980   <span class="keywordflow">return</span> addr;
<a name="l00981"></a>00981 }
<a name="l00982"></a>00982 
<a name="l00983"></a><a class="code" href="m68hc11-tdep_8c.html#a44c4239f2e38fe68af065169c52307f4">00983</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structframe__base.html">frame_base</a> <a class="code" href="m68hc11-tdep_8c.html#a44c4239f2e38fe68af065169c52307f4">m68hc11_frame_base</a> = {
<a name="l00984"></a>00984   &amp;<a class="code" href="m68hc11-tdep_8c.html#a3c208a59b811802a5a622c6f19e064bd">m68hc11_frame_unwind</a>,
<a name="l00985"></a>00985   <a class="code" href="m68hc11-tdep_8c.html#a1313a8a36c7d3e747ae5b927526bec32">m68hc11_frame_base_address</a>,
<a name="l00986"></a>00986   <a class="code" href="m68hc11-tdep_8c.html#a1313a8a36c7d3e747ae5b927526bec32">m68hc11_frame_base_address</a>,
<a name="l00987"></a>00987   <a class="code" href="m68hc11-tdep_8c.html#a1f4c3af5aa17e21713c4e00ab6f9dc27">m68hc11_frame_args_address</a>
<a name="l00988"></a>00988 };
<a name="l00989"></a>00989 
<a name="l00990"></a>00990 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l00991"></a><a class="code" href="m68hc11-tdep_8c.html#a524861e48c865fd7a3effc8d45f775d9">00991</a> <a class="code" href="m68hc11-tdep_8c.html#a524861e48c865fd7a3effc8d45f775d9">m68hc11_unwind_sp</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *next_frame)
<a name="l00992"></a>00992 {
<a name="l00993"></a>00993   <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> <a class="code" href="windows-nat_8c.html#a8d40798874dab99986478ef00ff3e297">sp</a>;
<a name="l00994"></a>00994   sp = <a class="code" href="frame_8c.html#a294f6912118884550787fd59f2a08ff6">frame_unwind_register_unsigned</a> (next_frame, <a class="code" href="m68hc11-tdep_8c.html#ae952b6a248316415bd51f1eb9a76e2c5">HARD_SP_REGNUM</a>);
<a name="l00995"></a>00995   <span class="keywordflow">return</span> sp;
<a name="l00996"></a>00996 }
<a name="l00997"></a>00997 
<a name="l00998"></a>00998 <span class="comment">/* Assuming THIS_FRAME is a dummy, return the frame ID of that dummy</span>
<a name="l00999"></a>00999 <span class="comment">   frame.  The frame ID&#39;s base needs to match the TOS value saved by</span>
<a name="l01000"></a>01000 <span class="comment">   save_dummy_frame_tos(), and the PC match the dummy frame&#39;s breakpoint.  */</span>
<a name="l01001"></a>01001 
<a name="l01002"></a>01002 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structframe__id.html">frame_id</a>
<a name="l01003"></a><a class="code" href="m68hc11-tdep_8c.html#ae89c04a22ef7729d6dc504334a31bc9f">01003</a> <a class="code" href="m68hc11-tdep_8c.html#ae89c04a22ef7729d6dc504334a31bc9f">m68hc11_dummy_id</a> (struct <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *this_frame)
<a name="l01004"></a>01004 {
<a name="l01005"></a>01005   <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> tos;
<a name="l01006"></a>01006   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc = <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (this_frame);
<a name="l01007"></a>01007 
<a name="l01008"></a>01008   tos = <a class="code" href="frame_8c.html#affa785e8937e96fd727e46a2cfec94c4">get_frame_register_unsigned</a> (this_frame, <a class="code" href="m68hc11-tdep_8c.html#a19c7f6e43e46cbf32393ffe9834c8430">SOFT_FP_REGNUM</a>);
<a name="l01009"></a>01009   tos += 2;
<a name="l01010"></a>01010   <span class="keywordflow">return</span> <a class="code" href="frame_8c.html#a7f32da6ddc275b4684c301448d891f5b">frame_id_build</a> (tos, pc);
<a name="l01011"></a>01011 }
<a name="l01012"></a>01012 
<a name="l01013"></a>01013 
<a name="l01014"></a>01014 <span class="comment">/* Get and print the register from the given frame.  */</span>
<a name="l01015"></a>01015 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l01016"></a><a class="code" href="m68hc11-tdep_8c.html#aad4750f7f528024bb87c302e5f215af5">01016</a> <a class="code" href="m68hc11-tdep_8c.html#aad4750f7f528024bb87c302e5f215af5">m68hc11_print_register</a> (<span class="keyword">struct</span> gdbarch *gdbarch, <span class="keyword">struct</span> <a class="code" href="structui__file.html">ui_file</a> *file,
<a name="l01017"></a>01017                         <span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame, <span class="keywordtype">int</span> regno)
<a name="l01018"></a>01018 {
<a name="l01019"></a>01019   <a class="code" href="defs_8h.html#ac7647a3f71533007c9e128f3ddda1987">LONGEST</a> rval;
<a name="l01020"></a>01020 
<a name="l01021"></a>01021   <span class="keywordflow">if</span> (regno == <a class="code" href="m68hc11-tdep_8c.html#ab0b21dc196c2ba07c9351f43666cba9b">HARD_PC_REGNUM</a> || regno == <a class="code" href="m68hc11-tdep_8c.html#ae952b6a248316415bd51f1eb9a76e2c5">HARD_SP_REGNUM</a>
<a name="l01022"></a>01022       || regno == <a class="code" href="m68hc11-tdep_8c.html#a19c7f6e43e46cbf32393ffe9834c8430">SOFT_FP_REGNUM</a> || regno == <a class="code" href="m68hc11-tdep_8c.html#ade8c25b3f7f7826ab6a52a1cfc4a3342">M68HC12_HARD_PC_REGNUM</a>)
<a name="l01023"></a>01023     rval = <a class="code" href="frame_8c.html#affa785e8937e96fd727e46a2cfec94c4">get_frame_register_unsigned</a> (frame, regno);
<a name="l01024"></a>01024   <span class="keywordflow">else</span>
<a name="l01025"></a>01025     rval = <a class="code" href="frame_8c.html#abd9e6d8ee95caae2621108bbbb44bd2f">get_frame_register_signed</a> (frame, regno);
<a name="l01026"></a>01026 
<a name="l01027"></a>01027   <span class="keywordflow">if</span> (regno == <a class="code" href="m68hc11-tdep_8c.html#a81c42e008f89dd32af46286aeeabb7fc">HARD_A_REGNUM</a> || regno == <a class="code" href="m68hc11-tdep_8c.html#a31cd18f71cbd2de68d551c5d90655bf6">HARD_B_REGNUM</a>
<a name="l01028"></a>01028       || regno == <a class="code" href="m68hc11-tdep_8c.html#a4f139385698f68a63a27a538f93501db">HARD_CCR_REGNUM</a> || regno == <a class="code" href="m68hc11-tdep_8c.html#acf6cdbbab3f18fd0d80942eb399eab30">HARD_PAGE_REGNUM</a>)
<a name="l01029"></a>01029     {
<a name="l01030"></a>01030       <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot;0x%02x   &quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) rval);
<a name="l01031"></a>01031       <span class="keywordflow">if</span> (regno != <a class="code" href="m68hc11-tdep_8c.html#a4f139385698f68a63a27a538f93501db">HARD_CCR_REGNUM</a>)
<a name="l01032"></a>01032         <a class="code" href="valprint_8c.html#ac70fad20415854638c3ccdea72016401">print_longest</a> (file, <span class="charliteral">&#39;d&#39;</span>, 1, rval);
<a name="l01033"></a>01033     }
<a name="l01034"></a>01034   <span class="keywordflow">else</span>
<a name="l01035"></a>01035     {
<a name="l01036"></a>01036       <span class="keywordflow">if</span> (regno == <a class="code" href="m68hc11-tdep_8c.html#ab0b21dc196c2ba07c9351f43666cba9b">HARD_PC_REGNUM</a> &amp;&amp; <a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> (gdbarch)-&gt;use_page_register)
<a name="l01037"></a>01037         {
<a name="l01038"></a>01038           <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> page;
<a name="l01039"></a>01039 
<a name="l01040"></a>01040           page = <a class="code" href="frame_8c.html#affa785e8937e96fd727e46a2cfec94c4">get_frame_register_unsigned</a> (frame, <a class="code" href="m68hc11-tdep_8c.html#acf6cdbbab3f18fd0d80942eb399eab30">HARD_PAGE_REGNUM</a>);
<a name="l01041"></a>01041           <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot;0x%02x:%04x &quot;</span>, (<span class="keywordtype">unsigned</span>) page,
<a name="l01042"></a>01042                             (<span class="keywordtype">unsigned</span>) rval);
<a name="l01043"></a>01043         }
<a name="l01044"></a>01044       <span class="keywordflow">else</span>
<a name="l01045"></a>01045         {
<a name="l01046"></a>01046           <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot;0x%04x &quot;</span>, (<span class="keywordtype">unsigned</span>) rval);
<a name="l01047"></a>01047           <span class="keywordflow">if</span> (regno != <a class="code" href="m68hc11-tdep_8c.html#ab0b21dc196c2ba07c9351f43666cba9b">HARD_PC_REGNUM</a> &amp;&amp; regno != <a class="code" href="m68hc11-tdep_8c.html#ae952b6a248316415bd51f1eb9a76e2c5">HARD_SP_REGNUM</a>
<a name="l01048"></a>01048               &amp;&amp; regno != <a class="code" href="m68hc11-tdep_8c.html#a19c7f6e43e46cbf32393ffe9834c8430">SOFT_FP_REGNUM</a> &amp;&amp; regno != <a class="code" href="m68hc11-tdep_8c.html#ade8c25b3f7f7826ab6a52a1cfc4a3342">M68HC12_HARD_PC_REGNUM</a>)
<a name="l01049"></a>01049             <a class="code" href="valprint_8c.html#ac70fad20415854638c3ccdea72016401">print_longest</a> (file, <span class="charliteral">&#39;d&#39;</span>, 1, rval);
<a name="l01050"></a>01050         }
<a name="l01051"></a>01051     }
<a name="l01052"></a>01052 
<a name="l01053"></a>01053   <span class="keywordflow">if</span> (regno == <a class="code" href="m68hc11-tdep_8c.html#a4f139385698f68a63a27a538f93501db">HARD_CCR_REGNUM</a>)
<a name="l01054"></a>01054     {
<a name="l01055"></a>01055       <span class="comment">/* CCR register */</span>
<a name="l01056"></a>01056       <span class="keywordtype">int</span> C, Z, N, V;
<a name="l01057"></a>01057       <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> l = rval &amp; 0xff;
<a name="l01058"></a>01058 
<a name="l01059"></a>01059       <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot;%c%c%c%c%c%c%c%c   &quot;</span>,
<a name="l01060"></a>01060                         l &amp; M6811_S_BIT ? <span class="charliteral">&#39;S&#39;</span> : <span class="charliteral">&#39;-&#39;</span>,
<a name="l01061"></a>01061                         l &amp; M6811_X_BIT ? <span class="charliteral">&#39;X&#39;</span> : <span class="charliteral">&#39;-&#39;</span>,
<a name="l01062"></a>01062                         l &amp; M6811_H_BIT ? <span class="charliteral">&#39;H&#39;</span> : <span class="charliteral">&#39;-&#39;</span>,
<a name="l01063"></a>01063                         l &amp; M6811_I_BIT ? <span class="charliteral">&#39;I&#39;</span> : <span class="charliteral">&#39;-&#39;</span>,
<a name="l01064"></a>01064                         l &amp; M6811_N_BIT ? <span class="charliteral">&#39;N&#39;</span> : <span class="charliteral">&#39;-&#39;</span>,
<a name="l01065"></a>01065                         l &amp; M6811_Z_BIT ? <span class="charliteral">&#39;Z&#39;</span> : <span class="charliteral">&#39;-&#39;</span>,
<a name="l01066"></a>01066                         l &amp; M6811_V_BIT ? <span class="charliteral">&#39;V&#39;</span> : <span class="charliteral">&#39;-&#39;</span>,
<a name="l01067"></a>01067                         l &amp; M6811_C_BIT ? <span class="charliteral">&#39;C&#39;</span> : <span class="charliteral">&#39;-&#39;</span>);
<a name="l01068"></a>01068       N = (l &amp; M6811_N_BIT) != 0;
<a name="l01069"></a>01069       Z = (l &amp; M6811_Z_BIT) != 0;
<a name="l01070"></a>01070       V = (l &amp; M6811_V_BIT) != 0;
<a name="l01071"></a>01071       C = (l &amp; M6811_C_BIT) != 0;
<a name="l01072"></a>01072 
<a name="l01073"></a>01073       <span class="comment">/* Print flags following the h8300.  */</span>
<a name="l01074"></a>01074       <span class="keywordflow">if</span> ((C | Z) == 0)
<a name="l01075"></a>01075         <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot;u&gt; &quot;</span>);
<a name="l01076"></a>01076       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((C | Z) == 1)
<a name="l01077"></a>01077         <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot;u&lt;= &quot;</span>);
<a name="l01078"></a>01078       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (C == 0)
<a name="l01079"></a>01079         <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot;u&lt; &quot;</span>);
<a name="l01080"></a>01080 
<a name="l01081"></a>01081       <span class="keywordflow">if</span> (Z == 0)
<a name="l01082"></a>01082         <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot;!= &quot;</span>);
<a name="l01083"></a>01083       <span class="keywordflow">else</span>
<a name="l01084"></a>01084         <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot;== &quot;</span>);
<a name="l01085"></a>01085 
<a name="l01086"></a>01086       <span class="keywordflow">if</span> ((N ^ V) == 0)
<a name="l01087"></a>01087         <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot;&gt;= &quot;</span>);
<a name="l01088"></a>01088       <span class="keywordflow">else</span>
<a name="l01089"></a>01089         <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot;&lt; &quot;</span>);
<a name="l01090"></a>01090 
<a name="l01091"></a>01091       <span class="keywordflow">if</span> ((Z | (N ^ V)) == 0)
<a name="l01092"></a>01092         <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot;&gt; &quot;</span>);
<a name="l01093"></a>01093       <span class="keywordflow">else</span>
<a name="l01094"></a>01094         <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot;&lt;= &quot;</span>);
<a name="l01095"></a>01095     }
<a name="l01096"></a>01096 }
<a name="l01097"></a>01097 
<a name="l01098"></a>01098 <span class="comment">/* Same as &#39;info reg&#39; but prints the registers in a different way.  */</span>
<a name="l01099"></a>01099 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l01100"></a><a class="code" href="m68hc11-tdep_8c.html#a4e4b77ccfcfae26fc525ad606c9a53bb">01100</a> <a class="code" href="m68hc11-tdep_8c.html#a4e4b77ccfcfae26fc525ad606c9a53bb">m68hc11_print_registers_info</a> (<span class="keyword">struct</span> gdbarch *gdbarch, <span class="keyword">struct</span> <a class="code" href="structui__file.html">ui_file</a> *file,
<a name="l01101"></a>01101                               <span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame, <span class="keywordtype">int</span> regno, <span class="keywordtype">int</span> cpregs)
<a name="l01102"></a>01102 {
<a name="l01103"></a>01103   <span class="keywordflow">if</span> (regno &gt;= 0)
<a name="l01104"></a>01104     {
<a name="l01105"></a>01105       <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="aarch64-tdep_8c.html#acc128f98d9ceca227038c771308eff39">name</a> = <a class="code" href="gdbarch_8c.html#a86c0cf41eb88c54e943cd80e79af36e5">gdbarch_register_name</a> (gdbarch, regno);
<a name="l01106"></a>01106 
<a name="l01107"></a>01107       <span class="keywordflow">if</span> (!name || !*name)
<a name="l01108"></a>01108         <span class="keywordflow">return</span>;
<a name="l01109"></a>01109 
<a name="l01110"></a>01110       <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot;%-10s &quot;</span>, name);
<a name="l01111"></a>01111       <a class="code" href="m68hc11-tdep_8c.html#aad4750f7f528024bb87c302e5f215af5">m68hc11_print_register</a> (gdbarch, file, frame, regno);
<a name="l01112"></a>01112       <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01113"></a>01113     }
<a name="l01114"></a>01114   <span class="keywordflow">else</span>
<a name="l01115"></a>01115     {
<a name="l01116"></a>01116       <span class="keywordtype">int</span> i, nr;
<a name="l01117"></a>01117 
<a name="l01118"></a>01118       <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot;PC=&quot;</span>);
<a name="l01119"></a>01119       <a class="code" href="m68hc11-tdep_8c.html#aad4750f7f528024bb87c302e5f215af5">m68hc11_print_register</a> (gdbarch, file, frame, <a class="code" href="m68hc11-tdep_8c.html#ab0b21dc196c2ba07c9351f43666cba9b">HARD_PC_REGNUM</a>);
<a name="l01120"></a>01120 
<a name="l01121"></a>01121       <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot; SP=&quot;</span>);
<a name="l01122"></a>01122       <a class="code" href="m68hc11-tdep_8c.html#aad4750f7f528024bb87c302e5f215af5">m68hc11_print_register</a> (gdbarch, file, frame, <a class="code" href="m68hc11-tdep_8c.html#ae952b6a248316415bd51f1eb9a76e2c5">HARD_SP_REGNUM</a>);
<a name="l01123"></a>01123 
<a name="l01124"></a>01124       <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot; FP=&quot;</span>);
<a name="l01125"></a>01125       <a class="code" href="m68hc11-tdep_8c.html#aad4750f7f528024bb87c302e5f215af5">m68hc11_print_register</a> (gdbarch, file, frame, <a class="code" href="m68hc11-tdep_8c.html#a19c7f6e43e46cbf32393ffe9834c8430">SOFT_FP_REGNUM</a>);
<a name="l01126"></a>01126 
<a name="l01127"></a>01127       <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot;\nCCR=&quot;</span>);
<a name="l01128"></a>01128       <a class="code" href="m68hc11-tdep_8c.html#aad4750f7f528024bb87c302e5f215af5">m68hc11_print_register</a> (gdbarch, file, frame, <a class="code" href="m68hc11-tdep_8c.html#a4f139385698f68a63a27a538f93501db">HARD_CCR_REGNUM</a>);
<a name="l01129"></a>01129       
<a name="l01130"></a>01130       <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot;\nD=&quot;</span>);
<a name="l01131"></a>01131       <a class="code" href="m68hc11-tdep_8c.html#aad4750f7f528024bb87c302e5f215af5">m68hc11_print_register</a> (gdbarch, file, frame, <a class="code" href="m68hc11-tdep_8c.html#ac49ac61c96e7bacb2c456e663281977f">HARD_D_REGNUM</a>);
<a name="l01132"></a>01132 
<a name="l01133"></a>01133       <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot; X=&quot;</span>);
<a name="l01134"></a>01134       <a class="code" href="m68hc11-tdep_8c.html#aad4750f7f528024bb87c302e5f215af5">m68hc11_print_register</a> (gdbarch, file, frame, <a class="code" href="m68hc11-tdep_8c.html#a1ac9cc9d2ef331d2f36711f3ac184601">HARD_X_REGNUM</a>);
<a name="l01135"></a>01135 
<a name="l01136"></a>01136       <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot; Y=&quot;</span>);
<a name="l01137"></a>01137       <a class="code" href="m68hc11-tdep_8c.html#aad4750f7f528024bb87c302e5f215af5">m68hc11_print_register</a> (gdbarch, file, frame, <a class="code" href="m68hc11-tdep_8c.html#acb7f22f67b1118058f52c32aecc2c7b4">HARD_Y_REGNUM</a>);
<a name="l01138"></a>01138   
<a name="l01139"></a>01139       <span class="keywordflow">if</span> (<a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> (gdbarch)-&gt;use_page_register)
<a name="l01140"></a>01140         {
<a name="l01141"></a>01141           <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot;\nPage=&quot;</span>);
<a name="l01142"></a>01142           <a class="code" href="m68hc11-tdep_8c.html#aad4750f7f528024bb87c302e5f215af5">m68hc11_print_register</a> (gdbarch, file, frame, <a class="code" href="m68hc11-tdep_8c.html#acf6cdbbab3f18fd0d80942eb399eab30">HARD_PAGE_REGNUM</a>);
<a name="l01143"></a>01143         }
<a name="l01144"></a>01144       <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01145"></a>01145 
<a name="l01146"></a>01146       nr = 0;
<a name="l01147"></a>01147       <span class="keywordflow">for</span> (i = <a class="code" href="m68hc11-tdep_8c.html#ab41365e4eaa3515d5196e51de08638a3">SOFT_D1_REGNUM</a>; i &lt; <a class="code" href="m68hc11-tdep_8c.html#a0c6d474a64fa32b385b883990e36cb87">M68HC11_ALL_REGS</a>; i++)
<a name="l01148"></a>01148         {
<a name="l01149"></a>01149           <span class="comment">/* Skip registers which are not defined in the symbol table.  */</span>
<a name="l01150"></a>01150           <span class="keywordflow">if</span> (<a class="code" href="m68hc11-tdep_8c.html#ab90df2e17bbb1297c43807fbc12bbc40">soft_regs</a>[i].<a class="code" href="aarch64-tdep_8c.html#acc128f98d9ceca227038c771308eff39">name</a> == 0)
<a name="l01151"></a>01151             <span class="keywordflow">continue</span>;
<a name="l01152"></a>01152           
<a name="l01153"></a>01153           <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot;D%d=&quot;</span>, i - <a class="code" href="m68hc11-tdep_8c.html#ab41365e4eaa3515d5196e51de08638a3">SOFT_D1_REGNUM</a> + 1);
<a name="l01154"></a>01154           <a class="code" href="m68hc11-tdep_8c.html#aad4750f7f528024bb87c302e5f215af5">m68hc11_print_register</a> (gdbarch, file, frame, i);
<a name="l01155"></a>01155           nr++;
<a name="l01156"></a>01156           <span class="keywordflow">if</span> ((nr % 8) == 7)
<a name="l01157"></a>01157             <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01158"></a>01158           <span class="keywordflow">else</span>
<a name="l01159"></a>01159             <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot; &quot;</span>);
<a name="l01160"></a>01160         }
<a name="l01161"></a>01161       <span class="keywordflow">if</span> (nr &amp;&amp; (nr % 8) != 7)
<a name="l01162"></a>01162         <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l01163"></a>01163     }
<a name="l01164"></a>01164 }
<a name="l01165"></a>01165 
<a name="l01166"></a>01166 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l01167"></a><a class="code" href="m68hc11-tdep_8c.html#a00e8adf3fab50444bb14929894f7ff97">01167</a> <a class="code" href="m68hc11-tdep_8c.html#a00e8adf3fab50444bb14929894f7ff97">m68hc11_push_dummy_call</a> (<span class="keyword">struct</span> gdbarch *gdbarch, <span class="keyword">struct</span> <a class="code" href="structvalue.html">value</a> *<span class="keyword">function</span>,
<a name="l01168"></a>01168                          <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> bp_addr,
<a name="l01169"></a>01169                          <span class="keywordtype">int</span> nargs, <span class="keyword">struct</span> <a class="code" href="structvalue.html">value</a> **args, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> sp,
<a name="l01170"></a>01170                          <span class="keywordtype">int</span> <a class="code" href="arm-tdep_8h.html#aabb639d85dec2f973451bb1e7b6d1be8">struct_return</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> struct_addr)
<a name="l01171"></a>01171 {
<a name="l01172"></a>01172   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l01173"></a>01173   <span class="keywordtype">int</span> argnum;
<a name="l01174"></a>01174   <span class="keywordtype">int</span> first_stack_argnum;
<a name="l01175"></a>01175   <span class="keyword">struct </span><a class="code" href="structtype.html">type</a> *<a class="code" href="language_8c.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>;
<a name="l01176"></a>01176   <span class="keyword">const</span> <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *val;
<a name="l01177"></a>01177   <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> buf[2];
<a name="l01178"></a>01178   
<a name="l01179"></a>01179   first_stack_argnum = 0;
<a name="l01180"></a>01180   <span class="keywordflow">if</span> (struct_return)
<a name="l01181"></a>01181     {
<a name="l01182"></a>01182       <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regcache, <a class="code" href="m68hc11-tdep_8c.html#ac49ac61c96e7bacb2c456e663281977f">HARD_D_REGNUM</a>, struct_addr);
<a name="l01183"></a>01183     }
<a name="l01184"></a>01184   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nargs &gt; 0)
<a name="l01185"></a>01185     {
<a name="l01186"></a>01186       type = <a class="code" href="value_8c.html#a263a4c0bee0b0df41074b952d3c121d0">value_type</a> (args[0]);
<a name="l01187"></a>01187 
<a name="l01188"></a>01188       <span class="comment">/* First argument is passed in D and X registers.  */</span>
<a name="l01189"></a>01189       <span class="keywordflow">if</span> (<a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type) &lt;= 4)
<a name="l01190"></a>01190         {
<a name="l01191"></a>01191           <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> v;
<a name="l01192"></a>01192 
<a name="l01193"></a>01193           v = <a class="code" href="defs_8h.html#a99aec65329508b4d449a4f881026f844">extract_unsigned_integer</a> (<a class="code" href="value_8c.html#ad41a6de8fde15c01e1ffabb603c4f108">value_contents</a> (args[0]),
<a name="l01194"></a>01194                                         <a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type), byte_order);
<a name="l01195"></a>01195           first_stack_argnum = 1;
<a name="l01196"></a>01196 
<a name="l01197"></a>01197           <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regcache, <a class="code" href="m68hc11-tdep_8c.html#ac49ac61c96e7bacb2c456e663281977f">HARD_D_REGNUM</a>, v);
<a name="l01198"></a>01198           <span class="keywordflow">if</span> (<a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type) &gt; 2)
<a name="l01199"></a>01199             {
<a name="l01200"></a>01200               v &gt;&gt;= 16;
<a name="l01201"></a>01201               <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regcache, <a class="code" href="m68hc11-tdep_8c.html#a1ac9cc9d2ef331d2f36711f3ac184601">HARD_X_REGNUM</a>, v);
<a name="l01202"></a>01202             }
<a name="l01203"></a>01203         }
<a name="l01204"></a>01204     }
<a name="l01205"></a>01205 
<a name="l01206"></a>01206   <span class="keywordflow">for</span> (argnum = nargs - 1; argnum &gt;= first_stack_argnum; argnum--)
<a name="l01207"></a>01207     {
<a name="l01208"></a>01208       type = <a class="code" href="value_8c.html#a263a4c0bee0b0df41074b952d3c121d0">value_type</a> (args[argnum]);
<a name="l01209"></a>01209 
<a name="l01210"></a>01210       <span class="keywordflow">if</span> (<a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type) &amp; 1)
<a name="l01211"></a>01211         {
<a name="l01212"></a>01212           <span class="keyword">static</span> <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> zero = 0;
<a name="l01213"></a>01213 
<a name="l01214"></a>01214           sp--;
<a name="l01215"></a>01215           <a class="code" href="corefile_8c.html#a05c568c157071d9349667fab589228e5">write_memory</a> (sp, &amp;zero, 1);
<a name="l01216"></a>01216         }
<a name="l01217"></a>01217       val = <a class="code" href="value_8c.html#ad41a6de8fde15c01e1ffabb603c4f108">value_contents</a> (args[argnum]);
<a name="l01218"></a>01218       sp -= <a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type);
<a name="l01219"></a>01219       <a class="code" href="corefile_8c.html#a05c568c157071d9349667fab589228e5">write_memory</a> (sp, val, <a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type));
<a name="l01220"></a>01220     }
<a name="l01221"></a>01221 
<a name="l01222"></a>01222   <span class="comment">/* Store return address.  */</span>
<a name="l01223"></a>01223   sp -= 2;
<a name="l01224"></a>01224   <a class="code" href="defs_8h.html#ad11c013c83c64d9d0ee2e4bdeb1fb62d">store_unsigned_integer</a> (buf, 2, byte_order, bp_addr);
<a name="l01225"></a>01225   <a class="code" href="corefile_8c.html#a05c568c157071d9349667fab589228e5">write_memory</a> (sp, buf, 2);
<a name="l01226"></a>01226 
<a name="l01227"></a>01227   <span class="comment">/* Finally, update the stack pointer...  */</span>
<a name="l01228"></a>01228   sp -= <a class="code" href="m68hc11-tdep_8c.html#a8cbed36a51641e8809c1a66771e9074b">STACK_CORRECTION</a> (gdbarch);
<a name="l01229"></a>01229   <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regcache, <a class="code" href="m68hc11-tdep_8c.html#ae952b6a248316415bd51f1eb9a76e2c5">HARD_SP_REGNUM</a>, sp);
<a name="l01230"></a>01230 
<a name="l01231"></a>01231   <span class="comment">/* ...and fake a frame pointer.  */</span>
<a name="l01232"></a>01232   <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regcache, <a class="code" href="m68hc11-tdep_8c.html#a19c7f6e43e46cbf32393ffe9834c8430">SOFT_FP_REGNUM</a>, sp);
<a name="l01233"></a>01233 
<a name="l01234"></a>01234   <span class="comment">/* DWARF2/GCC uses the stack address *before* the function call as a</span>
<a name="l01235"></a>01235 <span class="comment">     frame&#39;s CFA.  */</span>
<a name="l01236"></a>01236   <span class="keywordflow">return</span> sp + 2;
<a name="l01237"></a>01237 }
<a name="l01238"></a>01238 
<a name="l01239"></a>01239 
<a name="l01240"></a>01240 <span class="comment">/* Return the GDB type object for the &quot;standard&quot; data type</span>
<a name="l01241"></a>01241 <span class="comment">   of data in register N.  */</span>
<a name="l01242"></a>01242 
<a name="l01243"></a>01243 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structtype.html">type</a> *
<a name="l01244"></a><a class="code" href="m68hc11-tdep_8c.html#a404ab5acc433b6c7557ef3c0292ea84f">01244</a> <a class="code" href="m68hc11-tdep_8c.html#a404ab5acc433b6c7557ef3c0292ea84f">m68hc11_register_type</a> (<span class="keyword">struct</span> gdbarch *gdbarch, <span class="keywordtype">int</span> reg_nr)
<a name="l01245"></a>01245 {
<a name="l01246"></a>01246   <span class="keywordflow">switch</span> (reg_nr)
<a name="l01247"></a>01247     {
<a name="l01248"></a>01248     <span class="keywordflow">case</span> <a class="code" href="m68hc11-tdep_8c.html#acf6cdbbab3f18fd0d80942eb399eab30">HARD_PAGE_REGNUM</a>:
<a name="l01249"></a>01249     <span class="keywordflow">case</span> <a class="code" href="m68hc11-tdep_8c.html#a81c42e008f89dd32af46286aeeabb7fc">HARD_A_REGNUM</a>:
<a name="l01250"></a>01250     <span class="keywordflow">case</span> <a class="code" href="m68hc11-tdep_8c.html#a31cd18f71cbd2de68d551c5d90655bf6">HARD_B_REGNUM</a>:
<a name="l01251"></a>01251     <span class="keywordflow">case</span> <a class="code" href="m68hc11-tdep_8c.html#a4f139385698f68a63a27a538f93501db">HARD_CCR_REGNUM</a>:
<a name="l01252"></a>01252       <span class="keywordflow">return</span> <a class="code" href="gdbtypes_8c.html#addd01ebc9ccdf2cacb33ab01e281ddb8">builtin_type</a> (gdbarch)-&gt;<a class="code" href="structbuiltin__type.html#ad57a1250e3b718be55d3810f484bdc3a">builtin_uint8</a>;
<a name="l01253"></a>01253 
<a name="l01254"></a>01254     <span class="keywordflow">case</span> <a class="code" href="m68hc11-tdep_8c.html#ade8c25b3f7f7826ab6a52a1cfc4a3342">M68HC12_HARD_PC_REGNUM</a>:
<a name="l01255"></a>01255       <span class="keywordflow">return</span> <a class="code" href="gdbtypes_8c.html#addd01ebc9ccdf2cacb33ab01e281ddb8">builtin_type</a> (gdbarch)-&gt;<a class="code" href="structbuiltin__type.html#a7d0cf7d4e93c3cd2f1b744a18fa23b80">builtin_uint32</a>;
<a name="l01256"></a>01256 
<a name="l01257"></a>01257     <span class="keywordflow">default</span>:
<a name="l01258"></a>01258       <span class="keywordflow">return</span> <a class="code" href="gdbtypes_8c.html#addd01ebc9ccdf2cacb33ab01e281ddb8">builtin_type</a> (gdbarch)-&gt;<a class="code" href="structbuiltin__type.html#a2278f4cd3362bed6087abfb78d6fb1bd">builtin_uint16</a>;
<a name="l01259"></a>01259     }
<a name="l01260"></a>01260 }
<a name="l01261"></a>01261 
<a name="l01262"></a>01262 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l01263"></a><a class="code" href="m68hc11-tdep_8c.html#a3a0af31767459441165ef1ae64c6515c">01263</a> <a class="code" href="m68hc11-tdep_8c.html#a3a0af31767459441165ef1ae64c6515c">m68hc11_store_return_value</a> (<span class="keyword">struct</span> <a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a>, <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l01264"></a>01264                             <span class="keyword">const</span> <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *valbuf)
<a name="l01265"></a>01265 {
<a name="l01266"></a>01266   <span class="keywordtype">int</span> <a class="code" href="exec_8h.html#a00f945351279d3c8935f13d2b9f9b808">len</a>;
<a name="l01267"></a>01267 
<a name="l01268"></a>01268   len = <a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type);
<a name="l01269"></a>01269 
<a name="l01270"></a>01270   <span class="comment">/* First argument is passed in D and X registers.  */</span>
<a name="l01271"></a>01271   <span class="keywordflow">if</span> (len &lt;= 2)
<a name="l01272"></a>01272     <a class="code" href="regcache_8c.html#a0eda92b8bcdd73455eab076beedc2d1f">regcache_raw_write_part</a> (regcache, <a class="code" href="m68hc11-tdep_8c.html#ac49ac61c96e7bacb2c456e663281977f">HARD_D_REGNUM</a>, 2 - len, len, valbuf);
<a name="l01273"></a>01273   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (len &lt;= 4)
<a name="l01274"></a>01274     {
<a name="l01275"></a>01275       <a class="code" href="regcache_8c.html#a0eda92b8bcdd73455eab076beedc2d1f">regcache_raw_write_part</a> (regcache, <a class="code" href="m68hc11-tdep_8c.html#a1ac9cc9d2ef331d2f36711f3ac184601">HARD_X_REGNUM</a>, 4 - len,
<a name="l01276"></a>01276                                len - 2, valbuf);
<a name="l01277"></a>01277       <a class="code" href="regcache_8c.html#a1102769bb633fd84087614a3fc5c6e20">regcache_raw_write</a> (regcache, <a class="code" href="m68hc11-tdep_8c.html#ac49ac61c96e7bacb2c456e663281977f">HARD_D_REGNUM</a>, valbuf + (len - 2));
<a name="l01278"></a>01278     }
<a name="l01279"></a>01279   <span class="keywordflow">else</span>
<a name="l01280"></a>01280     <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;return of value &gt; 4 is not supported.&quot;</span>));
<a name="l01281"></a>01281 }
<a name="l01282"></a>01282 
<a name="l01283"></a>01283 
<a name="l01284"></a>01284 <span class="comment">/* Given a return value in `regcache&#39; with a type `type&#39;, </span>
<a name="l01285"></a>01285 <span class="comment">   extract and copy its value into `valbuf&#39;.  */</span>
<a name="l01286"></a>01286 
<a name="l01287"></a>01287 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l01288"></a><a class="code" href="m68hc11-tdep_8c.html#addf191a4070041765c8299bd8e3fc816">01288</a> <a class="code" href="m68hc11-tdep_8c.html#addf191a4070041765c8299bd8e3fc816">m68hc11_extract_return_value</a> (<span class="keyword">struct</span> <a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a>, <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l01289"></a>01289                               <span class="keywordtype">void</span> *valbuf)
<a name="l01290"></a>01290 {
<a name="l01291"></a>01291   <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> buf[<a class="code" href="m68hc11-tdep_8c.html#adf8f8d57e8051520e583542b9f9dcf91">M68HC11_REG_SIZE</a>];
<a name="l01292"></a>01292 
<a name="l01293"></a>01293   <a class="code" href="regcache_8c.html#a995b366cfa6f89eaa36c6e88227f3462">regcache_raw_read</a> (regcache, <a class="code" href="m68hc11-tdep_8c.html#ac49ac61c96e7bacb2c456e663281977f">HARD_D_REGNUM</a>, buf);
<a name="l01294"></a>01294   <span class="keywordflow">switch</span> (<a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type))
<a name="l01295"></a>01295     {
<a name="l01296"></a>01296     <span class="keywordflow">case</span> 1:
<a name="l01297"></a>01297       <a class="code" href="gdb__string_8h.html#a39ebe6a4e122707997e78b549a1e8c5e">memcpy</a> (valbuf, buf + 1, 1);
<a name="l01298"></a>01298       <span class="keywordflow">break</span>;
<a name="l01299"></a>01299 
<a name="l01300"></a>01300     <span class="keywordflow">case</span> 2:
<a name="l01301"></a>01301       <a class="code" href="gdb__string_8h.html#a39ebe6a4e122707997e78b549a1e8c5e">memcpy</a> (valbuf, buf, 2);
<a name="l01302"></a>01302       <span class="keywordflow">break</span>;
<a name="l01303"></a>01303 
<a name="l01304"></a>01304     <span class="keywordflow">case</span> 3:
<a name="l01305"></a>01305       <a class="code" href="gdb__string_8h.html#a39ebe6a4e122707997e78b549a1e8c5e">memcpy</a> ((<span class="keywordtype">char</span>*) valbuf + 1, buf, 2);
<a name="l01306"></a>01306       <a class="code" href="regcache_8c.html#a995b366cfa6f89eaa36c6e88227f3462">regcache_raw_read</a> (regcache, <a class="code" href="m68hc11-tdep_8c.html#a1ac9cc9d2ef331d2f36711f3ac184601">HARD_X_REGNUM</a>, buf);
<a name="l01307"></a>01307       <a class="code" href="gdb__string_8h.html#a39ebe6a4e122707997e78b549a1e8c5e">memcpy</a> (valbuf, buf + 1, 1);
<a name="l01308"></a>01308       <span class="keywordflow">break</span>;
<a name="l01309"></a>01309 
<a name="l01310"></a>01310     <span class="keywordflow">case</span> 4:
<a name="l01311"></a>01311       <a class="code" href="gdb__string_8h.html#a39ebe6a4e122707997e78b549a1e8c5e">memcpy</a> ((<span class="keywordtype">char</span>*) valbuf + 2, buf, 2);
<a name="l01312"></a>01312       <a class="code" href="regcache_8c.html#a995b366cfa6f89eaa36c6e88227f3462">regcache_raw_read</a> (regcache, <a class="code" href="m68hc11-tdep_8c.html#a1ac9cc9d2ef331d2f36711f3ac184601">HARD_X_REGNUM</a>, buf);
<a name="l01313"></a>01313       <a class="code" href="gdb__string_8h.html#a39ebe6a4e122707997e78b549a1e8c5e">memcpy</a> (valbuf, buf, 2);
<a name="l01314"></a>01314       <span class="keywordflow">break</span>;
<a name="l01315"></a>01315 
<a name="l01316"></a>01316     <span class="keywordflow">default</span>:
<a name="l01317"></a>01317       <a class="code" href="utils_8c.html#a279e952362d12544d9bebc26660fec4b">error</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;bad size for return value&quot;</span>));
<a name="l01318"></a>01318     }
<a name="l01319"></a>01319 }
<a name="l01320"></a>01320 
<a name="l01321"></a>01321 <span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="defs_8h.html#ad73ff2db888df8f297b907f7093082a5">return_value_convention</a>
<a name="l01322"></a><a class="code" href="m68hc11-tdep_8c.html#ad0fe4f2456b356d59e7fe868bae1ac13">01322</a> <a class="code" href="m68hc11-tdep_8c.html#ad0fe4f2456b356d59e7fe868bae1ac13">m68hc11_return_value</a> (<span class="keyword">struct</span> gdbarch *gdbarch, <span class="keyword">struct</span> <a class="code" href="structvalue.html">value</a> *<span class="keyword">function</span>,
<a name="l01323"></a>01323                       <span class="keyword">struct</span> <a class="code" href="structtype.html">type</a> *valtype, <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l01324"></a>01324                       <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *readbuf, <span class="keyword">const</span> <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *writebuf)
<a name="l01325"></a>01325 {
<a name="l01326"></a>01326   <span class="keywordflow">if</span> (<a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (valtype) == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462af3b3fc76f66c95e12946c0ef84409365">TYPE_CODE_STRUCT</a>
<a name="l01327"></a>01327       || <a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (valtype) == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462a8c3218d2f780665395d57dcd4d909191">TYPE_CODE_UNION</a>
<a name="l01328"></a>01328       || <a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (valtype) == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462a00c795b43d1a39f57d3e222385f14fc0">TYPE_CODE_ARRAY</a> 
<a name="l01329"></a>01329       || <a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (valtype) &gt; 4)
<a name="l01330"></a>01330     <span class="keywordflow">return</span> <a class="code" href="defs_8h.html#ad73ff2db888df8f297b907f7093082a5a1fab6a0bfd44af88ba17a143673dc937">RETURN_VALUE_STRUCT_CONVENTION</a>;
<a name="l01331"></a>01331   <span class="keywordflow">else</span>
<a name="l01332"></a>01332     {
<a name="l01333"></a>01333       <span class="keywordflow">if</span> (readbuf != NULL)
<a name="l01334"></a>01334         <a class="code" href="m68hc11-tdep_8c.html#addf191a4070041765c8299bd8e3fc816">m68hc11_extract_return_value</a> (valtype, regcache, readbuf);
<a name="l01335"></a>01335       <span class="keywordflow">if</span> (writebuf != NULL)
<a name="l01336"></a>01336         <a class="code" href="m68hc11-tdep_8c.html#a3a0af31767459441165ef1ae64c6515c">m68hc11_store_return_value</a> (valtype, regcache, writebuf);
<a name="l01337"></a>01337       <span class="keywordflow">return</span> <a class="code" href="defs_8h.html#ad73ff2db888df8f297b907f7093082a5a0cd14b7546740080384acc0c7e5caf3b">RETURN_VALUE_REGISTER_CONVENTION</a>;
<a name="l01338"></a>01338     }
<a name="l01339"></a>01339 }
<a name="l01340"></a>01340 
<a name="l01341"></a>01341 <span class="comment">/* Test whether the ELF symbol corresponds to a function using rtc or</span>
<a name="l01342"></a>01342 <span class="comment">   rti to return.  */</span>
<a name="l01343"></a>01343    
<a name="l01344"></a>01344 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l01345"></a><a class="code" href="m68hc11-tdep_8c.html#a47afb81c19abc7bac8e4f1b112ada623">01345</a> <a class="code" href="m68hc11-tdep_8c.html#a47afb81c19abc7bac8e4f1b112ada623">m68hc11_elf_make_msymbol_special</a> (asymbol *sym, <span class="keyword">struct</span> <a class="code" href="structminimal__symbol.html">minimal_symbol</a> *msym)
<a name="l01346"></a>01346 {
<a name="l01347"></a>01347   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="solib-som_8c.html#a555096840020c318e34b205419e98cca">flags</a>;
<a name="l01348"></a>01348 
<a name="l01349"></a>01349   flags = ((elf_symbol_type *)sym)-&gt;internal_elf_sym.st_other;
<a name="l01350"></a>01350   <span class="keywordflow">if</span> (flags &amp; STO_M68HC12_FAR)
<a name="l01351"></a>01351     <a class="code" href="m68hc11-tdep_8c.html#aadb1718243b84d3af8f93190081a5aa5">MSYMBOL_SET_RTC</a> (msym);
<a name="l01352"></a>01352   <span class="keywordflow">if</span> (flags &amp; STO_M68HC12_INTERRUPT)
<a name="l01353"></a>01353     <a class="code" href="m68hc11-tdep_8c.html#a4d65dfd3a44ebfcffdac5140592326cd">MSYMBOL_SET_RTI</a> (msym);
<a name="l01354"></a>01354 }
<a name="l01355"></a>01355 
<a name="l01356"></a>01356 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01357"></a><a class="code" href="m68hc11-tdep_8c.html#a910c4bb5b816f55696af513311308a53">01357</a> <a class="code" href="m68hc11-tdep_8c.html#a910c4bb5b816f55696af513311308a53">gdb_print_insn_m68hc11</a> (bfd_vma <a class="code" href="exec_8h.html#ab268c3184bf49615e16de006a296a542">memaddr</a>, disassemble_info *info)
<a name="l01358"></a>01358 {
<a name="l01359"></a>01359   <span class="keywordflow">if</span> (info-&gt;arch == bfd_arch_m68hc11)
<a name="l01360"></a>01360     <span class="keywordflow">return</span> print_insn_m68hc11 (memaddr, info);
<a name="l01361"></a>01361   <span class="keywordflow">else</span>
<a name="l01362"></a>01362     <span class="keywordflow">return</span> print_insn_m68hc12 (memaddr, info);
<a name="l01363"></a>01363 }
<a name="l01364"></a>01364 
<a name="l01365"></a>01365 
<a name="l01366"></a>01366 
<a name="l01367"></a>01367 <span class="comment">/* 68HC11/68HC12 register groups.</span>
<a name="l01368"></a>01368 <span class="comment">   Identify real hard registers and soft registers used by gcc.  */</span>
<a name="l01369"></a>01369 
<a name="l01370"></a><a class="code" href="m68hc11-tdep_8c.html#a37605e78b096ec1ac50424839d2fb6ce">01370</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structreggroup.html">reggroup</a> *<a class="code" href="m68hc11-tdep_8c.html#a37605e78b096ec1ac50424839d2fb6ce">m68hc11_soft_reggroup</a>;
<a name="l01371"></a><a class="code" href="m68hc11-tdep_8c.html#a08e7aad09f17e08476acfa742756da01">01371</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structreggroup.html">reggroup</a> *<a class="code" href="m68hc11-tdep_8c.html#a08e7aad09f17e08476acfa742756da01">m68hc11_hard_reggroup</a>;
<a name="l01372"></a>01372 
<a name="l01373"></a>01373 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l01374"></a><a class="code" href="m68hc11-tdep_8c.html#ac1a33578914957891bc118bb25966d5a">01374</a> <a class="code" href="m68hc11-tdep_8c.html#ac1a33578914957891bc118bb25966d5a">m68hc11_init_reggroups</a> (<span class="keywordtype">void</span>)
<a name="l01375"></a>01375 {
<a name="l01376"></a>01376   m68hc11_hard_reggroup = <a class="code" href="reggroups_8c.html#a3cb3369b5063997a1382cfb8ad240ad6">reggroup_new</a> (<span class="stringliteral">&quot;hard&quot;</span>, <a class="code" href="reggroups_8h.html#a7377a90943c0ba0d23c3b03a07583f22a9ef6d86366eea2f7b79d387752a38be1">USER_REGGROUP</a>);
<a name="l01377"></a>01377   m68hc11_soft_reggroup = <a class="code" href="reggroups_8c.html#a3cb3369b5063997a1382cfb8ad240ad6">reggroup_new</a> (<span class="stringliteral">&quot;soft&quot;</span>, <a class="code" href="reggroups_8h.html#a7377a90943c0ba0d23c3b03a07583f22a9ef6d86366eea2f7b79d387752a38be1">USER_REGGROUP</a>);
<a name="l01378"></a>01378 }
<a name="l01379"></a>01379 
<a name="l01380"></a>01380 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l01381"></a><a class="code" href="m68hc11-tdep_8c.html#a0425b385889c3722f57530076c92e7c7">01381</a> <a class="code" href="m68hc11-tdep_8c.html#a0425b385889c3722f57530076c92e7c7">m68hc11_add_reggroups</a> (<span class="keyword">struct</span> gdbarch *gdbarch)
<a name="l01382"></a>01382 {
<a name="l01383"></a>01383   <a class="code" href="reggroups_8c.html#ac7bf3ffcf189976292b76329691cdba4">reggroup_add</a> (gdbarch, m68hc11_hard_reggroup);
<a name="l01384"></a>01384   <a class="code" href="reggroups_8c.html#ac7bf3ffcf189976292b76329691cdba4">reggroup_add</a> (gdbarch, m68hc11_soft_reggroup);
<a name="l01385"></a>01385   <a class="code" href="reggroups_8c.html#ac7bf3ffcf189976292b76329691cdba4">reggroup_add</a> (gdbarch, <a class="code" href="reggroups_8c.html#a2409cc2e19cc71ae02448af0ec0308fd">general_reggroup</a>);
<a name="l01386"></a>01386   <a class="code" href="reggroups_8c.html#ac7bf3ffcf189976292b76329691cdba4">reggroup_add</a> (gdbarch, <a class="code" href="reggroups_8c.html#ad0b48edad91dabaa07f672908185a7d4">float_reggroup</a>);
<a name="l01387"></a>01387   <a class="code" href="reggroups_8c.html#ac7bf3ffcf189976292b76329691cdba4">reggroup_add</a> (gdbarch, <a class="code" href="reggroups_8c.html#a1c7760844f4c40a5fb70e84f76f39676">all_reggroup</a>);
<a name="l01388"></a>01388   <a class="code" href="reggroups_8c.html#ac7bf3ffcf189976292b76329691cdba4">reggroup_add</a> (gdbarch, <a class="code" href="reggroups_8c.html#a9be54927c9d0393a70b8a3f0bc740de3">save_reggroup</a>);
<a name="l01389"></a>01389   <a class="code" href="reggroups_8c.html#ac7bf3ffcf189976292b76329691cdba4">reggroup_add</a> (gdbarch, <a class="code" href="reggroups_8c.html#a627d3b74a917560e7d81d93c472e915c">restore_reggroup</a>);
<a name="l01390"></a>01390   <a class="code" href="reggroups_8c.html#ac7bf3ffcf189976292b76329691cdba4">reggroup_add</a> (gdbarch, <a class="code" href="reggroups_8c.html#acef92c12b5ada70b62335d3de0752669">vector_reggroup</a>);
<a name="l01391"></a>01391   <a class="code" href="reggroups_8c.html#ac7bf3ffcf189976292b76329691cdba4">reggroup_add</a> (gdbarch, <a class="code" href="reggroups_8c.html#a55cfcb5dfb32653c793fa6b402564068">system_reggroup</a>);
<a name="l01392"></a>01392 }
<a name="l01393"></a>01393 
<a name="l01394"></a>01394 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01395"></a><a class="code" href="m68hc11-tdep_8c.html#a7f1bc207aab0e33382130e3dad26acb3">01395</a> <a class="code" href="m68hc11-tdep_8c.html#a7f1bc207aab0e33382130e3dad26acb3">m68hc11_register_reggroup_p</a> (<span class="keyword">struct</span> gdbarch *gdbarch, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>,
<a name="l01396"></a>01396                              <span class="keyword">struct</span> <a class="code" href="structreggroup.html">reggroup</a> *group)
<a name="l01397"></a>01397 {
<a name="l01398"></a>01398   <span class="comment">/* We must save the real hard register as well as gcc</span>
<a name="l01399"></a>01399 <span class="comment">     soft registers including the frame pointer.  */</span>
<a name="l01400"></a>01400   <span class="keywordflow">if</span> (group == <a class="code" href="reggroups_8c.html#a9be54927c9d0393a70b8a3f0bc740de3">save_reggroup</a> || group == <a class="code" href="reggroups_8c.html#a627d3b74a917560e7d81d93c472e915c">restore_reggroup</a>)
<a name="l01401"></a>01401     {
<a name="l01402"></a>01402       <span class="keywordflow">return</span> (regnum &lt;= <a class="code" href="gdbarch_8c.html#a69069435754d0b434c7043a21d247325">gdbarch_num_regs</a> (gdbarch)
<a name="l01403"></a>01403               || ((regnum == <a class="code" href="m68hc11-tdep_8c.html#a19c7f6e43e46cbf32393ffe9834c8430">SOFT_FP_REGNUM</a>
<a name="l01404"></a>01404                    || regnum == <a class="code" href="m68hc11-tdep_8c.html#a564566b1e9a11ce9dddc442b19f12a01">SOFT_TMP_REGNUM</a>
<a name="l01405"></a>01405                    || regnum == <a class="code" href="m68hc11-tdep_8c.html#a39149a1ce3726adb550fdf1816f5c827">SOFT_ZS_REGNUM</a>
<a name="l01406"></a>01406                    || regnum == <a class="code" href="m68hc11-tdep_8c.html#a278b6c0259d4a9e0e5c84ed6527d447b">SOFT_XY_REGNUM</a>)
<a name="l01407"></a>01407                   &amp;&amp; <a class="code" href="m68hc11-tdep_8c.html#a6e5fb40d15e092d3968f93db8317e88b">m68hc11_register_name</a> (gdbarch, regnum)));
<a name="l01408"></a>01408     }
<a name="l01409"></a>01409 
<a name="l01410"></a>01410   <span class="comment">/* Group to identify gcc soft registers (d1..dN).  */</span>
<a name="l01411"></a>01411   <span class="keywordflow">if</span> (group == m68hc11_soft_reggroup)
<a name="l01412"></a>01412     {
<a name="l01413"></a>01413       <span class="keywordflow">return</span> regnum &gt;= <a class="code" href="m68hc11-tdep_8c.html#ab41365e4eaa3515d5196e51de08638a3">SOFT_D1_REGNUM</a>
<a name="l01414"></a>01414              &amp;&amp; <a class="code" href="m68hc11-tdep_8c.html#a6e5fb40d15e092d3968f93db8317e88b">m68hc11_register_name</a> (gdbarch, regnum);
<a name="l01415"></a>01415     }
<a name="l01416"></a>01416 
<a name="l01417"></a>01417   <span class="keywordflow">if</span> (group == m68hc11_hard_reggroup)
<a name="l01418"></a>01418     {
<a name="l01419"></a>01419       <span class="keywordflow">return</span> regnum == <a class="code" href="m68hc11-tdep_8c.html#ab0b21dc196c2ba07c9351f43666cba9b">HARD_PC_REGNUM</a> || regnum == <a class="code" href="m68hc11-tdep_8c.html#ae952b6a248316415bd51f1eb9a76e2c5">HARD_SP_REGNUM</a>
<a name="l01420"></a>01420         || regnum == <a class="code" href="m68hc11-tdep_8c.html#a1ac9cc9d2ef331d2f36711f3ac184601">HARD_X_REGNUM</a> || regnum == <a class="code" href="m68hc11-tdep_8c.html#ac49ac61c96e7bacb2c456e663281977f">HARD_D_REGNUM</a>
<a name="l01421"></a>01421         || regnum == <a class="code" href="m68hc11-tdep_8c.html#acb7f22f67b1118058f52c32aecc2c7b4">HARD_Y_REGNUM</a> || regnum == <a class="code" href="m68hc11-tdep_8c.html#a4f139385698f68a63a27a538f93501db">HARD_CCR_REGNUM</a>;
<a name="l01422"></a>01422     }
<a name="l01423"></a>01423   <span class="keywordflow">return</span> <a class="code" href="reggroups_8c.html#af8dd83e11930382e46910f10da113e94">default_register_reggroup_p</a> (gdbarch, regnum, group);
<a name="l01424"></a>01424 }
<a name="l01425"></a>01425 
<a name="l01426"></a>01426 <span class="keyword">static</span> <span class="keyword">struct </span>gdbarch *
<a name="l01427"></a><a class="code" href="m68hc11-tdep_8c.html#a876d212168c7a3cf9d341a694328b77a">01427</a> <a class="code" href="m68hc11-tdep_8c.html#a876d212168c7a3cf9d341a694328b77a">m68hc11_gdbarch_init</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch__info.html">gdbarch_info</a> info,
<a name="l01428"></a>01428                       <span class="keyword">struct</span> <a class="code" href="structgdbarch__list.html">gdbarch_list</a> *arches)
<a name="l01429"></a>01429 {
<a name="l01430"></a>01430   <span class="keyword">struct </span>gdbarch *gdbarch;
<a name="l01431"></a>01431   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep;
<a name="l01432"></a>01432   <span class="keywordtype">int</span> <a class="code" href="structgdbarch__tdep.html#ab3a07d3bcd797401bcae9e87dd3dddbb">elf_flags</a>;
<a name="l01433"></a>01433 
<a name="l01434"></a>01434   <a class="code" href="m68hc11-tdep_8c.html#a01837626bd78b95ebd8dac8f94fd5f8c">soft_reg_initialized</a> = 0;
<a name="l01435"></a>01435 
<a name="l01436"></a>01436   <span class="comment">/* Extract the elf_flags if available.  */</span>
<a name="l01437"></a>01437   <span class="keywordflow">if</span> (info.<a class="code" href="structgdbarch__info.html#a3c4162054156176568f3b6aab88c2d58">abfd</a> != NULL
<a name="l01438"></a>01438       &amp;&amp; bfd_get_flavour (info.<a class="code" href="structgdbarch__info.html#a3c4162054156176568f3b6aab88c2d58">abfd</a>) == bfd_target_elf_flavour)
<a name="l01439"></a>01439     elf_flags = elf_elfheader (info.<a class="code" href="structgdbarch__info.html#a3c4162054156176568f3b6aab88c2d58">abfd</a>)-&gt;e_flags;
<a name="l01440"></a>01440   <span class="keywordflow">else</span>
<a name="l01441"></a>01441     elf_flags = 0;
<a name="l01442"></a>01442 
<a name="l01443"></a>01443   <span class="comment">/* Try to find a pre-existing architecture.  */</span>
<a name="l01444"></a>01444   <span class="keywordflow">for</span> (arches = <a class="code" href="gdbarch_8c.html#aa3ea1c25a21a533dfd0d924a7d9778e4">gdbarch_list_lookup_by_info</a> (arches, &amp;info);
<a name="l01445"></a>01445        arches != NULL;
<a name="l01446"></a>01446        arches = <a class="code" href="gdbarch_8c.html#aa3ea1c25a21a533dfd0d924a7d9778e4">gdbarch_list_lookup_by_info</a> (arches-&gt;<a class="code" href="structgdbarch__list.html#a9da6f84112797b67d5d8e7b8d4e26b14">next</a>, &amp;info))
<a name="l01447"></a>01447     {
<a name="l01448"></a>01448       <span class="keywordflow">if</span> (<a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> (arches-&gt;<a class="code" href="structgdbarch__list.html#a6c51da8c4c95249704dfe18394fd08f9">gdbarch</a>)-&gt;<a class="code" href="structgdbarch__tdep.html#ab3a07d3bcd797401bcae9e87dd3dddbb">elf_flags</a> != <a class="code" href="structgdbarch__tdep.html#ab3a07d3bcd797401bcae9e87dd3dddbb">elf_flags</a>)
<a name="l01449"></a>01449         <span class="keywordflow">continue</span>;
<a name="l01450"></a>01450 
<a name="l01451"></a>01451       <span class="keywordflow">return</span> arches-&gt;<a class="code" href="structgdbarch__list.html#a6c51da8c4c95249704dfe18394fd08f9">gdbarch</a>;
<a name="l01452"></a>01452     }
<a name="l01453"></a>01453 
<a name="l01454"></a>01454   <span class="comment">/* Need a new architecture.  Fill in a target specific vector.  */</span>
<a name="l01455"></a>01455   tdep = (<span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *) <a class="code" href="common-utils_8c.html#a634d6cd850bb831afebc499579303b3b">xmalloc</a> (<span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a>));
<a name="l01456"></a>01456   gdbarch = <a class="code" href="gdbarch_8c.html#a9e0b0979fa2cb7439f41f66deda8dec5">gdbarch_alloc</a> (&amp;info, tdep);
<a name="l01457"></a>01457   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ab3a07d3bcd797401bcae9e87dd3dddbb">elf_flags</a> = <a class="code" href="structgdbarch__tdep.html#ab3a07d3bcd797401bcae9e87dd3dddbb">elf_flags</a>;
<a name="l01458"></a>01458 
<a name="l01459"></a>01459   <span class="keywordflow">switch</span> (info.<a class="code" href="structgdbarch__info.html#ad42b7b45e0927c2482ba178db64b2fa7">bfd_arch_info</a>-&gt;arch)
<a name="l01460"></a>01460     {
<a name="l01461"></a>01461     <span class="keywordflow">case</span> bfd_arch_m68hc11:
<a name="l01462"></a>01462       tdep-&gt;<a class="code" href="structgdbarch__tdep.html#afe32878cf6d057b68592ff9a02b11d3a">stack_correction</a> = 1;
<a name="l01463"></a>01463       tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a8b7ee2cdbd45c96c87312b659c3f834c">use_page_register</a> = 0;
<a name="l01464"></a>01464       tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af30c019ad5ee85ed87a69a6496881be1">prologue</a> = <a class="code" href="m68hc11-tdep_8c.html#acb3bd9b917ff78269ae65cd4fbd91172">m6811_prologue</a>;
<a name="l01465"></a>01465       <a class="code" href="gdbarch_8c.html#a028fd40e003f89fcf02d7c2f9335b6ad">set_gdbarch_addr_bit</a> (gdbarch, 16);
<a name="l01466"></a>01466       <a class="code" href="gdbarch_8c.html#aaf72e08f972ba348d5d28f6b6b8db638">set_gdbarch_num_pseudo_regs</a> (gdbarch, <a class="code" href="m68hc11-tdep_8c.html#af32afab0375f60931345b6f2383b936c">M68HC11_NUM_PSEUDO_REGS</a>);
<a name="l01467"></a>01467       <a class="code" href="gdbarch_8c.html#a8852f70e2afc74953a57521ed08a3381">set_gdbarch_pc_regnum</a> (gdbarch, <a class="code" href="m68hc11-tdep_8c.html#ab0b21dc196c2ba07c9351f43666cba9b">HARD_PC_REGNUM</a>);
<a name="l01468"></a>01468       <a class="code" href="gdbarch_8c.html#ad8417c5d66cf04d0587f58f82de94c48">set_gdbarch_num_regs</a> (gdbarch, <a class="code" href="m68hc11-tdep_8c.html#a76cc940b04feb28abc6c581ce23f3dff">M68HC11_NUM_REGS</a>);
<a name="l01469"></a>01469       <span class="keywordflow">break</span>;
<a name="l01470"></a>01470 
<a name="l01471"></a>01471     <span class="keywordflow">case</span> bfd_arch_m68hc12:
<a name="l01472"></a>01472       tdep-&gt;<a class="code" href="structgdbarch__tdep.html#afe32878cf6d057b68592ff9a02b11d3a">stack_correction</a> = 0;
<a name="l01473"></a>01473       tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a8b7ee2cdbd45c96c87312b659c3f834c">use_page_register</a> = elf_flags &amp; E_M68HC12_BANKS;
<a name="l01474"></a>01474       tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af30c019ad5ee85ed87a69a6496881be1">prologue</a> = <a class="code" href="m68hc11-tdep_8c.html#ab463f079985eed834a5b7a5b3faf56c8">m6812_prologue</a>;
<a name="l01475"></a>01475       <a class="code" href="gdbarch_8c.html#a028fd40e003f89fcf02d7c2f9335b6ad">set_gdbarch_addr_bit</a> (gdbarch, elf_flags &amp; E_M68HC12_BANKS ? 32 : 16);
<a name="l01476"></a>01476       <a class="code" href="gdbarch_8c.html#aaf72e08f972ba348d5d28f6b6b8db638">set_gdbarch_num_pseudo_regs</a> (gdbarch,
<a name="l01477"></a>01477                                    elf_flags &amp; E_M68HC12_BANKS
<a name="l01478"></a>01478                                    ? <a class="code" href="m68hc11-tdep_8c.html#ac350403651c9825909eea3495f135414">M68HC12_NUM_PSEUDO_REGS</a>
<a name="l01479"></a>01479                                    : <a class="code" href="m68hc11-tdep_8c.html#af32afab0375f60931345b6f2383b936c">M68HC11_NUM_PSEUDO_REGS</a>);
<a name="l01480"></a>01480       <a class="code" href="gdbarch_8c.html#a8852f70e2afc74953a57521ed08a3381">set_gdbarch_pc_regnum</a> (gdbarch, elf_flags &amp; E_M68HC12_BANKS
<a name="l01481"></a>01481                              ? <a class="code" href="m68hc11-tdep_8c.html#ade8c25b3f7f7826ab6a52a1cfc4a3342">M68HC12_HARD_PC_REGNUM</a> : <a class="code" href="m68hc11-tdep_8c.html#ab0b21dc196c2ba07c9351f43666cba9b">HARD_PC_REGNUM</a>);
<a name="l01482"></a>01482       <a class="code" href="gdbarch_8c.html#ad8417c5d66cf04d0587f58f82de94c48">set_gdbarch_num_regs</a> (gdbarch, elf_flags &amp; E_M68HC12_BANKS
<a name="l01483"></a>01483                             ? <a class="code" href="m68hc11-tdep_8c.html#a18d38827c7eb2453f9981cbf12cdc8d0">M68HC12_NUM_REGS</a> : <a class="code" href="m68hc11-tdep_8c.html#a76cc940b04feb28abc6c581ce23f3dff">M68HC11_NUM_REGS</a>);
<a name="l01484"></a>01484       <span class="keywordflow">break</span>;
<a name="l01485"></a>01485 
<a name="l01486"></a>01486     <span class="keywordflow">default</span>:
<a name="l01487"></a>01487       <span class="keywordflow">break</span>;
<a name="l01488"></a>01488     }
<a name="l01489"></a>01489 
<a name="l01490"></a>01490   <span class="comment">/* Initially set everything according to the ABI.</span>
<a name="l01491"></a>01491 <span class="comment">     Use 16-bit integers since it will be the case for most</span>
<a name="l01492"></a>01492 <span class="comment">     programs.  The size of these types should normally be set</span>
<a name="l01493"></a>01493 <span class="comment">     according to the dwarf2 debug information.  */</span>
<a name="l01494"></a>01494   <a class="code" href="gdbarch_8c.html#aa8ab344aebdb71839678ff3d3e248f9b">set_gdbarch_short_bit</a> (gdbarch, 16);
<a name="l01495"></a>01495   <a class="code" href="gdbarch_8c.html#a4dbde89c15b9ee9f1808a4e01f2a758d">set_gdbarch_int_bit</a> (gdbarch, elf_flags &amp; E_M68HC11_I32 ? 32 : 16);
<a name="l01496"></a>01496   <a class="code" href="gdbarch_8c.html#aa04e7a5715ca0c94652f8d35f44411f7">set_gdbarch_float_bit</a> (gdbarch, 32);
<a name="l01497"></a>01497   <span class="keywordflow">if</span> (elf_flags &amp; E_M68HC11_F64)
<a name="l01498"></a>01498     {
<a name="l01499"></a>01499       <a class="code" href="gdbarch_8c.html#a6dde6fbd6439a96136e99bed4a7d98cd">set_gdbarch_double_bit</a> (gdbarch, 64);
<a name="l01500"></a>01500       <a class="code" href="gdbarch_8c.html#aeda072f3599a56ad1fdfe82f4c99f1f8">set_gdbarch_double_format</a> (gdbarch, <a class="code" href="gdbtypes_8c.html#ab5eaf32f7eeeb57f880c28ff0d7544ae">floatformats_ieee_double</a>);
<a name="l01501"></a>01501     }
<a name="l01502"></a>01502   <span class="keywordflow">else</span>
<a name="l01503"></a>01503     {
<a name="l01504"></a>01504       <a class="code" href="gdbarch_8c.html#a6dde6fbd6439a96136e99bed4a7d98cd">set_gdbarch_double_bit</a> (gdbarch, 32);
<a name="l01505"></a>01505       <a class="code" href="gdbarch_8c.html#aeda072f3599a56ad1fdfe82f4c99f1f8">set_gdbarch_double_format</a> (gdbarch, <a class="code" href="gdbtypes_8c.html#a2fcc5f34f85af43cce0eb78225fd2a11">floatformats_ieee_single</a>);
<a name="l01506"></a>01506     }
<a name="l01507"></a>01507   <a class="code" href="gdbarch_8c.html#ada51ef491e1e7d747c9a974639adf84d">set_gdbarch_long_double_bit</a> (gdbarch, 64);
<a name="l01508"></a>01508   <a class="code" href="gdbarch_8c.html#ab661d4332c2357c6242d5f3f57f1bc44">set_gdbarch_long_bit</a> (gdbarch, 32);
<a name="l01509"></a>01509   <a class="code" href="gdbarch_8c.html#abaaa21a756f3f8a689513c6df8b47ced">set_gdbarch_ptr_bit</a> (gdbarch, 16);
<a name="l01510"></a>01510   <a class="code" href="gdbarch_8c.html#a00b33f93ffedea6960d0ed4a9d7e1fba">set_gdbarch_long_long_bit</a> (gdbarch, 64);
<a name="l01511"></a>01511 
<a name="l01512"></a>01512   <span class="comment">/* Characters are unsigned.  */</span>
<a name="l01513"></a>01513   <a class="code" href="gdbarch_8c.html#a0863fa86a9cb752711cca456e3f829b7">set_gdbarch_char_signed</a> (gdbarch, 0);
<a name="l01514"></a>01514 
<a name="l01515"></a>01515   <a class="code" href="gdbarch_8c.html#a1974f5f26c09a4cd32165286c3769621">set_gdbarch_unwind_pc</a> (gdbarch, <a class="code" href="m68hc11-tdep_8c.html#addd9af0eb389d438d990c86dd5fb0a50">m68hc11_unwind_pc</a>);
<a name="l01516"></a>01516   <a class="code" href="gdbarch_8c.html#ababd871cc4b5fac1831e52f7331d7572">set_gdbarch_unwind_sp</a> (gdbarch, <a class="code" href="m68hc11-tdep_8c.html#a524861e48c865fd7a3effc8d45f775d9">m68hc11_unwind_sp</a>);
<a name="l01517"></a>01517 
<a name="l01518"></a>01518   <span class="comment">/* Set register info.  */</span>
<a name="l01519"></a>01519   <a class="code" href="gdbarch_8c.html#a6d14588097c52c3129cab85a5d9c0eab">set_gdbarch_fp0_regnum</a> (gdbarch, -1);
<a name="l01520"></a>01520 
<a name="l01521"></a>01521   <a class="code" href="gdbarch_8c.html#a81a92a88a67093d18e59fd5650fda352">set_gdbarch_sp_regnum</a> (gdbarch, <a class="code" href="m68hc11-tdep_8c.html#ae952b6a248316415bd51f1eb9a76e2c5">HARD_SP_REGNUM</a>);
<a name="l01522"></a>01522   <a class="code" href="gdbarch_8c.html#a378ba40a6275393e204873c5bba602ad">set_gdbarch_register_name</a> (gdbarch, <a class="code" href="m68hc11-tdep_8c.html#a6e5fb40d15e092d3968f93db8317e88b">m68hc11_register_name</a>);
<a name="l01523"></a>01523   <a class="code" href="gdbarch_8c.html#a21919f6adfae80ed36e69e89cdfea531">set_gdbarch_register_type</a> (gdbarch, <a class="code" href="m68hc11-tdep_8c.html#a404ab5acc433b6c7557ef3c0292ea84f">m68hc11_register_type</a>);
<a name="l01524"></a>01524   <a class="code" href="gdbarch_8c.html#a99fd57c1a882cf61c413e64028937a1b">set_gdbarch_pseudo_register_read</a> (gdbarch, <a class="code" href="m68hc11-tdep_8c.html#a003a91b7b05a2f9b77f8e2ec99e966c4">m68hc11_pseudo_register_read</a>);
<a name="l01525"></a>01525   <a class="code" href="gdbarch_8c.html#ae463eca1992acf69ff1bc28ed8ca3aea">set_gdbarch_pseudo_register_write</a> (gdbarch, <a class="code" href="m68hc11-tdep_8c.html#aff017aaea00d7c6e8cd7f2c1cef030e4">m68hc11_pseudo_register_write</a>);
<a name="l01526"></a>01526 
<a name="l01527"></a>01527   <a class="code" href="gdbarch_8c.html#a853528dceff46211c1bb8c57b77dca31">set_gdbarch_push_dummy_call</a> (gdbarch, <a class="code" href="m68hc11-tdep_8c.html#a00e8adf3fab50444bb14929894f7ff97">m68hc11_push_dummy_call</a>);
<a name="l01528"></a>01528 
<a name="l01529"></a>01529   <a class="code" href="gdbarch_8c.html#ad9b13a9323cac027c4b805953b4fff63">set_gdbarch_return_value</a> (gdbarch, <a class="code" href="m68hc11-tdep_8c.html#ad0fe4f2456b356d59e7fe868bae1ac13">m68hc11_return_value</a>);
<a name="l01530"></a>01530   <a class="code" href="gdbarch_8c.html#a841509ae0070f2f12aa9b3b7fd52b92f">set_gdbarch_skip_prologue</a> (gdbarch, <a class="code" href="m68hc11-tdep_8c.html#a32a9610d10ea241d7aa2413e7547520d">m68hc11_skip_prologue</a>);
<a name="l01531"></a>01531   <a class="code" href="gdbarch_8c.html#ad66381ed135b13aa5635f0485211ca71">set_gdbarch_inner_than</a> (gdbarch, <a class="code" href="arch-utils_8c.html#aaceae1c07203f3091df647f813b9f20e">core_addr_lessthan</a>);
<a name="l01532"></a>01532   <a class="code" href="gdbarch_8c.html#ad738cdf37fa27f4cf3642107cadf61d3">set_gdbarch_breakpoint_from_pc</a> (gdbarch, <a class="code" href="m68hc11-tdep_8c.html#ab318bea782f7a9f6273b32627af649a3">m68hc11_breakpoint_from_pc</a>);
<a name="l01533"></a>01533   <a class="code" href="gdbarch_8c.html#a0c9e9e391e44d476b74debefc407e9bb">set_gdbarch_print_insn</a> (gdbarch, <a class="code" href="m68hc11-tdep_8c.html#a910c4bb5b816f55696af513311308a53">gdb_print_insn_m68hc11</a>);
<a name="l01534"></a>01534 
<a name="l01535"></a>01535   <a class="code" href="m68hc11-tdep_8c.html#a0425b385889c3722f57530076c92e7c7">m68hc11_add_reggroups</a> (gdbarch);
<a name="l01536"></a>01536   <a class="code" href="gdbarch_8c.html#a17301533b8e9f7002350ed0a2f4b5558">set_gdbarch_register_reggroup_p</a> (gdbarch, <a class="code" href="m68hc11-tdep_8c.html#a7f1bc207aab0e33382130e3dad26acb3">m68hc11_register_reggroup_p</a>);
<a name="l01537"></a>01537   <a class="code" href="gdbarch_8c.html#a678d6c94fd0f5f39754d3a76416ebeb6">set_gdbarch_print_registers_info</a> (gdbarch, <a class="code" href="m68hc11-tdep_8c.html#a4e4b77ccfcfae26fc525ad606c9a53bb">m68hc11_print_registers_info</a>);
<a name="l01538"></a>01538 
<a name="l01539"></a>01539   <span class="comment">/* Hook in the DWARF CFI frame unwinder.  */</span>
<a name="l01540"></a>01540   <a class="code" href="dwarf2-frame_8c.html#ab2a0a14bba7f1db72907039eb3356975">dwarf2_append_unwinders</a> (gdbarch);
<a name="l01541"></a>01541 
<a name="l01542"></a>01542   <a class="code" href="frame-unwind_8c.html#afa4de8a130514bfd524d46f32e35a534">frame_unwind_append_unwinder</a> (gdbarch, &amp;m68hc11_frame_unwind);
<a name="l01543"></a>01543   <a class="code" href="frame-base_8c.html#afc9e209b41e14278fb1ab72c1d3c6e5d">frame_base_set_default</a> (gdbarch, &amp;m68hc11_frame_base);
<a name="l01544"></a>01544   
<a name="l01545"></a>01545   <span class="comment">/* Methods for saving / extracting a dummy frame&#39;s ID.  The ID&#39;s</span>
<a name="l01546"></a>01546 <span class="comment">     stack address must match the SP value returned by</span>
<a name="l01547"></a>01547 <span class="comment">     PUSH_DUMMY_CALL, and saved by generic_save_dummy_frame_tos.  */</span>
<a name="l01548"></a>01548   <a class="code" href="gdbarch_8c.html#a23da982924f904d22d0b58639a48bccf">set_gdbarch_dummy_id</a> (gdbarch, <a class="code" href="m68hc11-tdep_8c.html#ae89c04a22ef7729d6dc504334a31bc9f">m68hc11_dummy_id</a>);
<a name="l01549"></a>01549 
<a name="l01550"></a>01550   <span class="comment">/* Return the unwound PC value.  */</span>
<a name="l01551"></a>01551   <a class="code" href="gdbarch_8c.html#a1974f5f26c09a4cd32165286c3769621">set_gdbarch_unwind_pc</a> (gdbarch, <a class="code" href="m68hc11-tdep_8c.html#addd9af0eb389d438d990c86dd5fb0a50">m68hc11_unwind_pc</a>);
<a name="l01552"></a>01552 
<a name="l01553"></a>01553   <span class="comment">/* Minsymbol frobbing.  */</span>
<a name="l01554"></a>01554   <a class="code" href="gdbarch_8c.html#aa76b9bf8a4bb23e591853131518bc8d3">set_gdbarch_elf_make_msymbol_special</a> (gdbarch,
<a name="l01555"></a>01555                                         <a class="code" href="m68hc11-tdep_8c.html#a47afb81c19abc7bac8e4f1b112ada623">m68hc11_elf_make_msymbol_special</a>);
<a name="l01556"></a>01556 
<a name="l01557"></a>01557   <a class="code" href="gdbarch_8c.html#a5fad1810477fcfdccf7604c41fe299b8">set_gdbarch_believe_pcc_promotion</a> (gdbarch, 1);
<a name="l01558"></a>01558 
<a name="l01559"></a>01559   <span class="keywordflow">return</span> gdbarch;
<a name="l01560"></a>01560 }
<a name="l01561"></a>01561 
<a name="l01562"></a>01562 <span class="comment">/* -Wmissing-prototypes */</span>
<a name="l01563"></a>01563 <span class="keyword">extern</span> <a class="code" href="defs_8h.html#a686ed07d4fdcdc366f2bc677216ca08d">initialize_file_ftype</a> <a class="code" href="m68hc11-tdep_8c.html#abdd347a833389ddeb31fe25d493a8695">_initialize_m68hc11_tdep</a>;
<a name="l01564"></a>01564 
<a name="l01565"></a>01565 <span class="keywordtype">void</span>
<a name="l01566"></a><a class="code" href="m68hc11-tdep_8c.html#ad0b13c39bb4947fc8963b5617b17a191">01566</a> <a class="code" href="m68hc11-tdep_8c.html#abdd347a833389ddeb31fe25d493a8695">_initialize_m68hc11_tdep</a> (<span class="keywordtype">void</span>)
<a name="l01567"></a>01567 {
<a name="l01568"></a>01568   <a class="code" href="gdbarch_8c.html#adb96505b62850783929ff38de0c39062">register_gdbarch_init</a> (bfd_arch_m68hc11, <a class="code" href="m68hc11-tdep_8c.html#a876d212168c7a3cf9d341a694328b77a">m68hc11_gdbarch_init</a>);
<a name="l01569"></a>01569   <a class="code" href="gdbarch_8c.html#adb96505b62850783929ff38de0c39062">register_gdbarch_init</a> (bfd_arch_m68hc12, <a class="code" href="m68hc11-tdep_8c.html#a876d212168c7a3cf9d341a694328b77a">m68hc11_gdbarch_init</a>);
<a name="l01570"></a>01570   <a class="code" href="m68hc11-tdep_8c.html#ac1a33578914957891bc118bb25966d5a">m68hc11_init_reggroups</a> ();
<a name="l01571"></a>01571 } 
<a name="l01572"></a>01572 
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 11 2013 14:13:29 for GDB (xrefs) by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
