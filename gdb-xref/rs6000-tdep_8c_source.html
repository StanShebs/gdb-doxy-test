<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>GDB (xrefs): /home/stan/gdb/src/gdb/rs6000-tdep.c Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">GDB (xrefs)
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">/home/stan/gdb/src/gdb/rs6000-tdep.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="rs6000-tdep_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* Target-dependent code for GDB, the GNU debugger.</span>
<a name="l00002"></a>00002 <span class="comment"></span>
<a name="l00003"></a>00003 <span class="comment">   Copyright (C) 1986-2013 Free Software Foundation, Inc.</span>
<a name="l00004"></a>00004 <span class="comment"></span>
<a name="l00005"></a>00005 <span class="comment">   This file is part of GDB.</span>
<a name="l00006"></a>00006 <span class="comment"></span>
<a name="l00007"></a>00007 <span class="comment">   This program is free software; you can redistribute it and/or modify</span>
<a name="l00008"></a>00008 <span class="comment">   it under the terms of the GNU General Public License as published by</span>
<a name="l00009"></a>00009 <span class="comment">   the Free Software Foundation; either version 3 of the License, or</span>
<a name="l00010"></a>00010 <span class="comment">   (at your option) any later version.</span>
<a name="l00011"></a>00011 <span class="comment"></span>
<a name="l00012"></a>00012 <span class="comment">   This program is distributed in the hope that it will be useful,</span>
<a name="l00013"></a>00013 <span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00014"></a>00014 <span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00015"></a>00015 <span class="comment">   GNU General Public License for more details.</span>
<a name="l00016"></a>00016 <span class="comment"></span>
<a name="l00017"></a>00017 <span class="comment">   You should have received a copy of the GNU General Public License</span>
<a name="l00018"></a>00018 <span class="comment">   along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.  */</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#include &quot;<a class="code" href="defs_8h.html">defs.h</a>&quot;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &quot;<a class="code" href="frame_8h.html">frame.h</a>&quot;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;<a class="code" href="inferior_8h.html">inferior.h</a>&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;<a class="code" href="symtab_8h.html">symtab.h</a>&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="target_8h.html">target.h</a>&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="gdbcore_8h.html">gdbcore.h</a>&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="gdbcmd_8h.html">gdbcmd.h</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="objfiles_8h.html">objfiles.h</a>&quot;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="arch-utils_8h.html">arch-utils.h</a>&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="regcache_8h.html">regcache.h</a>&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="regset_8h.html">regset.h</a>&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="doublest_8h.html">doublest.h</a>&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="value_8h.html">value.h</a>&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;<a class="code" href="parser-defs_8h.html">parser-defs.h</a>&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="osabi_8h.html">osabi.h</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="infcall_8h.html">infcall.h</a>&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="sim-regno_8h.html">sim-regno.h</a>&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;gdb/sim-ppc.h&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="reggroups_8h.html">reggroups.h</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="dwarf2-frame_8h.html">dwarf2-frame.h</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="target-descriptions_8h.html">target-descriptions.h</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="user-regs_8h.html">user-regs.h</a>&quot;</span>
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;libbfd.h&quot;</span>             <span class="comment">/* for bfd_default_set_arch_mach */</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;coff/internal.h&quot;</span>      <span class="comment">/* for libcoff.h */</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;libcoff.h&quot;</span>            <span class="comment">/* for xcoff_data */</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;coff/xcoff.h&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;libxcoff.h&quot;</span>
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 <span class="preprocessor">#include &quot;elf-bfd.h&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;elf/ppc.h&quot;</span>
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 <span class="preprocessor">#include &quot;<a class="code" href="solib-svr4_8h.html">solib-svr4.h</a>&quot;</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &quot;<a class="code" href="ppc-tdep_8h.html">ppc-tdep.h</a>&quot;</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include &quot;<a class="code" href="ppc-ravenscar-thread_8h.html">ppc-ravenscar-thread.h</a>&quot;</span>
<a name="l00055"></a>00055 
<a name="l00056"></a>00056 <span class="preprocessor">#include &quot;<a class="code" href="gdb__assert_8h.html">gdb_assert.h</a>&quot;</span>
<a name="l00057"></a>00057 <span class="preprocessor">#include &quot;dis-asm.h&quot;</span>
<a name="l00058"></a>00058 
<a name="l00059"></a>00059 <span class="preprocessor">#include &quot;<a class="code" href="trad-frame_8h.html">trad-frame.h</a>&quot;</span>
<a name="l00060"></a>00060 <span class="preprocessor">#include &quot;<a class="code" href="frame-unwind_8h.html">frame-unwind.h</a>&quot;</span>
<a name="l00061"></a>00061 <span class="preprocessor">#include &quot;<a class="code" href="frame-base_8h.html">frame-base.h</a>&quot;</span>
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 <span class="preprocessor">#include &quot;<a class="code" href="powerpc-32_8c.html">features/rs6000/powerpc-32.c</a>&quot;</span>
<a name="l00064"></a>00064 <span class="preprocessor">#include &quot;<a class="code" href="powerpc-altivec32_8c.html">features/rs6000/powerpc-altivec32.c</a>&quot;</span>
<a name="l00065"></a>00065 <span class="preprocessor">#include &quot;<a class="code" href="powerpc-vsx32_8c.html">features/rs6000/powerpc-vsx32.c</a>&quot;</span>
<a name="l00066"></a>00066 <span class="preprocessor">#include &quot;<a class="code" href="powerpc-403_8c.html">features/rs6000/powerpc-403.c</a>&quot;</span>
<a name="l00067"></a>00067 <span class="preprocessor">#include &quot;<a class="code" href="powerpc-403gc_8c.html">features/rs6000/powerpc-403gc.c</a>&quot;</span>
<a name="l00068"></a>00068 <span class="preprocessor">#include &quot;<a class="code" href="powerpc-405_8c.html">features/rs6000/powerpc-405.c</a>&quot;</span>
<a name="l00069"></a>00069 <span class="preprocessor">#include &quot;<a class="code" href="powerpc-505_8c.html">features/rs6000/powerpc-505.c</a>&quot;</span>
<a name="l00070"></a>00070 <span class="preprocessor">#include &quot;<a class="code" href="powerpc-601_8c.html">features/rs6000/powerpc-601.c</a>&quot;</span>
<a name="l00071"></a>00071 <span class="preprocessor">#include &quot;<a class="code" href="powerpc-602_8c.html">features/rs6000/powerpc-602.c</a>&quot;</span>
<a name="l00072"></a>00072 <span class="preprocessor">#include &quot;<a class="code" href="powerpc-603_8c.html">features/rs6000/powerpc-603.c</a>&quot;</span>
<a name="l00073"></a>00073 <span class="preprocessor">#include &quot;<a class="code" href="powerpc-604_8c.html">features/rs6000/powerpc-604.c</a>&quot;</span>
<a name="l00074"></a>00074 <span class="preprocessor">#include &quot;<a class="code" href="powerpc-64_8c.html">features/rs6000/powerpc-64.c</a>&quot;</span>
<a name="l00075"></a>00075 <span class="preprocessor">#include &quot;<a class="code" href="powerpc-altivec64_8c.html">features/rs6000/powerpc-altivec64.c</a>&quot;</span>
<a name="l00076"></a>00076 <span class="preprocessor">#include &quot;<a class="code" href="powerpc-vsx64_8c.html">features/rs6000/powerpc-vsx64.c</a>&quot;</span>
<a name="l00077"></a>00077 <span class="preprocessor">#include &quot;<a class="code" href="powerpc-7400_8c.html">features/rs6000/powerpc-7400.c</a>&quot;</span>
<a name="l00078"></a>00078 <span class="preprocessor">#include &quot;<a class="code" href="powerpc-750_8c.html">features/rs6000/powerpc-750.c</a>&quot;</span>
<a name="l00079"></a>00079 <span class="preprocessor">#include &quot;<a class="code" href="powerpc-860_8c.html">features/rs6000/powerpc-860.c</a>&quot;</span>
<a name="l00080"></a>00080 <span class="preprocessor">#include &quot;<a class="code" href="powerpc-e500_8c.html">features/rs6000/powerpc-e500.c</a>&quot;</span>
<a name="l00081"></a>00081 <span class="preprocessor">#include &quot;<a class="code" href="rs6000_8c.html">features/rs6000/rs6000.c</a>&quot;</span>
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 <span class="comment">/* Determine if regnum is an SPE pseudo-register.  */</span>
<a name="l00084"></a><a class="code" href="rs6000-tdep_8c.html#a6b4b7509073a7a5ced4f84e2d75a6c2d">00084</a> <span class="preprocessor">#define IS_SPE_PSEUDOREG(tdep, regnum) ((tdep)-&gt;ppc_ev0_regnum &gt;= 0 \</span>
<a name="l00085"></a>00085 <span class="preprocessor">    &amp;&amp; (regnum) &gt;= (tdep)-&gt;ppc_ev0_regnum \</span>
<a name="l00086"></a>00086 <span class="preprocessor">    &amp;&amp; (regnum) &lt; (tdep)-&gt;ppc_ev0_regnum + 32)</span>
<a name="l00087"></a>00087 <span class="preprocessor"></span>
<a name="l00088"></a>00088 <span class="comment">/* Determine if regnum is a decimal float pseudo-register.  */</span>
<a name="l00089"></a><a class="code" href="rs6000-tdep_8c.html#a68028aca2f05840bfad4dd14e74ad14f">00089</a> <span class="preprocessor">#define IS_DFP_PSEUDOREG(tdep, regnum) ((tdep)-&gt;ppc_dl0_regnum &gt;= 0 \</span>
<a name="l00090"></a>00090 <span class="preprocessor">    &amp;&amp; (regnum) &gt;= (tdep)-&gt;ppc_dl0_regnum \</span>
<a name="l00091"></a>00091 <span class="preprocessor">    &amp;&amp; (regnum) &lt; (tdep)-&gt;ppc_dl0_regnum + 16)</span>
<a name="l00092"></a>00092 <span class="preprocessor"></span>
<a name="l00093"></a>00093 <span class="comment">/* Determine if regnum is a POWER7 VSX register.  */</span>
<a name="l00094"></a><a class="code" href="rs6000-tdep_8c.html#abbc6a8fca79f4f66e9483886d4ce3937">00094</a> <span class="preprocessor">#define IS_VSX_PSEUDOREG(tdep, regnum) ((tdep)-&gt;ppc_vsr0_regnum &gt;= 0 \</span>
<a name="l00095"></a>00095 <span class="preprocessor">    &amp;&amp; (regnum) &gt;= (tdep)-&gt;ppc_vsr0_regnum \</span>
<a name="l00096"></a>00096 <span class="preprocessor">    &amp;&amp; (regnum) &lt; (tdep)-&gt;ppc_vsr0_regnum + ppc_num_vsrs)</span>
<a name="l00097"></a>00097 <span class="preprocessor"></span>
<a name="l00098"></a>00098 <span class="comment">/* Determine if regnum is a POWER7 Extended FP register.  */</span>
<a name="l00099"></a><a class="code" href="rs6000-tdep_8c.html#addf51a44b80a2a6e145d2a488754e124">00099</a> <span class="preprocessor">#define IS_EFP_PSEUDOREG(tdep, regnum) ((tdep)-&gt;ppc_efpr0_regnum &gt;= 0 \</span>
<a name="l00100"></a>00100 <span class="preprocessor">    &amp;&amp; (regnum) &gt;= (tdep)-&gt;ppc_efpr0_regnum \</span>
<a name="l00101"></a>00101 <span class="preprocessor">    &amp;&amp; (regnum) &lt; (tdep)-&gt;ppc_efpr0_regnum + ppc_num_efprs)</span>
<a name="l00102"></a>00102 <span class="preprocessor"></span>
<a name="l00103"></a>00103 <span class="comment">/* The list of available &quot;set powerpc ...&quot; and &quot;show powerpc ...&quot;</span>
<a name="l00104"></a>00104 <span class="comment">   commands.  */</span>
<a name="l00105"></a><a class="code" href="rs6000-tdep_8c.html#a958905183d88ac1efdfef6cd7fa1381c">00105</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structcmd__list__element.html">cmd_list_element</a> *<a class="code" href="rs6000-tdep_8c.html#a958905183d88ac1efdfef6cd7fa1381c">setpowerpccmdlist</a> = NULL;
<a name="l00106"></a><a class="code" href="rs6000-tdep_8c.html#a5eda81e4532082a1d515f2418bca477a">00106</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structcmd__list__element.html">cmd_list_element</a> *<a class="code" href="rs6000-tdep_8c.html#a5eda81e4532082a1d515f2418bca477a">showpowerpccmdlist</a> = NULL;
<a name="l00107"></a>00107 
<a name="l00108"></a><a class="code" href="rs6000-tdep_8c.html#a02e0e11c401a3de597d3f3461c598cfa">00108</a> <span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="defs_8h.html#a7e28c5d9363062b4fd5eec5fed14448f">auto_boolean</a> <a class="code" href="rs6000-tdep_8c.html#a02e0e11c401a3de597d3f3461c598cfa">powerpc_soft_float_global</a> = <a class="code" href="defs_8h.html#a7e28c5d9363062b4fd5eec5fed14448fa48f3bffd79907d65a7ee3aee7aabc163">AUTO_BOOLEAN_AUTO</a>;
<a name="l00109"></a>00109 
<a name="l00110"></a>00110 <span class="comment">/* The vector ABI to use.  Keep this in sync with powerpc_vector_abi.  */</span>
<a name="l00111"></a><a class="code" href="rs6000-tdep_8c.html#aa39a6478966f6a980eb80ab6f0528bb4">00111</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="rs6000-tdep_8c.html#aa39a6478966f6a980eb80ab6f0528bb4">powerpc_vector_strings</a>[] =
<a name="l00112"></a>00112 {
<a name="l00113"></a>00113   <span class="stringliteral">&quot;auto&quot;</span>,
<a name="l00114"></a>00114   <span class="stringliteral">&quot;generic&quot;</span>,
<a name="l00115"></a>00115   <span class="stringliteral">&quot;altivec&quot;</span>,
<a name="l00116"></a>00116   <span class="stringliteral">&quot;spe&quot;</span>,
<a name="l00117"></a>00117   NULL
<a name="l00118"></a>00118 };
<a name="l00119"></a>00119 
<a name="l00120"></a>00120 <span class="comment">/* A variable that can be configured by the user.  */</span>
<a name="l00121"></a><a class="code" href="rs6000-tdep_8c.html#a73815c27332aa8eb305ed17e148d81b4">00121</a> <span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="ppc-tdep_8h.html#ab82af50225ea2c3b84b8f8d412e31290">powerpc_vector_abi</a> <a class="code" href="rs6000-tdep_8c.html#a73815c27332aa8eb305ed17e148d81b4">powerpc_vector_abi_global</a> = <a class="code" href="ppc-tdep_8h.html#ab82af50225ea2c3b84b8f8d412e31290a2676cd0aed103f62bd70876298346266">POWERPC_VEC_AUTO</a>;
<a name="l00122"></a><a class="code" href="rs6000-tdep_8c.html#a13c1ca613e0ce4119da22a01dd89a523">00122</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="rs6000-tdep_8c.html#a13c1ca613e0ce4119da22a01dd89a523">powerpc_vector_abi_string</a> = <span class="stringliteral">&quot;auto&quot;</span>;
<a name="l00123"></a>00123 
<a name="l00124"></a>00124 <span class="comment">/* To be used by skip_prologue.  */</span>
<a name="l00125"></a>00125 
<a name="l00126"></a><a class="code" href="structrs6000__framedata.html">00126</a> <span class="keyword">struct </span><a class="code" href="structrs6000__framedata.html">rs6000_framedata</a>
<a name="l00127"></a>00127   {
<a name="l00128"></a><a class="code" href="structrs6000__framedata.html#a8fe5b77e6c5b1dc69c851c79fd67352b">00128</a>     <span class="keywordtype">int</span> <a class="code" href="structrs6000__framedata.html#a8fe5b77e6c5b1dc69c851c79fd67352b">offset</a>;                 <span class="comment">/* total size of frame --- the distance</span>
<a name="l00129"></a>00129 <span class="comment">                                   by which we decrement sp to allocate</span>
<a name="l00130"></a>00130 <span class="comment">                                   the frame */</span>
<a name="l00131"></a><a class="code" href="structrs6000__framedata.html#a864b62d4fb50dd86d9f15e5aab678764">00131</a>     <span class="keywordtype">int</span> <a class="code" href="structrs6000__framedata.html#a864b62d4fb50dd86d9f15e5aab678764">saved_gpr</a>;              <span class="comment">/* smallest # of saved gpr */</span>
<a name="l00132"></a><a class="code" href="structrs6000__framedata.html#a2f00dfad4edfd39a6f6d24c094ab1d7d">00132</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structrs6000__framedata.html#a2f00dfad4edfd39a6f6d24c094ab1d7d">gpr_mask</a>;      <span class="comment">/* Each bit is an individual saved GPR.  */</span>
<a name="l00133"></a><a class="code" href="structrs6000__framedata.html#a2ef1436fd7e4a69465b4a764b6ec0fb2">00133</a>     <span class="keywordtype">int</span> <a class="code" href="structrs6000__framedata.html#a2ef1436fd7e4a69465b4a764b6ec0fb2">saved_fpr</a>;              <span class="comment">/* smallest # of saved fpr */</span>
<a name="l00134"></a><a class="code" href="structrs6000__framedata.html#a5c109de762bc0529776b89089ae3a9cc">00134</a>     <span class="keywordtype">int</span> <a class="code" href="structrs6000__framedata.html#a5c109de762bc0529776b89089ae3a9cc">saved_vr</a>;               <span class="comment">/* smallest # of saved vr */</span>
<a name="l00135"></a><a class="code" href="structrs6000__framedata.html#a84900e94cb40683900fd7a0c8cd0875d">00135</a>     <span class="keywordtype">int</span> <a class="code" href="structrs6000__framedata.html#a84900e94cb40683900fd7a0c8cd0875d">saved_ev</a>;               <span class="comment">/* smallest # of saved ev */</span>
<a name="l00136"></a><a class="code" href="structrs6000__framedata.html#a03be24b999043cf63a67b948f0d5b7a3">00136</a>     <span class="keywordtype">int</span> <a class="code" href="structrs6000__framedata.html#a03be24b999043cf63a67b948f0d5b7a3">alloca_reg</a>;             <span class="comment">/* alloca register number (frame ptr) */</span>
<a name="l00137"></a><a class="code" href="structrs6000__framedata.html#a436f9ab06e8bf4bc5b690ac6bac79d09">00137</a>     <span class="keywordtype">char</span> <a class="code" href="structrs6000__framedata.html#a436f9ab06e8bf4bc5b690ac6bac79d09">frameless</a>;             <span class="comment">/* true if frameless functions.  */</span>
<a name="l00138"></a><a class="code" href="structrs6000__framedata.html#a44637c0480218aab1598a68e6a720180">00138</a>     <span class="keywordtype">char</span> <a class="code" href="structrs6000__framedata.html#a44637c0480218aab1598a68e6a720180">nosavedpc</a>;             <span class="comment">/* true if pc not saved.  */</span>
<a name="l00139"></a><a class="code" href="structrs6000__framedata.html#ab41a4e24016bc514a4c0bad7a1ea6cca">00139</a>     <span class="keywordtype">char</span> <a class="code" href="structrs6000__framedata.html#ab41a4e24016bc514a4c0bad7a1ea6cca">used_bl</a>;               <span class="comment">/* true if link register clobbered */</span>
<a name="l00140"></a><a class="code" href="structrs6000__framedata.html#a4fc2314f4e399e3a4d3b82c4a5494766">00140</a>     <span class="keywordtype">int</span> <a class="code" href="structrs6000__framedata.html#a4fc2314f4e399e3a4d3b82c4a5494766">gpr_offset</a>;             <span class="comment">/* offset of saved gprs from prev sp */</span>
<a name="l00141"></a><a class="code" href="structrs6000__framedata.html#afa00471cc5d358b2f83318f446dc6d46">00141</a>     <span class="keywordtype">int</span> <a class="code" href="structrs6000__framedata.html#afa00471cc5d358b2f83318f446dc6d46">fpr_offset</a>;             <span class="comment">/* offset of saved fprs from prev sp */</span>
<a name="l00142"></a><a class="code" href="structrs6000__framedata.html#a26faa448c2d4ce25ea90239b7bbaeefc">00142</a>     <span class="keywordtype">int</span> <a class="code" href="structrs6000__framedata.html#a26faa448c2d4ce25ea90239b7bbaeefc">vr_offset</a>;              <span class="comment">/* offset of saved vrs from prev sp */</span>
<a name="l00143"></a><a class="code" href="structrs6000__framedata.html#ae19b25bb053617d10675690b2d5d940d">00143</a>     <span class="keywordtype">int</span> <a class="code" href="structrs6000__framedata.html#ae19b25bb053617d10675690b2d5d940d">ev_offset</a>;              <span class="comment">/* offset of saved evs from prev sp */</span>
<a name="l00144"></a><a class="code" href="structrs6000__framedata.html#a2fa55d4b97c89f7dc3d01b87bb1377c5">00144</a>     <span class="keywordtype">int</span> <a class="code" href="structrs6000__framedata.html#a2fa55d4b97c89f7dc3d01b87bb1377c5">lr_offset</a>;              <span class="comment">/* offset of saved lr */</span>
<a name="l00145"></a><a class="code" href="structrs6000__framedata.html#a927eceb33f6ffca4ad573494e0ac164b">00145</a>     <span class="keywordtype">int</span> <a class="code" href="structrs6000__framedata.html#a927eceb33f6ffca4ad573494e0ac164b">lr_register</a>;            <span class="comment">/* register of saved lr, if trustworthy */</span>
<a name="l00146"></a><a class="code" href="structrs6000__framedata.html#a653029fbd7bb523becdb6f6b635b7e57">00146</a>     <span class="keywordtype">int</span> <a class="code" href="structrs6000__framedata.html#a653029fbd7bb523becdb6f6b635b7e57">cr_offset</a>;              <span class="comment">/* offset of saved cr */</span>
<a name="l00147"></a><a class="code" href="structrs6000__framedata.html#a67412926b0bc9283dce4f19c2009693a">00147</a>     <span class="keywordtype">int</span> <a class="code" href="structrs6000__framedata.html#a67412926b0bc9283dce4f19c2009693a">vrsave_offset</a>;          <span class="comment">/* offset of saved vrsave register */</span>
<a name="l00148"></a>00148   };
<a name="l00149"></a>00149 
<a name="l00150"></a>00150 
<a name="l00151"></a>00151 <span class="comment">/* Is REGNO a VSX register? Return 1 if so, 0 otherwise.  */</span>
<a name="l00152"></a>00152 <span class="keywordtype">int</span>
<a name="l00153"></a><a class="code" href="rs6000-tdep_8c.html#ad3a0aa980b0885d6eff98a8046749fb5">00153</a> <a class="code" href="ppc-tdep_8h.html#ad3a0aa980b0885d6eff98a8046749fb5">vsx_register_p</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keywordtype">int</span> regno)
<a name="l00154"></a>00154 {
<a name="l00155"></a>00155   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00156"></a>00156   <span class="keywordflow">if</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#acee880f0e287602f378022dec6896991">ppc_vsr0_regnum</a> &lt; 0)
<a name="l00157"></a>00157     <span class="keywordflow">return</span> 0;
<a name="l00158"></a>00158   <span class="keywordflow">else</span>
<a name="l00159"></a>00159     <span class="keywordflow">return</span> (regno &gt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af62bcda72ac9d044f7b1145d780de683">ppc_vsr0_upper_regnum</a> &amp;&amp; regno
<a name="l00160"></a>00160             &lt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af62bcda72ac9d044f7b1145d780de683">ppc_vsr0_upper_regnum</a> + 31);
<a name="l00161"></a>00161 }
<a name="l00162"></a>00162 
<a name="l00163"></a>00163 <span class="comment">/* Is REGNO an AltiVec register?  Return 1 if so, 0 otherwise.  */</span>
<a name="l00164"></a>00164 <span class="keywordtype">int</span>
<a name="l00165"></a><a class="code" href="rs6000-tdep_8c.html#a11e6c6cd047e9535423f0d07cf3d966b">00165</a> <a class="code" href="ppc-tdep_8h.html#a11e6c6cd047e9535423f0d07cf3d966b">altivec_register_p</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keywordtype">int</span> regno)
<a name="l00166"></a>00166 {
<a name="l00167"></a>00167   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00168"></a>00168   <span class="keywordflow">if</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a> &lt; 0 || tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae450527d83da498c547b5381594264b3">ppc_vrsave_regnum</a> &lt; 0)
<a name="l00169"></a>00169     <span class="keywordflow">return</span> 0;
<a name="l00170"></a>00170   <span class="keywordflow">else</span>
<a name="l00171"></a>00171     <span class="keywordflow">return</span> (regno &gt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a> &amp;&amp; regno &lt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae450527d83da498c547b5381594264b3">ppc_vrsave_regnum</a>);
<a name="l00172"></a>00172 }
<a name="l00173"></a>00173 
<a name="l00174"></a>00174 
<a name="l00175"></a>00175 <span class="comment">/* Return true if REGNO is an SPE register, false otherwise.  */</span>
<a name="l00176"></a>00176 <span class="keywordtype">int</span>
<a name="l00177"></a><a class="code" href="rs6000-tdep_8c.html#a1fc79c4f188da3df8c828d32b8496523">00177</a> <a class="code" href="ppc-tdep_8h.html#a1fc79c4f188da3df8c828d32b8496523">spe_register_p</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keywordtype">int</span> regno)
<a name="l00178"></a>00178 {
<a name="l00179"></a>00179   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00180"></a>00180   
<a name="l00181"></a>00181   <span class="comment">/* Is it a reference to EV0 -- EV31, and do we have those?  */</span>
<a name="l00182"></a>00182   <span class="keywordflow">if</span> (<a class="code" href="rs6000-tdep_8c.html#a6b4b7509073a7a5ced4f84e2d75a6c2d">IS_SPE_PSEUDOREG</a> (tdep, regno))
<a name="l00183"></a>00183     <span class="keywordflow">return</span> 1;
<a name="l00184"></a>00184 
<a name="l00185"></a>00185   <span class="comment">/* Is it a reference to one of the raw upper GPR halves?  */</span>
<a name="l00186"></a>00186   <span class="keywordflow">if</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aa7b3fc0d1b03e03f76278abd2611df43">ppc_ev0_upper_regnum</a> &gt;= 0
<a name="l00187"></a>00187       &amp;&amp; tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aa7b3fc0d1b03e03f76278abd2611df43">ppc_ev0_upper_regnum</a> &lt;= regno
<a name="l00188"></a>00188       &amp;&amp; regno &lt; tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aa7b3fc0d1b03e03f76278abd2611df43">ppc_ev0_upper_regnum</a> + <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba24b61ab9c068d3db8d90266aff6c008a">ppc_num_gprs</a>)
<a name="l00189"></a>00189     <span class="keywordflow">return</span> 1;
<a name="l00190"></a>00190 
<a name="l00191"></a>00191   <span class="comment">/* Is it a reference to the 64-bit accumulator, and do we have that?  */</span>
<a name="l00192"></a>00192   <span class="keywordflow">if</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a2db04ffe895dab1278787d41e5878fa4">ppc_acc_regnum</a> &gt;= 0
<a name="l00193"></a>00193       &amp;&amp; tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a2db04ffe895dab1278787d41e5878fa4">ppc_acc_regnum</a> == regno)
<a name="l00194"></a>00194     <span class="keywordflow">return</span> 1;
<a name="l00195"></a>00195 
<a name="l00196"></a>00196   <span class="comment">/* Is it a reference to the SPE floating-point status and control register,</span>
<a name="l00197"></a>00197 <span class="comment">     and do we have that?  */</span>
<a name="l00198"></a>00198   <span class="keywordflow">if</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a49a9f6148acf30fe778ff4b99bca50f1">ppc_spefscr_regnum</a> &gt;= 0
<a name="l00199"></a>00199       &amp;&amp; tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a49a9f6148acf30fe778ff4b99bca50f1">ppc_spefscr_regnum</a> == regno)
<a name="l00200"></a>00200     <span class="keywordflow">return</span> 1;
<a name="l00201"></a>00201 
<a name="l00202"></a>00202   <span class="keywordflow">return</span> 0;
<a name="l00203"></a>00203 }
<a name="l00204"></a>00204 
<a name="l00205"></a>00205 
<a name="l00206"></a>00206 <span class="comment">/* Return non-zero if the architecture described by GDBARCH has</span>
<a name="l00207"></a>00207 <span class="comment">   floating-point registers (f0 --- f31 and fpscr).  */</span>
<a name="l00208"></a>00208 <span class="keywordtype">int</span>
<a name="l00209"></a><a class="code" href="rs6000-tdep_8c.html#a7061eb865daba576f05eda0bb395290d">00209</a> <a class="code" href="ppc-tdep_8h.html#a7061eb865daba576f05eda0bb395290d">ppc_floating_point_unit_p</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>)
<a name="l00210"></a>00210 {
<a name="l00211"></a>00211   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00212"></a>00212 
<a name="l00213"></a>00213   <span class="keywordflow">return</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> &gt;= 0
<a name="l00214"></a>00214           &amp;&amp; tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a0c28f5e30ad04a087b6886822810120a">ppc_fpscr_regnum</a> &gt;= 0);
<a name="l00215"></a>00215 }
<a name="l00216"></a>00216 
<a name="l00217"></a>00217 <span class="comment">/* Return non-zero if the architecture described by GDBARCH has</span>
<a name="l00218"></a>00218 <span class="comment">   VSX registers (vsr0 --- vsr63).  */</span>
<a name="l00219"></a>00219 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00220"></a><a class="code" href="rs6000-tdep_8c.html#a3d036530b73c4f5b7539883b2ae44ac7">00220</a> <a class="code" href="rs6000-tdep_8c.html#a3d036530b73c4f5b7539883b2ae44ac7">ppc_vsx_support_p</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>)
<a name="l00221"></a>00221 {
<a name="l00222"></a>00222   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00223"></a>00223 
<a name="l00224"></a>00224   <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#acee880f0e287602f378022dec6896991">ppc_vsr0_regnum</a> &gt;= 0;
<a name="l00225"></a>00225 }
<a name="l00226"></a>00226 
<a name="l00227"></a>00227 <span class="comment">/* Return non-zero if the architecture described by GDBARCH has</span>
<a name="l00228"></a>00228 <span class="comment">   Altivec registers (vr0 --- vr31, vrsave and vscr).  */</span>
<a name="l00229"></a>00229 <span class="keywordtype">int</span>
<a name="l00230"></a><a class="code" href="rs6000-tdep_8c.html#a62a4f4552eafe319309babb2e5578471">00230</a> <a class="code" href="ppc-tdep_8h.html#a62a4f4552eafe319309babb2e5578471">ppc_altivec_support_p</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>)
<a name="l00231"></a>00231 {
<a name="l00232"></a>00232   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00233"></a>00233 
<a name="l00234"></a>00234   <span class="keywordflow">return</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a> &gt;= 0
<a name="l00235"></a>00235           &amp;&amp; tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae450527d83da498c547b5381594264b3">ppc_vrsave_regnum</a> &gt;= 0);
<a name="l00236"></a>00236 }
<a name="l00237"></a>00237 
<a name="l00238"></a>00238 <span class="comment">/* Check that TABLE[GDB_REGNO] is not already initialized, and then</span>
<a name="l00239"></a>00239 <span class="comment">   set it to SIM_REGNO.</span>
<a name="l00240"></a>00240 <span class="comment"></span>
<a name="l00241"></a>00241 <span class="comment">   This is a helper function for init_sim_regno_table, constructing</span>
<a name="l00242"></a>00242 <span class="comment">   the table mapping GDB register numbers to sim register numbers; we</span>
<a name="l00243"></a>00243 <span class="comment">   initialize every element in that table to -1 before we start</span>
<a name="l00244"></a>00244 <span class="comment">   filling it in.  */</span>
<a name="l00245"></a>00245 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00246"></a><a class="code" href="rs6000-tdep_8c.html#a7988229a49380193ac50f8bbbde9858c">00246</a> <a class="code" href="rs6000-tdep_8c.html#a7988229a49380193ac50f8bbbde9858c">set_sim_regno</a> (<span class="keywordtype">int</span> *table, <span class="keywordtype">int</span> gdb_regno, <span class="keywordtype">int</span> <a class="code" href="sim-regno_8h.html#a7bc8a87d3b1a8f6f31104edf7dffa3c9">sim_regno</a>)
<a name="l00247"></a>00247 {
<a name="l00248"></a>00248   <span class="comment">/* Make sure we don&#39;t try to assign any given GDB register a sim</span>
<a name="l00249"></a>00249 <span class="comment">     register number more than once.  */</span>
<a name="l00250"></a>00250   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (table[gdb_regno] == -1);
<a name="l00251"></a>00251   table[gdb_regno] = <a class="code" href="sim-regno_8h.html#a7bc8a87d3b1a8f6f31104edf7dffa3c9">sim_regno</a>;
<a name="l00252"></a>00252 }
<a name="l00253"></a>00253 
<a name="l00254"></a>00254 
<a name="l00255"></a>00255 <span class="comment">/* Initialize ARCH-&gt;tdep-&gt;sim_regno, the table mapping GDB register</span>
<a name="l00256"></a>00256 <span class="comment">   numbers to simulator register numbers, based on the values placed</span>
<a name="l00257"></a>00257 <span class="comment">   in the ARCH-&gt;tdep-&gt;ppc_foo_regnum members.  */</span>
<a name="l00258"></a>00258 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00259"></a><a class="code" href="rs6000-tdep_8c.html#a82c3de92dc23393551fbb4602e8ad236">00259</a> <a class="code" href="rs6000-tdep_8c.html#a82c3de92dc23393551fbb4602e8ad236">init_sim_regno_table</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *arch)
<a name="l00260"></a>00260 {
<a name="l00261"></a>00261   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (arch);
<a name="l00262"></a>00262   <span class="keywordtype">int</span> total_regs = <a class="code" href="gdbarch_8c.html#a69069435754d0b434c7043a21d247325">gdbarch_num_regs</a> (arch);
<a name="l00263"></a>00263   <span class="keywordtype">int</span> *<a class="code" href="sim-regno_8h.html#a7bc8a87d3b1a8f6f31104edf7dffa3c9">sim_regno</a> = <a class="code" href="gdbarch_8h.html#a549a8eb8c7bf7b3ceeead14005516d80">GDBARCH_OBSTACK_CALLOC</a> (arch, total_regs, <span class="keywordtype">int</span>);
<a name="l00264"></a>00264   <span class="keywordtype">int</span> i;
<a name="l00265"></a>00265   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> segment_regs[] = {
<a name="l00266"></a>00266     <span class="stringliteral">&quot;sr0&quot;</span>, <span class="stringliteral">&quot;sr1&quot;</span>, <span class="stringliteral">&quot;sr2&quot;</span>, <span class="stringliteral">&quot;sr3&quot;</span>, <span class="stringliteral">&quot;sr4&quot;</span>, <span class="stringliteral">&quot;sr5&quot;</span>, <span class="stringliteral">&quot;sr6&quot;</span>, <span class="stringliteral">&quot;sr7&quot;</span>,
<a name="l00267"></a>00267     <span class="stringliteral">&quot;sr8&quot;</span>, <span class="stringliteral">&quot;sr9&quot;</span>, <span class="stringliteral">&quot;sr10&quot;</span>, <span class="stringliteral">&quot;sr11&quot;</span>, <span class="stringliteral">&quot;sr12&quot;</span>, <span class="stringliteral">&quot;sr13&quot;</span>, <span class="stringliteral">&quot;sr14&quot;</span>, <span class="stringliteral">&quot;sr15&quot;</span>
<a name="l00268"></a>00268   };
<a name="l00269"></a>00269 
<a name="l00270"></a>00270   <span class="comment">/* Presume that all registers not explicitly mentioned below are</span>
<a name="l00271"></a>00271 <span class="comment">     unavailable from the sim.  */</span>
<a name="l00272"></a>00272   <span class="keywordflow">for</span> (i = 0; i &lt; total_regs; i++)
<a name="l00273"></a>00273     sim_regno[i] = -1;
<a name="l00274"></a>00274 
<a name="l00275"></a>00275   <span class="comment">/* General-purpose registers.  */</span>
<a name="l00276"></a>00276   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba24b61ab9c068d3db8d90266aff6c008a">ppc_num_gprs</a>; i++)
<a name="l00277"></a>00277     <a class="code" href="rs6000-tdep_8c.html#a7988229a49380193ac50f8bbbde9858c">set_sim_regno</a> (sim_regno, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a764a18b9d437c88d6ad174febf29aeeb">ppc_gp0_regnum</a> + i, sim_ppc_r0_regnum + i);
<a name="l00278"></a>00278   
<a name="l00279"></a>00279   <span class="comment">/* Floating-point registers.  */</span>
<a name="l00280"></a>00280   <span class="keywordflow">if</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> &gt;= 0)
<a name="l00281"></a>00281     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba7cb3ec3816363e0df7014e2a613a6df8">ppc_num_fprs</a>; i++)
<a name="l00282"></a>00282       <a class="code" href="rs6000-tdep_8c.html#a7988229a49380193ac50f8bbbde9858c">set_sim_regno</a> (sim_regno,
<a name="l00283"></a>00283                      tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> + i,
<a name="l00284"></a>00284                      sim_ppc_f0_regnum + i);
<a name="l00285"></a>00285   <span class="keywordflow">if</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a0c28f5e30ad04a087b6886822810120a">ppc_fpscr_regnum</a> &gt;= 0)
<a name="l00286"></a>00286     <a class="code" href="rs6000-tdep_8c.html#a7988229a49380193ac50f8bbbde9858c">set_sim_regno</a> (sim_regno, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a0c28f5e30ad04a087b6886822810120a">ppc_fpscr_regnum</a>, sim_ppc_fpscr_regnum);
<a name="l00287"></a>00287 
<a name="l00288"></a>00288   <a class="code" href="rs6000-tdep_8c.html#a7988229a49380193ac50f8bbbde9858c">set_sim_regno</a> (sim_regno, <a class="code" href="gdbarch_8c.html#a07a162ebafea1269eb8f341db44e53e7">gdbarch_pc_regnum</a> (arch), sim_ppc_pc_regnum);
<a name="l00289"></a>00289   <a class="code" href="rs6000-tdep_8c.html#a7988229a49380193ac50f8bbbde9858c">set_sim_regno</a> (sim_regno, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a3dd7eea3668b3816f9f362de516e1d4e">ppc_ps_regnum</a>, sim_ppc_ps_regnum);
<a name="l00290"></a>00290   <a class="code" href="rs6000-tdep_8c.html#a7988229a49380193ac50f8bbbde9858c">set_sim_regno</a> (sim_regno, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a472825ad1cf896dce405f82f2599ae9a">ppc_cr_regnum</a>, sim_ppc_cr_regnum);
<a name="l00291"></a>00291 
<a name="l00292"></a>00292   <span class="comment">/* Segment registers.  */</span>
<a name="l00293"></a>00293   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcbaf28b651b500958bf38790c853f425780">ppc_num_srs</a>; i++)
<a name="l00294"></a>00294     {
<a name="l00295"></a>00295       <span class="keywordtype">int</span> gdb_regno;
<a name="l00296"></a>00296 
<a name="l00297"></a>00297       gdb_regno = <a class="code" href="user-regs_8c.html#a73129d16744501cecc45fb94c573c277">user_reg_map_name_to_regnum</a> (arch, segment_regs[i], -1);
<a name="l00298"></a>00298       <span class="keywordflow">if</span> (gdb_regno &gt;= 0)
<a name="l00299"></a>00299         <a class="code" href="rs6000-tdep_8c.html#a7988229a49380193ac50f8bbbde9858c">set_sim_regno</a> (sim_regno, gdb_regno, sim_ppc_sr0_regnum + i);
<a name="l00300"></a>00300     }
<a name="l00301"></a>00301 
<a name="l00302"></a>00302   <span class="comment">/* Altivec registers.  */</span>
<a name="l00303"></a>00303   <span class="keywordflow">if</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a> &gt;= 0)
<a name="l00304"></a>00304     {
<a name="l00305"></a>00305       <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba46c440a810ebded73dbeff857dd124f4">ppc_num_vrs</a>; i++)
<a name="l00306"></a>00306         <a class="code" href="rs6000-tdep_8c.html#a7988229a49380193ac50f8bbbde9858c">set_sim_regno</a> (sim_regno,
<a name="l00307"></a>00307                        tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a> + i,
<a name="l00308"></a>00308                        sim_ppc_vr0_regnum + i);
<a name="l00309"></a>00309 
<a name="l00310"></a>00310       <span class="comment">/* FIXME: jimb/2004-07-15: when we have tdep-&gt;ppc_vscr_regnum,</span>
<a name="l00311"></a>00311 <span class="comment">         we can treat this more like the other cases.  */</span>
<a name="l00312"></a>00312       <a class="code" href="rs6000-tdep_8c.html#a7988229a49380193ac50f8bbbde9858c">set_sim_regno</a> (sim_regno,
<a name="l00313"></a>00313                      tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a> + ppc_num_vrs,
<a name="l00314"></a>00314                      sim_ppc_vscr_regnum);
<a name="l00315"></a>00315     }
<a name="l00316"></a>00316   <span class="comment">/* vsave is a special-purpose register, so the code below handles it.  */</span>
<a name="l00317"></a>00317 
<a name="l00318"></a>00318   <span class="comment">/* SPE APU (E500) registers.  */</span>
<a name="l00319"></a>00319   <span class="keywordflow">if</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aa7b3fc0d1b03e03f76278abd2611df43">ppc_ev0_upper_regnum</a> &gt;= 0)
<a name="l00320"></a>00320     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba24b61ab9c068d3db8d90266aff6c008a">ppc_num_gprs</a>; i++)
<a name="l00321"></a>00321       <a class="code" href="rs6000-tdep_8c.html#a7988229a49380193ac50f8bbbde9858c">set_sim_regno</a> (sim_regno,
<a name="l00322"></a>00322                      tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aa7b3fc0d1b03e03f76278abd2611df43">ppc_ev0_upper_regnum</a> + i,
<a name="l00323"></a>00323                      sim_ppc_rh0_regnum + i);
<a name="l00324"></a>00324   <span class="keywordflow">if</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a2db04ffe895dab1278787d41e5878fa4">ppc_acc_regnum</a> &gt;= 0)
<a name="l00325"></a>00325     <a class="code" href="rs6000-tdep_8c.html#a7988229a49380193ac50f8bbbde9858c">set_sim_regno</a> (sim_regno, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a2db04ffe895dab1278787d41e5878fa4">ppc_acc_regnum</a>, sim_ppc_acc_regnum);
<a name="l00326"></a>00326   <span class="comment">/* spefscr is a special-purpose register, so the code below handles it.  */</span>
<a name="l00327"></a>00327 
<a name="l00328"></a>00328 <span class="preprocessor">#ifdef WITH_SIM</span>
<a name="l00329"></a>00329 <span class="preprocessor"></span>  <span class="comment">/* Now handle all special-purpose registers.  Verify that they</span>
<a name="l00330"></a>00330 <span class="comment">     haven&#39;t mistakenly been assigned numbers by any of the above</span>
<a name="l00331"></a>00331 <span class="comment">     code.  */</span>
<a name="l00332"></a>00332   <span class="keywordflow">for</span> (i = 0; i &lt; sim_ppc_num_sprs; i++)
<a name="l00333"></a>00333     {
<a name="l00334"></a>00334       <span class="keyword">const</span> <span class="keywordtype">char</span> *spr_name = sim_spr_register_name (i);
<a name="l00335"></a>00335       <span class="keywordtype">int</span> gdb_regno = -1;
<a name="l00336"></a>00336 
<a name="l00337"></a>00337       <span class="keywordflow">if</span> (spr_name != NULL)
<a name="l00338"></a>00338         gdb_regno = <a class="code" href="user-regs_8c.html#a73129d16744501cecc45fb94c573c277">user_reg_map_name_to_regnum</a> (arch, spr_name, -1);
<a name="l00339"></a>00339 
<a name="l00340"></a>00340       <span class="keywordflow">if</span> (gdb_regno != -1)
<a name="l00341"></a>00341         <a class="code" href="rs6000-tdep_8c.html#a7988229a49380193ac50f8bbbde9858c">set_sim_regno</a> (sim_regno, gdb_regno, sim_ppc_spr0_regnum + i);
<a name="l00342"></a>00342     }
<a name="l00343"></a>00343 <span class="preprocessor">#endif</span>
<a name="l00344"></a>00344 <span class="preprocessor"></span>
<a name="l00345"></a>00345   <span class="comment">/* Drop the initialized array into place.  */</span>
<a name="l00346"></a>00346   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#abf59b1239b88b7357d35cec037427202">sim_regno</a> = <a class="code" href="sim-regno_8h.html#a7bc8a87d3b1a8f6f31104edf7dffa3c9">sim_regno</a>;
<a name="l00347"></a>00347 }
<a name="l00348"></a>00348 
<a name="l00349"></a>00349 
<a name="l00350"></a>00350 <span class="comment">/* Given a GDB register number REG, return the corresponding SIM</span>
<a name="l00351"></a>00351 <span class="comment">   register number.  */</span>
<a name="l00352"></a>00352 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00353"></a><a class="code" href="rs6000-tdep_8c.html#a7f0f32cdb7b0e84c32a219302d6c749e">00353</a> <a class="code" href="rs6000-tdep_8c.html#a7f0f32cdb7b0e84c32a219302d6c749e">rs6000_register_sim_regno</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keywordtype">int</span> <a class="code" href="structreg.html">reg</a>)
<a name="l00354"></a>00354 {
<a name="l00355"></a>00355   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00356"></a>00356   <span class="keywordtype">int</span> <a class="code" href="sim-regno_8h.html#a7bc8a87d3b1a8f6f31104edf7dffa3c9">sim_regno</a>;
<a name="l00357"></a>00357 
<a name="l00358"></a>00358   <span class="keywordflow">if</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#abf59b1239b88b7357d35cec037427202">sim_regno</a> == NULL)
<a name="l00359"></a>00359     <a class="code" href="rs6000-tdep_8c.html#a82c3de92dc23393551fbb4602e8ad236">init_sim_regno_table</a> (gdbarch);
<a name="l00360"></a>00360 
<a name="l00361"></a>00361   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (0 &lt;= reg 
<a name="l00362"></a>00362               &amp;&amp; reg &lt;= <a class="code" href="gdbarch_8c.html#a69069435754d0b434c7043a21d247325">gdbarch_num_regs</a> (gdbarch)
<a name="l00363"></a>00363                         + <a class="code" href="gdbarch_8c.html#a8e0e40f42e5969ee4559ee47717aa9f3">gdbarch_num_pseudo_regs</a> (gdbarch));
<a name="l00364"></a>00364   sim_regno = tdep-&gt;<a class="code" href="structgdbarch__tdep.html#abf59b1239b88b7357d35cec037427202">sim_regno</a>[reg];
<a name="l00365"></a>00365 
<a name="l00366"></a>00366   <span class="keywordflow">if</span> (sim_regno &gt;= 0)
<a name="l00367"></a>00367     <span class="keywordflow">return</span> <a class="code" href="sim-regno_8h.html#a7bc8a87d3b1a8f6f31104edf7dffa3c9">sim_regno</a>;
<a name="l00368"></a>00368   <span class="keywordflow">else</span>
<a name="l00369"></a>00369     <span class="keywordflow">return</span> <a class="code" href="sim-regno_8h.html#a7bc8a87d3b1a8f6f31104edf7dffa3c9affc37061d7394b74314e9c6554e957f2">LEGACY_SIM_REGNO_IGNORE</a>;
<a name="l00370"></a>00370 }
<a name="l00371"></a>00371 
<a name="l00372"></a>00372 
<a name="l00373"></a>00373 
<a name="l00374"></a>00374 <span class="comment">/* Register set support functions.  */</span>
<a name="l00375"></a>00375 
<a name="l00376"></a>00376 <span class="comment">/* REGS + OFFSET contains register REGNUM in a field REGSIZE wide.</span>
<a name="l00377"></a>00377 <span class="comment">   Write the register to REGCACHE.  */</span>
<a name="l00378"></a>00378 
<a name="l00379"></a>00379 <span class="keywordtype">void</span>
<a name="l00380"></a><a class="code" href="rs6000-tdep_8c.html#a801ef73c4937eb8b9264743fffb94246">00380</a> <a class="code" href="ppc-tdep_8h.html#a801ef73c4937eb8b9264743fffb94246">ppc_supply_reg</a> (<span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>, 
<a name="l00381"></a>00381                 <span class="keyword">const</span> <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *<a class="code" href="structgdbarch__tdep.html#a1dafc33980aca4b7214915336ef2c55d">regs</a>, <span class="keywordtype">size_t</span> <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>, <span class="keywordtype">int</span> regsize)
<a name="l00382"></a>00382 {
<a name="l00383"></a>00383   <span class="keywordflow">if</span> (regnum != -1 &amp;&amp; offset != -1)
<a name="l00384"></a>00384     {
<a name="l00385"></a>00385       <span class="keywordflow">if</span> (regsize &gt; 4)
<a name="l00386"></a>00386         {
<a name="l00387"></a>00387           <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="regcache_8c.html#ad4f6d0cdf256b1fa45d59a6d71b50659">get_regcache_arch</a> (regcache);
<a name="l00388"></a>00388           <span class="keywordtype">int</span> gdb_regsize = <a class="code" href="regcache_8c.html#a4c51fa25edb9ce25451b9dc7bd127aac">register_size</a> (gdbarch, regnum);
<a name="l00389"></a>00389           <span class="keywordflow">if</span> (gdb_regsize &lt; regsize
<a name="l00390"></a>00390               &amp;&amp; <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch) == BFD_ENDIAN_BIG)
<a name="l00391"></a>00391             offset += regsize - gdb_regsize;
<a name="l00392"></a>00392         }
<a name="l00393"></a>00393       <a class="code" href="regcache_8c.html#a127ceeb6f30d3bab748c60570ac077a6">regcache_raw_supply</a> (regcache, regnum, regs + offset);
<a name="l00394"></a>00394     }
<a name="l00395"></a>00395 }
<a name="l00396"></a>00396 
<a name="l00397"></a>00397 <span class="comment">/* Read register REGNUM from REGCACHE and store to REGS + OFFSET</span>
<a name="l00398"></a>00398 <span class="comment">   in a field REGSIZE wide.  Zero pad as necessary.  */</span>
<a name="l00399"></a>00399 
<a name="l00400"></a>00400 <span class="keywordtype">void</span>
<a name="l00401"></a><a class="code" href="rs6000-tdep_8c.html#a5e870d9bc70451f30a0fe616a015dff4">00401</a> <a class="code" href="ppc-tdep_8h.html#a5e870d9bc70451f30a0fe616a015dff4">ppc_collect_reg</a> (<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>,
<a name="l00402"></a>00402                  <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *regs, <span class="keywordtype">size_t</span> <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>, <span class="keywordtype">int</span> regsize)
<a name="l00403"></a>00403 {
<a name="l00404"></a>00404   <span class="keywordflow">if</span> (regnum != -1 &amp;&amp; offset != -1)
<a name="l00405"></a>00405     {
<a name="l00406"></a>00406       <span class="keywordflow">if</span> (regsize &gt; 4)
<a name="l00407"></a>00407         {
<a name="l00408"></a>00408           <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="regcache_8c.html#ad4f6d0cdf256b1fa45d59a6d71b50659">get_regcache_arch</a> (regcache);
<a name="l00409"></a>00409           <span class="keywordtype">int</span> gdb_regsize = <a class="code" href="regcache_8c.html#a4c51fa25edb9ce25451b9dc7bd127aac">register_size</a> (gdbarch, regnum);
<a name="l00410"></a>00410           <span class="keywordflow">if</span> (gdb_regsize &lt; regsize)
<a name="l00411"></a>00411             {
<a name="l00412"></a>00412               <span class="keywordflow">if</span> (<a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch) == BFD_ENDIAN_BIG)
<a name="l00413"></a>00413                 {
<a name="l00414"></a>00414                   <a class="code" href="gdb__string_8h.html#adb03df3679ce1445e801310614624ccb">memset</a> (regs + offset, 0, regsize - gdb_regsize);
<a name="l00415"></a>00415                   offset += regsize - gdb_regsize;
<a name="l00416"></a>00416                 }
<a name="l00417"></a>00417               <span class="keywordflow">else</span>
<a name="l00418"></a>00418                 <a class="code" href="gdb__string_8h.html#adb03df3679ce1445e801310614624ccb">memset</a> (regs + offset + regsize - gdb_regsize, 0,
<a name="l00419"></a>00419                         regsize - gdb_regsize);
<a name="l00420"></a>00420             }
<a name="l00421"></a>00421         }
<a name="l00422"></a>00422       <a class="code" href="regcache_8c.html#a3d2dc4fc1d7d491061e087b547c7f9a8">regcache_raw_collect</a> (regcache, regnum, regs + offset);
<a name="l00423"></a>00423     }
<a name="l00424"></a>00424 }
<a name="l00425"></a>00425     
<a name="l00426"></a>00426 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00427"></a><a class="code" href="rs6000-tdep_8c.html#aa62e078a34675816954640e450c672b3">00427</a> <a class="code" href="rs6000-tdep_8c.html#aa62e078a34675816954640e450c672b3">ppc_greg_offset</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>,
<a name="l00428"></a>00428                  <span class="keyword">struct</span> <a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *<a class="code" href="structgdbarch.html#a21f09d0106c832a9711bfb3cd4e7dfb4">tdep</a>,
<a name="l00429"></a>00429                  <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structppc__reg__offsets.html">ppc_reg_offsets</a> *offsets,
<a name="l00430"></a>00430                  <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>,
<a name="l00431"></a>00431                  <span class="keywordtype">int</span> *regsize)
<a name="l00432"></a>00432 {
<a name="l00433"></a>00433   *regsize = offsets-&gt;<a class="code" href="structppc__reg__offsets.html#aa222160920dcc31dea6456f84b4704f1">gpr_size</a>;
<a name="l00434"></a>00434   <span class="keywordflow">if</span> (regnum &gt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a764a18b9d437c88d6ad174febf29aeeb">ppc_gp0_regnum</a>
<a name="l00435"></a>00435       &amp;&amp; regnum &lt; tdep-&gt;ppc_gp0_regnum + <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba24b61ab9c068d3db8d90266aff6c008a">ppc_num_gprs</a>)
<a name="l00436"></a>00436     <span class="keywordflow">return</span> (offsets-&gt;<a class="code" href="structppc__reg__offsets.html#aaf931931439ef0d66a43b64176639924">r0_offset</a>
<a name="l00437"></a>00437             + (regnum - tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a764a18b9d437c88d6ad174febf29aeeb">ppc_gp0_regnum</a>) * offsets-&gt;<a class="code" href="structppc__reg__offsets.html#aa222160920dcc31dea6456f84b4704f1">gpr_size</a>);
<a name="l00438"></a>00438 
<a name="l00439"></a>00439   <span class="keywordflow">if</span> (regnum == <a class="code" href="gdbarch_8c.html#a07a162ebafea1269eb8f341db44e53e7">gdbarch_pc_regnum</a> (gdbarch))
<a name="l00440"></a>00440     <span class="keywordflow">return</span> offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a8920cb863df82e83df115e1367bddc24">pc_offset</a>;
<a name="l00441"></a>00441 
<a name="l00442"></a>00442   <span class="keywordflow">if</span> (regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a3dd7eea3668b3816f9f362de516e1d4e">ppc_ps_regnum</a>)
<a name="l00443"></a>00443     <span class="keywordflow">return</span> offsets-&gt;<a class="code" href="structppc__reg__offsets.html#af40e5a18543ef0e4682a4586d4c7c6db">ps_offset</a>;
<a name="l00444"></a>00444 
<a name="l00445"></a>00445   <span class="keywordflow">if</span> (regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a5f8e280348ae374459d2b5e2980a188c">ppc_lr_regnum</a>)
<a name="l00446"></a>00446     <span class="keywordflow">return</span> offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a0dcf2fbdb8026bd9f8320a1d2e649887">lr_offset</a>;
<a name="l00447"></a>00447 
<a name="l00448"></a>00448   <span class="keywordflow">if</span> (regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a4ea1d651e250d5879d6da1a28fd3be2f">ppc_ctr_regnum</a>)
<a name="l00449"></a>00449     <span class="keywordflow">return</span> offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a97694d23731dd2850cd48ceda7faf2c9">ctr_offset</a>;
<a name="l00450"></a>00450 
<a name="l00451"></a>00451   *regsize = offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a5e8ff716dd99f834be999915cf4042ab">xr_size</a>;
<a name="l00452"></a>00452   <span class="keywordflow">if</span> (regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a472825ad1cf896dce405f82f2599ae9a">ppc_cr_regnum</a>)
<a name="l00453"></a>00453     <span class="keywordflow">return</span> offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a2b1269a9298bc2b0a67a3413ba83c05d">cr_offset</a>;
<a name="l00454"></a>00454 
<a name="l00455"></a>00455   <span class="keywordflow">if</span> (regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a1f0de040d355a482dae4af4ce50aec32">ppc_xer_regnum</a>)
<a name="l00456"></a>00456     <span class="keywordflow">return</span> offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a52e14444019585bd66d7f7201e834e63">xer_offset</a>;
<a name="l00457"></a>00457 
<a name="l00458"></a>00458   <span class="keywordflow">if</span> (regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a9d179a84ff44e9a36e6ee64075760429">ppc_mq_regnum</a>)
<a name="l00459"></a>00459     <span class="keywordflow">return</span> offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a34dd32292033af74f6e972fe5670ee4e">mq_offset</a>;
<a name="l00460"></a>00460 
<a name="l00461"></a>00461   <span class="keywordflow">return</span> -1;
<a name="l00462"></a>00462 }
<a name="l00463"></a>00463 
<a name="l00464"></a>00464 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00465"></a><a class="code" href="rs6000-tdep_8c.html#a44e90494efb2fa21aaf0eb83006a3825">00465</a> <a class="code" href="rs6000-tdep_8c.html#a44e90494efb2fa21aaf0eb83006a3825">ppc_fpreg_offset</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *<a class="code" href="structgdbarch.html#a21f09d0106c832a9711bfb3cd4e7dfb4">tdep</a>,
<a name="l00466"></a>00466                   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structppc__reg__offsets.html">ppc_reg_offsets</a> *offsets,
<a name="l00467"></a>00467                   <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>)
<a name="l00468"></a>00468 {
<a name="l00469"></a>00469   <span class="keywordflow">if</span> (regnum &gt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a>
<a name="l00470"></a>00470       &amp;&amp; regnum &lt; tdep-&gt;ppc_fp0_regnum + <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba7cb3ec3816363e0df7014e2a613a6df8">ppc_num_fprs</a>)
<a name="l00471"></a>00471     <span class="keywordflow">return</span> offsets-&gt;<a class="code" href="structppc__reg__offsets.html#aafe9b8fe4fdf550510b4811d41630dd3">f0_offset</a> + (regnum - tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a>) * 8;
<a name="l00472"></a>00472 
<a name="l00473"></a>00473   <span class="keywordflow">if</span> (regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a0c28f5e30ad04a087b6886822810120a">ppc_fpscr_regnum</a>)
<a name="l00474"></a>00474     <span class="keywordflow">return</span> offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a8f57959403c04bc47d0214781937c4a5">fpscr_offset</a>;
<a name="l00475"></a>00475 
<a name="l00476"></a>00476   <span class="keywordflow">return</span> -1;
<a name="l00477"></a>00477 }
<a name="l00478"></a>00478 
<a name="l00479"></a>00479 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00480"></a><a class="code" href="rs6000-tdep_8c.html#a86a57133000714c01786386a9216dcff">00480</a> <a class="code" href="rs6000-tdep_8c.html#a86a57133000714c01786386a9216dcff">ppc_vrreg_offset</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *<a class="code" href="structgdbarch.html#a21f09d0106c832a9711bfb3cd4e7dfb4">tdep</a>,
<a name="l00481"></a>00481                   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structppc__reg__offsets.html">ppc_reg_offsets</a> *offsets,
<a name="l00482"></a>00482                   <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>)
<a name="l00483"></a>00483 {
<a name="l00484"></a>00484   <span class="keywordflow">if</span> (regnum &gt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a>
<a name="l00485"></a>00485       &amp;&amp; regnum &lt; tdep-&gt;ppc_vr0_regnum + <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba46c440a810ebded73dbeff857dd124f4">ppc_num_vrs</a>)
<a name="l00486"></a>00486     <span class="keywordflow">return</span> offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a6417d81ebb7bf5318809d3f50af0a6e2">vr0_offset</a> + (regnum - tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a>) * 16;
<a name="l00487"></a>00487 
<a name="l00488"></a>00488   <span class="keywordflow">if</span> (regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae450527d83da498c547b5381594264b3">ppc_vrsave_regnum</a> - 1)
<a name="l00489"></a>00489     <span class="keywordflow">return</span> offsets-&gt;<a class="code" href="structppc__reg__offsets.html#aec9388db38aa3bea0c5bf92e2a6ac1c6">vscr_offset</a>;
<a name="l00490"></a>00490 
<a name="l00491"></a>00491   <span class="keywordflow">if</span> (regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae450527d83da498c547b5381594264b3">ppc_vrsave_regnum</a>)
<a name="l00492"></a>00492     <span class="keywordflow">return</span> offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a6526086c39e5819f2f6c3a531c36a564">vrsave_offset</a>;
<a name="l00493"></a>00493 
<a name="l00494"></a>00494   <span class="keywordflow">return</span> -1;
<a name="l00495"></a>00495 }
<a name="l00496"></a>00496 
<a name="l00497"></a>00497 <span class="comment">/* Supply register REGNUM in the general-purpose register set REGSET</span>
<a name="l00498"></a>00498 <span class="comment">   from the buffer specified by GREGS and LEN to register cache</span>
<a name="l00499"></a>00499 <span class="comment">   REGCACHE.  If REGNUM is -1, do this for all registers in REGSET.  */</span>
<a name="l00500"></a>00500 
<a name="l00501"></a>00501 <span class="keywordtype">void</span>
<a name="l00502"></a><a class="code" href="rs6000-tdep_8c.html#aaa7273b89bd343dd878e241a9be1bd5c">00502</a> <a class="code" href="ppc-tdep_8h.html#aaa7273b89bd343dd878e241a9be1bd5c">ppc_supply_gregset</a> (<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structregset.html">regset</a> *<a class="code" href="structregset.html">regset</a>, <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l00503"></a>00503                     <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>, <span class="keyword">const</span> <span class="keywordtype">void</span> *gregs, <span class="keywordtype">size_t</span> <a class="code" href="exec_8h.html#a00f945351279d3c8935f13d2b9f9b808">len</a>)
<a name="l00504"></a>00504 {
<a name="l00505"></a>00505   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="regcache_8c.html#ad4f6d0cdf256b1fa45d59a6d71b50659">get_regcache_arch</a> (regcache);
<a name="l00506"></a>00506   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00507"></a>00507   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structppc__reg__offsets.html">ppc_reg_offsets</a> *offsets = regset-&gt;<a class="code" href="structregset.html#a48a85083a9ec739072ed3a6030e52edd">descr</a>;
<a name="l00508"></a>00508   <span class="keywordtype">size_t</span> <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l00509"></a>00509   <span class="keywordtype">int</span> regsize;
<a name="l00510"></a>00510 
<a name="l00511"></a>00511   <span class="keywordflow">if</span> (regnum == -1)
<a name="l00512"></a>00512     {
<a name="l00513"></a>00513       <span class="keywordtype">int</span> i;
<a name="l00514"></a>00514       <span class="keywordtype">int</span> <a class="code" href="structppc__reg__offsets.html#aa222160920dcc31dea6456f84b4704f1">gpr_size</a> = offsets-&gt;<a class="code" href="structppc__reg__offsets.html#aa222160920dcc31dea6456f84b4704f1">gpr_size</a>;
<a name="l00515"></a>00515 
<a name="l00516"></a>00516       <span class="keywordflow">for</span> (i = tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a764a18b9d437c88d6ad174febf29aeeb">ppc_gp0_regnum</a>, offset = offsets-&gt;<a class="code" href="structppc__reg__offsets.html#aaf931931439ef0d66a43b64176639924">r0_offset</a>;
<a name="l00517"></a>00517            i &lt; tdep-&gt;ppc_gp0_regnum + <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba24b61ab9c068d3db8d90266aff6c008a">ppc_num_gprs</a>;
<a name="l00518"></a>00518            i++, offset += gpr_size)
<a name="l00519"></a>00519         <a class="code" href="ppc-tdep_8h.html#a801ef73c4937eb8b9264743fffb94246">ppc_supply_reg</a> (regcache, i, gregs, offset, gpr_size);
<a name="l00520"></a>00520 
<a name="l00521"></a>00521       <a class="code" href="ppc-tdep_8h.html#a801ef73c4937eb8b9264743fffb94246">ppc_supply_reg</a> (regcache, <a class="code" href="gdbarch_8c.html#a07a162ebafea1269eb8f341db44e53e7">gdbarch_pc_regnum</a> (gdbarch),
<a name="l00522"></a>00522                       gregs, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a8920cb863df82e83df115e1367bddc24">pc_offset</a>, gpr_size);
<a name="l00523"></a>00523       <a class="code" href="ppc-tdep_8h.html#a801ef73c4937eb8b9264743fffb94246">ppc_supply_reg</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a3dd7eea3668b3816f9f362de516e1d4e">ppc_ps_regnum</a>,
<a name="l00524"></a>00524                       gregs, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#af40e5a18543ef0e4682a4586d4c7c6db">ps_offset</a>, gpr_size);
<a name="l00525"></a>00525       <a class="code" href="ppc-tdep_8h.html#a801ef73c4937eb8b9264743fffb94246">ppc_supply_reg</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a5f8e280348ae374459d2b5e2980a188c">ppc_lr_regnum</a>,
<a name="l00526"></a>00526                       gregs, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a0dcf2fbdb8026bd9f8320a1d2e649887">lr_offset</a>, gpr_size);
<a name="l00527"></a>00527       <a class="code" href="ppc-tdep_8h.html#a801ef73c4937eb8b9264743fffb94246">ppc_supply_reg</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a4ea1d651e250d5879d6da1a28fd3be2f">ppc_ctr_regnum</a>,
<a name="l00528"></a>00528                       gregs, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a97694d23731dd2850cd48ceda7faf2c9">ctr_offset</a>, gpr_size);
<a name="l00529"></a>00529       <a class="code" href="ppc-tdep_8h.html#a801ef73c4937eb8b9264743fffb94246">ppc_supply_reg</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a472825ad1cf896dce405f82f2599ae9a">ppc_cr_regnum</a>,
<a name="l00530"></a>00530                       gregs, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a2b1269a9298bc2b0a67a3413ba83c05d">cr_offset</a>, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a5e8ff716dd99f834be999915cf4042ab">xr_size</a>);
<a name="l00531"></a>00531       <a class="code" href="ppc-tdep_8h.html#a801ef73c4937eb8b9264743fffb94246">ppc_supply_reg</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a1f0de040d355a482dae4af4ce50aec32">ppc_xer_regnum</a>,
<a name="l00532"></a>00532                       gregs, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a52e14444019585bd66d7f7201e834e63">xer_offset</a>, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a5e8ff716dd99f834be999915cf4042ab">xr_size</a>);
<a name="l00533"></a>00533       <a class="code" href="ppc-tdep_8h.html#a801ef73c4937eb8b9264743fffb94246">ppc_supply_reg</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a9d179a84ff44e9a36e6ee64075760429">ppc_mq_regnum</a>,
<a name="l00534"></a>00534                       gregs, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a34dd32292033af74f6e972fe5670ee4e">mq_offset</a>, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a5e8ff716dd99f834be999915cf4042ab">xr_size</a>);
<a name="l00535"></a>00535       <span class="keywordflow">return</span>;
<a name="l00536"></a>00536     }
<a name="l00537"></a>00537 
<a name="l00538"></a>00538   offset = <a class="code" href="rs6000-tdep_8c.html#aa62e078a34675816954640e450c672b3">ppc_greg_offset</a> (gdbarch, tdep, offsets, regnum, &amp;regsize);
<a name="l00539"></a>00539   <a class="code" href="ppc-tdep_8h.html#a801ef73c4937eb8b9264743fffb94246">ppc_supply_reg</a> (regcache, regnum, gregs, offset, regsize);
<a name="l00540"></a>00540 }
<a name="l00541"></a>00541 
<a name="l00542"></a>00542 <span class="comment">/* Supply register REGNUM in the floating-point register set REGSET</span>
<a name="l00543"></a>00543 <span class="comment">   from the buffer specified by FPREGS and LEN to register cache</span>
<a name="l00544"></a>00544 <span class="comment">   REGCACHE.  If REGNUM is -1, do this for all registers in REGSET.  */</span>
<a name="l00545"></a>00545 
<a name="l00546"></a>00546 <span class="keywordtype">void</span>
<a name="l00547"></a><a class="code" href="rs6000-tdep_8c.html#a23af85405bbd0f1ff85e47c0ee09f5cf">00547</a> <a class="code" href="ppc-tdep_8h.html#a23af85405bbd0f1ff85e47c0ee09f5cf">ppc_supply_fpregset</a> (<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structregset.html">regset</a> *<a class="code" href="structregset.html">regset</a>, <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l00548"></a>00548                      <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>, <span class="keyword">const</span> <span class="keywordtype">void</span> *fpregs, <span class="keywordtype">size_t</span> <a class="code" href="exec_8h.html#a00f945351279d3c8935f13d2b9f9b808">len</a>)
<a name="l00549"></a>00549 {
<a name="l00550"></a>00550   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="regcache_8c.html#ad4f6d0cdf256b1fa45d59a6d71b50659">get_regcache_arch</a> (regcache);
<a name="l00551"></a>00551   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep;
<a name="l00552"></a>00552   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structppc__reg__offsets.html">ppc_reg_offsets</a> *offsets;
<a name="l00553"></a>00553   <span class="keywordtype">size_t</span> <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l00554"></a>00554 
<a name="l00555"></a>00555   <span class="keywordflow">if</span> (!<a class="code" href="ppc-tdep_8h.html#a7061eb865daba576f05eda0bb395290d">ppc_floating_point_unit_p</a> (gdbarch))
<a name="l00556"></a>00556     <span class="keywordflow">return</span>;
<a name="l00557"></a>00557 
<a name="l00558"></a>00558   tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00559"></a>00559   offsets = regset-&gt;<a class="code" href="structregset.html#a48a85083a9ec739072ed3a6030e52edd">descr</a>;
<a name="l00560"></a>00560   <span class="keywordflow">if</span> (regnum == -1)
<a name="l00561"></a>00561     {
<a name="l00562"></a>00562       <span class="keywordtype">int</span> i;
<a name="l00563"></a>00563 
<a name="l00564"></a>00564       <span class="keywordflow">for</span> (i = tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a>, offset = offsets-&gt;<a class="code" href="structppc__reg__offsets.html#aafe9b8fe4fdf550510b4811d41630dd3">f0_offset</a>;
<a name="l00565"></a>00565            i &lt; tdep-&gt;ppc_fp0_regnum + <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba7cb3ec3816363e0df7014e2a613a6df8">ppc_num_fprs</a>;
<a name="l00566"></a>00566            i++, offset += 8)
<a name="l00567"></a>00567         <a class="code" href="ppc-tdep_8h.html#a801ef73c4937eb8b9264743fffb94246">ppc_supply_reg</a> (regcache, i, fpregs, offset, 8);
<a name="l00568"></a>00568 
<a name="l00569"></a>00569       <a class="code" href="ppc-tdep_8h.html#a801ef73c4937eb8b9264743fffb94246">ppc_supply_reg</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a0c28f5e30ad04a087b6886822810120a">ppc_fpscr_regnum</a>,
<a name="l00570"></a>00570                       fpregs, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a8f57959403c04bc47d0214781937c4a5">fpscr_offset</a>, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a6e5686b4787f752628671e91c4af194d">fpscr_size</a>);
<a name="l00571"></a>00571       <span class="keywordflow">return</span>;
<a name="l00572"></a>00572     }
<a name="l00573"></a>00573 
<a name="l00574"></a>00574   offset = <a class="code" href="rs6000-tdep_8c.html#a44e90494efb2fa21aaf0eb83006a3825">ppc_fpreg_offset</a> (tdep, offsets, regnum);
<a name="l00575"></a>00575   <a class="code" href="ppc-tdep_8h.html#a801ef73c4937eb8b9264743fffb94246">ppc_supply_reg</a> (regcache, regnum, fpregs, offset,
<a name="l00576"></a>00576                   regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a0c28f5e30ad04a087b6886822810120a">ppc_fpscr_regnum</a> ? offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a6e5686b4787f752628671e91c4af194d">fpscr_size</a> : 8);
<a name="l00577"></a>00577 }
<a name="l00578"></a>00578 
<a name="l00579"></a>00579 <span class="comment">/* Supply register REGNUM in the VSX register set REGSET</span>
<a name="l00580"></a>00580 <span class="comment">   from the buffer specified by VSXREGS and LEN to register cache</span>
<a name="l00581"></a>00581 <span class="comment">   REGCACHE.  If REGNUM is -1, do this for all registers in REGSET.  */</span>
<a name="l00582"></a>00582 
<a name="l00583"></a>00583 <span class="keywordtype">void</span>
<a name="l00584"></a><a class="code" href="rs6000-tdep_8c.html#a59ef53315db342658101d4cae162e49a">00584</a> <a class="code" href="ppc-tdep_8h.html#a59ef53315db342658101d4cae162e49a">ppc_supply_vsxregset</a> (<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structregset.html">regset</a> *<a class="code" href="structregset.html">regset</a>, <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l00585"></a>00585                      <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>, <span class="keyword">const</span> <span class="keywordtype">void</span> *vsxregs, <span class="keywordtype">size_t</span> <a class="code" href="exec_8h.html#a00f945351279d3c8935f13d2b9f9b808">len</a>)
<a name="l00586"></a>00586 {
<a name="l00587"></a>00587   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="regcache_8c.html#ad4f6d0cdf256b1fa45d59a6d71b50659">get_regcache_arch</a> (regcache);
<a name="l00588"></a>00588   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep;
<a name="l00589"></a>00589 
<a name="l00590"></a>00590   <span class="keywordflow">if</span> (!<a class="code" href="rs6000-tdep_8c.html#a3d036530b73c4f5b7539883b2ae44ac7">ppc_vsx_support_p</a> (gdbarch))
<a name="l00591"></a>00591     <span class="keywordflow">return</span>;
<a name="l00592"></a>00592 
<a name="l00593"></a>00593   tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00594"></a>00594 
<a name="l00595"></a>00595   <span class="keywordflow">if</span> (regnum == -1)
<a name="l00596"></a>00596     {
<a name="l00597"></a>00597       <span class="keywordtype">int</span> i;
<a name="l00598"></a>00598 
<a name="l00599"></a>00599       <span class="keywordflow">for</span> (i = tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af62bcda72ac9d044f7b1145d780de683">ppc_vsr0_upper_regnum</a>;
<a name="l00600"></a>00600            i &lt; tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af62bcda72ac9d044f7b1145d780de683">ppc_vsr0_upper_regnum</a> + 32;
<a name="l00601"></a>00601            i++)
<a name="l00602"></a>00602         <a class="code" href="ppc-tdep_8h.html#a801ef73c4937eb8b9264743fffb94246">ppc_supply_reg</a> (regcache, i, vsxregs, 0, 8);
<a name="l00603"></a>00603 
<a name="l00604"></a>00604       <span class="keywordflow">return</span>;
<a name="l00605"></a>00605     }
<a name="l00606"></a>00606   <span class="keywordflow">else</span>
<a name="l00607"></a>00607     <a class="code" href="ppc-tdep_8h.html#a801ef73c4937eb8b9264743fffb94246">ppc_supply_reg</a> (regcache, regnum, vsxregs, 0, 8);
<a name="l00608"></a>00608 }
<a name="l00609"></a>00609 
<a name="l00610"></a>00610 <span class="comment">/* Supply register REGNUM in the Altivec register set REGSET</span>
<a name="l00611"></a>00611 <span class="comment">   from the buffer specified by VRREGS and LEN to register cache</span>
<a name="l00612"></a>00612 <span class="comment">   REGCACHE.  If REGNUM is -1, do this for all registers in REGSET.  */</span>
<a name="l00613"></a>00613 
<a name="l00614"></a>00614 <span class="keywordtype">void</span>
<a name="l00615"></a><a class="code" href="rs6000-tdep_8c.html#afa317d884b34d5d5f94d8786f2da5e97">00615</a> <a class="code" href="ppc-tdep_8h.html#afa317d884b34d5d5f94d8786f2da5e97">ppc_supply_vrregset</a> (<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structregset.html">regset</a> *<a class="code" href="structregset.html">regset</a>, <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l00616"></a>00616                      <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>, <span class="keyword">const</span> <span class="keywordtype">void</span> *vrregs, <span class="keywordtype">size_t</span> <a class="code" href="exec_8h.html#a00f945351279d3c8935f13d2b9f9b808">len</a>)
<a name="l00617"></a>00617 {
<a name="l00618"></a>00618   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="regcache_8c.html#ad4f6d0cdf256b1fa45d59a6d71b50659">get_regcache_arch</a> (regcache);
<a name="l00619"></a>00619   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep;
<a name="l00620"></a>00620   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structppc__reg__offsets.html">ppc_reg_offsets</a> *offsets;
<a name="l00621"></a>00621   <span class="keywordtype">size_t</span> <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l00622"></a>00622 
<a name="l00623"></a>00623   <span class="keywordflow">if</span> (!<a class="code" href="ppc-tdep_8h.html#a62a4f4552eafe319309babb2e5578471">ppc_altivec_support_p</a> (gdbarch))
<a name="l00624"></a>00624     <span class="keywordflow">return</span>;
<a name="l00625"></a>00625 
<a name="l00626"></a>00626   tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00627"></a>00627   offsets = regset-&gt;<a class="code" href="structregset.html#a48a85083a9ec739072ed3a6030e52edd">descr</a>;
<a name="l00628"></a>00628   <span class="keywordflow">if</span> (regnum == -1)
<a name="l00629"></a>00629     {
<a name="l00630"></a>00630       <span class="keywordtype">int</span> i;
<a name="l00631"></a>00631 
<a name="l00632"></a>00632       <span class="keywordflow">for</span> (i = tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a>, offset = offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a6417d81ebb7bf5318809d3f50af0a6e2">vr0_offset</a>;
<a name="l00633"></a>00633            i &lt; tdep-&gt;ppc_vr0_regnum + <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba46c440a810ebded73dbeff857dd124f4">ppc_num_vrs</a>;
<a name="l00634"></a>00634            i++, offset += 16)
<a name="l00635"></a>00635         <a class="code" href="ppc-tdep_8h.html#a801ef73c4937eb8b9264743fffb94246">ppc_supply_reg</a> (regcache, i, vrregs, offset, 16);
<a name="l00636"></a>00636 
<a name="l00637"></a>00637       <a class="code" href="ppc-tdep_8h.html#a801ef73c4937eb8b9264743fffb94246">ppc_supply_reg</a> (regcache, (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae450527d83da498c547b5381594264b3">ppc_vrsave_regnum</a> - 1),
<a name="l00638"></a>00638                       vrregs, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#aec9388db38aa3bea0c5bf92e2a6ac1c6">vscr_offset</a>, 4);
<a name="l00639"></a>00639 
<a name="l00640"></a>00640       <a class="code" href="ppc-tdep_8h.html#a801ef73c4937eb8b9264743fffb94246">ppc_supply_reg</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae450527d83da498c547b5381594264b3">ppc_vrsave_regnum</a>,
<a name="l00641"></a>00641                       vrregs, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a6526086c39e5819f2f6c3a531c36a564">vrsave_offset</a>, 4);
<a name="l00642"></a>00642       <span class="keywordflow">return</span>;
<a name="l00643"></a>00643     }
<a name="l00644"></a>00644 
<a name="l00645"></a>00645   offset = <a class="code" href="rs6000-tdep_8c.html#a86a57133000714c01786386a9216dcff">ppc_vrreg_offset</a> (tdep, offsets, regnum);
<a name="l00646"></a>00646   <span class="keywordflow">if</span> (regnum != tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae450527d83da498c547b5381594264b3">ppc_vrsave_regnum</a>
<a name="l00647"></a>00647       &amp;&amp; regnum != tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae450527d83da498c547b5381594264b3">ppc_vrsave_regnum</a> - 1)
<a name="l00648"></a>00648     <a class="code" href="ppc-tdep_8h.html#a801ef73c4937eb8b9264743fffb94246">ppc_supply_reg</a> (regcache, regnum, vrregs, offset, 16);
<a name="l00649"></a>00649   <span class="keywordflow">else</span>
<a name="l00650"></a>00650     <a class="code" href="ppc-tdep_8h.html#a801ef73c4937eb8b9264743fffb94246">ppc_supply_reg</a> (regcache, regnum,
<a name="l00651"></a>00651                     vrregs, offset, 4);
<a name="l00652"></a>00652 }
<a name="l00653"></a>00653 
<a name="l00654"></a>00654 <span class="comment">/* Collect register REGNUM in the general-purpose register set</span>
<a name="l00655"></a>00655 <span class="comment">   REGSET from register cache REGCACHE into the buffer specified by</span>
<a name="l00656"></a>00656 <span class="comment">   GREGS and LEN.  If REGNUM is -1, do this for all registers in</span>
<a name="l00657"></a>00657 <span class="comment">   REGSET.  */</span>
<a name="l00658"></a>00658 
<a name="l00659"></a>00659 <span class="keywordtype">void</span>
<a name="l00660"></a><a class="code" href="rs6000-tdep_8c.html#a025e3a5cdc50acf6ed8e458a966af5d7">00660</a> <a class="code" href="ppc-tdep_8h.html#a025e3a5cdc50acf6ed8e458a966af5d7">ppc_collect_gregset</a> (<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structregset.html">regset</a> *<a class="code" href="structregset.html">regset</a>,
<a name="l00661"></a>00661                      <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l00662"></a>00662                      <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>, <span class="keywordtype">void</span> *gregs, <span class="keywordtype">size_t</span> <a class="code" href="exec_8h.html#a00f945351279d3c8935f13d2b9f9b808">len</a>)
<a name="l00663"></a>00663 {
<a name="l00664"></a>00664   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="regcache_8c.html#ad4f6d0cdf256b1fa45d59a6d71b50659">get_regcache_arch</a> (regcache);
<a name="l00665"></a>00665   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00666"></a>00666   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structppc__reg__offsets.html">ppc_reg_offsets</a> *offsets = regset-&gt;<a class="code" href="structregset.html#a48a85083a9ec739072ed3a6030e52edd">descr</a>;
<a name="l00667"></a>00667   <span class="keywordtype">size_t</span> <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l00668"></a>00668   <span class="keywordtype">int</span> regsize;
<a name="l00669"></a>00669 
<a name="l00670"></a>00670   <span class="keywordflow">if</span> (regnum == -1)
<a name="l00671"></a>00671     {
<a name="l00672"></a>00672       <span class="keywordtype">int</span> i;
<a name="l00673"></a>00673       <span class="keywordtype">int</span> <a class="code" href="structppc__reg__offsets.html#aa222160920dcc31dea6456f84b4704f1">gpr_size</a> = offsets-&gt;<a class="code" href="structppc__reg__offsets.html#aa222160920dcc31dea6456f84b4704f1">gpr_size</a>;
<a name="l00674"></a>00674 
<a name="l00675"></a>00675       <span class="keywordflow">for</span> (i = tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a764a18b9d437c88d6ad174febf29aeeb">ppc_gp0_regnum</a>, offset = offsets-&gt;<a class="code" href="structppc__reg__offsets.html#aaf931931439ef0d66a43b64176639924">r0_offset</a>;
<a name="l00676"></a>00676            i &lt; tdep-&gt;ppc_gp0_regnum + <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba24b61ab9c068d3db8d90266aff6c008a">ppc_num_gprs</a>;
<a name="l00677"></a>00677            i++, offset += gpr_size)
<a name="l00678"></a>00678         <a class="code" href="ppc-tdep_8h.html#a5e870d9bc70451f30a0fe616a015dff4">ppc_collect_reg</a> (regcache, i, gregs, offset, gpr_size);
<a name="l00679"></a>00679 
<a name="l00680"></a>00680       <a class="code" href="ppc-tdep_8h.html#a5e870d9bc70451f30a0fe616a015dff4">ppc_collect_reg</a> (regcache, <a class="code" href="gdbarch_8c.html#a07a162ebafea1269eb8f341db44e53e7">gdbarch_pc_regnum</a> (gdbarch),
<a name="l00681"></a>00681                        gregs, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a8920cb863df82e83df115e1367bddc24">pc_offset</a>, gpr_size);
<a name="l00682"></a>00682       <a class="code" href="ppc-tdep_8h.html#a5e870d9bc70451f30a0fe616a015dff4">ppc_collect_reg</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a3dd7eea3668b3816f9f362de516e1d4e">ppc_ps_regnum</a>,
<a name="l00683"></a>00683                        gregs, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#af40e5a18543ef0e4682a4586d4c7c6db">ps_offset</a>, gpr_size);
<a name="l00684"></a>00684       <a class="code" href="ppc-tdep_8h.html#a5e870d9bc70451f30a0fe616a015dff4">ppc_collect_reg</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a5f8e280348ae374459d2b5e2980a188c">ppc_lr_regnum</a>,
<a name="l00685"></a>00685                        gregs, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a0dcf2fbdb8026bd9f8320a1d2e649887">lr_offset</a>, gpr_size);
<a name="l00686"></a>00686       <a class="code" href="ppc-tdep_8h.html#a5e870d9bc70451f30a0fe616a015dff4">ppc_collect_reg</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a4ea1d651e250d5879d6da1a28fd3be2f">ppc_ctr_regnum</a>,
<a name="l00687"></a>00687                        gregs, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a97694d23731dd2850cd48ceda7faf2c9">ctr_offset</a>, gpr_size);
<a name="l00688"></a>00688       <a class="code" href="ppc-tdep_8h.html#a5e870d9bc70451f30a0fe616a015dff4">ppc_collect_reg</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a472825ad1cf896dce405f82f2599ae9a">ppc_cr_regnum</a>,
<a name="l00689"></a>00689                        gregs, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a2b1269a9298bc2b0a67a3413ba83c05d">cr_offset</a>, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a5e8ff716dd99f834be999915cf4042ab">xr_size</a>);
<a name="l00690"></a>00690       <a class="code" href="ppc-tdep_8h.html#a5e870d9bc70451f30a0fe616a015dff4">ppc_collect_reg</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a1f0de040d355a482dae4af4ce50aec32">ppc_xer_regnum</a>,
<a name="l00691"></a>00691                        gregs, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a52e14444019585bd66d7f7201e834e63">xer_offset</a>, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a5e8ff716dd99f834be999915cf4042ab">xr_size</a>);
<a name="l00692"></a>00692       <a class="code" href="ppc-tdep_8h.html#a5e870d9bc70451f30a0fe616a015dff4">ppc_collect_reg</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a9d179a84ff44e9a36e6ee64075760429">ppc_mq_regnum</a>,
<a name="l00693"></a>00693                        gregs, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a34dd32292033af74f6e972fe5670ee4e">mq_offset</a>, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a5e8ff716dd99f834be999915cf4042ab">xr_size</a>);
<a name="l00694"></a>00694       <span class="keywordflow">return</span>;
<a name="l00695"></a>00695     }
<a name="l00696"></a>00696 
<a name="l00697"></a>00697   offset = <a class="code" href="rs6000-tdep_8c.html#aa62e078a34675816954640e450c672b3">ppc_greg_offset</a> (gdbarch, tdep, offsets, regnum, &amp;regsize);
<a name="l00698"></a>00698   <a class="code" href="ppc-tdep_8h.html#a5e870d9bc70451f30a0fe616a015dff4">ppc_collect_reg</a> (regcache, regnum, gregs, offset, regsize);
<a name="l00699"></a>00699 }
<a name="l00700"></a>00700 
<a name="l00701"></a>00701 <span class="comment">/* Collect register REGNUM in the floating-point register set</span>
<a name="l00702"></a>00702 <span class="comment">   REGSET from register cache REGCACHE into the buffer specified by</span>
<a name="l00703"></a>00703 <span class="comment">   FPREGS and LEN.  If REGNUM is -1, do this for all registers in</span>
<a name="l00704"></a>00704 <span class="comment">   REGSET.  */</span>
<a name="l00705"></a>00705 
<a name="l00706"></a>00706 <span class="keywordtype">void</span>
<a name="l00707"></a><a class="code" href="rs6000-tdep_8c.html#af272949b5567908ee748017d283adf5d">00707</a> <a class="code" href="ppc-tdep_8h.html#af272949b5567908ee748017d283adf5d">ppc_collect_fpregset</a> (<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structregset.html">regset</a> *<a class="code" href="structregset.html">regset</a>,
<a name="l00708"></a>00708                       <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l00709"></a>00709                       <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>, <span class="keywordtype">void</span> *fpregs, <span class="keywordtype">size_t</span> <a class="code" href="exec_8h.html#a00f945351279d3c8935f13d2b9f9b808">len</a>)
<a name="l00710"></a>00710 {
<a name="l00711"></a>00711   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="regcache_8c.html#ad4f6d0cdf256b1fa45d59a6d71b50659">get_regcache_arch</a> (regcache);
<a name="l00712"></a>00712   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep;
<a name="l00713"></a>00713   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structppc__reg__offsets.html">ppc_reg_offsets</a> *offsets;
<a name="l00714"></a>00714   <span class="keywordtype">size_t</span> <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l00715"></a>00715 
<a name="l00716"></a>00716   <span class="keywordflow">if</span> (!<a class="code" href="ppc-tdep_8h.html#a7061eb865daba576f05eda0bb395290d">ppc_floating_point_unit_p</a> (gdbarch))
<a name="l00717"></a>00717     <span class="keywordflow">return</span>;
<a name="l00718"></a>00718 
<a name="l00719"></a>00719   tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00720"></a>00720   offsets = regset-&gt;<a class="code" href="structregset.html#a48a85083a9ec739072ed3a6030e52edd">descr</a>;
<a name="l00721"></a>00721   <span class="keywordflow">if</span> (regnum == -1)
<a name="l00722"></a>00722     {
<a name="l00723"></a>00723       <span class="keywordtype">int</span> i;
<a name="l00724"></a>00724 
<a name="l00725"></a>00725       <span class="keywordflow">for</span> (i = tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a>, offset = offsets-&gt;<a class="code" href="structppc__reg__offsets.html#aafe9b8fe4fdf550510b4811d41630dd3">f0_offset</a>;
<a name="l00726"></a>00726            i &lt; tdep-&gt;ppc_fp0_regnum + <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba7cb3ec3816363e0df7014e2a613a6df8">ppc_num_fprs</a>;
<a name="l00727"></a>00727            i++, offset += 8)
<a name="l00728"></a>00728         <a class="code" href="ppc-tdep_8h.html#a5e870d9bc70451f30a0fe616a015dff4">ppc_collect_reg</a> (regcache, i, fpregs, offset, 8);
<a name="l00729"></a>00729 
<a name="l00730"></a>00730       <a class="code" href="ppc-tdep_8h.html#a5e870d9bc70451f30a0fe616a015dff4">ppc_collect_reg</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a0c28f5e30ad04a087b6886822810120a">ppc_fpscr_regnum</a>,
<a name="l00731"></a>00731                        fpregs, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a8f57959403c04bc47d0214781937c4a5">fpscr_offset</a>, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a6e5686b4787f752628671e91c4af194d">fpscr_size</a>);
<a name="l00732"></a>00732       <span class="keywordflow">return</span>;
<a name="l00733"></a>00733     }
<a name="l00734"></a>00734 
<a name="l00735"></a>00735   offset = <a class="code" href="rs6000-tdep_8c.html#a44e90494efb2fa21aaf0eb83006a3825">ppc_fpreg_offset</a> (tdep, offsets, regnum);
<a name="l00736"></a>00736   <a class="code" href="ppc-tdep_8h.html#a5e870d9bc70451f30a0fe616a015dff4">ppc_collect_reg</a> (regcache, regnum, fpregs, offset,
<a name="l00737"></a>00737                    regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a0c28f5e30ad04a087b6886822810120a">ppc_fpscr_regnum</a> ? offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a6e5686b4787f752628671e91c4af194d">fpscr_size</a> : 8);
<a name="l00738"></a>00738 }
<a name="l00739"></a>00739 
<a name="l00740"></a>00740 <span class="comment">/* Collect register REGNUM in the VSX register set</span>
<a name="l00741"></a>00741 <span class="comment">   REGSET from register cache REGCACHE into the buffer specified by</span>
<a name="l00742"></a>00742 <span class="comment">   VSXREGS and LEN.  If REGNUM is -1, do this for all registers in</span>
<a name="l00743"></a>00743 <span class="comment">   REGSET.  */</span>
<a name="l00744"></a>00744 
<a name="l00745"></a>00745 <span class="keywordtype">void</span>
<a name="l00746"></a><a class="code" href="rs6000-tdep_8c.html#a9dc16cc13515ddd9ec222e7be94f2708">00746</a> <a class="code" href="ppc-tdep_8h.html#a9dc16cc13515ddd9ec222e7be94f2708">ppc_collect_vsxregset</a> (<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structregset.html">regset</a> *<a class="code" href="structregset.html">regset</a>,
<a name="l00747"></a>00747                       <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l00748"></a>00748                       <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>, <span class="keywordtype">void</span> *vsxregs, <span class="keywordtype">size_t</span> <a class="code" href="exec_8h.html#a00f945351279d3c8935f13d2b9f9b808">len</a>)
<a name="l00749"></a>00749 {
<a name="l00750"></a>00750   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="regcache_8c.html#ad4f6d0cdf256b1fa45d59a6d71b50659">get_regcache_arch</a> (regcache);
<a name="l00751"></a>00751   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep;
<a name="l00752"></a>00752 
<a name="l00753"></a>00753   <span class="keywordflow">if</span> (!<a class="code" href="rs6000-tdep_8c.html#a3d036530b73c4f5b7539883b2ae44ac7">ppc_vsx_support_p</a> (gdbarch))
<a name="l00754"></a>00754     <span class="keywordflow">return</span>;
<a name="l00755"></a>00755 
<a name="l00756"></a>00756   tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00757"></a>00757 
<a name="l00758"></a>00758   <span class="keywordflow">if</span> (regnum == -1)
<a name="l00759"></a>00759     {
<a name="l00760"></a>00760       <span class="keywordtype">int</span> i;
<a name="l00761"></a>00761 
<a name="l00762"></a>00762       <span class="keywordflow">for</span> (i = tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af62bcda72ac9d044f7b1145d780de683">ppc_vsr0_upper_regnum</a>;
<a name="l00763"></a>00763            i &lt; tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af62bcda72ac9d044f7b1145d780de683">ppc_vsr0_upper_regnum</a> + 32;
<a name="l00764"></a>00764            i++)
<a name="l00765"></a>00765         <a class="code" href="ppc-tdep_8h.html#a5e870d9bc70451f30a0fe616a015dff4">ppc_collect_reg</a> (regcache, i, vsxregs, 0, 8);
<a name="l00766"></a>00766 
<a name="l00767"></a>00767       <span class="keywordflow">return</span>;
<a name="l00768"></a>00768     }
<a name="l00769"></a>00769   <span class="keywordflow">else</span>
<a name="l00770"></a>00770     <a class="code" href="ppc-tdep_8h.html#a5e870d9bc70451f30a0fe616a015dff4">ppc_collect_reg</a> (regcache, regnum, vsxregs, 0, 8);
<a name="l00771"></a>00771 }
<a name="l00772"></a>00772 
<a name="l00773"></a>00773 
<a name="l00774"></a>00774 <span class="comment">/* Collect register REGNUM in the Altivec register set</span>
<a name="l00775"></a>00775 <span class="comment">   REGSET from register cache REGCACHE into the buffer specified by</span>
<a name="l00776"></a>00776 <span class="comment">   VRREGS and LEN.  If REGNUM is -1, do this for all registers in</span>
<a name="l00777"></a>00777 <span class="comment">   REGSET.  */</span>
<a name="l00778"></a>00778 
<a name="l00779"></a>00779 <span class="keywordtype">void</span>
<a name="l00780"></a><a class="code" href="rs6000-tdep_8c.html#a5007713d1626d0988d69e3dcf85e6ec4">00780</a> <a class="code" href="ppc-tdep_8h.html#a5007713d1626d0988d69e3dcf85e6ec4">ppc_collect_vrregset</a> (<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structregset.html">regset</a> *<a class="code" href="structregset.html">regset</a>,
<a name="l00781"></a>00781                       <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l00782"></a>00782                       <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>, <span class="keywordtype">void</span> *vrregs, <span class="keywordtype">size_t</span> <a class="code" href="exec_8h.html#a00f945351279d3c8935f13d2b9f9b808">len</a>)
<a name="l00783"></a>00783 {
<a name="l00784"></a>00784   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="regcache_8c.html#ad4f6d0cdf256b1fa45d59a6d71b50659">get_regcache_arch</a> (regcache);
<a name="l00785"></a>00785   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep;
<a name="l00786"></a>00786   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structppc__reg__offsets.html">ppc_reg_offsets</a> *offsets;
<a name="l00787"></a>00787   <span class="keywordtype">size_t</span> <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l00788"></a>00788 
<a name="l00789"></a>00789   <span class="keywordflow">if</span> (!<a class="code" href="ppc-tdep_8h.html#a62a4f4552eafe319309babb2e5578471">ppc_altivec_support_p</a> (gdbarch))
<a name="l00790"></a>00790     <span class="keywordflow">return</span>;
<a name="l00791"></a>00791 
<a name="l00792"></a>00792   tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00793"></a>00793   offsets = regset-&gt;<a class="code" href="structregset.html#a48a85083a9ec739072ed3a6030e52edd">descr</a>;
<a name="l00794"></a>00794   <span class="keywordflow">if</span> (regnum == -1)
<a name="l00795"></a>00795     {
<a name="l00796"></a>00796       <span class="keywordtype">int</span> i;
<a name="l00797"></a>00797 
<a name="l00798"></a>00798       <span class="keywordflow">for</span> (i = tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a>, offset = offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a6417d81ebb7bf5318809d3f50af0a6e2">vr0_offset</a>;
<a name="l00799"></a>00799            i &lt; tdep-&gt;ppc_vr0_regnum + <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba46c440a810ebded73dbeff857dd124f4">ppc_num_vrs</a>;
<a name="l00800"></a>00800            i++, offset += 16)
<a name="l00801"></a>00801         <a class="code" href="ppc-tdep_8h.html#a5e870d9bc70451f30a0fe616a015dff4">ppc_collect_reg</a> (regcache, i, vrregs, offset, 16);
<a name="l00802"></a>00802 
<a name="l00803"></a>00803       <a class="code" href="ppc-tdep_8h.html#a5e870d9bc70451f30a0fe616a015dff4">ppc_collect_reg</a> (regcache, (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae450527d83da498c547b5381594264b3">ppc_vrsave_regnum</a> - 1),
<a name="l00804"></a>00804                        vrregs, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#aec9388db38aa3bea0c5bf92e2a6ac1c6">vscr_offset</a>, 4);
<a name="l00805"></a>00805 
<a name="l00806"></a>00806       <a class="code" href="ppc-tdep_8h.html#a5e870d9bc70451f30a0fe616a015dff4">ppc_collect_reg</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae450527d83da498c547b5381594264b3">ppc_vrsave_regnum</a>,
<a name="l00807"></a>00807                        vrregs, offsets-&gt;<a class="code" href="structppc__reg__offsets.html#a6526086c39e5819f2f6c3a531c36a564">vrsave_offset</a>, 4);
<a name="l00808"></a>00808       <span class="keywordflow">return</span>;
<a name="l00809"></a>00809     }
<a name="l00810"></a>00810 
<a name="l00811"></a>00811   offset = <a class="code" href="rs6000-tdep_8c.html#a86a57133000714c01786386a9216dcff">ppc_vrreg_offset</a> (tdep, offsets, regnum);
<a name="l00812"></a>00812   <span class="keywordflow">if</span> (regnum != tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae450527d83da498c547b5381594264b3">ppc_vrsave_regnum</a>
<a name="l00813"></a>00813       &amp;&amp; regnum != tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae450527d83da498c547b5381594264b3">ppc_vrsave_regnum</a> - 1)
<a name="l00814"></a>00814     <a class="code" href="ppc-tdep_8h.html#a5e870d9bc70451f30a0fe616a015dff4">ppc_collect_reg</a> (regcache, regnum, vrregs, offset, 16);
<a name="l00815"></a>00815   <span class="keywordflow">else</span>
<a name="l00816"></a>00816     <a class="code" href="ppc-tdep_8h.html#a5e870d9bc70451f30a0fe616a015dff4">ppc_collect_reg</a> (regcache, regnum,
<a name="l00817"></a>00817                     vrregs, offset, 4);
<a name="l00818"></a>00818 }
<a name="l00819"></a>00819 
<a name="l00820"></a>00820 
<a name="l00821"></a>00821 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00822"></a><a class="code" href="rs6000-tdep_8c.html#aee9c880859dfc884752b00d9ddc70ba4">00822</a> <a class="code" href="rs6000-tdep_8c.html#aee9c880859dfc884752b00d9ddc70ba4">insn_changes_sp_or_jumps</a> (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> insn)
<a name="l00823"></a>00823 {
<a name="l00824"></a>00824   <span class="keywordtype">int</span> opcode = (insn &gt;&gt; 26) &amp; 0x03f;
<a name="l00825"></a>00825   <span class="keywordtype">int</span> sd = (insn &gt;&gt; 21) &amp; 0x01f;
<a name="l00826"></a>00826   <span class="keywordtype">int</span> a = (insn &gt;&gt; 16) &amp; 0x01f;
<a name="l00827"></a>00827   <span class="keywordtype">int</span> subcode = (insn &gt;&gt; 1) &amp; 0x3ff;
<a name="l00828"></a>00828 
<a name="l00829"></a>00829   <span class="comment">/* Changes the stack pointer.  */</span>
<a name="l00830"></a>00830 
<a name="l00831"></a>00831   <span class="comment">/* NOTE: There are many ways to change the value of a given register.</span>
<a name="l00832"></a>00832 <span class="comment">           The ways below are those used when the register is R1, the SP,</span>
<a name="l00833"></a>00833 <span class="comment">           in a funtion&#39;s epilogue.  */</span>
<a name="l00834"></a>00834 
<a name="l00835"></a>00835   <span class="keywordflow">if</span> (opcode == 31 &amp;&amp; subcode == 444 &amp;&amp; a == 1)
<a name="l00836"></a>00836     <span class="keywordflow">return</span> 1;  <span class="comment">/* mr R1,Rn */</span>
<a name="l00837"></a>00837   <span class="keywordflow">if</span> (opcode == 14 &amp;&amp; sd == 1)
<a name="l00838"></a>00838     <span class="keywordflow">return</span> 1;  <span class="comment">/* addi R1,Rn,simm */</span>
<a name="l00839"></a>00839   <span class="keywordflow">if</span> (opcode == 58 &amp;&amp; sd == 1)
<a name="l00840"></a>00840     <span class="keywordflow">return</span> 1;  <span class="comment">/* ld R1,ds(Rn) */</span>
<a name="l00841"></a>00841 
<a name="l00842"></a>00842   <span class="comment">/* Transfers control.  */</span>
<a name="l00843"></a>00843 
<a name="l00844"></a>00844   <span class="keywordflow">if</span> (opcode == 18)
<a name="l00845"></a>00845     <span class="keywordflow">return</span> 1;  <span class="comment">/* b */</span>
<a name="l00846"></a>00846   <span class="keywordflow">if</span> (opcode == 16)
<a name="l00847"></a>00847     <span class="keywordflow">return</span> 1;  <span class="comment">/* bc */</span>
<a name="l00848"></a>00848   <span class="keywordflow">if</span> (opcode == 19 &amp;&amp; subcode == 16)
<a name="l00849"></a>00849     <span class="keywordflow">return</span> 1;  <span class="comment">/* bclr */</span>
<a name="l00850"></a>00850   <span class="keywordflow">if</span> (opcode == 19 &amp;&amp; subcode == 528)
<a name="l00851"></a>00851     <span class="keywordflow">return</span> 1;  <span class="comment">/* bcctr */</span>
<a name="l00852"></a>00852 
<a name="l00853"></a>00853   <span class="keywordflow">return</span> 0;
<a name="l00854"></a>00854 }
<a name="l00855"></a>00855 
<a name="l00856"></a>00856 <span class="comment">/* Return true if we are in the function&#39;s epilogue, i.e. after the</span>
<a name="l00857"></a>00857 <span class="comment">   instruction that destroyed the function&#39;s stack frame.</span>
<a name="l00858"></a>00858 <span class="comment"></span>
<a name="l00859"></a>00859 <span class="comment">   1) scan forward from the point of execution:</span>
<a name="l00860"></a>00860 <span class="comment">       a) If you find an instruction that modifies the stack pointer</span>
<a name="l00861"></a>00861 <span class="comment">          or transfers control (except a return), execution is not in</span>
<a name="l00862"></a>00862 <span class="comment">          an epilogue, return.</span>
<a name="l00863"></a>00863 <span class="comment">       b) Stop scanning if you find a return instruction or reach the</span>
<a name="l00864"></a>00864 <span class="comment">          end of the function or reach the hard limit for the size of</span>
<a name="l00865"></a>00865 <span class="comment">          an epilogue.</span>
<a name="l00866"></a>00866 <span class="comment">   2) scan backward from the point of execution:</span>
<a name="l00867"></a>00867 <span class="comment">        a) If you find an instruction that modifies the stack pointer,</span>
<a name="l00868"></a>00868 <span class="comment">            execution *is* in an epilogue, return.</span>
<a name="l00869"></a>00869 <span class="comment">        b) Stop scanning if you reach an instruction that transfers</span>
<a name="l00870"></a>00870 <span class="comment">           control or the beginning of the function or reach the hard</span>
<a name="l00871"></a>00871 <span class="comment">           limit for the size of an epilogue.  */</span>
<a name="l00872"></a>00872 
<a name="l00873"></a>00873 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00874"></a><a class="code" href="rs6000-tdep_8c.html#a11a469eb622fc1368f7a76112880c13d">00874</a> <a class="code" href="rs6000-tdep_8c.html#a11a469eb622fc1368f7a76112880c13d">rs6000_in_function_epilogue_p</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc)
<a name="l00875"></a>00875 {
<a name="l00876"></a>00876   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l00877"></a>00877   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l00878"></a>00878   bfd_byte insn_buf[<a class="code" href="ppc-tdep_8h.html#af353a6c23fa01123d835427dfc7b4b77">PPC_INSN_SIZE</a>];
<a name="l00879"></a>00879   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> scan_pc, func_start, func_end, epilogue_start, epilogue_end;
<a name="l00880"></a>00880   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> insn;
<a name="l00881"></a>00881   <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *curfrm;
<a name="l00882"></a>00882 
<a name="l00883"></a>00883   <span class="comment">/* Find the search limits based on function boundaries and hard limit.  */</span>
<a name="l00884"></a>00884 
<a name="l00885"></a>00885   <span class="keywordflow">if</span> (!<a class="code" href="blockframe_8c.html#a2dae2257ad1417604d2c26f8b9071ca9">find_pc_partial_function</a> (pc, NULL, &amp;func_start, &amp;func_end))
<a name="l00886"></a>00886     <span class="keywordflow">return</span> 0;
<a name="l00887"></a>00887 
<a name="l00888"></a>00888   epilogue_start = pc - <a class="code" href="ppc-tdep_8h.html#aa14a88414714e3f38a72ddf216a97e10">PPC_MAX_EPILOGUE_INSTRUCTIONS</a> * <a class="code" href="ppc-tdep_8h.html#af353a6c23fa01123d835427dfc7b4b77">PPC_INSN_SIZE</a>;
<a name="l00889"></a>00889   <span class="keywordflow">if</span> (epilogue_start &lt; func_start) epilogue_start = func_start;
<a name="l00890"></a>00890 
<a name="l00891"></a>00891   epilogue_end = pc + <a class="code" href="ppc-tdep_8h.html#aa14a88414714e3f38a72ddf216a97e10">PPC_MAX_EPILOGUE_INSTRUCTIONS</a> * <a class="code" href="ppc-tdep_8h.html#af353a6c23fa01123d835427dfc7b4b77">PPC_INSN_SIZE</a>;
<a name="l00892"></a>00892   <span class="keywordflow">if</span> (epilogue_end &gt; func_end) epilogue_end = func_end;
<a name="l00893"></a>00893 
<a name="l00894"></a>00894   curfrm = <a class="code" href="frame_8c.html#a5ab254510728049878a232ed1b889820">get_current_frame</a> ();
<a name="l00895"></a>00895 
<a name="l00896"></a>00896   <span class="comment">/* Scan forward until next &#39;blr&#39;.  */</span>
<a name="l00897"></a>00897 
<a name="l00898"></a>00898   <span class="keywordflow">for</span> (scan_pc = pc; scan_pc &lt; epilogue_end; scan_pc += <a class="code" href="ppc-tdep_8h.html#af353a6c23fa01123d835427dfc7b4b77">PPC_INSN_SIZE</a>)
<a name="l00899"></a>00899     {
<a name="l00900"></a>00900       <span class="keywordflow">if</span> (!<a class="code" href="frame_8c.html#a33ee9566c5c93f145279382fc6bf5fc3">safe_frame_unwind_memory</a> (curfrm, scan_pc, insn_buf, PPC_INSN_SIZE))
<a name="l00901"></a>00901         <span class="keywordflow">return</span> 0;
<a name="l00902"></a>00902       insn = <a class="code" href="defs_8h.html#a99aec65329508b4d449a4f881026f844">extract_unsigned_integer</a> (insn_buf, PPC_INSN_SIZE, byte_order);
<a name="l00903"></a>00903       <span class="keywordflow">if</span> (insn == 0x4e800020)
<a name="l00904"></a>00904         <span class="keywordflow">break</span>;
<a name="l00905"></a>00905       <span class="comment">/* Assume a bctr is a tail call unless it points strictly within</span>
<a name="l00906"></a>00906 <span class="comment">         this function.  */</span>
<a name="l00907"></a>00907       <span class="keywordflow">if</span> (insn == 0x4e800420)
<a name="l00908"></a>00908         {
<a name="l00909"></a>00909           <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> ctr = <a class="code" href="frame_8c.html#affa785e8937e96fd727e46a2cfec94c4">get_frame_register_unsigned</a> (curfrm,
<a name="l00910"></a>00910                                                        tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a4ea1d651e250d5879d6da1a28fd3be2f">ppc_ctr_regnum</a>);
<a name="l00911"></a>00911           <span class="keywordflow">if</span> (ctr &gt; func_start &amp;&amp; ctr &lt; func_end)
<a name="l00912"></a>00912             <span class="keywordflow">return</span> 0;
<a name="l00913"></a>00913           <span class="keywordflow">else</span>
<a name="l00914"></a>00914             <span class="keywordflow">break</span>;
<a name="l00915"></a>00915         }
<a name="l00916"></a>00916       <span class="keywordflow">if</span> (<a class="code" href="rs6000-tdep_8c.html#aee9c880859dfc884752b00d9ddc70ba4">insn_changes_sp_or_jumps</a> (insn))
<a name="l00917"></a>00917         <span class="keywordflow">return</span> 0;
<a name="l00918"></a>00918     }
<a name="l00919"></a>00919 
<a name="l00920"></a>00920   <span class="comment">/* Scan backward until adjustment to stack pointer (R1).  */</span>
<a name="l00921"></a>00921 
<a name="l00922"></a>00922   <span class="keywordflow">for</span> (scan_pc = pc - PPC_INSN_SIZE;
<a name="l00923"></a>00923        scan_pc &gt;= epilogue_start;
<a name="l00924"></a>00924        scan_pc -= <a class="code" href="ppc-tdep_8h.html#af353a6c23fa01123d835427dfc7b4b77">PPC_INSN_SIZE</a>)
<a name="l00925"></a>00925     {
<a name="l00926"></a>00926       <span class="keywordflow">if</span> (!<a class="code" href="frame_8c.html#a33ee9566c5c93f145279382fc6bf5fc3">safe_frame_unwind_memory</a> (curfrm, scan_pc, insn_buf, PPC_INSN_SIZE))
<a name="l00927"></a>00927         <span class="keywordflow">return</span> 0;
<a name="l00928"></a>00928       insn = <a class="code" href="defs_8h.html#a99aec65329508b4d449a4f881026f844">extract_unsigned_integer</a> (insn_buf, PPC_INSN_SIZE, byte_order);
<a name="l00929"></a>00929       <span class="keywordflow">if</span> (<a class="code" href="rs6000-tdep_8c.html#aee9c880859dfc884752b00d9ddc70ba4">insn_changes_sp_or_jumps</a> (insn))
<a name="l00930"></a>00930         <span class="keywordflow">return</span> 1;
<a name="l00931"></a>00931     }
<a name="l00932"></a>00932 
<a name="l00933"></a>00933   <span class="keywordflow">return</span> 0;
<a name="l00934"></a>00934 }
<a name="l00935"></a>00935 
<a name="l00936"></a>00936 <span class="comment">/* Get the ith function argument for the current function.  */</span>
<a name="l00937"></a>00937 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l00938"></a><a class="code" href="rs6000-tdep_8c.html#a7146ed2e536ffa5fd5b412582335856b">00938</a> <a class="code" href="rs6000-tdep_8c.html#a7146ed2e536ffa5fd5b412582335856b">rs6000_fetch_pointer_argument</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame, <span class="keywordtype">int</span> argi, 
<a name="l00939"></a>00939                                <span class="keyword">struct</span> <a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a>)
<a name="l00940"></a>00940 {
<a name="l00941"></a>00941   <span class="keywordflow">return</span> <a class="code" href="frame_8c.html#affa785e8937e96fd727e46a2cfec94c4">get_frame_register_unsigned</a> (frame, 3 + argi);
<a name="l00942"></a>00942 }
<a name="l00943"></a>00943 
<a name="l00944"></a>00944 <span class="comment">/* Sequence of bytes for breakpoint instruction.  */</span>
<a name="l00945"></a>00945 
<a name="l00946"></a>00946 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *
<a name="l00947"></a><a class="code" href="rs6000-tdep_8c.html#a3825508b7a74f7ce24d223a454e243df">00947</a> <a class="code" href="rs6000-tdep_8c.html#a3825508b7a74f7ce24d223a454e243df">rs6000_breakpoint_from_pc</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> *bp_addr,
<a name="l00948"></a>00948                            <span class="keywordtype">int</span> *bp_size)
<a name="l00949"></a>00949 {
<a name="l00950"></a>00950   <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> big_breakpoint[] = { 0x7d, 0x82, 0x10, 0x08 };
<a name="l00951"></a>00951   <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> little_breakpoint[] = { 0x08, 0x10, 0x82, 0x7d };
<a name="l00952"></a>00952   *bp_size = 4;
<a name="l00953"></a>00953   <span class="keywordflow">if</span> (<a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch) == BFD_ENDIAN_BIG)
<a name="l00954"></a>00954     <span class="keywordflow">return</span> big_breakpoint;
<a name="l00955"></a>00955   <span class="keywordflow">else</span>
<a name="l00956"></a>00956     <span class="keywordflow">return</span> little_breakpoint;
<a name="l00957"></a>00957 }
<a name="l00958"></a>00958 
<a name="l00959"></a>00959 <span class="comment">/* Instruction masks for displaced stepping.  */</span>
<a name="l00960"></a><a class="code" href="rs6000-tdep_8c.html#a8852d09ff7bf0078e34696918af6bb10">00960</a> <span class="preprocessor">#define BRANCH_MASK 0xfc000000</span>
<a name="l00961"></a><a class="code" href="rs6000-tdep_8c.html#a9056866e7c96d8f70258dce1956f2a39">00961</a> <span class="preprocessor"></span><span class="preprocessor">#define BP_MASK 0xFC0007FE</span>
<a name="l00962"></a><a class="code" href="rs6000-tdep_8c.html#adade1ae81b8de353a56b10bf6b76b052">00962</a> <span class="preprocessor"></span><span class="preprocessor">#define B_INSN 0x48000000</span>
<a name="l00963"></a><a class="code" href="rs6000-tdep_8c.html#ad48388d3e9236b870920885a4e6a2593">00963</a> <span class="preprocessor"></span><span class="preprocessor">#define BC_INSN 0x40000000</span>
<a name="l00964"></a><a class="code" href="rs6000-tdep_8c.html#ab998d38e5213fb84701493996e6412a1">00964</a> <span class="preprocessor"></span><span class="preprocessor">#define BXL_INSN 0x4c000000</span>
<a name="l00965"></a><a class="code" href="rs6000-tdep_8c.html#a1dfb4021e6469d826468c5ffa601a0b8">00965</a> <span class="preprocessor"></span><span class="preprocessor">#define BP_INSN 0x7C000008</span>
<a name="l00966"></a>00966 <span class="preprocessor"></span>
<a name="l00967"></a>00967 <span class="comment">/* Fix up the state of registers and memory after having single-stepped</span>
<a name="l00968"></a>00968 <span class="comment">   a displaced instruction.  */</span>
<a name="l00969"></a>00969 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00970"></a><a class="code" href="rs6000-tdep_8c.html#a93869346cb2e5393ffc3b5aa019cf248">00970</a> <a class="code" href="rs6000-tdep_8c.html#a93869346cb2e5393ffc3b5aa019cf248">ppc_displaced_step_fixup</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>,
<a name="l00971"></a>00971                           <span class="keyword">struct</span> <a class="code" href="structdisplaced__step__closure.html">displaced_step_closure</a> *closure,
<a name="l00972"></a>00972                           <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="varobj_8h.html#a43396decd62b46fa01cc6c66a84cbba1">from</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="varobj_8h.html#ae2a2635825813434f3201bf8ace439d2">to</a>,
<a name="l00973"></a>00973                           <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *regs)
<a name="l00974"></a>00974 {
<a name="l00975"></a>00975   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l00976"></a>00976   <span class="comment">/* Since we use simple_displaced_step_copy_insn, our closure is a</span>
<a name="l00977"></a>00977 <span class="comment">     copy of the instruction.  */</span>
<a name="l00978"></a>00978   <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> insn  = <a class="code" href="defs_8h.html#a99aec65329508b4d449a4f881026f844">extract_unsigned_integer</a> ((<a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *) closure,
<a name="l00979"></a>00979                                               <a class="code" href="ppc-tdep_8h.html#af353a6c23fa01123d835427dfc7b4b77">PPC_INSN_SIZE</a>, byte_order);
<a name="l00980"></a>00980   <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> opcode = 0;
<a name="l00981"></a>00981   <span class="comment">/* Offset for non PC-relative instructions.  */</span>
<a name="l00982"></a>00982   <a class="code" href="defs_8h.html#ac7647a3f71533007c9e128f3ddda1987">LONGEST</a> <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a> = <a class="code" href="ppc-tdep_8h.html#af353a6c23fa01123d835427dfc7b4b77">PPC_INSN_SIZE</a>;
<a name="l00983"></a>00983 
<a name="l00984"></a>00984   opcode = insn &amp; <a class="code" href="rs6000-tdep_8c.html#a8852d09ff7bf0078e34696918af6bb10">BRANCH_MASK</a>;
<a name="l00985"></a>00985 
<a name="l00986"></a>00986   <span class="keywordflow">if</span> (<a class="code" href="inferior_8h.html#aab9732a6e65fa8c725ca7bca0ed3c9fd">debug_displaced</a>)
<a name="l00987"></a>00987     <a class="code" href="utils_8c.html#aa624d49eae7e3e3ee9124fde6c631392">fprintf_unfiltered</a> (<a class="code" href="main_8c.html#a097b10b28c07237b554c73fbf42a8e9e">gdb_stdlog</a>,
<a name="l00988"></a>00988                         <span class="stringliteral">&quot;displaced: (ppc) fixup (%s, %s)\n&quot;</span>,
<a name="l00989"></a>00989                         <a class="code" href="utils_8c.html#ab5c76d72090f01d3848b63dda4e37d1c">paddress</a> (gdbarch, from), <a class="code" href="utils_8c.html#ab5c76d72090f01d3848b63dda4e37d1c">paddress</a> (gdbarch, to));
<a name="l00990"></a>00990 
<a name="l00991"></a>00991 
<a name="l00992"></a>00992   <span class="comment">/* Handle PC-relative branch instructions.  */</span>
<a name="l00993"></a>00993   <span class="keywordflow">if</span> (opcode == <a class="code" href="rs6000-tdep_8c.html#adade1ae81b8de353a56b10bf6b76b052">B_INSN</a> || opcode == <a class="code" href="rs6000-tdep_8c.html#ad48388d3e9236b870920885a4e6a2593">BC_INSN</a> || opcode == <a class="code" href="rs6000-tdep_8c.html#ab998d38e5213fb84701493996e6412a1">BXL_INSN</a>)
<a name="l00994"></a>00994     {
<a name="l00995"></a>00995       <a class="code" href="defs_8h.html#a4df4af8771b1016a24976757026f4984">ULONGEST</a> current_pc;
<a name="l00996"></a>00996 
<a name="l00997"></a>00997       <span class="comment">/* Read the current PC value after the instruction has been executed</span>
<a name="l00998"></a>00998 <span class="comment">         in a displaced location.  Calculate the offset to be applied to the</span>
<a name="l00999"></a>00999 <span class="comment">         original PC value before the displaced stepping.  */</span>
<a name="l01000"></a>01000       <a class="code" href="regcache_8c.html#a959a077d769de1641d4f9754cc7b4a1f">regcache_cooked_read_unsigned</a> (regs, <a class="code" href="gdbarch_8c.html#a07a162ebafea1269eb8f341db44e53e7">gdbarch_pc_regnum</a> (gdbarch),
<a name="l01001"></a>01001                                       &amp;current_pc);
<a name="l01002"></a>01002       offset = current_pc - <a class="code" href="varobj_8h.html#ae2a2635825813434f3201bf8ace439d2">to</a>;
<a name="l01003"></a>01003 
<a name="l01004"></a>01004       <span class="keywordflow">if</span> (opcode != <a class="code" href="rs6000-tdep_8c.html#ab998d38e5213fb84701493996e6412a1">BXL_INSN</a>)
<a name="l01005"></a>01005         {
<a name="l01006"></a>01006           <span class="comment">/* Check for AA bit indicating whether this is an absolute</span>
<a name="l01007"></a>01007 <span class="comment">             addressing or PC-relative (1: absolute, 0: relative).  */</span>
<a name="l01008"></a>01008           <span class="keywordflow">if</span> (!(insn &amp; 0x2))
<a name="l01009"></a>01009             {
<a name="l01010"></a>01010               <span class="comment">/* PC-relative addressing is being used in the branch.  */</span>
<a name="l01011"></a>01011               <span class="keywordflow">if</span> (<a class="code" href="inferior_8h.html#aab9732a6e65fa8c725ca7bca0ed3c9fd">debug_displaced</a>)
<a name="l01012"></a>01012                 <a class="code" href="utils_8c.html#aa624d49eae7e3e3ee9124fde6c631392">fprintf_unfiltered</a>
<a name="l01013"></a>01013                   (<a class="code" href="main_8c.html#a097b10b28c07237b554c73fbf42a8e9e">gdb_stdlog</a>,
<a name="l01014"></a>01014                    <span class="stringliteral">&quot;displaced: (ppc) branch instruction: %s\n&quot;</span>
<a name="l01015"></a>01015                    <span class="stringliteral">&quot;displaced: (ppc) adjusted PC from %s to %s\n&quot;</span>,
<a name="l01016"></a>01016                    <a class="code" href="utils_8c.html#ab5c76d72090f01d3848b63dda4e37d1c">paddress</a> (gdbarch, insn), <a class="code" href="utils_8c.html#ab5c76d72090f01d3848b63dda4e37d1c">paddress</a> (gdbarch, current_pc),
<a name="l01017"></a>01017                    <a class="code" href="utils_8c.html#ab5c76d72090f01d3848b63dda4e37d1c">paddress</a> (gdbarch, from + offset));
<a name="l01018"></a>01018 
<a name="l01019"></a>01019               <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regs,
<a name="l01020"></a>01020                                               <a class="code" href="gdbarch_8c.html#a07a162ebafea1269eb8f341db44e53e7">gdbarch_pc_regnum</a> (gdbarch),
<a name="l01021"></a>01021                                               from + offset);
<a name="l01022"></a>01022             }
<a name="l01023"></a>01023         }
<a name="l01024"></a>01024       <span class="keywordflow">else</span>
<a name="l01025"></a>01025         {
<a name="l01026"></a>01026           <span class="comment">/* If we&#39;re here, it means we have a branch to LR or CTR.  If the</span>
<a name="l01027"></a>01027 <span class="comment">             branch was taken, the offset is probably greater than 4 (the next</span>
<a name="l01028"></a>01028 <span class="comment">             instruction), so it&#39;s safe to assume that an offset of 4 means we</span>
<a name="l01029"></a>01029 <span class="comment">             did not take the branch.  */</span>
<a name="l01030"></a>01030           <span class="keywordflow">if</span> (offset == <a class="code" href="ppc-tdep_8h.html#af353a6c23fa01123d835427dfc7b4b77">PPC_INSN_SIZE</a>)
<a name="l01031"></a>01031             <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regs, <a class="code" href="gdbarch_8c.html#a07a162ebafea1269eb8f341db44e53e7">gdbarch_pc_regnum</a> (gdbarch),
<a name="l01032"></a>01032                                             from + <a class="code" href="ppc-tdep_8h.html#af353a6c23fa01123d835427dfc7b4b77">PPC_INSN_SIZE</a>);
<a name="l01033"></a>01033         }
<a name="l01034"></a>01034 
<a name="l01035"></a>01035       <span class="comment">/* Check for LK bit indicating whether we should set the link</span>
<a name="l01036"></a>01036 <span class="comment">         register to point to the next instruction</span>
<a name="l01037"></a>01037 <span class="comment">         (1: Set, 0: Don&#39;t set).  */</span>
<a name="l01038"></a>01038       <span class="keywordflow">if</span> (insn &amp; 0x1)
<a name="l01039"></a>01039         {
<a name="l01040"></a>01040           <span class="comment">/* Link register needs to be set to the next instruction&#39;s PC.  */</span>
<a name="l01041"></a>01041           <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regs,
<a name="l01042"></a>01042                                           <a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> (gdbarch)-&gt;ppc_lr_regnum,
<a name="l01043"></a>01043                                           from + <a class="code" href="ppc-tdep_8h.html#af353a6c23fa01123d835427dfc7b4b77">PPC_INSN_SIZE</a>);
<a name="l01044"></a>01044           <span class="keywordflow">if</span> (<a class="code" href="inferior_8h.html#aab9732a6e65fa8c725ca7bca0ed3c9fd">debug_displaced</a>)
<a name="l01045"></a>01045                 <a class="code" href="utils_8c.html#aa624d49eae7e3e3ee9124fde6c631392">fprintf_unfiltered</a> (<a class="code" href="main_8c.html#a097b10b28c07237b554c73fbf42a8e9e">gdb_stdlog</a>,
<a name="l01046"></a>01046                                     <span class="stringliteral">&quot;displaced: (ppc) adjusted LR to %s\n&quot;</span>,
<a name="l01047"></a>01047                                     <a class="code" href="utils_8c.html#ab5c76d72090f01d3848b63dda4e37d1c">paddress</a> (gdbarch, from + <a class="code" href="ppc-tdep_8h.html#af353a6c23fa01123d835427dfc7b4b77">PPC_INSN_SIZE</a>));
<a name="l01048"></a>01048 
<a name="l01049"></a>01049         }
<a name="l01050"></a>01050     }
<a name="l01051"></a>01051   <span class="comment">/* Check for breakpoints in the inferior.  If we&#39;ve found one, place the PC</span>
<a name="l01052"></a>01052 <span class="comment">     right at the breakpoint instruction.  */</span>
<a name="l01053"></a>01053   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((insn &amp; <a class="code" href="rs6000-tdep_8c.html#a9056866e7c96d8f70258dce1956f2a39">BP_MASK</a>) == <a class="code" href="rs6000-tdep_8c.html#a1dfb4021e6469d826468c5ffa601a0b8">BP_INSN</a>)
<a name="l01054"></a>01054     <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regs, <a class="code" href="gdbarch_8c.html#a07a162ebafea1269eb8f341db44e53e7">gdbarch_pc_regnum</a> (gdbarch), from);
<a name="l01055"></a>01055   <span class="keywordflow">else</span>
<a name="l01056"></a>01056   <span class="comment">/* Handle any other instructions that do not fit in the categories above.  */</span>
<a name="l01057"></a>01057     <a class="code" href="regcache_8c.html#ae5fb22bfd07bc89a855768ef6f910745">regcache_cooked_write_unsigned</a> (regs, <a class="code" href="gdbarch_8c.html#a07a162ebafea1269eb8f341db44e53e7">gdbarch_pc_regnum</a> (gdbarch),
<a name="l01058"></a>01058                                     from + offset);
<a name="l01059"></a>01059 }
<a name="l01060"></a>01060 
<a name="l01061"></a>01061 <span class="comment">/* Always use hardware single-stepping to execute the</span>
<a name="l01062"></a>01062 <span class="comment">   displaced instruction.  */</span>
<a name="l01063"></a>01063 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01064"></a><a class="code" href="rs6000-tdep_8c.html#acc4a73db1e877baf435f6f2d466ecef0">01064</a> <a class="code" href="rs6000-tdep_8c.html#acc4a73db1e877baf435f6f2d466ecef0">ppc_displaced_step_hw_singlestep</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>,
<a name="l01065"></a>01065                                   <span class="keyword">struct</span> <a class="code" href="structdisplaced__step__closure.html">displaced_step_closure</a> *closure)
<a name="l01066"></a>01066 {
<a name="l01067"></a>01067   <span class="keywordflow">return</span> 1;
<a name="l01068"></a>01068 }
<a name="l01069"></a>01069 
<a name="l01070"></a>01070 <span class="comment">/* Instruction masks used during single-stepping of atomic sequences.  */</span>
<a name="l01071"></a><a class="code" href="rs6000-tdep_8c.html#aed6234ea7330b25796635b507a9e0653">01071</a> <span class="preprocessor">#define LWARX_MASK 0xfc0007fe</span>
<a name="l01072"></a><a class="code" href="rs6000-tdep_8c.html#a893200e52b1db26450f5faa8b887b52d">01072</a> <span class="preprocessor"></span><span class="preprocessor">#define LWARX_INSTRUCTION 0x7c000028</span>
<a name="l01073"></a><a class="code" href="rs6000-tdep_8c.html#a36bbd46dfe77e2cb4f933db0536e4a5f">01073</a> <span class="preprocessor"></span><span class="preprocessor">#define LDARX_INSTRUCTION 0x7c0000A8</span>
<a name="l01074"></a><a class="code" href="rs6000-tdep_8c.html#ace7ccfecaa8ca74ce6795f9a839fcd60">01074</a> <span class="preprocessor"></span><span class="preprocessor">#define STWCX_MASK 0xfc0007ff</span>
<a name="l01075"></a><a class="code" href="rs6000-tdep_8c.html#ab4b8055875d673eb3ac9ba35088534b6">01075</a> <span class="preprocessor"></span><span class="preprocessor">#define STWCX_INSTRUCTION 0x7c00012d</span>
<a name="l01076"></a><a class="code" href="rs6000-tdep_8c.html#a5e87f7594de509d35ad3402ee110deab">01076</a> <span class="preprocessor"></span><span class="preprocessor">#define STDCX_INSTRUCTION 0x7c0001ad</span>
<a name="l01077"></a>01077 <span class="preprocessor"></span>
<a name="l01078"></a>01078 <span class="comment">/* Checks for an atomic sequence of instructions beginning with a LWARX/LDARX</span>
<a name="l01079"></a>01079 <span class="comment">   instruction and ending with a STWCX/STDCX instruction.  If such a sequence</span>
<a name="l01080"></a>01080 <span class="comment">   is found, attempt to step through it.  A breakpoint is placed at the end of </span>
<a name="l01081"></a>01081 <span class="comment">   the sequence.  */</span>
<a name="l01082"></a>01082 
<a name="l01083"></a>01083 <span class="keywordtype">int</span> 
<a name="l01084"></a><a class="code" href="rs6000-tdep_8c.html#a0eab653974a2bf80aa8fad3bcde302fb">01084</a> <a class="code" href="ppc-tdep_8h.html#a0eab653974a2bf80aa8fad3bcde302fb">ppc_deal_with_atomic_sequence</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame)
<a name="l01085"></a>01085 {
<a name="l01086"></a>01086   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (frame);
<a name="l01087"></a>01087   <span class="keyword">struct </span><a class="code" href="structaddress__space.html">address_space</a> *aspace = <a class="code" href="frame_8c.html#abdf9824b7a32ae3a71b8de560a16bfe8">get_frame_address_space</a> (frame);
<a name="l01088"></a>01088   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l01089"></a>01089   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc = <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (frame);
<a name="l01090"></a>01090   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> breaks[2] = {-1, -1};
<a name="l01091"></a>01091   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> loc = pc;
<a name="l01092"></a>01092   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> closing_insn; <span class="comment">/* Instruction that closes the atomic sequence.  */</span>
<a name="l01093"></a>01093   <span class="keywordtype">int</span> insn = <a class="code" href="corefile_8c.html#a7097ab90f56ed7bcceb190bab139621b">read_memory_integer</a> (loc, <a class="code" href="ppc-tdep_8h.html#af353a6c23fa01123d835427dfc7b4b77">PPC_INSN_SIZE</a>, byte_order);
<a name="l01094"></a>01094   <span class="keywordtype">int</span> insn_count;
<a name="l01095"></a>01095   <span class="keywordtype">int</span> index;
<a name="l01096"></a>01096   <span class="keywordtype">int</span> last_breakpoint = 0; <span class="comment">/* Defaults to 0 (no breakpoints placed).  */</span>  
<a name="l01097"></a>01097   <span class="keyword">const</span> <span class="keywordtype">int</span> atomic_sequence_length = 16; <span class="comment">/* Instruction sequence length.  */</span>
<a name="l01098"></a>01098   <span class="keywordtype">int</span> opcode; <span class="comment">/* Branch instruction&#39;s OPcode.  */</span>
<a name="l01099"></a>01099   <span class="keywordtype">int</span> bc_insn_count = 0; <span class="comment">/* Conditional branch instruction count.  */</span>
<a name="l01100"></a>01100 
<a name="l01101"></a>01101   <span class="comment">/* Assume all atomic sequences start with a lwarx/ldarx instruction.  */</span>
<a name="l01102"></a>01102   <span class="keywordflow">if</span> ((insn &amp; <a class="code" href="rs6000-tdep_8c.html#aed6234ea7330b25796635b507a9e0653">LWARX_MASK</a>) != <a class="code" href="rs6000-tdep_8c.html#a893200e52b1db26450f5faa8b887b52d">LWARX_INSTRUCTION</a>
<a name="l01103"></a>01103       &amp;&amp; (insn &amp; LWARX_MASK) != <a class="code" href="rs6000-tdep_8c.html#a36bbd46dfe77e2cb4f933db0536e4a5f">LDARX_INSTRUCTION</a>)
<a name="l01104"></a>01104     <span class="keywordflow">return</span> 0;
<a name="l01105"></a>01105 
<a name="l01106"></a>01106   <span class="comment">/* Assume that no atomic sequence is longer than &quot;atomic_sequence_length&quot; </span>
<a name="l01107"></a>01107 <span class="comment">     instructions.  */</span>
<a name="l01108"></a>01108   <span class="keywordflow">for</span> (insn_count = 0; insn_count &lt; atomic_sequence_length; ++insn_count)
<a name="l01109"></a>01109     {
<a name="l01110"></a>01110       loc += <a class="code" href="ppc-tdep_8h.html#af353a6c23fa01123d835427dfc7b4b77">PPC_INSN_SIZE</a>;
<a name="l01111"></a>01111       insn = <a class="code" href="corefile_8c.html#a7097ab90f56ed7bcceb190bab139621b">read_memory_integer</a> (loc, <a class="code" href="ppc-tdep_8h.html#af353a6c23fa01123d835427dfc7b4b77">PPC_INSN_SIZE</a>, byte_order);
<a name="l01112"></a>01112 
<a name="l01113"></a>01113       <span class="comment">/* Assume that there is at most one conditional branch in the atomic</span>
<a name="l01114"></a>01114 <span class="comment">         sequence.  If a conditional branch is found, put a breakpoint in </span>
<a name="l01115"></a>01115 <span class="comment">         its destination address.  */</span>
<a name="l01116"></a>01116       <span class="keywordflow">if</span> ((insn &amp; <a class="code" href="rs6000-tdep_8c.html#a8852d09ff7bf0078e34696918af6bb10">BRANCH_MASK</a>) == <a class="code" href="rs6000-tdep_8c.html#ad48388d3e9236b870920885a4e6a2593">BC_INSN</a>)
<a name="l01117"></a>01117         {
<a name="l01118"></a>01118           <span class="keywordtype">int</span> immediate = ((insn &amp; 0xfffc) ^ 0x8000) - 0x8000;
<a name="l01119"></a>01119           <span class="keywordtype">int</span> absolute = insn &amp; 2;
<a name="l01120"></a>01120 
<a name="l01121"></a>01121           <span class="keywordflow">if</span> (bc_insn_count &gt;= 1)
<a name="l01122"></a>01122             <span class="keywordflow">return</span> 0; <span class="comment">/* More than one conditional branch found, fallback </span>
<a name="l01123"></a>01123 <span class="comment">                         to the standard single-step code.  */</span>
<a name="l01124"></a>01124  
<a name="l01125"></a>01125           <span class="keywordflow">if</span> (absolute)
<a name="l01126"></a>01126             breaks[1] = immediate;
<a name="l01127"></a>01127           <span class="keywordflow">else</span>
<a name="l01128"></a>01128             breaks[1] = loc + immediate;
<a name="l01129"></a>01129 
<a name="l01130"></a>01130           bc_insn_count++;
<a name="l01131"></a>01131           last_breakpoint++;
<a name="l01132"></a>01132         }
<a name="l01133"></a>01133 
<a name="l01134"></a>01134       <span class="keywordflow">if</span> ((insn &amp; <a class="code" href="rs6000-tdep_8c.html#ace7ccfecaa8ca74ce6795f9a839fcd60">STWCX_MASK</a>) == <a class="code" href="rs6000-tdep_8c.html#ab4b8055875d673eb3ac9ba35088534b6">STWCX_INSTRUCTION</a>
<a name="l01135"></a>01135           || (insn &amp; <a class="code" href="rs6000-tdep_8c.html#ace7ccfecaa8ca74ce6795f9a839fcd60">STWCX_MASK</a>) == <a class="code" href="rs6000-tdep_8c.html#a5e87f7594de509d35ad3402ee110deab">STDCX_INSTRUCTION</a>)
<a name="l01136"></a>01136         <span class="keywordflow">break</span>;
<a name="l01137"></a>01137     }
<a name="l01138"></a>01138 
<a name="l01139"></a>01139   <span class="comment">/* Assume that the atomic sequence ends with a stwcx/stdcx instruction.  */</span>
<a name="l01140"></a>01140   <span class="keywordflow">if</span> ((insn &amp; <a class="code" href="rs6000-tdep_8c.html#ace7ccfecaa8ca74ce6795f9a839fcd60">STWCX_MASK</a>) != <a class="code" href="rs6000-tdep_8c.html#ab4b8055875d673eb3ac9ba35088534b6">STWCX_INSTRUCTION</a>
<a name="l01141"></a>01141       &amp;&amp; (insn &amp; <a class="code" href="rs6000-tdep_8c.html#ace7ccfecaa8ca74ce6795f9a839fcd60">STWCX_MASK</a>) != <a class="code" href="rs6000-tdep_8c.html#a5e87f7594de509d35ad3402ee110deab">STDCX_INSTRUCTION</a>)
<a name="l01142"></a>01142     <span class="keywordflow">return</span> 0;
<a name="l01143"></a>01143 
<a name="l01144"></a>01144   closing_insn = loc;
<a name="l01145"></a>01145   loc += <a class="code" href="ppc-tdep_8h.html#af353a6c23fa01123d835427dfc7b4b77">PPC_INSN_SIZE</a>;
<a name="l01146"></a>01146   insn = <a class="code" href="corefile_8c.html#a7097ab90f56ed7bcceb190bab139621b">read_memory_integer</a> (loc, <a class="code" href="ppc-tdep_8h.html#af353a6c23fa01123d835427dfc7b4b77">PPC_INSN_SIZE</a>, byte_order);
<a name="l01147"></a>01147 
<a name="l01148"></a>01148   <span class="comment">/* Insert a breakpoint right after the end of the atomic sequence.  */</span>
<a name="l01149"></a>01149   breaks[0] = loc;
<a name="l01150"></a>01150 
<a name="l01151"></a>01151   <span class="comment">/* Check for duplicated breakpoints.  Check also for a breakpoint</span>
<a name="l01152"></a>01152 <span class="comment">     placed (branch instruction&#39;s destination) anywhere in sequence.  */</span>
<a name="l01153"></a>01153   <span class="keywordflow">if</span> (last_breakpoint
<a name="l01154"></a>01154       &amp;&amp; (breaks[1] == breaks[0]
<a name="l01155"></a>01155           || (breaks[1] &gt;= pc &amp;&amp; breaks[1] &lt;= closing_insn)))
<a name="l01156"></a>01156     last_breakpoint = 0;
<a name="l01157"></a>01157 
<a name="l01158"></a>01158   <span class="comment">/* Effectively inserts the breakpoints.  */</span>
<a name="l01159"></a>01159   <span class="keywordflow">for</span> (index = 0; index &lt;= last_breakpoint; index++)
<a name="l01160"></a>01160     <a class="code" href="breakpoint_8c.html#a8decd828f1a0042e3e40a1ed86940140">insert_single_step_breakpoint</a> (gdbarch, aspace, breaks[index]);
<a name="l01161"></a>01161 
<a name="l01162"></a>01162   <span class="keywordflow">return</span> 1;
<a name="l01163"></a>01163 }
<a name="l01164"></a>01164 
<a name="l01165"></a>01165 
<a name="l01166"></a><a class="code" href="rs6000-tdep_8c.html#a5dec9f2118293c49911bbb987b9f9d82">01166</a> <span class="preprocessor">#define SIGNED_SHORT(x)                                                 \</span>
<a name="l01167"></a>01167 <span class="preprocessor">  ((sizeof (short) == 2)                                                \</span>
<a name="l01168"></a>01168 <span class="preprocessor">   ? ((int)(short)(x))                                                  \</span>
<a name="l01169"></a>01169 <span class="preprocessor">   : ((int)((((x) &amp; 0xffff) ^ 0x8000) - 0x8000)))</span>
<a name="l01170"></a>01170 <span class="preprocessor"></span>
<a name="l01171"></a><a class="code" href="rs6000-tdep_8c.html#a972a641280269b03b6a213a9a919130e">01171</a> <span class="preprocessor">#define GET_SRC_REG(x) (((x) &gt;&gt; 21) &amp; 0x1f)</span>
<a name="l01172"></a>01172 <span class="preprocessor"></span>
<a name="l01173"></a>01173 <span class="comment">/* Limit the number of skipped non-prologue instructions, as the examining</span>
<a name="l01174"></a>01174 <span class="comment">   of the prologue is expensive.  */</span>
<a name="l01175"></a><a class="code" href="rs6000-tdep_8c.html#a94661c16b868b6be11fbaf3e5d6f0da5">01175</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="rs6000-tdep_8c.html#a94661c16b868b6be11fbaf3e5d6f0da5">max_skip_non_prologue_insns</a> = 10;
<a name="l01176"></a>01176 
<a name="l01177"></a>01177 <span class="comment">/* Return nonzero if the given instruction OP can be part of the prologue</span>
<a name="l01178"></a>01178 <span class="comment">   of a function and saves a parameter on the stack.  FRAMEP should be</span>
<a name="l01179"></a>01179 <span class="comment">   set if one of the previous instructions in the function has set the</span>
<a name="l01180"></a>01180 <span class="comment">   Frame Pointer.  */</span>
<a name="l01181"></a>01181 
<a name="l01182"></a>01182 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01183"></a><a class="code" href="rs6000-tdep_8c.html#a08693b73f2b9c54d6a03f08dfb457c12">01183</a> <a class="code" href="rs6000-tdep_8c.html#a08693b73f2b9c54d6a03f08dfb457c12">store_param_on_stack_p</a> (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> op, <span class="keywordtype">int</span> framep, <span class="keywordtype">int</span> *r0_contains_arg)
<a name="l01184"></a>01184 {
<a name="l01185"></a>01185   <span class="comment">/* Move parameters from argument registers to temporary register.  */</span>
<a name="l01186"></a>01186   <span class="keywordflow">if</span> ((op &amp; 0xfc0007fe) == 0x7c000378)         <span class="comment">/* mr(.)  Rx,Ry */</span>
<a name="l01187"></a>01187     {
<a name="l01188"></a>01188       <span class="comment">/* Rx must be scratch register r0.  */</span>
<a name="l01189"></a>01189       <span class="keyword">const</span> <span class="keywordtype">int</span> rx_regno = (op &gt;&gt; 16) &amp; 31;
<a name="l01190"></a>01190       <span class="comment">/* Ry: Only r3 - r10 are used for parameter passing.  */</span>
<a name="l01191"></a>01191       <span class="keyword">const</span> <span class="keywordtype">int</span> ry_regno = <a class="code" href="rs6000-tdep_8c.html#a972a641280269b03b6a213a9a919130e">GET_SRC_REG</a> (op);
<a name="l01192"></a>01192 
<a name="l01193"></a>01193       <span class="keywordflow">if</span> (rx_regno == 0 &amp;&amp; ry_regno &gt;= 3 &amp;&amp; ry_regno &lt;= 10)
<a name="l01194"></a>01194         {
<a name="l01195"></a>01195           *r0_contains_arg = 1;
<a name="l01196"></a>01196           <span class="keywordflow">return</span> 1;
<a name="l01197"></a>01197         }
<a name="l01198"></a>01198       <span class="keywordflow">else</span>
<a name="l01199"></a>01199         <span class="keywordflow">return</span> 0;
<a name="l01200"></a>01200     }
<a name="l01201"></a>01201 
<a name="l01202"></a>01202   <span class="comment">/* Save a General Purpose Register on stack.  */</span>
<a name="l01203"></a>01203 
<a name="l01204"></a>01204   <span class="keywordflow">if</span> ((op &amp; 0xfc1f0003) == 0xf8010000 ||       <span class="comment">/* std  Rx,NUM(r1) */</span>
<a name="l01205"></a>01205       (op &amp; 0xfc1f0000) == 0xd8010000)         <span class="comment">/* stfd Rx,NUM(r1) */</span>
<a name="l01206"></a>01206     {
<a name="l01207"></a>01207       <span class="comment">/* Rx: Only r3 - r10 are used for parameter passing.  */</span>
<a name="l01208"></a>01208       <span class="keyword">const</span> <span class="keywordtype">int</span> rx_regno = <a class="code" href="rs6000-tdep_8c.html#a972a641280269b03b6a213a9a919130e">GET_SRC_REG</a> (op);
<a name="l01209"></a>01209 
<a name="l01210"></a>01210       <span class="keywordflow">return</span> (rx_regno &gt;= 3 &amp;&amp; rx_regno &lt;= 10);
<a name="l01211"></a>01211     }
<a name="l01212"></a>01212            
<a name="l01213"></a>01213   <span class="comment">/* Save a General Purpose Register on stack via the Frame Pointer.  */</span>
<a name="l01214"></a>01214 
<a name="l01215"></a>01215   <span class="keywordflow">if</span> (framep &amp;&amp;
<a name="l01216"></a>01216       ((op &amp; 0xfc1f0000) == 0x901f0000 ||     <span class="comment">/* st rx,NUM(r31) */</span>
<a name="l01217"></a>01217        (op &amp; 0xfc1f0000) == 0x981f0000 ||     <span class="comment">/* stb Rx,NUM(r31) */</span>
<a name="l01218"></a>01218        (op &amp; 0xfc1f0000) == 0xd81f0000))      <span class="comment">/* stfd Rx,NUM(r31) */</span>
<a name="l01219"></a>01219     {
<a name="l01220"></a>01220       <span class="comment">/* Rx: Usually, only r3 - r10 are used for parameter passing.</span>
<a name="l01221"></a>01221 <span class="comment">         However, the compiler sometimes uses r0 to hold an argument.  */</span>
<a name="l01222"></a>01222       <span class="keyword">const</span> <span class="keywordtype">int</span> rx_regno = <a class="code" href="rs6000-tdep_8c.html#a972a641280269b03b6a213a9a919130e">GET_SRC_REG</a> (op);
<a name="l01223"></a>01223 
<a name="l01224"></a>01224       <span class="keywordflow">return</span> ((rx_regno &gt;= 3 &amp;&amp; rx_regno &lt;= 10)
<a name="l01225"></a>01225               || (rx_regno == 0 &amp;&amp; *r0_contains_arg));
<a name="l01226"></a>01226     }
<a name="l01227"></a>01227 
<a name="l01228"></a>01228   <span class="keywordflow">if</span> ((op &amp; 0xfc1f0000) == 0xfc010000)         <span class="comment">/* frsp, fp?,NUM(r1) */</span>
<a name="l01229"></a>01229     {
<a name="l01230"></a>01230       <span class="comment">/* Only f2 - f8 are used for parameter passing.  */</span>
<a name="l01231"></a>01231       <span class="keyword">const</span> <span class="keywordtype">int</span> src_regno = <a class="code" href="rs6000-tdep_8c.html#a972a641280269b03b6a213a9a919130e">GET_SRC_REG</a> (op);
<a name="l01232"></a>01232 
<a name="l01233"></a>01233       <span class="keywordflow">return</span> (src_regno &gt;= 2 &amp;&amp; src_regno &lt;= 8);
<a name="l01234"></a>01234     }
<a name="l01235"></a>01235 
<a name="l01236"></a>01236   <span class="keywordflow">if</span> (framep &amp;&amp; ((op &amp; 0xfc1f0000) == 0xfc1f0000))  <span class="comment">/* frsp, fp?,NUM(r31) */</span>
<a name="l01237"></a>01237     {
<a name="l01238"></a>01238       <span class="comment">/* Only f2 - f8 are used for parameter passing.  */</span>
<a name="l01239"></a>01239       <span class="keyword">const</span> <span class="keywordtype">int</span> src_regno = <a class="code" href="rs6000-tdep_8c.html#a972a641280269b03b6a213a9a919130e">GET_SRC_REG</a> (op);
<a name="l01240"></a>01240 
<a name="l01241"></a>01241       <span class="keywordflow">return</span> (src_regno &gt;= 2 &amp;&amp; src_regno &lt;= 8);
<a name="l01242"></a>01242     }
<a name="l01243"></a>01243 
<a name="l01244"></a>01244   <span class="comment">/* Not an insn that saves a parameter on stack.  */</span>
<a name="l01245"></a>01245   <span class="keywordflow">return</span> 0;
<a name="l01246"></a>01246 }
<a name="l01247"></a>01247 
<a name="l01248"></a>01248 <span class="comment">/* Assuming that INSN is a &quot;bl&quot; instruction located at PC, return</span>
<a name="l01249"></a>01249 <span class="comment">   nonzero if the destination of the branch is a &quot;blrl&quot; instruction.</span>
<a name="l01250"></a>01250 <span class="comment">   </span>
<a name="l01251"></a>01251 <span class="comment">   This sequence is sometimes found in certain function prologues.</span>
<a name="l01252"></a>01252 <span class="comment">   It allows the function to load the LR register with a value that</span>
<a name="l01253"></a>01253 <span class="comment">   they can use to access PIC data using PC-relative offsets.  */</span>
<a name="l01254"></a>01254 
<a name="l01255"></a>01255 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01256"></a><a class="code" href="rs6000-tdep_8c.html#a79399e175dba564253dca28d31adec72">01256</a> <a class="code" href="rs6000-tdep_8c.html#a79399e175dba564253dca28d31adec72">bl_to_blrl_insn_p</a> (<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc, <span class="keywordtype">int</span> insn, <span class="keyword">enum</span> bfd_endian byte_order)
<a name="l01257"></a>01257 {
<a name="l01258"></a>01258   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> dest;
<a name="l01259"></a>01259   <span class="keywordtype">int</span> immediate;
<a name="l01260"></a>01260   <span class="keywordtype">int</span> absolute;
<a name="l01261"></a>01261   <span class="keywordtype">int</span> dest_insn;
<a name="l01262"></a>01262 
<a name="l01263"></a>01263   absolute = (<a class="code" href="command_8h.html#a74f207b5aa4ba51c3a2ad59b219a423b">int</a>) ((insn &gt;&gt; 1) &amp; 1);
<a name="l01264"></a>01264   immediate = ((insn &amp; ~3) &lt;&lt; 6) &gt;&gt; 6;
<a name="l01265"></a>01265   <span class="keywordflow">if</span> (absolute)
<a name="l01266"></a>01266     dest = immediate;
<a name="l01267"></a>01267   <span class="keywordflow">else</span>
<a name="l01268"></a>01268     dest = pc + immediate;
<a name="l01269"></a>01269 
<a name="l01270"></a>01270   dest_insn = <a class="code" href="corefile_8c.html#a7097ab90f56ed7bcceb190bab139621b">read_memory_integer</a> (dest, 4, byte_order);
<a name="l01271"></a>01271   <span class="keywordflow">if</span> ((dest_insn &amp; 0xfc00ffff) == 0x4c000021) <span class="comment">/* blrl */</span>
<a name="l01272"></a>01272     <span class="keywordflow">return</span> 1;
<a name="l01273"></a>01273 
<a name="l01274"></a>01274   <span class="keywordflow">return</span> 0;
<a name="l01275"></a>01275 }
<a name="l01276"></a>01276 
<a name="l01277"></a>01277 <span class="comment">/* Masks for decoding a branch-and-link (bl) instruction.</span>
<a name="l01278"></a>01278 <span class="comment"></span>
<a name="l01279"></a>01279 <span class="comment">   BL_MASK and BL_INSTRUCTION are used in combination with each other.</span>
<a name="l01280"></a>01280 <span class="comment">   The former is anded with the opcode in question; if the result of</span>
<a name="l01281"></a>01281 <span class="comment">   this masking operation is equal to BL_INSTRUCTION, then the opcode in</span>
<a name="l01282"></a>01282 <span class="comment">   question is a ``bl&#39;&#39; instruction.</span>
<a name="l01283"></a>01283 <span class="comment">   </span>
<a name="l01284"></a>01284 <span class="comment">   BL_DISPLACMENT_MASK is anded with the opcode in order to extract</span>
<a name="l01285"></a>01285 <span class="comment">   the branch displacement.  */</span>
<a name="l01286"></a>01286 
<a name="l01287"></a><a class="code" href="rs6000-tdep_8c.html#a516d500171458b4221584a986fd7eb2d">01287</a> <span class="preprocessor">#define BL_MASK 0xfc000001</span>
<a name="l01288"></a><a class="code" href="rs6000-tdep_8c.html#a2756ee79e8705fef89694fb6d8705a14">01288</a> <span class="preprocessor"></span><span class="preprocessor">#define BL_INSTRUCTION 0x48000001</span>
<a name="l01289"></a><a class="code" href="rs6000-tdep_8c.html#a7e19e942e94b84f6f8da743255b73fa5">01289</a> <span class="preprocessor"></span><span class="preprocessor">#define BL_DISPLACEMENT_MASK 0x03fffffc</span>
<a name="l01290"></a>01290 <span class="preprocessor"></span>
<a name="l01291"></a>01291 <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>
<a name="l01292"></a><a class="code" href="rs6000-tdep_8c.html#a8120d33d1a24b46aead1cbe69b3a8a3b">01292</a> <a class="code" href="rs6000-tdep_8c.html#a8120d33d1a24b46aead1cbe69b3a8a3b">rs6000_fetch_instruction</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keyword">const</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc)
<a name="l01293"></a>01293 {
<a name="l01294"></a>01294   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l01295"></a>01295   <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> buf[4];
<a name="l01296"></a>01296   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> op;
<a name="l01297"></a>01297 
<a name="l01298"></a>01298   <span class="comment">/* Fetch the instruction and convert it to an integer.  */</span>
<a name="l01299"></a>01299   <span class="keywordflow">if</span> (<a class="code" href="target_8c.html#ac579515fbccfb9e6b1a45766a71c1d4f">target_read_memory</a> (pc, buf, 4))
<a name="l01300"></a>01300     <span class="keywordflow">return</span> 0;
<a name="l01301"></a>01301   op = <a class="code" href="defs_8h.html#a99aec65329508b4d449a4f881026f844">extract_unsigned_integer</a> (buf, 4, byte_order);
<a name="l01302"></a>01302 
<a name="l01303"></a>01303   <span class="keywordflow">return</span> op;
<a name="l01304"></a>01304 }
<a name="l01305"></a>01305 
<a name="l01306"></a>01306 <span class="comment">/* GCC generates several well-known sequences of instructions at the begining</span>
<a name="l01307"></a>01307 <span class="comment">   of each function prologue when compiling with -fstack-check.  If one of</span>
<a name="l01308"></a>01308 <span class="comment">   such sequences starts at START_PC, then return the address of the</span>
<a name="l01309"></a>01309 <span class="comment">   instruction immediately past this sequence.  Otherwise, return START_PC.  */</span>
<a name="l01310"></a>01310    
<a name="l01311"></a>01311 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l01312"></a><a class="code" href="rs6000-tdep_8c.html#aafe2dc2111d62c1804324c642e388564">01312</a> <a class="code" href="rs6000-tdep_8c.html#aafe2dc2111d62c1804324c642e388564">rs6000_skip_stack_check</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keyword">const</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> start_pc)
<a name="l01313"></a>01313 {
<a name="l01314"></a>01314   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc = start_pc;
<a name="l01315"></a>01315   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> op = <a class="code" href="rs6000-tdep_8c.html#a8120d33d1a24b46aead1cbe69b3a8a3b">rs6000_fetch_instruction</a> (gdbarch, pc);
<a name="l01316"></a>01316 
<a name="l01317"></a>01317   <span class="comment">/* First possible sequence: A small number of probes.</span>
<a name="l01318"></a>01318 <span class="comment">         stw 0, -&lt;some immediate&gt;(1)</span>
<a name="l01319"></a>01319 <span class="comment">         [repeat this instruction any (small) number of times].  */</span>
<a name="l01320"></a>01320   
<a name="l01321"></a>01321   <span class="keywordflow">if</span> ((op &amp; 0xffff0000) == 0x90010000)
<a name="l01322"></a>01322     {
<a name="l01323"></a>01323       <span class="keywordflow">while</span> ((op &amp; 0xffff0000) == 0x90010000)
<a name="l01324"></a>01324         {
<a name="l01325"></a>01325           pc = pc + 4;
<a name="l01326"></a>01326           op = <a class="code" href="rs6000-tdep_8c.html#a8120d33d1a24b46aead1cbe69b3a8a3b">rs6000_fetch_instruction</a> (gdbarch, pc);
<a name="l01327"></a>01327         }
<a name="l01328"></a>01328       <span class="keywordflow">return</span> pc;
<a name="l01329"></a>01329     }
<a name="l01330"></a>01330 
<a name="l01331"></a>01331   <span class="comment">/* Second sequence: A probing loop.</span>
<a name="l01332"></a>01332 <span class="comment">         addi 12,1,-&lt;some immediate&gt;</span>
<a name="l01333"></a>01333 <span class="comment">         lis 0,-&lt;some immediate&gt;</span>
<a name="l01334"></a>01334 <span class="comment">         [possibly ori 0,0,&lt;some immediate&gt;]</span>
<a name="l01335"></a>01335 <span class="comment">         add 0,12,0</span>
<a name="l01336"></a>01336 <span class="comment">         cmpw 0,12,0</span>
<a name="l01337"></a>01337 <span class="comment">         beq 0,&lt;disp&gt;</span>
<a name="l01338"></a>01338 <span class="comment">         addi 12,12,-&lt;some immediate&gt;</span>
<a name="l01339"></a>01339 <span class="comment">         stw 0,0(12)</span>
<a name="l01340"></a>01340 <span class="comment">         b &lt;disp&gt;</span>
<a name="l01341"></a>01341 <span class="comment">         [possibly one last probe: stw 0,&lt;some immediate&gt;(12)].  */</span>
<a name="l01342"></a>01342 
<a name="l01343"></a>01343   <span class="keywordflow">while</span> (1)
<a name="l01344"></a>01344     {
<a name="l01345"></a>01345       <span class="comment">/* addi 12,1,-&lt;some immediate&gt; */</span>
<a name="l01346"></a>01346       <span class="keywordflow">if</span> ((op &amp; 0xffff0000) != 0x39810000)
<a name="l01347"></a>01347         <span class="keywordflow">break</span>;
<a name="l01348"></a>01348 
<a name="l01349"></a>01349       <span class="comment">/* lis 0,-&lt;some immediate&gt; */</span>
<a name="l01350"></a>01350       pc = pc + 4;
<a name="l01351"></a>01351       op = <a class="code" href="rs6000-tdep_8c.html#a8120d33d1a24b46aead1cbe69b3a8a3b">rs6000_fetch_instruction</a> (gdbarch, pc);
<a name="l01352"></a>01352       <span class="keywordflow">if</span> ((op &amp; 0xffff0000) != 0x3c000000)
<a name="l01353"></a>01353         <span class="keywordflow">break</span>;
<a name="l01354"></a>01354 
<a name="l01355"></a>01355       pc = pc + 4;
<a name="l01356"></a>01356       op = <a class="code" href="rs6000-tdep_8c.html#a8120d33d1a24b46aead1cbe69b3a8a3b">rs6000_fetch_instruction</a> (gdbarch, pc);
<a name="l01357"></a>01357       <span class="comment">/* [possibly ori 0,0,&lt;some immediate&gt;] */</span>
<a name="l01358"></a>01358       <span class="keywordflow">if</span> ((op &amp; 0xffff0000) == 0x60000000)
<a name="l01359"></a>01359         {
<a name="l01360"></a>01360           pc = pc + 4;
<a name="l01361"></a>01361           op = <a class="code" href="rs6000-tdep_8c.html#a8120d33d1a24b46aead1cbe69b3a8a3b">rs6000_fetch_instruction</a> (gdbarch, pc);
<a name="l01362"></a>01362         }
<a name="l01363"></a>01363       <span class="comment">/* add 0,12,0 */</span>
<a name="l01364"></a>01364       <span class="keywordflow">if</span> (op != 0x7c0c0214)
<a name="l01365"></a>01365         <span class="keywordflow">break</span>;
<a name="l01366"></a>01366 
<a name="l01367"></a>01367       <span class="comment">/* cmpw 0,12,0 */</span>
<a name="l01368"></a>01368       pc = pc + 4;
<a name="l01369"></a>01369       op = <a class="code" href="rs6000-tdep_8c.html#a8120d33d1a24b46aead1cbe69b3a8a3b">rs6000_fetch_instruction</a> (gdbarch, pc);
<a name="l01370"></a>01370       <span class="keywordflow">if</span> (op != 0x7c0c0000)
<a name="l01371"></a>01371         <span class="keywordflow">break</span>;
<a name="l01372"></a>01372 
<a name="l01373"></a>01373       <span class="comment">/* beq 0,&lt;disp&gt; */</span>
<a name="l01374"></a>01374       pc = pc + 4;
<a name="l01375"></a>01375       op = <a class="code" href="rs6000-tdep_8c.html#a8120d33d1a24b46aead1cbe69b3a8a3b">rs6000_fetch_instruction</a> (gdbarch, pc);
<a name="l01376"></a>01376       <span class="keywordflow">if</span> ((op &amp; 0xff9f0001) != 0x41820000)
<a name="l01377"></a>01377         <span class="keywordflow">break</span>;
<a name="l01378"></a>01378 
<a name="l01379"></a>01379       <span class="comment">/* addi 12,12,-&lt;some immediate&gt; */</span>
<a name="l01380"></a>01380       pc = pc + 4;
<a name="l01381"></a>01381       op = <a class="code" href="rs6000-tdep_8c.html#a8120d33d1a24b46aead1cbe69b3a8a3b">rs6000_fetch_instruction</a> (gdbarch, pc);
<a name="l01382"></a>01382       <span class="keywordflow">if</span> ((op &amp; 0xffff0000) != 0x398c0000)
<a name="l01383"></a>01383         <span class="keywordflow">break</span>;
<a name="l01384"></a>01384 
<a name="l01385"></a>01385       <span class="comment">/* stw 0,0(12) */</span>
<a name="l01386"></a>01386       pc = pc + 4;
<a name="l01387"></a>01387       op = <a class="code" href="rs6000-tdep_8c.html#a8120d33d1a24b46aead1cbe69b3a8a3b">rs6000_fetch_instruction</a> (gdbarch, pc);
<a name="l01388"></a>01388       <span class="keywordflow">if</span> (op != 0x900c0000)
<a name="l01389"></a>01389         <span class="keywordflow">break</span>;
<a name="l01390"></a>01390 
<a name="l01391"></a>01391       <span class="comment">/* b &lt;disp&gt; */</span>
<a name="l01392"></a>01392       pc = pc + 4;
<a name="l01393"></a>01393       op = <a class="code" href="rs6000-tdep_8c.html#a8120d33d1a24b46aead1cbe69b3a8a3b">rs6000_fetch_instruction</a> (gdbarch, pc);
<a name="l01394"></a>01394       <span class="keywordflow">if</span> ((op &amp; 0xfc000001) != 0x48000000)
<a name="l01395"></a>01395         <span class="keywordflow">break</span>;
<a name="l01396"></a>01396 
<a name="l01397"></a>01397       <span class="comment">/* [possibly one last probe: stw 0,&lt;some immediate&gt;(12)].  */</span>
<a name="l01398"></a>01398       pc = pc + 4;
<a name="l01399"></a>01399       op = <a class="code" href="rs6000-tdep_8c.html#a8120d33d1a24b46aead1cbe69b3a8a3b">rs6000_fetch_instruction</a> (gdbarch, pc);
<a name="l01400"></a>01400       <span class="keywordflow">if</span> ((op &amp; 0xffff0000) == 0x900c0000)
<a name="l01401"></a>01401         {
<a name="l01402"></a>01402           pc = pc + 4;
<a name="l01403"></a>01403           op = <a class="code" href="rs6000-tdep_8c.html#a8120d33d1a24b46aead1cbe69b3a8a3b">rs6000_fetch_instruction</a> (gdbarch, pc);
<a name="l01404"></a>01404         }
<a name="l01405"></a>01405 
<a name="l01406"></a>01406       <span class="comment">/* We found a valid stack-check sequence, return the new PC.  */</span>
<a name="l01407"></a>01407       <span class="keywordflow">return</span> pc;
<a name="l01408"></a>01408     }
<a name="l01409"></a>01409 
<a name="l01410"></a>01410   <span class="comment">/* Third sequence: No probe; instead, a comparizon between the stack size</span>
<a name="l01411"></a>01411 <span class="comment">     limit (saved in a run-time global variable) and the current stack</span>
<a name="l01412"></a>01412 <span class="comment">     pointer:</span>
<a name="l01413"></a>01413 <span class="comment"></span>
<a name="l01414"></a>01414 <span class="comment">        addi 0,1,-&lt;some immediate&gt;</span>
<a name="l01415"></a>01415 <span class="comment">        lis 12,__gnat_stack_limit@ha</span>
<a name="l01416"></a>01416 <span class="comment">        lwz 12,__gnat_stack_limit@l(12)</span>
<a name="l01417"></a>01417 <span class="comment">        twllt 0,12</span>
<a name="l01418"></a>01418 <span class="comment"></span>
<a name="l01419"></a>01419 <span class="comment">     or, with a small variant in the case of a bigger stack frame:</span>
<a name="l01420"></a>01420 <span class="comment">        addis 0,1,&lt;some immediate&gt;</span>
<a name="l01421"></a>01421 <span class="comment">        addic 0,0,-&lt;some immediate&gt;</span>
<a name="l01422"></a>01422 <span class="comment">        lis 12,__gnat_stack_limit@ha</span>
<a name="l01423"></a>01423 <span class="comment">        lwz 12,__gnat_stack_limit@l(12)</span>
<a name="l01424"></a>01424 <span class="comment">        twllt 0,12</span>
<a name="l01425"></a>01425 <span class="comment">  */</span>
<a name="l01426"></a>01426   <span class="keywordflow">while</span> (1)
<a name="l01427"></a>01427     {
<a name="l01428"></a>01428       <span class="comment">/* addi 0,1,-&lt;some immediate&gt; */</span>
<a name="l01429"></a>01429       <span class="keywordflow">if</span> ((op &amp; 0xffff0000) != 0x38010000)
<a name="l01430"></a>01430         {
<a name="l01431"></a>01431           <span class="comment">/* small stack frame variant not recognized; try the</span>
<a name="l01432"></a>01432 <span class="comment">             big stack frame variant: */</span>
<a name="l01433"></a>01433 
<a name="l01434"></a>01434           <span class="comment">/* addis 0,1,&lt;some immediate&gt; */</span>
<a name="l01435"></a>01435           <span class="keywordflow">if</span> ((op &amp; 0xffff0000) != 0x3c010000)
<a name="l01436"></a>01436             <span class="keywordflow">break</span>;
<a name="l01437"></a>01437 
<a name="l01438"></a>01438           <span class="comment">/* addic 0,0,-&lt;some immediate&gt; */</span>
<a name="l01439"></a>01439           pc = pc + 4;
<a name="l01440"></a>01440           op = <a class="code" href="rs6000-tdep_8c.html#a8120d33d1a24b46aead1cbe69b3a8a3b">rs6000_fetch_instruction</a> (gdbarch, pc);
<a name="l01441"></a>01441           <span class="keywordflow">if</span> ((op &amp; 0xffff0000) != 0x30000000)
<a name="l01442"></a>01442             <span class="keywordflow">break</span>;
<a name="l01443"></a>01443         }
<a name="l01444"></a>01444 
<a name="l01445"></a>01445       <span class="comment">/* lis 12,&lt;some immediate&gt; */</span>
<a name="l01446"></a>01446       pc = pc + 4;
<a name="l01447"></a>01447       op = <a class="code" href="rs6000-tdep_8c.html#a8120d33d1a24b46aead1cbe69b3a8a3b">rs6000_fetch_instruction</a> (gdbarch, pc);
<a name="l01448"></a>01448       <span class="keywordflow">if</span> ((op &amp; 0xffff0000) != 0x3d800000)
<a name="l01449"></a>01449         <span class="keywordflow">break</span>;
<a name="l01450"></a>01450       
<a name="l01451"></a>01451       <span class="comment">/* lwz 12,&lt;some immediate&gt;(12) */</span>
<a name="l01452"></a>01452       pc = pc + 4;
<a name="l01453"></a>01453       op = <a class="code" href="rs6000-tdep_8c.html#a8120d33d1a24b46aead1cbe69b3a8a3b">rs6000_fetch_instruction</a> (gdbarch, pc);
<a name="l01454"></a>01454       <span class="keywordflow">if</span> ((op &amp; 0xffff0000) != 0x818c0000)
<a name="l01455"></a>01455         <span class="keywordflow">break</span>;
<a name="l01456"></a>01456 
<a name="l01457"></a>01457       <span class="comment">/* twllt 0,12 */</span>
<a name="l01458"></a>01458       pc = pc + 4;
<a name="l01459"></a>01459       op = <a class="code" href="rs6000-tdep_8c.html#a8120d33d1a24b46aead1cbe69b3a8a3b">rs6000_fetch_instruction</a> (gdbarch, pc);
<a name="l01460"></a>01460       <span class="keywordflow">if</span> ((op &amp; 0xfffffffe) != 0x7c406008)
<a name="l01461"></a>01461         <span class="keywordflow">break</span>;
<a name="l01462"></a>01462 
<a name="l01463"></a>01463       <span class="comment">/* We found a valid stack-check sequence, return the new PC.  */</span>
<a name="l01464"></a>01464       <span class="keywordflow">return</span> pc;
<a name="l01465"></a>01465     }
<a name="l01466"></a>01466 
<a name="l01467"></a>01467   <span class="comment">/* No stack check code in our prologue, return the start_pc.  */</span>
<a name="l01468"></a>01468   <span class="keywordflow">return</span> start_pc;
<a name="l01469"></a>01469 }
<a name="l01470"></a>01470 
<a name="l01471"></a>01471 <span class="comment">/* return pc value after skipping a function prologue and also return</span>
<a name="l01472"></a>01472 <span class="comment">   information about a function frame.</span>
<a name="l01473"></a>01473 <span class="comment"></span>
<a name="l01474"></a>01474 <span class="comment">   in struct rs6000_framedata fdata:</span>
<a name="l01475"></a>01475 <span class="comment">   - frameless is TRUE, if function does not have a frame.</span>
<a name="l01476"></a>01476 <span class="comment">   - nosavedpc is TRUE, if function does not save %pc value in its frame.</span>
<a name="l01477"></a>01477 <span class="comment">   - offset is the initial size of this stack frame --- the amount by</span>
<a name="l01478"></a>01478 <span class="comment">   which we decrement the sp to allocate the frame.</span>
<a name="l01479"></a>01479 <span class="comment">   - saved_gpr is the number of the first saved gpr.</span>
<a name="l01480"></a>01480 <span class="comment">   - saved_fpr is the number of the first saved fpr.</span>
<a name="l01481"></a>01481 <span class="comment">   - saved_vr is the number of the first saved vr.</span>
<a name="l01482"></a>01482 <span class="comment">   - saved_ev is the number of the first saved ev.</span>
<a name="l01483"></a>01483 <span class="comment">   - alloca_reg is the number of the register used for alloca() handling.</span>
<a name="l01484"></a>01484 <span class="comment">   Otherwise -1.</span>
<a name="l01485"></a>01485 <span class="comment">   - gpr_offset is the offset of the first saved gpr from the previous frame.</span>
<a name="l01486"></a>01486 <span class="comment">   - fpr_offset is the offset of the first saved fpr from the previous frame.</span>
<a name="l01487"></a>01487 <span class="comment">   - vr_offset is the offset of the first saved vr from the previous frame.</span>
<a name="l01488"></a>01488 <span class="comment">   - ev_offset is the offset of the first saved ev from the previous frame.</span>
<a name="l01489"></a>01489 <span class="comment">   - lr_offset is the offset of the saved lr</span>
<a name="l01490"></a>01490 <span class="comment">   - cr_offset is the offset of the saved cr</span>
<a name="l01491"></a>01491 <span class="comment">   - vrsave_offset is the offset of the saved vrsave register.  */</span>
<a name="l01492"></a>01492 
<a name="l01493"></a>01493 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l01494"></a><a class="code" href="rs6000-tdep_8c.html#a4120b4f8b77afd1b1ffb16d06b8506e8">01494</a> <a class="code" href="rs6000-tdep_8c.html#a4120b4f8b77afd1b1ffb16d06b8506e8">skip_prologue</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> lim_pc,
<a name="l01495"></a>01495                <span class="keyword">struct</span> <a class="code" href="structrs6000__framedata.html">rs6000_framedata</a> *fdata)
<a name="l01496"></a>01496 {
<a name="l01497"></a>01497   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> orig_pc = pc;
<a name="l01498"></a>01498   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> last_prologue_pc = pc;
<a name="l01499"></a>01499   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> li_found_pc = 0;
<a name="l01500"></a>01500   <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> buf[4];
<a name="l01501"></a>01501   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> op;
<a name="l01502"></a>01502   <span class="keywordtype">long</span> <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a> = 0;
<a name="l01503"></a>01503   <span class="keywordtype">long</span> vr_saved_offset = 0;
<a name="l01504"></a>01504   <span class="keywordtype">int</span> lr_reg = -1;
<a name="l01505"></a>01505   <span class="keywordtype">int</span> cr_reg = -1;
<a name="l01506"></a>01506   <span class="keywordtype">int</span> vr_reg = -1;
<a name="l01507"></a>01507   <span class="keywordtype">int</span> ev_reg = -1;
<a name="l01508"></a>01508   <span class="keywordtype">long</span> ev_offset = 0;
<a name="l01509"></a>01509   <span class="keywordtype">int</span> vrsave_reg = -1;
<a name="l01510"></a>01510   <span class="keywordtype">int</span> <a class="code" href="structreg.html">reg</a>;
<a name="l01511"></a>01511   <span class="keywordtype">int</span> framep = 0;
<a name="l01512"></a>01512   <span class="keywordtype">int</span> minimal_toc_loaded = 0;
<a name="l01513"></a>01513   <span class="keywordtype">int</span> prev_insn_was_prologue_insn = 1;
<a name="l01514"></a>01514   <span class="keywordtype">int</span> num_skip_non_prologue_insns = 0;
<a name="l01515"></a>01515   <span class="keywordtype">int</span> r0_contains_arg = 0;
<a name="l01516"></a>01516   <span class="keyword">const</span> <span class="keyword">struct </span>bfd_arch_info *arch_info = <a class="code" href="gdbarch_8c.html#a305465885963fbf0fb5a7543594a7bff">gdbarch_bfd_arch_info</a> (gdbarch);
<a name="l01517"></a>01517   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l01518"></a>01518   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l01519"></a>01519 
<a name="l01520"></a>01520   <a class="code" href="gdb__string_8h.html#adb03df3679ce1445e801310614624ccb">memset</a> (fdata, 0, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structrs6000__framedata.html">rs6000_framedata</a>));
<a name="l01521"></a>01521   fdata-&gt;<a class="code" href="structrs6000__framedata.html#a864b62d4fb50dd86d9f15e5aab678764">saved_gpr</a> = -1;
<a name="l01522"></a>01522   fdata-&gt;<a class="code" href="structrs6000__framedata.html#a2ef1436fd7e4a69465b4a764b6ec0fb2">saved_fpr</a> = -1;
<a name="l01523"></a>01523   fdata-&gt;<a class="code" href="structrs6000__framedata.html#a5c109de762bc0529776b89089ae3a9cc">saved_vr</a> = -1;
<a name="l01524"></a>01524   fdata-&gt;<a class="code" href="structrs6000__framedata.html#a84900e94cb40683900fd7a0c8cd0875d">saved_ev</a> = -1;
<a name="l01525"></a>01525   fdata-&gt;<a class="code" href="structrs6000__framedata.html#a03be24b999043cf63a67b948f0d5b7a3">alloca_reg</a> = -1;
<a name="l01526"></a>01526   fdata-&gt;<a class="code" href="structrs6000__framedata.html#a436f9ab06e8bf4bc5b690ac6bac79d09">frameless</a> = 1;
<a name="l01527"></a>01527   fdata-&gt;<a class="code" href="structrs6000__framedata.html#a44637c0480218aab1598a68e6a720180">nosavedpc</a> = 1;
<a name="l01528"></a>01528   fdata-&gt;<a class="code" href="structrs6000__framedata.html#a927eceb33f6ffca4ad573494e0ac164b">lr_register</a> = -1;
<a name="l01529"></a>01529 
<a name="l01530"></a>01530   pc = <a class="code" href="rs6000-tdep_8c.html#aafe2dc2111d62c1804324c642e388564">rs6000_skip_stack_check</a> (gdbarch, pc);
<a name="l01531"></a>01531   <span class="keywordflow">if</span> (pc &gt;= lim_pc)
<a name="l01532"></a>01532     pc = lim_pc;
<a name="l01533"></a>01533 
<a name="l01534"></a>01534   <span class="keywordflow">for</span> (;; pc += 4)
<a name="l01535"></a>01535     {
<a name="l01536"></a>01536       <span class="comment">/* Sometimes it isn&#39;t clear if an instruction is a prologue</span>
<a name="l01537"></a>01537 <span class="comment">         instruction or not.  When we encounter one of these ambiguous</span>
<a name="l01538"></a>01538 <span class="comment">         cases, we&#39;ll set prev_insn_was_prologue_insn to 0 (false).</span>
<a name="l01539"></a>01539 <span class="comment">         Otherwise, we&#39;ll assume that it really is a prologue instruction.  */</span>
<a name="l01540"></a>01540       <span class="keywordflow">if</span> (prev_insn_was_prologue_insn)
<a name="l01541"></a>01541         last_prologue_pc = <a class="code" href="structgdbarch__tdep.html#ab7a207d4e85b564c48238283745247b8">pc</a>;
<a name="l01542"></a>01542 
<a name="l01543"></a>01543       <span class="comment">/* Stop scanning if we&#39;ve hit the limit.  */</span>
<a name="l01544"></a>01544       <span class="keywordflow">if</span> (pc &gt;= lim_pc)
<a name="l01545"></a>01545         <span class="keywordflow">break</span>;
<a name="l01546"></a>01546 
<a name="l01547"></a>01547       prev_insn_was_prologue_insn = 1;
<a name="l01548"></a>01548 
<a name="l01549"></a>01549       <span class="comment">/* Fetch the instruction and convert it to an integer.  */</span>
<a name="l01550"></a>01550       <span class="keywordflow">if</span> (<a class="code" href="target_8c.html#ac579515fbccfb9e6b1a45766a71c1d4f">target_read_memory</a> (pc, buf, 4))
<a name="l01551"></a>01551         <span class="keywordflow">break</span>;
<a name="l01552"></a>01552       op = <a class="code" href="defs_8h.html#a99aec65329508b4d449a4f881026f844">extract_unsigned_integer</a> (buf, 4, byte_order);
<a name="l01553"></a>01553 
<a name="l01554"></a>01554       <span class="keywordflow">if</span> ((op &amp; 0xfc1fffff) == 0x7c0802a6)
<a name="l01555"></a>01555         {                       <span class="comment">/* mflr Rx */</span>
<a name="l01556"></a>01556           <span class="comment">/* Since shared library / PIC code, which needs to get its</span>
<a name="l01557"></a>01557 <span class="comment">             address at runtime, can appear to save more than one link</span>
<a name="l01558"></a>01558 <span class="comment">             register vis:</span>
<a name="l01559"></a>01559 <span class="comment"></span>
<a name="l01560"></a>01560 <span class="comment">             *INDENT-OFF*</span>
<a name="l01561"></a>01561 <span class="comment">             stwu r1,-304(r1)</span>
<a name="l01562"></a>01562 <span class="comment">             mflr r3</span>
<a name="l01563"></a>01563 <span class="comment">             bl 0xff570d0 (blrl)</span>
<a name="l01564"></a>01564 <span class="comment">             stw r30,296(r1)</span>
<a name="l01565"></a>01565 <span class="comment">             mflr r30</span>
<a name="l01566"></a>01566 <span class="comment">             stw r31,300(r1)</span>
<a name="l01567"></a>01567 <span class="comment">             stw r3,308(r1);</span>
<a name="l01568"></a>01568 <span class="comment">             ...</span>
<a name="l01569"></a>01569 <span class="comment">             *INDENT-ON*</span>
<a name="l01570"></a>01570 <span class="comment"></span>
<a name="l01571"></a>01571 <span class="comment">             remember just the first one, but skip over additional</span>
<a name="l01572"></a>01572 <span class="comment">             ones.  */</span>
<a name="l01573"></a>01573           <span class="keywordflow">if</span> (lr_reg == -1)
<a name="l01574"></a>01574             lr_reg = (op &amp; 0x03e00000) &gt;&gt; 21;
<a name="l01575"></a>01575           <span class="keywordflow">if</span> (lr_reg == 0)
<a name="l01576"></a>01576             r0_contains_arg = 0;
<a name="l01577"></a>01577           <span class="keywordflow">continue</span>;
<a name="l01578"></a>01578         }
<a name="l01579"></a>01579       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((op &amp; 0xfc1fffff) == 0x7c000026)
<a name="l01580"></a>01580         {                       <span class="comment">/* mfcr Rx */</span>
<a name="l01581"></a>01581           cr_reg = (op &amp; 0x03e00000);
<a name="l01582"></a>01582           <span class="keywordflow">if</span> (cr_reg == 0)
<a name="l01583"></a>01583             r0_contains_arg = 0;
<a name="l01584"></a>01584           <span class="keywordflow">continue</span>;
<a name="l01585"></a>01585 
<a name="l01586"></a>01586         }
<a name="l01587"></a>01587       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((op &amp; 0xfc1f0000) == 0xd8010000)
<a name="l01588"></a>01588         {                       <span class="comment">/* stfd Rx,NUM(r1) */</span>
<a name="l01589"></a>01589           reg = <a class="code" href="rs6000-tdep_8c.html#a972a641280269b03b6a213a9a919130e">GET_SRC_REG</a> (op);
<a name="l01590"></a>01590           <span class="keywordflow">if</span> (fdata-&gt;<a class="code" href="structrs6000__framedata.html#a2ef1436fd7e4a69465b4a764b6ec0fb2">saved_fpr</a> == -1 || fdata-&gt;<a class="code" href="structrs6000__framedata.html#a2ef1436fd7e4a69465b4a764b6ec0fb2">saved_fpr</a> &gt; reg)
<a name="l01591"></a>01591             {
<a name="l01592"></a>01592               fdata-&gt;<a class="code" href="structrs6000__framedata.html#a2ef1436fd7e4a69465b4a764b6ec0fb2">saved_fpr</a> = reg;
<a name="l01593"></a>01593               fdata-&gt;<a class="code" href="structrs6000__framedata.html#afa00471cc5d358b2f83318f446dc6d46">fpr_offset</a> = <a class="code" href="rs6000-tdep_8c.html#a5dec9f2118293c49911bbb987b9f9d82">SIGNED_SHORT</a> (op) + <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l01594"></a>01594             }
<a name="l01595"></a>01595           <span class="keywordflow">continue</span>;
<a name="l01596"></a>01596 
<a name="l01597"></a>01597         }
<a name="l01598"></a>01598       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((op &amp; 0xfc1f0000) == 0xbc010000) ||     <span class="comment">/* stm Rx, NUM(r1) */</span>
<a name="l01599"></a>01599                (((op &amp; 0xfc1f0000) == 0x90010000 ||     <span class="comment">/* st rx,NUM(r1) */</span>
<a name="l01600"></a>01600                  (op &amp; 0xfc1f0003) == 0xf8010000) &amp;&amp;    <span class="comment">/* std rx,NUM(r1) */</span>
<a name="l01601"></a>01601                 (op &amp; 0x03e00000) &gt;= 0x01a00000))       <span class="comment">/* rx &gt;= r13 */</span>
<a name="l01602"></a>01602         {
<a name="l01603"></a>01603 
<a name="l01604"></a>01604           reg = <a class="code" href="rs6000-tdep_8c.html#a972a641280269b03b6a213a9a919130e">GET_SRC_REG</a> (op);
<a name="l01605"></a>01605           <span class="keywordflow">if</span> ((op &amp; 0xfc1f0000) == 0xbc010000)
<a name="l01606"></a>01606             fdata-&gt;<a class="code" href="structrs6000__framedata.html#a2f00dfad4edfd39a6f6d24c094ab1d7d">gpr_mask</a> |= ~((1U &lt;&lt; reg) - 1);
<a name="l01607"></a>01607           <span class="keywordflow">else</span>
<a name="l01608"></a>01608             fdata-&gt;<a class="code" href="structrs6000__framedata.html#a2f00dfad4edfd39a6f6d24c094ab1d7d">gpr_mask</a> |= 1U &lt;&lt; reg;
<a name="l01609"></a>01609           <span class="keywordflow">if</span> (fdata-&gt;<a class="code" href="structrs6000__framedata.html#a864b62d4fb50dd86d9f15e5aab678764">saved_gpr</a> == -1 || fdata-&gt;<a class="code" href="structrs6000__framedata.html#a864b62d4fb50dd86d9f15e5aab678764">saved_gpr</a> &gt; reg)
<a name="l01610"></a>01610             {
<a name="l01611"></a>01611               fdata-&gt;<a class="code" href="structrs6000__framedata.html#a864b62d4fb50dd86d9f15e5aab678764">saved_gpr</a> = reg;
<a name="l01612"></a>01612               <span class="keywordflow">if</span> ((op &amp; 0xfc1f0003) == 0xf8010000)
<a name="l01613"></a>01613                 op &amp;= ~3UL;
<a name="l01614"></a>01614               fdata-&gt;<a class="code" href="structrs6000__framedata.html#a4fc2314f4e399e3a4d3b82c4a5494766">gpr_offset</a> = <a class="code" href="rs6000-tdep_8c.html#a5dec9f2118293c49911bbb987b9f9d82">SIGNED_SHORT</a> (op) + <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l01615"></a>01615             }
<a name="l01616"></a>01616           <span class="keywordflow">continue</span>;
<a name="l01617"></a>01617 
<a name="l01618"></a>01618         }
<a name="l01619"></a>01619       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((op &amp; 0xffff0000) == 0x60000000)
<a name="l01620"></a>01620         {
<a name="l01621"></a>01621           <span class="comment">/* nop */</span>
<a name="l01622"></a>01622           <span class="comment">/* Allow nops in the prologue, but do not consider them to</span>
<a name="l01623"></a>01623 <span class="comment">             be part of the prologue unless followed by other prologue</span>
<a name="l01624"></a>01624 <span class="comment">             instructions.  */</span>
<a name="l01625"></a>01625           prev_insn_was_prologue_insn = 0;
<a name="l01626"></a>01626           <span class="keywordflow">continue</span>;
<a name="l01627"></a>01627 
<a name="l01628"></a>01628         }
<a name="l01629"></a>01629       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((op &amp; 0xffff0000) == 0x3c000000)
<a name="l01630"></a>01630         {                       <span class="comment">/* addis 0,0,NUM, used</span>
<a name="l01631"></a>01631 <span class="comment">                                   for &gt;= 32k frames */</span>
<a name="l01632"></a>01632           fdata-&gt;<a class="code" href="structrs6000__framedata.html#a8fe5b77e6c5b1dc69c851c79fd67352b">offset</a> = (op &amp; 0x0000ffff) &lt;&lt; 16;
<a name="l01633"></a>01633           fdata-&gt;<a class="code" href="structrs6000__framedata.html#a436f9ab06e8bf4bc5b690ac6bac79d09">frameless</a> = 0;
<a name="l01634"></a>01634           r0_contains_arg = 0;
<a name="l01635"></a>01635           <span class="keywordflow">continue</span>;
<a name="l01636"></a>01636 
<a name="l01637"></a>01637         }
<a name="l01638"></a>01638       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((op &amp; 0xffff0000) == 0x60000000)
<a name="l01639"></a>01639         {                       <span class="comment">/* ori 0,0,NUM, 2nd ha</span>
<a name="l01640"></a>01640 <span class="comment">                                   lf of &gt;= 32k frames */</span>
<a name="l01641"></a>01641           fdata-&gt;<a class="code" href="structrs6000__framedata.html#a8fe5b77e6c5b1dc69c851c79fd67352b">offset</a> |= (op &amp; 0x0000ffff);
<a name="l01642"></a>01642           fdata-&gt;<a class="code" href="structrs6000__framedata.html#a436f9ab06e8bf4bc5b690ac6bac79d09">frameless</a> = 0;
<a name="l01643"></a>01643           r0_contains_arg = 0;
<a name="l01644"></a>01644           <span class="keywordflow">continue</span>;
<a name="l01645"></a>01645 
<a name="l01646"></a>01646         }
<a name="l01647"></a>01647       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lr_reg &gt;= 0 &amp;&amp;
<a name="l01648"></a>01648                <span class="comment">/* std Rx, NUM(r1) || stdu Rx, NUM(r1) */</span>
<a name="l01649"></a>01649                (((op &amp; 0xffff0000) == (lr_reg | 0xf8010000)) ||
<a name="l01650"></a>01650                 <span class="comment">/* stw Rx, NUM(r1) */</span>
<a name="l01651"></a>01651                 ((op &amp; 0xffff0000) == (lr_reg | 0x90010000)) ||
<a name="l01652"></a>01652                 <span class="comment">/* stwu Rx, NUM(r1) */</span>
<a name="l01653"></a>01653                 ((op &amp; 0xffff0000) == (lr_reg | 0x94010000))))
<a name="l01654"></a>01654         {       <span class="comment">/* where Rx == lr */</span>
<a name="l01655"></a>01655           fdata-&gt;<a class="code" href="structrs6000__framedata.html#a2fa55d4b97c89f7dc3d01b87bb1377c5">lr_offset</a> = <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l01656"></a>01656           fdata-&gt;<a class="code" href="structrs6000__framedata.html#a44637c0480218aab1598a68e6a720180">nosavedpc</a> = 0;
<a name="l01657"></a>01657           <span class="comment">/* Invalidate lr_reg, but don&#39;t set it to -1.</span>
<a name="l01658"></a>01658 <span class="comment">             That would mean that it had never been set.  */</span>
<a name="l01659"></a>01659           lr_reg = -2;
<a name="l01660"></a>01660           <span class="keywordflow">if</span> ((op &amp; 0xfc000003) == 0xf8000000 ||        <span class="comment">/* std */</span>
<a name="l01661"></a>01661               (op &amp; 0xfc000000) == 0x90000000)          <span class="comment">/* stw */</span>
<a name="l01662"></a>01662             {
<a name="l01663"></a>01663               <span class="comment">/* Does not update r1, so add displacement to lr_offset.  */</span>
<a name="l01664"></a>01664               fdata-&gt;<a class="code" href="structrs6000__framedata.html#a2fa55d4b97c89f7dc3d01b87bb1377c5">lr_offset</a> += <a class="code" href="rs6000-tdep_8c.html#a5dec9f2118293c49911bbb987b9f9d82">SIGNED_SHORT</a> (op);
<a name="l01665"></a>01665             }
<a name="l01666"></a>01666           <span class="keywordflow">continue</span>;
<a name="l01667"></a>01667 
<a name="l01668"></a>01668         }
<a name="l01669"></a>01669       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cr_reg &gt;= 0 &amp;&amp;
<a name="l01670"></a>01670                <span class="comment">/* std Rx, NUM(r1) || stdu Rx, NUM(r1) */</span>
<a name="l01671"></a>01671                (((op &amp; 0xffff0000) == (cr_reg | 0xf8010000)) ||
<a name="l01672"></a>01672                 <span class="comment">/* stw Rx, NUM(r1) */</span>
<a name="l01673"></a>01673                 ((op &amp; 0xffff0000) == (cr_reg | 0x90010000)) ||
<a name="l01674"></a>01674                 <span class="comment">/* stwu Rx, NUM(r1) */</span>
<a name="l01675"></a>01675                 ((op &amp; 0xffff0000) == (cr_reg | 0x94010000))))
<a name="l01676"></a>01676         {       <span class="comment">/* where Rx == cr */</span>
<a name="l01677"></a>01677           fdata-&gt;<a class="code" href="structrs6000__framedata.html#a653029fbd7bb523becdb6f6b635b7e57">cr_offset</a> = <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l01678"></a>01678           <span class="comment">/* Invalidate cr_reg, but don&#39;t set it to -1.</span>
<a name="l01679"></a>01679 <span class="comment">             That would mean that it had never been set.  */</span>
<a name="l01680"></a>01680           cr_reg = -2;
<a name="l01681"></a>01681           <span class="keywordflow">if</span> ((op &amp; 0xfc000003) == 0xf8000000 ||
<a name="l01682"></a>01682               (op &amp; 0xfc000000) == 0x90000000)
<a name="l01683"></a>01683             {
<a name="l01684"></a>01684               <span class="comment">/* Does not update r1, so add displacement to cr_offset.  */</span>
<a name="l01685"></a>01685               fdata-&gt;<a class="code" href="structrs6000__framedata.html#a653029fbd7bb523becdb6f6b635b7e57">cr_offset</a> += <a class="code" href="rs6000-tdep_8c.html#a5dec9f2118293c49911bbb987b9f9d82">SIGNED_SHORT</a> (op);
<a name="l01686"></a>01686             }
<a name="l01687"></a>01687           <span class="keywordflow">continue</span>;
<a name="l01688"></a>01688 
<a name="l01689"></a>01689         }
<a name="l01690"></a>01690       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((op &amp; 0xfe80ffff) == 0x42800005 &amp;&amp; lr_reg != -1)
<a name="l01691"></a>01691         {
<a name="l01692"></a>01692           <span class="comment">/* bcl 20,xx,.+4 is used to get the current PC, with or without</span>
<a name="l01693"></a>01693 <span class="comment">             prediction bits.  If the LR has already been saved, we can</span>
<a name="l01694"></a>01694 <span class="comment">             skip it.  */</span>
<a name="l01695"></a>01695           <span class="keywordflow">continue</span>;
<a name="l01696"></a>01696         }
<a name="l01697"></a>01697       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op == 0x48000005)
<a name="l01698"></a>01698         {                       <span class="comment">/* bl .+4 used in </span>
<a name="l01699"></a>01699 <span class="comment">                                   -mrelocatable */</span>
<a name="l01700"></a>01700           fdata-&gt;<a class="code" href="structrs6000__framedata.html#ab41a4e24016bc514a4c0bad7a1ea6cca">used_bl</a> = 1;
<a name="l01701"></a>01701           <span class="keywordflow">continue</span>;
<a name="l01702"></a>01702 
<a name="l01703"></a>01703         }
<a name="l01704"></a>01704       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op == 0x48000004)
<a name="l01705"></a>01705         {                       <span class="comment">/* b .+4 (xlc) */</span>
<a name="l01706"></a>01706           <span class="keywordflow">break</span>;
<a name="l01707"></a>01707 
<a name="l01708"></a>01708         }
<a name="l01709"></a>01709       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((op &amp; 0xffff0000) == 0x3fc00000 ||  <span class="comment">/* addis 30,0,foo@ha, used</span>
<a name="l01710"></a>01710 <span class="comment">                                                      in V.4 -mminimal-toc */</span>
<a name="l01711"></a>01711                (op &amp; 0xffff0000) == 0x3bde0000)
<a name="l01712"></a>01712         {                       <span class="comment">/* addi 30,30,foo@l */</span>
<a name="l01713"></a>01713           <span class="keywordflow">continue</span>;
<a name="l01714"></a>01714 
<a name="l01715"></a>01715         }
<a name="l01716"></a>01716       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((op &amp; 0xfc000001) == 0x48000001)
<a name="l01717"></a>01717         {                       <span class="comment">/* bl foo, </span>
<a name="l01718"></a>01718 <span class="comment">                                   to save fprs???  */</span>
<a name="l01719"></a>01719 
<a name="l01720"></a>01720           fdata-&gt;<a class="code" href="structrs6000__framedata.html#a436f9ab06e8bf4bc5b690ac6bac79d09">frameless</a> = 0;
<a name="l01721"></a>01721 
<a name="l01722"></a>01722           <span class="comment">/* If the return address has already been saved, we can skip</span>
<a name="l01723"></a>01723 <span class="comment">             calls to blrl (for PIC).  */</span>
<a name="l01724"></a>01724           <span class="keywordflow">if</span> (lr_reg != -1 &amp;&amp; <a class="code" href="rs6000-tdep_8c.html#a79399e175dba564253dca28d31adec72">bl_to_blrl_insn_p</a> (pc, op, byte_order))
<a name="l01725"></a>01725             {
<a name="l01726"></a>01726               fdata-&gt;<a class="code" href="structrs6000__framedata.html#ab41a4e24016bc514a4c0bad7a1ea6cca">used_bl</a> = 1;
<a name="l01727"></a>01727               <span class="keywordflow">continue</span>;
<a name="l01728"></a>01728             }
<a name="l01729"></a>01729 
<a name="l01730"></a>01730           <span class="comment">/* Don&#39;t skip over the subroutine call if it is not within</span>
<a name="l01731"></a>01731 <span class="comment">             the first three instructions of the prologue and either</span>
<a name="l01732"></a>01732 <span class="comment">             we have no line table information or the line info tells</span>
<a name="l01733"></a>01733 <span class="comment">             us that the subroutine call is not part of the line</span>
<a name="l01734"></a>01734 <span class="comment">             associated with the prologue.  */</span>
<a name="l01735"></a>01735           <span class="keywordflow">if</span> ((pc - orig_pc) &gt; 8)
<a name="l01736"></a>01736             {
<a name="l01737"></a>01737               <span class="keyword">struct </span><a class="code" href="structsymtab__and__line.html">symtab_and_line</a> prologue_sal = <a class="code" href="symtab_8c.html#ad9bbd85700e3d7fa50e7ba0e32f37846">find_pc_line</a> (orig_pc, 0);
<a name="l01738"></a>01738               <span class="keyword">struct </span><a class="code" href="structsymtab__and__line.html">symtab_and_line</a> this_sal = <a class="code" href="symtab_8c.html#ad9bbd85700e3d7fa50e7ba0e32f37846">find_pc_line</a> (pc, 0);
<a name="l01739"></a>01739 
<a name="l01740"></a>01740               <span class="keywordflow">if</span> ((prologue_sal.<a class="code" href="structsymtab__and__line.html#a6a0468be675b9ac19a5b3ef26f471eaf">line</a> == 0)
<a name="l01741"></a>01741                   || (prologue_sal.<a class="code" href="structsymtab__and__line.html#a6a0468be675b9ac19a5b3ef26f471eaf">line</a> != this_sal.<a class="code" href="structsymtab__and__line.html#a6a0468be675b9ac19a5b3ef26f471eaf">line</a>))
<a name="l01742"></a>01742                 <span class="keywordflow">break</span>;
<a name="l01743"></a>01743             }
<a name="l01744"></a>01744 
<a name="l01745"></a>01745           op = <a class="code" href="corefile_8c.html#a7097ab90f56ed7bcceb190bab139621b">read_memory_integer</a> (pc + 4, 4, byte_order);
<a name="l01746"></a>01746 
<a name="l01747"></a>01747           <span class="comment">/* At this point, make sure this is not a trampoline</span>
<a name="l01748"></a>01748 <span class="comment">             function (a function that simply calls another functions,</span>
<a name="l01749"></a>01749 <span class="comment">             and nothing else).  If the next is not a nop, this branch</span>
<a name="l01750"></a>01750 <span class="comment">             was part of the function prologue.  */</span>
<a name="l01751"></a>01751 
<a name="l01752"></a>01752           <span class="keywordflow">if</span> (op == 0x4def7b82 || op == 0)      <span class="comment">/* crorc 15, 15, 15 */</span>
<a name="l01753"></a>01753             <span class="keywordflow">break</span>;              <span class="comment">/* Don&#39;t skip over </span>
<a name="l01754"></a>01754 <span class="comment">                                   this branch.  */</span>
<a name="l01755"></a>01755 
<a name="l01756"></a>01756           fdata-&gt;<a class="code" href="structrs6000__framedata.html#ab41a4e24016bc514a4c0bad7a1ea6cca">used_bl</a> = 1;
<a name="l01757"></a>01757           <span class="keywordflow">continue</span>;
<a name="l01758"></a>01758         }
<a name="l01759"></a>01759       <span class="comment">/* update stack pointer */</span>
<a name="l01760"></a>01760       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((op &amp; 0xfc1f0000) == 0x94010000)
<a name="l01761"></a>01761         {               <span class="comment">/* stu rX,NUM(r1) ||  stwu rX,NUM(r1) */</span>
<a name="l01762"></a>01762           fdata-&gt;<a class="code" href="structrs6000__framedata.html#a436f9ab06e8bf4bc5b690ac6bac79d09">frameless</a> = 0;
<a name="l01763"></a>01763           fdata-&gt;<a class="code" href="structrs6000__framedata.html#a8fe5b77e6c5b1dc69c851c79fd67352b">offset</a> = <a class="code" href="rs6000-tdep_8c.html#a5dec9f2118293c49911bbb987b9f9d82">SIGNED_SHORT</a> (op);
<a name="l01764"></a>01764           offset = fdata-&gt;<a class="code" href="structrs6000__framedata.html#a8fe5b77e6c5b1dc69c851c79fd67352b">offset</a>;
<a name="l01765"></a>01765           <span class="keywordflow">continue</span>;
<a name="l01766"></a>01766         }
<a name="l01767"></a>01767       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((op &amp; 0xfc1f016a) == 0x7c01016e)
<a name="l01768"></a>01768         {                       <span class="comment">/* stwux rX,r1,rY */</span>
<a name="l01769"></a>01769           <span class="comment">/* No way to figure out what r1 is going to be.  */</span>
<a name="l01770"></a>01770           fdata-&gt;<a class="code" href="structrs6000__framedata.html#a436f9ab06e8bf4bc5b690ac6bac79d09">frameless</a> = 0;
<a name="l01771"></a>01771           offset = fdata-&gt;<a class="code" href="structrs6000__framedata.html#a8fe5b77e6c5b1dc69c851c79fd67352b">offset</a>;
<a name="l01772"></a>01772           <span class="keywordflow">continue</span>;
<a name="l01773"></a>01773         }
<a name="l01774"></a>01774       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((op &amp; 0xfc1f0003) == 0xf8010001)
<a name="l01775"></a>01775         {                       <span class="comment">/* stdu rX,NUM(r1) */</span>
<a name="l01776"></a>01776           fdata-&gt;<a class="code" href="structrs6000__framedata.html#a436f9ab06e8bf4bc5b690ac6bac79d09">frameless</a> = 0;
<a name="l01777"></a>01777           fdata-&gt;<a class="code" href="structrs6000__framedata.html#a8fe5b77e6c5b1dc69c851c79fd67352b">offset</a> = <a class="code" href="rs6000-tdep_8c.html#a5dec9f2118293c49911bbb987b9f9d82">SIGNED_SHORT</a> (op &amp; ~3UL);
<a name="l01778"></a>01778           offset = fdata-&gt;<a class="code" href="structrs6000__framedata.html#a8fe5b77e6c5b1dc69c851c79fd67352b">offset</a>;
<a name="l01779"></a>01779           <span class="keywordflow">continue</span>;
<a name="l01780"></a>01780         }
<a name="l01781"></a>01781       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((op &amp; 0xfc1f016a) == 0x7c01016a)
<a name="l01782"></a>01782         {                       <span class="comment">/* stdux rX,r1,rY */</span>
<a name="l01783"></a>01783           <span class="comment">/* No way to figure out what r1 is going to be.  */</span>
<a name="l01784"></a>01784           fdata-&gt;<a class="code" href="structrs6000__framedata.html#a436f9ab06e8bf4bc5b690ac6bac79d09">frameless</a> = 0;
<a name="l01785"></a>01785           offset = fdata-&gt;<a class="code" href="structrs6000__framedata.html#a8fe5b77e6c5b1dc69c851c79fd67352b">offset</a>;
<a name="l01786"></a>01786           <span class="keywordflow">continue</span>;
<a name="l01787"></a>01787         }
<a name="l01788"></a>01788       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((op &amp; 0xffff0000) == 0x38210000)
<a name="l01789"></a>01789         {                       <span class="comment">/* addi r1,r1,SIMM */</span>
<a name="l01790"></a>01790           fdata-&gt;<a class="code" href="structrs6000__framedata.html#a436f9ab06e8bf4bc5b690ac6bac79d09">frameless</a> = 0;
<a name="l01791"></a>01791           fdata-&gt;<a class="code" href="structrs6000__framedata.html#a8fe5b77e6c5b1dc69c851c79fd67352b">offset</a> += <a class="code" href="rs6000-tdep_8c.html#a5dec9f2118293c49911bbb987b9f9d82">SIGNED_SHORT</a> (op);
<a name="l01792"></a>01792           offset = fdata-&gt;<a class="code" href="structrs6000__framedata.html#a8fe5b77e6c5b1dc69c851c79fd67352b">offset</a>;
<a name="l01793"></a>01793           <span class="keywordflow">continue</span>;
<a name="l01794"></a>01794         }
<a name="l01795"></a>01795       <span class="comment">/* Load up minimal toc pointer.  Do not treat an epilogue restore</span>
<a name="l01796"></a>01796 <span class="comment">         of r31 as a minimal TOC load.  */</span>
<a name="l01797"></a>01797       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((op &gt;&gt; 22) == 0x20f     ||      <span class="comment">/* l r31,... or l r30,...  */</span>
<a name="l01798"></a>01798                (op &gt;&gt; 22) == 0x3af)             <span class="comment">/* ld r31,... or ld r30,...  */</span>
<a name="l01799"></a>01799                &amp;&amp; !framep
<a name="l01800"></a>01800                &amp;&amp; !minimal_toc_loaded)
<a name="l01801"></a>01801         {
<a name="l01802"></a>01802           minimal_toc_loaded = 1;
<a name="l01803"></a>01803           <span class="keywordflow">continue</span>;
<a name="l01804"></a>01804 
<a name="l01805"></a>01805           <span class="comment">/* move parameters from argument registers to local variable</span>
<a name="l01806"></a>01806 <span class="comment">             registers */</span>
<a name="l01807"></a>01807         }
<a name="l01808"></a>01808       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((op &amp; 0xfc0007fe) == 0x7c000378 &amp;&amp;       <span class="comment">/* mr(.)  Rx,Ry */</span>
<a name="l01809"></a>01809                (((op &gt;&gt; 21) &amp; 31) &gt;= 3) &amp;&amp;              <span class="comment">/* R3 &gt;= Ry &gt;= R10 */</span>
<a name="l01810"></a>01810                (((op &gt;&gt; 21) &amp; 31) &lt;= 10) &amp;&amp;
<a name="l01811"></a>01811                ((<span class="keywordtype">long</span>) ((op &gt;&gt; 16) &amp; 31)
<a name="l01812"></a>01812                 &gt;= fdata-&gt;<a class="code" href="structrs6000__framedata.html#a864b62d4fb50dd86d9f15e5aab678764">saved_gpr</a>)) <span class="comment">/* Rx: local var reg */</span>
<a name="l01813"></a>01813         {
<a name="l01814"></a>01814           <span class="keywordflow">continue</span>;
<a name="l01815"></a>01815 
<a name="l01816"></a>01816           <span class="comment">/* store parameters in stack */</span>
<a name="l01817"></a>01817         }
<a name="l01818"></a>01818       <span class="comment">/* Move parameters from argument registers to temporary register.  */</span>
<a name="l01819"></a>01819       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="rs6000-tdep_8c.html#a08693b73f2b9c54d6a03f08dfb457c12">store_param_on_stack_p</a> (op, framep, &amp;r0_contains_arg))
<a name="l01820"></a>01820         {
<a name="l01821"></a>01821           <span class="keywordflow">continue</span>;
<a name="l01822"></a>01822 
<a name="l01823"></a>01823           <span class="comment">/* Set up frame pointer */</span>
<a name="l01824"></a>01824         }
<a name="l01825"></a>01825       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op == 0x603d0000)       <span class="comment">/* oril r29, r1, 0x0 */</span>
<a name="l01826"></a>01826         {
<a name="l01827"></a>01827           fdata-&gt;<a class="code" href="structrs6000__framedata.html#a436f9ab06e8bf4bc5b690ac6bac79d09">frameless</a> = 0;
<a name="l01828"></a>01828           framep = 1;
<a name="l01829"></a>01829           fdata-&gt;<a class="code" href="structrs6000__framedata.html#a03be24b999043cf63a67b948f0d5b7a3">alloca_reg</a> = (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a764a18b9d437c88d6ad174febf29aeeb">ppc_gp0_regnum</a> + 29);
<a name="l01830"></a>01830           <span class="keywordflow">continue</span>;
<a name="l01831"></a>01831 
<a name="l01832"></a>01832           <span class="comment">/* Another way to set up the frame pointer.  */</span>
<a name="l01833"></a>01833         }
<a name="l01834"></a>01834       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op == 0x603f0000 <span class="comment">/* oril r31, r1, 0x0 */</span>
<a name="l01835"></a>01835                || op == 0x7c3f0b78)
<a name="l01836"></a>01836         {                       <span class="comment">/* mr r31, r1 */</span>
<a name="l01837"></a>01837           fdata-&gt;<a class="code" href="structrs6000__framedata.html#a436f9ab06e8bf4bc5b690ac6bac79d09">frameless</a> = 0;
<a name="l01838"></a>01838           framep = 1;
<a name="l01839"></a>01839           fdata-&gt;<a class="code" href="structrs6000__framedata.html#a03be24b999043cf63a67b948f0d5b7a3">alloca_reg</a> = (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a764a18b9d437c88d6ad174febf29aeeb">ppc_gp0_regnum</a> + 31);
<a name="l01840"></a>01840           <span class="keywordflow">continue</span>;
<a name="l01841"></a>01841 
<a name="l01842"></a>01842           <span class="comment">/* Another way to set up the frame pointer.  */</span>
<a name="l01843"></a>01843         }
<a name="l01844"></a>01844       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((op &amp; 0xfc1fffff) == 0x38010000)
<a name="l01845"></a>01845         {                       <span class="comment">/* addi rX, r1, 0x0 */</span>
<a name="l01846"></a>01846           fdata-&gt;<a class="code" href="structrs6000__framedata.html#a436f9ab06e8bf4bc5b690ac6bac79d09">frameless</a> = 0;
<a name="l01847"></a>01847           framep = 1;
<a name="l01848"></a>01848           fdata-&gt;<a class="code" href="structrs6000__framedata.html#a03be24b999043cf63a67b948f0d5b7a3">alloca_reg</a> = (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a764a18b9d437c88d6ad174febf29aeeb">ppc_gp0_regnum</a>
<a name="l01849"></a>01849                                + ((op &amp; ~0x38010000) &gt;&gt; 21));
<a name="l01850"></a>01850           <span class="keywordflow">continue</span>;
<a name="l01851"></a>01851         }
<a name="l01852"></a>01852       <span class="comment">/* AltiVec related instructions.  */</span>
<a name="l01853"></a>01853       <span class="comment">/* Store the vrsave register (spr 256) in another register for</span>
<a name="l01854"></a>01854 <span class="comment">         later manipulation, or load a register into the vrsave</span>
<a name="l01855"></a>01855 <span class="comment">         register.  2 instructions are used: mfvrsave and</span>
<a name="l01856"></a>01856 <span class="comment">         mtvrsave.  They are shorthand notation for mfspr Rn, SPR256</span>
<a name="l01857"></a>01857 <span class="comment">         and mtspr SPR256, Rn.  */</span>
<a name="l01858"></a>01858       <span class="comment">/* mfspr Rn SPR256 == 011111 nnnnn 0000001000 01010100110</span>
<a name="l01859"></a>01859 <span class="comment">         mtspr SPR256 Rn == 011111 nnnnn 0000001000 01110100110  */</span>
<a name="l01860"></a>01860       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((op &amp; 0xfc1fffff) == 0x7c0042a6)    <span class="comment">/* mfvrsave Rn */</span>
<a name="l01861"></a>01861         {
<a name="l01862"></a>01862           vrsave_reg = <a class="code" href="rs6000-tdep_8c.html#a972a641280269b03b6a213a9a919130e">GET_SRC_REG</a> (op);
<a name="l01863"></a>01863           <span class="keywordflow">continue</span>;
<a name="l01864"></a>01864         }
<a name="l01865"></a>01865       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((op &amp; 0xfc1fffff) == 0x7c0043a6)     <span class="comment">/* mtvrsave Rn */</span>
<a name="l01866"></a>01866         {
<a name="l01867"></a>01867           <span class="keywordflow">continue</span>;
<a name="l01868"></a>01868         }
<a name="l01869"></a>01869       <span class="comment">/* Store the register where vrsave was saved to onto the stack:</span>
<a name="l01870"></a>01870 <span class="comment">         rS is the register where vrsave was stored in a previous</span>
<a name="l01871"></a>01871 <span class="comment">         instruction.  */</span>
<a name="l01872"></a>01872       <span class="comment">/* 100100 sssss 00001 dddddddd dddddddd */</span>
<a name="l01873"></a>01873       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((op &amp; 0xfc1f0000) == 0x90010000)     <span class="comment">/* stw rS, d(r1) */</span>
<a name="l01874"></a>01874         {
<a name="l01875"></a>01875           <span class="keywordflow">if</span> (vrsave_reg == <a class="code" href="rs6000-tdep_8c.html#a972a641280269b03b6a213a9a919130e">GET_SRC_REG</a> (op))
<a name="l01876"></a>01876             {
<a name="l01877"></a>01877               fdata-&gt;<a class="code" href="structrs6000__framedata.html#a67412926b0bc9283dce4f19c2009693a">vrsave_offset</a> = <a class="code" href="rs6000-tdep_8c.html#a5dec9f2118293c49911bbb987b9f9d82">SIGNED_SHORT</a> (op) + <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l01878"></a>01878               vrsave_reg = -1;
<a name="l01879"></a>01879             }
<a name="l01880"></a>01880           <span class="keywordflow">continue</span>;
<a name="l01881"></a>01881         }
<a name="l01882"></a>01882       <span class="comment">/* Compute the new value of vrsave, by modifying the register</span>
<a name="l01883"></a>01883 <span class="comment">         where vrsave was saved to.  */</span>
<a name="l01884"></a>01884       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((op &amp; 0xfc000000) == 0x64000000)    <span class="comment">/* oris Ra, Rs, UIMM */</span>
<a name="l01885"></a>01885                || ((op &amp; 0xfc000000) == 0x60000000))<span class="comment">/* ori Ra, Rs, UIMM */</span>
<a name="l01886"></a>01886         {
<a name="l01887"></a>01887           <span class="keywordflow">continue</span>;
<a name="l01888"></a>01888         }
<a name="l01889"></a>01889       <span class="comment">/* li r0, SIMM (short for addi r0, 0, SIMM).  This is the first</span>
<a name="l01890"></a>01890 <span class="comment">         in a pair of insns to save the vector registers on the</span>
<a name="l01891"></a>01891 <span class="comment">         stack.  */</span>
<a name="l01892"></a>01892       <span class="comment">/* 001110 00000 00000 iiii iiii iiii iiii  */</span>
<a name="l01893"></a>01893       <span class="comment">/* 001110 01110 00000 iiii iiii iiii iiii  */</span>
<a name="l01894"></a>01894       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((op &amp; 0xffff0000) == 0x38000000         <span class="comment">/* li r0, SIMM */</span>
<a name="l01895"></a>01895                || (op &amp; 0xffff0000) == 0x39c00000)     <span class="comment">/* li r14, SIMM */</span>
<a name="l01896"></a>01896         {
<a name="l01897"></a>01897           <span class="keywordflow">if</span> ((op &amp; 0xffff0000) == 0x38000000)
<a name="l01898"></a>01898             r0_contains_arg = 0;
<a name="l01899"></a>01899           li_found_pc = <a class="code" href="structsymtab__and__line.html#a77665fa461ad187cb755efa256ba44d7">pc</a>;
<a name="l01900"></a>01900           vr_saved_offset = <a class="code" href="rs6000-tdep_8c.html#a5dec9f2118293c49911bbb987b9f9d82">SIGNED_SHORT</a> (op);
<a name="l01901"></a>01901 
<a name="l01902"></a>01902           <span class="comment">/* This insn by itself is not part of the prologue, unless</span>
<a name="l01903"></a>01903 <span class="comment">             if part of the pair of insns mentioned above.  So do not</span>
<a name="l01904"></a>01904 <span class="comment">             record this insn as part of the prologue yet.  */</span>
<a name="l01905"></a>01905           prev_insn_was_prologue_insn = 0;
<a name="l01906"></a>01906         }
<a name="l01907"></a>01907       <span class="comment">/* Store vector register S at (r31+r0) aligned to 16 bytes.  */</span>      
<a name="l01908"></a>01908       <span class="comment">/* 011111 sssss 11111 00000 00111001110 */</span>
<a name="l01909"></a>01909       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((op &amp; 0xfc1fffff) == 0x7c1f01ce)   <span class="comment">/* stvx Vs, R31, R0 */</span>
<a name="l01910"></a>01910         {
<a name="l01911"></a>01911           <span class="keywordflow">if</span> (pc == (li_found_pc + 4))
<a name="l01912"></a>01912             {
<a name="l01913"></a>01913               vr_reg = <a class="code" href="rs6000-tdep_8c.html#a972a641280269b03b6a213a9a919130e">GET_SRC_REG</a> (op);
<a name="l01914"></a>01914               <span class="comment">/* If this is the first vector reg to be saved, or if</span>
<a name="l01915"></a>01915 <span class="comment">                 it has a lower number than others previously seen,</span>
<a name="l01916"></a>01916 <span class="comment">                 reupdate the frame info.  */</span>
<a name="l01917"></a>01917               <span class="keywordflow">if</span> (fdata-&gt;<a class="code" href="structrs6000__framedata.html#a5c109de762bc0529776b89089ae3a9cc">saved_vr</a> == -1 || fdata-&gt;<a class="code" href="structrs6000__framedata.html#a5c109de762bc0529776b89089ae3a9cc">saved_vr</a> &gt; vr_reg)
<a name="l01918"></a>01918                 {
<a name="l01919"></a>01919                   fdata-&gt;<a class="code" href="structrs6000__framedata.html#a5c109de762bc0529776b89089ae3a9cc">saved_vr</a> = vr_reg;
<a name="l01920"></a>01920                   fdata-&gt;<a class="code" href="structrs6000__framedata.html#a26faa448c2d4ce25ea90239b7bbaeefc">vr_offset</a> = vr_saved_offset + <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l01921"></a>01921                 }
<a name="l01922"></a>01922               vr_saved_offset = -1;
<a name="l01923"></a>01923               vr_reg = -1;
<a name="l01924"></a>01924               li_found_pc = 0;
<a name="l01925"></a>01925             }
<a name="l01926"></a>01926         }
<a name="l01927"></a>01927       <span class="comment">/* End AltiVec related instructions.  */</span>
<a name="l01928"></a>01928 
<a name="l01929"></a>01929       <span class="comment">/* Start BookE related instructions.  */</span>
<a name="l01930"></a>01930       <span class="comment">/* Store gen register S at (r31+uimm).</span>
<a name="l01931"></a>01931 <span class="comment">         Any register less than r13 is volatile, so we don&#39;t care.  */</span>
<a name="l01932"></a>01932       <span class="comment">/* 000100 sssss 11111 iiiii 01100100001 */</span>
<a name="l01933"></a>01933       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (arch_info-&gt;mach == bfd_mach_ppc_e500
<a name="l01934"></a>01934                &amp;&amp; (op &amp; 0xfc1f07ff) == 0x101f0321)    <span class="comment">/* evstdd Rs,uimm(R31) */</span>
<a name="l01935"></a>01935         {
<a name="l01936"></a>01936           <span class="keywordflow">if</span> ((op &amp; 0x03e00000) &gt;= 0x01a00000)  <span class="comment">/* Rs &gt;= r13 */</span>
<a name="l01937"></a>01937             {
<a name="l01938"></a>01938               <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> imm;
<a name="l01939"></a>01939               ev_reg = <a class="code" href="rs6000-tdep_8c.html#a972a641280269b03b6a213a9a919130e">GET_SRC_REG</a> (op);
<a name="l01940"></a>01940               imm = (op &gt;&gt; 11) &amp; 0x1f;
<a name="l01941"></a>01941               ev_offset = imm * 8;
<a name="l01942"></a>01942               <span class="comment">/* If this is the first vector reg to be saved, or if</span>
<a name="l01943"></a>01943 <span class="comment">                 it has a lower number than others previously seen,</span>
<a name="l01944"></a>01944 <span class="comment">                 reupdate the frame info.  */</span>
<a name="l01945"></a>01945               <span class="keywordflow">if</span> (fdata-&gt;<a class="code" href="structrs6000__framedata.html#a84900e94cb40683900fd7a0c8cd0875d">saved_ev</a> == -1 || fdata-&gt;<a class="code" href="structrs6000__framedata.html#a84900e94cb40683900fd7a0c8cd0875d">saved_ev</a> &gt; ev_reg)
<a name="l01946"></a>01946                 {
<a name="l01947"></a>01947                   fdata-&gt;<a class="code" href="structrs6000__framedata.html#a84900e94cb40683900fd7a0c8cd0875d">saved_ev</a> = ev_reg;
<a name="l01948"></a>01948                   fdata-&gt;<a class="code" href="structrs6000__framedata.html#ae19b25bb053617d10675690b2d5d940d">ev_offset</a> = ev_offset + <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l01949"></a>01949                 }
<a name="l01950"></a>01950             }
<a name="l01951"></a>01951           <span class="keywordflow">continue</span>;
<a name="l01952"></a>01952         }
<a name="l01953"></a>01953       <span class="comment">/* Store gen register rS at (r1+rB).  */</span>
<a name="l01954"></a>01954       <span class="comment">/* 000100 sssss 00001 bbbbb 01100100000 */</span>
<a name="l01955"></a>01955       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (arch_info-&gt;mach == bfd_mach_ppc_e500
<a name="l01956"></a>01956                &amp;&amp; (op &amp; 0xffe007ff) == 0x13e00320)     <span class="comment">/* evstddx RS,R1,Rb */</span>
<a name="l01957"></a>01957         {
<a name="l01958"></a>01958           <span class="keywordflow">if</span> (pc == (li_found_pc + 4))
<a name="l01959"></a>01959             {
<a name="l01960"></a>01960               ev_reg = <a class="code" href="rs6000-tdep_8c.html#a972a641280269b03b6a213a9a919130e">GET_SRC_REG</a> (op);
<a name="l01961"></a>01961               <span class="comment">/* If this is the first vector reg to be saved, or if</span>
<a name="l01962"></a>01962 <span class="comment">                 it has a lower number than others previously seen,</span>
<a name="l01963"></a>01963 <span class="comment">                 reupdate the frame info.  */</span>
<a name="l01964"></a>01964               <span class="comment">/* We know the contents of rB from the previous instruction.  */</span>
<a name="l01965"></a>01965               <span class="keywordflow">if</span> (fdata-&gt;<a class="code" href="structrs6000__framedata.html#a84900e94cb40683900fd7a0c8cd0875d">saved_ev</a> == -1 || fdata-&gt;<a class="code" href="structrs6000__framedata.html#a84900e94cb40683900fd7a0c8cd0875d">saved_ev</a> &gt; ev_reg)
<a name="l01966"></a>01966                 {
<a name="l01967"></a>01967                   fdata-&gt;<a class="code" href="structrs6000__framedata.html#a84900e94cb40683900fd7a0c8cd0875d">saved_ev</a> = ev_reg;
<a name="l01968"></a>01968                   fdata-&gt;<a class="code" href="structrs6000__framedata.html#ae19b25bb053617d10675690b2d5d940d">ev_offset</a> = vr_saved_offset + <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l01969"></a>01969                 }
<a name="l01970"></a>01970               vr_saved_offset = -1;
<a name="l01971"></a>01971               ev_reg = -1;
<a name="l01972"></a>01972               li_found_pc = 0;
<a name="l01973"></a>01973             }
<a name="l01974"></a>01974           <span class="keywordflow">continue</span>;
<a name="l01975"></a>01975         }
<a name="l01976"></a>01976       <span class="comment">/* Store gen register r31 at (rA+uimm).  */</span>
<a name="l01977"></a>01977       <span class="comment">/* 000100 11111 aaaaa iiiii 01100100001 */</span>
<a name="l01978"></a>01978       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (arch_info-&gt;mach == bfd_mach_ppc_e500
<a name="l01979"></a>01979                &amp;&amp; (op &amp; 0xffe007ff) == 0x13e00321)   <span class="comment">/* evstdd R31,Ra,UIMM */</span>
<a name="l01980"></a>01980         {
<a name="l01981"></a>01981           <span class="comment">/* Wwe know that the source register is 31 already, but</span>
<a name="l01982"></a>01982 <span class="comment">             it can&#39;t hurt to compute it.  */</span>
<a name="l01983"></a>01983           ev_reg = <a class="code" href="rs6000-tdep_8c.html#a972a641280269b03b6a213a9a919130e">GET_SRC_REG</a> (op);
<a name="l01984"></a>01984           ev_offset = ((op &gt;&gt; 11) &amp; 0x1f) * 8;
<a name="l01985"></a>01985           <span class="comment">/* If this is the first vector reg to be saved, or if</span>
<a name="l01986"></a>01986 <span class="comment">             it has a lower number than others previously seen,</span>
<a name="l01987"></a>01987 <span class="comment">             reupdate the frame info.  */</span>
<a name="l01988"></a>01988           <span class="keywordflow">if</span> (fdata-&gt;<a class="code" href="structrs6000__framedata.html#a84900e94cb40683900fd7a0c8cd0875d">saved_ev</a> == -1 || fdata-&gt;<a class="code" href="structrs6000__framedata.html#a84900e94cb40683900fd7a0c8cd0875d">saved_ev</a> &gt; ev_reg)
<a name="l01989"></a>01989             {
<a name="l01990"></a>01990               fdata-&gt;<a class="code" href="structrs6000__framedata.html#a84900e94cb40683900fd7a0c8cd0875d">saved_ev</a> = ev_reg;
<a name="l01991"></a>01991               fdata-&gt;<a class="code" href="structrs6000__framedata.html#ae19b25bb053617d10675690b2d5d940d">ev_offset</a> = ev_offset + <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l01992"></a>01992             }
<a name="l01993"></a>01993 
<a name="l01994"></a>01994           <span class="keywordflow">continue</span>;
<a name="l01995"></a>01995         }
<a name="l01996"></a>01996       <span class="comment">/* Store gen register S at (r31+r0).</span>
<a name="l01997"></a>01997 <span class="comment">         Store param on stack when offset from SP bigger than 4 bytes.  */</span>
<a name="l01998"></a>01998       <span class="comment">/* 000100 sssss 11111 00000 01100100000 */</span>
<a name="l01999"></a>01999       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (arch_info-&gt;mach == bfd_mach_ppc_e500
<a name="l02000"></a>02000                &amp;&amp; (op &amp; 0xfc1fffff) == 0x101f0320)     <span class="comment">/* evstddx Rs,R31,R0 */</span>
<a name="l02001"></a>02001         {
<a name="l02002"></a>02002           <span class="keywordflow">if</span> (pc == (li_found_pc + 4))
<a name="l02003"></a>02003             {
<a name="l02004"></a>02004               <span class="keywordflow">if</span> ((op &amp; 0x03e00000) &gt;= 0x01a00000)
<a name="l02005"></a>02005                 {
<a name="l02006"></a>02006                   ev_reg = <a class="code" href="rs6000-tdep_8c.html#a972a641280269b03b6a213a9a919130e">GET_SRC_REG</a> (op);
<a name="l02007"></a>02007                   <span class="comment">/* If this is the first vector reg to be saved, or if</span>
<a name="l02008"></a>02008 <span class="comment">                     it has a lower number than others previously seen,</span>
<a name="l02009"></a>02009 <span class="comment">                     reupdate the frame info.  */</span>
<a name="l02010"></a>02010                   <span class="comment">/* We know the contents of r0 from the previous</span>
<a name="l02011"></a>02011 <span class="comment">                     instruction.  */</span>
<a name="l02012"></a>02012                   <span class="keywordflow">if</span> (fdata-&gt;<a class="code" href="structrs6000__framedata.html#a84900e94cb40683900fd7a0c8cd0875d">saved_ev</a> == -1 || fdata-&gt;<a class="code" href="structrs6000__framedata.html#a84900e94cb40683900fd7a0c8cd0875d">saved_ev</a> &gt; ev_reg)
<a name="l02013"></a>02013                     {
<a name="l02014"></a>02014                       fdata-&gt;<a class="code" href="structrs6000__framedata.html#a84900e94cb40683900fd7a0c8cd0875d">saved_ev</a> = ev_reg;
<a name="l02015"></a>02015                       fdata-&gt;<a class="code" href="structrs6000__framedata.html#ae19b25bb053617d10675690b2d5d940d">ev_offset</a> = vr_saved_offset + <a class="code" href="common_2agent_8c.html#aed7ea92f45bd273dde380a45ddced592">offset</a>;
<a name="l02016"></a>02016                     }
<a name="l02017"></a>02017                   ev_reg = -1;
<a name="l02018"></a>02018                 }
<a name="l02019"></a>02019               vr_saved_offset = -1;
<a name="l02020"></a>02020               li_found_pc = 0;
<a name="l02021"></a>02021               <span class="keywordflow">continue</span>;
<a name="l02022"></a>02022             }
<a name="l02023"></a>02023         }
<a name="l02024"></a>02024       <span class="comment">/* End BookE related instructions.  */</span>
<a name="l02025"></a>02025 
<a name="l02026"></a>02026       <span class="keywordflow">else</span>
<a name="l02027"></a>02027         {
<a name="l02028"></a>02028           <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> all_mask = ~((1U &lt;&lt; fdata-&gt;<a class="code" href="structrs6000__framedata.html#a864b62d4fb50dd86d9f15e5aab678764">saved_gpr</a>) - 1);
<a name="l02029"></a>02029 
<a name="l02030"></a>02030           <span class="comment">/* Not a recognized prologue instruction.</span>
<a name="l02031"></a>02031 <span class="comment">             Handle optimizer code motions into the prologue by continuing</span>
<a name="l02032"></a>02032 <span class="comment">             the search if we have no valid frame yet or if the return</span>
<a name="l02033"></a>02033 <span class="comment">             address is not yet saved in the frame.  Also skip instructions</span>
<a name="l02034"></a>02034 <span class="comment">             if some of the GPRs expected to be saved are not yet saved.  */</span>
<a name="l02035"></a>02035           <span class="keywordflow">if</span> (fdata-&gt;<a class="code" href="structrs6000__framedata.html#a436f9ab06e8bf4bc5b690ac6bac79d09">frameless</a> == 0 &amp;&amp; fdata-&gt;<a class="code" href="structrs6000__framedata.html#a44637c0480218aab1598a68e6a720180">nosavedpc</a> == 0
<a name="l02036"></a>02036               &amp;&amp; (fdata-&gt;<a class="code" href="structrs6000__framedata.html#a2f00dfad4edfd39a6f6d24c094ab1d7d">gpr_mask</a> &amp; all_mask) == all_mask)
<a name="l02037"></a>02037             <span class="keywordflow">break</span>;
<a name="l02038"></a>02038 
<a name="l02039"></a>02039           <span class="keywordflow">if</span> (op == 0x4e800020          <span class="comment">/* blr */</span>
<a name="l02040"></a>02040               || op == 0x4e800420)      <span class="comment">/* bctr */</span>
<a name="l02041"></a>02041             <span class="comment">/* Do not scan past epilogue in frameless functions or</span>
<a name="l02042"></a>02042 <span class="comment">               trampolines.  */</span>
<a name="l02043"></a>02043             <span class="keywordflow">break</span>;
<a name="l02044"></a>02044           <span class="keywordflow">if</span> ((op &amp; 0xf4000000) == 0x40000000) <span class="comment">/* bxx */</span>
<a name="l02045"></a>02045             <span class="comment">/* Never skip branches.  */</span>
<a name="l02046"></a>02046             <span class="keywordflow">break</span>;
<a name="l02047"></a>02047 
<a name="l02048"></a>02048           <span class="keywordflow">if</span> (num_skip_non_prologue_insns++ &gt; <a class="code" href="rs6000-tdep_8c.html#a94661c16b868b6be11fbaf3e5d6f0da5">max_skip_non_prologue_insns</a>)
<a name="l02049"></a>02049             <span class="comment">/* Do not scan too many insns, scanning insns is expensive with</span>
<a name="l02050"></a>02050 <span class="comment">               remote targets.  */</span>
<a name="l02051"></a>02051             <span class="keywordflow">break</span>;
<a name="l02052"></a>02052 
<a name="l02053"></a>02053           <span class="comment">/* Continue scanning.  */</span>
<a name="l02054"></a>02054           prev_insn_was_prologue_insn = 0;
<a name="l02055"></a>02055           <span class="keywordflow">continue</span>;
<a name="l02056"></a>02056         }
<a name="l02057"></a>02057     }
<a name="l02058"></a>02058 
<a name="l02059"></a>02059 <span class="preprocessor">#if 0</span>
<a name="l02060"></a>02060 <span class="preprocessor"></span><span class="comment">/* I have problems with skipping over __main() that I need to address</span>
<a name="l02061"></a>02061 <span class="comment"> * sometime.  Previously, I used to use misc_function_vector which</span>
<a name="l02062"></a>02062 <span class="comment"> * didn&#39;t work as well as I wanted to be.  -MGO */</span>
<a name="l02063"></a>02063 
<a name="l02064"></a>02064   <span class="comment">/* If the first thing after skipping a prolog is a branch to a function,</span>
<a name="l02065"></a>02065 <span class="comment">     this might be a call to an initializer in main(), introduced by gcc2.</span>
<a name="l02066"></a>02066 <span class="comment">     We&#39;d like to skip over it as well.  Fortunately, xlc does some extra</span>
<a name="l02067"></a>02067 <span class="comment">     work before calling a function right after a prologue, thus we can</span>
<a name="l02068"></a>02068 <span class="comment">     single out such gcc2 behaviour.  */</span>
<a name="l02069"></a>02069 
<a name="l02070"></a>02070 
<a name="l02071"></a>02071   <span class="keywordflow">if</span> ((op &amp; 0xfc000001) == 0x48000001)
<a name="l02072"></a>02072     {                           <span class="comment">/* bl foo, an initializer function?  */</span>
<a name="l02073"></a>02073       op = <a class="code" href="corefile_8c.html#a7097ab90f56ed7bcceb190bab139621b">read_memory_integer</a> (pc + 4, 4, byte_order);
<a name="l02074"></a>02074 
<a name="l02075"></a>02075       <span class="keywordflow">if</span> (op == 0x4def7b82)
<a name="l02076"></a>02076         {                       <span class="comment">/* cror 0xf, 0xf, 0xf (nop) */</span>
<a name="l02077"></a>02077 
<a name="l02078"></a>02078           <span class="comment">/* Check and see if we are in main.  If so, skip over this</span>
<a name="l02079"></a>02079 <span class="comment">             initializer function as well.  */</span>
<a name="l02080"></a>02080 
<a name="l02081"></a>02081           tmp = find_pc_misc_function (pc);
<a name="l02082"></a>02082           <span class="keywordflow">if</span> (tmp &gt;= 0
<a name="l02083"></a>02083               &amp;&amp; strcmp (misc_function_vector[tmp].<a class="code" href="aarch64-tdep_8c.html#acc128f98d9ceca227038c771308eff39">name</a>, <a class="code" href="symtab_8c.html#ab9c2af1ae780c38e00aefb141f836dce">main_name</a> ()) == 0)
<a name="l02084"></a>02084             <span class="keywordflow">return</span> pc + 8;
<a name="l02085"></a>02085         }
<a name="l02086"></a>02086     }
<a name="l02087"></a>02087 <span class="preprocessor">#endif </span><span class="comment">/* 0 */</span>
<a name="l02088"></a>02088 
<a name="l02089"></a>02089   <span class="keywordflow">if</span> (pc == lim_pc &amp;&amp; lr_reg &gt;= 0)
<a name="l02090"></a>02090     fdata-&gt;<a class="code" href="structrs6000__framedata.html#a927eceb33f6ffca4ad573494e0ac164b">lr_register</a> = lr_reg;
<a name="l02091"></a>02091 
<a name="l02092"></a>02092   fdata-&gt;<a class="code" href="structrs6000__framedata.html#a8fe5b77e6c5b1dc69c851c79fd67352b">offset</a> = -fdata-&gt;<a class="code" href="structrs6000__framedata.html#a8fe5b77e6c5b1dc69c851c79fd67352b">offset</a>;
<a name="l02093"></a>02093   <span class="keywordflow">return</span> last_prologue_pc;
<a name="l02094"></a>02094 }
<a name="l02095"></a>02095 
<a name="l02096"></a>02096 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l02097"></a><a class="code" href="rs6000-tdep_8c.html#a1db425a3bbf5c9aa8c338e7fa1939e11">02097</a> <a class="code" href="rs6000-tdep_8c.html#a1db425a3bbf5c9aa8c338e7fa1939e11">rs6000_skip_prologue</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="structsymtab__and__line.html#a77665fa461ad187cb755efa256ba44d7">pc</a>)
<a name="l02098"></a>02098 {
<a name="l02099"></a>02099   <span class="keyword">struct </span><a class="code" href="structrs6000__framedata.html">rs6000_framedata</a> frame;
<a name="l02100"></a>02100   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> limit_pc, func_addr, func_end_addr = 0;
<a name="l02101"></a>02101 
<a name="l02102"></a>02102   <span class="comment">/* See if we can determine the end of the prologue via the symbol table.</span>
<a name="l02103"></a>02103 <span class="comment">     If so, then return either PC, or the PC after the prologue, whichever</span>
<a name="l02104"></a>02104 <span class="comment">     is greater.  */</span>
<a name="l02105"></a>02105   <span class="keywordflow">if</span> (<a class="code" href="blockframe_8c.html#a2dae2257ad1417604d2c26f8b9071ca9">find_pc_partial_function</a> (pc, NULL, &amp;func_addr, &amp;func_end_addr))
<a name="l02106"></a>02106     {
<a name="l02107"></a>02107       <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> post_prologue_pc
<a name="l02108"></a>02108         = <a class="code" href="symtab_8c.html#a5e411a18b63476022fe4b9420138ae44">skip_prologue_using_sal</a> (gdbarch, func_addr);
<a name="l02109"></a>02109       <span class="keywordflow">if</span> (post_prologue_pc != 0)
<a name="l02110"></a>02110         <span class="keywordflow">return</span> <a class="code" href="environ_8c.html#affe776513b24d84b39af8ab0930fef7f">max</a> (pc, post_prologue_pc);
<a name="l02111"></a>02111     }
<a name="l02112"></a>02112 
<a name="l02113"></a>02113   <span class="comment">/* Can&#39;t determine prologue from the symbol table, need to examine</span>
<a name="l02114"></a>02114 <span class="comment">     instructions.  */</span>
<a name="l02115"></a>02115 
<a name="l02116"></a>02116   <span class="comment">/* Find an upper limit on the function prologue using the debug</span>
<a name="l02117"></a>02117 <span class="comment">     information.  If the debug information could not be used to provide</span>
<a name="l02118"></a>02118 <span class="comment">     that bound, then use an arbitrary large number as the upper bound.  */</span>
<a name="l02119"></a>02119   limit_pc = <a class="code" href="symtab_8c.html#a5e411a18b63476022fe4b9420138ae44">skip_prologue_using_sal</a> (gdbarch, pc);
<a name="l02120"></a>02120   <span class="keywordflow">if</span> (limit_pc == 0)
<a name="l02121"></a>02121     limit_pc = pc + 100;          <span class="comment">/* Magic.  */</span>
<a name="l02122"></a>02122 
<a name="l02123"></a>02123   <span class="comment">/* Do not allow limit_pc to be past the function end, if we know</span>
<a name="l02124"></a>02124 <span class="comment">     where that end is...  */</span>
<a name="l02125"></a>02125   <span class="keywordflow">if</span> (func_end_addr &amp;&amp; limit_pc &gt; func_end_addr)
<a name="l02126"></a>02126     limit_pc = func_end_addr;
<a name="l02127"></a>02127 
<a name="l02128"></a>02128   pc = <a class="code" href="rs6000-tdep_8c.html#a4120b4f8b77afd1b1ffb16d06b8506e8">skip_prologue</a> (gdbarch, pc, limit_pc, &amp;frame);
<a name="l02129"></a>02129   <span class="keywordflow">return</span> pc;
<a name="l02130"></a>02130 }
<a name="l02131"></a>02131 
<a name="l02132"></a>02132 <span class="comment">/* When compiling for EABI, some versions of GCC emit a call to __eabi</span>
<a name="l02133"></a>02133 <span class="comment">   in the prologue of main().</span>
<a name="l02134"></a>02134 <span class="comment"></span>
<a name="l02135"></a>02135 <span class="comment">   The function below examines the code pointed at by PC and checks to</span>
<a name="l02136"></a>02136 <span class="comment">   see if it corresponds to a call to __eabi.  If so, it returns the</span>
<a name="l02137"></a>02137 <span class="comment">   address of the instruction following that call.  Otherwise, it simply</span>
<a name="l02138"></a>02138 <span class="comment">   returns PC.  */</span>
<a name="l02139"></a>02139 
<a name="l02140"></a>02140 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l02141"></a><a class="code" href="rs6000-tdep_8c.html#aec5e6d055bc0b7ec24e3a7491068d35b">02141</a> <a class="code" href="rs6000-tdep_8c.html#aec5e6d055bc0b7ec24e3a7491068d35b">rs6000_skip_main_prologue</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc)
<a name="l02142"></a>02142 {
<a name="l02143"></a>02143   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l02144"></a>02144   <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> buf[4];
<a name="l02145"></a>02145   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> op;
<a name="l02146"></a>02146 
<a name="l02147"></a>02147   <span class="keywordflow">if</span> (<a class="code" href="target_8c.html#ac579515fbccfb9e6b1a45766a71c1d4f">target_read_memory</a> (pc, buf, 4))
<a name="l02148"></a>02148     <span class="keywordflow">return</span> pc;
<a name="l02149"></a>02149   op = <a class="code" href="defs_8h.html#a99aec65329508b4d449a4f881026f844">extract_unsigned_integer</a> (buf, 4, byte_order);
<a name="l02150"></a>02150 
<a name="l02151"></a>02151   <span class="keywordflow">if</span> ((op &amp; <a class="code" href="rs6000-tdep_8c.html#a516d500171458b4221584a986fd7eb2d">BL_MASK</a>) == <a class="code" href="rs6000-tdep_8c.html#a2756ee79e8705fef89694fb6d8705a14">BL_INSTRUCTION</a>)
<a name="l02152"></a>02152     {
<a name="l02153"></a>02153       <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> displ = op &amp; <a class="code" href="rs6000-tdep_8c.html#a7e19e942e94b84f6f8da743255b73fa5">BL_DISPLACEMENT_MASK</a>;
<a name="l02154"></a>02154       <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> call_dest = pc + 4 + displ;
<a name="l02155"></a>02155       <span class="keyword">struct </span><a class="code" href="structbound__minimal__symbol.html">bound_minimal_symbol</a> s = <a class="code" href="minsyms_8c.html#ad4b48b6ef6c913138a8ac33f8c3cfeb2">lookup_minimal_symbol_by_pc</a> (call_dest);
<a name="l02156"></a>02156 
<a name="l02157"></a>02157       <span class="comment">/* We check for ___eabi (three leading underscores) in addition</span>
<a name="l02158"></a>02158 <span class="comment">         to __eabi in case the GCC option &quot;-fleading-underscore&quot; was</span>
<a name="l02159"></a>02159 <span class="comment">         used to compile the program.  */</span>
<a name="l02160"></a>02160       <span class="keywordflow">if</span> (s.<a class="code" href="structbound__minimal__symbol.html#aabff08898c1d96d6c68a95f35b635214">minsym</a> != NULL
<a name="l02161"></a>02161           &amp;&amp; <a class="code" href="symtab_8h.html#a956b56288511a18b855d8a263d60e87f">SYMBOL_LINKAGE_NAME</a> (s.<a class="code" href="structbound__minimal__symbol.html#aabff08898c1d96d6c68a95f35b635214">minsym</a>) != NULL
<a name="l02162"></a>02162           &amp;&amp; (strcmp (<a class="code" href="symtab_8h.html#a956b56288511a18b855d8a263d60e87f">SYMBOL_LINKAGE_NAME</a> (s.<a class="code" href="structbound__minimal__symbol.html#aabff08898c1d96d6c68a95f35b635214">minsym</a>), <span class="stringliteral">&quot;__eabi&quot;</span>) == 0
<a name="l02163"></a>02163               || strcmp (<a class="code" href="symtab_8h.html#a956b56288511a18b855d8a263d60e87f">SYMBOL_LINKAGE_NAME</a> (s.<a class="code" href="structbound__minimal__symbol.html#aabff08898c1d96d6c68a95f35b635214">minsym</a>), <span class="stringliteral">&quot;___eabi&quot;</span>) == 0))
<a name="l02164"></a>02164         pc += 4;
<a name="l02165"></a>02165     }
<a name="l02166"></a>02166   <span class="keywordflow">return</span> pc;
<a name="l02167"></a>02167 }
<a name="l02168"></a>02168 
<a name="l02169"></a>02169 <span class="comment">/* All the ABI&#39;s require 16 byte alignment.  */</span>
<a name="l02170"></a>02170 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l02171"></a><a class="code" href="rs6000-tdep_8c.html#aa901f1caa05a1174d892287aa4abb0e7">02171</a> <a class="code" href="rs6000-tdep_8c.html#aa901f1caa05a1174d892287aa4abb0e7">rs6000_frame_align</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> addr)
<a name="l02172"></a>02172 {
<a name="l02173"></a>02173   <span class="keywordflow">return</span> (addr &amp; -16);
<a name="l02174"></a>02174 }
<a name="l02175"></a>02175 
<a name="l02176"></a>02176 <span class="comment">/* Return whether handle_inferior_event() should proceed through code</span>
<a name="l02177"></a>02177 <span class="comment">   starting at PC in function NAME when stepping.</span>
<a name="l02178"></a>02178 <span class="comment"></span>
<a name="l02179"></a>02179 <span class="comment">   The AIX -bbigtoc linker option generates functions @FIX0, @FIX1, etc. to</span>
<a name="l02180"></a>02180 <span class="comment">   handle memory references that are too distant to fit in instructions</span>
<a name="l02181"></a>02181 <span class="comment">   generated by the compiler.  For example, if &#39;foo&#39; in the following</span>
<a name="l02182"></a>02182 <span class="comment">   instruction:</span>
<a name="l02183"></a>02183 <span class="comment"></span>
<a name="l02184"></a>02184 <span class="comment">     lwz r9,foo(r2)</span>
<a name="l02185"></a>02185 <span class="comment"></span>
<a name="l02186"></a>02186 <span class="comment">   is greater than 32767, the linker might replace the lwz with a branch to</span>
<a name="l02187"></a>02187 <span class="comment">   somewhere in @FIX1 that does the load in 2 instructions and then branches</span>
<a name="l02188"></a>02188 <span class="comment">   back to where execution should continue.</span>
<a name="l02189"></a>02189 <span class="comment"></span>
<a name="l02190"></a>02190 <span class="comment">   GDB should silently step over @FIX code, just like AIX dbx does.</span>
<a name="l02191"></a>02191 <span class="comment">   Unfortunately, the linker uses the &quot;b&quot; instruction for the</span>
<a name="l02192"></a>02192 <span class="comment">   branches, meaning that the link register doesn&#39;t get set.</span>
<a name="l02193"></a>02193 <span class="comment">   Therefore, GDB&#39;s usual step_over_function () mechanism won&#39;t work.</span>
<a name="l02194"></a>02194 <span class="comment"></span>
<a name="l02195"></a>02195 <span class="comment">   Instead, use the gdbarch_skip_trampoline_code and</span>
<a name="l02196"></a>02196 <span class="comment">   gdbarch_skip_trampoline_code hooks in handle_inferior_event() to skip past</span>
<a name="l02197"></a>02197 <span class="comment">   @FIX code.  */</span>
<a name="l02198"></a>02198 
<a name="l02199"></a>02199 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02200"></a><a class="code" href="rs6000-tdep_8c.html#a15657727c66fcacb5d187cf2154388bd">02200</a> <a class="code" href="rs6000-tdep_8c.html#a15657727c66fcacb5d187cf2154388bd">rs6000_in_solib_return_trampoline</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>,
<a name="l02201"></a>02201                                    <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="aarch64-tdep_8c.html#acc128f98d9ceca227038c771308eff39">name</a>)
<a name="l02202"></a>02202 {
<a name="l02203"></a>02203   <span class="keywordflow">return</span> name &amp;&amp; !strncmp (name, <span class="stringliteral">&quot;@FIX&quot;</span>, 4);
<a name="l02204"></a>02204 }
<a name="l02205"></a>02205 
<a name="l02206"></a>02206 <span class="comment">/* Skip code that the user doesn&#39;t want to see when stepping:</span>
<a name="l02207"></a>02207 <span class="comment"></span>
<a name="l02208"></a>02208 <span class="comment">   1. Indirect function calls use a piece of trampoline code to do context</span>
<a name="l02209"></a>02209 <span class="comment">   switching, i.e. to set the new TOC table.  Skip such code if we are on</span>
<a name="l02210"></a>02210 <span class="comment">   its first instruction (as when we have single-stepped to here).</span>
<a name="l02211"></a>02211 <span class="comment"></span>
<a name="l02212"></a>02212 <span class="comment">   2. Skip shared library trampoline code (which is different from</span>
<a name="l02213"></a>02213 <span class="comment">   indirect function call trampolines).</span>
<a name="l02214"></a>02214 <span class="comment"></span>
<a name="l02215"></a>02215 <span class="comment">   3. Skip bigtoc fixup code.</span>
<a name="l02216"></a>02216 <span class="comment"></span>
<a name="l02217"></a>02217 <span class="comment">   Result is desired PC to step until, or NULL if we are not in</span>
<a name="l02218"></a>02218 <span class="comment">   code that should be skipped.  */</span>
<a name="l02219"></a>02219 
<a name="l02220"></a>02220 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l02221"></a><a class="code" href="rs6000-tdep_8c.html#a08adcf8b4f2eec7b7ccefafbe77fd021">02221</a> <a class="code" href="rs6000-tdep_8c.html#a08adcf8b4f2eec7b7ccefafbe77fd021">rs6000_skip_trampoline_code</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc)
<a name="l02222"></a>02222 {
<a name="l02223"></a>02223   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (frame);
<a name="l02224"></a>02224   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l02225"></a>02225   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l02226"></a>02226   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ii, op;
<a name="l02227"></a>02227   <span class="keywordtype">int</span> rel;
<a name="l02228"></a>02228   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> solib_target_pc;
<a name="l02229"></a>02229   <span class="keyword">struct </span><a class="code" href="structbound__minimal__symbol.html">bound_minimal_symbol</a> msymbol;
<a name="l02230"></a>02230 
<a name="l02231"></a>02231   <span class="keyword">static</span> <span class="keywordtype">unsigned</span> trampoline_code[] =
<a name="l02232"></a>02232   {
<a name="l02233"></a>02233     0x800b0000,                 <span class="comment">/*     l   r0,0x0(r11)  */</span>
<a name="l02234"></a>02234     0x90410014,                 <span class="comment">/*    st   r2,0x14(r1)  */</span>
<a name="l02235"></a>02235     0x7c0903a6,                 <span class="comment">/* mtctr   r0           */</span>
<a name="l02236"></a>02236     0x804b0004,                 <span class="comment">/*     l   r2,0x4(r11)  */</span>
<a name="l02237"></a>02237     0x816b0008,                 <span class="comment">/*     l  r11,0x8(r11)  */</span>
<a name="l02238"></a>02238     0x4e800420,                 <span class="comment">/*  bctr                */</span>
<a name="l02239"></a>02239     0x4e800020,                 <span class="comment">/*    br                */</span>
<a name="l02240"></a>02240     0
<a name="l02241"></a>02241   };
<a name="l02242"></a>02242 
<a name="l02243"></a>02243   <span class="comment">/* Check for bigtoc fixup code.  */</span>
<a name="l02244"></a>02244   msymbol = <a class="code" href="minsyms_8c.html#ad4b48b6ef6c913138a8ac33f8c3cfeb2">lookup_minimal_symbol_by_pc</a> (pc);
<a name="l02245"></a>02245   <span class="keywordflow">if</span> (msymbol.<a class="code" href="structbound__minimal__symbol.html#aabff08898c1d96d6c68a95f35b635214">minsym</a>
<a name="l02246"></a>02246       &amp;&amp; <a class="code" href="rs6000-tdep_8c.html#a15657727c66fcacb5d187cf2154388bd">rs6000_in_solib_return_trampoline</a> (gdbarch, pc,
<a name="l02247"></a>02247                                             <a class="code" href="symtab_8h.html#a956b56288511a18b855d8a263d60e87f">SYMBOL_LINKAGE_NAME</a> (msymbol.<a class="code" href="structbound__minimal__symbol.html#aabff08898c1d96d6c68a95f35b635214">minsym</a>)))
<a name="l02248"></a>02248     {
<a name="l02249"></a>02249       <span class="comment">/* Double-check that the third instruction from PC is relative &quot;b&quot;.  */</span>
<a name="l02250"></a>02250       op = <a class="code" href="corefile_8c.html#a7097ab90f56ed7bcceb190bab139621b">read_memory_integer</a> (pc + 8, 4, byte_order);
<a name="l02251"></a>02251       <span class="keywordflow">if</span> ((op &amp; 0xfc000003) == 0x48000000)
<a name="l02252"></a>02252         {
<a name="l02253"></a>02253           <span class="comment">/* Extract bits 6-29 as a signed 24-bit relative word address and</span>
<a name="l02254"></a>02254 <span class="comment">             add it to the containing PC.  */</span>
<a name="l02255"></a>02255           rel = ((<a class="code" href="command_8h.html#a74f207b5aa4ba51c3a2ad59b219a423b">int</a>)(op &lt;&lt; 6) &gt;&gt; 6);
<a name="l02256"></a>02256           <span class="keywordflow">return</span> pc + 8 + rel;
<a name="l02257"></a>02257         }
<a name="l02258"></a>02258     }
<a name="l02259"></a>02259 
<a name="l02260"></a>02260   <span class="comment">/* If pc is in a shared library trampoline, return its target.  */</span>
<a name="l02261"></a>02261   solib_target_pc = <a class="code" href="minsyms_8c.html#a242ce2adf8d22461827406bb8ca63924">find_solib_trampoline_target</a> (frame, pc);
<a name="l02262"></a>02262   <span class="keywordflow">if</span> (solib_target_pc)
<a name="l02263"></a>02263     <span class="keywordflow">return</span> solib_target_pc;
<a name="l02264"></a>02264 
<a name="l02265"></a>02265   <span class="keywordflow">for</span> (ii = 0; trampoline_code[ii]; ++ii)
<a name="l02266"></a>02266     {
<a name="l02267"></a>02267       op = <a class="code" href="corefile_8c.html#a7097ab90f56ed7bcceb190bab139621b">read_memory_integer</a> (pc + (ii * 4), 4, byte_order);
<a name="l02268"></a>02268       <span class="keywordflow">if</span> (op != trampoline_code[ii])
<a name="l02269"></a>02269         <span class="keywordflow">return</span> 0;
<a name="l02270"></a>02270     }
<a name="l02271"></a>02271   ii = <a class="code" href="frame_8c.html#affa785e8937e96fd727e46a2cfec94c4">get_frame_register_unsigned</a> (frame, 11); <span class="comment">/* r11 holds destination</span>
<a name="l02272"></a>02272 <span class="comment">                                                   addr.  */</span>
<a name="l02273"></a>02273   pc = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (ii, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a820e9cc5ea69af966e2764ae201720cd">wordsize</a>, byte_order);
<a name="l02274"></a>02274   <span class="keywordflow">return</span> pc;
<a name="l02275"></a>02275 }
<a name="l02276"></a>02276 
<a name="l02277"></a>02277 <span class="comment">/* ISA-specific vector types.  */</span>
<a name="l02278"></a>02278 
<a name="l02279"></a>02279 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structtype.html">type</a> *
<a name="l02280"></a><a class="code" href="rs6000-tdep_8c.html#a639b299e7ca79a87cec4159eda016082">02280</a> <a class="code" href="rs6000-tdep_8c.html#a639b299e7ca79a87cec4159eda016082">rs6000_builtin_type_vec64</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>)
<a name="l02281"></a>02281 {
<a name="l02282"></a>02282   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l02283"></a>02283 
<a name="l02284"></a>02284   <span class="keywordflow">if</span> (!tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae97dc7b7d58411331559d04c7ee0cf0e">ppc_builtin_type_vec64</a>)
<a name="l02285"></a>02285     {
<a name="l02286"></a>02286       <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structbuiltin__type.html">builtin_type</a> *bt = <a class="code" href="gdbtypes_8c.html#addd01ebc9ccdf2cacb33ab01e281ddb8">builtin_type</a> (gdbarch);
<a name="l02287"></a>02287 
<a name="l02288"></a>02288       <span class="comment">/* The type we&#39;re building is this: */</span>
<a name="l02289"></a>02289 <span class="preprocessor">#if 0</span>
<a name="l02290"></a>02290 <span class="preprocessor"></span>      <span class="keyword">union </span>__gdb_builtin_type_vec64
<a name="l02291"></a>02291         {
<a name="l02292"></a>02292           int64_t uint64;
<a name="l02293"></a>02293           <span class="keywordtype">float</span> v2_float[2];
<a name="l02294"></a>02294           int32_t v2_int32[2];
<a name="l02295"></a>02295           int16_t v4_int16[4];
<a name="l02296"></a>02296           int8_t v8_int8[8];
<a name="l02297"></a>02297         };
<a name="l02298"></a>02298 <span class="preprocessor">#endif</span>
<a name="l02299"></a>02299 <span class="preprocessor"></span>
<a name="l02300"></a>02300       <span class="keyword">struct </span><a class="code" href="structtype.html">type</a> *t;
<a name="l02301"></a>02301 
<a name="l02302"></a>02302       t = <a class="code" href="gdbtypes_8c.html#a3e82e9d618c11c61cbae9b89d00efc1b">arch_composite_type</a> (gdbarch,
<a name="l02303"></a>02303                                <span class="stringliteral">&quot;__ppc_builtin_type_vec64&quot;</span>, <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462a8c3218d2f780665395d57dcd4d909191">TYPE_CODE_UNION</a>);
<a name="l02304"></a>02304       <a class="code" href="gdbtypes_8c.html#a8e501de48b50f6deb1568b5ade567f2a">append_composite_type_field</a> (t, <span class="stringliteral">&quot;uint64&quot;</span>, bt-&gt;<a class="code" href="structbuiltin__type.html#a96f3cd71c9619fa5a5ae644402e841ec">builtin_int64</a>);
<a name="l02305"></a>02305       <a class="code" href="gdbtypes_8c.html#a8e501de48b50f6deb1568b5ade567f2a">append_composite_type_field</a> (t, <span class="stringliteral">&quot;v2_float&quot;</span>,
<a name="l02306"></a>02306                                    <a class="code" href="gdbtypes_8c.html#a93eefcbb5ac6aec0f3f1c96e186bfdef">init_vector_type</a> (bt-&gt;<a class="code" href="structbuiltin__type.html#af44abaec1868fa0a34efaab02a436d6a">builtin_float</a>, 2));
<a name="l02307"></a>02307       <a class="code" href="gdbtypes_8c.html#a8e501de48b50f6deb1568b5ade567f2a">append_composite_type_field</a> (t, <span class="stringliteral">&quot;v2_int32&quot;</span>,
<a name="l02308"></a>02308                                    <a class="code" href="gdbtypes_8c.html#a93eefcbb5ac6aec0f3f1c96e186bfdef">init_vector_type</a> (bt-&gt;<a class="code" href="structbuiltin__type.html#ab514809bc3e50d6db51f7b1b0729f2cb">builtin_int32</a>, 2));
<a name="l02309"></a>02309       <a class="code" href="gdbtypes_8c.html#a8e501de48b50f6deb1568b5ade567f2a">append_composite_type_field</a> (t, <span class="stringliteral">&quot;v4_int16&quot;</span>,
<a name="l02310"></a>02310                                    <a class="code" href="gdbtypes_8c.html#a93eefcbb5ac6aec0f3f1c96e186bfdef">init_vector_type</a> (bt-&gt;<a class="code" href="structbuiltin__type.html#adfd7e6377d8b18a3a019bdc9a7eff0b8">builtin_int16</a>, 4));
<a name="l02311"></a>02311       <a class="code" href="gdbtypes_8c.html#a8e501de48b50f6deb1568b5ade567f2a">append_composite_type_field</a> (t, <span class="stringliteral">&quot;v8_int8&quot;</span>,
<a name="l02312"></a>02312                                    <a class="code" href="gdbtypes_8c.html#a93eefcbb5ac6aec0f3f1c96e186bfdef">init_vector_type</a> (bt-&gt;<a class="code" href="structbuiltin__type.html#a3bda6904e80e6a0de09549a1b51fb088">builtin_int8</a>, 8));
<a name="l02313"></a>02313 
<a name="l02314"></a>02314       <a class="code" href="gdbtypes_8h.html#a68a23253bcb233221400208f4c21c406">TYPE_VECTOR</a> (t) = 1;
<a name="l02315"></a>02315       <a class="code" href="gdbtypes_8h.html#a60f6434779617e9ff9c60121ceb25015">TYPE_NAME</a> (t) = <span class="stringliteral">&quot;ppc_builtin_type_vec64&quot;</span>;
<a name="l02316"></a>02316       tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae97dc7b7d58411331559d04c7ee0cf0e">ppc_builtin_type_vec64</a> = t;
<a name="l02317"></a>02317     }
<a name="l02318"></a>02318 
<a name="l02319"></a>02319   <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae97dc7b7d58411331559d04c7ee0cf0e">ppc_builtin_type_vec64</a>;
<a name="l02320"></a>02320 }
<a name="l02321"></a>02321 
<a name="l02322"></a>02322 <span class="comment">/* Vector 128 type.  */</span>
<a name="l02323"></a>02323 
<a name="l02324"></a>02324 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structtype.html">type</a> *
<a name="l02325"></a><a class="code" href="rs6000-tdep_8c.html#afa746fc3854817ecb80b97c3f29a44ad">02325</a> <a class="code" href="rs6000-tdep_8c.html#afa746fc3854817ecb80b97c3f29a44ad">rs6000_builtin_type_vec128</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>)
<a name="l02326"></a>02326 {
<a name="l02327"></a>02327   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l02328"></a>02328 
<a name="l02329"></a>02329   <span class="keywordflow">if</span> (!tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a4b085e8a5e2dcf4885513bea6f1f72a5">ppc_builtin_type_vec128</a>)
<a name="l02330"></a>02330     {
<a name="l02331"></a>02331       <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structbuiltin__type.html">builtin_type</a> *bt = <a class="code" href="gdbtypes_8c.html#addd01ebc9ccdf2cacb33ab01e281ddb8">builtin_type</a> (gdbarch);
<a name="l02332"></a>02332 
<a name="l02333"></a>02333       <span class="comment">/* The type we&#39;re building is this</span>
<a name="l02334"></a>02334 <span class="comment"></span>
<a name="l02335"></a>02335 <span class="comment">         type = union __ppc_builtin_type_vec128 {</span>
<a name="l02336"></a>02336 <span class="comment">             uint128_t uint128;</span>
<a name="l02337"></a>02337 <span class="comment">             double v2_double[2];</span>
<a name="l02338"></a>02338 <span class="comment">             float v4_float[4];</span>
<a name="l02339"></a>02339 <span class="comment">             int32_t v4_int32[4];</span>
<a name="l02340"></a>02340 <span class="comment">             int16_t v8_int16[8];</span>
<a name="l02341"></a>02341 <span class="comment">             int8_t v16_int8[16];</span>
<a name="l02342"></a>02342 <span class="comment">         }</span>
<a name="l02343"></a>02343 <span class="comment">      */</span>
<a name="l02344"></a>02344 
<a name="l02345"></a>02345       <span class="keyword">struct </span><a class="code" href="structtype.html">type</a> *t;
<a name="l02346"></a>02346 
<a name="l02347"></a>02347       t = <a class="code" href="gdbtypes_8c.html#a3e82e9d618c11c61cbae9b89d00efc1b">arch_composite_type</a> (gdbarch,
<a name="l02348"></a>02348                                <span class="stringliteral">&quot;__ppc_builtin_type_vec128&quot;</span>, <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462a8c3218d2f780665395d57dcd4d909191">TYPE_CODE_UNION</a>);
<a name="l02349"></a>02349       <a class="code" href="gdbtypes_8c.html#a8e501de48b50f6deb1568b5ade567f2a">append_composite_type_field</a> (t, <span class="stringliteral">&quot;uint128&quot;</span>, bt-&gt;<a class="code" href="structbuiltin__type.html#a462e5c89d490be8effbd7f3efd50e330">builtin_uint128</a>);
<a name="l02350"></a>02350       <a class="code" href="gdbtypes_8c.html#a8e501de48b50f6deb1568b5ade567f2a">append_composite_type_field</a> (t, <span class="stringliteral">&quot;v2_double&quot;</span>,
<a name="l02351"></a>02351                                    <a class="code" href="gdbtypes_8c.html#a93eefcbb5ac6aec0f3f1c96e186bfdef">init_vector_type</a> (bt-&gt;<a class="code" href="structbuiltin__type.html#a29f1e28c1aa70321c4c7d4094f672b57">builtin_double</a>, 2));
<a name="l02352"></a>02352       <a class="code" href="gdbtypes_8c.html#a8e501de48b50f6deb1568b5ade567f2a">append_composite_type_field</a> (t, <span class="stringliteral">&quot;v4_float&quot;</span>,
<a name="l02353"></a>02353                                    <a class="code" href="gdbtypes_8c.html#a93eefcbb5ac6aec0f3f1c96e186bfdef">init_vector_type</a> (bt-&gt;<a class="code" href="structbuiltin__type.html#af44abaec1868fa0a34efaab02a436d6a">builtin_float</a>, 4));
<a name="l02354"></a>02354       <a class="code" href="gdbtypes_8c.html#a8e501de48b50f6deb1568b5ade567f2a">append_composite_type_field</a> (t, <span class="stringliteral">&quot;v4_int32&quot;</span>,
<a name="l02355"></a>02355                                    <a class="code" href="gdbtypes_8c.html#a93eefcbb5ac6aec0f3f1c96e186bfdef">init_vector_type</a> (bt-&gt;<a class="code" href="structbuiltin__type.html#ab514809bc3e50d6db51f7b1b0729f2cb">builtin_int32</a>, 4));
<a name="l02356"></a>02356       <a class="code" href="gdbtypes_8c.html#a8e501de48b50f6deb1568b5ade567f2a">append_composite_type_field</a> (t, <span class="stringliteral">&quot;v8_int16&quot;</span>,
<a name="l02357"></a>02357                                    <a class="code" href="gdbtypes_8c.html#a93eefcbb5ac6aec0f3f1c96e186bfdef">init_vector_type</a> (bt-&gt;<a class="code" href="structbuiltin__type.html#adfd7e6377d8b18a3a019bdc9a7eff0b8">builtin_int16</a>, 8));
<a name="l02358"></a>02358       <a class="code" href="gdbtypes_8c.html#a8e501de48b50f6deb1568b5ade567f2a">append_composite_type_field</a> (t, <span class="stringliteral">&quot;v16_int8&quot;</span>,
<a name="l02359"></a>02359                                    <a class="code" href="gdbtypes_8c.html#a93eefcbb5ac6aec0f3f1c96e186bfdef">init_vector_type</a> (bt-&gt;<a class="code" href="structbuiltin__type.html#a3bda6904e80e6a0de09549a1b51fb088">builtin_int8</a>, 16));
<a name="l02360"></a>02360 
<a name="l02361"></a>02361       <a class="code" href="gdbtypes_8h.html#a68a23253bcb233221400208f4c21c406">TYPE_VECTOR</a> (t) = 1;
<a name="l02362"></a>02362       <a class="code" href="gdbtypes_8h.html#a60f6434779617e9ff9c60121ceb25015">TYPE_NAME</a> (t) = <span class="stringliteral">&quot;ppc_builtin_type_vec128&quot;</span>;
<a name="l02363"></a>02363       tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a4b085e8a5e2dcf4885513bea6f1f72a5">ppc_builtin_type_vec128</a> = t;
<a name="l02364"></a>02364     }
<a name="l02365"></a>02365 
<a name="l02366"></a>02366   <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a4b085e8a5e2dcf4885513bea6f1f72a5">ppc_builtin_type_vec128</a>;
<a name="l02367"></a>02367 }
<a name="l02368"></a>02368 
<a name="l02369"></a>02369 <span class="comment">/* Return the name of register number REGNO, or the empty string if it</span>
<a name="l02370"></a>02370 <span class="comment">   is an anonymous register.  */</span>
<a name="l02371"></a>02371 
<a name="l02372"></a>02372 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l02373"></a><a class="code" href="rs6000-tdep_8c.html#a0b5d01162e1364fdba3437f20151ae7f">02373</a> <a class="code" href="rs6000-tdep_8c.html#a0b5d01162e1364fdba3437f20151ae7f">rs6000_register_name</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keywordtype">int</span> regno)
<a name="l02374"></a>02374 {
<a name="l02375"></a>02375   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l02376"></a>02376 
<a name="l02377"></a>02377   <span class="comment">/* The upper half &quot;registers&quot; have names in the XML description,</span>
<a name="l02378"></a>02378 <span class="comment">     but we present only the low GPRs and the full 64-bit registers</span>
<a name="l02379"></a>02379 <span class="comment">     to the user.  */</span>
<a name="l02380"></a>02380   <span class="keywordflow">if</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aa7b3fc0d1b03e03f76278abd2611df43">ppc_ev0_upper_regnum</a> &gt;= 0
<a name="l02381"></a>02381       &amp;&amp; tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aa7b3fc0d1b03e03f76278abd2611df43">ppc_ev0_upper_regnum</a> &lt;= regno
<a name="l02382"></a>02382       &amp;&amp; regno &lt; tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aa7b3fc0d1b03e03f76278abd2611df43">ppc_ev0_upper_regnum</a> + <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba24b61ab9c068d3db8d90266aff6c008a">ppc_num_gprs</a>)
<a name="l02383"></a>02383     <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
<a name="l02384"></a>02384 
<a name="l02385"></a>02385   <span class="comment">/* Hide the upper halves of the vs0~vs31 registers.  */</span>
<a name="l02386"></a>02386   <span class="keywordflow">if</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#acee880f0e287602f378022dec6896991">ppc_vsr0_regnum</a> &gt;= 0
<a name="l02387"></a>02387       &amp;&amp; tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af62bcda72ac9d044f7b1145d780de683">ppc_vsr0_upper_regnum</a> &lt;= regno
<a name="l02388"></a>02388       &amp;&amp; regno &lt; tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af62bcda72ac9d044f7b1145d780de683">ppc_vsr0_upper_regnum</a> + <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba24b61ab9c068d3db8d90266aff6c008a">ppc_num_gprs</a>)
<a name="l02389"></a>02389     <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
<a name="l02390"></a>02390 
<a name="l02391"></a>02391   <span class="comment">/* Check if the SPE pseudo registers are available.  */</span>
<a name="l02392"></a>02392   <span class="keywordflow">if</span> (<a class="code" href="rs6000-tdep_8c.html#a6b4b7509073a7a5ced4f84e2d75a6c2d">IS_SPE_PSEUDOREG</a> (tdep, regno))
<a name="l02393"></a>02393     {
<a name="l02394"></a>02394       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> spe_regnames[] = {
<a name="l02395"></a>02395         <span class="stringliteral">&quot;ev0&quot;</span>, <span class="stringliteral">&quot;ev1&quot;</span>, <span class="stringliteral">&quot;ev2&quot;</span>, <span class="stringliteral">&quot;ev3&quot;</span>, <span class="stringliteral">&quot;ev4&quot;</span>, <span class="stringliteral">&quot;ev5&quot;</span>, <span class="stringliteral">&quot;ev6&quot;</span>, <span class="stringliteral">&quot;ev7&quot;</span>,
<a name="l02396"></a>02396         <span class="stringliteral">&quot;ev8&quot;</span>, <span class="stringliteral">&quot;ev9&quot;</span>, <span class="stringliteral">&quot;ev10&quot;</span>, <span class="stringliteral">&quot;ev11&quot;</span>, <span class="stringliteral">&quot;ev12&quot;</span>, <span class="stringliteral">&quot;ev13&quot;</span>, <span class="stringliteral">&quot;ev14&quot;</span>, <span class="stringliteral">&quot;ev15&quot;</span>,
<a name="l02397"></a>02397         <span class="stringliteral">&quot;ev16&quot;</span>, <span class="stringliteral">&quot;ev17&quot;</span>, <span class="stringliteral">&quot;ev18&quot;</span>, <span class="stringliteral">&quot;ev19&quot;</span>, <span class="stringliteral">&quot;ev20&quot;</span>, <span class="stringliteral">&quot;ev21&quot;</span>, <span class="stringliteral">&quot;ev22&quot;</span>, <span class="stringliteral">&quot;ev23&quot;</span>,
<a name="l02398"></a>02398         <span class="stringliteral">&quot;ev24&quot;</span>, <span class="stringliteral">&quot;ev25&quot;</span>, <span class="stringliteral">&quot;ev26&quot;</span>, <span class="stringliteral">&quot;ev27&quot;</span>, <span class="stringliteral">&quot;ev28&quot;</span>, <span class="stringliteral">&quot;ev29&quot;</span>, <span class="stringliteral">&quot;ev30&quot;</span>, <span class="stringliteral">&quot;ev31&quot;</span>,
<a name="l02399"></a>02399       };
<a name="l02400"></a>02400       <span class="keywordflow">return</span> spe_regnames[regno - tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a4e1ef03cbbfda489b7573251851291f4">ppc_ev0_regnum</a>];
<a name="l02401"></a>02401     }
<a name="l02402"></a>02402 
<a name="l02403"></a>02403   <span class="comment">/* Check if the decimal128 pseudo-registers are available.  */</span>
<a name="l02404"></a>02404   <span class="keywordflow">if</span> (<a class="code" href="rs6000-tdep_8c.html#a68028aca2f05840bfad4dd14e74ad14f">IS_DFP_PSEUDOREG</a> (tdep, regno))
<a name="l02405"></a>02405     {
<a name="l02406"></a>02406       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> dfp128_regnames[] = {
<a name="l02407"></a>02407         <span class="stringliteral">&quot;dl0&quot;</span>, <span class="stringliteral">&quot;dl1&quot;</span>, <span class="stringliteral">&quot;dl2&quot;</span>, <span class="stringliteral">&quot;dl3&quot;</span>,
<a name="l02408"></a>02408         <span class="stringliteral">&quot;dl4&quot;</span>, <span class="stringliteral">&quot;dl5&quot;</span>, <span class="stringliteral">&quot;dl6&quot;</span>, <span class="stringliteral">&quot;dl7&quot;</span>,
<a name="l02409"></a>02409         <span class="stringliteral">&quot;dl8&quot;</span>, <span class="stringliteral">&quot;dl9&quot;</span>, <span class="stringliteral">&quot;dl10&quot;</span>, <span class="stringliteral">&quot;dl11&quot;</span>,
<a name="l02410"></a>02410         <span class="stringliteral">&quot;dl12&quot;</span>, <span class="stringliteral">&quot;dl13&quot;</span>, <span class="stringliteral">&quot;dl14&quot;</span>, <span class="stringliteral">&quot;dl15&quot;</span>
<a name="l02411"></a>02411       };
<a name="l02412"></a>02412       <span class="keywordflow">return</span> dfp128_regnames[regno - tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a5984995b6e4dc57d5447bb71ebb9c695">ppc_dl0_regnum</a>];
<a name="l02413"></a>02413     }
<a name="l02414"></a>02414 
<a name="l02415"></a>02415   <span class="comment">/* Check if this is a VSX pseudo-register.  */</span>
<a name="l02416"></a>02416   <span class="keywordflow">if</span> (<a class="code" href="rs6000-tdep_8c.html#abbc6a8fca79f4f66e9483886d4ce3937">IS_VSX_PSEUDOREG</a> (tdep, regno))
<a name="l02417"></a>02417     {
<a name="l02418"></a>02418       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> vsx_regnames[] = {
<a name="l02419"></a>02419         <span class="stringliteral">&quot;vs0&quot;</span>, <span class="stringliteral">&quot;vs1&quot;</span>, <span class="stringliteral">&quot;vs2&quot;</span>, <span class="stringliteral">&quot;vs3&quot;</span>, <span class="stringliteral">&quot;vs4&quot;</span>, <span class="stringliteral">&quot;vs5&quot;</span>, <span class="stringliteral">&quot;vs6&quot;</span>, <span class="stringliteral">&quot;vs7&quot;</span>,
<a name="l02420"></a>02420         <span class="stringliteral">&quot;vs8&quot;</span>, <span class="stringliteral">&quot;vs9&quot;</span>, <span class="stringliteral">&quot;vs10&quot;</span>, <span class="stringliteral">&quot;vs11&quot;</span>, <span class="stringliteral">&quot;vs12&quot;</span>, <span class="stringliteral">&quot;vs13&quot;</span>, <span class="stringliteral">&quot;vs14&quot;</span>,
<a name="l02421"></a>02421         <span class="stringliteral">&quot;vs15&quot;</span>, <span class="stringliteral">&quot;vs16&quot;</span>, <span class="stringliteral">&quot;vs17&quot;</span>, <span class="stringliteral">&quot;vs18&quot;</span>, <span class="stringliteral">&quot;vs19&quot;</span>, <span class="stringliteral">&quot;vs20&quot;</span>, <span class="stringliteral">&quot;vs21&quot;</span>,
<a name="l02422"></a>02422         <span class="stringliteral">&quot;vs22&quot;</span>, <span class="stringliteral">&quot;vs23&quot;</span>, <span class="stringliteral">&quot;vs24&quot;</span>, <span class="stringliteral">&quot;vs25&quot;</span>, <span class="stringliteral">&quot;vs26&quot;</span>, <span class="stringliteral">&quot;vs27&quot;</span>, <span class="stringliteral">&quot;vs28&quot;</span>,
<a name="l02423"></a>02423         <span class="stringliteral">&quot;vs29&quot;</span>, <span class="stringliteral">&quot;vs30&quot;</span>, <span class="stringliteral">&quot;vs31&quot;</span>, <span class="stringliteral">&quot;vs32&quot;</span>, <span class="stringliteral">&quot;vs33&quot;</span>, <span class="stringliteral">&quot;vs34&quot;</span>, <span class="stringliteral">&quot;vs35&quot;</span>,
<a name="l02424"></a>02424         <span class="stringliteral">&quot;vs36&quot;</span>, <span class="stringliteral">&quot;vs37&quot;</span>, <span class="stringliteral">&quot;vs38&quot;</span>, <span class="stringliteral">&quot;vs39&quot;</span>, <span class="stringliteral">&quot;vs40&quot;</span>, <span class="stringliteral">&quot;vs41&quot;</span>, <span class="stringliteral">&quot;vs42&quot;</span>,
<a name="l02425"></a>02425         <span class="stringliteral">&quot;vs43&quot;</span>, <span class="stringliteral">&quot;vs44&quot;</span>, <span class="stringliteral">&quot;vs45&quot;</span>, <span class="stringliteral">&quot;vs46&quot;</span>, <span class="stringliteral">&quot;vs47&quot;</span>, <span class="stringliteral">&quot;vs48&quot;</span>, <span class="stringliteral">&quot;vs49&quot;</span>,
<a name="l02426"></a>02426         <span class="stringliteral">&quot;vs50&quot;</span>, <span class="stringliteral">&quot;vs51&quot;</span>, <span class="stringliteral">&quot;vs52&quot;</span>, <span class="stringliteral">&quot;vs53&quot;</span>, <span class="stringliteral">&quot;vs54&quot;</span>, <span class="stringliteral">&quot;vs55&quot;</span>, <span class="stringliteral">&quot;vs56&quot;</span>,
<a name="l02427"></a>02427         <span class="stringliteral">&quot;vs57&quot;</span>, <span class="stringliteral">&quot;vs58&quot;</span>, <span class="stringliteral">&quot;vs59&quot;</span>, <span class="stringliteral">&quot;vs60&quot;</span>, <span class="stringliteral">&quot;vs61&quot;</span>, <span class="stringliteral">&quot;vs62&quot;</span>, <span class="stringliteral">&quot;vs63&quot;</span>
<a name="l02428"></a>02428       };
<a name="l02429"></a>02429       <span class="keywordflow">return</span> vsx_regnames[regno - tdep-&gt;<a class="code" href="structgdbarch__tdep.html#acee880f0e287602f378022dec6896991">ppc_vsr0_regnum</a>];
<a name="l02430"></a>02430     }
<a name="l02431"></a>02431 
<a name="l02432"></a>02432   <span class="comment">/* Check if the this is a Extended FP pseudo-register.  */</span>
<a name="l02433"></a>02433   <span class="keywordflow">if</span> (<a class="code" href="rs6000-tdep_8c.html#addf51a44b80a2a6e145d2a488754e124">IS_EFP_PSEUDOREG</a> (tdep, regno))
<a name="l02434"></a>02434     {
<a name="l02435"></a>02435       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> efpr_regnames[] = {
<a name="l02436"></a>02436         <span class="stringliteral">&quot;f32&quot;</span>, <span class="stringliteral">&quot;f33&quot;</span>, <span class="stringliteral">&quot;f34&quot;</span>, <span class="stringliteral">&quot;f35&quot;</span>, <span class="stringliteral">&quot;f36&quot;</span>, <span class="stringliteral">&quot;f37&quot;</span>, <span class="stringliteral">&quot;f38&quot;</span>,
<a name="l02437"></a>02437         <span class="stringliteral">&quot;f39&quot;</span>, <span class="stringliteral">&quot;f40&quot;</span>, <span class="stringliteral">&quot;f41&quot;</span>, <span class="stringliteral">&quot;f42&quot;</span>, <span class="stringliteral">&quot;f43&quot;</span>, <span class="stringliteral">&quot;f44&quot;</span>, <span class="stringliteral">&quot;f45&quot;</span>,
<a name="l02438"></a>02438         <span class="stringliteral">&quot;f46&quot;</span>, <span class="stringliteral">&quot;f47&quot;</span>, <span class="stringliteral">&quot;f48&quot;</span>, <span class="stringliteral">&quot;f49&quot;</span>, <span class="stringliteral">&quot;f50&quot;</span>, <span class="stringliteral">&quot;f51&quot;</span>,
<a name="l02439"></a>02439         <span class="stringliteral">&quot;f52&quot;</span>, <span class="stringliteral">&quot;f53&quot;</span>, <span class="stringliteral">&quot;f54&quot;</span>, <span class="stringliteral">&quot;f55&quot;</span>, <span class="stringliteral">&quot;f56&quot;</span>, <span class="stringliteral">&quot;f57&quot;</span>,
<a name="l02440"></a>02440         <span class="stringliteral">&quot;f58&quot;</span>, <span class="stringliteral">&quot;f59&quot;</span>, <span class="stringliteral">&quot;f60&quot;</span>, <span class="stringliteral">&quot;f61&quot;</span>, <span class="stringliteral">&quot;f62&quot;</span>, <span class="stringliteral">&quot;f63&quot;</span>
<a name="l02441"></a>02441       };
<a name="l02442"></a>02442       <span class="keywordflow">return</span> efpr_regnames[regno - tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ad172c8a450093737d4d5f7b692f0b1ef">ppc_efpr0_regnum</a>];
<a name="l02443"></a>02443     }
<a name="l02444"></a>02444 
<a name="l02445"></a>02445   <span class="keywordflow">return</span> <a class="code" href="target-descriptions_8c.html#a716bc159e6ca1ac43edf39191e252820">tdesc_register_name</a> (gdbarch, regno);
<a name="l02446"></a>02446 }
<a name="l02447"></a>02447 
<a name="l02448"></a>02448 <span class="comment">/* Return the GDB type object for the &quot;standard&quot; data type of data in</span>
<a name="l02449"></a>02449 <span class="comment">   register N.  */</span>
<a name="l02450"></a>02450 
<a name="l02451"></a>02451 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structtype.html">type</a> *
<a name="l02452"></a><a class="code" href="rs6000-tdep_8c.html#a217d91451c3046e0a05a289bb8a2b283">02452</a> <a class="code" href="rs6000-tdep_8c.html#a217d91451c3046e0a05a289bb8a2b283">rs6000_pseudo_register_type</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>)
<a name="l02453"></a>02453 {
<a name="l02454"></a>02454   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l02455"></a>02455 
<a name="l02456"></a>02456   <span class="comment">/* These are the only pseudo-registers we support.  */</span>
<a name="l02457"></a>02457   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (<a class="code" href="rs6000-tdep_8c.html#a6b4b7509073a7a5ced4f84e2d75a6c2d">IS_SPE_PSEUDOREG</a> (tdep, regnum)
<a name="l02458"></a>02458               || <a class="code" href="rs6000-tdep_8c.html#a68028aca2f05840bfad4dd14e74ad14f">IS_DFP_PSEUDOREG</a> (tdep, regnum)
<a name="l02459"></a>02459               || <a class="code" href="rs6000-tdep_8c.html#abbc6a8fca79f4f66e9483886d4ce3937">IS_VSX_PSEUDOREG</a> (tdep, regnum)
<a name="l02460"></a>02460               || <a class="code" href="rs6000-tdep_8c.html#addf51a44b80a2a6e145d2a488754e124">IS_EFP_PSEUDOREG</a> (tdep, regnum));
<a name="l02461"></a>02461 
<a name="l02462"></a>02462   <span class="comment">/* These are the e500 pseudo-registers.  */</span>
<a name="l02463"></a>02463   <span class="keywordflow">if</span> (<a class="code" href="rs6000-tdep_8c.html#a6b4b7509073a7a5ced4f84e2d75a6c2d">IS_SPE_PSEUDOREG</a> (tdep, regnum))
<a name="l02464"></a>02464     <span class="keywordflow">return</span> <a class="code" href="rs6000-tdep_8c.html#a639b299e7ca79a87cec4159eda016082">rs6000_builtin_type_vec64</a> (gdbarch);
<a name="l02465"></a>02465   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="rs6000-tdep_8c.html#a68028aca2f05840bfad4dd14e74ad14f">IS_DFP_PSEUDOREG</a> (tdep, regnum))
<a name="l02466"></a>02466     <span class="comment">/* PPC decimal128 pseudo-registers.  */</span>
<a name="l02467"></a>02467     <span class="keywordflow">return</span> <a class="code" href="gdbtypes_8c.html#addd01ebc9ccdf2cacb33ab01e281ddb8">builtin_type</a> (gdbarch)-&gt;<a class="code" href="structbuiltin__type.html#a08ba137b3f76b011d6213a2480776f86">builtin_declong</a>;
<a name="l02468"></a>02468   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="rs6000-tdep_8c.html#abbc6a8fca79f4f66e9483886d4ce3937">IS_VSX_PSEUDOREG</a> (tdep, regnum))
<a name="l02469"></a>02469     <span class="comment">/* POWER7 VSX pseudo-registers.  */</span>
<a name="l02470"></a>02470     <span class="keywordflow">return</span> <a class="code" href="rs6000-tdep_8c.html#afa746fc3854817ecb80b97c3f29a44ad">rs6000_builtin_type_vec128</a> (gdbarch);
<a name="l02471"></a>02471   <span class="keywordflow">else</span>
<a name="l02472"></a>02472     <span class="comment">/* POWER7 Extended FP pseudo-registers.  */</span>
<a name="l02473"></a>02473     <span class="keywordflow">return</span> <a class="code" href="gdbtypes_8c.html#addd01ebc9ccdf2cacb33ab01e281ddb8">builtin_type</a> (gdbarch)-&gt;<a class="code" href="structbuiltin__type.html#a29f1e28c1aa70321c4c7d4094f672b57">builtin_double</a>;
<a name="l02474"></a>02474 }
<a name="l02475"></a>02475 
<a name="l02476"></a>02476 <span class="comment">/* Is REGNUM a member of REGGROUP?  */</span>
<a name="l02477"></a>02477 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02478"></a><a class="code" href="rs6000-tdep_8c.html#a173e3512752a5a273492bb426dbbdb2b">02478</a> <a class="code" href="rs6000-tdep_8c.html#a173e3512752a5a273492bb426dbbdb2b">rs6000_pseudo_register_reggroup_p</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>,
<a name="l02479"></a>02479                                    <span class="keyword">struct</span> <a class="code" href="structreggroup.html">reggroup</a> *group)
<a name="l02480"></a>02480 {
<a name="l02481"></a>02481   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l02482"></a>02482 
<a name="l02483"></a>02483   <span class="comment">/* These are the only pseudo-registers we support.  */</span>
<a name="l02484"></a>02484   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (<a class="code" href="rs6000-tdep_8c.html#a6b4b7509073a7a5ced4f84e2d75a6c2d">IS_SPE_PSEUDOREG</a> (tdep, regnum)
<a name="l02485"></a>02485               || <a class="code" href="rs6000-tdep_8c.html#a68028aca2f05840bfad4dd14e74ad14f">IS_DFP_PSEUDOREG</a> (tdep, regnum)
<a name="l02486"></a>02486               || <a class="code" href="rs6000-tdep_8c.html#abbc6a8fca79f4f66e9483886d4ce3937">IS_VSX_PSEUDOREG</a> (tdep, regnum)
<a name="l02487"></a>02487               || <a class="code" href="rs6000-tdep_8c.html#addf51a44b80a2a6e145d2a488754e124">IS_EFP_PSEUDOREG</a> (tdep, regnum));
<a name="l02488"></a>02488 
<a name="l02489"></a>02489   <span class="comment">/* These are the e500 pseudo-registers or the POWER7 VSX registers.  */</span>
<a name="l02490"></a>02490   <span class="keywordflow">if</span> (<a class="code" href="rs6000-tdep_8c.html#a6b4b7509073a7a5ced4f84e2d75a6c2d">IS_SPE_PSEUDOREG</a> (tdep, regnum) || <a class="code" href="rs6000-tdep_8c.html#abbc6a8fca79f4f66e9483886d4ce3937">IS_VSX_PSEUDOREG</a> (tdep, regnum))
<a name="l02491"></a>02491     <span class="keywordflow">return</span> group == <a class="code" href="reggroups_8c.html#a1c7760844f4c40a5fb70e84f76f39676">all_reggroup</a> || group == <a class="code" href="reggroups_8c.html#acef92c12b5ada70b62335d3de0752669">vector_reggroup</a>;
<a name="l02492"></a>02492   <span class="keywordflow">else</span>
<a name="l02493"></a>02493     <span class="comment">/* PPC decimal128 or Extended FP pseudo-registers.  */</span>
<a name="l02494"></a>02494     <span class="keywordflow">return</span> group == <a class="code" href="reggroups_8c.html#a1c7760844f4c40a5fb70e84f76f39676">all_reggroup</a> || group == <a class="code" href="reggroups_8c.html#ad0b48edad91dabaa07f672908185a7d4">float_reggroup</a>;
<a name="l02495"></a>02495 }
<a name="l02496"></a>02496 
<a name="l02497"></a>02497 <span class="comment">/* The register format for RS/6000 floating point registers is always</span>
<a name="l02498"></a>02498 <span class="comment">   double, we need a conversion if the memory format is float.  */</span>
<a name="l02499"></a>02499 
<a name="l02500"></a>02500 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02501"></a><a class="code" href="rs6000-tdep_8c.html#aea4b92b83818823388fae344a158834b">02501</a> <a class="code" href="rs6000-tdep_8c.html#aea4b92b83818823388fae344a158834b">rs6000_convert_register_p</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>,
<a name="l02502"></a>02502                            <span class="keyword">struct</span> <a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a>)
<a name="l02503"></a>02503 {
<a name="l02504"></a>02504   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l02505"></a>02505 
<a name="l02506"></a>02506   <span class="keywordflow">return</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> &gt;= 0
<a name="l02507"></a>02507           &amp;&amp; regnum &gt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a>
<a name="l02508"></a>02508           &amp;&amp; regnum &lt; tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> + <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba7cb3ec3816363e0df7014e2a613a6df8">ppc_num_fprs</a>
<a name="l02509"></a>02509           &amp;&amp; <a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (type) == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462a98f3aa25f923ee0cd1d009e77b0a551a">TYPE_CODE_FLT</a>
<a name="l02510"></a>02510           &amp;&amp; <a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (type)
<a name="l02511"></a>02511              != <a class="code" href="gdbtypes_8h.html#aeac33f868e763780094aec8a2dcb9a1a">TYPE_LENGTH</a> (<a class="code" href="structbuiltin__type.html">builtin_type</a> (gdbarch)-&gt;builtin_double));
<a name="l02512"></a>02512 }
<a name="l02513"></a>02513 
<a name="l02514"></a>02514 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02515"></a><a class="code" href="rs6000-tdep_8c.html#a176317a4bcc1b87661f802661c2f1a9e">02515</a> <a class="code" href="rs6000-tdep_8c.html#a176317a4bcc1b87661f802661c2f1a9e">rs6000_register_to_value</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame,
<a name="l02516"></a>02516                           <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>,
<a name="l02517"></a>02517                           <span class="keyword">struct</span> <a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a>,
<a name="l02518"></a>02518                           <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *<a class="code" href="varobj_8h.html#ae2a2635825813434f3201bf8ace439d2">to</a>,
<a name="l02519"></a>02519                           <span class="keywordtype">int</span> *optimizedp, <span class="keywordtype">int</span> *unavailablep)
<a name="l02520"></a>02520 {
<a name="l02521"></a>02521   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (frame);
<a name="l02522"></a>02522   <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> <a class="code" href="varobj_8h.html#a43396decd62b46fa01cc6c66a84cbba1">from</a>[<a class="code" href="defs_8h.html#a1f9aebf1de3ebbf4283a4dcf73308562a4f3d67bb99ae292178850a8930ab8252">MAX_REGISTER_SIZE</a>];
<a name="l02523"></a>02523   
<a name="l02524"></a>02524   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (<a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (type) == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462a98f3aa25f923ee0cd1d009e77b0a551a">TYPE_CODE_FLT</a>);
<a name="l02525"></a>02525 
<a name="l02526"></a>02526   <span class="keywordflow">if</span> (!<a class="code" href="frame_8c.html#a2a2fcb8f8afb97611547f3b62026dfed">get_frame_register_bytes</a> (frame, regnum, 0,
<a name="l02527"></a>02527                                  <a class="code" href="regcache_8c.html#a4c51fa25edb9ce25451b9dc7bd127aac">register_size</a> (gdbarch, regnum),
<a name="l02528"></a>02528                                  from, optimizedp, unavailablep))
<a name="l02529"></a>02529     <span class="keywordflow">return</span> 0;
<a name="l02530"></a>02530 
<a name="l02531"></a>02531   <a class="code" href="doublest_8c.html#afd6da2f3df8866ddb538e15749e3581a">convert_typed_floating</a> (from, <a class="code" href="structbuiltin__type.html">builtin_type</a> (gdbarch)-&gt;builtin_double,
<a name="l02532"></a>02532                           to, type);
<a name="l02533"></a>02533   *optimizedp = *unavailablep = 0;
<a name="l02534"></a>02534   <span class="keywordflow">return</span> 1;
<a name="l02535"></a>02535 }
<a name="l02536"></a>02536 
<a name="l02537"></a>02537 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02538"></a><a class="code" href="rs6000-tdep_8c.html#adc831450af410f294eabe665a60b1315">02538</a> <a class="code" href="rs6000-tdep_8c.html#adc831450af410f294eabe665a60b1315">rs6000_value_to_register</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame,
<a name="l02539"></a>02539                           <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>,
<a name="l02540"></a>02540                           <span class="keyword">struct</span> <a class="code" href="structtype.html">type</a> *<a class="code" href="structtype.html">type</a>,
<a name="l02541"></a>02541                           <span class="keyword">const</span> <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *<a class="code" href="varobj_8h.html#a43396decd62b46fa01cc6c66a84cbba1">from</a>)
<a name="l02542"></a>02542 {
<a name="l02543"></a>02543   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a> = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (frame);
<a name="l02544"></a>02544   <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> <a class="code" href="varobj_8h.html#ae2a2635825813434f3201bf8ace439d2">to</a>[<a class="code" href="defs_8h.html#a1f9aebf1de3ebbf4283a4dcf73308562a4f3d67bb99ae292178850a8930ab8252">MAX_REGISTER_SIZE</a>];
<a name="l02545"></a>02545 
<a name="l02546"></a>02546   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (<a class="code" href="gdbtypes_8h.html#a9505f41c7012665947c6b4065ce190e1">TYPE_CODE</a> (type) == <a class="code" href="gdbtypes_8h.html#a90e2a0fddaa6afff6a0a489ff4da3462a98f3aa25f923ee0cd1d009e77b0a551a">TYPE_CODE_FLT</a>);
<a name="l02547"></a>02547 
<a name="l02548"></a>02548   <a class="code" href="doublest_8c.html#afd6da2f3df8866ddb538e15749e3581a">convert_typed_floating</a> (from, type,
<a name="l02549"></a>02549                           to, <a class="code" href="structbuiltin__type.html">builtin_type</a> (gdbarch)-&gt;builtin_double);
<a name="l02550"></a>02550   <a class="code" href="frame_8c.html#a1548afe04ef525987eea2bead7f3c4cf">put_frame_register</a> (frame, regnum, to);
<a name="l02551"></a>02551 }
<a name="l02552"></a>02552 
<a name="l02553"></a>02553  <span class="comment">/* The type of a function that moves the value of REG between CACHE</span>
<a name="l02554"></a>02554 <span class="comment">    or BUF --- in either direction.  */</span>
<a name="l02555"></a><a class="code" href="rs6000-tdep_8c.html#adafff3e21e6faede6f75e632c19fb300">02555</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7">register_status</a> (*<a class="code" href="rs6000-tdep_8c.html#adafff3e21e6faede6f75e632c19fb300">move_ev_register_func</a>) (<span class="keyword">struct </span><a class="code" href="structregcache.html">regcache</a> *,
<a name="l02556"></a>02556                                                        <a class="code" href="command_8h.html#a74f207b5aa4ba51c3a2ad59b219a423b">int</a>, <span class="keywordtype">void</span> *);
<a name="l02557"></a>02557 
<a name="l02558"></a>02558 <span class="comment">/* Move SPE vector register values between a 64-bit buffer and the two</span>
<a name="l02559"></a>02559 <span class="comment">   32-bit raw register halves in a regcache.  This function handles</span>
<a name="l02560"></a>02560 <span class="comment">   both splitting a 64-bit value into two 32-bit halves, and joining</span>
<a name="l02561"></a>02561 <span class="comment">   two halves into a whole 64-bit value, depending on the function</span>
<a name="l02562"></a>02562 <span class="comment">   passed as the MOVE argument.</span>
<a name="l02563"></a>02563 <span class="comment"></span>
<a name="l02564"></a>02564 <span class="comment">   EV_REG must be the number of an SPE evN vector register --- a</span>
<a name="l02565"></a>02565 <span class="comment">   pseudoregister.  REGCACHE must be a regcache, and BUFFER must be a</span>
<a name="l02566"></a>02566 <span class="comment">   64-bit buffer.</span>
<a name="l02567"></a>02567 <span class="comment"></span>
<a name="l02568"></a>02568 <span class="comment">   Call MOVE once for each 32-bit half of that register, passing</span>
<a name="l02569"></a>02569 <span class="comment">   REGCACHE, the number of the raw register corresponding to that</span>
<a name="l02570"></a>02570 <span class="comment">   half, and the address of the appropriate half of BUFFER.</span>
<a name="l02571"></a>02571 <span class="comment"></span>
<a name="l02572"></a>02572 <span class="comment">   For example, passing &#39;regcache_raw_read&#39; as the MOVE function will</span>
<a name="l02573"></a>02573 <span class="comment">   fill BUFFER with the full 64-bit contents of EV_REG.  Or, passing</span>
<a name="l02574"></a>02574 <span class="comment">   &#39;regcache_raw_supply&#39; will supply the contents of BUFFER to the</span>
<a name="l02575"></a>02575 <span class="comment">   appropriate pair of raw registers in REGCACHE.</span>
<a name="l02576"></a>02576 <span class="comment"></span>
<a name="l02577"></a>02577 <span class="comment">   You may need to cast away some &#39;const&#39; qualifiers when passing</span>
<a name="l02578"></a>02578 <span class="comment">   MOVE, since this function can&#39;t tell at compile-time which of</span>
<a name="l02579"></a>02579 <span class="comment">   REGCACHE or BUFFER is acting as the source of the data.  If C had</span>
<a name="l02580"></a>02580 <span class="comment">   co-variant type qualifiers, ...  */</span>
<a name="l02581"></a>02581 
<a name="l02582"></a>02582 <span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7">register_status</a>
<a name="l02583"></a><a class="code" href="rs6000-tdep_8c.html#a219e40e33335fd8370d3eae7912b8c5f">02583</a> <a class="code" href="rs6000-tdep_8c.html#a219e40e33335fd8370d3eae7912b8c5f">e500_move_ev_register</a> (<a class="code" href="rs6000-tdep_8c.html#adafff3e21e6faede6f75e632c19fb300">move_ev_register_func</a> move,
<a name="l02584"></a>02584                        <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>, <span class="keywordtype">int</span> ev_reg, <span class="keywordtype">void</span> *<a class="code" href="structbuffer.html">buffer</a>)
<a name="l02585"></a>02585 {
<a name="l02586"></a>02586   <span class="keyword">struct </span><a class="code" href="structgdbarch.html">gdbarch</a> *arch = <a class="code" href="regcache_8c.html#ad4f6d0cdf256b1fa45d59a6d71b50659">get_regcache_arch</a> (regcache);
<a name="l02587"></a>02587   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (arch); 
<a name="l02588"></a>02588   <span class="keywordtype">int</span> reg_index;
<a name="l02589"></a>02589   <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *byte_buffer = buffer;
<a name="l02590"></a>02590   <span class="keyword">enum</span> <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7">register_status</a> <a class="code" href="namespaceexsummary.html#aa4a2eed06e51a1f73ff9053ec9f2591e">status</a>;
<a name="l02591"></a>02591 
<a name="l02592"></a>02592   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (<a class="code" href="rs6000-tdep_8c.html#a6b4b7509073a7a5ced4f84e2d75a6c2d">IS_SPE_PSEUDOREG</a> (tdep, ev_reg));
<a name="l02593"></a>02593 
<a name="l02594"></a>02594   reg_index = ev_reg - tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a4e1ef03cbbfda489b7573251851291f4">ppc_ev0_regnum</a>;
<a name="l02595"></a>02595 
<a name="l02596"></a>02596   <span class="keywordflow">if</span> (<a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (arch) == BFD_ENDIAN_BIG)
<a name="l02597"></a>02597     {
<a name="l02598"></a>02598       status = move (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aa7b3fc0d1b03e03f76278abd2611df43">ppc_ev0_upper_regnum</a> + reg_index,
<a name="l02599"></a>02599                      byte_buffer);
<a name="l02600"></a>02600       <span class="keywordflow">if</span> (status == <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7a0155a2fd1e7e3b53cf1d75cf675d2ea2">REG_VALID</a>)
<a name="l02601"></a>02601         status = move (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a764a18b9d437c88d6ad174febf29aeeb">ppc_gp0_regnum</a> + reg_index,
<a name="l02602"></a>02602                        byte_buffer + 4);
<a name="l02603"></a>02603     }
<a name="l02604"></a>02604   <span class="keywordflow">else</span>
<a name="l02605"></a>02605     {
<a name="l02606"></a>02606       status = move (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a764a18b9d437c88d6ad174febf29aeeb">ppc_gp0_regnum</a> + reg_index, byte_buffer);
<a name="l02607"></a>02607       <span class="keywordflow">if</span> (status == <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7a0155a2fd1e7e3b53cf1d75cf675d2ea2">REG_VALID</a>)
<a name="l02608"></a>02608         status = move (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aa7b3fc0d1b03e03f76278abd2611df43">ppc_ev0_upper_regnum</a> + reg_index,
<a name="l02609"></a>02609                        byte_buffer + 4);
<a name="l02610"></a>02610     }
<a name="l02611"></a>02611 
<a name="l02612"></a>02612   <span class="keywordflow">return</span> <a class="code" href="namespaceexsummary.html#aa4a2eed06e51a1f73ff9053ec9f2591e">status</a>;
<a name="l02613"></a>02613 }
<a name="l02614"></a>02614 
<a name="l02615"></a>02615 <span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7">register_status</a>
<a name="l02616"></a><a class="code" href="rs6000-tdep_8c.html#ac03dd7a4541407b75d5b1a1e43816e4e">02616</a> <a class="code" href="rs6000-tdep_8c.html#ac03dd7a4541407b75d5b1a1e43816e4e">do_regcache_raw_read</a> (<span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>, <span class="keywordtype">void</span> *<a class="code" href="structbuffer.html">buffer</a>)
<a name="l02617"></a>02617 {
<a name="l02618"></a>02618   <span class="keywordflow">return</span> <a class="code" href="regcache_8c.html#a995b366cfa6f89eaa36c6e88227f3462">regcache_raw_read</a> (regcache, regnum, buffer);
<a name="l02619"></a>02619 }
<a name="l02620"></a>02620 
<a name="l02621"></a>02621 <span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7">register_status</a>
<a name="l02622"></a><a class="code" href="rs6000-tdep_8c.html#ae776eb8d28d85216efa95ed439ab3dd4">02622</a> <a class="code" href="rs6000-tdep_8c.html#ae776eb8d28d85216efa95ed439ab3dd4">do_regcache_raw_write</a> (<span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>, <span class="keywordtype">void</span> *<a class="code" href="structbuffer.html">buffer</a>)
<a name="l02623"></a>02623 {
<a name="l02624"></a>02624   <a class="code" href="regcache_8c.html#a1102769bb633fd84087614a3fc5c6e20">regcache_raw_write</a> (regcache, regnum, buffer);
<a name="l02625"></a>02625 
<a name="l02626"></a>02626   <span class="keywordflow">return</span> <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7a0155a2fd1e7e3b53cf1d75cf675d2ea2">REG_VALID</a>;
<a name="l02627"></a>02627 }
<a name="l02628"></a>02628 
<a name="l02629"></a>02629 <span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7">register_status</a>
<a name="l02630"></a><a class="code" href="rs6000-tdep_8c.html#a01ca3b9581e27b52b7afc988973e0c0c">02630</a> <a class="code" href="rs6000-tdep_8c.html#a01ca3b9581e27b52b7afc988973e0c0c">e500_pseudo_register_read</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l02631"></a>02631                            <span class="keywordtype">int</span> reg_nr, <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *<a class="code" href="structbuffer.html">buffer</a>)
<a name="l02632"></a>02632 {
<a name="l02633"></a>02633   <span class="keywordflow">return</span> <a class="code" href="rs6000-tdep_8c.html#a219e40e33335fd8370d3eae7912b8c5f">e500_move_ev_register</a> (<a class="code" href="rs6000-tdep_8c.html#ac03dd7a4541407b75d5b1a1e43816e4e">do_regcache_raw_read</a>, regcache, reg_nr, buffer);
<a name="l02634"></a>02634 }
<a name="l02635"></a>02635 
<a name="l02636"></a>02636 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02637"></a><a class="code" href="rs6000-tdep_8c.html#a01512c61e46f798a6110178ff0c1f52a">02637</a> <a class="code" href="rs6000-tdep_8c.html#a01512c61e46f798a6110178ff0c1f52a">e500_pseudo_register_write</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l02638"></a>02638                             <span class="keywordtype">int</span> reg_nr, <span class="keyword">const</span> <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *<a class="code" href="structbuffer.html">buffer</a>)
<a name="l02639"></a>02639 {
<a name="l02640"></a>02640   <a class="code" href="rs6000-tdep_8c.html#a219e40e33335fd8370d3eae7912b8c5f">e500_move_ev_register</a> (<a class="code" href="rs6000-tdep_8c.html#ae776eb8d28d85216efa95ed439ab3dd4">do_regcache_raw_write</a>, regcache,
<a name="l02641"></a>02641                          reg_nr, (<span class="keywordtype">void</span> *) buffer);
<a name="l02642"></a>02642 }
<a name="l02643"></a>02643 
<a name="l02644"></a>02644 <span class="comment">/* Read method for DFP pseudo-registers.  */</span>
<a name="l02645"></a>02645 <span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7">register_status</a>
<a name="l02646"></a><a class="code" href="rs6000-tdep_8c.html#a48d269c957ecbcf3568c07cd7e147ae6">02646</a> <a class="code" href="rs6000-tdep_8c.html#a48d269c957ecbcf3568c07cd7e147ae6">dfp_pseudo_register_read</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l02647"></a>02647                            <span class="keywordtype">int</span> reg_nr, <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *<a class="code" href="structbuffer.html">buffer</a>)
<a name="l02648"></a>02648 {
<a name="l02649"></a>02649   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l02650"></a>02650   <span class="keywordtype">int</span> reg_index = reg_nr - tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a5984995b6e4dc57d5447bb71ebb9c695">ppc_dl0_regnum</a>;
<a name="l02651"></a>02651   <span class="keyword">enum</span> <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7">register_status</a> <a class="code" href="namespaceexsummary.html#aa4a2eed06e51a1f73ff9053ec9f2591e">status</a>;
<a name="l02652"></a>02652 
<a name="l02653"></a>02653   <span class="keywordflow">if</span> (<a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch) == BFD_ENDIAN_BIG)
<a name="l02654"></a>02654     {
<a name="l02655"></a>02655       <span class="comment">/* Read two FP registers to form a whole dl register.  */</span>
<a name="l02656"></a>02656       status = <a class="code" href="regcache_8c.html#a995b366cfa6f89eaa36c6e88227f3462">regcache_raw_read</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> +
<a name="l02657"></a>02657                                   2 * reg_index, buffer);
<a name="l02658"></a>02658       <span class="keywordflow">if</span> (status == <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7a0155a2fd1e7e3b53cf1d75cf675d2ea2">REG_VALID</a>)
<a name="l02659"></a>02659         status = <a class="code" href="regcache_8c.html#a995b366cfa6f89eaa36c6e88227f3462">regcache_raw_read</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> +
<a name="l02660"></a>02660                                     2 * reg_index + 1, buffer + 8);
<a name="l02661"></a>02661     }
<a name="l02662"></a>02662   <span class="keywordflow">else</span>
<a name="l02663"></a>02663     {
<a name="l02664"></a>02664       status = <a class="code" href="regcache_8c.html#a995b366cfa6f89eaa36c6e88227f3462">regcache_raw_read</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> +
<a name="l02665"></a>02665                                   2 * reg_index + 1, buffer + 8);
<a name="l02666"></a>02666       <span class="keywordflow">if</span> (status == <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7a0155a2fd1e7e3b53cf1d75cf675d2ea2">REG_VALID</a>)
<a name="l02667"></a>02667         status = <a class="code" href="regcache_8c.html#a995b366cfa6f89eaa36c6e88227f3462">regcache_raw_read</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> +
<a name="l02668"></a>02668                                     2 * reg_index, buffer);
<a name="l02669"></a>02669     }
<a name="l02670"></a>02670 
<a name="l02671"></a>02671   <span class="keywordflow">return</span> <a class="code" href="namespaceexsummary.html#aa4a2eed06e51a1f73ff9053ec9f2591e">status</a>;
<a name="l02672"></a>02672 }
<a name="l02673"></a>02673 
<a name="l02674"></a>02674 <span class="comment">/* Write method for DFP pseudo-registers.  */</span>
<a name="l02675"></a>02675 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02676"></a><a class="code" href="rs6000-tdep_8c.html#aae58bc5dc474355947b30f1cd1a6cb58">02676</a> <a class="code" href="rs6000-tdep_8c.html#aae58bc5dc474355947b30f1cd1a6cb58">dfp_pseudo_register_write</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l02677"></a>02677                             <span class="keywordtype">int</span> reg_nr, <span class="keyword">const</span> <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *<a class="code" href="structbuffer.html">buffer</a>)
<a name="l02678"></a>02678 {
<a name="l02679"></a>02679   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l02680"></a>02680   <span class="keywordtype">int</span> reg_index = reg_nr - tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a5984995b6e4dc57d5447bb71ebb9c695">ppc_dl0_regnum</a>;
<a name="l02681"></a>02681 
<a name="l02682"></a>02682   <span class="keywordflow">if</span> (<a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch) == BFD_ENDIAN_BIG)
<a name="l02683"></a>02683     {
<a name="l02684"></a>02684       <span class="comment">/* Write each half of the dl register into a separate</span>
<a name="l02685"></a>02685 <span class="comment">      FP register.  */</span>
<a name="l02686"></a>02686       <a class="code" href="regcache_8c.html#a1102769bb633fd84087614a3fc5c6e20">regcache_raw_write</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> +
<a name="l02687"></a>02687                           2 * reg_index, buffer);
<a name="l02688"></a>02688       <a class="code" href="regcache_8c.html#a1102769bb633fd84087614a3fc5c6e20">regcache_raw_write</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> +
<a name="l02689"></a>02689                           2 * reg_index + 1, buffer + 8);
<a name="l02690"></a>02690     }
<a name="l02691"></a>02691   <span class="keywordflow">else</span>
<a name="l02692"></a>02692     {
<a name="l02693"></a>02693       <a class="code" href="regcache_8c.html#a1102769bb633fd84087614a3fc5c6e20">regcache_raw_write</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> +
<a name="l02694"></a>02694                           2 * reg_index + 1, buffer + 8);
<a name="l02695"></a>02695       <a class="code" href="regcache_8c.html#a1102769bb633fd84087614a3fc5c6e20">regcache_raw_write</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> +
<a name="l02696"></a>02696                           2 * reg_index, buffer);
<a name="l02697"></a>02697     }
<a name="l02698"></a>02698 }
<a name="l02699"></a>02699 
<a name="l02700"></a>02700 <span class="comment">/* Read method for POWER7 VSX pseudo-registers.  */</span>
<a name="l02701"></a>02701 <span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7">register_status</a>
<a name="l02702"></a><a class="code" href="rs6000-tdep_8c.html#ab44ba611b04b340aa1ab0d47374fd8b9">02702</a> <a class="code" href="rs6000-tdep_8c.html#ab44ba611b04b340aa1ab0d47374fd8b9">vsx_pseudo_register_read</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l02703"></a>02703                            <span class="keywordtype">int</span> reg_nr, <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *<a class="code" href="structbuffer.html">buffer</a>)
<a name="l02704"></a>02704 {
<a name="l02705"></a>02705   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l02706"></a>02706   <span class="keywordtype">int</span> reg_index = reg_nr - tdep-&gt;<a class="code" href="structgdbarch__tdep.html#acee880f0e287602f378022dec6896991">ppc_vsr0_regnum</a>;
<a name="l02707"></a>02707   <span class="keyword">enum</span> <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7">register_status</a> <a class="code" href="namespaceexsummary.html#aa4a2eed06e51a1f73ff9053ec9f2591e">status</a>;
<a name="l02708"></a>02708 
<a name="l02709"></a>02709   <span class="comment">/* Read the portion that overlaps the VMX registers.  */</span>
<a name="l02710"></a>02710   <span class="keywordflow">if</span> (reg_index &gt; 31)
<a name="l02711"></a>02711     status = <a class="code" href="regcache_8c.html#a995b366cfa6f89eaa36c6e88227f3462">regcache_raw_read</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a> +
<a name="l02712"></a>02712                                 reg_index - 32, buffer);
<a name="l02713"></a>02713   <span class="keywordflow">else</span>
<a name="l02714"></a>02714     <span class="comment">/* Read the portion that overlaps the FPR registers.  */</span>
<a name="l02715"></a>02715     <span class="keywordflow">if</span> (<a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch) == BFD_ENDIAN_BIG)
<a name="l02716"></a>02716       {
<a name="l02717"></a>02717         status = <a class="code" href="regcache_8c.html#a995b366cfa6f89eaa36c6e88227f3462">regcache_raw_read</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> +
<a name="l02718"></a>02718                                     reg_index, buffer);
<a name="l02719"></a>02719         <span class="keywordflow">if</span> (status == <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7a0155a2fd1e7e3b53cf1d75cf675d2ea2">REG_VALID</a>)
<a name="l02720"></a>02720           status = <a class="code" href="regcache_8c.html#a995b366cfa6f89eaa36c6e88227f3462">regcache_raw_read</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af62bcda72ac9d044f7b1145d780de683">ppc_vsr0_upper_regnum</a> +
<a name="l02721"></a>02721                                       reg_index, buffer + 8);
<a name="l02722"></a>02722       }
<a name="l02723"></a>02723     <span class="keywordflow">else</span>
<a name="l02724"></a>02724       {
<a name="l02725"></a>02725         status = <a class="code" href="regcache_8c.html#a995b366cfa6f89eaa36c6e88227f3462">regcache_raw_read</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> +
<a name="l02726"></a>02726                                     reg_index, buffer + 8);
<a name="l02727"></a>02727         <span class="keywordflow">if</span> (status == <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7a0155a2fd1e7e3b53cf1d75cf675d2ea2">REG_VALID</a>)
<a name="l02728"></a>02728           status = <a class="code" href="regcache_8c.html#a995b366cfa6f89eaa36c6e88227f3462">regcache_raw_read</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af62bcda72ac9d044f7b1145d780de683">ppc_vsr0_upper_regnum</a> +
<a name="l02729"></a>02729                                       reg_index, buffer);
<a name="l02730"></a>02730       }
<a name="l02731"></a>02731 
<a name="l02732"></a>02732   <span class="keywordflow">return</span> <a class="code" href="namespaceexsummary.html#aa4a2eed06e51a1f73ff9053ec9f2591e">status</a>;
<a name="l02733"></a>02733 }
<a name="l02734"></a>02734 
<a name="l02735"></a>02735 <span class="comment">/* Write method for POWER7 VSX pseudo-registers.  */</span>
<a name="l02736"></a>02736 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02737"></a><a class="code" href="rs6000-tdep_8c.html#a6c8b564729130bb6679b9364f527b713">02737</a> <a class="code" href="rs6000-tdep_8c.html#a6c8b564729130bb6679b9364f527b713">vsx_pseudo_register_write</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l02738"></a>02738                             <span class="keywordtype">int</span> reg_nr, <span class="keyword">const</span> <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *<a class="code" href="structbuffer.html">buffer</a>)
<a name="l02739"></a>02739 {
<a name="l02740"></a>02740   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l02741"></a>02741   <span class="keywordtype">int</span> reg_index = reg_nr - tdep-&gt;<a class="code" href="structgdbarch__tdep.html#acee880f0e287602f378022dec6896991">ppc_vsr0_regnum</a>;
<a name="l02742"></a>02742 
<a name="l02743"></a>02743   <span class="comment">/* Write the portion that overlaps the VMX registers.  */</span>
<a name="l02744"></a>02744   <span class="keywordflow">if</span> (reg_index &gt; 31)
<a name="l02745"></a>02745     <a class="code" href="regcache_8c.html#a1102769bb633fd84087614a3fc5c6e20">regcache_raw_write</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a> +
<a name="l02746"></a>02746                         reg_index - 32, buffer);
<a name="l02747"></a>02747   <span class="keywordflow">else</span>
<a name="l02748"></a>02748     <span class="comment">/* Write the portion that overlaps the FPR registers.  */</span>
<a name="l02749"></a>02749     <span class="keywordflow">if</span> (<a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch) == BFD_ENDIAN_BIG)
<a name="l02750"></a>02750       {
<a name="l02751"></a>02751         <a class="code" href="regcache_8c.html#a1102769bb633fd84087614a3fc5c6e20">regcache_raw_write</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> +
<a name="l02752"></a>02752                         reg_index, buffer);
<a name="l02753"></a>02753         <a class="code" href="regcache_8c.html#a1102769bb633fd84087614a3fc5c6e20">regcache_raw_write</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af62bcda72ac9d044f7b1145d780de683">ppc_vsr0_upper_regnum</a> +
<a name="l02754"></a>02754                         reg_index, buffer + 8);
<a name="l02755"></a>02755       }
<a name="l02756"></a>02756     <span class="keywordflow">else</span>
<a name="l02757"></a>02757       {
<a name="l02758"></a>02758         <a class="code" href="regcache_8c.html#a1102769bb633fd84087614a3fc5c6e20">regcache_raw_write</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> +
<a name="l02759"></a>02759                         reg_index, buffer + 8);
<a name="l02760"></a>02760         <a class="code" href="regcache_8c.html#a1102769bb633fd84087614a3fc5c6e20">regcache_raw_write</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af62bcda72ac9d044f7b1145d780de683">ppc_vsr0_upper_regnum</a> +
<a name="l02761"></a>02761                         reg_index, buffer);
<a name="l02762"></a>02762       }
<a name="l02763"></a>02763 }
<a name="l02764"></a>02764 
<a name="l02765"></a>02765 <span class="comment">/* Read method for POWER7 Extended FP pseudo-registers.  */</span>
<a name="l02766"></a>02766 <span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7">register_status</a>
<a name="l02767"></a><a class="code" href="rs6000-tdep_8c.html#a157eeacf2972f1c36cba56cef20c5030">02767</a> <a class="code" href="rs6000-tdep_8c.html#a157eeacf2972f1c36cba56cef20c5030">efpr_pseudo_register_read</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l02768"></a>02768                            <span class="keywordtype">int</span> reg_nr, <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *<a class="code" href="structbuffer.html">buffer</a>)
<a name="l02769"></a>02769 {
<a name="l02770"></a>02770   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l02771"></a>02771   <span class="keywordtype">int</span> reg_index = reg_nr - tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ad172c8a450093737d4d5f7b692f0b1ef">ppc_efpr0_regnum</a>;
<a name="l02772"></a>02772 
<a name="l02773"></a>02773   <span class="comment">/* Read the portion that overlaps the VMX register.  */</span>
<a name="l02774"></a>02774   <span class="keywordflow">return</span> <a class="code" href="regcache_8c.html#a2320f5763fd28b556c8c92f244b07da7">regcache_raw_read_part</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a> + reg_index, 0,
<a name="l02775"></a>02775                                  <a class="code" href="regcache_8c.html#a4c51fa25edb9ce25451b9dc7bd127aac">register_size</a> (gdbarch, reg_nr), buffer);
<a name="l02776"></a>02776 }
<a name="l02777"></a>02777 
<a name="l02778"></a>02778 <span class="comment">/* Write method for POWER7 Extended FP pseudo-registers.  */</span>
<a name="l02779"></a>02779 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02780"></a><a class="code" href="rs6000-tdep_8c.html#a20cd3466ec65294af2c1e0d1f04c218a">02780</a> <a class="code" href="rs6000-tdep_8c.html#a20cd3466ec65294af2c1e0d1f04c218a">efpr_pseudo_register_write</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l02781"></a>02781                             <span class="keywordtype">int</span> reg_nr, <span class="keyword">const</span> <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *<a class="code" href="structbuffer.html">buffer</a>)
<a name="l02782"></a>02782 {
<a name="l02783"></a>02783   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l02784"></a>02784   <span class="keywordtype">int</span> reg_index = reg_nr - tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ad172c8a450093737d4d5f7b692f0b1ef">ppc_efpr0_regnum</a>;
<a name="l02785"></a>02785 
<a name="l02786"></a>02786   <span class="comment">/* Write the portion that overlaps the VMX register.  */</span>
<a name="l02787"></a>02787   <a class="code" href="regcache_8c.html#a0eda92b8bcdd73455eab076beedc2d1f">regcache_raw_write_part</a> (regcache, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a> + reg_index, 0,
<a name="l02788"></a>02788                            <a class="code" href="regcache_8c.html#a4c51fa25edb9ce25451b9dc7bd127aac">register_size</a> (gdbarch, reg_nr), buffer);
<a name="l02789"></a>02789 }
<a name="l02790"></a>02790 
<a name="l02791"></a>02791 <span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="regcache_8h.html#af900cc04e1a55ea5ae1edc80570f91f7">register_status</a>
<a name="l02792"></a><a class="code" href="rs6000-tdep_8c.html#acbe81fb0e536b20acf273b0d2f0b3f5d">02792</a> <a class="code" href="rs6000-tdep_8c.html#acbe81fb0e536b20acf273b0d2f0b3f5d">rs6000_pseudo_register_read</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>,
<a name="l02793"></a>02793                              <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l02794"></a>02794                              <span class="keywordtype">int</span> reg_nr, <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *<a class="code" href="structbuffer.html">buffer</a>)
<a name="l02795"></a>02795 {
<a name="l02796"></a>02796   <span class="keyword">struct </span>gdbarch *regcache_arch = <a class="code" href="regcache_8c.html#ad4f6d0cdf256b1fa45d59a6d71b50659">get_regcache_arch</a> (regcache);
<a name="l02797"></a>02797   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch); 
<a name="l02798"></a>02798 
<a name="l02799"></a>02799   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (regcache_arch == gdbarch);
<a name="l02800"></a>02800 
<a name="l02801"></a>02801   <span class="keywordflow">if</span> (<a class="code" href="rs6000-tdep_8c.html#a6b4b7509073a7a5ced4f84e2d75a6c2d">IS_SPE_PSEUDOREG</a> (tdep, reg_nr))
<a name="l02802"></a>02802     <span class="keywordflow">return</span> <a class="code" href="rs6000-tdep_8c.html#a01ca3b9581e27b52b7afc988973e0c0c">e500_pseudo_register_read</a> (gdbarch, regcache, reg_nr, buffer);
<a name="l02803"></a>02803   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="rs6000-tdep_8c.html#a68028aca2f05840bfad4dd14e74ad14f">IS_DFP_PSEUDOREG</a> (tdep, reg_nr))
<a name="l02804"></a>02804     <span class="keywordflow">return</span> <a class="code" href="rs6000-tdep_8c.html#a48d269c957ecbcf3568c07cd7e147ae6">dfp_pseudo_register_read</a> (gdbarch, regcache, reg_nr, buffer);
<a name="l02805"></a>02805   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="rs6000-tdep_8c.html#abbc6a8fca79f4f66e9483886d4ce3937">IS_VSX_PSEUDOREG</a> (tdep, reg_nr))
<a name="l02806"></a>02806     <span class="keywordflow">return</span> <a class="code" href="rs6000-tdep_8c.html#ab44ba611b04b340aa1ab0d47374fd8b9">vsx_pseudo_register_read</a> (gdbarch, regcache, reg_nr, buffer);
<a name="l02807"></a>02807   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="rs6000-tdep_8c.html#addf51a44b80a2a6e145d2a488754e124">IS_EFP_PSEUDOREG</a> (tdep, reg_nr))
<a name="l02808"></a>02808     <span class="keywordflow">return</span> <a class="code" href="rs6000-tdep_8c.html#a157eeacf2972f1c36cba56cef20c5030">efpr_pseudo_register_read</a> (gdbarch, regcache, reg_nr, buffer);
<a name="l02809"></a>02809   <span class="keywordflow">else</span>
<a name="l02810"></a>02810     <a class="code" href="common-utils_8h.html#aa14285d9d3d4171016ef9cf09447e8bb">internal_error</a> (__FILE__, __LINE__,
<a name="l02811"></a>02811                     <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;rs6000_pseudo_register_read: &quot;</span>
<a name="l02812"></a>02812                     <span class="stringliteral">&quot;called on unexpected register &#39;%s&#39; (%d)&quot;</span>),
<a name="l02813"></a>02813                     <a class="code" href="gdbarch_8c.html#a86c0cf41eb88c54e943cd80e79af36e5">gdbarch_register_name</a> (gdbarch, reg_nr), reg_nr);
<a name="l02814"></a>02814 }
<a name="l02815"></a>02815 
<a name="l02816"></a>02816 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02817"></a><a class="code" href="rs6000-tdep_8c.html#afaa710c29501a12b972bd7d5beea0f46">02817</a> <a class="code" href="rs6000-tdep_8c.html#afaa710c29501a12b972bd7d5beea0f46">rs6000_pseudo_register_write</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>,
<a name="l02818"></a>02818                               <span class="keyword">struct</span> <a class="code" href="structregcache.html">regcache</a> *<a class="code" href="structregcache.html">regcache</a>,
<a name="l02819"></a>02819                               <span class="keywordtype">int</span> reg_nr, <span class="keyword">const</span> <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *<a class="code" href="structbuffer.html">buffer</a>)
<a name="l02820"></a>02820 {
<a name="l02821"></a>02821   <span class="keyword">struct </span>gdbarch *regcache_arch = <a class="code" href="regcache_8c.html#ad4f6d0cdf256b1fa45d59a6d71b50659">get_regcache_arch</a> (regcache);
<a name="l02822"></a>02822   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch); 
<a name="l02823"></a>02823 
<a name="l02824"></a>02824   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (regcache_arch == gdbarch);
<a name="l02825"></a>02825 
<a name="l02826"></a>02826   <span class="keywordflow">if</span> (<a class="code" href="rs6000-tdep_8c.html#a6b4b7509073a7a5ced4f84e2d75a6c2d">IS_SPE_PSEUDOREG</a> (tdep, reg_nr))
<a name="l02827"></a>02827     <a class="code" href="rs6000-tdep_8c.html#a01512c61e46f798a6110178ff0c1f52a">e500_pseudo_register_write</a> (gdbarch, regcache, reg_nr, buffer);
<a name="l02828"></a>02828   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="rs6000-tdep_8c.html#a68028aca2f05840bfad4dd14e74ad14f">IS_DFP_PSEUDOREG</a> (tdep, reg_nr))
<a name="l02829"></a>02829     <a class="code" href="rs6000-tdep_8c.html#aae58bc5dc474355947b30f1cd1a6cb58">dfp_pseudo_register_write</a> (gdbarch, regcache, reg_nr, buffer);
<a name="l02830"></a>02830   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="rs6000-tdep_8c.html#abbc6a8fca79f4f66e9483886d4ce3937">IS_VSX_PSEUDOREG</a> (tdep, reg_nr))
<a name="l02831"></a>02831     <a class="code" href="rs6000-tdep_8c.html#a6c8b564729130bb6679b9364f527b713">vsx_pseudo_register_write</a> (gdbarch, regcache, reg_nr, buffer);
<a name="l02832"></a>02832   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="rs6000-tdep_8c.html#addf51a44b80a2a6e145d2a488754e124">IS_EFP_PSEUDOREG</a> (tdep, reg_nr))
<a name="l02833"></a>02833     <a class="code" href="rs6000-tdep_8c.html#a20cd3466ec65294af2c1e0d1f04c218a">efpr_pseudo_register_write</a> (gdbarch, regcache, reg_nr, buffer);
<a name="l02834"></a>02834   <span class="keywordflow">else</span>
<a name="l02835"></a>02835     <a class="code" href="common-utils_8h.html#aa14285d9d3d4171016ef9cf09447e8bb">internal_error</a> (__FILE__, __LINE__,
<a name="l02836"></a>02836                     <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;rs6000_pseudo_register_write: &quot;</span>
<a name="l02837"></a>02837                     <span class="stringliteral">&quot;called on unexpected register &#39;%s&#39; (%d)&quot;</span>),
<a name="l02838"></a>02838                     <a class="code" href="gdbarch_8c.html#a86c0cf41eb88c54e943cd80e79af36e5">gdbarch_register_name</a> (gdbarch, reg_nr), reg_nr);
<a name="l02839"></a>02839 }
<a name="l02840"></a>02840 
<a name="l02841"></a>02841 <span class="comment">/* Convert a DBX STABS register number to a GDB register number.  */</span>
<a name="l02842"></a>02842 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02843"></a><a class="code" href="rs6000-tdep_8c.html#a8c4e2d3e619e14036578760b61cf2719">02843</a> <a class="code" href="rs6000-tdep_8c.html#a8c4e2d3e619e14036578760b61cf2719">rs6000_stab_reg_to_regnum</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keywordtype">int</span> num)
<a name="l02844"></a>02844 {
<a name="l02845"></a>02845   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l02846"></a>02846 
<a name="l02847"></a>02847   <span class="keywordflow">if</span> (0 &lt;= num &amp;&amp; num &lt;= 31)
<a name="l02848"></a>02848     <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a764a18b9d437c88d6ad174febf29aeeb">ppc_gp0_regnum</a> + num;
<a name="l02849"></a>02849   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (32 &lt;= num &amp;&amp; num &lt;= 63)
<a name="l02850"></a>02850     <span class="comment">/* FIXME: jimb/2004-05-05: What should we do when the debug info</span>
<a name="l02851"></a>02851 <span class="comment">       specifies registers the architecture doesn&#39;t have?  Our</span>
<a name="l02852"></a>02852 <span class="comment">       callers don&#39;t check the value we return.  */</span>
<a name="l02853"></a>02853     <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> + (num - 32);
<a name="l02854"></a>02854   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (77 &lt;= num &amp;&amp; num &lt;= 108)
<a name="l02855"></a>02855     <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a> + (num - 77);
<a name="l02856"></a>02856   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (1200 &lt;= num &amp;&amp; num &lt; 1200 + 32)
<a name="l02857"></a>02857     <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aa7b3fc0d1b03e03f76278abd2611df43">ppc_ev0_upper_regnum</a> + (num - 1200);
<a name="l02858"></a>02858   <span class="keywordflow">else</span>
<a name="l02859"></a>02859     <span class="keywordflow">switch</span> (num)
<a name="l02860"></a>02860       {
<a name="l02861"></a>02861       <span class="keywordflow">case</span> 64: 
<a name="l02862"></a>02862         <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a9d179a84ff44e9a36e6ee64075760429">ppc_mq_regnum</a>;
<a name="l02863"></a>02863       <span class="keywordflow">case</span> 65:
<a name="l02864"></a>02864         <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a5f8e280348ae374459d2b5e2980a188c">ppc_lr_regnum</a>;
<a name="l02865"></a>02865       <span class="keywordflow">case</span> 66: 
<a name="l02866"></a>02866         <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a4ea1d651e250d5879d6da1a28fd3be2f">ppc_ctr_regnum</a>;
<a name="l02867"></a>02867       <span class="keywordflow">case</span> 76: 
<a name="l02868"></a>02868         <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a1f0de040d355a482dae4af4ce50aec32">ppc_xer_regnum</a>;
<a name="l02869"></a>02869       <span class="keywordflow">case</span> 109:
<a name="l02870"></a>02870         <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae450527d83da498c547b5381594264b3">ppc_vrsave_regnum</a>;
<a name="l02871"></a>02871       <span class="keywordflow">case</span> 110:
<a name="l02872"></a>02872         <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae450527d83da498c547b5381594264b3">ppc_vrsave_regnum</a> - 1; <span class="comment">/* vscr */</span>
<a name="l02873"></a>02873       <span class="keywordflow">case</span> 111:
<a name="l02874"></a>02874         <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a2db04ffe895dab1278787d41e5878fa4">ppc_acc_regnum</a>;
<a name="l02875"></a>02875       <span class="keywordflow">case</span> 112:
<a name="l02876"></a>02876         <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a49a9f6148acf30fe778ff4b99bca50f1">ppc_spefscr_regnum</a>;
<a name="l02877"></a>02877       <span class="keywordflow">default</span>: 
<a name="l02878"></a>02878         <span class="keywordflow">return</span> num;
<a name="l02879"></a>02879       }
<a name="l02880"></a>02880 }
<a name="l02881"></a>02881 
<a name="l02882"></a>02882 
<a name="l02883"></a>02883 <span class="comment">/* Convert a Dwarf 2 register number to a GDB register number.  */</span>
<a name="l02884"></a>02884 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02885"></a><a class="code" href="rs6000-tdep_8c.html#a7cbdc4d9a0b6aaa1bc635b111862c477">02885</a> <a class="code" href="rs6000-tdep_8c.html#a7cbdc4d9a0b6aaa1bc635b111862c477">rs6000_dwarf2_reg_to_regnum</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keywordtype">int</span> num)
<a name="l02886"></a>02886 {
<a name="l02887"></a>02887   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l02888"></a>02888 
<a name="l02889"></a>02889   <span class="keywordflow">if</span> (0 &lt;= num &amp;&amp; num &lt;= 31)
<a name="l02890"></a>02890     <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a764a18b9d437c88d6ad174febf29aeeb">ppc_gp0_regnum</a> + num;
<a name="l02891"></a>02891   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (32 &lt;= num &amp;&amp; num &lt;= 63)
<a name="l02892"></a>02892     <span class="comment">/* FIXME: jimb/2004-05-05: What should we do when the debug info</span>
<a name="l02893"></a>02893 <span class="comment">       specifies registers the architecture doesn&#39;t have?  Our</span>
<a name="l02894"></a>02894 <span class="comment">       callers don&#39;t check the value we return.  */</span>
<a name="l02895"></a>02895     <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> + (num - 32);
<a name="l02896"></a>02896   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (1124 &lt;= num &amp;&amp; num &lt; 1124 + 32)
<a name="l02897"></a>02897     <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a> + (num - 1124);
<a name="l02898"></a>02898   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (1200 &lt;= num &amp;&amp; num &lt; 1200 + 32)
<a name="l02899"></a>02899     <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aa7b3fc0d1b03e03f76278abd2611df43">ppc_ev0_upper_regnum</a> + (num - 1200);
<a name="l02900"></a>02900   <span class="keywordflow">else</span>
<a name="l02901"></a>02901     <span class="keywordflow">switch</span> (num)
<a name="l02902"></a>02902       {
<a name="l02903"></a>02903       <span class="keywordflow">case</span> 64:
<a name="l02904"></a>02904         <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a472825ad1cf896dce405f82f2599ae9a">ppc_cr_regnum</a>;
<a name="l02905"></a>02905       <span class="keywordflow">case</span> 67:
<a name="l02906"></a>02906         <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae450527d83da498c547b5381594264b3">ppc_vrsave_regnum</a> - 1; <span class="comment">/* vscr */</span>
<a name="l02907"></a>02907       <span class="keywordflow">case</span> 99:
<a name="l02908"></a>02908         <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a2db04ffe895dab1278787d41e5878fa4">ppc_acc_regnum</a>;
<a name="l02909"></a>02909       <span class="keywordflow">case</span> 100:
<a name="l02910"></a>02910         <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a9d179a84ff44e9a36e6ee64075760429">ppc_mq_regnum</a>;
<a name="l02911"></a>02911       <span class="keywordflow">case</span> 101:
<a name="l02912"></a>02912         <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a1f0de040d355a482dae4af4ce50aec32">ppc_xer_regnum</a>;
<a name="l02913"></a>02913       <span class="keywordflow">case</span> 108:
<a name="l02914"></a>02914         <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a5f8e280348ae374459d2b5e2980a188c">ppc_lr_regnum</a>;
<a name="l02915"></a>02915       <span class="keywordflow">case</span> 109:
<a name="l02916"></a>02916         <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a4ea1d651e250d5879d6da1a28fd3be2f">ppc_ctr_regnum</a>;
<a name="l02917"></a>02917       <span class="keywordflow">case</span> 356:
<a name="l02918"></a>02918         <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae450527d83da498c547b5381594264b3">ppc_vrsave_regnum</a>;
<a name="l02919"></a>02919       <span class="keywordflow">case</span> 612:
<a name="l02920"></a>02920         <span class="keywordflow">return</span> tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a49a9f6148acf30fe778ff4b99bca50f1">ppc_spefscr_regnum</a>;
<a name="l02921"></a>02921       <span class="keywordflow">default</span>:
<a name="l02922"></a>02922         <span class="keywordflow">return</span> num;
<a name="l02923"></a>02923       }
<a name="l02924"></a>02924 }
<a name="l02925"></a>02925 
<a name="l02926"></a>02926 <span class="comment">/* Translate a .eh_frame register to DWARF register, or adjust a</span>
<a name="l02927"></a>02927 <span class="comment">   .debug_frame register.  */</span>
<a name="l02928"></a>02928 
<a name="l02929"></a>02929 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02930"></a><a class="code" href="rs6000-tdep_8c.html#a5796cce25a40386f7ea87324de172378">02930</a> <a class="code" href="rs6000-tdep_8c.html#a5796cce25a40386f7ea87324de172378">rs6000_adjust_frame_regnum</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keywordtype">int</span> num, <span class="keywordtype">int</span> eh_frame_p)
<a name="l02931"></a>02931 {
<a name="l02932"></a>02932   <span class="comment">/* GCC releases before 3.4 use GCC internal register numbering in</span>
<a name="l02933"></a>02933 <span class="comment">     .debug_frame (and .debug_info, et cetera).  The numbering is</span>
<a name="l02934"></a>02934 <span class="comment">     different from the standard SysV numbering for everything except</span>
<a name="l02935"></a>02935 <span class="comment">     for GPRs and FPRs.  We can not detect this problem in most cases</span>
<a name="l02936"></a>02936 <span class="comment">     - to get accurate debug info for variables living in lr, ctr, v0,</span>
<a name="l02937"></a>02937 <span class="comment">     et cetera, use a newer version of GCC.  But we must detect</span>
<a name="l02938"></a>02938 <span class="comment">     one important case - lr is in column 65 in .debug_frame output,</span>
<a name="l02939"></a>02939 <span class="comment">     instead of 108.</span>
<a name="l02940"></a>02940 <span class="comment"></span>
<a name="l02941"></a>02941 <span class="comment">     GCC 3.4, and the &quot;hammer&quot; branch, have a related problem.  They</span>
<a name="l02942"></a>02942 <span class="comment">     record lr register saves in .debug_frame as 108, but still record</span>
<a name="l02943"></a>02943 <span class="comment">     the return column as 65.  We fix that up too.</span>
<a name="l02944"></a>02944 <span class="comment"></span>
<a name="l02945"></a>02945 <span class="comment">     We can do this because 65 is assigned to fpsr, and GCC never</span>
<a name="l02946"></a>02946 <span class="comment">     generates debug info referring to it.  To add support for</span>
<a name="l02947"></a>02947 <span class="comment">     handwritten debug info that restores fpsr, we would need to add a</span>
<a name="l02948"></a>02948 <span class="comment">     producer version check to this.  */</span>
<a name="l02949"></a>02949   <span class="keywordflow">if</span> (!eh_frame_p)
<a name="l02950"></a>02950     {
<a name="l02951"></a>02951       <span class="keywordflow">if</span> (num == 65)
<a name="l02952"></a>02952         <span class="keywordflow">return</span> 108;
<a name="l02953"></a>02953       <span class="keywordflow">else</span>
<a name="l02954"></a>02954         <span class="keywordflow">return</span> num;
<a name="l02955"></a>02955     }
<a name="l02956"></a>02956 
<a name="l02957"></a>02957   <span class="comment">/* .eh_frame is GCC specific.  For binary compatibility, it uses GCC</span>
<a name="l02958"></a>02958 <span class="comment">     internal register numbering; translate that to the standard DWARF2</span>
<a name="l02959"></a>02959 <span class="comment">     register numbering.  */</span>
<a name="l02960"></a>02960   <span class="keywordflow">if</span> (0 &lt;= num &amp;&amp; num &lt;= 63)    <span class="comment">/* r0-r31,fp0-fp31 */</span>
<a name="l02961"></a>02961     <span class="keywordflow">return</span> num;
<a name="l02962"></a>02962   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (68 &lt;= num &amp;&amp; num &lt;= 75) <span class="comment">/* cr0-cr8 */</span>
<a name="l02963"></a>02963     <span class="keywordflow">return</span> num - 68 + 86;
<a name="l02964"></a>02964   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (77 &lt;= num &amp;&amp; num &lt;= 108) <span class="comment">/* vr0-vr31 */</span>
<a name="l02965"></a>02965     <span class="keywordflow">return</span> num - 77 + 1124;
<a name="l02966"></a>02966   <span class="keywordflow">else</span>
<a name="l02967"></a>02967     <span class="keywordflow">switch</span> (num)
<a name="l02968"></a>02968       {
<a name="l02969"></a>02969       <span class="keywordflow">case</span> 64: <span class="comment">/* mq */</span>
<a name="l02970"></a>02970         <span class="keywordflow">return</span> 100;
<a name="l02971"></a>02971       <span class="keywordflow">case</span> 65: <span class="comment">/* lr */</span>
<a name="l02972"></a>02972         <span class="keywordflow">return</span> 108;
<a name="l02973"></a>02973       <span class="keywordflow">case</span> 66: <span class="comment">/* ctr */</span>
<a name="l02974"></a>02974         <span class="keywordflow">return</span> 109;
<a name="l02975"></a>02975       <span class="keywordflow">case</span> 76: <span class="comment">/* xer */</span>
<a name="l02976"></a>02976         <span class="keywordflow">return</span> 101;
<a name="l02977"></a>02977       <span class="keywordflow">case</span> 109: <span class="comment">/* vrsave */</span>
<a name="l02978"></a>02978         <span class="keywordflow">return</span> 356;
<a name="l02979"></a>02979       <span class="keywordflow">case</span> 110: <span class="comment">/* vscr */</span>
<a name="l02980"></a>02980         <span class="keywordflow">return</span> 67;
<a name="l02981"></a>02981       <span class="keywordflow">case</span> 111: <span class="comment">/* spe_acc */</span>
<a name="l02982"></a>02982         <span class="keywordflow">return</span> 99;
<a name="l02983"></a>02983       <span class="keywordflow">case</span> 112: <span class="comment">/* spefscr */</span>
<a name="l02984"></a>02984         <span class="keywordflow">return</span> 612;
<a name="l02985"></a>02985       <span class="keywordflow">default</span>:
<a name="l02986"></a>02986         <span class="keywordflow">return</span> num;
<a name="l02987"></a>02987       }
<a name="l02988"></a>02988 }
<a name="l02989"></a>02989 
<a name="l02990"></a>02990 
<a name="l02991"></a>02991 <span class="comment">/* Handling the various POWER/PowerPC variants.  */</span>
<a name="l02992"></a>02992 
<a name="l02993"></a>02993 <span class="comment">/* Information about a particular processor variant.  */</span>
<a name="l02994"></a>02994 
<a name="l02995"></a><a class="code" href="structvariant.html">02995</a> <span class="keyword">struct </span><a class="code" href="structvariant.html">variant</a>
<a name="l02996"></a>02996   {
<a name="l02997"></a>02997     <span class="comment">/* Name of this variant.  */</span>
<a name="l02998"></a><a class="code" href="structvariant.html#af3119acbbf33d56ca231e7658bec00a5">02998</a>     <span class="keywordtype">char</span> *<a class="code" href="structvariant.html#af3119acbbf33d56ca231e7658bec00a5">name</a>;
<a name="l02999"></a>02999 
<a name="l03000"></a>03000     <span class="comment">/* English description of the variant.  */</span>
<a name="l03001"></a><a class="code" href="structvariant.html#a8bc2e633b9310786659380dd413d469e">03001</a>     <span class="keywordtype">char</span> *<a class="code" href="structvariant.html#a8bc2e633b9310786659380dd413d469e">description</a>;
<a name="l03002"></a>03002 
<a name="l03003"></a>03003     <span class="comment">/* bfd_arch_info.arch corresponding to variant.  */</span>
<a name="l03004"></a><a class="code" href="structvariant.html#a7e5fa30c5d4b450e205f20c264edda7a">03004</a>     <span class="keyword">enum</span> bfd_architecture <a class="code" href="structvariant.html#a7e5fa30c5d4b450e205f20c264edda7a">arch</a>;
<a name="l03005"></a>03005 
<a name="l03006"></a>03006     <span class="comment">/* bfd_arch_info.mach corresponding to variant.  */</span>
<a name="l03007"></a><a class="code" href="structvariant.html#a1f2f1957879f7a4b3b4165c704998713">03007</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structvariant.html#a1f2f1957879f7a4b3b4165c704998713">mach</a>;
<a name="l03008"></a>03008 
<a name="l03009"></a>03009     <span class="comment">/* Target description for this variant.  */</span>
<a name="l03010"></a><a class="code" href="structvariant.html#a196a7d555963f3d555b82424e9ee74ee">03010</a>     <span class="keyword">struct </span><a class="code" href="structtarget__desc.html">target_desc</a> **<a class="code" href="structvariant.html#a196a7d555963f3d555b82424e9ee74ee">tdesc</a>;
<a name="l03011"></a>03011   };
<a name="l03012"></a>03012 
<a name="l03013"></a><a class="code" href="rs6000-tdep_8c.html#af9de3ead49778a542ed172e5de0a878a">03013</a> <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structvariant.html">variant</a> <a class="code" href="rs6000-tdep_8c.html#af9de3ead49778a542ed172e5de0a878a">variants</a>[] =
<a name="l03014"></a>03014 {
<a name="l03015"></a>03015   {<span class="stringliteral">&quot;powerpc&quot;</span>, <span class="stringliteral">&quot;PowerPC user-level&quot;</span>, bfd_arch_powerpc,
<a name="l03016"></a>03016    bfd_mach_ppc, &amp;<a class="code" href="powerpc-altivec32_8c.html#a64bbfe9a9d3535b1f688424d4ddd95c0">tdesc_powerpc_altivec32</a>},
<a name="l03017"></a>03017   {<span class="stringliteral">&quot;power&quot;</span>, <span class="stringliteral">&quot;POWER user-level&quot;</span>, bfd_arch_rs6000,
<a name="l03018"></a>03018    bfd_mach_rs6k, &amp;<a class="code" href="rs6000_8c.html#a548d06078ea65f011621560a8c4c2bb6">tdesc_rs6000</a>},
<a name="l03019"></a>03019   {<span class="stringliteral">&quot;403&quot;</span>, <span class="stringliteral">&quot;IBM PowerPC 403&quot;</span>, bfd_arch_powerpc,
<a name="l03020"></a>03020    bfd_mach_ppc_403, &amp;<a class="code" href="powerpc-403_8c.html#a7b05a7733c195d18cc6b932632cce8ac">tdesc_powerpc_403</a>},
<a name="l03021"></a>03021   {<span class="stringliteral">&quot;405&quot;</span>, <span class="stringliteral">&quot;IBM PowerPC 405&quot;</span>, bfd_arch_powerpc,
<a name="l03022"></a>03022    bfd_mach_ppc_405, &amp;<a class="code" href="powerpc-405_8c.html#a0625c9e13c32df1e5acdf6b1f7391501">tdesc_powerpc_405</a>},
<a name="l03023"></a>03023   {<span class="stringliteral">&quot;601&quot;</span>, <span class="stringliteral">&quot;Motorola PowerPC 601&quot;</span>, bfd_arch_powerpc,
<a name="l03024"></a>03024    bfd_mach_ppc_601, &amp;<a class="code" href="powerpc-601_8c.html#abeb7e5c3b61658e69b2198fbf035ef7c">tdesc_powerpc_601</a>},
<a name="l03025"></a>03025   {<span class="stringliteral">&quot;602&quot;</span>, <span class="stringliteral">&quot;Motorola PowerPC 602&quot;</span>, bfd_arch_powerpc,
<a name="l03026"></a>03026    bfd_mach_ppc_602, &amp;<a class="code" href="powerpc-602_8c.html#aae06b2e29c1c380bdb64e0f29c8b46aa">tdesc_powerpc_602</a>},
<a name="l03027"></a>03027   {<span class="stringliteral">&quot;603&quot;</span>, <span class="stringliteral">&quot;Motorola/IBM PowerPC 603 or 603e&quot;</span>, bfd_arch_powerpc,
<a name="l03028"></a>03028    bfd_mach_ppc_603, &amp;<a class="code" href="powerpc-603_8c.html#a760b8102fbd24341a9c279425a3cef4f">tdesc_powerpc_603</a>},
<a name="l03029"></a>03029   {<span class="stringliteral">&quot;604&quot;</span>, <span class="stringliteral">&quot;Motorola PowerPC 604 or 604e&quot;</span>, bfd_arch_powerpc,
<a name="l03030"></a>03030    604, &amp;<a class="code" href="powerpc-604_8c.html#af97c7cfcb0fdb4735a5604144a77e82d">tdesc_powerpc_604</a>},
<a name="l03031"></a>03031   {<span class="stringliteral">&quot;403GC&quot;</span>, <span class="stringliteral">&quot;IBM PowerPC 403GC&quot;</span>, bfd_arch_powerpc,
<a name="l03032"></a>03032    bfd_mach_ppc_403gc, &amp;<a class="code" href="powerpc-403gc_8c.html#a73b76f522520938cd61c623e23f1cbf9">tdesc_powerpc_403gc</a>},
<a name="l03033"></a>03033   {<span class="stringliteral">&quot;505&quot;</span>, <span class="stringliteral">&quot;Motorola PowerPC 505&quot;</span>, bfd_arch_powerpc,
<a name="l03034"></a>03034    bfd_mach_ppc_505, &amp;<a class="code" href="powerpc-505_8c.html#ac0cb758720c8f2c97097f82df722a4db">tdesc_powerpc_505</a>},
<a name="l03035"></a>03035   {<span class="stringliteral">&quot;860&quot;</span>, <span class="stringliteral">&quot;Motorola PowerPC 860 or 850&quot;</span>, bfd_arch_powerpc,
<a name="l03036"></a>03036    bfd_mach_ppc_860, &amp;<a class="code" href="powerpc-860_8c.html#ab8256c96aa56094289c0d9889551df2f">tdesc_powerpc_860</a>},
<a name="l03037"></a>03037   {<span class="stringliteral">&quot;750&quot;</span>, <span class="stringliteral">&quot;Motorola/IBM PowerPC 750 or 740&quot;</span>, bfd_arch_powerpc,
<a name="l03038"></a>03038    bfd_mach_ppc_750, &amp;<a class="code" href="powerpc-750_8c.html#a3578449296ab52628f4866b6ee138108">tdesc_powerpc_750</a>},
<a name="l03039"></a>03039   {<span class="stringliteral">&quot;7400&quot;</span>, <span class="stringliteral">&quot;Motorola/IBM PowerPC 7400 (G4)&quot;</span>, bfd_arch_powerpc,
<a name="l03040"></a>03040    bfd_mach_ppc_7400, &amp;<a class="code" href="powerpc-7400_8c.html#aa32ff49bea8646eab852a9bfc1da32b2">tdesc_powerpc_7400</a>},
<a name="l03041"></a>03041   {<span class="stringliteral">&quot;e500&quot;</span>, <span class="stringliteral">&quot;Motorola PowerPC e500&quot;</span>, bfd_arch_powerpc,
<a name="l03042"></a>03042    bfd_mach_ppc_e500, &amp;<a class="code" href="powerpc-e500_8c.html#a98fa17d4a5f7abeed5eea91d2287c7ce">tdesc_powerpc_e500</a>},
<a name="l03043"></a>03043 
<a name="l03044"></a>03044   <span class="comment">/* 64-bit */</span>
<a name="l03045"></a>03045   {<span class="stringliteral">&quot;powerpc64&quot;</span>, <span class="stringliteral">&quot;PowerPC 64-bit user-level&quot;</span>, bfd_arch_powerpc,
<a name="l03046"></a>03046    bfd_mach_ppc64, &amp;<a class="code" href="powerpc-altivec64_8c.html#a97f3d260c2ed4c4f23a8790762dcfc7d">tdesc_powerpc_altivec64</a>},
<a name="l03047"></a>03047   {<span class="stringliteral">&quot;620&quot;</span>, <span class="stringliteral">&quot;Motorola PowerPC 620&quot;</span>, bfd_arch_powerpc,
<a name="l03048"></a>03048    bfd_mach_ppc_620, &amp;<a class="code" href="powerpc-64_8c.html#a3cf5b660c3154e5741ced21e5dc1e267">tdesc_powerpc_64</a>},
<a name="l03049"></a>03049   {<span class="stringliteral">&quot;630&quot;</span>, <span class="stringliteral">&quot;Motorola PowerPC 630&quot;</span>, bfd_arch_powerpc,
<a name="l03050"></a>03050    bfd_mach_ppc_630, &amp;<a class="code" href="powerpc-64_8c.html#a3cf5b660c3154e5741ced21e5dc1e267">tdesc_powerpc_64</a>},
<a name="l03051"></a>03051   {<span class="stringliteral">&quot;a35&quot;</span>, <span class="stringliteral">&quot;PowerPC A35&quot;</span>, bfd_arch_powerpc,
<a name="l03052"></a>03052    bfd_mach_ppc_a35, &amp;<a class="code" href="powerpc-64_8c.html#a3cf5b660c3154e5741ced21e5dc1e267">tdesc_powerpc_64</a>},
<a name="l03053"></a>03053   {<span class="stringliteral">&quot;rs64ii&quot;</span>, <span class="stringliteral">&quot;PowerPC rs64ii&quot;</span>, bfd_arch_powerpc,
<a name="l03054"></a>03054    bfd_mach_ppc_rs64ii, &amp;<a class="code" href="powerpc-64_8c.html#a3cf5b660c3154e5741ced21e5dc1e267">tdesc_powerpc_64</a>},
<a name="l03055"></a>03055   {<span class="stringliteral">&quot;rs64iii&quot;</span>, <span class="stringliteral">&quot;PowerPC rs64iii&quot;</span>, bfd_arch_powerpc,
<a name="l03056"></a>03056    bfd_mach_ppc_rs64iii, &amp;<a class="code" href="powerpc-64_8c.html#a3cf5b660c3154e5741ced21e5dc1e267">tdesc_powerpc_64</a>},
<a name="l03057"></a>03057 
<a name="l03058"></a>03058   <span class="comment">/* FIXME: I haven&#39;t checked the register sets of the following.  */</span>
<a name="l03059"></a>03059   {<span class="stringliteral">&quot;rs1&quot;</span>, <span class="stringliteral">&quot;IBM POWER RS1&quot;</span>, bfd_arch_rs6000,
<a name="l03060"></a>03060    bfd_mach_rs6k_rs1, &amp;<a class="code" href="rs6000_8c.html#a548d06078ea65f011621560a8c4c2bb6">tdesc_rs6000</a>},
<a name="l03061"></a>03061   {<span class="stringliteral">&quot;rsc&quot;</span>, <span class="stringliteral">&quot;IBM POWER RSC&quot;</span>, bfd_arch_rs6000,
<a name="l03062"></a>03062    bfd_mach_rs6k_rsc, &amp;<a class="code" href="rs6000_8c.html#a548d06078ea65f011621560a8c4c2bb6">tdesc_rs6000</a>},
<a name="l03063"></a>03063   {<span class="stringliteral">&quot;rs2&quot;</span>, <span class="stringliteral">&quot;IBM POWER RS2&quot;</span>, bfd_arch_rs6000,
<a name="l03064"></a>03064    bfd_mach_rs6k_rs2, &amp;<a class="code" href="rs6000_8c.html#a548d06078ea65f011621560a8c4c2bb6">tdesc_rs6000</a>},
<a name="l03065"></a>03065 
<a name="l03066"></a>03066   {0, 0, 0, 0, 0}
<a name="l03067"></a>03067 };
<a name="l03068"></a>03068 
<a name="l03069"></a>03069 <span class="comment">/* Return the variant corresponding to architecture ARCH and machine number</span>
<a name="l03070"></a>03070 <span class="comment">   MACH.  If no such variant exists, return null.  */</span>
<a name="l03071"></a>03071 
<a name="l03072"></a>03072 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structvariant.html">variant</a> *
<a name="l03073"></a><a class="code" href="rs6000-tdep_8c.html#aaedf236e1a07f9c428e97efb3260c1db">03073</a> <a class="code" href="rs6000-tdep_8c.html#aaedf236e1a07f9c428e97efb3260c1db">find_variant_by_arch</a> (<span class="keyword">enum</span> bfd_architecture <a class="code" href="structvariant.html#a7e5fa30c5d4b450e205f20c264edda7a">arch</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structvariant.html#a1f2f1957879f7a4b3b4165c704998713">mach</a>)
<a name="l03074"></a>03074 {
<a name="l03075"></a>03075   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structvariant.html">variant</a> *v;
<a name="l03076"></a>03076 
<a name="l03077"></a>03077   <span class="keywordflow">for</span> (v = variants; v-&gt;<a class="code" href="structvariant.html#af3119acbbf33d56ca231e7658bec00a5">name</a>; v++)
<a name="l03078"></a>03078     <span class="keywordflow">if</span> (arch == v-&gt;<a class="code" href="structvariant.html#a7e5fa30c5d4b450e205f20c264edda7a">arch</a> &amp;&amp; mach == v-&gt;<a class="code" href="structvariant.html#a1f2f1957879f7a4b3b4165c704998713">mach</a>)
<a name="l03079"></a>03079       <span class="keywordflow">return</span> v;
<a name="l03080"></a>03080 
<a name="l03081"></a>03081   <span class="keywordflow">return</span> NULL;
<a name="l03082"></a>03082 }
<a name="l03083"></a>03083 
<a name="l03084"></a>03084 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l03085"></a><a class="code" href="rs6000-tdep_8c.html#a429b8fd5ed6dd452c1df8e7c38cab6d2">03085</a> <a class="code" href="rs6000-tdep_8c.html#a429b8fd5ed6dd452c1df8e7c38cab6d2">gdb_print_insn_powerpc</a> (bfd_vma <a class="code" href="exec_8h.html#ab268c3184bf49615e16de006a296a542">memaddr</a>, disassemble_info *info)
<a name="l03086"></a>03086 {
<a name="l03087"></a>03087   <span class="keywordflow">if</span> (info-&gt;endian == BFD_ENDIAN_BIG)
<a name="l03088"></a>03088     <span class="keywordflow">return</span> print_insn_big_powerpc (memaddr, info);
<a name="l03089"></a>03089   <span class="keywordflow">else</span>
<a name="l03090"></a>03090     <span class="keywordflow">return</span> print_insn_little_powerpc (memaddr, info);
<a name="l03091"></a>03091 }
<a name="l03092"></a>03092 
<a name="l03093"></a>03093 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l03094"></a><a class="code" href="rs6000-tdep_8c.html#a669401dc91f48000e71428d030ffc526">03094</a> <a class="code" href="rs6000-tdep_8c.html#a669401dc91f48000e71428d030ffc526">rs6000_unwind_pc</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *next_frame)
<a name="l03095"></a>03095 {
<a name="l03096"></a>03096   <span class="keywordflow">return</span> <a class="code" href="frame_8c.html#a294f6912118884550787fd59f2a08ff6">frame_unwind_register_unsigned</a> (next_frame,
<a name="l03097"></a>03097                                          <a class="code" href="gdbarch_8c.html#a07a162ebafea1269eb8f341db44e53e7">gdbarch_pc_regnum</a> (gdbarch));
<a name="l03098"></a>03098 }
<a name="l03099"></a>03099 
<a name="l03100"></a>03100 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structframe__id.html">frame_id</a>
<a name="l03101"></a><a class="code" href="rs6000-tdep_8c.html#ae262f7f91b8d55968868539679ca783c">03101</a> <a class="code" href="rs6000-tdep_8c.html#ae262f7f91b8d55968868539679ca783c">rs6000_dummy_id</a> (struct <a class="code" href="structgdbarch.html">gdbarch</a> *<a class="code" href="structgdbarch.html">gdbarch</a>, <span class="keyword">struct </span><a class="code" href="structframe__info.html">frame_info</a> *this_frame)
<a name="l03102"></a>03102 {
<a name="l03103"></a>03103   <span class="keywordflow">return</span> <a class="code" href="frame_8c.html#a7f32da6ddc275b4684c301448d891f5b">frame_id_build</a> (<a class="code" href="frame_8c.html#affa785e8937e96fd727e46a2cfec94c4">get_frame_register_unsigned</a>
<a name="l03104"></a>03104                           (this_frame, <a class="code" href="gdbarch_8c.html#a86f6193dd957c193df77477d9d84c4f3">gdbarch_sp_regnum</a> (gdbarch)),
<a name="l03105"></a>03105                          <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (this_frame));
<a name="l03106"></a>03106 }
<a name="l03107"></a>03107 
<a name="l03108"></a><a class="code" href="structrs6000__frame__cache.html">03108</a> <span class="keyword">struct </span><a class="code" href="structrs6000__frame__cache.html">rs6000_frame_cache</a>
<a name="l03109"></a>03109 {
<a name="l03110"></a><a class="code" href="structrs6000__frame__cache.html#ae75a883fc37982440e69fe82415f2b5b">03110</a>   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="structrs6000__frame__cache.html#ae75a883fc37982440e69fe82415f2b5b">base</a>;
<a name="l03111"></a><a class="code" href="structrs6000__frame__cache.html#a500dcc449badb0fbe1e6301f26d994b3">03111</a>   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="structrs6000__frame__cache.html#a500dcc449badb0fbe1e6301f26d994b3">initial_sp</a>;
<a name="l03112"></a><a class="code" href="structrs6000__frame__cache.html#a76b0e7bed25682580f670443f178672c">03112</a>   <span class="keyword">struct </span><a class="code" href="structtrad__frame__saved__reg.html">trad_frame_saved_reg</a> *<a class="code" href="structrs6000__frame__cache.html#a76b0e7bed25682580f670443f178672c">saved_regs</a>;
<a name="l03113"></a>03113 };
<a name="l03114"></a>03114 
<a name="l03115"></a>03115 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structrs6000__frame__cache.html">rs6000_frame_cache</a> *
<a name="l03116"></a><a class="code" href="rs6000-tdep_8c.html#aa0ba181fb4c49c0d8df27267b7f018c1">03116</a> <a class="code" href="rs6000-tdep_8c.html#aa0ba181fb4c49c0d8df27267b7f018c1">rs6000_frame_cache</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame, <span class="keywordtype">void</span> **this_cache)
<a name="l03117"></a>03117 {
<a name="l03118"></a>03118   <span class="keyword">struct </span><a class="code" href="structrs6000__frame__cache.html">rs6000_frame_cache</a> *cache;
<a name="l03119"></a>03119   <span class="keyword">struct </span>gdbarch *gdbarch = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (this_frame);
<a name="l03120"></a>03120   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l03121"></a>03121   <span class="keyword">enum</span> bfd_endian byte_order = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l03122"></a>03122   <span class="keyword">struct </span><a class="code" href="structrs6000__framedata.html">rs6000_framedata</a> fdata;
<a name="l03123"></a>03123   <span class="keywordtype">int</span> <a class="code" href="mt-tdep_8c.html#a67d83720b898f02393cea9503d6e089e">wordsize</a> = tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a820e9cc5ea69af966e2764ae201720cd">wordsize</a>;
<a name="l03124"></a>03124   <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> <a class="code" href="remote-fileio_8c.html#a7e97efb32ba66c3f1141bdbb82529d20">func</a>, pc;
<a name="l03125"></a>03125 
<a name="l03126"></a>03126   <span class="keywordflow">if</span> ((*this_cache) != NULL)
<a name="l03127"></a>03127     <span class="keywordflow">return</span> (*this_cache);
<a name="l03128"></a>03128   cache = <a class="code" href="frame_8h.html#af9f5c3008a0d58374aa310c5c63af552">FRAME_OBSTACK_ZALLOC</a> (<span class="keyword">struct</span> <a class="code" href="structrs6000__frame__cache.html">rs6000_frame_cache</a>);
<a name="l03129"></a>03129   (*this_cache) = cache;
<a name="l03130"></a>03130   cache-&gt;<a class="code" href="structrs6000__frame__cache.html#a76b0e7bed25682580f670443f178672c">saved_regs</a> = <a class="code" href="trad-frame_8c.html#a6b21318e80642c2b5e38b983f27cecec">trad_frame_alloc_saved_regs</a> (this_frame);
<a name="l03131"></a>03131 
<a name="l03132"></a>03132   func = <a class="code" href="frame_8c.html#ac64c0ce600cc134b2256c0d507f57cde">get_frame_func</a> (this_frame);
<a name="l03133"></a>03133   pc = <a class="code" href="frame_8c.html#a27aafb00e05cba145dfba0e4bc7b1d70">get_frame_pc</a> (this_frame);
<a name="l03134"></a>03134   <a class="code" href="rs6000-tdep_8c.html#a4120b4f8b77afd1b1ffb16d06b8506e8">skip_prologue</a> (gdbarch, func, pc, &amp;fdata);
<a name="l03135"></a>03135 
<a name="l03136"></a>03136   <span class="comment">/* Figure out the parent&#39;s stack pointer.  */</span>
<a name="l03137"></a>03137 
<a name="l03138"></a>03138   <span class="comment">/* NOTE: cagney/2002-04-14: The -&gt;frame points to the inner-most</span>
<a name="l03139"></a>03139 <span class="comment">     address of the current frame.  Things might be easier if the</span>
<a name="l03140"></a>03140 <span class="comment">     -&gt;frame pointed to the outer-most address of the frame.  In</span>
<a name="l03141"></a>03141 <span class="comment">     the mean time, the address of the prev frame is used as the</span>
<a name="l03142"></a>03142 <span class="comment">     base address of this frame.  */</span>
<a name="l03143"></a>03143   cache-&gt;<a class="code" href="structrs6000__frame__cache.html#ae75a883fc37982440e69fe82415f2b5b">base</a> = <a class="code" href="frame_8c.html#affa785e8937e96fd727e46a2cfec94c4">get_frame_register_unsigned</a>
<a name="l03144"></a>03144                 (this_frame, <a class="code" href="gdbarch_8c.html#a86f6193dd957c193df77477d9d84c4f3">gdbarch_sp_regnum</a> (gdbarch));
<a name="l03145"></a>03145 
<a name="l03146"></a>03146   <span class="comment">/* If the function appears to be frameless, check a couple of likely</span>
<a name="l03147"></a>03147 <span class="comment">     indicators that we have simply failed to find the frame setup.</span>
<a name="l03148"></a>03148 <span class="comment">     Two common cases of this are missing symbols (i.e.</span>
<a name="l03149"></a>03149 <span class="comment">     get_frame_func returns the wrong address or 0), and assembly</span>
<a name="l03150"></a>03150 <span class="comment">     stubs which have a fast exit path but set up a frame on the slow</span>
<a name="l03151"></a>03151 <span class="comment">     path.</span>
<a name="l03152"></a>03152 <span class="comment"></span>
<a name="l03153"></a>03153 <span class="comment">     If the LR appears to return to this function, then presume that</span>
<a name="l03154"></a>03154 <span class="comment">     we have an ABI compliant frame that we failed to find.  */</span>
<a name="l03155"></a>03155   <span class="keywordflow">if</span> (fdata.<a class="code" href="structrs6000__framedata.html#a436f9ab06e8bf4bc5b690ac6bac79d09">frameless</a> &amp;&amp; fdata.<a class="code" href="structrs6000__framedata.html#a2fa55d4b97c89f7dc3d01b87bb1377c5">lr_offset</a> == 0)
<a name="l03156"></a>03156     {
<a name="l03157"></a>03157       <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> saved_lr;
<a name="l03158"></a>03158       <span class="keywordtype">int</span> make_frame = 0;
<a name="l03159"></a>03159 
<a name="l03160"></a>03160       saved_lr = <a class="code" href="frame_8c.html#affa785e8937e96fd727e46a2cfec94c4">get_frame_register_unsigned</a> (this_frame, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a5f8e280348ae374459d2b5e2980a188c">ppc_lr_regnum</a>);
<a name="l03161"></a>03161       <span class="keywordflow">if</span> (func == 0 &amp;&amp; saved_lr == pc)
<a name="l03162"></a>03162         make_frame = 1;
<a name="l03163"></a>03163       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (func != 0)
<a name="l03164"></a>03164         {
<a name="l03165"></a>03165           <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> saved_func = <a class="code" href="blockframe_8c.html#a5f755befa096231f25bf9c0f7ce5a7c2">get_pc_function_start</a> (saved_lr);
<a name="l03166"></a>03166           <span class="keywordflow">if</span> (func == saved_func)
<a name="l03167"></a>03167             make_frame = 1;
<a name="l03168"></a>03168         }
<a name="l03169"></a>03169 
<a name="l03170"></a>03170       <span class="keywordflow">if</span> (make_frame)
<a name="l03171"></a>03171         {
<a name="l03172"></a>03172           fdata.<a class="code" href="structrs6000__framedata.html#a436f9ab06e8bf4bc5b690ac6bac79d09">frameless</a> = 0;
<a name="l03173"></a>03173           fdata.<a class="code" href="structrs6000__framedata.html#a2fa55d4b97c89f7dc3d01b87bb1377c5">lr_offset</a> = tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a6e2baa9008538182c177c6985b4c36e9">lr_frame_offset</a>;
<a name="l03174"></a>03174         }
<a name="l03175"></a>03175     }
<a name="l03176"></a>03176 
<a name="l03177"></a>03177   <span class="keywordflow">if</span> (!fdata.<a class="code" href="structrs6000__framedata.html#a436f9ab06e8bf4bc5b690ac6bac79d09">frameless</a>)
<a name="l03178"></a>03178     <span class="comment">/* Frameless really means stackless.  */</span>
<a name="l03179"></a>03179     cache-&gt;<a class="code" href="structrs6000__frame__cache.html#ae75a883fc37982440e69fe82415f2b5b">base</a>
<a name="l03180"></a>03180       = <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (cache-&gt;<a class="code" href="structrs6000__frame__cache.html#ae75a883fc37982440e69fe82415f2b5b">base</a>, wordsize, byte_order);
<a name="l03181"></a>03181 
<a name="l03182"></a>03182   <a class="code" href="trad-frame_8c.html#aba845c5704e0bebe84b2a84eb8c9e962">trad_frame_set_value</a> (cache-&gt;<a class="code" href="structrs6000__frame__cache.html#a76b0e7bed25682580f670443f178672c">saved_regs</a>,
<a name="l03183"></a>03183                         <a class="code" href="gdbarch_8c.html#a86f6193dd957c193df77477d9d84c4f3">gdbarch_sp_regnum</a> (gdbarch), cache-&gt;<a class="code" href="structrs6000__frame__cache.html#ae75a883fc37982440e69fe82415f2b5b">base</a>);
<a name="l03184"></a>03184 
<a name="l03185"></a>03185   <span class="comment">/* if != -1, fdata.saved_fpr is the smallest number of saved_fpr.</span>
<a name="l03186"></a>03186 <span class="comment">     All fpr&#39;s from saved_fpr to fp31 are saved.  */</span>
<a name="l03187"></a>03187 
<a name="l03188"></a>03188   <span class="keywordflow">if</span> (fdata.<a class="code" href="structrs6000__framedata.html#a2ef1436fd7e4a69465b4a764b6ec0fb2">saved_fpr</a> &gt;= 0)
<a name="l03189"></a>03189     {
<a name="l03190"></a>03190       <span class="keywordtype">int</span> i;
<a name="l03191"></a>03191       <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> fpr_addr = cache-&gt;<a class="code" href="structrs6000__frame__cache.html#ae75a883fc37982440e69fe82415f2b5b">base</a> + fdata.<a class="code" href="structrs6000__framedata.html#afa00471cc5d358b2f83318f446dc6d46">fpr_offset</a>;
<a name="l03192"></a>03192 
<a name="l03193"></a>03193       <span class="comment">/* If skip_prologue says floating-point registers were saved,</span>
<a name="l03194"></a>03194 <span class="comment">         but the current architecture has no floating-point registers,</span>
<a name="l03195"></a>03195 <span class="comment">         then that&#39;s strange.  But we have no indices to even record</span>
<a name="l03196"></a>03196 <span class="comment">         the addresses under, so we just ignore it.  */</span>
<a name="l03197"></a>03197       <span class="keywordflow">if</span> (<a class="code" href="ppc-tdep_8h.html#a7061eb865daba576f05eda0bb395290d">ppc_floating_point_unit_p</a> (gdbarch))
<a name="l03198"></a>03198         <span class="keywordflow">for</span> (i = fdata.<a class="code" href="structrs6000__framedata.html#a2ef1436fd7e4a69465b4a764b6ec0fb2">saved_fpr</a>; i &lt; <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba7cb3ec3816363e0df7014e2a613a6df8">ppc_num_fprs</a>; i++)
<a name="l03199"></a>03199           {
<a name="l03200"></a>03200             cache-&gt;<a class="code" href="structrs6000__frame__cache.html#a76b0e7bed25682580f670443f178672c">saved_regs</a>[tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> + i].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = fpr_addr;
<a name="l03201"></a>03201             fpr_addr += 8;
<a name="l03202"></a>03202           }
<a name="l03203"></a>03203     }
<a name="l03204"></a>03204 
<a name="l03205"></a>03205   <span class="comment">/* if != -1, fdata.saved_gpr is the smallest number of saved_gpr.</span>
<a name="l03206"></a>03206 <span class="comment">     All gpr&#39;s from saved_gpr to gpr31 are saved (except during the</span>
<a name="l03207"></a>03207 <span class="comment">     prologue).  */</span>
<a name="l03208"></a>03208 
<a name="l03209"></a>03209   <span class="keywordflow">if</span> (fdata.<a class="code" href="structrs6000__framedata.html#a864b62d4fb50dd86d9f15e5aab678764">saved_gpr</a> &gt;= 0)
<a name="l03210"></a>03210     {
<a name="l03211"></a>03211       <span class="keywordtype">int</span> i;
<a name="l03212"></a>03212       <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> gpr_addr = cache-&gt;<a class="code" href="structrs6000__frame__cache.html#ae75a883fc37982440e69fe82415f2b5b">base</a> + fdata.<a class="code" href="structrs6000__framedata.html#a4fc2314f4e399e3a4d3b82c4a5494766">gpr_offset</a>;
<a name="l03213"></a>03213       <span class="keywordflow">for</span> (i = fdata.<a class="code" href="structrs6000__framedata.html#a864b62d4fb50dd86d9f15e5aab678764">saved_gpr</a>; i &lt; <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba24b61ab9c068d3db8d90266aff6c008a">ppc_num_gprs</a>; i++)
<a name="l03214"></a>03214         {
<a name="l03215"></a>03215           <span class="keywordflow">if</span> (fdata.<a class="code" href="structrs6000__framedata.html#a2f00dfad4edfd39a6f6d24c094ab1d7d">gpr_mask</a> &amp; (1U &lt;&lt; i))
<a name="l03216"></a>03216             cache-&gt;<a class="code" href="structrs6000__frame__cache.html#a76b0e7bed25682580f670443f178672c">saved_regs</a>[tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a764a18b9d437c88d6ad174febf29aeeb">ppc_gp0_regnum</a> + i].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = gpr_addr;
<a name="l03217"></a>03217           gpr_addr += wordsize;
<a name="l03218"></a>03218         }
<a name="l03219"></a>03219     }
<a name="l03220"></a>03220 
<a name="l03221"></a>03221   <span class="comment">/* if != -1, fdata.saved_vr is the smallest number of saved_vr.</span>
<a name="l03222"></a>03222 <span class="comment">     All vr&#39;s from saved_vr to vr31 are saved.  */</span>
<a name="l03223"></a>03223   <span class="keywordflow">if</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a> != -1 &amp;&amp; tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae450527d83da498c547b5381594264b3">ppc_vrsave_regnum</a> != -1)
<a name="l03224"></a>03224     {
<a name="l03225"></a>03225       <span class="keywordflow">if</span> (fdata.<a class="code" href="structrs6000__framedata.html#a5c109de762bc0529776b89089ae3a9cc">saved_vr</a> &gt;= 0)
<a name="l03226"></a>03226         {
<a name="l03227"></a>03227           <span class="keywordtype">int</span> i;
<a name="l03228"></a>03228           <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> vr_addr = cache-&gt;<a class="code" href="structrs6000__frame__cache.html#ae75a883fc37982440e69fe82415f2b5b">base</a> + fdata.<a class="code" href="structrs6000__framedata.html#a26faa448c2d4ce25ea90239b7bbaeefc">vr_offset</a>;
<a name="l03229"></a>03229           <span class="keywordflow">for</span> (i = fdata.<a class="code" href="structrs6000__framedata.html#a5c109de762bc0529776b89089ae3a9cc">saved_vr</a>; i &lt; 32; i++)
<a name="l03230"></a>03230             {
<a name="l03231"></a>03231               cache-&gt;<a class="code" href="structrs6000__frame__cache.html#a76b0e7bed25682580f670443f178672c">saved_regs</a>[tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a> + i].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = vr_addr;
<a name="l03232"></a>03232               vr_addr += <a class="code" href="regcache_8c.html#a4c51fa25edb9ce25451b9dc7bd127aac">register_size</a> (gdbarch, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a>);
<a name="l03233"></a>03233             }
<a name="l03234"></a>03234         }
<a name="l03235"></a>03235     }
<a name="l03236"></a>03236 
<a name="l03237"></a>03237   <span class="comment">/* if != -1, fdata.saved_ev is the smallest number of saved_ev.</span>
<a name="l03238"></a>03238 <span class="comment">     All vr&#39;s from saved_ev to ev31 are saved. ?????  */</span>
<a name="l03239"></a>03239   <span class="keywordflow">if</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a4e1ef03cbbfda489b7573251851291f4">ppc_ev0_regnum</a> != -1)
<a name="l03240"></a>03240     {
<a name="l03241"></a>03241       <span class="keywordflow">if</span> (fdata.<a class="code" href="structrs6000__framedata.html#a84900e94cb40683900fd7a0c8cd0875d">saved_ev</a> &gt;= 0)
<a name="l03242"></a>03242         {
<a name="l03243"></a>03243           <span class="keywordtype">int</span> i;
<a name="l03244"></a>03244           <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> ev_addr = cache-&gt;<a class="code" href="structrs6000__frame__cache.html#ae75a883fc37982440e69fe82415f2b5b">base</a> + fdata.<a class="code" href="structrs6000__framedata.html#ae19b25bb053617d10675690b2d5d940d">ev_offset</a>;
<a name="l03245"></a>03245           <span class="keywordflow">for</span> (i = fdata.<a class="code" href="structrs6000__framedata.html#a84900e94cb40683900fd7a0c8cd0875d">saved_ev</a>; i &lt; <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba24b61ab9c068d3db8d90266aff6c008a">ppc_num_gprs</a>; i++)
<a name="l03246"></a>03246             {
<a name="l03247"></a>03247               cache-&gt;<a class="code" href="structrs6000__frame__cache.html#a76b0e7bed25682580f670443f178672c">saved_regs</a>[tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a4e1ef03cbbfda489b7573251851291f4">ppc_ev0_regnum</a> + i].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = ev_addr;
<a name="l03248"></a>03248               cache-&gt;<a class="code" href="structrs6000__frame__cache.html#a76b0e7bed25682580f670443f178672c">saved_regs</a>[tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a764a18b9d437c88d6ad174febf29aeeb">ppc_gp0_regnum</a> + i].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a> = ev_addr + 4;
<a name="l03249"></a>03249               ev_addr += <a class="code" href="regcache_8c.html#a4c51fa25edb9ce25451b9dc7bd127aac">register_size</a> (gdbarch, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a4e1ef03cbbfda489b7573251851291f4">ppc_ev0_regnum</a>);
<a name="l03250"></a>03250             }
<a name="l03251"></a>03251         }
<a name="l03252"></a>03252     }
<a name="l03253"></a>03253 
<a name="l03254"></a>03254   <span class="comment">/* If != 0, fdata.cr_offset is the offset from the frame that</span>
<a name="l03255"></a>03255 <span class="comment">     holds the CR.  */</span>
<a name="l03256"></a>03256   <span class="keywordflow">if</span> (fdata.<a class="code" href="structrs6000__framedata.html#a653029fbd7bb523becdb6f6b635b7e57">cr_offset</a> != 0)
<a name="l03257"></a>03257     cache-&gt;<a class="code" href="structrs6000__frame__cache.html#a76b0e7bed25682580f670443f178672c">saved_regs</a>[tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a472825ad1cf896dce405f82f2599ae9a">ppc_cr_regnum</a>].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a>
<a name="l03258"></a>03258       = cache-&gt;<a class="code" href="structrs6000__frame__cache.html#ae75a883fc37982440e69fe82415f2b5b">base</a> + fdata.<a class="code" href="structrs6000__framedata.html#a653029fbd7bb523becdb6f6b635b7e57">cr_offset</a>;
<a name="l03259"></a>03259 
<a name="l03260"></a>03260   <span class="comment">/* If != 0, fdata.lr_offset is the offset from the frame that</span>
<a name="l03261"></a>03261 <span class="comment">     holds the LR.  */</span>
<a name="l03262"></a>03262   <span class="keywordflow">if</span> (fdata.<a class="code" href="structrs6000__framedata.html#a2fa55d4b97c89f7dc3d01b87bb1377c5">lr_offset</a> != 0)
<a name="l03263"></a>03263     cache-&gt;<a class="code" href="structrs6000__frame__cache.html#a76b0e7bed25682580f670443f178672c">saved_regs</a>[tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a5f8e280348ae374459d2b5e2980a188c">ppc_lr_regnum</a>].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a>
<a name="l03264"></a>03264       = cache-&gt;<a class="code" href="structrs6000__frame__cache.html#ae75a883fc37982440e69fe82415f2b5b">base</a> + fdata.<a class="code" href="structrs6000__framedata.html#a2fa55d4b97c89f7dc3d01b87bb1377c5">lr_offset</a>;
<a name="l03265"></a>03265   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fdata.<a class="code" href="structrs6000__framedata.html#a927eceb33f6ffca4ad573494e0ac164b">lr_register</a> != -1)
<a name="l03266"></a>03266     cache-&gt;<a class="code" href="structrs6000__frame__cache.html#a76b0e7bed25682580f670443f178672c">saved_regs</a>[tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a5f8e280348ae374459d2b5e2980a188c">ppc_lr_regnum</a>].<a class="code" href="structtrad__frame__saved__reg.html#a6f71f69ef3a3fe36541e5a47a692889f">realreg</a> = fdata.<a class="code" href="structrs6000__framedata.html#a927eceb33f6ffca4ad573494e0ac164b">lr_register</a>;
<a name="l03267"></a>03267   <span class="comment">/* The PC is found in the link register.  */</span>
<a name="l03268"></a>03268   cache-&gt;<a class="code" href="structrs6000__frame__cache.html#a76b0e7bed25682580f670443f178672c">saved_regs</a>[<a class="code" href="gdbarch_8c.html#a07a162ebafea1269eb8f341db44e53e7">gdbarch_pc_regnum</a> (gdbarch)] =
<a name="l03269"></a>03269     cache-&gt;<a class="code" href="structrs6000__frame__cache.html#a76b0e7bed25682580f670443f178672c">saved_regs</a>[tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a5f8e280348ae374459d2b5e2980a188c">ppc_lr_regnum</a>];
<a name="l03270"></a>03270 
<a name="l03271"></a>03271   <span class="comment">/* If != 0, fdata.vrsave_offset is the offset from the frame that</span>
<a name="l03272"></a>03272 <span class="comment">     holds the VRSAVE.  */</span>
<a name="l03273"></a>03273   <span class="keywordflow">if</span> (fdata.<a class="code" href="structrs6000__framedata.html#a67412926b0bc9283dce4f19c2009693a">vrsave_offset</a> != 0)
<a name="l03274"></a>03274     cache-&gt;<a class="code" href="structrs6000__frame__cache.html#a76b0e7bed25682580f670443f178672c">saved_regs</a>[tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae450527d83da498c547b5381594264b3">ppc_vrsave_regnum</a>].<a class="code" href="structtrad__frame__saved__reg.html#a61ae37bca806acd4b239bf27cbed527a">addr</a>
<a name="l03275"></a>03275       = cache-&gt;<a class="code" href="structrs6000__frame__cache.html#ae75a883fc37982440e69fe82415f2b5b">base</a> + fdata.<a class="code" href="structrs6000__framedata.html#a67412926b0bc9283dce4f19c2009693a">vrsave_offset</a>;
<a name="l03276"></a>03276 
<a name="l03277"></a>03277   <span class="keywordflow">if</span> (fdata.<a class="code" href="structrs6000__framedata.html#a03be24b999043cf63a67b948f0d5b7a3">alloca_reg</a> &lt; 0)
<a name="l03278"></a>03278     <span class="comment">/* If no alloca register used, then fi-&gt;frame is the value of the</span>
<a name="l03279"></a>03279 <span class="comment">       %sp for this frame, and it is good enough.  */</span>
<a name="l03280"></a>03280     cache-&gt;<a class="code" href="structrs6000__frame__cache.html#a500dcc449badb0fbe1e6301f26d994b3">initial_sp</a>
<a name="l03281"></a>03281       = <a class="code" href="frame_8c.html#affa785e8937e96fd727e46a2cfec94c4">get_frame_register_unsigned</a> (this_frame, <a class="code" href="gdbarch_8c.html#a86f6193dd957c193df77477d9d84c4f3">gdbarch_sp_regnum</a> (gdbarch));
<a name="l03282"></a>03282   <span class="keywordflow">else</span>
<a name="l03283"></a>03283     cache-&gt;<a class="code" href="structrs6000__frame__cache.html#a500dcc449badb0fbe1e6301f26d994b3">initial_sp</a>
<a name="l03284"></a>03284       = <a class="code" href="frame_8c.html#affa785e8937e96fd727e46a2cfec94c4">get_frame_register_unsigned</a> (this_frame, fdata.<a class="code" href="structrs6000__framedata.html#a03be24b999043cf63a67b948f0d5b7a3">alloca_reg</a>);
<a name="l03285"></a>03285 
<a name="l03286"></a>03286   <span class="keywordflow">return</span> cache;
<a name="l03287"></a>03287 }
<a name="l03288"></a>03288 
<a name="l03289"></a>03289 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l03290"></a><a class="code" href="rs6000-tdep_8c.html#accbdc679ac72d5a16f77e254eb0e60d3">03290</a> <a class="code" href="rs6000-tdep_8c.html#accbdc679ac72d5a16f77e254eb0e60d3">rs6000_frame_this_id</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame, <span class="keywordtype">void</span> **this_cache,
<a name="l03291"></a>03291                       <span class="keyword">struct</span> <a class="code" href="structframe__id.html">frame_id</a> *this_id)
<a name="l03292"></a>03292 {
<a name="l03293"></a>03293   <span class="keyword">struct </span><a class="code" href="structrs6000__frame__cache.html">rs6000_frame_cache</a> *info = <a class="code" href="rs6000-tdep_8c.html#aa0ba181fb4c49c0d8df27267b7f018c1">rs6000_frame_cache</a> (this_frame,
<a name="l03294"></a>03294                                                         this_cache);
<a name="l03295"></a>03295   <span class="comment">/* This marks the outermost frame.  */</span>
<a name="l03296"></a>03296   <span class="keywordflow">if</span> (info-&gt;<a class="code" href="structrs6000__frame__cache.html#ae75a883fc37982440e69fe82415f2b5b">base</a> == 0)
<a name="l03297"></a>03297     <span class="keywordflow">return</span>;
<a name="l03298"></a>03298 
<a name="l03299"></a>03299   (*this_id) = <a class="code" href="frame_8c.html#a7f32da6ddc275b4684c301448d891f5b">frame_id_build</a> (info-&gt;<a class="code" href="structrs6000__frame__cache.html#ae75a883fc37982440e69fe82415f2b5b">base</a>, <a class="code" href="frame_8c.html#ac64c0ce600cc134b2256c0d507f57cde">get_frame_func</a> (this_frame));
<a name="l03300"></a>03300 }
<a name="l03301"></a>03301 
<a name="l03302"></a>03302 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structvalue.html">value</a> *
<a name="l03303"></a><a class="code" href="rs6000-tdep_8c.html#a0b1c70f9f10e25ef8dfe3435b088b680">03303</a> <a class="code" href="rs6000-tdep_8c.html#a0b1c70f9f10e25ef8dfe3435b088b680">rs6000_frame_prev_register</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame,
<a name="l03304"></a>03304                             <span class="keywordtype">void</span> **this_cache, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>)
<a name="l03305"></a>03305 {
<a name="l03306"></a>03306   <span class="keyword">struct </span><a class="code" href="structrs6000__frame__cache.html">rs6000_frame_cache</a> *info = <a class="code" href="rs6000-tdep_8c.html#aa0ba181fb4c49c0d8df27267b7f018c1">rs6000_frame_cache</a> (this_frame,
<a name="l03307"></a>03307                                                         this_cache);
<a name="l03308"></a>03308   <span class="keywordflow">return</span> <a class="code" href="trad-frame_8c.html#a942094830577eeb218e28c3c84452d59">trad_frame_get_prev_register</a> (this_frame, info-&gt;<a class="code" href="structrs6000__frame__cache.html#a76b0e7bed25682580f670443f178672c">saved_regs</a>, regnum);
<a name="l03309"></a>03309 }
<a name="l03310"></a>03310 
<a name="l03311"></a><a class="code" href="rs6000-tdep_8c.html#abd25d32e733011d03f580abea9725695">03311</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structframe__unwind.html">frame_unwind</a> <a class="code" href="rs6000-tdep_8c.html#abd25d32e733011d03f580abea9725695">rs6000_frame_unwind</a> =
<a name="l03312"></a>03312 {
<a name="l03313"></a>03313   <a class="code" href="frame_8h.html#a3ca2c0bc7578bf3d337e34b2c08a6c5faeb4f7fd6d9e397d1141feb133746637a">NORMAL_FRAME</a>,
<a name="l03314"></a>03314   <a class="code" href="frame-unwind_8c.html#aa950afe60921514574c6150f0821f05c">default_frame_unwind_stop_reason</a>,
<a name="l03315"></a>03315   <a class="code" href="rs6000-tdep_8c.html#accbdc679ac72d5a16f77e254eb0e60d3">rs6000_frame_this_id</a>,
<a name="l03316"></a>03316   <a class="code" href="rs6000-tdep_8c.html#a0b1c70f9f10e25ef8dfe3435b088b680">rs6000_frame_prev_register</a>,
<a name="l03317"></a>03317   NULL,
<a name="l03318"></a>03318   <a class="code" href="frame-unwind_8c.html#ade64a9807fa508622581cc779b10ff9c">default_frame_sniffer</a>
<a name="l03319"></a>03319 };
<a name="l03320"></a>03320 
<a name="l03321"></a>03321 
<a name="l03322"></a>03322 <span class="keyword">static</span> <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l03323"></a><a class="code" href="rs6000-tdep_8c.html#ac48dc3b4dd713bc2b80539332dae540c">03323</a> <a class="code" href="rs6000-tdep_8c.html#ac48dc3b4dd713bc2b80539332dae540c">rs6000_frame_base_address</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame, <span class="keywordtype">void</span> **this_cache)
<a name="l03324"></a>03324 {
<a name="l03325"></a>03325   <span class="keyword">struct </span><a class="code" href="structrs6000__frame__cache.html">rs6000_frame_cache</a> *info = <a class="code" href="rs6000-tdep_8c.html#aa0ba181fb4c49c0d8df27267b7f018c1">rs6000_frame_cache</a> (this_frame,
<a name="l03326"></a>03326                                                         this_cache);
<a name="l03327"></a>03327   <span class="keywordflow">return</span> info-&gt;<a class="code" href="structrs6000__frame__cache.html#a500dcc449badb0fbe1e6301f26d994b3">initial_sp</a>;
<a name="l03328"></a>03328 }
<a name="l03329"></a>03329 
<a name="l03330"></a><a class="code" href="rs6000-tdep_8c.html#a919bc1d271c65d2707dc0b0be7b2ffc9">03330</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structframe__base.html">frame_base</a> <a class="code" href="rs6000-tdep_8c.html#a919bc1d271c65d2707dc0b0be7b2ffc9">rs6000_frame_base</a> = {
<a name="l03331"></a>03331   &amp;<a class="code" href="rs6000-tdep_8c.html#abd25d32e733011d03f580abea9725695">rs6000_frame_unwind</a>,
<a name="l03332"></a>03332   <a class="code" href="rs6000-tdep_8c.html#ac48dc3b4dd713bc2b80539332dae540c">rs6000_frame_base_address</a>,
<a name="l03333"></a>03333   <a class="code" href="rs6000-tdep_8c.html#ac48dc3b4dd713bc2b80539332dae540c">rs6000_frame_base_address</a>,
<a name="l03334"></a>03334   rs6000_frame_base_address
<a name="l03335"></a>03335 };
<a name="l03336"></a>03336 
<a name="l03337"></a>03337 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structframe__base.html">frame_base</a> *
<a name="l03338"></a><a class="code" href="rs6000-tdep_8c.html#acb48b8c82148ba94ad923b5ab8b4963c">03338</a> <a class="code" href="rs6000-tdep_8c.html#acb48b8c82148ba94ad923b5ab8b4963c">rs6000_frame_base_sniffer</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame)
<a name="l03339"></a>03339 {
<a name="l03340"></a>03340   <span class="keywordflow">return</span> &amp;<a class="code" href="rs6000-tdep_8c.html#a919bc1d271c65d2707dc0b0be7b2ffc9">rs6000_frame_base</a>;
<a name="l03341"></a>03341 }
<a name="l03342"></a>03342 
<a name="l03343"></a>03343 <span class="comment">/* DWARF-2 frame support.  Used to handle the detection of</span>
<a name="l03344"></a>03344 <span class="comment">  clobbered registers during function calls.  */</span>
<a name="l03345"></a>03345 
<a name="l03346"></a>03346 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l03347"></a><a class="code" href="rs6000-tdep_8c.html#abfed72834856de296e8a24229840458f">03347</a> <a class="code" href="rs6000-tdep_8c.html#abfed72834856de296e8a24229840458f">ppc_dwarf2_frame_init_reg</a> (<span class="keyword">struct</span> gdbarch *gdbarch, <span class="keywordtype">int</span> <a class="code" href="aarch64-tdep_8c.html#a6b3d1ad0bca4067ccaef1366bea0db04">regnum</a>,
<a name="l03348"></a>03348                             <span class="keyword">struct</span> <a class="code" href="structdwarf2__frame__state__reg.html">dwarf2_frame_state_reg</a> *<a class="code" href="structreg.html">reg</a>,
<a name="l03349"></a>03349                             <span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *this_frame)
<a name="l03350"></a>03350 {
<a name="l03351"></a>03351   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l03352"></a>03352 
<a name="l03353"></a>03353   <span class="comment">/* PPC32 and PPC64 ABI&#39;s are the same regarding volatile and</span>
<a name="l03354"></a>03354 <span class="comment">     non-volatile registers.  We will use the same code for both.  */</span>
<a name="l03355"></a>03355 
<a name="l03356"></a>03356   <span class="comment">/* Call-saved GP registers.  */</span>
<a name="l03357"></a>03357   <span class="keywordflow">if</span> ((regnum &gt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a764a18b9d437c88d6ad174febf29aeeb">ppc_gp0_regnum</a> + 14
<a name="l03358"></a>03358       &amp;&amp; regnum &lt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a764a18b9d437c88d6ad174febf29aeeb">ppc_gp0_regnum</a> + 31)
<a name="l03359"></a>03359       || (regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a764a18b9d437c88d6ad174febf29aeeb">ppc_gp0_regnum</a> + 1))
<a name="l03360"></a>03360     reg-&gt;<a class="code" href="structdwarf2__frame__state__reg.html#a7e41a3dc58552db7d15a52d1c8d896e6">how</a> = <a class="code" href="dwarf2-frame_8h.html#af4ee6f839eb1316c9d6b1d4ef2b171c9ac4036b95d8f2db6a6d51f184517d8921">DWARF2_FRAME_REG_SAME_VALUE</a>;
<a name="l03361"></a>03361 
<a name="l03362"></a>03362   <span class="comment">/* Call-clobbered GP registers.  */</span>
<a name="l03363"></a>03363   <span class="keywordflow">if</span> ((regnum &gt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a764a18b9d437c88d6ad174febf29aeeb">ppc_gp0_regnum</a> + 3
<a name="l03364"></a>03364       &amp;&amp; regnum &lt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a764a18b9d437c88d6ad174febf29aeeb">ppc_gp0_regnum</a> + 12)
<a name="l03365"></a>03365       || (regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a764a18b9d437c88d6ad174febf29aeeb">ppc_gp0_regnum</a>))
<a name="l03366"></a>03366     reg-&gt;<a class="code" href="structdwarf2__frame__state__reg.html#a7e41a3dc58552db7d15a52d1c8d896e6">how</a> = <a class="code" href="dwarf2-frame_8h.html#af4ee6f839eb1316c9d6b1d4ef2b171c9ae453ac257eeb298001c4929f4762c2b2">DWARF2_FRAME_REG_UNDEFINED</a>;
<a name="l03367"></a>03367 
<a name="l03368"></a>03368   <span class="comment">/* Deal with FP registers, if supported.  */</span>
<a name="l03369"></a>03369   <span class="keywordflow">if</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> &gt;= 0)
<a name="l03370"></a>03370     {
<a name="l03371"></a>03371       <span class="comment">/* Call-saved FP registers.  */</span>
<a name="l03372"></a>03372       <span class="keywordflow">if</span> ((regnum &gt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> + 14
<a name="l03373"></a>03373           &amp;&amp; regnum &lt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> + 31))
<a name="l03374"></a>03374         reg-&gt;<a class="code" href="structdwarf2__frame__state__reg.html#a7e41a3dc58552db7d15a52d1c8d896e6">how</a> = <a class="code" href="dwarf2-frame_8h.html#af4ee6f839eb1316c9d6b1d4ef2b171c9ac4036b95d8f2db6a6d51f184517d8921">DWARF2_FRAME_REG_SAME_VALUE</a>;
<a name="l03375"></a>03375 
<a name="l03376"></a>03376       <span class="comment">/* Call-clobbered FP registers.  */</span>
<a name="l03377"></a>03377       <span class="keywordflow">if</span> ((regnum &gt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a>
<a name="l03378"></a>03378           &amp;&amp; regnum &lt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> + 13))
<a name="l03379"></a>03379         reg-&gt;<a class="code" href="structdwarf2__frame__state__reg.html#a7e41a3dc58552db7d15a52d1c8d896e6">how</a> = <a class="code" href="dwarf2-frame_8h.html#af4ee6f839eb1316c9d6b1d4ef2b171c9ae453ac257eeb298001c4929f4762c2b2">DWARF2_FRAME_REG_UNDEFINED</a>;
<a name="l03380"></a>03380     }
<a name="l03381"></a>03381 
<a name="l03382"></a>03382   <span class="comment">/* Deal with ALTIVEC registers, if supported.  */</span>
<a name="l03383"></a>03383   <span class="keywordflow">if</span> (tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a> &gt; 0 &amp;&amp; tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae450527d83da498c547b5381594264b3">ppc_vrsave_regnum</a> &gt; 0)
<a name="l03384"></a>03384     {
<a name="l03385"></a>03385       <span class="comment">/* Call-saved Altivec registers.  */</span>
<a name="l03386"></a>03386       <span class="keywordflow">if</span> ((regnum &gt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a> + 20
<a name="l03387"></a>03387           &amp;&amp; regnum &lt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a> + 31)
<a name="l03388"></a>03388           || regnum == tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae450527d83da498c547b5381594264b3">ppc_vrsave_regnum</a>)
<a name="l03389"></a>03389         reg-&gt;<a class="code" href="structdwarf2__frame__state__reg.html#a7e41a3dc58552db7d15a52d1c8d896e6">how</a> = <a class="code" href="dwarf2-frame_8h.html#af4ee6f839eb1316c9d6b1d4ef2b171c9ac4036b95d8f2db6a6d51f184517d8921">DWARF2_FRAME_REG_SAME_VALUE</a>;
<a name="l03390"></a>03390 
<a name="l03391"></a>03391       <span class="comment">/* Call-clobbered Altivec registers.  */</span>
<a name="l03392"></a>03392       <span class="keywordflow">if</span> ((regnum &gt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a>
<a name="l03393"></a>03393           &amp;&amp; regnum &lt;= tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a> + 19))
<a name="l03394"></a>03394         reg-&gt;<a class="code" href="structdwarf2__frame__state__reg.html#a7e41a3dc58552db7d15a52d1c8d896e6">how</a> = <a class="code" href="dwarf2-frame_8h.html#af4ee6f839eb1316c9d6b1d4ef2b171c9ae453ac257eeb298001c4929f4762c2b2">DWARF2_FRAME_REG_UNDEFINED</a>;
<a name="l03395"></a>03395     }
<a name="l03396"></a>03396 
<a name="l03397"></a>03397   <span class="comment">/* Handle PC register and Stack Pointer correctly.  */</span>
<a name="l03398"></a>03398   <span class="keywordflow">if</span> (regnum == <a class="code" href="gdbarch_8c.html#a07a162ebafea1269eb8f341db44e53e7">gdbarch_pc_regnum</a> (gdbarch))
<a name="l03399"></a>03399     reg-&gt;<a class="code" href="structdwarf2__frame__state__reg.html#a7e41a3dc58552db7d15a52d1c8d896e6">how</a> = <a class="code" href="dwarf2-frame_8h.html#af4ee6f839eb1316c9d6b1d4ef2b171c9a1b032cd6ccb1f0d62eaf38995d6f828a">DWARF2_FRAME_REG_RA</a>;
<a name="l03400"></a>03400   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (regnum == <a class="code" href="gdbarch_8c.html#a86f6193dd957c193df77477d9d84c4f3">gdbarch_sp_regnum</a> (gdbarch))
<a name="l03401"></a>03401     reg-&gt;<a class="code" href="structdwarf2__frame__state__reg.html#a7e41a3dc58552db7d15a52d1c8d896e6">how</a> = <a class="code" href="dwarf2-frame_8h.html#af4ee6f839eb1316c9d6b1d4ef2b171c9aec7e1b9b75d0f5231ae82868d659c2fa">DWARF2_FRAME_REG_CFA</a>;
<a name="l03402"></a>03402 }
<a name="l03403"></a>03403 
<a name="l03404"></a>03404 
<a name="l03405"></a>03405 <span class="comment">/* Return true if a .gnu_attributes section exists in BFD and it</span>
<a name="l03406"></a>03406 <span class="comment">   indicates we are using SPE extensions OR if a .PPC.EMB.apuinfo</span>
<a name="l03407"></a>03407 <span class="comment">   section exists in BFD and it indicates that SPE extensions are in</span>
<a name="l03408"></a>03408 <span class="comment">   use.  Check the .gnu.attributes section first, as the binary might be</span>
<a name="l03409"></a>03409 <span class="comment">   compiled for SPE, but not actually using SPE instructions.  */</span>
<a name="l03410"></a>03410 
<a name="l03411"></a>03411 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l03412"></a><a class="code" href="rs6000-tdep_8c.html#a2bc34e2f590fd197cca2d05e6deabf7b">03412</a> <a class="code" href="rs6000-tdep_8c.html#a2bc34e2f590fd197cca2d05e6deabf7b">bfd_uses_spe_extensions</a> (bfd *abfd)
<a name="l03413"></a>03413 {
<a name="l03414"></a>03414   asection *sect;
<a name="l03415"></a>03415   <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *contents = NULL;
<a name="l03416"></a>03416   bfd_size_type <a class="code" href="go32-nat_8c.html#a854352f53b148adc24983a58a1866d66">size</a>;
<a name="l03417"></a>03417   <a class="code" href="defs_8h.html#a336b399b3b83dbcc61f176c33f26b607">gdb_byte</a> *ptr;
<a name="l03418"></a>03418   <span class="keywordtype">int</span> success = 0;
<a name="l03419"></a>03419   <span class="keywordtype">int</span> <a class="code" href="structgdbarch__tdep.html#aef58177d1045764ca49420b5456deb79">vector_abi</a>;
<a name="l03420"></a>03420 
<a name="l03421"></a>03421   <span class="keywordflow">if</span> (!abfd)
<a name="l03422"></a>03422     <span class="keywordflow">return</span> 0;
<a name="l03423"></a>03423 
<a name="l03424"></a>03424 <span class="preprocessor">#ifdef HAVE_ELF</span>
<a name="l03425"></a>03425 <span class="preprocessor"></span>  <span class="comment">/* Using Tag_GNU_Power_ABI_Vector here is a bit of a hack, as the user</span>
<a name="l03426"></a>03426 <span class="comment">     could be using the SPE vector abi without actually using any spe</span>
<a name="l03427"></a>03427 <span class="comment">     bits whatsoever.  But it&#39;s close enough for now.  */</span>
<a name="l03428"></a>03428   vector_abi = bfd_elf_get_obj_attr_int (abfd, OBJ_ATTR_GNU,
<a name="l03429"></a>03429                                          Tag_GNU_Power_ABI_Vector);
<a name="l03430"></a>03430   <span class="keywordflow">if</span> (vector_abi == 3)
<a name="l03431"></a>03431     <span class="keywordflow">return</span> 1;
<a name="l03432"></a>03432 <span class="preprocessor">#endif</span>
<a name="l03433"></a>03433 <span class="preprocessor"></span>
<a name="l03434"></a>03434   sect = bfd_get_section_by_name (abfd, <span class="stringliteral">&quot;.PPC.EMB.apuinfo&quot;</span>);
<a name="l03435"></a>03435   <span class="keywordflow">if</span> (!sect)
<a name="l03436"></a>03436     <span class="keywordflow">return</span> 0;
<a name="l03437"></a>03437 
<a name="l03438"></a>03438   size = bfd_get_section_size (sect);
<a name="l03439"></a>03439   contents = <a class="code" href="common-utils_8c.html#a634d6cd850bb831afebc499579303b3b">xmalloc</a> (size);
<a name="l03440"></a>03440   <span class="keywordflow">if</span> (!bfd_get_section_contents (abfd, sect, contents, 0, size))
<a name="l03441"></a>03441     {
<a name="l03442"></a>03442       <a class="code" href="common-utils_8c.html#a976e14808b9247ec952c262553f09f8f">xfree</a> (contents);
<a name="l03443"></a>03443       <span class="keywordflow">return</span> 0;
<a name="l03444"></a>03444     }
<a name="l03445"></a>03445 
<a name="l03446"></a>03446   <span class="comment">/* Parse the .PPC.EMB.apuinfo section.  The layout is as follows:</span>
<a name="l03447"></a>03447 <span class="comment"></span>
<a name="l03448"></a>03448 <span class="comment">     struct {</span>
<a name="l03449"></a>03449 <span class="comment">       uint32 name_len;</span>
<a name="l03450"></a>03450 <span class="comment">       uint32 data_len;</span>
<a name="l03451"></a>03451 <span class="comment">       uint32 type;</span>
<a name="l03452"></a>03452 <span class="comment">       char name[name_len rounded up to 4-byte alignment];</span>
<a name="l03453"></a>03453 <span class="comment">       char data[data_len];</span>
<a name="l03454"></a>03454 <span class="comment">     };</span>
<a name="l03455"></a>03455 <span class="comment"></span>
<a name="l03456"></a>03456 <span class="comment">     Technically, there&#39;s only supposed to be one such structure in a</span>
<a name="l03457"></a>03457 <span class="comment">     given apuinfo section, but the linker is not always vigilant about</span>
<a name="l03458"></a>03458 <span class="comment">     merging apuinfo sections from input files.  Just go ahead and parse</span>
<a name="l03459"></a>03459 <span class="comment">     them all, exiting early when we discover the binary uses SPE</span>
<a name="l03460"></a>03460 <span class="comment">     insns.</span>
<a name="l03461"></a>03461 <span class="comment"></span>
<a name="l03462"></a>03462 <span class="comment">     It&#39;s not specified in what endianness the information in this</span>
<a name="l03463"></a>03463 <span class="comment">     section is stored.  Assume that it&#39;s the endianness of the BFD.  */</span>
<a name="l03464"></a>03464   ptr = contents;
<a name="l03465"></a>03465   <span class="keywordflow">while</span> (1)
<a name="l03466"></a>03466     {
<a name="l03467"></a>03467       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> name_len;
<a name="l03468"></a>03468       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> data_len;
<a name="l03469"></a>03469       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="language_8c.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>;
<a name="l03470"></a>03470 
<a name="l03471"></a>03471       <span class="comment">/* If we can&#39;t read the first three fields, we&#39;re done.  */</span>
<a name="l03472"></a>03472       <span class="keywordflow">if</span> (size &lt; 12)
<a name="l03473"></a>03473         <span class="keywordflow">break</span>;
<a name="l03474"></a>03474 
<a name="l03475"></a>03475       name_len = bfd_get_32 (abfd, ptr);
<a name="l03476"></a>03476       name_len = (name_len + 3) &amp; ~3U; <span class="comment">/* Round to 4 bytes.  */</span>
<a name="l03477"></a>03477       data_len = bfd_get_32 (abfd, ptr + 4);
<a name="l03478"></a>03478       type = bfd_get_32 (abfd, ptr + 8);
<a name="l03479"></a>03479       ptr += 12;
<a name="l03480"></a>03480 
<a name="l03481"></a>03481       <span class="comment">/* The name must be &quot;APUinfo\0&quot;.  */</span>
<a name="l03482"></a>03482       <span class="keywordflow">if</span> (name_len != 8
<a name="l03483"></a>03483           &amp;&amp; strcmp ((<span class="keyword">const</span> <span class="keywordtype">char</span> *) ptr, <span class="stringliteral">&quot;APUinfo&quot;</span>) != 0)
<a name="l03484"></a>03484         <span class="keywordflow">break</span>;
<a name="l03485"></a>03485       ptr += name_len;
<a name="l03486"></a>03486 
<a name="l03487"></a>03487       <span class="comment">/* The type must be 2.  */</span>
<a name="l03488"></a>03488       <span class="keywordflow">if</span> (type != 2)
<a name="l03489"></a>03489         <span class="keywordflow">break</span>;
<a name="l03490"></a>03490 
<a name="l03491"></a>03491       <span class="comment">/* The data is stored as a series of uint32.  The upper half of</span>
<a name="l03492"></a>03492 <span class="comment">         each uint32 indicates the particular APU used and the lower</span>
<a name="l03493"></a>03493 <span class="comment">         half indicates the revision of that APU.  We just care about</span>
<a name="l03494"></a>03494 <span class="comment">         the upper half.  */</span>
<a name="l03495"></a>03495 
<a name="l03496"></a>03496       <span class="comment">/* Not 4-byte quantities.  */</span>
<a name="l03497"></a>03497       <span class="keywordflow">if</span> (data_len &amp; 3U)
<a name="l03498"></a>03498         <span class="keywordflow">break</span>;
<a name="l03499"></a>03499 
<a name="l03500"></a>03500       <span class="keywordflow">while</span> (data_len)
<a name="l03501"></a>03501         {
<a name="l03502"></a>03502           <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> apuinfo = bfd_get_32 (abfd, ptr);
<a name="l03503"></a>03503           <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> apu = apuinfo &gt;&gt; 16;
<a name="l03504"></a>03504           ptr += 4;
<a name="l03505"></a>03505           data_len -= 4;
<a name="l03506"></a>03506 
<a name="l03507"></a>03507           <span class="comment">/* The SPE APU is 0x100; the SPEFP APU is 0x101.  Accept</span>
<a name="l03508"></a>03508 <span class="comment">             either.  */</span>
<a name="l03509"></a>03509           <span class="keywordflow">if</span> (apu == 0x100 || apu == 0x101)
<a name="l03510"></a>03510             {
<a name="l03511"></a>03511               success = 1;
<a name="l03512"></a>03512               data_len = 0;
<a name="l03513"></a>03513             }
<a name="l03514"></a>03514         }
<a name="l03515"></a>03515 
<a name="l03516"></a>03516       <span class="keywordflow">if</span> (success)
<a name="l03517"></a>03517         <span class="keywordflow">break</span>;
<a name="l03518"></a>03518     }
<a name="l03519"></a>03519 
<a name="l03520"></a>03520   <a class="code" href="common-utils_8c.html#a976e14808b9247ec952c262553f09f8f">xfree</a> (contents);
<a name="l03521"></a>03521   <span class="keywordflow">return</span> success;
<a name="l03522"></a>03522 }
<a name="l03523"></a>03523 
<a name="l03524"></a>03524 <span class="comment">/* Initialize the current architecture based on INFO.  If possible, re-use an</span>
<a name="l03525"></a>03525 <span class="comment">   architecture from ARCHES, which is a list of architectures already created</span>
<a name="l03526"></a>03526 <span class="comment">   during this debugging session.</span>
<a name="l03527"></a>03527 <span class="comment"></span>
<a name="l03528"></a>03528 <span class="comment">   Called e.g. at program startup, when reading a core file, and when reading</span>
<a name="l03529"></a>03529 <span class="comment">   a binary file.  */</span>
<a name="l03530"></a>03530 
<a name="l03531"></a>03531 <span class="keyword">static</span> <span class="keyword">struct </span>gdbarch *
<a name="l03532"></a><a class="code" href="rs6000-tdep_8c.html#a401524302eaa74e1cbd0d65d4096109c">03532</a> <a class="code" href="rs6000-tdep_8c.html#a401524302eaa74e1cbd0d65d4096109c">rs6000_gdbarch_init</a> (<span class="keyword">struct</span> <a class="code" href="structgdbarch__info.html">gdbarch_info</a> info, <span class="keyword">struct</span> <a class="code" href="structgdbarch__list.html">gdbarch_list</a> *arches)
<a name="l03533"></a>03533 {
<a name="l03534"></a>03534   <span class="keyword">struct </span>gdbarch *gdbarch;
<a name="l03535"></a>03535   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep;
<a name="l03536"></a>03536   <span class="keywordtype">int</span> <a class="code" href="structgdbarch__tdep.html#a820e9cc5ea69af966e2764ae201720cd">wordsize</a>, from_xcoff_exec, from_elf_exec;
<a name="l03537"></a>03537   <span class="keyword">enum</span> bfd_architecture arch;
<a name="l03538"></a>03538   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> mach;
<a name="l03539"></a>03539   bfd abfd;
<a name="l03540"></a>03540   <span class="keyword">enum</span> <a class="code" href="defs_8h.html#a7e28c5d9363062b4fd5eec5fed14448f">auto_boolean</a> soft_float_flag = <a class="code" href="rs6000-tdep_8c.html#a02e0e11c401a3de597d3f3461c598cfa">powerpc_soft_float_global</a>;
<a name="l03541"></a>03541   <span class="keywordtype">int</span> <a class="code" href="structgdbarch__tdep.html#af2ef7d1f2de87f8764f565b512e8319f">soft_float</a>;
<a name="l03542"></a>03542   <span class="keyword">enum</span> <a class="code" href="ppc-tdep_8h.html#ab82af50225ea2c3b84b8f8d412e31290">powerpc_vector_abi</a> <a class="code" href="structgdbarch__tdep.html#aef58177d1045764ca49420b5456deb79">vector_abi</a> = <a class="code" href="rs6000-tdep_8c.html#a73815c27332aa8eb305ed17e148d81b4">powerpc_vector_abi_global</a>;
<a name="l03543"></a>03543   <span class="keywordtype">int</span> have_fpu = 1, have_spe = 0, have_mq = 0, have_altivec = 0, have_dfp = 0,
<a name="l03544"></a>03544       have_vsx = 0;
<a name="l03545"></a>03545   <span class="keywordtype">int</span> tdesc_wordsize = -1;
<a name="l03546"></a>03546   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structtarget__desc.html">target_desc</a> *tdesc = info.<a class="code" href="structgdbarch__info.html#ac92a2218499c8147be64826e303d688e">target_desc</a>;
<a name="l03547"></a>03547   <span class="keyword">struct </span><a class="code" href="structtdesc__arch__data.html">tdesc_arch_data</a> *<a class="code" href="target-descriptions_8c.html#aaa20fcb5e0c18b68c23e48d158440bb8">tdesc_data</a> = NULL;
<a name="l03548"></a>03548   <span class="keywordtype">int</span> num_pseudoregs = 0;
<a name="l03549"></a>03549   <span class="keywordtype">int</span> cur_reg;
<a name="l03550"></a>03550 
<a name="l03551"></a>03551   <span class="comment">/* INFO may refer to a binary that is not of the PowerPC architecture,</span>
<a name="l03552"></a>03552 <span class="comment">     e.g. when debugging a stand-alone SPE executable on a Cell/B.E. system.</span>
<a name="l03553"></a>03553 <span class="comment">     In this case, we must not attempt to infer properties of the (PowerPC</span>
<a name="l03554"></a>03554 <span class="comment">     side) of the target system from properties of that executable.  Trust</span>
<a name="l03555"></a>03555 <span class="comment">     the target description instead.  */</span>
<a name="l03556"></a>03556   <span class="keywordflow">if</span> (info.<a class="code" href="structgdbarch__info.html#a3c4162054156176568f3b6aab88c2d58">abfd</a>
<a name="l03557"></a>03557       &amp;&amp; bfd_get_arch (info.<a class="code" href="structgdbarch__info.html#a3c4162054156176568f3b6aab88c2d58">abfd</a>) != bfd_arch_powerpc
<a name="l03558"></a>03558       &amp;&amp; bfd_get_arch (info.<a class="code" href="structgdbarch__info.html#a3c4162054156176568f3b6aab88c2d58">abfd</a>) != bfd_arch_rs6000)
<a name="l03559"></a>03559     info.<a class="code" href="structgdbarch__info.html#a3c4162054156176568f3b6aab88c2d58">abfd</a> = NULL;
<a name="l03560"></a>03560 
<a name="l03561"></a>03561   from_xcoff_exec = info.<a class="code" href="structgdbarch__info.html#a3c4162054156176568f3b6aab88c2d58">abfd</a> &amp;&amp; info.<a class="code" href="structgdbarch__info.html#a3c4162054156176568f3b6aab88c2d58">abfd</a>-&gt;format == bfd_object &amp;&amp;
<a name="l03562"></a>03562     bfd_get_flavour (info.<a class="code" href="structgdbarch__info.html#a3c4162054156176568f3b6aab88c2d58">abfd</a>) == bfd_target_xcoff_flavour;
<a name="l03563"></a>03563 
<a name="l03564"></a>03564   from_elf_exec = info.<a class="code" href="structgdbarch__info.html#a3c4162054156176568f3b6aab88c2d58">abfd</a> &amp;&amp; info.<a class="code" href="structgdbarch__info.html#a3c4162054156176568f3b6aab88c2d58">abfd</a>-&gt;format == bfd_object &amp;&amp;
<a name="l03565"></a>03565     bfd_get_flavour (info.<a class="code" href="structgdbarch__info.html#a3c4162054156176568f3b6aab88c2d58">abfd</a>) == bfd_target_elf_flavour;
<a name="l03566"></a>03566 
<a name="l03567"></a>03567   <span class="comment">/* Check word size.  If INFO is from a binary file, infer it from</span>
<a name="l03568"></a>03568 <span class="comment">     that, else choose a likely default.  */</span>
<a name="l03569"></a>03569   <span class="keywordflow">if</span> (from_xcoff_exec)
<a name="l03570"></a>03570     {
<a name="l03571"></a>03571       <span class="keywordflow">if</span> (bfd_xcoff_is_xcoff64 (info.<a class="code" href="structgdbarch__info.html#a3c4162054156176568f3b6aab88c2d58">abfd</a>))
<a name="l03572"></a>03572         wordsize = 8;
<a name="l03573"></a>03573       <span class="keywordflow">else</span>
<a name="l03574"></a>03574         wordsize = 4;
<a name="l03575"></a>03575     }
<a name="l03576"></a>03576   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (from_elf_exec)
<a name="l03577"></a>03577     {
<a name="l03578"></a>03578       <span class="keywordflow">if</span> (elf_elfheader (info.<a class="code" href="structgdbarch__info.html#a3c4162054156176568f3b6aab88c2d58">abfd</a>)-&gt;e_ident[EI_CLASS] == ELFCLASS64)
<a name="l03579"></a>03579         wordsize = 8;
<a name="l03580"></a>03580       <span class="keywordflow">else</span>
<a name="l03581"></a>03581         wordsize = 4;
<a name="l03582"></a>03582     }
<a name="l03583"></a>03583   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="target-descriptions_8c.html#a54a8994f193cc0a0cf6dbb6d771becf2">tdesc_has_registers</a> (tdesc))
<a name="l03584"></a>03584     wordsize = -1;
<a name="l03585"></a>03585   <span class="keywordflow">else</span>
<a name="l03586"></a>03586     {
<a name="l03587"></a>03587       <span class="keywordflow">if</span> (info.<a class="code" href="structgdbarch__info.html#ad42b7b45e0927c2482ba178db64b2fa7">bfd_arch_info</a> != NULL &amp;&amp; info.<a class="code" href="structgdbarch__info.html#ad42b7b45e0927c2482ba178db64b2fa7">bfd_arch_info</a>-&gt;bits_per_word != 0)
<a name="l03588"></a>03588         wordsize = info.<a class="code" href="structgdbarch__info.html#ad42b7b45e0927c2482ba178db64b2fa7">bfd_arch_info</a>-&gt;bits_per_word /
<a name="l03589"></a>03589           info.<a class="code" href="structgdbarch__info.html#ad42b7b45e0927c2482ba178db64b2fa7">bfd_arch_info</a>-&gt;bits_per_byte;
<a name="l03590"></a>03590       <span class="keywordflow">else</span>
<a name="l03591"></a>03591         wordsize = 4;
<a name="l03592"></a>03592     }
<a name="l03593"></a>03593 
<a name="l03594"></a>03594   <span class="comment">/* Get the architecture and machine from the BFD.  */</span>
<a name="l03595"></a>03595   arch = info.<a class="code" href="structgdbarch__info.html#ad42b7b45e0927c2482ba178db64b2fa7">bfd_arch_info</a>-&gt;arch;
<a name="l03596"></a>03596   mach = info.<a class="code" href="structgdbarch__info.html#ad42b7b45e0927c2482ba178db64b2fa7">bfd_arch_info</a>-&gt;mach;
<a name="l03597"></a>03597 
<a name="l03598"></a>03598   <span class="comment">/* For e500 executables, the apuinfo section is of help here.  Such</span>
<a name="l03599"></a>03599 <span class="comment">     section contains the identifier and revision number of each</span>
<a name="l03600"></a>03600 <span class="comment">     Application-specific Processing Unit that is present on the</span>
<a name="l03601"></a>03601 <span class="comment">     chip.  The content of the section is determined by the assembler</span>
<a name="l03602"></a>03602 <span class="comment">     which looks at each instruction and determines which unit (and</span>
<a name="l03603"></a>03603 <span class="comment">     which version of it) can execute it.  Grovel through the section</span>
<a name="l03604"></a>03604 <span class="comment">     looking for relevant e500 APUs.  */</span>
<a name="l03605"></a>03605 
<a name="l03606"></a>03606   <span class="keywordflow">if</span> (<a class="code" href="rs6000-tdep_8c.html#a2bc34e2f590fd197cca2d05e6deabf7b">bfd_uses_spe_extensions</a> (info.<a class="code" href="structgdbarch__info.html#a3c4162054156176568f3b6aab88c2d58">abfd</a>))
<a name="l03607"></a>03607     {
<a name="l03608"></a>03608       arch = info.<a class="code" href="structgdbarch__info.html#ad42b7b45e0927c2482ba178db64b2fa7">bfd_arch_info</a>-&gt;arch;
<a name="l03609"></a>03609       mach = bfd_mach_ppc_e500;
<a name="l03610"></a>03610       bfd_default_set_arch_mach (&amp;abfd, arch, mach);
<a name="l03611"></a>03611       info.<a class="code" href="structgdbarch__info.html#ad42b7b45e0927c2482ba178db64b2fa7">bfd_arch_info</a> = bfd_get_arch_info (&amp;abfd);
<a name="l03612"></a>03612     }
<a name="l03613"></a>03613 
<a name="l03614"></a>03614   <span class="comment">/* Find a default target description which describes our register</span>
<a name="l03615"></a>03615 <span class="comment">     layout, if we do not already have one.  */</span>
<a name="l03616"></a>03616   <span class="keywordflow">if</span> (! <a class="code" href="target-descriptions_8c.html#a54a8994f193cc0a0cf6dbb6d771becf2">tdesc_has_registers</a> (tdesc))
<a name="l03617"></a>03617     {
<a name="l03618"></a>03618       <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structvariant.html">variant</a> *v;
<a name="l03619"></a>03619 
<a name="l03620"></a>03620       <span class="comment">/* Choose variant.  */</span>
<a name="l03621"></a>03621       v = <a class="code" href="rs6000-tdep_8c.html#aaedf236e1a07f9c428e97efb3260c1db">find_variant_by_arch</a> (arch, mach);
<a name="l03622"></a>03622       <span class="keywordflow">if</span> (!v)
<a name="l03623"></a>03623         <span class="keywordflow">return</span> NULL;
<a name="l03624"></a>03624 
<a name="l03625"></a>03625       tdesc = *v-&gt;<a class="code" href="structvariant.html#a196a7d555963f3d555b82424e9ee74ee">tdesc</a>;
<a name="l03626"></a>03626     }
<a name="l03627"></a>03627 
<a name="l03628"></a>03628   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (<a class="code" href="target-descriptions_8c.html#a54a8994f193cc0a0cf6dbb6d771becf2">tdesc_has_registers</a> (tdesc));
<a name="l03629"></a>03629 
<a name="l03630"></a>03630   <span class="comment">/* Check any target description for validity.  */</span>
<a name="l03631"></a>03631   <span class="keywordflow">if</span> (<a class="code" href="target-descriptions_8c.html#a54a8994f193cc0a0cf6dbb6d771becf2">tdesc_has_registers</a> (tdesc))
<a name="l03632"></a>03632     {
<a name="l03633"></a>03633       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> gprs[] = {
<a name="l03634"></a>03634         <span class="stringliteral">&quot;r0&quot;</span>, <span class="stringliteral">&quot;r1&quot;</span>, <span class="stringliteral">&quot;r2&quot;</span>, <span class="stringliteral">&quot;r3&quot;</span>, <span class="stringliteral">&quot;r4&quot;</span>, <span class="stringliteral">&quot;r5&quot;</span>, <span class="stringliteral">&quot;r6&quot;</span>, <span class="stringliteral">&quot;r7&quot;</span>,
<a name="l03635"></a>03635         <span class="stringliteral">&quot;r8&quot;</span>, <span class="stringliteral">&quot;r9&quot;</span>, <span class="stringliteral">&quot;r10&quot;</span>, <span class="stringliteral">&quot;r11&quot;</span>, <span class="stringliteral">&quot;r12&quot;</span>, <span class="stringliteral">&quot;r13&quot;</span>, <span class="stringliteral">&quot;r14&quot;</span>, <span class="stringliteral">&quot;r15&quot;</span>,
<a name="l03636"></a>03636         <span class="stringliteral">&quot;r16&quot;</span>, <span class="stringliteral">&quot;r17&quot;</span>, <span class="stringliteral">&quot;r18&quot;</span>, <span class="stringliteral">&quot;r19&quot;</span>, <span class="stringliteral">&quot;r20&quot;</span>, <span class="stringliteral">&quot;r21&quot;</span>, <span class="stringliteral">&quot;r22&quot;</span>, <span class="stringliteral">&quot;r23&quot;</span>,
<a name="l03637"></a>03637         <span class="stringliteral">&quot;r24&quot;</span>, <span class="stringliteral">&quot;r25&quot;</span>, <span class="stringliteral">&quot;r26&quot;</span>, <span class="stringliteral">&quot;r27&quot;</span>, <span class="stringliteral">&quot;r28&quot;</span>, <span class="stringliteral">&quot;r29&quot;</span>, <span class="stringliteral">&quot;r30&quot;</span>, <span class="stringliteral">&quot;r31&quot;</span>
<a name="l03638"></a>03638       };
<a name="l03639"></a>03639       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> segment_regs[] = {
<a name="l03640"></a>03640         <span class="stringliteral">&quot;sr0&quot;</span>, <span class="stringliteral">&quot;sr1&quot;</span>, <span class="stringliteral">&quot;sr2&quot;</span>, <span class="stringliteral">&quot;sr3&quot;</span>, <span class="stringliteral">&quot;sr4&quot;</span>, <span class="stringliteral">&quot;sr5&quot;</span>, <span class="stringliteral">&quot;sr6&quot;</span>, <span class="stringliteral">&quot;sr7&quot;</span>,
<a name="l03641"></a>03641         <span class="stringliteral">&quot;sr8&quot;</span>, <span class="stringliteral">&quot;sr9&quot;</span>, <span class="stringliteral">&quot;sr10&quot;</span>, <span class="stringliteral">&quot;sr11&quot;</span>, <span class="stringliteral">&quot;sr12&quot;</span>, <span class="stringliteral">&quot;sr13&quot;</span>, <span class="stringliteral">&quot;sr14&quot;</span>, <span class="stringliteral">&quot;sr15&quot;</span>
<a name="l03642"></a>03642       };
<a name="l03643"></a>03643       <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structtdesc__feature.html">tdesc_feature</a> *feature;
<a name="l03644"></a>03644       <span class="keywordtype">int</span> i, valid_p;
<a name="l03645"></a>03645       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> msr_names[] = { <span class="stringliteral">&quot;msr&quot;</span>, <span class="stringliteral">&quot;ps&quot;</span> };
<a name="l03646"></a>03646       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> cr_names[] = { <span class="stringliteral">&quot;cr&quot;</span>, <span class="stringliteral">&quot;cnd&quot;</span> };
<a name="l03647"></a>03647       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> ctr_names[] = { <span class="stringliteral">&quot;ctr&quot;</span>, <span class="stringliteral">&quot;cnt&quot;</span> };
<a name="l03648"></a>03648 
<a name="l03649"></a>03649       feature = <a class="code" href="target-descriptions_8c.html#abc4d5a3eeb4bfc94bd14ac763516e938">tdesc_find_feature</a> (tdesc,
<a name="l03650"></a>03650                                     <span class="stringliteral">&quot;org.gnu.gdb.power.core&quot;</span>);
<a name="l03651"></a>03651       <span class="keywordflow">if</span> (feature == NULL)
<a name="l03652"></a>03652         <span class="keywordflow">return</span> NULL;
<a name="l03653"></a>03653 
<a name="l03654"></a>03654       tdesc_data = <a class="code" href="target-descriptions_8c.html#ae51f8476cf65c9be4b3ed6a83aff1671">tdesc_data_alloc</a> ();
<a name="l03655"></a>03655 
<a name="l03656"></a>03656       valid_p = 1;
<a name="l03657"></a>03657       <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba24b61ab9c068d3db8d90266aff6c008a">ppc_num_gprs</a>; i++)
<a name="l03658"></a>03658         valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data, i, gprs[i]);
<a name="l03659"></a>03659       valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data, <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca7be98fb17925ffd3a4cef9b32b2e4167">PPC_PC_REGNUM</a>,
<a name="l03660"></a>03660                                           <span class="stringliteral">&quot;pc&quot;</span>);
<a name="l03661"></a>03661       valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data, <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fcad316049b9eab28d0102be73be0ce5084">PPC_LR_REGNUM</a>,
<a name="l03662"></a>03662                                           <span class="stringliteral">&quot;lr&quot;</span>);
<a name="l03663"></a>03663       valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data, <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca0aae6cfce8198c8105201d80f0ef034c">PPC_XER_REGNUM</a>,
<a name="l03664"></a>03664                                           <span class="stringliteral">&quot;xer&quot;</span>);
<a name="l03665"></a>03665 
<a name="l03666"></a>03666       <span class="comment">/* Allow alternate names for these registers, to accomodate GDB&#39;s</span>
<a name="l03667"></a>03667 <span class="comment">         historic naming.  */</span>
<a name="l03668"></a>03668       valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a7f849089001126c4698f3aa8789621e8">tdesc_numbered_register_choices</a> (feature, tdesc_data,
<a name="l03669"></a>03669                                                   <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fcadc40e54bb665c5c890d813a9467e05db">PPC_MSR_REGNUM</a>, msr_names);
<a name="l03670"></a>03670       valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a7f849089001126c4698f3aa8789621e8">tdesc_numbered_register_choices</a> (feature, tdesc_data,
<a name="l03671"></a>03671                                                   <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca4b64b2573b2e884abfe3d7aae9731df8">PPC_CR_REGNUM</a>, cr_names);
<a name="l03672"></a>03672       valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a7f849089001126c4698f3aa8789621e8">tdesc_numbered_register_choices</a> (feature, tdesc_data,
<a name="l03673"></a>03673                                                   <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca1df9279980678072aba48e42d154e787">PPC_CTR_REGNUM</a>, ctr_names);
<a name="l03674"></a>03674 
<a name="l03675"></a>03675       <span class="keywordflow">if</span> (!valid_p)
<a name="l03676"></a>03676         {
<a name="l03677"></a>03677           <a class="code" href="target-descriptions_8c.html#a873586b621fb2a8ab911f5506cfd9bc7">tdesc_data_cleanup</a> (tdesc_data);
<a name="l03678"></a>03678           <span class="keywordflow">return</span> NULL;
<a name="l03679"></a>03679         }
<a name="l03680"></a>03680 
<a name="l03681"></a>03681       have_mq = <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data, <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca4db53a8c335e4ad1350d15dd9c0fa166">PPC_MQ_REGNUM</a>,
<a name="l03682"></a>03682                                          <span class="stringliteral">&quot;mq&quot;</span>);
<a name="l03683"></a>03683 
<a name="l03684"></a>03684       tdesc_wordsize = <a class="code" href="target-descriptions_8c.html#aea5f648420bdeb33d0af7fabb17a3d2b">tdesc_register_size</a> (feature, <span class="stringliteral">&quot;pc&quot;</span>) / 8;
<a name="l03685"></a>03685       <span class="keywordflow">if</span> (wordsize == -1)
<a name="l03686"></a>03686         wordsize = tdesc_wordsize;
<a name="l03687"></a>03687 
<a name="l03688"></a>03688       feature = <a class="code" href="target-descriptions_8c.html#abc4d5a3eeb4bfc94bd14ac763516e938">tdesc_find_feature</a> (tdesc,
<a name="l03689"></a>03689                                     <span class="stringliteral">&quot;org.gnu.gdb.power.fpu&quot;</span>);
<a name="l03690"></a>03690       <span class="keywordflow">if</span> (feature != NULL)
<a name="l03691"></a>03691         {
<a name="l03692"></a>03692           <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> fprs[] = {
<a name="l03693"></a>03693             <span class="stringliteral">&quot;f0&quot;</span>, <span class="stringliteral">&quot;f1&quot;</span>, <span class="stringliteral">&quot;f2&quot;</span>, <span class="stringliteral">&quot;f3&quot;</span>, <span class="stringliteral">&quot;f4&quot;</span>, <span class="stringliteral">&quot;f5&quot;</span>, <span class="stringliteral">&quot;f6&quot;</span>, <span class="stringliteral">&quot;f7&quot;</span>,
<a name="l03694"></a>03694             <span class="stringliteral">&quot;f8&quot;</span>, <span class="stringliteral">&quot;f9&quot;</span>, <span class="stringliteral">&quot;f10&quot;</span>, <span class="stringliteral">&quot;f11&quot;</span>, <span class="stringliteral">&quot;f12&quot;</span>, <span class="stringliteral">&quot;f13&quot;</span>, <span class="stringliteral">&quot;f14&quot;</span>, <span class="stringliteral">&quot;f15&quot;</span>,
<a name="l03695"></a>03695             <span class="stringliteral">&quot;f16&quot;</span>, <span class="stringliteral">&quot;f17&quot;</span>, <span class="stringliteral">&quot;f18&quot;</span>, <span class="stringliteral">&quot;f19&quot;</span>, <span class="stringliteral">&quot;f20&quot;</span>, <span class="stringliteral">&quot;f21&quot;</span>, <span class="stringliteral">&quot;f22&quot;</span>, <span class="stringliteral">&quot;f23&quot;</span>,
<a name="l03696"></a>03696             <span class="stringliteral">&quot;f24&quot;</span>, <span class="stringliteral">&quot;f25&quot;</span>, <span class="stringliteral">&quot;f26&quot;</span>, <span class="stringliteral">&quot;f27&quot;</span>, <span class="stringliteral">&quot;f28&quot;</span>, <span class="stringliteral">&quot;f29&quot;</span>, <span class="stringliteral">&quot;f30&quot;</span>, <span class="stringliteral">&quot;f31&quot;</span>
<a name="l03697"></a>03697           };
<a name="l03698"></a>03698           valid_p = 1;
<a name="l03699"></a>03699           <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba7cb3ec3816363e0df7014e2a613a6df8">ppc_num_fprs</a>; i++)
<a name="l03700"></a>03700             valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data,
<a name="l03701"></a>03701                                                 <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fcaeb2303d92a99dc19100d94ff61434453">PPC_F0_REGNUM</a> + i, fprs[i]);
<a name="l03702"></a>03702           valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data,
<a name="l03703"></a>03703                                               <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fcae5e832f45e0598d7df9aeacb3551f9b2">PPC_FPSCR_REGNUM</a>, <span class="stringliteral">&quot;fpscr&quot;</span>);
<a name="l03704"></a>03704 
<a name="l03705"></a>03705           <span class="keywordflow">if</span> (!valid_p)
<a name="l03706"></a>03706             {
<a name="l03707"></a>03707               <a class="code" href="target-descriptions_8c.html#a873586b621fb2a8ab911f5506cfd9bc7">tdesc_data_cleanup</a> (tdesc_data);
<a name="l03708"></a>03708               <span class="keywordflow">return</span> NULL;
<a name="l03709"></a>03709             }
<a name="l03710"></a>03710           have_fpu = 1;
<a name="l03711"></a>03711         }
<a name="l03712"></a>03712       <span class="keywordflow">else</span>
<a name="l03713"></a>03713         have_fpu = 0;
<a name="l03714"></a>03714 
<a name="l03715"></a>03715       <span class="comment">/* The DFP pseudo-registers will be available when there are floating</span>
<a name="l03716"></a>03716 <span class="comment">         point registers.  */</span>
<a name="l03717"></a>03717       have_dfp = have_fpu;
<a name="l03718"></a>03718 
<a name="l03719"></a>03719       feature = <a class="code" href="target-descriptions_8c.html#abc4d5a3eeb4bfc94bd14ac763516e938">tdesc_find_feature</a> (tdesc,
<a name="l03720"></a>03720                                     <span class="stringliteral">&quot;org.gnu.gdb.power.altivec&quot;</span>);
<a name="l03721"></a>03721       <span class="keywordflow">if</span> (feature != NULL)
<a name="l03722"></a>03722         {
<a name="l03723"></a>03723           <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> vector_regs[] = {
<a name="l03724"></a>03724             <span class="stringliteral">&quot;vr0&quot;</span>, <span class="stringliteral">&quot;vr1&quot;</span>, <span class="stringliteral">&quot;vr2&quot;</span>, <span class="stringliteral">&quot;vr3&quot;</span>, <span class="stringliteral">&quot;vr4&quot;</span>, <span class="stringliteral">&quot;vr5&quot;</span>, <span class="stringliteral">&quot;vr6&quot;</span>, <span class="stringliteral">&quot;vr7&quot;</span>,
<a name="l03725"></a>03725             <span class="stringliteral">&quot;vr8&quot;</span>, <span class="stringliteral">&quot;vr9&quot;</span>, <span class="stringliteral">&quot;vr10&quot;</span>, <span class="stringliteral">&quot;vr11&quot;</span>, <span class="stringliteral">&quot;vr12&quot;</span>, <span class="stringliteral">&quot;vr13&quot;</span>, <span class="stringliteral">&quot;vr14&quot;</span>, <span class="stringliteral">&quot;vr15&quot;</span>,
<a name="l03726"></a>03726             <span class="stringliteral">&quot;vr16&quot;</span>, <span class="stringliteral">&quot;vr17&quot;</span>, <span class="stringliteral">&quot;vr18&quot;</span>, <span class="stringliteral">&quot;vr19&quot;</span>, <span class="stringliteral">&quot;vr20&quot;</span>, <span class="stringliteral">&quot;vr21&quot;</span>, <span class="stringliteral">&quot;vr22&quot;</span>, <span class="stringliteral">&quot;vr23&quot;</span>,
<a name="l03727"></a>03727             <span class="stringliteral">&quot;vr24&quot;</span>, <span class="stringliteral">&quot;vr25&quot;</span>, <span class="stringliteral">&quot;vr26&quot;</span>, <span class="stringliteral">&quot;vr27&quot;</span>, <span class="stringliteral">&quot;vr28&quot;</span>, <span class="stringliteral">&quot;vr29&quot;</span>, <span class="stringliteral">&quot;vr30&quot;</span>, <span class="stringliteral">&quot;vr31&quot;</span>
<a name="l03728"></a>03728           };
<a name="l03729"></a>03729 
<a name="l03730"></a>03730           valid_p = 1;
<a name="l03731"></a>03731           <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba24b61ab9c068d3db8d90266aff6c008a">ppc_num_gprs</a>; i++)
<a name="l03732"></a>03732             valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data,
<a name="l03733"></a>03733                                                 <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca7663c91c9e24592f984854890ecba74e">PPC_VR0_REGNUM</a> + i,
<a name="l03734"></a>03734                                                 vector_regs[i]);
<a name="l03735"></a>03735           valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data,
<a name="l03736"></a>03736                                               <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fcadaf78ffb8c2b85616fcf0979199102ae">PPC_VSCR_REGNUM</a>, <span class="stringliteral">&quot;vscr&quot;</span>);
<a name="l03737"></a>03737           valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data,
<a name="l03738"></a>03738                                               <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca2d3480533561806c7a7741da39e3617b">PPC_VRSAVE_REGNUM</a>, <span class="stringliteral">&quot;vrsave&quot;</span>);
<a name="l03739"></a>03739 
<a name="l03740"></a>03740           <span class="keywordflow">if</span> (have_spe || !valid_p)
<a name="l03741"></a>03741             {
<a name="l03742"></a>03742               <a class="code" href="target-descriptions_8c.html#a873586b621fb2a8ab911f5506cfd9bc7">tdesc_data_cleanup</a> (tdesc_data);
<a name="l03743"></a>03743               <span class="keywordflow">return</span> NULL;
<a name="l03744"></a>03744             }
<a name="l03745"></a>03745           have_altivec = 1;
<a name="l03746"></a>03746         }
<a name="l03747"></a>03747       <span class="keywordflow">else</span>
<a name="l03748"></a>03748         have_altivec = 0;
<a name="l03749"></a>03749 
<a name="l03750"></a>03750       <span class="comment">/* Check for POWER7 VSX registers support.  */</span>
<a name="l03751"></a>03751       feature = <a class="code" href="target-descriptions_8c.html#abc4d5a3eeb4bfc94bd14ac763516e938">tdesc_find_feature</a> (tdesc,
<a name="l03752"></a>03752                                     <span class="stringliteral">&quot;org.gnu.gdb.power.vsx&quot;</span>);
<a name="l03753"></a>03753 
<a name="l03754"></a>03754       <span class="keywordflow">if</span> (feature != NULL)
<a name="l03755"></a>03755         {
<a name="l03756"></a>03756           <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> vsx_regs[] = {
<a name="l03757"></a>03757             <span class="stringliteral">&quot;vs0h&quot;</span>, <span class="stringliteral">&quot;vs1h&quot;</span>, <span class="stringliteral">&quot;vs2h&quot;</span>, <span class="stringliteral">&quot;vs3h&quot;</span>, <span class="stringliteral">&quot;vs4h&quot;</span>, <span class="stringliteral">&quot;vs5h&quot;</span>,
<a name="l03758"></a>03758             <span class="stringliteral">&quot;vs6h&quot;</span>, <span class="stringliteral">&quot;vs7h&quot;</span>, <span class="stringliteral">&quot;vs8h&quot;</span>, <span class="stringliteral">&quot;vs9h&quot;</span>, <span class="stringliteral">&quot;vs10h&quot;</span>, <span class="stringliteral">&quot;vs11h&quot;</span>,
<a name="l03759"></a>03759             <span class="stringliteral">&quot;vs12h&quot;</span>, <span class="stringliteral">&quot;vs13h&quot;</span>, <span class="stringliteral">&quot;vs14h&quot;</span>, <span class="stringliteral">&quot;vs15h&quot;</span>, <span class="stringliteral">&quot;vs16h&quot;</span>, <span class="stringliteral">&quot;vs17h&quot;</span>,
<a name="l03760"></a>03760             <span class="stringliteral">&quot;vs18h&quot;</span>, <span class="stringliteral">&quot;vs19h&quot;</span>, <span class="stringliteral">&quot;vs20h&quot;</span>, <span class="stringliteral">&quot;vs21h&quot;</span>, <span class="stringliteral">&quot;vs22h&quot;</span>, <span class="stringliteral">&quot;vs23h&quot;</span>,
<a name="l03761"></a>03761             <span class="stringliteral">&quot;vs24h&quot;</span>, <span class="stringliteral">&quot;vs25h&quot;</span>, <span class="stringliteral">&quot;vs26h&quot;</span>, <span class="stringliteral">&quot;vs27h&quot;</span>, <span class="stringliteral">&quot;vs28h&quot;</span>, <span class="stringliteral">&quot;vs29h&quot;</span>,
<a name="l03762"></a>03762             <span class="stringliteral">&quot;vs30h&quot;</span>, <span class="stringliteral">&quot;vs31h&quot;</span>
<a name="l03763"></a>03763           };
<a name="l03764"></a>03764 
<a name="l03765"></a>03765           valid_p = 1;
<a name="l03766"></a>03766 
<a name="l03767"></a>03767           <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba5ff2e6b15675fc167e286e31352d75bb">ppc_num_vshrs</a>; i++)
<a name="l03768"></a>03768             valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data,
<a name="l03769"></a>03769                                                 <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca2a7e508b6c8f3857f4bf71fa2b33fb96">PPC_VSR0_UPPER_REGNUM</a> + i,
<a name="l03770"></a>03770                                                 vsx_regs[i]);
<a name="l03771"></a>03771           <span class="keywordflow">if</span> (!valid_p)
<a name="l03772"></a>03772             {
<a name="l03773"></a>03773               <a class="code" href="target-descriptions_8c.html#a873586b621fb2a8ab911f5506cfd9bc7">tdesc_data_cleanup</a> (tdesc_data);
<a name="l03774"></a>03774               <span class="keywordflow">return</span> NULL;
<a name="l03775"></a>03775             }
<a name="l03776"></a>03776 
<a name="l03777"></a>03777           have_vsx = 1;
<a name="l03778"></a>03778         }
<a name="l03779"></a>03779       <span class="keywordflow">else</span>
<a name="l03780"></a>03780         have_vsx = 0;
<a name="l03781"></a>03781 
<a name="l03782"></a>03782       <span class="comment">/* On machines supporting the SPE APU, the general-purpose registers</span>
<a name="l03783"></a>03783 <span class="comment">         are 64 bits long.  There are SIMD vector instructions to treat them</span>
<a name="l03784"></a>03784 <span class="comment">         as pairs of floats, but the rest of the instruction set treats them</span>
<a name="l03785"></a>03785 <span class="comment">         as 32-bit registers, and only operates on their lower halves.</span>
<a name="l03786"></a>03786 <span class="comment"></span>
<a name="l03787"></a>03787 <span class="comment">         In the GDB regcache, we treat their high and low halves as separate</span>
<a name="l03788"></a>03788 <span class="comment">         registers.  The low halves we present as the general-purpose</span>
<a name="l03789"></a>03789 <span class="comment">         registers, and then we have pseudo-registers that stitch together</span>
<a name="l03790"></a>03790 <span class="comment">         the upper and lower halves and present them as pseudo-registers.</span>
<a name="l03791"></a>03791 <span class="comment"></span>
<a name="l03792"></a>03792 <span class="comment">         Thus, the target description is expected to supply the upper</span>
<a name="l03793"></a>03793 <span class="comment">         halves separately.  */</span>
<a name="l03794"></a>03794 
<a name="l03795"></a>03795       feature = <a class="code" href="target-descriptions_8c.html#abc4d5a3eeb4bfc94bd14ac763516e938">tdesc_find_feature</a> (tdesc,
<a name="l03796"></a>03796                                     <span class="stringliteral">&quot;org.gnu.gdb.power.spe&quot;</span>);
<a name="l03797"></a>03797       <span class="keywordflow">if</span> (feature != NULL)
<a name="l03798"></a>03798         {
<a name="l03799"></a>03799           <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> upper_spe[] = {
<a name="l03800"></a>03800             <span class="stringliteral">&quot;ev0h&quot;</span>, <span class="stringliteral">&quot;ev1h&quot;</span>, <span class="stringliteral">&quot;ev2h&quot;</span>, <span class="stringliteral">&quot;ev3h&quot;</span>,
<a name="l03801"></a>03801             <span class="stringliteral">&quot;ev4h&quot;</span>, <span class="stringliteral">&quot;ev5h&quot;</span>, <span class="stringliteral">&quot;ev6h&quot;</span>, <span class="stringliteral">&quot;ev7h&quot;</span>,
<a name="l03802"></a>03802             <span class="stringliteral">&quot;ev8h&quot;</span>, <span class="stringliteral">&quot;ev9h&quot;</span>, <span class="stringliteral">&quot;ev10h&quot;</span>, <span class="stringliteral">&quot;ev11h&quot;</span>,
<a name="l03803"></a>03803             <span class="stringliteral">&quot;ev12h&quot;</span>, <span class="stringliteral">&quot;ev13h&quot;</span>, <span class="stringliteral">&quot;ev14h&quot;</span>, <span class="stringliteral">&quot;ev15h&quot;</span>,
<a name="l03804"></a>03804             <span class="stringliteral">&quot;ev16h&quot;</span>, <span class="stringliteral">&quot;ev17h&quot;</span>, <span class="stringliteral">&quot;ev18h&quot;</span>, <span class="stringliteral">&quot;ev19h&quot;</span>,
<a name="l03805"></a>03805             <span class="stringliteral">&quot;ev20h&quot;</span>, <span class="stringliteral">&quot;ev21h&quot;</span>, <span class="stringliteral">&quot;ev22h&quot;</span>, <span class="stringliteral">&quot;ev23h&quot;</span>,
<a name="l03806"></a>03806             <span class="stringliteral">&quot;ev24h&quot;</span>, <span class="stringliteral">&quot;ev25h&quot;</span>, <span class="stringliteral">&quot;ev26h&quot;</span>, <span class="stringliteral">&quot;ev27h&quot;</span>,
<a name="l03807"></a>03807             <span class="stringliteral">&quot;ev28h&quot;</span>, <span class="stringliteral">&quot;ev29h&quot;</span>, <span class="stringliteral">&quot;ev30h&quot;</span>, <span class="stringliteral">&quot;ev31h&quot;</span>
<a name="l03808"></a>03808           };
<a name="l03809"></a>03809 
<a name="l03810"></a>03810           valid_p = 1;
<a name="l03811"></a>03811           <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="ppc-tdep_8h.html#a7ee8d0f117a79ca7eb1e0076a9182bcba24b61ab9c068d3db8d90266aff6c008a">ppc_num_gprs</a>; i++)
<a name="l03812"></a>03812             valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data,
<a name="l03813"></a>03813                                                 <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca7171d3be7a8753abeba4751e59c01653">PPC_SPE_UPPER_GP0_REGNUM</a> + i,
<a name="l03814"></a>03814                                                 upper_spe[i]);
<a name="l03815"></a>03815           valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data,
<a name="l03816"></a>03816                                               <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca62642136a3aaa7b42ce18c3cc2886d1a">PPC_SPE_ACC_REGNUM</a>, <span class="stringliteral">&quot;acc&quot;</span>);
<a name="l03817"></a>03817           valid_p &amp;= <a class="code" href="target-descriptions_8c.html#a32eadffa81e6bfdd019d344e218f0e65">tdesc_numbered_register</a> (feature, tdesc_data,
<a name="l03818"></a>03818                                               <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca7b968fdc1c2ee6948eada9be4688ac81">PPC_SPE_FSCR_REGNUM</a>, <span class="stringliteral">&quot;spefscr&quot;</span>);
<a name="l03819"></a>03819 
<a name="l03820"></a>03820           <span class="keywordflow">if</span> (have_mq || have_fpu || !valid_p)
<a name="l03821"></a>03821             {
<a name="l03822"></a>03822               <a class="code" href="target-descriptions_8c.html#a873586b621fb2a8ab911f5506cfd9bc7">tdesc_data_cleanup</a> (tdesc_data);
<a name="l03823"></a>03823               <span class="keywordflow">return</span> NULL;
<a name="l03824"></a>03824             }
<a name="l03825"></a>03825           have_spe = 1;
<a name="l03826"></a>03826         }
<a name="l03827"></a>03827       <span class="keywordflow">else</span>
<a name="l03828"></a>03828         have_spe = 0;
<a name="l03829"></a>03829     }
<a name="l03830"></a>03830 
<a name="l03831"></a>03831   <span class="comment">/* If we have a 64-bit binary on a 32-bit target, complain.  Also</span>
<a name="l03832"></a>03832 <span class="comment">     complain for a 32-bit binary on a 64-bit target; we do not yet</span>
<a name="l03833"></a>03833 <span class="comment">     support that.  For instance, the 32-bit ABI routines expect</span>
<a name="l03834"></a>03834 <span class="comment">     32-bit GPRs.</span>
<a name="l03835"></a>03835 <span class="comment"></span>
<a name="l03836"></a>03836 <span class="comment">     As long as there isn&#39;t an explicit target description, we&#39;ll</span>
<a name="l03837"></a>03837 <span class="comment">     choose one based on the BFD architecture and get a word size</span>
<a name="l03838"></a>03838 <span class="comment">     matching the binary (probably powerpc:common or</span>
<a name="l03839"></a>03839 <span class="comment">     powerpc:common64).  So there is only trouble if a 64-bit target</span>
<a name="l03840"></a>03840 <span class="comment">     supplies a 64-bit description while debugging a 32-bit</span>
<a name="l03841"></a>03841 <span class="comment">     binary.  */</span>
<a name="l03842"></a>03842   <span class="keywordflow">if</span> (tdesc_wordsize != -1 &amp;&amp; tdesc_wordsize != wordsize)
<a name="l03843"></a>03843     {
<a name="l03844"></a>03844       <a class="code" href="target-descriptions_8c.html#a873586b621fb2a8ab911f5506cfd9bc7">tdesc_data_cleanup</a> (tdesc_data);
<a name="l03845"></a>03845       <span class="keywordflow">return</span> NULL;
<a name="l03846"></a>03846     }
<a name="l03847"></a>03847 
<a name="l03848"></a>03848 <span class="preprocessor">#ifdef HAVE_ELF</span>
<a name="l03849"></a>03849 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (soft_float_flag == <a class="code" href="defs_8h.html#a7e28c5d9363062b4fd5eec5fed14448fa48f3bffd79907d65a7ee3aee7aabc163">AUTO_BOOLEAN_AUTO</a> &amp;&amp; from_elf_exec)
<a name="l03850"></a>03850     {
<a name="l03851"></a>03851       <span class="keywordflow">switch</span> (bfd_elf_get_obj_attr_int (info.<a class="code" href="structgdbarch__info.html#a3c4162054156176568f3b6aab88c2d58">abfd</a>, OBJ_ATTR_GNU,
<a name="l03852"></a>03852                                         Tag_GNU_Power_ABI_FP))
<a name="l03853"></a>03853         {
<a name="l03854"></a>03854         <span class="keywordflow">case</span> 1:
<a name="l03855"></a>03855           soft_float_flag = <a class="code" href="defs_8h.html#a7e28c5d9363062b4fd5eec5fed14448fad5edac705ebbe17f475a693d6b00141c">AUTO_BOOLEAN_FALSE</a>;
<a name="l03856"></a>03856           <span class="keywordflow">break</span>;
<a name="l03857"></a>03857         <span class="keywordflow">case</span> 2:
<a name="l03858"></a>03858           soft_float_flag = <a class="code" href="defs_8h.html#a7e28c5d9363062b4fd5eec5fed14448fa167e41bbf39564ded650f13ba73c3e22">AUTO_BOOLEAN_TRUE</a>;
<a name="l03859"></a>03859           <span class="keywordflow">break</span>;
<a name="l03860"></a>03860         <span class="keywordflow">default</span>:
<a name="l03861"></a>03861           <span class="keywordflow">break</span>;
<a name="l03862"></a>03862         }
<a name="l03863"></a>03863     }
<a name="l03864"></a>03864 
<a name="l03865"></a>03865   <span class="keywordflow">if</span> (vector_abi == <a class="code" href="ppc-tdep_8h.html#ab82af50225ea2c3b84b8f8d412e31290a2676cd0aed103f62bd70876298346266">POWERPC_VEC_AUTO</a> &amp;&amp; from_elf_exec)
<a name="l03866"></a>03866     {
<a name="l03867"></a>03867       <span class="keywordflow">switch</span> (bfd_elf_get_obj_attr_int (info.<a class="code" href="structgdbarch__info.html#a3c4162054156176568f3b6aab88c2d58">abfd</a>, OBJ_ATTR_GNU,
<a name="l03868"></a>03868                                         Tag_GNU_Power_ABI_Vector))
<a name="l03869"></a>03869         {
<a name="l03870"></a>03870         <span class="keywordflow">case</span> 1:
<a name="l03871"></a>03871           vector_abi = <a class="code" href="ppc-tdep_8h.html#ab82af50225ea2c3b84b8f8d412e31290a8ca3d1b972d4c2e236bfce8339310d26">POWERPC_VEC_GENERIC</a>;
<a name="l03872"></a>03872           <span class="keywordflow">break</span>;
<a name="l03873"></a>03873         <span class="keywordflow">case</span> 2:
<a name="l03874"></a>03874           vector_abi = <a class="code" href="ppc-tdep_8h.html#ab82af50225ea2c3b84b8f8d412e31290ac96a30a5eaa5a94d6c66a59881185525">POWERPC_VEC_ALTIVEC</a>;
<a name="l03875"></a>03875           <span class="keywordflow">break</span>;
<a name="l03876"></a>03876         <span class="keywordflow">case</span> 3:
<a name="l03877"></a>03877           vector_abi = <a class="code" href="ppc-tdep_8h.html#ab82af50225ea2c3b84b8f8d412e31290a76d4682f4b4821a16f1df5c506447ad9">POWERPC_VEC_SPE</a>;
<a name="l03878"></a>03878           <span class="keywordflow">break</span>;
<a name="l03879"></a>03879         <span class="keywordflow">default</span>:
<a name="l03880"></a>03880           <span class="keywordflow">break</span>;
<a name="l03881"></a>03881         }
<a name="l03882"></a>03882     }
<a name="l03883"></a>03883 <span class="preprocessor">#endif</span>
<a name="l03884"></a>03884 <span class="preprocessor"></span>
<a name="l03885"></a>03885   <span class="keywordflow">if</span> (soft_float_flag == <a class="code" href="defs_8h.html#a7e28c5d9363062b4fd5eec5fed14448fa167e41bbf39564ded650f13ba73c3e22">AUTO_BOOLEAN_TRUE</a>)
<a name="l03886"></a>03886     soft_float = 1;
<a name="l03887"></a>03887   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (soft_float_flag == <a class="code" href="defs_8h.html#a7e28c5d9363062b4fd5eec5fed14448fad5edac705ebbe17f475a693d6b00141c">AUTO_BOOLEAN_FALSE</a>)
<a name="l03888"></a>03888     soft_float = 0;
<a name="l03889"></a>03889   <span class="keywordflow">else</span>
<a name="l03890"></a>03890     soft_float = !have_fpu;
<a name="l03891"></a>03891 
<a name="l03892"></a>03892   <span class="comment">/* If we have a hard float binary or setting but no floating point</span>
<a name="l03893"></a>03893 <span class="comment">     registers, downgrade to soft float anyway.  We&#39;re still somewhat</span>
<a name="l03894"></a>03894 <span class="comment">     useful in this scenario.  */</span>
<a name="l03895"></a>03895   <span class="keywordflow">if</span> (!soft_float &amp;&amp; !have_fpu)
<a name="l03896"></a>03896     soft_float = 1;
<a name="l03897"></a>03897 
<a name="l03898"></a>03898   <span class="comment">/* Similarly for vector registers.  */</span>
<a name="l03899"></a>03899   <span class="keywordflow">if</span> (vector_abi == <a class="code" href="ppc-tdep_8h.html#ab82af50225ea2c3b84b8f8d412e31290ac96a30a5eaa5a94d6c66a59881185525">POWERPC_VEC_ALTIVEC</a> &amp;&amp; !have_altivec)
<a name="l03900"></a>03900     vector_abi = <a class="code" href="ppc-tdep_8h.html#ab82af50225ea2c3b84b8f8d412e31290a8ca3d1b972d4c2e236bfce8339310d26">POWERPC_VEC_GENERIC</a>;
<a name="l03901"></a>03901 
<a name="l03902"></a>03902   <span class="keywordflow">if</span> (vector_abi == <a class="code" href="ppc-tdep_8h.html#ab82af50225ea2c3b84b8f8d412e31290a76d4682f4b4821a16f1df5c506447ad9">POWERPC_VEC_SPE</a> &amp;&amp; !have_spe)
<a name="l03903"></a>03903     vector_abi = <a class="code" href="ppc-tdep_8h.html#ab82af50225ea2c3b84b8f8d412e31290a8ca3d1b972d4c2e236bfce8339310d26">POWERPC_VEC_GENERIC</a>;
<a name="l03904"></a>03904 
<a name="l03905"></a>03905   <span class="keywordflow">if</span> (vector_abi == <a class="code" href="ppc-tdep_8h.html#ab82af50225ea2c3b84b8f8d412e31290a2676cd0aed103f62bd70876298346266">POWERPC_VEC_AUTO</a>)
<a name="l03906"></a>03906     {
<a name="l03907"></a>03907       <span class="keywordflow">if</span> (have_altivec)
<a name="l03908"></a>03908         vector_abi = <a class="code" href="ppc-tdep_8h.html#ab82af50225ea2c3b84b8f8d412e31290ac96a30a5eaa5a94d6c66a59881185525">POWERPC_VEC_ALTIVEC</a>;
<a name="l03909"></a>03909       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (have_spe)
<a name="l03910"></a>03910         vector_abi = <a class="code" href="ppc-tdep_8h.html#ab82af50225ea2c3b84b8f8d412e31290a76d4682f4b4821a16f1df5c506447ad9">POWERPC_VEC_SPE</a>;
<a name="l03911"></a>03911       <span class="keywordflow">else</span>
<a name="l03912"></a>03912         vector_abi = <a class="code" href="ppc-tdep_8h.html#ab82af50225ea2c3b84b8f8d412e31290a8ca3d1b972d4c2e236bfce8339310d26">POWERPC_VEC_GENERIC</a>;
<a name="l03913"></a>03913     }
<a name="l03914"></a>03914 
<a name="l03915"></a>03915   <span class="comment">/* Do not limit the vector ABI based on available hardware, since we</span>
<a name="l03916"></a>03916 <span class="comment">     do not yet know what hardware we&#39;ll decide we have.  Yuck!  FIXME!  */</span>
<a name="l03917"></a>03917 
<a name="l03918"></a>03918   <span class="comment">/* Find a candidate among extant architectures.  */</span>
<a name="l03919"></a>03919   <span class="keywordflow">for</span> (arches = <a class="code" href="gdbarch_8c.html#aa3ea1c25a21a533dfd0d924a7d9778e4">gdbarch_list_lookup_by_info</a> (arches, &amp;info);
<a name="l03920"></a>03920        arches != NULL;
<a name="l03921"></a>03921        arches = <a class="code" href="gdbarch_8c.html#aa3ea1c25a21a533dfd0d924a7d9778e4">gdbarch_list_lookup_by_info</a> (arches-&gt;<a class="code" href="structgdbarch__list.html#a9da6f84112797b67d5d8e7b8d4e26b14">next</a>, &amp;info))
<a name="l03922"></a>03922     {
<a name="l03923"></a>03923       <span class="comment">/* Word size in the various PowerPC bfd_arch_info structs isn&#39;t</span>
<a name="l03924"></a>03924 <span class="comment">         meaningful, because 64-bit CPUs can run in 32-bit mode.  So, perform</span>
<a name="l03925"></a>03925 <span class="comment">         separate word size check.  */</span>
<a name="l03926"></a>03926       tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (arches-&gt;<a class="code" href="structgdbarch__list.html#a6c51da8c4c95249704dfe18394fd08f9">gdbarch</a>);
<a name="l03927"></a>03927       <span class="keywordflow">if</span> (tdep &amp;&amp; tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af2ef7d1f2de87f8764f565b512e8319f">soft_float</a> != soft_float)
<a name="l03928"></a>03928         <span class="keywordflow">continue</span>;
<a name="l03929"></a>03929       <span class="keywordflow">if</span> (tdep &amp;&amp; tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aef58177d1045764ca49420b5456deb79">vector_abi</a> != vector_abi)
<a name="l03930"></a>03930         <span class="keywordflow">continue</span>;
<a name="l03931"></a>03931       <span class="keywordflow">if</span> (tdep &amp;&amp; tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a820e9cc5ea69af966e2764ae201720cd">wordsize</a> == wordsize)
<a name="l03932"></a>03932         {
<a name="l03933"></a>03933           <span class="keywordflow">if</span> (tdesc_data != NULL)
<a name="l03934"></a>03934             <a class="code" href="target-descriptions_8c.html#a873586b621fb2a8ab911f5506cfd9bc7">tdesc_data_cleanup</a> (tdesc_data);
<a name="l03935"></a>03935           <span class="keywordflow">return</span> arches-&gt;<a class="code" href="structgdbarch__list.html#a6c51da8c4c95249704dfe18394fd08f9">gdbarch</a>;
<a name="l03936"></a>03936         }
<a name="l03937"></a>03937     }
<a name="l03938"></a>03938 
<a name="l03939"></a>03939   <span class="comment">/* None found, create a new architecture from INFO, whose bfd_arch_info</span>
<a name="l03940"></a>03940 <span class="comment">     validity depends on the source:</span>
<a name="l03941"></a>03941 <span class="comment">       - executable             useless</span>
<a name="l03942"></a>03942 <span class="comment">       - rs6000_host_arch()     good</span>
<a name="l03943"></a>03943 <span class="comment">       - core file              good</span>
<a name="l03944"></a>03944 <span class="comment">       - &quot;set arch&quot;             trust blindly</span>
<a name="l03945"></a>03945 <span class="comment">       - GDB startup            useless but harmless */</span>
<a name="l03946"></a>03946 
<a name="l03947"></a>03947   tdep = <a class="code" href="defs_8h.html#a4c67016fda510e35550be38ad53c44d1">XCALLOC</a> (1, <span class="keyword">struct</span> <a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a>);
<a name="l03948"></a>03948   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a820e9cc5ea69af966e2764ae201720cd">wordsize</a> = wordsize;
<a name="l03949"></a>03949   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af2ef7d1f2de87f8764f565b512e8319f">soft_float</a> = soft_float;
<a name="l03950"></a>03950   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aef58177d1045764ca49420b5456deb79">vector_abi</a> = vector_abi;
<a name="l03951"></a>03951 
<a name="l03952"></a>03952   gdbarch = <a class="code" href="gdbarch_8c.html#a9e0b0979fa2cb7439f41f66deda8dec5">gdbarch_alloc</a> (&amp;info, tdep);
<a name="l03953"></a>03953 
<a name="l03954"></a>03954   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a764a18b9d437c88d6ad174febf29aeeb">ppc_gp0_regnum</a> = <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca72ad78cff2893acb3ca9557c5e65e633">PPC_R0_REGNUM</a>;
<a name="l03955"></a>03955   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a99987973acaf0719a8e6a20b89cb28a7">ppc_toc_regnum</a> = <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca72ad78cff2893acb3ca9557c5e65e633">PPC_R0_REGNUM</a> + 2;
<a name="l03956"></a>03956   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a3dd7eea3668b3816f9f362de516e1d4e">ppc_ps_regnum</a> = <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fcadc40e54bb665c5c890d813a9467e05db">PPC_MSR_REGNUM</a>;
<a name="l03957"></a>03957   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a472825ad1cf896dce405f82f2599ae9a">ppc_cr_regnum</a> = <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca4b64b2573b2e884abfe3d7aae9731df8">PPC_CR_REGNUM</a>;
<a name="l03958"></a>03958   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a5f8e280348ae374459d2b5e2980a188c">ppc_lr_regnum</a> = <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fcad316049b9eab28d0102be73be0ce5084">PPC_LR_REGNUM</a>;
<a name="l03959"></a>03959   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a4ea1d651e250d5879d6da1a28fd3be2f">ppc_ctr_regnum</a> = <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca1df9279980678072aba48e42d154e787">PPC_CTR_REGNUM</a>;
<a name="l03960"></a>03960   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a1f0de040d355a482dae4af4ce50aec32">ppc_xer_regnum</a> = <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca0aae6cfce8198c8105201d80f0ef034c">PPC_XER_REGNUM</a>;
<a name="l03961"></a>03961   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a9d179a84ff44e9a36e6ee64075760429">ppc_mq_regnum</a> = have_mq ? <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca4db53a8c335e4ad1350d15dd9c0fa166">PPC_MQ_REGNUM</a> : -1;
<a name="l03962"></a>03962 
<a name="l03963"></a>03963   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a> = have_fpu ? <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fcaeb2303d92a99dc19100d94ff61434453">PPC_F0_REGNUM</a> : -1;
<a name="l03964"></a>03964   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a0c28f5e30ad04a087b6886822810120a">ppc_fpscr_regnum</a> = have_fpu ? <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fcae5e832f45e0598d7df9aeacb3551f9b2">PPC_FPSCR_REGNUM</a> : -1;
<a name="l03965"></a>03965   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#af62bcda72ac9d044f7b1145d780de683">ppc_vsr0_upper_regnum</a> = have_vsx ? <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca2a7e508b6c8f3857f4bf71fa2b33fb96">PPC_VSR0_UPPER_REGNUM</a> : -1;
<a name="l03966"></a>03966   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ac1708f8f9c79faa9de33659f3c68a7cd">ppc_vr0_regnum</a> = have_altivec ? <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca7663c91c9e24592f984854890ecba74e">PPC_VR0_REGNUM</a> : -1;
<a name="l03967"></a>03967   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ae450527d83da498c547b5381594264b3">ppc_vrsave_regnum</a> = have_altivec ? <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca2d3480533561806c7a7741da39e3617b">PPC_VRSAVE_REGNUM</a> : -1;
<a name="l03968"></a>03968   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#aa7b3fc0d1b03e03f76278abd2611df43">ppc_ev0_upper_regnum</a> = have_spe ? <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca7171d3be7a8753abeba4751e59c01653">PPC_SPE_UPPER_GP0_REGNUM</a> : -1;
<a name="l03969"></a>03969   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a2db04ffe895dab1278787d41e5878fa4">ppc_acc_regnum</a> = have_spe ? <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca62642136a3aaa7b42ce18c3cc2886d1a">PPC_SPE_ACC_REGNUM</a> : -1;
<a name="l03970"></a>03970   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a49a9f6148acf30fe778ff4b99bca50f1">ppc_spefscr_regnum</a> = have_spe ? <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca7b968fdc1c2ee6948eada9be4688ac81">PPC_SPE_FSCR_REGNUM</a> : -1;
<a name="l03971"></a>03971 
<a name="l03972"></a>03972   <a class="code" href="gdbarch_8c.html#a8852f70e2afc74953a57521ed08a3381">set_gdbarch_pc_regnum</a> (gdbarch, <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca7be98fb17925ffd3a4cef9b32b2e4167">PPC_PC_REGNUM</a>);
<a name="l03973"></a>03973   <a class="code" href="gdbarch_8c.html#a81a92a88a67093d18e59fd5650fda352">set_gdbarch_sp_regnum</a> (gdbarch, <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca72ad78cff2893acb3ca9557c5e65e633">PPC_R0_REGNUM</a> + 1);
<a name="l03974"></a>03974   <a class="code" href="gdbarch_8c.html#ad59b5dea0938318f76486adcfa7b24bc">set_gdbarch_deprecated_fp_regnum</a> (gdbarch, <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca72ad78cff2893acb3ca9557c5e65e633">PPC_R0_REGNUM</a> + 1);
<a name="l03975"></a>03975   <a class="code" href="gdbarch_8c.html#a6d14588097c52c3129cab85a5d9c0eab">set_gdbarch_fp0_regnum</a> (gdbarch, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a75941db3cd0730fda7cf4cf7b89673be">ppc_fp0_regnum</a>);
<a name="l03976"></a>03976   <a class="code" href="gdbarch_8c.html#a76132b68159d6b89283516c768e22839">set_gdbarch_register_sim_regno</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#a7f0f32cdb7b0e84c32a219302d6c749e">rs6000_register_sim_regno</a>);
<a name="l03977"></a>03977 
<a name="l03978"></a>03978   <span class="comment">/* The XML specification for PowerPC sensibly calls the MSR &quot;msr&quot;.</span>
<a name="l03979"></a>03979 <span class="comment">     GDB traditionally called it &quot;ps&quot;, though, so let GDB add an</span>
<a name="l03980"></a>03980 <span class="comment">     alias.  */</span>
<a name="l03981"></a>03981   <a class="code" href="gdbarch_8c.html#a0f88447385153c3d9e0098e4bef9f469">set_gdbarch_ps_regnum</a> (gdbarch, tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a3dd7eea3668b3816f9f362de516e1d4e">ppc_ps_regnum</a>);
<a name="l03982"></a>03982 
<a name="l03983"></a>03983   <span class="keywordflow">if</span> (wordsize == 8)
<a name="l03984"></a>03984     <a class="code" href="gdbarch_8c.html#ad9b13a9323cac027c4b805953b4fff63">set_gdbarch_return_value</a> (gdbarch, <a class="code" href="ppc-sysv-tdep_8c.html#a755a24cd79f292faf01f16727d901b72">ppc64_sysv_abi_return_value</a>);
<a name="l03985"></a>03985   <span class="keywordflow">else</span>
<a name="l03986"></a>03986     <a class="code" href="gdbarch_8c.html#ad9b13a9323cac027c4b805953b4fff63">set_gdbarch_return_value</a> (gdbarch, <a class="code" href="ppc-sysv-tdep_8c.html#aaa3a18d94636fa51cd773c5c56347fa3">ppc_sysv_abi_return_value</a>);
<a name="l03987"></a>03987 
<a name="l03988"></a>03988   <span class="comment">/* Set lr_frame_offset.  */</span>
<a name="l03989"></a>03989   <span class="keywordflow">if</span> (wordsize == 8)
<a name="l03990"></a>03990     tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a6e2baa9008538182c177c6985b4c36e9">lr_frame_offset</a> = 16;
<a name="l03991"></a>03991   <span class="keywordflow">else</span>
<a name="l03992"></a>03992     tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a6e2baa9008538182c177c6985b4c36e9">lr_frame_offset</a> = 4;
<a name="l03993"></a>03993 
<a name="l03994"></a>03994   <span class="keywordflow">if</span> (have_spe || have_dfp || have_vsx)
<a name="l03995"></a>03995     {
<a name="l03996"></a>03996       <a class="code" href="gdbarch_8c.html#a99fd57c1a882cf61c413e64028937a1b">set_gdbarch_pseudo_register_read</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#acbe81fb0e536b20acf273b0d2f0b3f5d">rs6000_pseudo_register_read</a>);
<a name="l03997"></a>03997       <a class="code" href="gdbarch_8c.html#ae463eca1992acf69ff1bc28ed8ca3aea">set_gdbarch_pseudo_register_write</a> (gdbarch,
<a name="l03998"></a>03998                                          <a class="code" href="rs6000-tdep_8c.html#afaa710c29501a12b972bd7d5beea0f46">rs6000_pseudo_register_write</a>);
<a name="l03999"></a>03999     }
<a name="l04000"></a>04000 
<a name="l04001"></a>04001   <a class="code" href="gdbarch_8c.html#a6143b9e1e9c2f9cc83ab8a64424e9219">set_gdbarch_have_nonsteppable_watchpoint</a> (gdbarch, 1);
<a name="l04002"></a>04002 
<a name="l04003"></a>04003   <span class="comment">/* Select instruction printer.  */</span>
<a name="l04004"></a>04004   <span class="keywordflow">if</span> (arch == bfd_arch_rs6000)
<a name="l04005"></a>04005     <a class="code" href="gdbarch_8c.html#a0c9e9e391e44d476b74debefc407e9bb">set_gdbarch_print_insn</a> (gdbarch, print_insn_rs6000);
<a name="l04006"></a>04006   <span class="keywordflow">else</span>
<a name="l04007"></a>04007     <a class="code" href="gdbarch_8c.html#a0c9e9e391e44d476b74debefc407e9bb">set_gdbarch_print_insn</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#a429b8fd5ed6dd452c1df8e7c38cab6d2">gdb_print_insn_powerpc</a>);
<a name="l04008"></a>04008 
<a name="l04009"></a>04009   <a class="code" href="gdbarch_8c.html#ad8417c5d66cf04d0587f58f82de94c48">set_gdbarch_num_regs</a> (gdbarch, <a class="code" href="ppc-tdep_8h.html#ac34c4c978f4130a92a5068f9e21ea9fca8ec11052224ee5e4ae1296365a9520fe">PPC_NUM_REGS</a>);
<a name="l04010"></a>04010 
<a name="l04011"></a>04011   <span class="keywordflow">if</span> (have_spe)
<a name="l04012"></a>04012     num_pseudoregs += 32;
<a name="l04013"></a>04013   <span class="keywordflow">if</span> (have_dfp)
<a name="l04014"></a>04014     num_pseudoregs += 16;
<a name="l04015"></a>04015   <span class="keywordflow">if</span> (have_vsx)
<a name="l04016"></a>04016     <span class="comment">/* Include both VSX and Extended FP registers.  */</span>
<a name="l04017"></a>04017     num_pseudoregs += 96;
<a name="l04018"></a>04018 
<a name="l04019"></a>04019   <a class="code" href="gdbarch_8c.html#aaf72e08f972ba348d5d28f6b6b8db638">set_gdbarch_num_pseudo_regs</a> (gdbarch, num_pseudoregs);
<a name="l04020"></a>04020 
<a name="l04021"></a>04021   <a class="code" href="gdbarch_8c.html#abaaa21a756f3f8a689513c6df8b47ced">set_gdbarch_ptr_bit</a> (gdbarch, wordsize * TARGET_CHAR_BIT);
<a name="l04022"></a>04022   <a class="code" href="gdbarch_8c.html#aa8ab344aebdb71839678ff3d3e248f9b">set_gdbarch_short_bit</a> (gdbarch, 2 * TARGET_CHAR_BIT);
<a name="l04023"></a>04023   <a class="code" href="gdbarch_8c.html#a4dbde89c15b9ee9f1808a4e01f2a758d">set_gdbarch_int_bit</a> (gdbarch, 4 * TARGET_CHAR_BIT);
<a name="l04024"></a>04024   <a class="code" href="gdbarch_8c.html#ab661d4332c2357c6242d5f3f57f1bc44">set_gdbarch_long_bit</a> (gdbarch, wordsize * TARGET_CHAR_BIT);
<a name="l04025"></a>04025   <a class="code" href="gdbarch_8c.html#a00b33f93ffedea6960d0ed4a9d7e1fba">set_gdbarch_long_long_bit</a> (gdbarch, 8 * TARGET_CHAR_BIT);
<a name="l04026"></a>04026   <a class="code" href="gdbarch_8c.html#aa04e7a5715ca0c94652f8d35f44411f7">set_gdbarch_float_bit</a> (gdbarch, 4 * TARGET_CHAR_BIT);
<a name="l04027"></a>04027   <a class="code" href="gdbarch_8c.html#a6dde6fbd6439a96136e99bed4a7d98cd">set_gdbarch_double_bit</a> (gdbarch, 8 * TARGET_CHAR_BIT);
<a name="l04028"></a>04028   <a class="code" href="gdbarch_8c.html#ada51ef491e1e7d747c9a974639adf84d">set_gdbarch_long_double_bit</a> (gdbarch, 16 * TARGET_CHAR_BIT);
<a name="l04029"></a>04029   <a class="code" href="gdbarch_8c.html#a0863fa86a9cb752711cca456e3f829b7">set_gdbarch_char_signed</a> (gdbarch, 0);
<a name="l04030"></a>04030 
<a name="l04031"></a>04031   <a class="code" href="gdbarch_8c.html#aff48f6a8b2982831522fc7b3af596654">set_gdbarch_frame_align</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#aa901f1caa05a1174d892287aa4abb0e7">rs6000_frame_align</a>);
<a name="l04032"></a>04032   <span class="keywordflow">if</span> (wordsize == 8)
<a name="l04033"></a>04033     <span class="comment">/* PPC64 SYSV.  */</span>
<a name="l04034"></a>04034     <a class="code" href="gdbarch_8c.html#a9d0c04c0e9493d309e98100935b6cda3">set_gdbarch_frame_red_zone_size</a> (gdbarch, 288);
<a name="l04035"></a>04035 
<a name="l04036"></a>04036   <a class="code" href="gdbarch_8c.html#a935aab169e22a4d72404170ca9b29256">set_gdbarch_convert_register_p</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#aea4b92b83818823388fae344a158834b">rs6000_convert_register_p</a>);
<a name="l04037"></a>04037   <a class="code" href="gdbarch_8c.html#aa619cceffea6629dbd80d221de6f0527">set_gdbarch_register_to_value</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#a176317a4bcc1b87661f802661c2f1a9e">rs6000_register_to_value</a>);
<a name="l04038"></a>04038   <a class="code" href="gdbarch_8c.html#a978e063e1380cee113fcec42444237b0">set_gdbarch_value_to_register</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#adc831450af410f294eabe665a60b1315">rs6000_value_to_register</a>);
<a name="l04039"></a>04039 
<a name="l04040"></a>04040   <a class="code" href="gdbarch_8c.html#abeb6b220ed850a9f2b4a992dfcae9a2b">set_gdbarch_stab_reg_to_regnum</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#a8c4e2d3e619e14036578760b61cf2719">rs6000_stab_reg_to_regnum</a>);
<a name="l04041"></a>04041   <a class="code" href="gdbarch_8c.html#a43ca55f05fcf599681eb376bbc6c8ece">set_gdbarch_dwarf2_reg_to_regnum</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#a7cbdc4d9a0b6aaa1bc635b111862c477">rs6000_dwarf2_reg_to_regnum</a>);
<a name="l04042"></a>04042 
<a name="l04043"></a>04043   <span class="keywordflow">if</span> (wordsize == 4)
<a name="l04044"></a>04044     <a class="code" href="gdbarch_8c.html#a853528dceff46211c1bb8c57b77dca31">set_gdbarch_push_dummy_call</a> (gdbarch, <a class="code" href="ppc-sysv-tdep_8c.html#a9ac9ca40953d91c1dca49a985b14b458">ppc_sysv_abi_push_dummy_call</a>);
<a name="l04045"></a>04045   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (wordsize == 8)
<a name="l04046"></a>04046     <a class="code" href="gdbarch_8c.html#a853528dceff46211c1bb8c57b77dca31">set_gdbarch_push_dummy_call</a> (gdbarch, <a class="code" href="ppc-sysv-tdep_8c.html#a8b3b80ca2f1b7dbce3ec66d9c3483a2a">ppc64_sysv_abi_push_dummy_call</a>);
<a name="l04047"></a>04047 
<a name="l04048"></a>04048   <a class="code" href="gdbarch_8c.html#a841509ae0070f2f12aa9b3b7fd52b92f">set_gdbarch_skip_prologue</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#a1db425a3bbf5c9aa8c338e7fa1939e11">rs6000_skip_prologue</a>);
<a name="l04049"></a>04049   <a class="code" href="gdbarch_8c.html#ab1ffbc0d23252e88823c50139b8464fb">set_gdbarch_in_function_epilogue_p</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#a11a469eb622fc1368f7a76112880c13d">rs6000_in_function_epilogue_p</a>);
<a name="l04050"></a>04050   <a class="code" href="gdbarch_8c.html#a548d26040e001ff201633b61cea78ff9">set_gdbarch_skip_main_prologue</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#aec5e6d055bc0b7ec24e3a7491068d35b">rs6000_skip_main_prologue</a>);
<a name="l04051"></a>04051 
<a name="l04052"></a>04052   <a class="code" href="gdbarch_8c.html#ad66381ed135b13aa5635f0485211ca71">set_gdbarch_inner_than</a> (gdbarch, <a class="code" href="arch-utils_8c.html#aaceae1c07203f3091df647f813b9f20e">core_addr_lessthan</a>);
<a name="l04053"></a>04053   <a class="code" href="gdbarch_8c.html#ad738cdf37fa27f4cf3642107cadf61d3">set_gdbarch_breakpoint_from_pc</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#a3825508b7a74f7ce24d223a454e243df">rs6000_breakpoint_from_pc</a>);
<a name="l04054"></a>04054 
<a name="l04055"></a>04055   <span class="comment">/* The value of symbols of type N_SO and N_FUN maybe null when</span>
<a name="l04056"></a>04056 <span class="comment">     it shouldn&#39;t be.  */</span>
<a name="l04057"></a>04057   <a class="code" href="gdbarch_8c.html#a2723158f4c6f46a4266d6e6abea418da">set_gdbarch_sofun_address_maybe_missing</a> (gdbarch, 1);
<a name="l04058"></a>04058 
<a name="l04059"></a>04059   <span class="comment">/* Handles single stepping of atomic sequences.  */</span>
<a name="l04060"></a>04060   <a class="code" href="gdbarch_8c.html#a3ef5204e360b0a4ef1d162945911c403">set_gdbarch_software_single_step</a> (gdbarch, <a class="code" href="ppc-tdep_8h.html#a0eab653974a2bf80aa8fad3bcde302fb">ppc_deal_with_atomic_sequence</a>);
<a name="l04061"></a>04061   
<a name="l04062"></a>04062   <span class="comment">/* Not sure on this.  FIXMEmgo */</span>
<a name="l04063"></a>04063   <a class="code" href="gdbarch_8c.html#affeacd014397bbaf442f32de0cb4b86c">set_gdbarch_frame_args_skip</a> (gdbarch, 8);
<a name="l04064"></a>04064 
<a name="l04065"></a>04065   <span class="comment">/* Helpers for function argument information.  */</span>
<a name="l04066"></a>04066   <a class="code" href="gdbarch_8c.html#adcdda1b0584e8b697d4ebb4cf2f96f91">set_gdbarch_fetch_pointer_argument</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#a7146ed2e536ffa5fd5b412582335856b">rs6000_fetch_pointer_argument</a>);
<a name="l04067"></a>04067 
<a name="l04068"></a>04068   <span class="comment">/* Trampoline.  */</span>
<a name="l04069"></a>04069   <a class="code" href="gdbarch_8c.html#a50a232453a925697b5b6a761a5ee3882">set_gdbarch_in_solib_return_trampoline</a>
<a name="l04070"></a>04070     (gdbarch, <a class="code" href="rs6000-tdep_8c.html#a15657727c66fcacb5d187cf2154388bd">rs6000_in_solib_return_trampoline</a>);
<a name="l04071"></a>04071   <a class="code" href="gdbarch_8c.html#a07ccbd7ea452da3be3982cf93d7976c7">set_gdbarch_skip_trampoline_code</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#a08adcf8b4f2eec7b7ccefafbe77fd021">rs6000_skip_trampoline_code</a>);
<a name="l04072"></a>04072 
<a name="l04073"></a>04073   <span class="comment">/* Hook in the DWARF CFI frame unwinder.  */</span>
<a name="l04074"></a>04074   <a class="code" href="dwarf2-frame_8c.html#ab2a0a14bba7f1db72907039eb3356975">dwarf2_append_unwinders</a> (gdbarch);
<a name="l04075"></a>04075   <a class="code" href="dwarf2-frame_8c.html#a679cc3ed4d7fe7f7ef8558322dbf0214">dwarf2_frame_set_adjust_regnum</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#a5796cce25a40386f7ea87324de172378">rs6000_adjust_frame_regnum</a>);
<a name="l04076"></a>04076 
<a name="l04077"></a>04077   <span class="comment">/* Frame handling.  */</span>
<a name="l04078"></a>04078   <a class="code" href="dwarf2-frame_8c.html#ad49836c98fc45f9fde8518a0f599aff0">dwarf2_frame_set_init_reg</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#abfed72834856de296e8a24229840458f">ppc_dwarf2_frame_init_reg</a>);
<a name="l04079"></a>04079 
<a name="l04080"></a>04080   <span class="comment">/* Setup displaced stepping.  */</span>
<a name="l04081"></a>04081   <a class="code" href="gdbarch_8c.html#a377f439d7b2cc15ed58b05a954cd5984">set_gdbarch_displaced_step_copy_insn</a> (gdbarch,
<a name="l04082"></a>04082                                         <a class="code" href="arch-utils_8c.html#a5fe7425883d9946d1a4b62741158f887">simple_displaced_step_copy_insn</a>);
<a name="l04083"></a>04083   <a class="code" href="gdbarch_8c.html#a9789230a938c1b53d4c38465dbf640ae">set_gdbarch_displaced_step_hw_singlestep</a> (gdbarch,
<a name="l04084"></a>04084                                             <a class="code" href="rs6000-tdep_8c.html#acc4a73db1e877baf435f6f2d466ecef0">ppc_displaced_step_hw_singlestep</a>);
<a name="l04085"></a>04085   <a class="code" href="gdbarch_8c.html#a172d36c9ff7fbc6903ebbc57971dfb74">set_gdbarch_displaced_step_fixup</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#a93869346cb2e5393ffc3b5aa019cf248">ppc_displaced_step_fixup</a>);
<a name="l04086"></a>04086   <a class="code" href="gdbarch_8c.html#a906aad6d29da88f8574e000d1048bc18">set_gdbarch_displaced_step_free_closure</a> (gdbarch,
<a name="l04087"></a>04087                                            <a class="code" href="arch-utils_8c.html#a229f932ac79dc6a79b04970a66c1828f">simple_displaced_step_free_closure</a>);
<a name="l04088"></a>04088   <a class="code" href="gdbarch_8c.html#a58d22760111bd279c9bec892edaae693">set_gdbarch_displaced_step_location</a> (gdbarch,
<a name="l04089"></a>04089                                        <a class="code" href="arch-utils_8c.html#a37f304c4df681be4d0c63afb90e2724c">displaced_step_at_entry_point</a>);
<a name="l04090"></a>04090 
<a name="l04091"></a>04091   <a class="code" href="gdbarch_8c.html#a2bc6e109dc44de5a8ecf843b8304bb90">set_gdbarch_max_insn_length</a> (gdbarch, <a class="code" href="ppc-tdep_8h.html#af353a6c23fa01123d835427dfc7b4b77">PPC_INSN_SIZE</a>);
<a name="l04092"></a>04092 
<a name="l04093"></a>04093   <span class="comment">/* Hook in ABI-specific overrides, if they have been registered.  */</span>
<a name="l04094"></a>04094   info.<a class="code" href="structgdbarch__info.html#ac92a2218499c8147be64826e303d688e">target_desc</a> = tdesc;
<a name="l04095"></a>04095   info.<a class="code" href="structgdbarch__info.html#a86760dc33f60db9d946b09271bf244a3">tdep_info</a> = (<span class="keywordtype">void</span> *) tdesc_data;
<a name="l04096"></a>04096   <a class="code" href="osabi_8c.html#a38a6d312b216043e2dc48d1ada09035b">gdbarch_init_osabi</a> (info, gdbarch);
<a name="l04097"></a>04097 
<a name="l04098"></a>04098   <span class="keywordflow">switch</span> (info.<a class="code" href="structgdbarch__info.html#ac0a080026c1bf90f28a9a414532e1dcd">osabi</a>)
<a name="l04099"></a>04099     {
<a name="l04100"></a>04100     <span class="keywordflow">case</span> <a class="code" href="defs_8h.html#a9cd05255f6826ff913d539652b5e624fa0b4fe2ba722ad0accc6caf9bd6c67912">GDB_OSABI_LINUX</a>:
<a name="l04101"></a>04101     <span class="keywordflow">case</span> <a class="code" href="defs_8h.html#a9cd05255f6826ff913d539652b5e624fa494e89518f0b6c883556f8ededdfb2f8">GDB_OSABI_NETBSD_AOUT</a>:
<a name="l04102"></a>04102     <span class="keywordflow">case</span> <a class="code" href="defs_8h.html#a9cd05255f6826ff913d539652b5e624fa8c1c330e76c47c9adca05fb4ee97e160">GDB_OSABI_NETBSD_ELF</a>:
<a name="l04103"></a>04103     <span class="keywordflow">case</span> <a class="code" href="defs_8h.html#a9cd05255f6826ff913d539652b5e624fad5a2527db28cba3a012b7db9fa1a29f3">GDB_OSABI_UNKNOWN</a>:
<a name="l04104"></a>04104       <a class="code" href="gdbarch_8c.html#a1974f5f26c09a4cd32165286c3769621">set_gdbarch_unwind_pc</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#a669401dc91f48000e71428d030ffc526">rs6000_unwind_pc</a>);
<a name="l04105"></a>04105       <a class="code" href="frame-unwind_8c.html#afa4de8a130514bfd524d46f32e35a534">frame_unwind_append_unwinder</a> (gdbarch, &amp;rs6000_frame_unwind);
<a name="l04106"></a>04106       <a class="code" href="gdbarch_8c.html#a23da982924f904d22d0b58639a48bccf">set_gdbarch_dummy_id</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#ae262f7f91b8d55968868539679ca783c">rs6000_dummy_id</a>);
<a name="l04107"></a>04107       <a class="code" href="frame-base_8c.html#a7a0e0eec5753f66f538b6faca2547fd0">frame_base_append_sniffer</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#acb48b8c82148ba94ad923b5ab8b4963c">rs6000_frame_base_sniffer</a>);
<a name="l04108"></a>04108       <span class="keywordflow">break</span>;
<a name="l04109"></a>04109     <span class="keywordflow">default</span>:
<a name="l04110"></a>04110       <a class="code" href="gdbarch_8c.html#a5fad1810477fcfdccf7604c41fe299b8">set_gdbarch_believe_pcc_promotion</a> (gdbarch, 1);
<a name="l04111"></a>04111 
<a name="l04112"></a>04112       <a class="code" href="gdbarch_8c.html#a1974f5f26c09a4cd32165286c3769621">set_gdbarch_unwind_pc</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#a669401dc91f48000e71428d030ffc526">rs6000_unwind_pc</a>);
<a name="l04113"></a>04113       <a class="code" href="frame-unwind_8c.html#afa4de8a130514bfd524d46f32e35a534">frame_unwind_append_unwinder</a> (gdbarch, &amp;rs6000_frame_unwind);
<a name="l04114"></a>04114       <a class="code" href="gdbarch_8c.html#a23da982924f904d22d0b58639a48bccf">set_gdbarch_dummy_id</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#ae262f7f91b8d55968868539679ca783c">rs6000_dummy_id</a>);
<a name="l04115"></a>04115       <a class="code" href="frame-base_8c.html#a7a0e0eec5753f66f538b6faca2547fd0">frame_base_append_sniffer</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#acb48b8c82148ba94ad923b5ab8b4963c">rs6000_frame_base_sniffer</a>);
<a name="l04116"></a>04116     }
<a name="l04117"></a>04117 
<a name="l04118"></a>04118   <a class="code" href="target-descriptions_8c.html#a7adea07f51454b6143e1c49e1baec3bf">set_tdesc_pseudo_register_type</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#a217d91451c3046e0a05a289bb8a2b283">rs6000_pseudo_register_type</a>);
<a name="l04119"></a>04119   <a class="code" href="target-descriptions_8c.html#ae10709c8784206bf8199ca4aefe91fd1">set_tdesc_pseudo_register_reggroup_p</a> (gdbarch,
<a name="l04120"></a>04120                                         <a class="code" href="rs6000-tdep_8c.html#a173e3512752a5a273492bb426dbbdb2b">rs6000_pseudo_register_reggroup_p</a>);
<a name="l04121"></a>04121   <a class="code" href="target-descriptions_8c.html#a6e7158d012f081cc038d2b5b1b0830ee">tdesc_use_registers</a> (gdbarch, tdesc, tdesc_data);
<a name="l04122"></a>04122 
<a name="l04123"></a>04123   <span class="comment">/* Override the normal target description method to make the SPE upper</span>
<a name="l04124"></a>04124 <span class="comment">     halves anonymous.  */</span>
<a name="l04125"></a>04125   <a class="code" href="gdbarch_8c.html#a378ba40a6275393e204873c5bba602ad">set_gdbarch_register_name</a> (gdbarch, <a class="code" href="rs6000-tdep_8c.html#a0b5d01162e1364fdba3437f20151ae7f">rs6000_register_name</a>);
<a name="l04126"></a>04126 
<a name="l04127"></a>04127   <span class="comment">/* Choose register numbers for all supported pseudo-registers.  */</span>
<a name="l04128"></a>04128   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a4e1ef03cbbfda489b7573251851291f4">ppc_ev0_regnum</a> = -1;
<a name="l04129"></a>04129   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a5984995b6e4dc57d5447bb71ebb9c695">ppc_dl0_regnum</a> = -1;
<a name="l04130"></a>04130   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#acee880f0e287602f378022dec6896991">ppc_vsr0_regnum</a> = -1;
<a name="l04131"></a>04131   tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ad172c8a450093737d4d5f7b692f0b1ef">ppc_efpr0_regnum</a> = -1;
<a name="l04132"></a>04132 
<a name="l04133"></a>04133   cur_reg = <a class="code" href="gdbarch_8c.html#a69069435754d0b434c7043a21d247325">gdbarch_num_regs</a> (gdbarch);
<a name="l04134"></a>04134 
<a name="l04135"></a>04135   <span class="keywordflow">if</span> (have_spe)
<a name="l04136"></a>04136     {
<a name="l04137"></a>04137       tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a4e1ef03cbbfda489b7573251851291f4">ppc_ev0_regnum</a> = cur_reg;
<a name="l04138"></a>04138       cur_reg += 32;
<a name="l04139"></a>04139     }
<a name="l04140"></a>04140   <span class="keywordflow">if</span> (have_dfp)
<a name="l04141"></a>04141     {
<a name="l04142"></a>04142       tdep-&gt;<a class="code" href="structgdbarch__tdep.html#a5984995b6e4dc57d5447bb71ebb9c695">ppc_dl0_regnum</a> = cur_reg;
<a name="l04143"></a>04143       cur_reg += 16;
<a name="l04144"></a>04144     }
<a name="l04145"></a>04145   <span class="keywordflow">if</span> (have_vsx)
<a name="l04146"></a>04146     {
<a name="l04147"></a>04147       tdep-&gt;<a class="code" href="structgdbarch__tdep.html#acee880f0e287602f378022dec6896991">ppc_vsr0_regnum</a> = cur_reg;
<a name="l04148"></a>04148       cur_reg += 64;
<a name="l04149"></a>04149       tdep-&gt;<a class="code" href="structgdbarch__tdep.html#ad172c8a450093737d4d5f7b692f0b1ef">ppc_efpr0_regnum</a> = cur_reg;
<a name="l04150"></a>04150       cur_reg += 32;
<a name="l04151"></a>04151     }
<a name="l04152"></a>04152 
<a name="l04153"></a>04153   <a class="code" href="gdb__assert_8h.html#aeb007d3e990858c7ef8e40a7e512c1ff">gdb_assert</a> (<a class="code" href="gdbarch_8c.html#a69069435754d0b434c7043a21d247325">gdbarch_num_regs</a> (gdbarch)
<a name="l04154"></a>04154               + <a class="code" href="gdbarch_8c.html#a8e0e40f42e5969ee4559ee47717aa9f3">gdbarch_num_pseudo_regs</a> (gdbarch) == cur_reg);
<a name="l04155"></a>04155 
<a name="l04156"></a>04156   <span class="comment">/* Register the ravenscar_arch_ops.  */</span>
<a name="l04157"></a>04157   <span class="keywordflow">if</span> (mach == bfd_mach_ppc_e500)
<a name="l04158"></a>04158     <a class="code" href="ppc-ravenscar-thread_8c.html#a902f47fa018a83650cb3ff2cca096cc6">register_e500_ravenscar_ops</a> (gdbarch);
<a name="l04159"></a>04159   <span class="keywordflow">else</span>
<a name="l04160"></a>04160     <a class="code" href="ppc-ravenscar-thread_8c.html#a331c35dc838de7716619bd1229c5b3bd">register_ppc_ravenscar_ops</a> (gdbarch);
<a name="l04161"></a>04161 
<a name="l04162"></a>04162   <span class="keywordflow">return</span> gdbarch;
<a name="l04163"></a>04163 }
<a name="l04164"></a>04164 
<a name="l04165"></a>04165 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04166"></a><a class="code" href="rs6000-tdep_8c.html#aff242569dd85a1e02d2fa7e11af78af5">04166</a> <a class="code" href="rs6000-tdep_8c.html#aff242569dd85a1e02d2fa7e11af78af5">rs6000_dump_tdep</a> (<span class="keyword">struct</span> gdbarch *gdbarch, <span class="keyword">struct</span> <a class="code" href="structui__file.html">ui_file</a> *file)
<a name="l04167"></a>04167 {
<a name="l04168"></a>04168   <span class="keyword">struct </span><a class="code" href="structgdbarch__tdep.html">gdbarch_tdep</a> *tdep = <a class="code" href="gdbarch_8c.html#acea996b7421706849bc20567695b5b31">gdbarch_tdep</a> (gdbarch);
<a name="l04169"></a>04169 
<a name="l04170"></a>04170   <span class="keywordflow">if</span> (tdep == NULL)
<a name="l04171"></a>04171     <span class="keywordflow">return</span>;
<a name="l04172"></a>04172 
<a name="l04173"></a>04173   <span class="comment">/* FIXME: Dump gdbarch_tdep.  */</span>
<a name="l04174"></a>04174 }
<a name="l04175"></a>04175 
<a name="l04176"></a>04176 <span class="comment">/* PowerPC-specific commands.  */</span>
<a name="l04177"></a>04177 
<a name="l04178"></a>04178 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04179"></a><a class="code" href="rs6000-tdep_8c.html#a76baf8470ca2153a73d9eb543291cf2d">04179</a> <a class="code" href="rs6000-tdep_8c.html#a76baf8470ca2153a73d9eb543291cf2d">set_powerpc_command</a> (<span class="keywordtype">char</span> *args, <span class="keywordtype">int</span> from_tty)
<a name="l04180"></a>04180 {
<a name="l04181"></a>04181   <a class="code" href="utils_8c.html#ad57145632bbcb0361dc1dfa134b1efd0">printf_unfiltered</a> (<a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;\</span>
<a name="l04182"></a>04182 <span class="stringliteral">\&quot;set powerpc\&quot; must be followed by an appropriate subcommand.\n&quot;</span>));
<a name="l04183"></a>04183   <a class="code" href="cli-decode_8c.html#a2ae762f5189f3597666852868defc038">help_list</a> (setpowerpccmdlist, <span class="stringliteral">&quot;set powerpc &quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49a470d2795fd53d63204eb7343b0c8bb50">all_commands</a>, <a class="code" href="main_8c.html#a41a2b997ba5454df787d61f051dd918c">gdb_stdout</a>);
<a name="l04184"></a>04184 }
<a name="l04185"></a>04185 
<a name="l04186"></a>04186 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04187"></a><a class="code" href="rs6000-tdep_8c.html#a1dc793d32c645f12960aeeb39c0a4369">04187</a> <a class="code" href="rs6000-tdep_8c.html#a1dc793d32c645f12960aeeb39c0a4369">show_powerpc_command</a> (<span class="keywordtype">char</span> *args, <span class="keywordtype">int</span> from_tty)
<a name="l04188"></a>04188 {
<a name="l04189"></a>04189   <a class="code" href="cli-setshow_8c.html#acad906a9e078be9cde70874ab62b1b1e">cmd_show_list</a> (showpowerpccmdlist, from_tty, <span class="stringliteral">&quot;&quot;</span>);
<a name="l04190"></a>04190 }
<a name="l04191"></a>04191 
<a name="l04192"></a>04192 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04193"></a><a class="code" href="rs6000-tdep_8c.html#aacc05bdbf095221cb8cf3f141e48c0e2">04193</a> <a class="code" href="rs6000-tdep_8c.html#aacc05bdbf095221cb8cf3f141e48c0e2">powerpc_set_soft_float</a> (<span class="keywordtype">char</span> *args, <span class="keywordtype">int</span> from_tty,
<a name="l04194"></a>04194                         <span class="keyword">struct</span> <a class="code" href="structcmd__list__element.html">cmd_list_element</a> *c)
<a name="l04195"></a>04195 {
<a name="l04196"></a>04196   <span class="keyword">struct </span><a class="code" href="structgdbarch__info.html">gdbarch_info</a> info;
<a name="l04197"></a>04197 
<a name="l04198"></a>04198   <span class="comment">/* Update the architecture.  */</span>
<a name="l04199"></a>04199   <a class="code" href="arch-utils_8c.html#a69412d47dc7577cf9160de19970a56e9">gdbarch_info_init</a> (&amp;info);
<a name="l04200"></a>04200   <span class="keywordflow">if</span> (!<a class="code" href="arch-utils_8c.html#a34a812430575336ce60a4dda51535cfb">gdbarch_update_p</a> (info))
<a name="l04201"></a>04201     <a class="code" href="common-utils_8h.html#aa14285d9d3d4171016ef9cf09447e8bb">internal_error</a> (__FILE__, __LINE__, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;could not update architecture&quot;</span>));
<a name="l04202"></a>04202 }
<a name="l04203"></a>04203 
<a name="l04204"></a>04204 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04205"></a><a class="code" href="rs6000-tdep_8c.html#a39fba54820598d3bf2906bd6a4927044">04205</a> <a class="code" href="rs6000-tdep_8c.html#a39fba54820598d3bf2906bd6a4927044">powerpc_set_vector_abi</a> (<span class="keywordtype">char</span> *args, <span class="keywordtype">int</span> from_tty,
<a name="l04206"></a>04206                         <span class="keyword">struct</span> <a class="code" href="structcmd__list__element.html">cmd_list_element</a> *c)
<a name="l04207"></a>04207 {
<a name="l04208"></a>04208   <span class="keyword">struct </span><a class="code" href="structgdbarch__info.html">gdbarch_info</a> info;
<a name="l04209"></a>04209   <span class="keyword">enum</span> <a class="code" href="ppc-tdep_8h.html#ab82af50225ea2c3b84b8f8d412e31290">powerpc_vector_abi</a> vector_abi;
<a name="l04210"></a>04210 
<a name="l04211"></a>04211   <span class="keywordflow">for</span> (vector_abi = <a class="code" href="ppc-tdep_8h.html#ab82af50225ea2c3b84b8f8d412e31290a2676cd0aed103f62bd70876298346266">POWERPC_VEC_AUTO</a>;
<a name="l04212"></a>04212        vector_abi != <a class="code" href="ppc-tdep_8h.html#ab82af50225ea2c3b84b8f8d412e31290aa74a4a1493d54f6becd038a1dc113735">POWERPC_VEC_LAST</a>;
<a name="l04213"></a>04213        vector_abi++)
<a name="l04214"></a>04214     <span class="keywordflow">if</span> (strcmp (<a class="code" href="rs6000-tdep_8c.html#a13c1ca613e0ce4119da22a01dd89a523">powerpc_vector_abi_string</a>,
<a name="l04215"></a>04215                 <a class="code" href="rs6000-tdep_8c.html#aa39a6478966f6a980eb80ab6f0528bb4">powerpc_vector_strings</a>[vector_abi]) == 0)
<a name="l04216"></a>04216       {
<a name="l04217"></a>04217         <a class="code" href="rs6000-tdep_8c.html#a73815c27332aa8eb305ed17e148d81b4">powerpc_vector_abi_global</a> = vector_abi;
<a name="l04218"></a>04218         <span class="keywordflow">break</span>;
<a name="l04219"></a>04219       }
<a name="l04220"></a>04220 
<a name="l04221"></a>04221   <span class="keywordflow">if</span> (vector_abi == <a class="code" href="ppc-tdep_8h.html#ab82af50225ea2c3b84b8f8d412e31290aa74a4a1493d54f6becd038a1dc113735">POWERPC_VEC_LAST</a>)
<a name="l04222"></a>04222     <a class="code" href="common-utils_8h.html#aa14285d9d3d4171016ef9cf09447e8bb">internal_error</a> (__FILE__, __LINE__, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Invalid vector ABI accepted: %s.&quot;</span>),
<a name="l04223"></a>04223                     <a class="code" href="rs6000-tdep_8c.html#a13c1ca613e0ce4119da22a01dd89a523">powerpc_vector_abi_string</a>);
<a name="l04224"></a>04224 
<a name="l04225"></a>04225   <span class="comment">/* Update the architecture.  */</span>
<a name="l04226"></a>04226   <a class="code" href="arch-utils_8c.html#a69412d47dc7577cf9160de19970a56e9">gdbarch_info_init</a> (&amp;info);
<a name="l04227"></a>04227   <span class="keywordflow">if</span> (!<a class="code" href="arch-utils_8c.html#a34a812430575336ce60a4dda51535cfb">gdbarch_update_p</a> (info))
<a name="l04228"></a>04228     <a class="code" href="common-utils_8h.html#aa14285d9d3d4171016ef9cf09447e8bb">internal_error</a> (__FILE__, __LINE__, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;could not update architecture&quot;</span>));
<a name="l04229"></a>04229 }
<a name="l04230"></a>04230 
<a name="l04231"></a>04231 <span class="comment">/* Show the current setting of the exact watchpoints flag.  */</span>
<a name="l04232"></a>04232 
<a name="l04233"></a>04233 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04234"></a><a class="code" href="rs6000-tdep_8c.html#ad38e0f830b766b080bbeb93f012e6c4d">04234</a> <a class="code" href="rs6000-tdep_8c.html#ad38e0f830b766b080bbeb93f012e6c4d">show_powerpc_exact_watchpoints</a> (<span class="keyword">struct</span> <a class="code" href="structui__file.html">ui_file</a> *file, <span class="keywordtype">int</span> from_tty,
<a name="l04235"></a>04235                                 <span class="keyword">struct</span> <a class="code" href="structcmd__list__element.html">cmd_list_element</a> *c,
<a name="l04236"></a>04236                                 <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structvalue.html">value</a>)
<a name="l04237"></a>04237 {
<a name="l04238"></a>04238   <a class="code" href="utils_8c.html#aaa819b1a6c0b6c4090bdc0b027eaf64b">fprintf_filtered</a> (file, <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Use of exact watchpoints is %s.\n&quot;</span>), value);
<a name="l04239"></a>04239 }
<a name="l04240"></a>04240 
<a name="l04241"></a>04241 <span class="comment">/* Read a PPC instruction from memory.  */</span>
<a name="l04242"></a>04242 
<a name="l04243"></a>04243 <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l04244"></a><a class="code" href="rs6000-tdep_8c.html#a976500f9b9fd671cf60dc9870d073f2b">04244</a> <a class="code" href="rs6000-tdep_8c.html#a976500f9b9fd671cf60dc9870d073f2b">read_insn</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc)
<a name="l04245"></a>04245 {
<a name="l04246"></a>04246   <span class="keyword">struct </span>gdbarch *gdbarch = <a class="code" href="frame_8c.html#ab44507b5655da44e522ed5857835ede7">get_frame_arch</a> (frame);
<a name="l04247"></a>04247   <span class="keyword">enum</span> bfd_endian <a class="code" href="structgdbarch.html#a7a9dd6544406e9cbb574dae9d531346e">byte_order</a> = <a class="code" href="gdbarch_8c.html#abc300a3797421aa7342b288e1637483e">gdbarch_byte_order</a> (gdbarch);
<a name="l04248"></a>04248 
<a name="l04249"></a>04249   <span class="keywordflow">return</span> <a class="code" href="corefile_8c.html#a280cf81e766f60b30618ae3011f2cb07">read_memory_unsigned_integer</a> (pc, 4, byte_order);
<a name="l04250"></a>04250 }
<a name="l04251"></a>04251 
<a name="l04252"></a>04252 <span class="comment">/* Return non-zero if the instructions at PC match the series</span>
<a name="l04253"></a>04253 <span class="comment">   described in PATTERN, or zero otherwise.  PATTERN is an array of</span>
<a name="l04254"></a>04254 <span class="comment">   &#39;struct ppc_insn_pattern&#39; objects, terminated by an entry whose</span>
<a name="l04255"></a>04255 <span class="comment">   mask is zero.</span>
<a name="l04256"></a>04256 <span class="comment"></span>
<a name="l04257"></a>04257 <span class="comment">   When the match is successful, fill INSN[i] with what PATTERN[i]</span>
<a name="l04258"></a>04258 <span class="comment">   matched.  If PATTERN[i] is optional, and the instruction wasn&#39;t</span>
<a name="l04259"></a>04259 <span class="comment">   present, set INSN[i] to 0 (which is not a valid PPC instruction).</span>
<a name="l04260"></a>04260 <span class="comment">   INSN should have as many elements as PATTERN.  Note that, if</span>
<a name="l04261"></a>04261 <span class="comment">   PATTERN contains optional instructions which aren&#39;t present in</span>
<a name="l04262"></a>04262 <span class="comment">   memory, then INSN will have holes, so INSN[i] isn&#39;t necessarily the</span>
<a name="l04263"></a>04263 <span class="comment">   i&#39;th instruction in memory.  */</span>
<a name="l04264"></a>04264 
<a name="l04265"></a>04265 <span class="keywordtype">int</span>
<a name="l04266"></a><a class="code" href="rs6000-tdep_8c.html#a0f6b56f2eb902a2e79747eef49e7dd76">04266</a> <a class="code" href="ppc-tdep_8h.html#a0f6b56f2eb902a2e79747eef49e7dd76">ppc_insns_match_pattern</a> (<span class="keyword">struct</span> <a class="code" href="structframe__info.html">frame_info</a> *frame, <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a> pc,
<a name="l04267"></a>04267                          <span class="keyword">struct</span> <a class="code" href="structppc__insn__pattern.html">ppc_insn_pattern</a> *pattern,
<a name="l04268"></a>04268                          <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *insns)
<a name="l04269"></a>04269 {
<a name="l04270"></a>04270   <span class="keywordtype">int</span> i;
<a name="l04271"></a>04271   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> insn;
<a name="l04272"></a>04272 
<a name="l04273"></a>04273   <span class="keywordflow">for</span> (i = 0, insn = 0; pattern[i].<a class="code" href="structppc__insn__pattern.html#a54bdd85fc727caaa368bb0310203a95e">mask</a>; i++)
<a name="l04274"></a>04274     {
<a name="l04275"></a>04275       <span class="keywordflow">if</span> (insn == 0)
<a name="l04276"></a>04276         insn = <a class="code" href="rs6000-tdep_8c.html#a976500f9b9fd671cf60dc9870d073f2b">read_insn</a> (frame, pc);
<a name="l04277"></a>04277       insns[i] = 0;
<a name="l04278"></a>04278       <span class="keywordflow">if</span> ((insn &amp; pattern[i].mask) == pattern[i].<a class="code" href="structgdbarch.html#a2e98934f7a42feae42149766e3fa770d">data</a>)
<a name="l04279"></a>04279         {
<a name="l04280"></a>04280           insns[i] = insn;
<a name="l04281"></a>04281           pc += 4;
<a name="l04282"></a>04282           insn = 0;
<a name="l04283"></a>04283         }
<a name="l04284"></a>04284       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!pattern[i].optional)
<a name="l04285"></a>04285         <span class="keywordflow">return</span> 0;
<a name="l04286"></a>04286     }
<a name="l04287"></a>04287 
<a name="l04288"></a>04288   <span class="keywordflow">return</span> 1;
<a name="l04289"></a>04289 }
<a name="l04290"></a>04290 
<a name="l04291"></a>04291 <span class="comment">/* Return the &#39;d&#39; field of the d-form instruction INSN, properly</span>
<a name="l04292"></a>04292 <span class="comment">   sign-extended.  */</span>
<a name="l04293"></a>04293 
<a name="l04294"></a>04294 <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l04295"></a><a class="code" href="rs6000-tdep_8c.html#a20d758abb1710b1216901d373cc3b444">04295</a> <a class="code" href="ppc-tdep_8h.html#a20d758abb1710b1216901d373cc3b444">ppc_insn_d_field</a> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> insn)
<a name="l04296"></a>04296 {
<a name="l04297"></a>04297   <span class="keywordflow">return</span> ((((<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>) insn &amp; 0xffff) ^ 0x8000) - 0x8000);
<a name="l04298"></a>04298 }
<a name="l04299"></a>04299 
<a name="l04300"></a>04300 <span class="comment">/* Return the &#39;ds&#39; field of the ds-form instruction INSN, with the two</span>
<a name="l04301"></a>04301 <span class="comment">   zero bits concatenated at the right, and properly</span>
<a name="l04302"></a>04302 <span class="comment">   sign-extended.  */</span>
<a name="l04303"></a>04303 
<a name="l04304"></a>04304 <a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>
<a name="l04305"></a><a class="code" href="rs6000-tdep_8c.html#a6f842af3fb52ea940c9c19b0b4c913b2">04305</a> <a class="code" href="ppc-tdep_8h.html#a6f842af3fb52ea940c9c19b0b4c913b2">ppc_insn_ds_field</a> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> insn)
<a name="l04306"></a>04306 {
<a name="l04307"></a>04307   <span class="keywordflow">return</span> ((((<a class="code" href="defs_8h.html#aba5d0eb4e938c80ae1112a4439aaf71a">CORE_ADDR</a>) insn &amp; 0xfffc) ^ 0x8000) - 0x8000);
<a name="l04308"></a>04308 }
<a name="l04309"></a>04309 
<a name="l04310"></a>04310 <span class="comment">/* Initialization code.  */</span>
<a name="l04311"></a>04311 
<a name="l04312"></a>04312 <span class="comment">/* -Wmissing-prototypes */</span>
<a name="l04313"></a>04313 <span class="keyword">extern</span> <a class="code" href="defs_8h.html#a686ed07d4fdcdc366f2bc677216ca08d">initialize_file_ftype</a> <a class="code" href="rs6000-tdep_8c.html#a1fca9fec7f8a5e0c26654df04837b82f">_initialize_rs6000_tdep</a>;
<a name="l04314"></a>04314 
<a name="l04315"></a>04315 <span class="keywordtype">void</span>
<a name="l04316"></a><a class="code" href="rs6000-tdep_8c.html#aad07fd38974ad9eaebb442a8be2f0f8f">04316</a> <a class="code" href="rs6000-tdep_8c.html#a1fca9fec7f8a5e0c26654df04837b82f">_initialize_rs6000_tdep</a> (<span class="keywordtype">void</span>)
<a name="l04317"></a>04317 {
<a name="l04318"></a>04318   <a class="code" href="gdbarch_8c.html#a7583cf6ebd6f4484dec544d7d1af38a1">gdbarch_register</a> (bfd_arch_rs6000, <a class="code" href="rs6000-tdep_8c.html#a401524302eaa74e1cbd0d65d4096109c">rs6000_gdbarch_init</a>, <a class="code" href="rs6000-tdep_8c.html#aff242569dd85a1e02d2fa7e11af78af5">rs6000_dump_tdep</a>);
<a name="l04319"></a>04319   <a class="code" href="gdbarch_8c.html#a7583cf6ebd6f4484dec544d7d1af38a1">gdbarch_register</a> (bfd_arch_powerpc, <a class="code" href="rs6000-tdep_8c.html#a401524302eaa74e1cbd0d65d4096109c">rs6000_gdbarch_init</a>, <a class="code" href="rs6000-tdep_8c.html#aff242569dd85a1e02d2fa7e11af78af5">rs6000_dump_tdep</a>);
<a name="l04320"></a>04320 
<a name="l04321"></a>04321   <span class="comment">/* Initialize the standard target descriptions.  */</span>
<a name="l04322"></a>04322   <a class="code" href="powerpc-32_8c.html#af47b365a1979310252706c545d349dd1">initialize_tdesc_powerpc_32</a> ();
<a name="l04323"></a>04323   <a class="code" href="powerpc-altivec32_8c.html#aeb1f228162ea93281e39b91e07f63c1d">initialize_tdesc_powerpc_altivec32</a> ();
<a name="l04324"></a>04324   <a class="code" href="powerpc-vsx32_8c.html#a3de4653404d924ff6b5e134976252067">initialize_tdesc_powerpc_vsx32</a> ();
<a name="l04325"></a>04325   <a class="code" href="powerpc-403_8c.html#a9c9004bd101e80678f2b06891adf1ba8">initialize_tdesc_powerpc_403</a> ();
<a name="l04326"></a>04326   <a class="code" href="powerpc-403gc_8c.html#a877160c6f3ff035f09776835050a2a8f">initialize_tdesc_powerpc_403gc</a> ();
<a name="l04327"></a>04327   <a class="code" href="powerpc-405_8c.html#a53cf4d9a03591398eff9fe3932a3591a">initialize_tdesc_powerpc_405</a> ();
<a name="l04328"></a>04328   <a class="code" href="powerpc-505_8c.html#a1c50847e7ea3ec15d7f41e0062ecf3be">initialize_tdesc_powerpc_505</a> ();
<a name="l04329"></a>04329   <a class="code" href="powerpc-601_8c.html#a75f770fd20f447163844dc76fe4580a4">initialize_tdesc_powerpc_601</a> ();
<a name="l04330"></a>04330   <a class="code" href="powerpc-602_8c.html#a634ec0468cee317bb88fd93e43a5b403">initialize_tdesc_powerpc_602</a> ();
<a name="l04331"></a>04331   <a class="code" href="powerpc-603_8c.html#a75621473d21ce4120f27b1434962da25">initialize_tdesc_powerpc_603</a> ();
<a name="l04332"></a>04332   <a class="code" href="powerpc-604_8c.html#a04cde4397f07e8caedd80f4d54263d81">initialize_tdesc_powerpc_604</a> ();
<a name="l04333"></a>04333   <a class="code" href="powerpc-64_8c.html#a176d6718c2835f7825c371da96b7580c">initialize_tdesc_powerpc_64</a> ();
<a name="l04334"></a>04334   <a class="code" href="powerpc-altivec64_8c.html#a37ced119c9072060b3ab2df0690a05ce">initialize_tdesc_powerpc_altivec64</a> ();
<a name="l04335"></a>04335   <a class="code" href="powerpc-vsx64_8c.html#ad1dfc787ea9884eead7bf280d45b7ea0">initialize_tdesc_powerpc_vsx64</a> ();
<a name="l04336"></a>04336   <a class="code" href="powerpc-7400_8c.html#a875914281539dc6397fcec44a46abc27">initialize_tdesc_powerpc_7400</a> ();
<a name="l04337"></a>04337   <a class="code" href="powerpc-750_8c.html#a01e5726eafee3d76599e5b9b23c60825">initialize_tdesc_powerpc_750</a> ();
<a name="l04338"></a>04338   <a class="code" href="powerpc-860_8c.html#a084be9e3701006273a055ef4567de8b5">initialize_tdesc_powerpc_860</a> ();
<a name="l04339"></a>04339   <a class="code" href="powerpc-e500_8c.html#a07f759c4d4b2d9949c821facec014106">initialize_tdesc_powerpc_e500</a> ();
<a name="l04340"></a>04340   <a class="code" href="rs6000_8c.html#ab2d082caf075d1f0561e599fb6b099d3">initialize_tdesc_rs6000</a> ();
<a name="l04341"></a>04341 
<a name="l04342"></a>04342   <span class="comment">/* Add root prefix command for all &quot;set powerpc&quot;/&quot;show powerpc&quot;</span>
<a name="l04343"></a>04343 <span class="comment">     commands.  */</span>
<a name="l04344"></a>04344   <a class="code" href="cli-decode_8c.html#a8abc1e9af59eb3cb12bb03977d5e8e5a">add_prefix_cmd</a> (<span class="stringliteral">&quot;powerpc&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49afbf489a4abce7e8770b178aa54f0908b">no_class</a>, <a class="code" href="rs6000-tdep_8c.html#a76baf8470ca2153a73d9eb543291cf2d">set_powerpc_command</a>,
<a name="l04345"></a>04345                   <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Various PowerPC-specific commands.&quot;</span>),
<a name="l04346"></a>04346                   &amp;setpowerpccmdlist, <span class="stringliteral">&quot;set powerpc &quot;</span>, 0, &amp;<a class="code" href="cli-cmds_8c.html#a723e0174d833cba0aa82fb936a56c8fa">setlist</a>);
<a name="l04347"></a>04347 
<a name="l04348"></a>04348   <a class="code" href="cli-decode_8c.html#a8abc1e9af59eb3cb12bb03977d5e8e5a">add_prefix_cmd</a> (<span class="stringliteral">&quot;powerpc&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49afbf489a4abce7e8770b178aa54f0908b">no_class</a>, <a class="code" href="rs6000-tdep_8c.html#a1dc793d32c645f12960aeeb39c0a4369">show_powerpc_command</a>,
<a name="l04349"></a>04349                   <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Various PowerPC-specific commands.&quot;</span>),
<a name="l04350"></a>04350                   &amp;showpowerpccmdlist, <span class="stringliteral">&quot;show powerpc &quot;</span>, 0, &amp;<a class="code" href="cli-cmds_8c.html#a003932aa76fd3f41763ecc6bee5e2ca8">showlist</a>);
<a name="l04351"></a>04351 
<a name="l04352"></a>04352   <span class="comment">/* Add a command to allow the user to force the ABI.  */</span>
<a name="l04353"></a>04353   <a class="code" href="cli-decode_8c.html#a23ea3d5840b00a6fad40e165ba4feba7">add_setshow_auto_boolean_cmd</a> (<span class="stringliteral">&quot;soft-float&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49a92be6efbab6bd9647a6f7a2862712d9b">class_support</a>,
<a name="l04354"></a>04354                                 &amp;<a class="code" href="rs6000-tdep_8c.html#a02e0e11c401a3de597d3f3461c598cfa">powerpc_soft_float_global</a>,
<a name="l04355"></a>04355                                 <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Set whether to use a soft-float ABI.&quot;</span>),
<a name="l04356"></a>04356                                 <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Show whether to use a soft-float ABI.&quot;</span>),
<a name="l04357"></a>04357                                 NULL,
<a name="l04358"></a>04358                                 <a class="code" href="rs6000-tdep_8c.html#aacc05bdbf095221cb8cf3f141e48c0e2">powerpc_set_soft_float</a>, NULL,
<a name="l04359"></a>04359                                 &amp;setpowerpccmdlist, &amp;showpowerpccmdlist);
<a name="l04360"></a>04360 
<a name="l04361"></a>04361   <a class="code" href="cli-decode_8c.html#a79332268b2efb4698434e6ddf4d8c00e">add_setshow_enum_cmd</a> (<span class="stringliteral">&quot;vector-abi&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49a92be6efbab6bd9647a6f7a2862712d9b">class_support</a>, <a class="code" href="rs6000-tdep_8c.html#aa39a6478966f6a980eb80ab6f0528bb4">powerpc_vector_strings</a>,
<a name="l04362"></a>04362                         &amp;<a class="code" href="rs6000-tdep_8c.html#a13c1ca613e0ce4119da22a01dd89a523">powerpc_vector_abi_string</a>,
<a name="l04363"></a>04363                         <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Set the vector ABI.&quot;</span>),
<a name="l04364"></a>04364                         <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;Show the vector ABI.&quot;</span>),
<a name="l04365"></a>04365                         NULL, <a class="code" href="rs6000-tdep_8c.html#a39fba54820598d3bf2906bd6a4927044">powerpc_set_vector_abi</a>, NULL,
<a name="l04366"></a>04366                         &amp;setpowerpccmdlist, &amp;showpowerpccmdlist);
<a name="l04367"></a>04367 
<a name="l04368"></a>04368   <a class="code" href="cli-decode_8c.html#ad86a0f135b6c546ae7ffbb41fd72e14f">add_setshow_boolean_cmd</a> (<span class="stringliteral">&quot;exact-watchpoints&quot;</span>, <a class="code" href="command_8h.html#ad71b5a938f3966cf81293bca79acef49a92be6efbab6bd9647a6f7a2862712d9b">class_support</a>,
<a name="l04369"></a>04369                            &amp;<a class="code" href="breakpoint_8c.html#a4f281b4f2d2864ddf705bfe6280a9214">target_exact_watchpoints</a>,
<a name="l04370"></a>04370                            <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;\</span>
<a name="l04371"></a>04371 <span class="stringliteral">Set whether to use just one debug register for watchpoints on scalars.&quot;</span>),
<a name="l04372"></a>04372                            <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;\</span>
<a name="l04373"></a>04373 <span class="stringliteral">Show whether to use just one debug register for watchpoints on scalars.&quot;</span>),
<a name="l04374"></a>04374                            <a class="code" href="gdb__locale_8h.html#a32a3cf3d9dd914f5aeeca5423c157934">_</a>(<span class="stringliteral">&quot;\</span>
<a name="l04375"></a>04375 <span class="stringliteral">If true, GDB will use only one debug register when watching a variable of\n\</span>
<a name="l04376"></a>04376 <span class="stringliteral">scalar type, thus assuming that the variable is accessed through the address\n\</span>
<a name="l04377"></a>04377 <span class="stringliteral">of its first byte.&quot;</span>),
<a name="l04378"></a>04378                            NULL, <a class="code" href="rs6000-tdep_8c.html#ad38e0f830b766b080bbeb93f012e6c4d">show_powerpc_exact_watchpoints</a>,
<a name="l04379"></a>04379                            &amp;setpowerpccmdlist, &amp;showpowerpccmdlist);
<a name="l04380"></a>04380 }
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 11 2013 14:13:32 for GDB (xrefs) by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
